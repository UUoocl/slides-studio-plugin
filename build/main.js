/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var D8=Object.create;var iu=Object.defineProperty;var M8=Object.getOwnPropertyDescriptor;var j8=Object.getOwnPropertyNames;var q8=Object.getPrototypeOf,L8=Object.prototype.hasOwnProperty;var F8=(t,e,r)=>e in t?iu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var E=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),U8=(t,e)=>{for(var r in e)iu(t,r,{get:e[r],enumerable:!0})},YP=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of j8(e))!L8.call(t,s)&&s!==r&&iu(t,s,{get:()=>e[s],enumerable:!(n=M8(e,s))||n.enumerable});return t};var Mr=(t,e,r)=>(r=t!=null?D8(q8(t)):{},YP(e||!t||!t.__esModule?iu(r,"default",{value:t,enumerable:!0}):r,t)),B8=t=>YP(iu({},"__esModule",{value:!0}),t);var Bh=(t,e,r)=>(F8(t,typeof e!="symbol"?e+"":e,r),r),D_=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var L=(t,e,r)=>(D_(t,e,"read from private field"),r?r.call(t):e.get(t)),At=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},ut=(t,e,r,n)=>(D_(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r);var xi=(t,e,r)=>(D_(t,e,"access private method"),r);var QP=E((wNe,XP)=>{"use strict";function V8(t){var e=new t,r=e;function n(){var i=e;return i.next?e=i.next:(e=new t,r=e),i.next=null,i}function s(i){r.next=i,r=i}return{get:n,release:s}}XP.exports=V8});var j_=E((bNe,M_)=>{"use strict";var z8=QP();function ZP(t,e,r){if(typeof t=="function"&&(r=e,e=t,t=null),!(r>=1))throw new Error("fastqueue concurrency must be equal to or greater than 1");var n=z8(H8),s=null,i=null,o=0,a=null,c={push:m,drain:ln,saturated:ln,pause:u,paused:!1,get concurrency(){return r},set concurrency(S){if(!(S>=1))throw new Error("fastqueue concurrency must be equal to or greater than 1");if(r=S,!c.paused)for(;s&&o<r;)o++,g()},running:l,resume:f,idle:h,length:d,getQueue:p,unshift:y,empty:ln,kill:w,killAndDrain:_,error:v};return c;function l(){return o}function u(){c.paused=!0}function d(){for(var S=s,$=0;S;)S=S.next,$++;return $}function p(){for(var S=s,$=[];S;)$.push(S.value),S=S.next;return $}function f(){if(c.paused){if(c.paused=!1,s===null){o++,g();return}for(;s&&o<r;)o++,g()}}function h(){return o===0&&c.length()===0}function m(S,$){var T=n.get();T.context=t,T.release=g,T.value=S,T.callback=$||ln,T.errorHandler=a,o>=r||c.paused?i?(i.next=T,i=T):(s=T,i=T,c.saturated()):(o++,e.call(t,T.value,T.worked))}function y(S,$){var T=n.get();T.context=t,T.release=g,T.value=S,T.callback=$||ln,T.errorHandler=a,o>=r||c.paused?s?(T.next=s,s=T):(s=T,i=T,c.saturated()):(o++,e.call(t,T.value,T.worked))}function g(S){S&&n.release(S);var $=s;$&&o<=r?c.paused?o--:(i===s&&(i=null),s=$.next,$.next=null,e.call(t,$.value,$.worked),i===null&&c.empty()):--o===0&&c.drain()}function w(){s=null,i=null,c.drain=ln}function _(){s=null,i=null,c.drain(),c.drain=ln}function v(S){a=S}}function ln(){}function H8(){this.value=null,this.callback=ln,this.next=null,this.release=ln,this.context=null,this.errorHandler=null;var t=this;this.worked=function(r,n){var s=t.callback,i=t.errorHandler,o=t.value;t.value=null,t.callback=ln,t.errorHandler&&i(r,o),s.call(t.context,r,n),t.release(t)}}function G8(t,e,r){typeof t=="function"&&(r=e,e=t,t=null);function n(u,d){e.call(this,u).then(function(p){d(null,p)},d)}var s=ZP(t,n,r),i=s.push,o=s.unshift;return s.push=a,s.unshift=c,s.drained=l,s;function a(u){var d=new Promise(function(p,f){i(u,function(h,m){if(h){f(h);return}p(m)})});return d.catch(ln),d}function c(u){var d=new Promise(function(p,f){o(u,function(h,m){if(h){f(h);return}p(m)})});return d.catch(ln),d}function l(){var u=new Promise(function(d){process.nextTick(function(){if(s.idle())d();else{var p=s.drain;s.drain=function(){typeof p=="function"&&p(),d(),s.drain=p}}})});return u}}M_.exports=ZP;M_.exports.promise=G8});var q_=E((ENe,ou)=>{"use strict";var{format:W8}=require("util");function K8(){return`${this.name} [${this.code}]: ${this.message}`}var Vh=Symbol.for("fastify-error-generic");function tc(t,e,r=500,n=Error,s=tc.captureStackTrace){let i=t===Vh;if(i&&(t="FST_ERR"),!t)throw new Error("Fastify error code must not be empty");if(!e)throw new Error("Fastify error message must not be empty");t=t.toUpperCase(),!r&&(r=void 0);let o=Symbol.for(`fastify-error ${t}`);function a(...c){if(!new.target)return new a(...c);this.code=t,this.name="FastifyError",this.statusCode=r;let l=c.length-1;l!==-1&&c[l]&&typeof c[l]=="object"&&"cause"in c[l]&&(this.cause=c.pop().cause),this.message=W8(e,...c),Error.stackTraceLimit&&s&&Error.captureStackTrace(this,a)}return a.prototype=Object.create(n.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0},[Vh]:{value:!0,enumerable:!1,writable:!1,configurable:!1},[o]:{value:!0,enumerable:!1,writable:!1,configurable:!1}}),i?Object.defineProperty(a,Symbol.hasInstance,{value(c){return c&&c[Vh]},configurable:!1,writable:!1,enumerable:!1}):Object.defineProperty(a,Symbol.hasInstance,{value(c){return c&&c[o]},configurable:!1,writable:!1,enumerable:!1}),a.prototype[Symbol.toStringTag]="Error",a.prototype.toString=K8,a}tc.captureStackTrace=!0;var J8=tc(Vh,"Fastify Error",500,Error);ou.exports=tc;ou.exports.FastifyError=J8;ou.exports.default=tc;ou.exports.createError=tc});var zh=E((SNe,ex)=>{"use strict";var{createError:Ni}=q_();ex.exports={AVV_ERR_EXPOSE_ALREADY_DEFINED:Ni("AVV_ERR_EXPOSE_ALREADY_DEFINED","'%s' is already defined, specify an expose option for '%s'"),AVV_ERR_ATTRIBUTE_ALREADY_DEFINED:Ni("AVV_ERR_ATTRIBUTE_ALREADY_DEFINED","'%s' is already defined"),AVV_ERR_CALLBACK_NOT_FN:Ni("AVV_ERR_CALLBACK_NOT_FN","Callback for '%s' hook is not a function. Received: '%s'"),AVV_ERR_PLUGIN_NOT_VALID:Ni("AVV_ERR_PLUGIN_NOT_VALID","Plugin must be a function or a promise. Received: '%s'"),AVV_ERR_ROOT_PLG_BOOTED:Ni("AVV_ERR_ROOT_PLG_BOOTED","Root plugin has already booted"),AVV_ERR_PARENT_PLG_LOADED:Ni("AVV_ERR_PARENT_PLG_LOADED","Impossible to load '%s' plugin because the parent '%s' was already loaded"),AVV_ERR_READY_TIMEOUT:Ni("AVV_ERR_READY_TIMEOUT","Plugin did not start in time: '%s'. You may have forgotten to call 'done' function or to resolve a Promise"),AVV_ERR_PLUGIN_EXEC_TIMEOUT:Ni("AVV_ERR_PLUGIN_EXEC_TIMEOUT","Plugin did not start in time: '%s'. You may have forgotten to call 'done' function or to resolve a Promise")}});var rc=E((TNe,tx)=>{"use strict";var Y8=Symbol("avvio.Boot"),X8=Symbol("isOnCloseHandler"),Q8=Symbol("avvio.ThenifyDoNotWrap"),Z8=Symbol("avvio.TimeTree.untrackNode"),e9=Symbol("avvio.TimeTree.trackNode"),t9=Symbol("avvio.TimeTree.getParent"),r9=Symbol("avvio.TimeTree.getNode"),n9=Symbol("avvio.TimeTree.addNode"),s9=Symbol.for("plugin-meta");tx.exports={kAvvio:Y8,kIsOnCloseHandler:X8,kThenifyDoNotWrap:Q8,kUntrackNode:Z8,kTrackNode:e9,kGetParent:t9,kGetNode:r9,kAddNode:n9,kPluginMeta:s9}});var cx=E((RNe,ax)=>{"use strict";var{kUntrackNode:rx,kTrackNode:L_,kGetParent:nx,kGetNode:sx,kAddNode:ix}=rc(),F_=class{constructor(){this.root=null,this.tableId=new Map,this.tableLabel=new Map}[L_](e){this.tableId.set(e.id,e),this.tableLabel.has(e.label)?this.tableLabel.get(e.label).push(e):this.tableLabel.set(e.label,[e])}[rx](e){this.tableId.delete(e.id);let r=this.tableLabel.get(e.label);r.pop(),r.length===0&&this.tableLabel.delete(e.label)}[nx](e){if(e===null)return null;if(this.tableLabel.has(e)){let r=this.tableLabel.get(e);return r[r.length-1]}else return null}[sx](e){return this.tableId.get(e)}[ix](e,r,n){let s=this[nx](e);if(s===null)return this.root={parent:null,id:"root",label:r,nodes:[],start:n,stop:null,diff:-1},this[L_](this.root),this.root.id;let o=`${r}-${Math.random()}`,a={parent:e,id:o,label:r,nodes:[],start:n,stop:null,diff:-1};return s.nodes.push(a),this[L_](a),o}start(e,r,n=Date.now()){return this[ix](e,r,n)}stop(e,r=Date.now()){let n=this[sx](e);n&&(n.stop=r,n.diff=n.stop-n.start||0,this[rx](n))}toJSON(){return Object.assign({},this.root)}prettyPrint(){return ox(this.toJSON())}};function ox(t,e=""){let r=e,n=t.nodes.length,s=n-1;r+=`${t.label} ${t.diff} ms
`;for(let i=0;i<n;++i){let o=t.nodes[i],a=e+(i===s?"  ":"\u2502 ");r+=e,r+=i===s?"\u2514\u2500":"\u251C\u2500",r+=o.nodes.length===0?"\u2500 ":"\u252C ",r+=ox(o,a).slice(e.length+2)}return r}ax.exports={TimeTree:F_}});var Hh=E(($Ne,lx)=>{"use strict";var{debuglog:i9}=require("util"),o9=i9("avvio");lx.exports={debug:o9}});var fx=E((ONe,ux)=>{"use strict";function a9(){let t={resolve:null,reject:null,promise:null};return t.promise=new Promise((e,r)=>{t.resolve=e,t.reject=r}),t}ux.exports={createPromise:a9}});var hx=E((PNe,dx)=>{"use strict";var{kPluginMeta:U_}=rc();function c9(t,e){return t[U_]&&t[U_].name?t[U_].name:e&&e.name?e.name:t.name?t.name:t.toString().split(`
`).slice(0,2).map(r=>r.trim()).join(" -- ")}dx.exports={getPluginName:c9}});var Gh=E((xNe,px)=>{"use strict";function l9(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}px.exports={isPromiseLike:l9}});var gx=E((NNe,mx)=>{"use strict";var{EventEmitter:u9}=require("events"),{inherits:f9}=require("util"),{debug:Vt}=Hh(),{createPromise:d9}=fx(),{AVV_ERR_PLUGIN_EXEC_TIMEOUT:h9}=zh(),{getPluginName:p9}=hx(),{isPromiseLike:m9}=Gh();function nc(t,e,r,n,s){this.queue=t,this.func=e,this.options=r,this.isAfter=n,this.timeout=s,this.started=!1,this.name=p9(e,r),this.queue.pause(),this._error=null,this.loaded=!1,this._promise=null,this.startTime=null}f9(nc,u9);nc.prototype.exec=function(t,e){Vt("exec",this.name),this.server=t;let r=this.func,n=this.name,s=!1;this.options=typeof this.options=="function"?this.options(this.server):this.options;let i=null,o=c=>{if(s){Vt("loading complete",n);return}this._error=c,Vt(c?"exec errored":"exec completed",n),s=!0,i&&clearTimeout(i),e(c)};this.timeout>0&&(Vt("setting up timeout",n,this.timeout),i=setTimeout(function(){Vt("timed out",n),i=null;let c=new h9(n);c.fn=r,o(c)},this.timeout)),this.started=!0,this.startTime=Date.now(),this.emit("start",this.server?this.server.name:null,this.name,Date.now());let a=r(this.server,this.options,o);m9(a)?(Vt("exec: resolving promise",n),a.then(()=>process.nextTick(o),c=>process.nextTick(o,c))):r.length<3&&o()};nc.prototype.loadedSoFar=function(){if(Vt("loadedSoFar",this.name),this.loaded)return Promise.resolve();let t=()=>{this.server.after((r,n)=>{this._error=r,this.queue.pause(),this._promise&&(r?(Vt("rejecting promise",this.name,r),this._promise.reject(r)):(Vt("resolving promise",this.name),this._promise.resolve()),this._promise=null),process.nextTick(n,r)}),this.queue.resume()},e;return this._promise?e=Promise.resolve():(this._promise=d9(),e=this._promise.promise,this.server?t():this.on("start",t)),e};nc.prototype.enqueue=function(t,e){Vt("enqueue",this.name,t.name),this.emit("enqueue",this.server?this.server.name:null,this.name,Date.now()),this.queue.push(t,e)};nc.prototype.finish=function(t,e){Vt("finish",this.name,t);let r=()=>{this.loaded||(Vt("loaded",this.name),this.emit("loaded",this.server?this.server.name:null,this.name,Date.now()),this.loaded=!0,e(t))};if(t){this._promise&&(this._promise.reject(t),this._promise=null),r();return}let n=()=>{if(Vt("check",this.name,this.queue.length(),this.queue.running(),this._promise),this.queue.length()===0&&this.queue.running()===0)if(this._promise){let s=()=>{Vt("wrap"),queueMicrotask(n)};this._promise.resolve(),this._promise.promise.then(s,s),this._promise=null}else r();else Vt("delayed",this.name),this.queue.drain=()=>{Vt("drain",this.name),this.queue.drain=g9,queueMicrotask(n)}};queueMicrotask(n),this.queue.resume()};function g9(){}mx.exports={Plugin:nc}});var _x=E((CNe,yx)=>{"use strict";var{AVV_ERR_PLUGIN_NOT_VALID:B_}=zh();function y9(t){if(!(t&&(typeof t=="function"||typeof t.then=="function")))throw Array.isArray(t)?new B_("array"):t===null?new B_("null"):new B_(typeof t)}yx.exports={validatePlugin:y9}});var wx=E((INe,vx)=>{"use strict";function _9(t){return t!==null&&typeof t=="object"&&typeof t.default=="function"}vx.exports={isBundledOrTypescriptPlugin:_9}});var Sx=E((ANe,Ex)=>{"use strict";var{debug:bx}=Hh(),{kThenifyDoNotWrap:V_}=rc();function v9(){if(this.booted){bx("thenify returning undefined because we are already booted");return}if(this[V_]){this[V_]=!1;return}return bx("thenify"),(t,e)=>this._loadRegistered().then(()=>(this[V_]=!0,t(this._server)),e)}Ex.exports={thenify:v9}});var Rx=E((kNe,Tx)=>{"use strict";var{isPromiseLike:w9}=Gh(),{kAvvio:b9}=rc();function E9(t,e,r){let n=t.apply(t,e);w9(n)&&!n[b9]?n.then(()=>process.nextTick(r),s=>process.nextTick(r,s)):r&&process.nextTick(r)}Tx.exports={executeWithThenable:E9}});var kx=E((DNe,Ax)=>{"use strict";var Wh=j_(),S9=require("events").EventEmitter,T9=require("util").inherits,{AVV_ERR_EXPOSE_ALREADY_DEFINED:au,AVV_ERR_CALLBACK_NOT_FN:sc,AVV_ERR_ROOT_PLG_BOOTED:R9,AVV_ERR_READY_TIMEOUT:$9,AVV_ERR_ATTRIBUTE_ALREADY_DEFINED:O9}=zh(),{kAvvio:Px,kIsOnCloseHandler:xx}=rc(),{TimeTree:P9}=cx(),{Plugin:Nx}=gx(),{debug:ic}=Hh(),{validatePlugin:x9}=_x(),{isBundledOrTypescriptPlugin:N9}=wx(),{isPromiseLike:C9}=Gh(),{thenify:Cx}=Sx(),{executeWithThenable:$x}=Rx();function Rt(t,e,r){if(typeof t=="function"&&arguments.length===1&&(r=t,e={},t=null),typeof e=="function"&&(r=e,e={}),e=e||{},e.autostart=e.autostart!==!1,e.timeout=Number(e.timeout)||0,e.expose=e.expose||{},!new.target)return new Rt(t,e,r);this._server=t||this,this._opts=e,t&&this._expose(),this._current=[],this._error=null,this._lastUsed=null,this.setMaxListeners(0),r&&this.once("start",r),this.started=!1,this.booted=!1,this.pluginTree=new P9,this._readyQ=Wh(this,Ix,1),this._readyQ.pause(),this._readyQ.drain=()=>{this.emit("start"),this._readyQ.drain=Ox},this._closeQ=Wh(this,A9,1),this._closeQ.pause(),this._closeQ.drain=()=>{this.emit("close"),this._closeQ.drain=Ox},this._doStart=null;let n=this;this._root=new Nx(Wh(this,this._loadPluginNextTick,1),function(i,o,a){n._doStart=a,o.autostart&&n.start()},e,!1,0),this._trackPluginLoading(this._root),this._loadPlugin(this._root,s=>{ic("root plugin ready");try{this.emit("preReady"),this._root=null}catch(i){s=s||this._error||i}if(s){if(this._error=s,this._readyQ.length()===0)throw s}else this.booted=!0;this._readyQ.resume()})}T9(Rt,S9);Rt.prototype.start=function(){return this.started=!0,process.nextTick(this._doStart),this};Rt.prototype.override=function(t,e,r){return t};Rt.prototype[Px]=!0;Rt.prototype.use=function(t,e){return this._lastUsed=this._addPlugin(t,e,!1),this};Rt.prototype._loadRegistered=function(){let t=this._current[0];return!this.started&&!this.booted&&process.nextTick(()=>this._root.queue.resume()),t?t.loadedSoFar():Promise.resolve()};Object.defineProperty(Rt.prototype,"then",{get:Cx});Rt.prototype._addPlugin=function(t,e,r){if(N9(t)&&(t=t.default),x9(t),e=e||{},this.booted)throw new R9;let n=this._current[0],s=this._opts.timeout;if(!n.loaded&&n.timeout>0){let o=Date.now()-n.startTime;s=n.timeout-(o+3)}let i=new Nx(Wh(this,this._loadPluginNextTick,1),t,e,r,s);if(this._trackPluginLoading(i),n.loaded)throw new Error(i.name,n.name);return n.enqueue(i,o=>{o&&(this._error=o)}),i};Rt.prototype._expose=function(){let e=this,r=e._server,{use:n="use",after:s="after",ready:i="ready",onClose:o="onClose",close:a="close"}=this._opts.expose;if(r[n])throw new au(n,"use");if(r[n]=function(c,l){return e.use(c,l),this},r[s])throw new au(s,"after");if(r[s]=function(c){return typeof c!="function"?e._loadRegistered():(e.after(z_(c,this)),this)},r[i])throw new au(i,"ready");if(r[i]=function(c){if(c&&typeof c!="function")throw new sc(i,typeof c);return e.ready(c?z_(c,this):void 0)},r[o])throw new au(o,"onClose");if(r[o]=function(c){if(typeof c!="function")throw new sc(o,typeof c);return e.onClose(k9(c,this)),this},r[a])throw new au(a,"close");if(r[a]=function(c){if(c&&typeof c!="function")throw new sc(a,typeof c);return c?(e.close(z_(c,this)),this):e.close()},r.then)throw new O9("then");Object.defineProperty(r,"then",{get:Cx.bind(e)}),r[Px]=!0};Rt.prototype.after=function(t){if(!t)return this._loadRegistered();this._addPlugin(e.bind(this),{},!0);function e(r,n,s){Ix.call(this,t,s)}return this};Rt.prototype.onClose=function(t){if(typeof t!="function")throw new sc("onClose",typeof t);return t[xx]=!0,this._closeQ.unshift(t,e=>{e&&(this._error=e)}),this};Rt.prototype.close=function(t){let e;if(t){if(typeof t!="function")throw new sc("close",typeof t)}else e=new Promise(function(r,n){t=function(s){if(s)return n(s);r()}});return this.ready(()=>{this._error=null,this._closeQ.push(t),process.nextTick(this._closeQ.resume.bind(this._closeQ))}),e};Rt.prototype.ready=function(t){if(t){if(typeof t!="function")throw new sc("ready",typeof t);this._readyQ.push(t),queueMicrotask(this.start.bind(this));return}return new Promise((e,r)=>{this._readyQ.push(s),this.start();let n=this._current[0].server;function s(i,o,a){i?r(i):e(n),process.nextTick(a)}})};Rt.prototype._trackPluginLoading=function(t){let e=this._current[0]?.name||null;t.once("start",(r,n,s)=>{let i=this.pluginTree.start(e||null,n,s);t.once("loaded",(o,a,c)=>{this.pluginTree.stop(i,c)})})};Rt.prototype.prettyPrint=function(){return this.pluginTree.prettyPrint()};Rt.prototype.toJSON=function(){return this.pluginTree.toJSON()};Rt.prototype._loadPlugin=function(t,e){let r=this;if(C9(t.func)){t.func.then(o=>{typeof o.default=="function"&&(o=o.default),t.func=o,this._loadPlugin(t,e)},e);return}let n=r._current[0];if(r._current.unshift(t),r._error&&!t.isAfter){ic("skipping loading of plugin as instance errored and it is not an after",t.name),process.nextTick(i);return}let s=n&&n.server||r._server;if(!t.isAfter)try{s=r.override(s,t.func,t.options)}catch(o){return ic("override errored",t.name),i(o)}t.exec(s,i);function i(o){t.finish(o,a=>{r._current.shift(),e(a)})}};Rt.prototype._loadPluginNextTick=function(t,e){process.nextTick(this._loadPlugin.bind(this),t,e)};function Ox(){}function Ix(t,e){let r=this._server,n=this._error;if(this._error=null,t.length===0)this._error=n,$x(t,[],e);else if(t.length===1)$x(t,[n],e);else if(this._opts.timeout===0){let s=i=>{this._error=i,e(this._error)};t.length===2?t(n,s):t(n,r,s)}else I9.call(this,t,n,r,e)}function I9(t,e,r,n){let s=t.unwrappedName??t.name;ic("setting up ready timeout",s,this._opts.timeout);let i=setTimeout(()=>{ic("timed out",s),i=null;let a=new $9(s);a.fn=t,this._error=a,n(a)},this._opts.timeout);t.length===2?t(e,o.bind(this)):t(e,r,o.bind(this));function o(a){i&&(clearTimeout(i),this._error=a,n(this._error))}}function A9(t,e){let r=this._server,n=t[xx];if(t.length===0||t.length===1){let s;n?s=t(r):s=t(this._error),s&&typeof s.then=="function"?(ic("resolving close/onClose promise"),s.then(()=>process.nextTick(e),i=>process.nextTick(e,i))):process.nextTick(e)}else t.length===2?t(n?r:this._error,e):n?t(r,e):t(this._error,r,e)}function k9(t,e){return r.bind(e);function r(n,s){let i;t.length===0?(i=t(),i&&i.then?i.then(function(){process.nextTick(s)},s):process.nextTick(s)):t.length===1?(i=t(this),i&&i.then?i.then(function(){process.nextTick(s)},s):process.nextTick(s)):t(this,s)}}function z_(t,e){let r=n.bind(e);return r.unwrappedName=t.name,r;function n(s,i){let o;t?t.length===0?(o=t(),o&&o.then?o.then(function(){process.nextTick(i,s)},i):process.nextTick(i,s)):t.length===1?(o=t(s),o&&o.then?o.then(function(){process.nextTick(i)},i):process.nextTick(i)):t.length===2?t(s,i):t(s,this,i):process.nextTick(i)}}Ax.exports=Rt});var Nt=E((MNe,Dx)=>{"use strict";var D9={kAvvioBoot:Symbol("fastify.avvioBoot"),kChildren:Symbol("fastify.children"),kServerBindings:Symbol("fastify.serverBindings"),kBodyLimit:Symbol("fastify.bodyLimit"),kSupportedHTTPMethods:Symbol("fastify.acceptedHTTPMethods"),kRoutePrefix:Symbol("fastify.routePrefix"),kLogLevel:Symbol("fastify.logLevel"),kLogSerializers:Symbol("fastify.logSerializers"),kHooks:Symbol("fastify.hooks"),kContentTypeParser:Symbol("fastify.contentTypeParser"),kState:Symbol("fastify.state"),kOptions:Symbol("fastify.options"),kDisableRequestLogging:Symbol("fastify.disableRequestLogging"),kPluginNameChain:Symbol("fastify.pluginNameChain"),kRouteContext:Symbol("fastify.context"),kGenReqId:Symbol("fastify.genReqId"),kHttp2ServerSessions:Symbol("fastify.http2ServerSessions"),kSchemaController:Symbol("fastify.schemaController"),kSchemaHeaders:Symbol("headers-schema"),kSchemaParams:Symbol("params-schema"),kSchemaQuerystring:Symbol("querystring-schema"),kSchemaBody:Symbol("body-schema"),kSchemaResponse:Symbol("response-schema"),kSchemaErrorFormatter:Symbol("fastify.schemaErrorFormatter"),kSchemaVisited:Symbol("fastify.schemas.visited"),kRequest:Symbol("fastify.Request"),kRequestPayloadStream:Symbol("fastify.RequestPayloadStream"),kRequestAcceptVersion:Symbol("fastify.RequestAcceptVersion"),kRequestCacheValidateFns:Symbol("fastify.request.cache.validateFns"),kRequestOriginalUrl:Symbol("fastify.request.originalUrl"),kFourOhFour:Symbol("fastify.404"),kCanSetNotFoundHandler:Symbol("fastify.canSetNotFoundHandler"),kFourOhFourLevelInstance:Symbol("fastify.404LogLevelInstance"),kFourOhFourContext:Symbol("fastify.404ContextKey"),kDefaultJsonParse:Symbol("fastify.defaultJSONParse"),kReply:Symbol("fastify.Reply"),kReplySerializer:Symbol("fastify.reply.serializer"),kReplyIsError:Symbol("fastify.reply.isError"),kReplyHeaders:Symbol("fastify.reply.headers"),kReplyTrailers:Symbol("fastify.reply.trailers"),kReplyHasStatusCode:Symbol("fastify.reply.hasStatusCode"),kReplyHijacked:Symbol("fastify.reply.hijacked"),kReplyStartTime:Symbol("fastify.reply.startTime"),kReplyNextErrorHandler:Symbol("fastify.reply.nextErrorHandler"),kReplyEndTime:Symbol("fastify.reply.endTime"),kReplyErrorHandlerCalled:Symbol("fastify.reply.errorHandlerCalled"),kReplyIsRunningOnErrorHook:Symbol("fastify.reply.isRunningOnErrorHook"),kReplySerializerDefault:Symbol("fastify.replySerializerDefault"),kReplyCacheSerializeFns:Symbol("fastify.reply.cache.serializeFns"),kTestInternals:Symbol("fastify.testInternals"),kErrorHandler:Symbol("fastify.errorHandler"),kErrorHandlerAlreadySet:Symbol("fastify.errorHandlerAlreadySet"),kChildLoggerFactory:Symbol("fastify.childLoggerFactory"),kHasBeenDecorated:Symbol("fastify.hasBeenDecorated"),kKeepAliveConnections:Symbol("fastify.keepAliveConnections"),kRouteByFastify:Symbol("fastify.routeByFastify")};Dx.exports=D9});var jx=E((jNe,Kh)=>{"use strict";var{format:H_}=require("util");function M9(t){return Mx({...t,name:"DeprecationWarning"})}function Mx({name:t,code:e,message:r,unlimited:n=!1}={}){if(!t)throw new Error("Warning name must not be empty");if(!e)throw new Error("Warning code must not be empty");if(!r)throw new Error("Warning message must not be empty");if(typeof n!="boolean")throw new Error("Warning opts.unlimited must be a boolean");e=e.toUpperCase();let s={[t]:function(o,a,c){i.emitted===!0&&i.unlimited!==!0||(i.emitted=!0,process.emitWarning(i.format(o,a,c),i.name,i.code))}};n&&(s={[t]:function(o,a,c){i.emitted=!0,process.emitWarning(i.format(o,a,c),i.name,i.code)}});let i=s[t];return i.emitted=!1,i.message=r,i.unlimited=n,i.code=e,i.format=function(o,a,c){let l;return o&&a&&c?l=H_(r,o,a,c):o&&a?l=H_(r,o,a):o?l=H_(r,o):l=r,l},i}var G_={createWarning:Mx,createDeprecation:M9};Kh.exports=G_;Kh.exports.default=G_;Kh.exports.processWarning=G_});var oc=E((qNe,qx)=>{"use strict";var{createWarning:cu}=jx(),j9=cu({name:"FastifyWarning",code:"FSTWRN001",message:"The %s schema for %s: %s is missing. This may indicate the schema is not well specified.",unlimited:!0}),q9=cu({name:"FastifyWarning",code:"FSTWRN003",message:"The %s mixes async and callback styles that may lead to unhandled rejections. Please use only one of them.",unlimited:!0}),L9=cu({name:"FastifyWarning",code:"FSTWRN004",message:"It seems that you are overriding an errorHandler in the same scope, which can lead to subtle bugs.",unlimited:!0}),F9=cu({name:"FastifySecurity",code:"FSTSEC001",message:'You are using /%s/ Content-Type which may be vulnerable to CORS attack. Please make sure your RegExp start with "^" or include ";?" to proper detection of the essence MIME type.',unlimited:!0}),U9=cu({name:"FastifyWarning",code:"FSTDEP022",message:'The router options for %s property access is deprecated. Please use "options.routerOptions" instead for accessing router options. The router options will be removed in `fastify@6`.',unlimited:!0});qx.exports={FSTWRN001:j9,FSTWRN003:q9,FSTWRN004:L9,FSTSEC001:F9,FSTDEP022:U9}});var zt=E((LNe,Jh)=>{"use strict";var F=q_(),Do={FST_ERR_NOT_FOUND:F("FST_ERR_NOT_FOUND","Not Found",404),FST_ERR_OPTIONS_NOT_OBJ:F("FST_ERR_OPTIONS_NOT_OBJ","Options must be an object",500,TypeError),FST_ERR_QSP_NOT_FN:F("FST_ERR_QSP_NOT_FN","querystringParser option should be a function, instead got '%s'",500,TypeError),FST_ERR_SCHEMA_CONTROLLER_BUCKET_OPT_NOT_FN:F("FST_ERR_SCHEMA_CONTROLLER_BUCKET_OPT_NOT_FN","schemaController.bucket option should be a function, instead got '%s'",500,TypeError),FST_ERR_SCHEMA_ERROR_FORMATTER_NOT_FN:F("FST_ERR_SCHEMA_ERROR_FORMATTER_NOT_FN","schemaErrorFormatter option should be a non async function. Instead got '%s'.",500,TypeError),FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_OBJ:F("FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_OBJ","ajv.customOptions option should be an object, instead got '%s'",500,TypeError),FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_ARR:F("FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_ARR","ajv.plugins option should be an array, instead got '%s'",500,TypeError),FST_ERR_VALIDATION:F("FST_ERR_VALIDATION","%s",400),FST_ERR_LISTEN_OPTIONS_INVALID:F("FST_ERR_LISTEN_OPTIONS_INVALID","Invalid listen options: '%s'",500,TypeError),FST_ERR_ERROR_HANDLER_NOT_FN:F("FST_ERR_ERROR_HANDLER_NOT_FN","Error Handler must be a function",500,TypeError),FST_ERR_ERROR_HANDLER_ALREADY_SET:F("FST_ERR_ERROR_HANDLER_ALREADY_SET","Error Handler already set in this scope. Set 'allowErrorHandlerOverride: true' to allow overriding.",500,TypeError),FST_ERR_CTP_ALREADY_PRESENT:F("FST_ERR_CTP_ALREADY_PRESENT","Content type parser '%s' already present."),FST_ERR_CTP_INVALID_TYPE:F("FST_ERR_CTP_INVALID_TYPE","The content type should be a string or a RegExp",500,TypeError),FST_ERR_CTP_EMPTY_TYPE:F("FST_ERR_CTP_EMPTY_TYPE","The content type cannot be an empty string",500,TypeError),FST_ERR_CTP_INVALID_HANDLER:F("FST_ERR_CTP_INVALID_HANDLER","The content type handler should be a function",500,TypeError),FST_ERR_CTP_INVALID_PARSE_TYPE:F("FST_ERR_CTP_INVALID_PARSE_TYPE","The body parser can only parse your data as 'string' or 'buffer', you asked '%s' which is not supported.",500,TypeError),FST_ERR_CTP_BODY_TOO_LARGE:F("FST_ERR_CTP_BODY_TOO_LARGE","Request body is too large",413,RangeError),FST_ERR_CTP_INVALID_MEDIA_TYPE:F("FST_ERR_CTP_INVALID_MEDIA_TYPE","Unsupported Media Type: %s",415),FST_ERR_CTP_INVALID_CONTENT_LENGTH:F("FST_ERR_CTP_INVALID_CONTENT_LENGTH","Request body size did not match Content-Length",400,RangeError),FST_ERR_CTP_EMPTY_JSON_BODY:F("FST_ERR_CTP_EMPTY_JSON_BODY","Body cannot be empty when content-type is set to 'application/json'",400),FST_ERR_CTP_INVALID_JSON_BODY:F("FST_ERR_CTP_INVALID_JSON_BODY","Body is not valid JSON but content-type is set to 'application/json'",400),FST_ERR_CTP_INSTANCE_ALREADY_STARTED:F("FST_ERR_CTP_INSTANCE_ALREADY_STARTED",'Cannot call "%s" when fastify instance is already started!',400),FST_ERR_DEC_ALREADY_PRESENT:F("FST_ERR_DEC_ALREADY_PRESENT","The decorator '%s' has already been added!"),FST_ERR_DEC_DEPENDENCY_INVALID_TYPE:F("FST_ERR_DEC_DEPENDENCY_INVALID_TYPE","The dependencies of decorator '%s' must be of type Array.",500,TypeError),FST_ERR_DEC_MISSING_DEPENDENCY:F("FST_ERR_DEC_MISSING_DEPENDENCY","The decorator is missing dependency '%s'."),FST_ERR_DEC_AFTER_START:F("FST_ERR_DEC_AFTER_START","The decorator '%s' has been added after start!"),FST_ERR_DEC_REFERENCE_TYPE:F("FST_ERR_DEC_REFERENCE_TYPE","The decorator '%s' of type '%s' is a reference type. Use the { getter, setter } interface instead."),FST_ERR_DEC_UNDECLARED:F("FST_ERR_DEC_UNDECLARED","No decorator '%s' has been declared on %s."),FST_ERR_HOOK_INVALID_TYPE:F("FST_ERR_HOOK_INVALID_TYPE","The hook name must be a string",500,TypeError),FST_ERR_HOOK_INVALID_HANDLER:F("FST_ERR_HOOK_INVALID_HANDLER","%s hook should be a function, instead got %s",500,TypeError),FST_ERR_HOOK_INVALID_ASYNC_HANDLER:F("FST_ERR_HOOK_INVALID_ASYNC_HANDLER","Async function has too many arguments. Async hooks should not use the 'done' argument.",500,TypeError),FST_ERR_HOOK_NOT_SUPPORTED:F("FST_ERR_HOOK_NOT_SUPPORTED","%s hook not supported!",500,TypeError),FST_ERR_MISSING_MIDDLEWARE:F("FST_ERR_MISSING_MIDDLEWARE","You must register a plugin for handling middlewares, visit fastify.dev/docs/latest/Reference/Middleware/ for more info.",500),FST_ERR_HOOK_TIMEOUT:F("FST_ERR_HOOK_TIMEOUT","A callback for '%s' hook%s timed out. You may have forgotten to call 'done' function or to resolve a Promise"),FST_ERR_LOG_INVALID_DESTINATION:F("FST_ERR_LOG_INVALID_DESTINATION","Cannot specify both logger.stream and logger.file options"),FST_ERR_LOG_INVALID_LOGGER:F("FST_ERR_LOG_INVALID_LOGGER","Invalid logger object provided. The logger instance should have these functions(s): '%s'.",500,TypeError),FST_ERR_LOG_INVALID_LOGGER_INSTANCE:F("FST_ERR_LOG_INVALID_LOGGER_INSTANCE","loggerInstance only accepts a logger instance.",500,TypeError),FST_ERR_LOG_INVALID_LOGGER_CONFIG:F("FST_ERR_LOG_INVALID_LOGGER_CONFIG","logger options only accepts a configuration object.",500,TypeError),FST_ERR_LOG_LOGGER_AND_LOGGER_INSTANCE_PROVIDED:F("FST_ERR_LOG_LOGGER_AND_LOGGER_INSTANCE_PROVIDED","You cannot provide both logger and loggerInstance. Please provide only one.",500,TypeError),FST_ERR_REP_INVALID_PAYLOAD_TYPE:F("FST_ERR_REP_INVALID_PAYLOAD_TYPE","Attempted to send payload of invalid type '%s'. Expected a string or Buffer.",500,TypeError),FST_ERR_REP_RESPONSE_BODY_CONSUMED:F("FST_ERR_REP_RESPONSE_BODY_CONSUMED","Response.body is already consumed."),FST_ERR_REP_READABLE_STREAM_LOCKED:F("FST_ERR_REP_READABLE_STREAM_LOCKED","ReadableStream was locked. You should call releaseLock() method on reader before sending."),FST_ERR_REP_ALREADY_SENT:F("FST_ERR_REP_ALREADY_SENT",'Reply was already sent, did you forget to "return reply" in "%s" (%s)?'),FST_ERR_REP_SENT_VALUE:F("FST_ERR_REP_SENT_VALUE","The only possible value for reply.sent is true.",500,TypeError),FST_ERR_SEND_INSIDE_ONERR:F("FST_ERR_SEND_INSIDE_ONERR","You cannot use `send` inside the `onError` hook"),FST_ERR_SEND_UNDEFINED_ERR:F("FST_ERR_SEND_UNDEFINED_ERR","Undefined error has occurred"),FST_ERR_BAD_STATUS_CODE:F("FST_ERR_BAD_STATUS_CODE","Called reply with an invalid status code: %s"),FST_ERR_BAD_TRAILER_NAME:F("FST_ERR_BAD_TRAILER_NAME","Called reply.trailer with an invalid header name: %s"),FST_ERR_BAD_TRAILER_VALUE:F("FST_ERR_BAD_TRAILER_VALUE","Called reply.trailer('%s', fn) with an invalid type: %s. Expected a function."),FST_ERR_FAILED_ERROR_SERIALIZATION:F("FST_ERR_FAILED_ERROR_SERIALIZATION","Failed to serialize an error. Error: %s. Original error: %s"),FST_ERR_MISSING_SERIALIZATION_FN:F("FST_ERR_MISSING_SERIALIZATION_FN",'Missing serialization function. Key "%s"'),FST_ERR_MISSING_CONTENTTYPE_SERIALIZATION_FN:F("FST_ERR_MISSING_CONTENTTYPE_SERIALIZATION_FN",'Missing serialization function. Key "%s:%s"'),FST_ERR_REQ_INVALID_VALIDATION_INVOCATION:F("FST_ERR_REQ_INVALID_VALIDATION_INVOCATION",'Invalid validation invocation. Missing validation function for HTTP part "%s" nor schema provided.'),FST_ERR_SCH_MISSING_ID:F("FST_ERR_SCH_MISSING_ID","Missing schema $id property"),FST_ERR_SCH_ALREADY_PRESENT:F("FST_ERR_SCH_ALREADY_PRESENT","Schema with id '%s' already declared!"),FST_ERR_SCH_CONTENT_MISSING_SCHEMA:F("FST_ERR_SCH_CONTENT_MISSING_SCHEMA","Schema is missing for the content type '%s'"),FST_ERR_SCH_DUPLICATE:F("FST_ERR_SCH_DUPLICATE","Schema with '%s' already present!"),FST_ERR_SCH_VALIDATION_BUILD:F("FST_ERR_SCH_VALIDATION_BUILD","Failed building the validation schema for %s: %s, due to error %s"),FST_ERR_SCH_SERIALIZATION_BUILD:F("FST_ERR_SCH_SERIALIZATION_BUILD","Failed building the serialization schema for %s: %s, due to error %s"),FST_ERR_SCH_RESPONSE_SCHEMA_NOT_NESTED_2XX:F("FST_ERR_SCH_RESPONSE_SCHEMA_NOT_NESTED_2XX",'response schemas should be nested under a valid status code, e.g { 2xx: { type: "object" } }'),FST_ERR_INIT_OPTS_INVALID:F("FST_ERR_INIT_OPTS_INVALID","Invalid initialization options: '%s'"),FST_ERR_FORCE_CLOSE_CONNECTIONS_IDLE_NOT_AVAILABLE:F("FST_ERR_FORCE_CLOSE_CONNECTIONS_IDLE_NOT_AVAILABLE","Cannot set forceCloseConnections to 'idle' as your HTTP server does not support closeIdleConnections method"),FST_ERR_DUPLICATED_ROUTE:F("FST_ERR_DUPLICATED_ROUTE","Method '%s' already declared for route '%s'"),FST_ERR_BAD_URL:F("FST_ERR_BAD_URL","'%s' is not a valid url component",400,URIError),FST_ERR_ASYNC_CONSTRAINT:F("FST_ERR_ASYNC_CONSTRAINT","Unexpected error from async constraint",500),FST_ERR_INVALID_URL:F("FST_ERR_INVALID_URL","URL must be a string. Received '%s'",400,TypeError),FST_ERR_ROUTE_OPTIONS_NOT_OBJ:F("FST_ERR_ROUTE_OPTIONS_NOT_OBJ",'Options for "%s:%s" route must be an object',500,TypeError),FST_ERR_ROUTE_DUPLICATED_HANDLER:F("FST_ERR_ROUTE_DUPLICATED_HANDLER",'Duplicate handler for "%s:%s" route is not allowed!',500),FST_ERR_ROUTE_HANDLER_NOT_FN:F("FST_ERR_ROUTE_HANDLER_NOT_FN","Error Handler for %s:%s route, if defined, must be a function",500,TypeError),FST_ERR_ROUTE_MISSING_HANDLER:F("FST_ERR_ROUTE_MISSING_HANDLER",'Missing handler function for "%s:%s" route.',500),FST_ERR_ROUTE_METHOD_INVALID:F("FST_ERR_ROUTE_METHOD_INVALID","Provided method is invalid!",500,TypeError),FST_ERR_ROUTE_METHOD_NOT_SUPPORTED:F("FST_ERR_ROUTE_METHOD_NOT_SUPPORTED","%s method is not supported.",500),FST_ERR_ROUTE_BODY_VALIDATION_SCHEMA_NOT_SUPPORTED:F("FST_ERR_ROUTE_BODY_VALIDATION_SCHEMA_NOT_SUPPORTED","Body validation schema for %s:%s route is not supported!",500),FST_ERR_ROUTE_BODY_LIMIT_OPTION_NOT_INT:F("FST_ERR_ROUTE_BODY_LIMIT_OPTION_NOT_INT","'bodyLimit' option must be an integer > 0. Got '%s'",500,TypeError),FST_ERR_ROUTE_REWRITE_NOT_STR:F("FST_ERR_ROUTE_REWRITE_NOT_STR",'Rewrite url for "%s" needs to be of type "string" but received "%s"',500,TypeError),FST_ERR_REOPENED_CLOSE_SERVER:F("FST_ERR_REOPENED_CLOSE_SERVER","Fastify has already been closed and cannot be reopened"),FST_ERR_REOPENED_SERVER:F("FST_ERR_REOPENED_SERVER","Fastify is already listening"),FST_ERR_INSTANCE_ALREADY_LISTENING:F("FST_ERR_INSTANCE_ALREADY_LISTENING","Fastify instance is already listening. %s"),FST_ERR_PLUGIN_VERSION_MISMATCH:F("FST_ERR_PLUGIN_VERSION_MISMATCH","fastify-plugin: %s - expected '%s' fastify version, '%s' is installed"),FST_ERR_PLUGIN_NOT_PRESENT_IN_INSTANCE:F("FST_ERR_PLUGIN_NOT_PRESENT_IN_INSTANCE","The decorator '%s'%s is not present in %s"),FST_ERR_PLUGIN_INVALID_ASYNC_HANDLER:F("FST_ERR_PLUGIN_INVALID_ASYNC_HANDLER","The %s plugin being registered mixes async and callback styles. Async plugin should not mix async and callback style.",500,TypeError),FST_ERR_PLUGIN_CALLBACK_NOT_FN:F("FST_ERR_PLUGIN_CALLBACK_NOT_FN","fastify-plugin: %s",500,TypeError),FST_ERR_PLUGIN_NOT_VALID:F("FST_ERR_PLUGIN_NOT_VALID","fastify-plugin: %s"),FST_ERR_ROOT_PLG_BOOTED:F("FST_ERR_ROOT_PLG_BOOTED","fastify-plugin: %s"),FST_ERR_PARENT_PLUGIN_BOOTED:F("FST_ERR_PARENT_PLUGIN_BOOTED","fastify-plugin: %s"),FST_ERR_PLUGIN_TIMEOUT:F("FST_ERR_PLUGIN_TIMEOUT","fastify-plugin: %s")};function B9(t,e){return e.cause=t,e}Jh.exports=Do;Jh.exports.appendStackTrace=B9;Jh.exports.AVVIO_ERRORS_MAP={AVV_ERR_CALLBACK_NOT_FN:Do.FST_ERR_PLUGIN_CALLBACK_NOT_FN,AVV_ERR_PLUGIN_NOT_VALID:Do.FST_ERR_PLUGIN_NOT_VALID,AVV_ERR_ROOT_PLG_BOOTED:Do.FST_ERR_ROOT_PLG_BOOTED,AVV_ERR_PARENT_PLG_LOADED:Do.FST_ERR_PARENT_PLUGIN_BOOTED,AVV_ERR_READY_TIMEOUT:Do.FST_ERR_PLUGIN_TIMEOUT,AVV_ERR_PLUGIN_EXEC_TIMEOUT:Do.FST_ERR_PLUGIN_TIMEOUT}});var Ci=E((FNe,Wx)=>{"use strict";var V9=["onRoute","onRegister","onReady","onListen","preClose","onClose"],Bx=["onTimeout","onRequest","preParsing","preValidation","preSerialization","preHandler","onSend","onResponse","onError","onRequestAbort"],z9=Bx.concat(V9),{FST_ERR_HOOK_INVALID_TYPE:H9,FST_ERR_HOOK_INVALID_HANDLER:G9,FST_ERR_SEND_UNDEFINED_ERR:Yh,FST_ERR_HOOK_TIMEOUT:W9,FST_ERR_HOOK_NOT_SUPPORTED:K9,AVVIO_ERRORS_MAP:Lx,appendStackTrace:Fx}=zt(),{kChildren:lu,kHooks:Vx,kRequestPayloadStream:Ux}=Nt();function uu(){this.onRequest=[],this.preParsing=[],this.preValidation=[],this.preSerialization=[],this.preHandler=[],this.onResponse=[],this.onSend=[],this.onError=[],this.onRoute=[],this.onRegister=[],this.onReady=[],this.onListen=[],this.onTimeout=[],this.onRequestAbort=[],this.preClose=[]}uu.prototype=Object.create(null);uu.prototype.validate=function(t,e){if(typeof t!="string")throw new H9;if(Array.isArray(this[t])===!1)throw new K9(t);if(typeof e!="function")throw new G9(t,Object.prototype.toString.call(e))};uu.prototype.add=function(t,e){this.validate(t,e),this[t].push(e)};function J9(t){let e=new uu;return e.onRequest=t.onRequest.slice(),e.preParsing=t.preParsing.slice(),e.preValidation=t.preValidation.slice(),e.preSerialization=t.preSerialization.slice(),e.preHandler=t.preHandler.slice(),e.onSend=t.onSend.slice(),e.onResponse=t.onResponse.slice(),e.onError=t.onError.slice(),e.onRoute=t.onRoute.slice(),e.onRegister=t.onRegister.slice(),e.onTimeout=t.onTimeout.slice(),e.onRequestAbort=t.onRequestAbort.slice(),e.onReady=[],e.onListen=[],e.preClose=[],e}function zx(t,e,r,n){let s=r[Vx][t],i=0,o=0;c();function a(u){let d=s[i-1]?.name,p=d?` "${d}"`:"";if(u){u.code==="AVV_ERR_READY_TIMEOUT"?u=Fx(u,new W9(t,p)):u=Lx[u.code]!=null?Fx(u,new Lx[u.code](u.message)):u,n(u);return}n()}function c(u){if(u){a(u);return}if(i===s.length&&o===r[lu].length){i===0&&o===0?a():e(function(p,f){a(p),f(p)});return}if(i===s.length&&o<r[lu].length){let d=r[lu][o++];zx(t,e,d,c);return}e(l(s[i++],r)),c()}function l(u,d){return function(p,f){if(p){f(p);return}if(u.length===1){try{u.call(d,f)}catch(h){f(h)}return}try{let h=u.call(d);if(h&&typeof h.then=="function"){h.then(f,f);return}}catch(h){p=h}f(p)}}}function Hx(t){let e=t[Vx].onListen,r=e.length,n=0,s=0;i();function i(a){if(a&&t.log.error(a),n===r){for(;s<t[lu].length;){let c=t[lu][s++];Hx(c)}return}o(e[n++],t,i)}async function o(a,c,l){if(a.length===1){try{a.call(c,l)}catch(u){l(u)}return}try{let u=a.call(c);if(u&&typeof u.then=="function"){u.then(l,l);return}l()}catch(u){l(u)}}}function ac(t){return function(r,n,s,i){let o=0;function a(u){if(u||o===r.length){i(u,n,s);return}let d;try{d=t(r[o++],n,s,a)}catch(p){i(p,n,s);return}d&&typeof d.then=="function"&&d.then(c,l)}function c(){a()}function l(u){u||(u=new Yh),i(u,n,s)}a()}}function Y9(t,e,r,n){return t(e,r,n)}var X9=ac(Y9),Q9=ac(fu),Z9=ac(fu),eW=ac(fu),tW=ac(fu);function Gx(t,e,r,n,s){let i=0;function o(l,u){if(l){s(l,e,r,n);return}if(u!==void 0&&(n=u),i===t.length){s(null,e,r,n);return}let d;try{d=t[i++](e,r,n,o)}catch(p){s(p,e,r);return}d&&typeof d.then=="function"&&d.then(a,c)}function a(l){o(null,l)}function c(l){l||(l=new Yh),s(l,e,r,n)}o()}var rW=Gx;function nW(t,e,r,n){let s=0;function i(c,l){if(r.sent)return;if(l!==void 0&&(e[Ux]=l),c||s===t.length){n(c,e,r);return}let u;try{u=t[s++](e,r,e[Ux],i)}catch(d){n(d,e,r);return}u&&typeof u.then=="function"&&u.then(o,a)}function o(c){i(null,c)}function a(c){c||(c=new Yh),n(c,e,r)}i()}function sW(t,e,r){let n=0;function s(a){if(a||n===t.length){r(a,e);return}let c;try{c=t[n++](e,s)}catch(l){r(l,e);return}c&&typeof c.then=="function"&&c.then(i,o)}function i(){s()}function o(a){a||(a=new Yh),r(a,e)}s()}function fu(t,e,r,n){if(r.sent!==!0)return t(e,r,n)}Wx.exports={Hooks:uu,buildHooks:J9,hookRunnerGenerator:ac,preParsingHookRunner:nW,onResponseHookRunner:X9,onSendHookRunner:Gx,preSerializationHookRunner:rW,onRequestAbortHookRunner:sW,hookIterator:fu,hookRunnerApplication:zx,onListenHookRunner:Hx,preHandlerHookRunner:Z9,preValidationHookRunner:Q9,onRequestHookRunner:tW,onTimeoutHookRunner:eW,lifecycleHooks:Bx,supportedHooks:z9}});var Jx=E((UNe,Kx)=>{"use strict";Kx.exports=function(){return{[Symbol.iterator]:function*(){},add(){},delete(){},has(){return!0}}}});var W_=E((BNe,Xx)=>{"use strict";var{kTestInternals:iW}=Nt();function Yx(){let t,e;return{promise:new Promise((n,s)=>{t=n,e=s}),resolve:t,reject:e}}Xx.exports={withResolvers:typeof Promise.withResolvers=="function"?Promise.withResolvers.bind(Promise):Yx,[iW]:{withResolvers:Yx}}});var cN=E((VNe,aN)=>{"use strict";var oW=require("http"),aW=require("https"),Qx=require("http2"),cW=require("dns"),lW=require("os"),{kState:_t,kOptions:uW,kServerBindings:fW,kHttp2ServerSessions:Mo}=Nt(),{FSTWRN003:dW}=oc(),{onListenHookRunner:Xh}=Ci(),{FST_ERR_REOPENED_CLOSE_SERVER:eN,FST_ERR_REOPENED_SERVER:tN,FST_ERR_LISTEN_OPTIONS_INVALID:hW,FST_ERR_FORCE_CLOSE_CONNECTIONS_IDLE_NOT_AVAILABLE:pW}=zt(),mW=Jx(),rN=W_();aN.exports.createServer=gW;function nN(t){return`Server listening at ${t}`}function gW(t,e){let r=iN(t,e);function n(l={port:0,host:"localhost"},u=void 0){if(typeof u=="function"&&(u.constructor.name==="AsyncFunction"&&dW("listen method"),l.cb=u),l.signal){if(typeof l.signal.on!="function"&&typeof l.signal.addEventListener!="function")throw new hW("Invalid options.signal");if(this[_t].aborted=l.signal.aborted,this[_t].aborted)return this.close();{let p=()=>{this[_t].aborted=!0,this.close()};l.signal.addEventListener("abort",p,{once:!0})}}let d;if(l.path==null?d=l.host??"localhost":d=l.host,(!Object.hasOwn(l,"host")||l.host==null)&&(l.host=d),d==="localhost"?l.cb=(p,f)=>{if(p){u(p,f);return}Zx.call(this,r,e,t,l,()=>{this[_t].listening=!0,u(null,f),Xh(this)})}:l.cb=(p,f)=>{if(p){u(p,f);return}this[_t].listening=!0,u(null,f),Xh(this)},u===void 0)return yW.call(this,r,l).then(f=>{let{promise:h,resolve:m}=rN.withResolvers();return d==="localhost"?Zx.call(this,r,e,t,l,()=>{this[_t].listening=!0,m(f),Xh(this)}):(m(f),Xh(this)),h});this.ready(sN.call(this,r,l))}let s=typeof r.closeAllConnections=="function",i=typeof r.closeIdleConnections=="function",o=typeof r.closeHttp2Sessions=="function",a=t.forceCloseConnections;if(a==="idle"&&!i)throw new pW;typeof a!="boolean"&&(a=i?"idle":!1);let c=!s&&a===!0?new Set:mW();return{server:r,listen:n,forceCloseConnections:a,serverHasCloseAllConnections:s,serverHasCloseHttp2Sessions:o,keepAliveConnections:c}}function Zx(t,e,r,n,s){this[_t].listening=!1,cW.lookup(n.host,{all:!0},(i,o)=>{if(i||this[_t].aborted){s();return}let a=t.listening&&r.serverFactory,c=0,l=0;if(!a){let d=t.address();for(let p of o)if(p.address!==d.address){c++;let f=Object.assign({},n,{host:p.address,port:d.port,cb:y=>{l++,y||this[fW].push(h),l===c&&s()}}),h=iN(r,e),m=()=>{h.close(()=>{}),typeof h.closeAllConnections=="function"&&r.forceCloseConnections===!0&&h.closeAllConnections(),typeof h.closeHttp2Sessions=="function"&&h.closeHttp2Sessions()};h.on("upgrade",t.emit.bind(t,"upgrade")),t.on("unref",m),t.on("close",m),t.on("error",m),this[_t].listening=!1,sN.call(this,h,f)()}}if(c===0){s();return}let u=t.unref;t.unref=function(){u.call(t),t.emit("unref")}})}function sN(t,e){let r=n=>{if(t.removeListener("error",r),t.removeListener("listening",r),n)this[_t].listening=!1,e.cb(n,null);else{let s=oN.call(this,t,e.listenTextResolver||nN);e.cb(null,s)}};return n=>{if(n!=null)return e.cb(n);if(this[_t].listening&&this[_t].closing)return e.cb(new eN,null);if(this[_t].listening)return e.cb(new tN,null);t.once("error",r),this[_t].closing||(t.once("listening",r),t.listen(e),this[_t].listening=!0)}}function yW(t,e){return this[_t].listening&&this[_t].closing?Promise.reject(new eN):this[_t].listening?Promise.reject(new tN):this.ready().then(()=>{if(this[_t].aborted)return;let{promise:r,resolve:n,reject:s}=rN.withResolvers(),i=c=>{a(),this[_t].listening=!1,s(c)},o=()=>{a(),this[_t].listening=!0,n(oN.call(this,t,e.listenTextResolver||nN))};function a(){t.removeListener("error",i),t.removeListener("listening",o)}return t.once("error",i),t.once("listening",o),t.listen(e),r})}function iN(t,e){if(t.serverFactory)return t.serverFactory(e,t);let r=t.https===!0?{}:t.https;if(t.http2){let s=typeof r=="object"?Qx.createSecureServer(r,e):Qx.createServer(t.http,e);return s.on("session",i=>i.setTimeout(t.http2SessionTimeout,()=>{i.close()})),t.forceCloseConnections===!0&&(s.closeHttp2Sessions=vW(s)),s.setTimeout(t.connectionTimeout),s}let n=r?aW.createServer(r,e):oW.createServer(t.http,e);return n.keepAliveTimeout=t.keepAliveTimeout,n.requestTimeout=t.requestTimeout,n.setTimeout(t.connectionTimeout),t.maxRequestsPerSocket>0&&(n.maxRequestsPerSocket=t.maxRequestsPerSocket),n}function _W(t){return t.address==="0.0.0.0"?Object.values(lW.networkInterfaces()).flatMap(e=>e.filter(r=>r.family==="IPv4")).sort(e=>e.internal?-1:1).map(e=>e.address):[t.address]}function oN(t,e){let r;typeof t.address()=="string"?r=[t.address()]:(t.address().address.indexOf(":")===-1?r=_W(t.address()).map(s=>s+":"+t.address().port):r=["["+t.address().address+"]:"+t.address().port],r=r.map(s=>"http"+(this[uW].https?"s":"")+"://"+s));for(let s of r)this.log.info(e(s));return r[0]}function vW(t){return t[Mo]=new Set,t.on("session",function(e){e.once("connect",function(){t[Mo].add(e)}),e.once("close",function(){t[Mo].delete(e)}),e.once("frameError",function(r,n,s){s===0&&t[Mo].delete(e)}),e.once("goaway",function(){t[Mo].delete(e)})}),function(){if(t[Mo].size!==0)for(let r of t[Mo])r.close()}}});var Y_=E((zNe,uN)=>{"use strict";var{kSchemaHeaders:ep,kSchemaParams:K_,kSchemaQuerystring:J_,kSchemaBody:jo,kSchemaResponse:lN}=Nt(),wW=/^[1-5](?:\d{2}|xx)$|^default$/,{FST_ERR_SCH_RESPONSE_SCHEMA_NOT_NESTED_2XX:bW}=zt(),{FSTWRN001:Qh}=oc();function EW(t,e){if(!t.schema||!t.schema.response)return;let{method:r,url:n}=t.config||{};t[lN]=Object.keys(t.schema.response).reduce(function(s,i){let o=t.schema.response[i];if(i=i.toLowerCase(),!wW.test(i))throw new bW;if(o.content){let a={};for(let c of Object.keys(o.content)){let l=o.content[c].schema;a[c]=e({schema:l,url:n,method:r,httpStatus:i,contentType:c})}s[i]=a}else s[i]=e({schema:o,url:n,method:r,httpStatus:i});return s},{})}function SW(t,e,r){let{schema:n}=t;if(!n)return;let{method:s,url:i}=t.config||{},o=n.headers;if(o&&(r||Object.getPrototypeOf(o)!==Object.prototype))t[ep]=e({schema:o,method:s,url:i,httpPart:"headers"});else if(o){let a={};Object.keys(o).forEach(c=>{a[c]=o[c]}),a.required instanceof Array&&(a.required=a.required.map(c=>c.toLowerCase())),o.properties&&(a.properties={},Object.keys(o.properties).forEach(c=>{a.properties[c.toLowerCase()]=o.properties[c]})),t[ep]=e({schema:a,method:s,url:i,httpPart:"headers"})}else Object.hasOwn(n,"headers")&&Qh("headers",s,i);if(n.body){let a=n.body.content;if(a){let c={};for(let l of Object.keys(a)){let u=a[l].schema;c[l]=e({schema:u,method:s,url:i,httpPart:"body",contentType:l})}t[jo]=c}else t[jo]=e({schema:n.body,method:s,url:i,httpPart:"body"})}else Object.hasOwn(n,"body")&&Qh("body",s,i);n.querystring?t[J_]=e({schema:n.querystring,method:s,url:i,httpPart:"querystring"}):Object.hasOwn(n,"querystring")&&Qh("querystring",s,i),n.params?t[K_]=e({schema:n.params,method:s,url:i,httpPart:"params"}):Object.hasOwn(n,"params")&&Qh("params",s,i)}function Zh(t,e,r){let n=e[r]===void 0,s;try{s=t?.(n?null:e[r])}catch(o){return o.statusCode=500,o}if(s&&typeof s.then=="function")return s.then(o=>i(o)).catch(o=>o);return i(s);function i(o){return o===!1?t.errors:o&&o.error?o.error:(o&&o.value&&(e[r]=o.value),!1)}}function tp(t,e,r){let n=r===void 0;if(n||!r.skipParams){let i=Zh(t[K_],e,"params");if(i)return typeof i.then!="function"?Ii(i,"params",t.schemaErrorFormatter):TW(i,t,e)}if(n||!r.skipBody){let i=null;if(typeof t[jo]=="function")i=t[jo];else if(t[jo]){let a=PW(e.headers["content-type"]),c=t[jo][a];c&&(i=c)}let o=Zh(i,e,"body");if(o)return typeof o.then!="function"?Ii(o,"body",t.schemaErrorFormatter):RW(o,t,e)}if(n||!r.skipQuery){let i=Zh(t[J_],e,"query");if(i)return typeof i.then!="function"?Ii(i,"querystring",t.schemaErrorFormatter):$W(i,t,e)}let s=Zh(t[ep],e,"headers");return s?typeof s.then!="function"?Ii(s,"headers",t.schemaErrorFormatter):OW(s,t,e):!1}function TW(t,e,r){return t.then(n=>n?Ii(n,"params",e.schemaErrorFormatter):tp(e,r,{skipParams:!0}))}function RW(t,e,r){return t.then(n=>n?Ii(n,"body",e.schemaErrorFormatter):tp(e,r,{skipParams:!0,skipBody:!0}))}function $W(t,e,r){return t.then(n=>n?Ii(n,"querystring",e.schemaErrorFormatter):tp(e,r,{skipParams:!0,skipBody:!0,skipQuery:!0}))}function OW(t,e,r){return t.then(n=>n?Ii(n,"headers",e.schemaErrorFormatter):!1)}function Ii(t,e,r){if(t instanceof Error)return t.statusCode=t.statusCode||400,t.code=t.code||"FST_ERR_VALIDATION",t.validationContext=t.validationContext||e,t;let n=r(t,e);return n.statusCode=n.statusCode||400,n.code=n.code||"FST_ERR_VALIDATION",n.validation=t,n.validationContext=e,n}function PW(t){return t?t.split(/[ ;]/,1)[0].trim().toLowerCase():""}uN.exports={symbols:{bodySchema:jo,querystringSchema:J_,responseSchema:lN,paramsSchema:K_,headersSchema:ep},compileSchemasForValidation:SW,compileSchemasForSerialization:EW,validate:tp}});var X_=E((HNe,dN)=>{"use strict";var{kReplyIsError:fN,kReplyHijacked:xW}=Nt(),NW=require("diagnostics_channel"),du=NW.tracingChannel("fastify.request.handler");function CW(t,e,r){r&&(r.async=!0),t.then(function(n){if(e[xW]!==!0){r&&du.asyncStart.publish(r);try{if(n!==void 0||e.sent===!1&&e.raw.headersSent===!1&&e.request.raw.aborted===!1&&e.request.socket&&!e.request.socket.destroyed)try{e.send(n)}catch(s){e[fN]=!0,e.send(s)}}finally{r&&du.asyncEnd.publish(r)}}},function(n){r&&(r.error=n,du.error.publish(r),du.asyncStart.publish(r));try{if(e.sent===!0){e.log.error({err:n},"Promise errored, but reply.sent = true was set");return}e[fN]=!0,e.send(n)}catch(s){e.send(s)}finally{r&&du.asyncEnd.publish(r)}})}dN.exports=CW});var tv=E((GNe,ev)=>{"use strict";var IW=require("diagnostics_channel"),{validate:AW}=Y_(),{preValidationHookRunner:kW,preHandlerHookRunner:DW}=Ci(),MW=X_(),{kReplyIsError:rp,kRouteContext:hs,kFourOhFourContext:jW,kSupportedHTTPMethods:hN}=Nt(),hu=IW.tracingChannel("fastify.request.handler");function qW(t,e,r){if(r.sent===!0)return;if(t!=null){r[rp]=!0,r.send(t);return}let n=e.method;if(this[hN].bodyless.has(n)){cc(e,r);return}if(this[hN].bodywith.has(n)){let s=e.headers,i=s["content-type"];if(i===void 0){let o=s["content-length"];if(s["transfer-encoding"]===void 0&&(o===void 0||o==="0")){cc(e,r);return}e[hs].contentTypeParser.run("",cc,e,r);return}e[hs].contentTypeParser.run(i,cc,e,r);return}cc(e,r)}function cc(t,e){try{t[hs].preValidation!==null?kW(t[hs].preValidation,t,e,Q_):Q_(null,t,e)}catch(r){Q_(r,t,e)}}function Q_(t,e,r){if(r.sent===!0)return;if(t!=null){r[rp]=!0,r.send(t);return}let n=AW(r[hs],e);if(n&&typeof n.then=="function"||!1){let i=pN.bind(null,e,r);n.then(i,i)}else pN(e,r,n)}function pN(t,e,r){if(r){if(e[hs].attachValidation===!1){e.send(r);return}e.request.validationError=r}t[hs].preHandler!==null?DW(t[hs].preHandler,t,e,Z_):Z_(null,t,e)}function Z_(t,e,r){if(r.sent)return;let n=e[hs];if(!hu.hasSubscribers||n[jW]===null)mN(t,e,r);else{let s={request:e,reply:r,async:!1,route:{url:n.config.url,method:n.config.method}};hu.start.runStores(s,mN,void 0,t,e,r,s)}}function mN(t,e,r,n){let s=e[hs];try{if(t!=null){r[rp]=!0,r.send(t),n&&(n.error=t,hu.error.publish(n));return}let i;try{i=s.handler(e,r)}catch(o){n&&(n.error=o,hu.error.publish(n)),r[rp]=!0,r.send(o);return}i!==void 0&&(i!==null&&typeof i.then=="function"?MW(i,r,n):r.send(i))}finally{n&&hu.end.publish(n)}}ev.exports=qW;ev.exports[Symbol.for("internals")]={handler:cc,preHandlerCallback:Z_}});var yN=E((WNe,gN)=>{"use strict";function lc(){}var LW={fatal:lc,error:lc,warn:lc,info:lc,debug:lc,trace:lc};Object.defineProperty(gN,"exports",{get(){return Object.create(LW)}})});var nv=E((KNe,wN)=>{"use strict";var pu=t=>t&&typeof t.message=="string",rv=t=>{if(!t)return;let e=t.cause;if(typeof e=="function"){let r=t.cause();return pu(r)?r:void 0}else return pu(e)?e:void 0},_N=(t,e)=>{if(!pu(t))return"";let r=t.stack||"";if(e.has(t))return r+`
causes have become circular...`;let n=rv(t);return n?(e.add(t),r+`
caused by: `+_N(n,e)):r},FW=t=>_N(t,new Set),vN=(t,e,r)=>{if(!pu(t))return"";let n=r?"":t.message||"";if(e.has(t))return n+": ...";let s=rv(t);if(s){e.add(t);let i=typeof t.cause=="function";return n+(i?"":": ")+vN(s,e,i)}else return n},UW=t=>vN(t,new Set);wN.exports={isErrorLike:pu,getErrorCause:rv,stackWithCauses:FW,messageWithCauses:UW}});var sv=E((JNe,EN)=>{"use strict";var BW=Symbol("circular-ref-tag"),np=Symbol("pino-raw-err-ref"),bN=Object.create({},{type:{enumerable:!0,writable:!0,value:void 0},message:{enumerable:!0,writable:!0,value:void 0},stack:{enumerable:!0,writable:!0,value:void 0},aggregateErrors:{enumerable:!0,writable:!0,value:void 0},raw:{enumerable:!1,get:function(){return this[np]},set:function(t){this[np]=t}}});Object.defineProperty(bN,np,{writable:!0,value:{}});EN.exports={pinoErrProto:bN,pinoErrorSymbols:{seen:BW,rawSymbol:np}}});var RN=E((YNe,TN)=>{"use strict";TN.exports=ov;var{messageWithCauses:VW,stackWithCauses:zW,isErrorLike:SN}=nv(),{pinoErrProto:HW,pinoErrorSymbols:GW}=sv(),{seen:iv}=GW,{toString:WW}=Object.prototype;function ov(t){if(!SN(t))return t;t[iv]=void 0;let e=Object.create(HW);e.type=WW.call(t.constructor)==="[object Function]"?t.constructor.name:t.name,e.message=VW(t),e.stack=zW(t),Array.isArray(t.errors)&&(e.aggregateErrors=t.errors.map(r=>ov(r)));for(let r in t)if(e[r]===void 0){let n=t[r];SN(n)?r!=="cause"&&!Object.prototype.hasOwnProperty.call(n,iv)&&(e[r]=ov(n)):e[r]=n}return delete t[iv],e.raw=t,e}});var ON=E((XNe,$N)=>{"use strict";$N.exports=ip;var{isErrorLike:av}=nv(),{pinoErrProto:KW,pinoErrorSymbols:JW}=sv(),{seen:sp}=JW,{toString:YW}=Object.prototype;function ip(t){if(!av(t))return t;t[sp]=void 0;let e=Object.create(KW);e.type=YW.call(t.constructor)==="[object Function]"?t.constructor.name:t.name,e.message=t.message,e.stack=t.stack,Array.isArray(t.errors)&&(e.aggregateErrors=t.errors.map(r=>ip(r))),av(t.cause)&&!Object.prototype.hasOwnProperty.call(t.cause,sp)&&(e.cause=ip(t.cause));for(let r in t)if(e[r]===void 0){let n=t[r];av(n)?Object.prototype.hasOwnProperty.call(n,sp)||(e[r]=ip(n)):e[r]=n}return delete t[sp],e.raw=t,e}});var CN=E((QNe,NN)=>{"use strict";NN.exports={mapHttpRequest:XW,reqSerializer:xN};var cv=Symbol("pino-raw-req-ref"),PN=Object.create({},{id:{enumerable:!0,writable:!0,value:""},method:{enumerable:!0,writable:!0,value:""},url:{enumerable:!0,writable:!0,value:""},query:{enumerable:!0,writable:!0,value:""},params:{enumerable:!0,writable:!0,value:""},headers:{enumerable:!0,writable:!0,value:{}},remoteAddress:{enumerable:!0,writable:!0,value:""},remotePort:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[cv]},set:function(t){this[cv]=t}}});Object.defineProperty(PN,cv,{writable:!0,value:{}});function xN(t){let e=t.info||t.socket,r=Object.create(PN);if(r.id=typeof t.id=="function"?t.id():t.id||(t.info?t.info.id:void 0),r.method=t.method,t.originalUrl)r.url=t.originalUrl;else{let n=t.path;r.url=typeof n=="string"?n:t.url?t.url.path||t.url:void 0}return t.query&&(r.query=t.query),t.params&&(r.params=t.params),r.headers=t.headers,r.remoteAddress=e&&e.remoteAddress,r.remotePort=e&&e.remotePort,r.raw=t.raw||t,r}function XW(t){return{req:xN(t)}}});var DN=E((ZNe,kN)=>{"use strict";kN.exports={mapHttpResponse:QW,resSerializer:AN};var lv=Symbol("pino-raw-res-ref"),IN=Object.create({},{statusCode:{enumerable:!0,writable:!0,value:0},headers:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[lv]},set:function(t){this[lv]=t}}});Object.defineProperty(IN,lv,{writable:!0,value:{}});function AN(t){let e=Object.create(IN);return e.statusCode=t.headersSent?t.statusCode:null,e.headers=t.getHeaders?t.getHeaders():t._headers,e.raw=t,e}function QW(t){return{res:AN(t)}}});var fv=E((eCe,MN)=>{"use strict";var uv=RN(),ZW=ON(),op=CN(),ap=DN();MN.exports={err:uv,errWithCause:ZW,mapHttpRequest:op.mapHttpRequest,mapHttpResponse:ap.mapHttpResponse,req:op.reqSerializer,res:ap.resSerializer,wrapErrorSerializer:function(e){return e===uv?e:function(n){return e(uv(n))}},wrapRequestSerializer:function(e){return e===op.reqSerializer?e:function(n){return e(op.reqSerializer(n))}},wrapResponseSerializer:function(e){return e===ap.resSerializer?e:function(n){return e(ap.resSerializer(n))}}}});var dv=E((tCe,jN)=>{"use strict";function e7(t,e){return e}jN.exports=function(){let e=Error.prepareStackTrace;Error.prepareStackTrace=e7;let r=new Error().stack;if(Error.prepareStackTrace=e,!Array.isArray(r))return;let n=r.slice(2),s=[];for(let i of n)i&&s.push(i.getFileName());return s}});var VN=E((rCe,BN)=>{"use strict";function hv(t){if(t===null||typeof t!="object")return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof Array){let e=[];for(let r=0;r<t.length;r++)e[r]=hv(t[r]);return e}if(typeof t=="object"){let e=Object.create(Object.getPrototypeOf(t));for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=hv(t[r]));return e}return t}function qN(t){let e=[],r="",n=!1,s=!1,i="";for(let o=0;o<t.length;o++){let a=t[o];!n&&a==="."?r&&(e.push(r),r=""):a==="["?(r&&(e.push(r),r=""),n=!0):a==="]"&&n?(e.push(r),r="",n=!1,s=!1):(a==='"'||a==="'")&&n?s?a===i?(s=!1,i=""):r+=a:(s=!0,i=a):r+=a}return r&&e.push(r),e}function LN(t,e,r){let n=t;for(let i=0;i<e.length-1;i++){let o=e[i];if(typeof n!="object"||n===null||!(o in n)||typeof n[o]!="object"||n[o]===null)return!1;n=n[o]}let s=e[e.length-1];if(s==="*"){if(Array.isArray(n))for(let i=0;i<n.length;i++)n[i]=r;else if(typeof n=="object"&&n!==null)for(let i in n)Object.prototype.hasOwnProperty.call(n,i)&&(n[i]=r)}else typeof n=="object"&&n!==null&&s in n&&Object.prototype.hasOwnProperty.call(n,s)&&(n[s]=r);return!0}function FN(t,e){let r=t;for(let s=0;s<e.length-1;s++){let i=e[s];if(typeof r!="object"||r===null||!(i in r)||typeof r[i]!="object"||r[i]===null)return!1;r=r[i]}let n=e[e.length-1];if(n==="*"){if(Array.isArray(r))for(let s=0;s<r.length;s++)r[s]=void 0;else if(typeof r=="object"&&r!==null)for(let s in r)Object.prototype.hasOwnProperty.call(r,s)&&delete r[s]}else typeof r=="object"&&r!==null&&n in r&&Object.prototype.hasOwnProperty.call(r,n)&&delete r[n];return!0}var cp=Symbol("PATH_NOT_FOUND");function t7(t,e){let r=t;for(let n of e){if(r==null||typeof r!="object"||r===null||!(n in r))return cp;r=r[n]}return r}function r7(t,e){let r=t;for(let n of e){if(r==null||typeof r!="object"||r===null)return;r=r[n]}return r}function n7(t,e,r,n=!1){for(let s of e){let i=qN(s);if(i.includes("*"))UN(t,i,r,s,n);else if(n)FN(t,i);else{let o=t7(t,i);if(o===cp)continue;let a=typeof r=="function"?r(o,i):r;LN(t,i,a)}}}function UN(t,e,r,n,s=!1){let i=e.indexOf("*");if(i===e.length-1){let o=e.slice(0,-1),a=t;for(let c of o){if(a==null||typeof a!="object"||a===null)return;a=a[c]}if(Array.isArray(a))if(s)for(let c=0;c<a.length;c++)a[c]=void 0;else for(let c=0;c<a.length;c++){let l=[...o,c.toString()],u=typeof r=="function"?r(a[c],l):r;a[c]=u}else if(typeof a=="object"&&a!==null)if(s){let c=[];for(let l in a)Object.prototype.hasOwnProperty.call(a,l)&&c.push(l);for(let l of c)delete a[l]}else for(let c in a){let l=[...o,c],u=typeof r=="function"?r(a[c],l):r;a[c]=u}}else s7(t,e,r,i,n,s)}function s7(t,e,r,n,s,i=!1){let o=e.slice(0,n),a=e.slice(n+1),c=[];function l(u,d){if(d===o.length){if(Array.isArray(u))for(let p=0;p<u.length;p++)c[d]=p.toString(),l(u[p],d+1);else if(typeof u=="object"&&u!==null)for(let p in u)c[d]=p,l(u[p],d+1)}else if(d<o.length){let p=o[d];u&&typeof u=="object"&&u!==null&&p in u&&(c[d]=p,l(u[p],d+1))}else if(a.includes("*"))UN(u,a,typeof r=="function"?(f,h)=>{let m=[...c.slice(0,d),...h];return r(f,m)}:r,s,i);else if(i)FN(u,a);else{let p=typeof r=="function"?r(r7(u,a),[...c.slice(0,d),...a]):r;LN(u,a,p)}}if(o.length===0)l(t,0);else{let u=t;for(let d=0;d<o.length;d++){let p=o[d];if(u==null||typeof u!="object"||u===null)return;u=u[p],c[d]=p}u!=null&&l(u,o.length)}}function i7(t){if(t.length===0)return null;let e=new Map;for(let r of t){let n=qN(r),s=e;for(let i=0;i<n.length;i++){let o=n[i];s.has(o)||s.set(o,new Map),s=s.get(o)}}return e}function o7(t,e){if(!e)return t;function r(n,s,i=0){if(!s||s.size===0||n===null||typeof n!="object")return n;if(n instanceof Date)return new Date(n.getTime());if(Array.isArray(n)){let a=[];for(let c=0;c<n.length;c++){let l=c.toString();s.has(l)||s.has("*")?a[c]=r(n[c],s.get(l)||s.get("*")):a[c]=n[c]}return a}let o=Object.create(Object.getPrototypeOf(n));for(let a in n)Object.prototype.hasOwnProperty.call(n,a)&&(s.has(a)||s.has("*")?o[a]=r(n[a],s.get(a)||s.get("*")):o[a]=n[a]);return o}return r(t,e)}function a7(t){if(typeof t!="string")throw new Error("Paths must be (non-empty) strings");if(t==="")throw new Error("Invalid redaction path ()");if(t.includes(".."))throw new Error(`Invalid redaction path (${t})`);if(t.includes(","))throw new Error(`Invalid redaction path (${t})`);let e=0,r=!1,n="";for(let s=0;s<t.length;s++){let i=t[s];if((i==='"'||i==="'")&&e>0)r?i===n&&(r=!1,n=""):(r=!0,n=i);else if(i==="["&&!r)e++;else if(i==="]"&&!r&&(e--,e<0))throw new Error(`Invalid redaction path (${t})`)}if(e!==0)throw new Error(`Invalid redaction path (${t})`)}function c7(t){if(!Array.isArray(t))throw new TypeError("paths must be an array");for(let e of t)a7(e)}function l7(t={}){let{paths:e=[],censor:r="[REDACTED]",serialize:n=JSON.stringify,strict:s=!0,remove:i=!1}=t;c7(e);let o=i7(e);return function(c){if(s&&(c===null||typeof c!="object")&&(c==null||typeof c!="object"))return n?n(c):c;let l=o7(c,o),u=c,d=r;return typeof r=="function"&&(d=r),n7(l,e,d,i),n===!1?(l.restore=function(){return hv(u)},l):typeof n=="function"?n(l):JSON.stringify(l)}}BN.exports=l7});var uc=E((nCe,zN)=>{"use strict";var u7=Symbol("pino.setLevel"),f7=Symbol("pino.getLevel"),d7=Symbol("pino.levelVal"),h7=Symbol("pino.levelComp"),p7=Symbol("pino.useLevelLabels"),m7=Symbol("pino.useOnlyCustomLevels"),g7=Symbol("pino.mixin"),y7=Symbol("pino.lsCache"),_7=Symbol("pino.chindings"),v7=Symbol("pino.asJson"),w7=Symbol("pino.write"),b7=Symbol("pino.redactFmt"),E7=Symbol("pino.time"),S7=Symbol("pino.timeSliceIndex"),T7=Symbol("pino.stream"),R7=Symbol("pino.stringify"),$7=Symbol("pino.stringifySafe"),O7=Symbol("pino.stringifiers"),P7=Symbol("pino.end"),x7=Symbol("pino.formatOpts"),N7=Symbol("pino.messageKey"),C7=Symbol("pino.errorKey"),I7=Symbol("pino.nestedKey"),A7=Symbol("pino.nestedKeyStr"),k7=Symbol("pino.mixinMergeStrategy"),D7=Symbol("pino.msgPrefix"),M7=Symbol("pino.wildcardFirst"),j7=Symbol.for("pino.serializers"),q7=Symbol.for("pino.formatters"),L7=Symbol.for("pino.hooks"),F7=Symbol.for("pino.metadata");zN.exports={setLevelSym:u7,getLevelSym:f7,levelValSym:d7,levelCompSym:h7,useLevelLabelsSym:p7,mixinSym:g7,lsCacheSym:y7,chindingsSym:_7,asJsonSym:v7,writeSym:w7,serializersSym:j7,redactFmtSym:b7,timeSym:E7,timeSliceIndexSym:S7,streamSym:T7,stringifySym:R7,stringifySafeSym:$7,stringifiersSym:O7,endSym:P7,formatOptsSym:x7,messageKeySym:N7,errorKeySym:C7,nestedKeySym:I7,wildcardFirstSym:M7,needsMetadataGsym:F7,useOnlyCustomLevelsSym:m7,formattersSym:q7,hooksSym:L7,nestedKeyStrSym:A7,mixinMergeStrategySym:k7,msgPrefixSym:D7}});var mv=E((sCe,KN)=>{"use strict";var HN=VN(),{redactFmtSym:U7,wildcardFirstSym:lp}=uc(),pv=/[^.[\]]+|\[([^[\]]*?)\]/g,GN="[Redacted]",WN=!1;function B7(t,e){let{paths:r,censor:n,remove:s}=V7(t),i=r.reduce((c,l)=>{pv.lastIndex=0;let u=pv.exec(l),d=pv.exec(l),p=u[1]!==void 0?u[1].replace(/^(?:"|'|`)(.*)(?:"|'|`)$/,"$1"):u[0];if(p==="*"&&(p=lp),d===null)return c[p]=null,c;if(c[p]===null)return c;let{index:f}=d,h=`${l.substr(f,l.length-1)}`;return c[p]=c[p]||[],p!==lp&&c[p].length===0&&c[p].push(...c[lp]||[]),p===lp&&Object.keys(c).forEach(function(m){c[m]&&c[m].push(h)}),c[p].push(h),c},{}),o={[U7]:HN({paths:r,censor:n,serialize:e,strict:WN,remove:s})},a=(...c)=>e(typeof n=="function"?n(...c):n);return[...Object.keys(i),...Object.getOwnPropertySymbols(i)].reduce((c,l)=>{if(i[l]===null)c[l]=u=>a(u,[l]);else{let u=typeof n=="function"?(d,p)=>n(d,[l,...p]):n;c[l]=HN({paths:i[l],censor:u,serialize:e,strict:WN,remove:s})}return c},o)}function V7(t){if(Array.isArray(t))return t={paths:t,censor:GN},t;let{paths:e,censor:r=GN,remove:n}=t;if(Array.isArray(e)===!1)throw Error("pino \u2013 redact must contain an array of strings");return n===!0&&(r=void 0),{paths:e,censor:r,remove:n}}KN.exports=B7});var XN=E((iCe,YN)=>{"use strict";var z7=()=>"",H7=()=>`,"time":${Date.now()}`,G7=()=>`,"time":${Math.round(Date.now()/1e3)}`,W7=()=>`,"time":"${new Date(Date.now()).toISOString()}"`,K7=1000000n,JN=1000000000n,J7=BigInt(Date.now())*K7,Y7=process.hrtime.bigint(),X7=()=>{let t=process.hrtime.bigint()-Y7,e=J7+t,r=e/JN,n=e%JN,s=Number(r*1000n+n/1000000n),i=new Date(s),o=i.getUTCFullYear(),a=(i.getUTCMonth()+1).toString().padStart(2,"0"),c=i.getUTCDate().toString().padStart(2,"0"),l=i.getUTCHours().toString().padStart(2,"0"),u=i.getUTCMinutes().toString().padStart(2,"0"),d=i.getUTCSeconds().toString().padStart(2,"0");return`,"time":"${o}-${a}-${c}T${l}:${u}:${d}.${n.toString().padStart(9,"0")}Z"`};YN.exports={nullTime:z7,epochTime:H7,unixTime:G7,isoTime:W7,isoTimeNano:X7}});var ZN=E((oCe,QN)=>{"use strict";function Q7(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}QN.exports=Z7;function Z7(t,e,r){var n=r&&r.stringify||Q7,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var o=new Array(i);o[0]=n(t);for(var a=1;a<i;a++)o[a]=n(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-s,d=-1,p=t&&t.length||0,f=0;f<p;){if(t.charCodeAt(f)===37&&f+1<p){switch(d=d>-1?d:0,t.charCodeAt(f+1)){case 100:case 102:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Number(e[u]),d=f+2,f++;break;case 105:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Math.floor(Number(e[u])),d=f+2,f++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;d<f&&(l+=t.slice(d,f));var h=typeof e[u];if(h==="string"){l+="'"+e[u]+"'",d=f+2,f++;break}if(h==="function"){l+=e[u].name||"<anonymous>",d=f+2,f++;break}l+=n(e[u]),d=f+2,f++;break;case 115:if(u>=c)break;d<f&&(l+=t.slice(d,f)),l+=String(e[u]),d=f+2,f++;break;case 37:d<f&&(l+=t.slice(d,f)),l+="%",d=f+2,f++,u--;break}++u}++f}return d===-1?t:(d<p&&(l+=t.slice(d)),l)}});var yv=E((aCe,gv)=>{"use strict";if(typeof SharedArrayBuffer<"u"&&typeof Atomics<"u"){let e=function(r){if((r>0&&r<1/0)===!1)throw typeof r!="number"&&typeof r!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");Atomics.wait(t,0,0,Number(r))},t=new Int32Array(new SharedArrayBuffer(4));gv.exports=e}else{let t=function(e){if((e>0&&e<1/0)===!1)throw typeof e!="number"&&typeof e!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");let n=Date.now()+Number(e);for(;n>Date.now(););};gv.exports=t}});var aC=E((cCe,oC)=>{"use strict";var vt=require("fs"),eK=require("events"),tK=require("util").inherits,eC=require("path"),vv=yv(),rK=require("assert"),up=100,fp=Buffer.allocUnsafe(0),nK=16*1024,tC="buffer",rC="utf8",[sK,iK]=(process.versions.node||"0.0").split(".").map(Number),oK=sK>=22&&iK>=7;function nC(t,e){e._opening=!0,e._writing=!0,e._asyncDrainScheduled=!1;function r(i,o){if(i){e._reopening=!1,e._writing=!1,e._opening=!1,e.sync?process.nextTick(()=>{e.listenerCount("error")>0&&e.emit("error",i)}):e.emit("error",i);return}let a=e._reopening;e.fd=o,e.file=t,e._reopening=!1,e._opening=!1,e._writing=!1,e.sync?process.nextTick(()=>e.emit("ready")):e.emit("ready"),!e.destroyed&&(!e._writing&&e._len>e.minLength||e._flushPending?e._actualWrite():a&&process.nextTick(()=>e.emit("drain")))}let n=e.append?"a":"w",s=e.mode;if(e.sync)try{e.mkdir&&vt.mkdirSync(eC.dirname(t),{recursive:!0});let i=vt.openSync(t,n,s);r(null,i)}catch(i){throw r(i),i}else e.mkdir?vt.mkdir(eC.dirname(t),{recursive:!0},i=>{if(i)return r(i);vt.open(t,n,s,r)}):vt.open(t,n,s,r)}function Ln(t){if(!(this instanceof Ln))return new Ln(t);let{fd:e,dest:r,minLength:n,maxLength:s,maxWrite:i,periodicFlush:o,sync:a,append:c=!0,mkdir:l,retryEAGAIN:u,fsync:d,contentMode:p,mode:f}=t||{};e=e||r,this._len=0,this.fd=-1,this._bufs=[],this._lens=[],this._writing=!1,this._ending=!1,this._reopening=!1,this._asyncDrainScheduled=!1,this._flushPending=!1,this._hwm=Math.max(n||0,16387),this.file=null,this.destroyed=!1,this.minLength=n||0,this.maxLength=s||0,this.maxWrite=i||nK,this._periodicFlush=o||0,this._periodicFlushTimer=void 0,this.sync=a||!1,this.writable=!0,this._fsync=d||!1,this.append=c||!1,this.mode=f,this.retryEAGAIN=u||(()=>!0),this.mkdir=l||!1;let h,m;if(p===tC)this._writingBuf=fp,this.write=lK,this.flush=fK,this.flushSync=hK,this._actualWrite=mK,h=()=>vt.writeSync(this.fd,this._writingBuf),m=()=>vt.write(this.fd,this._writingBuf,this.release);else if(p===void 0||p===rC)this._writingBuf="",this.write=cK,this.flush=uK,this.flushSync=dK,this._actualWrite=pK,h=()=>vt.writeSync(this.fd,this._writingBuf,"utf8"),m=()=>vt.write(this.fd,this._writingBuf,"utf8",this.release);else throw new Error(`SonicBoom supports "${rC}" and "${tC}", but passed ${p}`);if(typeof e=="number")this.fd=e,process.nextTick(()=>this.emit("ready"));else if(typeof e=="string")nC(e,this);else throw new Error("SonicBoom supports only file descriptors and files");if(this.minLength>=this.maxWrite)throw new Error(`minLength should be smaller than maxWrite (${this.maxWrite})`);this.release=(y,g)=>{if(y){if((y.code==="EAGAIN"||y.code==="EBUSY")&&this.retryEAGAIN(y,this._writingBuf.length,this._len-this._writingBuf.length))if(this.sync)try{vv(up),this.release(void 0,0)}catch(v){this.release(v)}else setTimeout(m,up);else this._writing=!1,this.emit("error",y);return}this.emit("write",g);let w=_v(this._writingBuf,this._len,g);if(this._len=w.len,this._writingBuf=w.writingBuf,this._writingBuf.length){if(!this.sync){m();return}try{do{let v=h(),S=_v(this._writingBuf,this._len,v);this._len=S.len,this._writingBuf=S.writingBuf}while(this._writingBuf.length)}catch(v){this.release(v);return}}this._fsync&&vt.fsyncSync(this.fd);let _=this._len;this._reopening?(this._writing=!1,this._reopening=!1,this.reopen()):_>this.minLength?this._actualWrite():this._ending?_>0?this._actualWrite():(this._writing=!1,dp(this)):(this._writing=!1,this.sync?this._asyncDrainScheduled||(this._asyncDrainScheduled=!0,process.nextTick(aK,this)):this.emit("drain"))},this.on("newListener",function(y){y==="drain"&&(this._asyncDrainScheduled=!1)}),this._periodicFlush!==0&&(this._periodicFlushTimer=setInterval(()=>this.flush(null),this._periodicFlush),this._periodicFlushTimer.unref())}function _v(t,e,r){return typeof t=="string"&&Buffer.byteLength(t)!==r&&(r=Buffer.from(t).subarray(0,r).toString().length),e=Math.max(e-r,0),t=t.slice(r),{writingBuf:t,len:e}}function aK(t){t.listenerCount("drain")>0&&(t._asyncDrainScheduled=!1,t.emit("drain"))}tK(Ln,eK);function sC(t,e){return t.length===0?fp:t.length===1?t[0]:Buffer.concat(t,e)}function cK(t){if(this.destroyed)throw new Error("SonicBoom destroyed");let e=this._len+t.length,r=this._bufs;return this.maxLength&&e>this.maxLength?(this.emit("drop",t),this._len<this._hwm):(r.length===0||r[r.length-1].length+t.length>this.maxWrite?r.push(""+t):r[r.length-1]+=t,this._len=e,!this._writing&&this._len>=this.minLength&&this._actualWrite(),this._len<this._hwm)}function lK(t){if(this.destroyed)throw new Error("SonicBoom destroyed");let e=this._len+t.length,r=this._bufs,n=this._lens;return this.maxLength&&e>this.maxLength?(this.emit("drop",t),this._len<this._hwm):(r.length===0||n[n.length-1]+t.length>this.maxWrite?(r.push([t]),n.push(t.length)):(r[r.length-1].push(t),n[n.length-1]+=t.length),this._len=e,!this._writing&&this._len>=this.minLength&&this._actualWrite(),this._len<this._hwm)}function iC(t){this._flushPending=!0;let e=()=>{if(this._fsync)this._flushPending=!1,t();else try{vt.fsync(this.fd,n=>{this._flushPending=!1,t(n)})}catch(n){t(n)}this.off("error",r)},r=n=>{this._flushPending=!1,t(n),this.off("drain",e)};this.once("drain",e),this.once("error",r)}function uK(t){if(t!=null&&typeof t!="function")throw new Error("flush cb must be a function");if(this.destroyed){let e=new Error("SonicBoom destroyed");if(t){t(e);return}throw e}if(this.minLength<=0){t?.();return}t&&iC.call(this,t),!this._writing&&(this._bufs.length===0&&this._bufs.push(""),this._actualWrite())}function fK(t){if(t!=null&&typeof t!="function")throw new Error("flush cb must be a function");if(this.destroyed){let e=new Error("SonicBoom destroyed");if(t){t(e);return}throw e}if(this.minLength<=0){t?.();return}t&&iC.call(this,t),!this._writing&&(this._bufs.length===0&&(this._bufs.push([]),this._lens.push(0)),this._actualWrite())}Ln.prototype.reopen=function(t){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.reopen(t)});return}if(this._ending)return;if(!this.file)throw new Error("Unable to reopen a file descriptor, you must pass a file to SonicBoom");if(t&&(this.file=t),this._reopening=!0,this._writing)return;let e=this.fd;this.once("ready",()=>{e!==this.fd&&vt.close(e,r=>{if(r)return this.emit("error",r)})}),nC(this.file,this)};Ln.prototype.end=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.end()});return}this._ending||(this._ending=!0,!this._writing&&(this._len>0&&this.fd>=0?this._actualWrite():dp(this)))};function dK(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this.fd<0)throw new Error("sonic boom is not ready yet");!this._writing&&this._writingBuf.length>0&&(this._bufs.unshift(this._writingBuf),this._writingBuf="");let t="";for(;this._bufs.length||t;){t.length<=0&&(t=this._bufs[0]);try{let e=vt.writeSync(this.fd,t,"utf8"),r=_v(t,this._len,e);t=r.writingBuf,this._len=r.len,t.length<=0&&this._bufs.shift()}catch(e){if((e.code==="EAGAIN"||e.code==="EBUSY")&&!this.retryEAGAIN(e,t.length,this._len-t.length))throw e;vv(up)}}try{vt.fsyncSync(this.fd)}catch{}}function hK(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this.fd<0)throw new Error("sonic boom is not ready yet");!this._writing&&this._writingBuf.length>0&&(this._bufs.unshift([this._writingBuf]),this._writingBuf=fp);let t=fp;for(;this._bufs.length||t.length;){t.length<=0&&(t=sC(this._bufs[0],this._lens[0]));try{let e=vt.writeSync(this.fd,t);t=t.subarray(e),this._len=Math.max(this._len-e,0),t.length<=0&&(this._bufs.shift(),this._lens.shift())}catch(e){if((e.code==="EAGAIN"||e.code==="EBUSY")&&!this.retryEAGAIN(e,t.length,this._len-t.length))throw e;vv(up)}}}Ln.prototype.destroy=function(){this.destroyed||dp(this)};function pK(){let t=this.release;if(this._writing=!0,this._writingBuf=this._writingBuf||this._bufs.shift()||"",this.sync)try{let e=vt.writeSync(this.fd,this._writingBuf,"utf8");t(null,e)}catch(e){t(e)}else vt.write(this.fd,this._writingBuf,"utf8",t)}function mK(){let t=this.release;if(this._writing=!0,this._writingBuf=this._writingBuf.length?this._writingBuf:sC(this._bufs.shift(),this._lens.shift()),this.sync)try{let e=vt.writeSync(this.fd,this._writingBuf);t(null,e)}catch(e){t(e)}else oK&&(this._writingBuf=Buffer.from(this._writingBuf)),vt.write(this.fd,this._writingBuf,t)}function dp(t){if(t.fd===-1){t.once("ready",dp.bind(null,t));return}t._periodicFlushTimer!==void 0&&clearInterval(t._periodicFlushTimer),t.destroyed=!0,t._bufs=[],t._lens=[],rK(typeof t.fd=="number",`sonic.fd must be a number, got ${typeof t.fd}`);try{vt.fsync(t.fd,e)}catch{}function e(){t.fd!==1&&t.fd!==2?vt.close(t.fd,r):r()}function r(n){if(n){t.emit("error",n);return}t._ending&&!t._writing&&t.emit("finish"),t.emit("close")}}Ln.SonicBoom=Ln;Ln.default=Ln;oC.exports=Ln});var wv=E((lCe,dC)=>{"use strict";var Fn={exit:[],beforeExit:[]},cC={exit:_K,beforeExit:vK},fc;function gK(){fc===void 0&&(fc=new FinalizationRegistry(wK))}function yK(t){Fn[t].length>0||process.on(t,cC[t])}function lC(t){Fn[t].length>0||(process.removeListener(t,cC[t]),Fn.exit.length===0&&Fn.beforeExit.length===0&&(fc=void 0))}function _K(){uC("exit")}function vK(){uC("beforeExit")}function uC(t){for(let e of Fn[t]){let r=e.deref(),n=e.fn;r!==void 0&&n(r,t)}Fn[t]=[]}function wK(t){for(let e of["exit","beforeExit"]){let r=Fn[e].indexOf(t);Fn[e].splice(r,r+1),lC(e)}}function fC(t,e,r){if(e===void 0)throw new Error("the object can't be undefined");yK(t);let n=new WeakRef(e);n.fn=r,gK(),fc.register(e,n),Fn[t].push(n)}function bK(t,e){fC("exit",t,e)}function EK(t,e){fC("beforeExit",t,e)}function SK(t){if(fc!==void 0){fc.unregister(t);for(let e of["exit","beforeExit"])Fn[e]=Fn[e].filter(r=>{let n=r.deref();return n&&n!==t}),lC(e)}}dC.exports={register:bK,registerBeforeExit:EK,unregister:SK}});var hC=E((uCe,TK)=>{TK.exports={name:"thread-stream",version:"3.1.0",description:"A streaming way to send data to a Node.js Worker Thread",main:"index.js",types:"index.d.ts",dependencies:{"real-require":"^0.2.0"},devDependencies:{"@types/node":"^20.1.0","@types/tap":"^15.0.0","@yao-pkg/pkg":"^5.11.5",desm:"^1.3.0",fastbench:"^1.0.1",husky:"^9.0.6","pino-elasticsearch":"^8.0.0","sonic-boom":"^4.0.1",standard:"^17.0.0",tap:"^16.2.0","ts-node":"^10.8.0",typescript:"^5.3.2","why-is-node-running":"^2.2.2"},scripts:{build:"tsc --noEmit",test:'standard && npm run build && npm run transpile && tap "test/**/*.test.*js" && tap --ts test/*.test.*ts',"test:ci":"standard && npm run transpile && npm run test:ci:js && npm run test:ci:ts","test:ci:js":'tap --no-check-coverage --timeout=120 --coverage-report=lcovonly "test/**/*.test.*js"',"test:ci:ts":'tap --ts --no-check-coverage --coverage-report=lcovonly "test/**/*.test.*ts"',"test:yarn":'npm run transpile && tap "test/**/*.test.js" --no-check-coverage',transpile:"sh ./test/ts/transpile.sh",prepare:"husky install"},standard:{ignore:["test/ts/**/*","test/syntax-error.mjs"]},repository:{type:"git",url:"git+https://github.com/mcollina/thread-stream.git"},keywords:["worker","thread","threads","stream"],author:"Matteo Collina <hello@matteocollina.com>",license:"MIT",bugs:{url:"https://github.com/mcollina/thread-stream/issues"},homepage:"https://github.com/mcollina/thread-stream#readme"}});var mC=E((fCe,pC)=>{"use strict";function RK(t,e,r,n,s){let i=Date.now()+n,o=Atomics.load(t,e);if(o===r){s(null,"ok");return}let a=o,c=l=>{Date.now()>i?s(null,"timed-out"):setTimeout(()=>{a=o,o=Atomics.load(t,e),o===a?c(l>=1e3?1e3:l*2):o===r?s(null,"ok"):s(null,"not-equal")},l)};c(1)}function $K(t,e,r,n,s){let i=Date.now()+n,o=Atomics.load(t,e);if(o!==r){s(null,"ok");return}let a=c=>{Date.now()>i?s(null,"timed-out"):setTimeout(()=>{o=Atomics.load(t,e),o!==r?s(null,"ok"):a(c>=1e3?1e3:c*2)},c)};a(1)}pC.exports={wait:RK,waitDiff:$K}});var yC=E((dCe,gC)=>{"use strict";gC.exports={WRITE_INDEX:4,READ_INDEX:8}});var EC=E((hCe,bC)=>{"use strict";var{version:OK}=hC(),{EventEmitter:PK}=require("events"),{Worker:xK}=require("worker_threads"),{join:NK}=require("path"),{pathToFileURL:CK}=require("url"),{wait:IK}=mC(),{WRITE_INDEX:jr,READ_INDEX:ps}=yC(),AK=require("buffer"),kK=require("assert"),k=Symbol("kImpl"),DK=AK.constants.MAX_STRING_LENGTH,mu=class{constructor(e){this._value=e}deref(){return this._value}},pp=class{register(){}unregister(){}},MK=process.env.NODE_V8_COVERAGE?pp:global.FinalizationRegistry||pp,jK=process.env.NODE_V8_COVERAGE?mu:global.WeakRef||mu,_C=new MK(t=>{t.exited||t.terminate()});function qK(t,e){let{filename:r,workerData:n}=e,i=("__bundlerPathsOverrides"in globalThis?globalThis.__bundlerPathsOverrides:{})["thread-stream-worker"]||NK(__dirname,"lib","worker.js"),o=new xK(i,{...e.workerOpts,trackUnmanagedFds:!1,workerData:{filename:r.indexOf("file://")===0?r:CK(r).href,dataBuf:t[k].dataBuf,stateBuf:t[k].stateBuf,workerData:{$context:{threadStreamVersion:OK},...n}}});return o.stream=new mu(t),o.on("message",LK),o.on("exit",wC),_C.register(t,o),o}function vC(t){kK(!t[k].sync),t[k].needDrain&&(t[k].needDrain=!1,t.emit("drain"))}function hp(t){let e=Atomics.load(t[k].state,jr),r=t[k].data.length-e;if(r>0){if(t[k].buf.length===0){t[k].flushing=!1,t[k].ending?Rv(t):t[k].needDrain&&process.nextTick(vC,t);return}let n=t[k].buf.slice(0,r),s=Buffer.byteLength(n);s<=r?(t[k].buf=t[k].buf.slice(r),mp(t,n,hp.bind(null,t))):t.flush(()=>{if(!t.destroyed){for(Atomics.store(t[k].state,ps,0),Atomics.store(t[k].state,jr,0);s>t[k].data.length;)r=r/2,n=t[k].buf.slice(0,r),s=Buffer.byteLength(n);t[k].buf=t[k].buf.slice(r),mp(t,n,hp.bind(null,t))}})}else if(r===0){if(e===0&&t[k].buf.length===0)return;t.flush(()=>{Atomics.store(t[k].state,ps,0),Atomics.store(t[k].state,jr,0),hp(t)})}else ms(t,new Error("overwritten"))}function LK(t){let e=this.stream.deref();if(e===void 0){this.exited=!0,this.terminate();return}switch(t.code){case"READY":this.stream=new jK(e),e.flush(()=>{e[k].ready=!0,e.emit("ready")});break;case"ERROR":ms(e,t.err);break;case"EVENT":Array.isArray(t.args)?e.emit(t.name,...t.args):e.emit(t.name,t.args);break;case"WARNING":process.emitWarning(t.err);break;default:ms(e,new Error("this should not happen: "+t.code))}}function wC(t){let e=this.stream.deref();e!==void 0&&(_C.unregister(e),e.worker.exited=!0,e.worker.off("exit",wC),ms(e,t!==0?new Error("the worker thread exited"):null))}var Ev=class extends PK{constructor(e={}){if(super(),e.bufferSize<4)throw new Error("bufferSize must at least fit a 4-byte utf-8 char");this[k]={},this[k].stateBuf=new SharedArrayBuffer(128),this[k].state=new Int32Array(this[k].stateBuf),this[k].dataBuf=new SharedArrayBuffer(e.bufferSize||4*1024*1024),this[k].data=Buffer.from(this[k].dataBuf),this[k].sync=e.sync||!1,this[k].ending=!1,this[k].ended=!1,this[k].needDrain=!1,this[k].destroyed=!1,this[k].flushing=!1,this[k].ready=!1,this[k].finished=!1,this[k].errored=null,this[k].closed=!1,this[k].buf="",this.worker=qK(this,e),this.on("message",(r,n)=>{this.worker.postMessage(r,n)})}write(e){if(this[k].destroyed)return Sv(this,new Error("the worker has exited")),!1;if(this[k].ending)return Sv(this,new Error("the worker is ending")),!1;if(this[k].flushing&&this[k].buf.length+e.length>=DK)try{bv(this),this[k].flushing=!0}catch(r){return ms(this,r),!1}if(this[k].buf+=e,this[k].sync)try{return bv(this),!0}catch(r){return ms(this,r),!1}return this[k].flushing||(this[k].flushing=!0,setImmediate(hp,this)),this[k].needDrain=this[k].data.length-this[k].buf.length-Atomics.load(this[k].state,jr)<=0,!this[k].needDrain}end(){this[k].destroyed||(this[k].ending=!0,Rv(this))}flush(e){if(this[k].destroyed){typeof e=="function"&&process.nextTick(e,new Error("the worker has exited"));return}let r=Atomics.load(this[k].state,jr);IK(this[k].state,ps,r,1/0,(n,s)=>{if(n){ms(this,n),process.nextTick(e,n);return}if(s==="not-equal"){this.flush(e);return}process.nextTick(e)})}flushSync(){this[k].destroyed||(bv(this),Tv(this))}unref(){this.worker.unref()}ref(){this.worker.ref()}get ready(){return this[k].ready}get destroyed(){return this[k].destroyed}get closed(){return this[k].closed}get writable(){return!this[k].destroyed&&!this[k].ending}get writableEnded(){return this[k].ending}get writableFinished(){return this[k].finished}get writableNeedDrain(){return this[k].needDrain}get writableObjectMode(){return!1}get writableErrored(){return this[k].errored}};function Sv(t,e){setImmediate(()=>{t.emit("error",e)})}function ms(t,e){t[k].destroyed||(t[k].destroyed=!0,e&&(t[k].errored=e,Sv(t,e)),t.worker.exited?setImmediate(()=>{t[k].closed=!0,t.emit("close")}):t.worker.terminate().catch(()=>{}).then(()=>{t[k].closed=!0,t.emit("close")}))}function mp(t,e,r){let n=Atomics.load(t[k].state,jr),s=Buffer.byteLength(e);return t[k].data.write(e,n),Atomics.store(t[k].state,jr,n+s),Atomics.notify(t[k].state,jr),r(),!0}function Rv(t){if(!(t[k].ended||!t[k].ending||t[k].flushing)){t[k].ended=!0;try{t.flushSync();let e=Atomics.load(t[k].state,ps);Atomics.store(t[k].state,jr,-1),Atomics.notify(t[k].state,jr);let r=0;for(;e!==-1;){if(Atomics.wait(t[k].state,ps,e,1e3),e=Atomics.load(t[k].state,ps),e===-2){ms(t,new Error("end() failed"));return}if(++r===10){ms(t,new Error("end() took too long (10s)"));return}}process.nextTick(()=>{t[k].finished=!0,t.emit("finish")})}catch(e){ms(t,e)}}}function bv(t){let e=()=>{t[k].ending?Rv(t):t[k].needDrain&&process.nextTick(vC,t)};for(t[k].flushing=!1;t[k].buf.length!==0;){let r=Atomics.load(t[k].state,jr),n=t[k].data.length-r;if(n===0){Tv(t),Atomics.store(t[k].state,ps,0),Atomics.store(t[k].state,jr,0);continue}else if(n<0)throw new Error("overwritten");let s=t[k].buf.slice(0,n),i=Buffer.byteLength(s);if(i<=n)t[k].buf=t[k].buf.slice(n),mp(t,s,e);else{for(Tv(t),Atomics.store(t[k].state,ps,0),Atomics.store(t[k].state,jr,0);i>t[k].buf.length;)n=n/2,s=t[k].buf.slice(0,n),i=Buffer.byteLength(s);t[k].buf=t[k].buf.slice(n),mp(t,s,e)}}}function Tv(t){if(t[k].flushing)throw new Error("unable to flush while flushing");let e=Atomics.load(t[k].state,jr),r=0;for(;;){let n=Atomics.load(t[k].state,ps);if(n===-2)throw Error("_flushSync failed");if(n!==e)Atomics.wait(t[k].state,ps,n,1e3);else break;if(++r===10)throw new Error("_flushSync took too long (10s)")}}bC.exports=Ev});var Pv=E((pCe,SC)=>{"use strict";var{createRequire:FK}=require("module"),UK=dv(),{join:$v,isAbsolute:BK,sep:VK}=require("path"),zK=yv(),Ov=wv(),HK=EC();function GK(t){Ov.register(t,KK),Ov.registerBeforeExit(t,JK),t.on("close",function(){Ov.unregister(t)})}function WK(t,e,r,n){let s=new HK({filename:t,workerData:e,workerOpts:r,sync:n});s.on("ready",i),s.on("close",function(){process.removeListener("exit",o)}),process.on("exit",o);function i(){process.removeListener("exit",o),s.unref(),r.autoEnd!==!1&&GK(s)}function o(){s.closed||(s.flushSync(),zK(100),s.end())}return s}function KK(t){t.ref(),t.flushSync(),t.end(),t.once("close",function(){t.unref()})}function JK(t){t.flushSync()}function YK(t){let{pipeline:e,targets:r,levels:n,dedupe:s,worker:i={},caller:o=UK(),sync:a=!1}=t,c={...t.options},l=typeof o=="string"?[o]:o,u="__bundlerPathsOverrides"in globalThis?globalThis.__bundlerPathsOverrides:{},d=t.target;if(d&&r)throw new Error("only one of target or targets can be specified");return r?(d=u["pino-worker"]||$v(__dirname,"worker.js"),c.targets=r.filter(f=>f.target).map(f=>({...f,target:p(f.target)})),c.pipelines=r.filter(f=>f.pipeline).map(f=>f.pipeline.map(h=>({...h,level:f.level,target:p(h.target)})))):e&&(d=u["pino-worker"]||$v(__dirname,"worker.js"),c.pipelines=[e.map(f=>({...f,target:p(f.target)}))]),n&&(c.levels=n),s&&(c.dedupe=s),c.pinoWillSendConfig=!0,WK(p(d),c,i,a);function p(f){if(f=u[f]||f,BK(f)||f.indexOf("file://")===0)return f;if(f==="pino/file")return $v(__dirname,"..","file.js");let h;for(let m of l)try{let y=m==="node:repl"?process.cwd()+VK:m;h=FK(y).resolve(f);break}catch{continue}if(!h)throw new Error(`unable to determine transport target for "${f}"`);return h}}SC.exports=YK});var _p=E((mCe,MC)=>{"use strict";var XK=require("diagnostics_channel"),TC=ZN(),{mapHttpRequest:QK,mapHttpResponse:ZK}=fv(),Nv=aC(),RC=wv(),{lsCacheSym:eJ,chindingsSym:NC,writeSym:$C,serializersSym:CC,formatOptsSym:OC,endSym:tJ,stringifiersSym:IC,stringifySym:AC,stringifySafeSym:Cv,wildcardFirstSym:kC,nestedKeySym:rJ,formattersSym:DC,messageKeySym:nJ,errorKeySym:sJ,nestedKeyStrSym:iJ,msgPrefixSym:gp}=uc(),{isMainThread:oJ}=require("worker_threads"),aJ=Pv(),PC=XK.tracingChannel("pino_asJson");function dc(){}function cJ(t,e){if(!e)return r;return function(...s){e.call(this,s,r,t)};function r(n,...s){if(typeof n=="object"){let i=n;n!==null&&(n.method&&n.headers&&n.socket?n=QK(n):typeof n.setHeader=="function"&&(n=ZK(n)));let o;i===null&&s.length===0?o=[null]:(i=s.shift(),o=s),typeof this[gp]=="string"&&i!==void 0&&i!==null&&(i=this[gp]+i),this[$C](n,TC(i,o,this[OC]),t)}else{let i=n===void 0?s.shift():n;typeof this[gp]=="string"&&i!==void 0&&i!==null&&(i=this[gp]+i),this[$C](null,TC(i,s,this[OC]),t)}}}function xv(t){let e="",r=0,n=!1,s=255,i=t.length;if(i>100)return JSON.stringify(t);for(var o=0;o<i&&s>=32;o++)s=t.charCodeAt(o),(s===34||s===92)&&(e+=t.slice(r,o)+"\\",r=o,n=!0);return n?e+=t.slice(r):e=t,s<32?JSON.stringify(t):'"'+e+'"'}function lJ(t,e,r,n){if(PC.hasSubscribers===!1)return xC.call(this,t,e,r,n);let s={instance:this,arguments};return PC.traceSync(xC,s,this,t,e,r,n)}function xC(t,e,r,n){let s=this[AC],i=this[Cv],o=this[IC],a=this[tJ],c=this[NC],l=this[CC],u=this[DC],d=this[nJ],p=this[sJ],f=this[eJ][r]+n;f=f+c;let h;u.log&&(t=u.log(t));let m=o[kC],y="";for(let w in t)if(h=t[w],Object.prototype.hasOwnProperty.call(t,w)&&h!==void 0){l[w]?h=l[w](h):w===p&&l.err&&(h=l.err(h));let _=o[w]||m;switch(typeof h){case"undefined":case"function":continue;case"number":Number.isFinite(h)===!1&&(h=null);case"boolean":_&&(h=_(h));break;case"string":h=(_||xv)(h);break;default:h=(_||s)(h,i)}if(h===void 0)continue;let v=xv(w);y+=","+v+":"+h}let g="";if(e!==void 0){h=l[d]?l[d](e):e;let w=o[d]||m;switch(typeof h){case"function":break;case"number":Number.isFinite(h)===!1&&(h=null);case"boolean":w&&(h=w(h)),g=',"'+d+'":'+h;break;case"string":h=(w||xv)(h),g=',"'+d+'":'+h;break;default:h=(w||s)(h,i),g=',"'+d+'":'+h}}return this[rJ]&&y?f+this[iJ]+y.slice(1)+"}"+g+a:f+y+g+a}function uJ(t,e){let r,n=t[NC],s=t[AC],i=t[Cv],o=t[IC],a=o[kC],c=t[CC],l=t[DC].bindings;e=l(e);for(let u in e)if(r=e[u],((u.length<5||u!=="level"&&u!=="serializers"&&u!=="formatters"&&u!=="customLevels")&&e.hasOwnProperty(u)&&r!==void 0)===!0){if(r=c[u]?c[u](r):r,r=(o[u]||a||s)(r,i),r===void 0)continue;n+=',"'+u+'":'+r}return n}function fJ(t){return t.write!==t.constructor.prototype.write}function yp(t){let e=new Nv(t);return e.on("error",r),!t.sync&&oJ&&(RC.register(e,dJ),e.on("close",function(){RC.unregister(e)})),e;function r(n){if(n.code==="EPIPE"){e.write=dc,e.end=dc,e.flushSync=dc,e.destroy=dc;return}e.removeListener("error",r),e.emit("error",n)}}function dJ(t,e){t.destroyed||(e==="beforeExit"?(t.flush(),t.on("drain",function(){t.end()})):t.flushSync())}function hJ(t){return function(r,n,s={},i){if(typeof s=="string")i=yp({dest:s}),s={};else if(typeof i=="string"){if(s&&s.transport)throw Error("only one of option.transport or stream can be specified");i=yp({dest:i})}else if(s instanceof Nv||s.writable||s._writableState)i=s,s={};else if(s.transport){if(s.transport instanceof Nv||s.transport.writable||s.transport._writableState)throw Error("option.transport do not allow stream, please pass to option directly. e.g. pino(transport)");if(s.transport.targets&&s.transport.targets.length&&s.formatters&&typeof s.formatters.level=="function")throw Error("option.transport.targets do not allow custom level formatters");let c;s.customLevels&&(c=s.useOnlyCustomLevels?s.customLevels:Object.assign({},s.levels,s.customLevels)),i=aJ({caller:n,...s.transport,levels:c})}if(s=Object.assign({},t,s),s.serializers=Object.assign({},t.serializers,s.serializers),s.formatters=Object.assign({},t.formatters,s.formatters),s.prettyPrint)throw new Error("prettyPrint option is no longer supported, see the pino-pretty package (https://github.com/pinojs/pino-pretty)");let{enabled:o,onChild:a}=s;return o===!1&&(s.level="silent"),a||(s.onChild=dc),i||(fJ(process.stdout)?i=process.stdout:i=yp({fd:process.stdout.fd||1})),{opts:s,stream:i}}}function pJ(t,e){try{return JSON.stringify(t)}catch{try{return(e||this[Cv])(t)}catch{return'"[unable to serialize, circular reference is too complex to analyze]"'}}}function mJ(t,e,r){return{level:t,bindings:e,log:r}}function gJ(t){let e=Number(t);return typeof t=="string"&&Number.isFinite(e)?e:t===void 0?1:t}MC.exports={noop:dc,buildSafeSonicBoom:yp,asChindings:uJ,asJson:lJ,genLog:cJ,createArgsNormalizer:hJ,stringify:pJ,buildFormatters:mJ,normalizeDestFileDescriptor:gJ}});var vp=E((gCe,jC)=>{var yJ={trace:10,debug:20,info:30,warn:40,error:50,fatal:60},_J={ASC:"ASC",DESC:"DESC"};jC.exports={DEFAULT_LEVELS:yJ,SORTING_ORDER:_J}});var kv=E((yCe,UC)=>{"use strict";var{lsCacheSym:vJ,levelValSym:Iv,useOnlyCustomLevelsSym:wJ,streamSym:bJ,formattersSym:EJ,hooksSym:SJ,levelCompSym:qC}=uc(),{noop:TJ,genLog:qo}=_p(),{DEFAULT_LEVELS:gs,SORTING_ORDER:LC}=vp(),FC={fatal:t=>{let e=qo(gs.fatal,t);return function(...r){let n=this[bJ];if(e.call(this,...r),typeof n.flushSync=="function")try{n.flushSync()}catch{}}},error:t=>qo(gs.error,t),warn:t=>qo(gs.warn,t),info:t=>qo(gs.info,t),debug:t=>qo(gs.debug,t),trace:t=>qo(gs.trace,t)},Av=Object.keys(gs).reduce((t,e)=>(t[gs[e]]=e,t),{}),RJ=Object.keys(Av).reduce((t,e)=>(t[e]='{"level":'+Number(e),t),{});function $J(t){let e=t[EJ].level,{labels:r}=t.levels,n={};for(let s in r){let i=e(r[s],Number(s));n[s]=JSON.stringify(i).slice(0,-1)}return t[vJ]=n,t}function OJ(t,e){if(e)return!1;switch(t){case"fatal":case"error":case"warn":case"info":case"debug":case"trace":return!0;default:return!1}}function PJ(t){let{labels:e,values:r}=this.levels;if(typeof t=="number"){if(e[t]===void 0)throw Error("unknown level value"+t);t=e[t]}if(r[t]===void 0)throw Error("unknown level "+t);let n=this[Iv],s=this[Iv]=r[t],i=this[wJ],o=this[qC],a=this[SJ].logMethod;for(let c in r){if(o(r[c],s)===!1){this[c]=TJ;continue}this[c]=OJ(c,i)?FC[c](a):qo(r[c],a)}this.emit("level-change",t,s,e[n],n,this)}function xJ(t){let{levels:e,levelVal:r}=this;return e&&e.labels?e.labels[r]:""}function NJ(t){let{values:e}=this.levels,r=e[t];return r!==void 0&&this[qC](r,this[Iv])}function CJ(t,e,r){return t===LC.DESC?e<=r:e>=r}function IJ(t){return typeof t=="string"?CJ.bind(null,t):t}function AJ(t=null,e=!1){let r=t?Object.keys(t).reduce((i,o)=>(i[t[o]]=o,i),{}):null,n=Object.assign(Object.create(Object.prototype,{Infinity:{value:"silent"}}),e?null:Av,r),s=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),e?null:gs,t);return{labels:n,values:s}}function kJ(t,e,r){if(typeof t=="number"){if(![].concat(Object.keys(e||{}).map(i=>e[i]),r?[]:Object.keys(Av).map(i=>+i),1/0).includes(t))throw Error(`default level:${t} must be included in custom levels`);return}let n=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),r?null:gs,e);if(!(t in n))throw Error(`default level:${t} must be included in custom levels`)}function DJ(t,e){let{labels:r,values:n}=t;for(let s in e){if(s in n)throw Error("levels cannot be overridden");if(e[s]in r)throw Error("pre-existing level values cannot be used for new levels")}}function MJ(t){if(typeof t!="function"&&!(typeof t=="string"&&Object.values(LC).includes(t)))throw new Error('Levels comparison should be one of "ASC", "DESC" or "function" type')}UC.exports={initialLsCache:RJ,genLsCache:$J,levelMethods:FC,getLevel:xJ,setLevel:PJ,isLevelEnabled:NJ,mappings:AJ,assertNoLevelCollisions:DJ,assertDefaultLevelFound:kJ,genLevelComparison:IJ,assertLevelComparison:MJ}});var Dv=E((_Ce,BC)=>{"use strict";BC.exports={version:"10.1.0"}});var YC=E((wCe,JC)=>{"use strict";var{EventEmitter:jJ}=require("events"),{lsCacheSym:qJ,levelValSym:LJ,setLevelSym:jv,getLevelSym:VC,chindingsSym:bp,mixinSym:FJ,asJsonSym:HC,writeSym:UJ,mixinMergeStrategySym:BJ,timeSym:VJ,timeSliceIndexSym:zJ,streamSym:GC,serializersSym:Lo,formattersSym:gu,errorKeySym:HJ,messageKeySym:GJ,useOnlyCustomLevelsSym:WJ,needsMetadataGsym:KJ,redactFmtSym:JJ,stringifySym:YJ,formatOptsSym:XJ,stringifiersSym:QJ,msgPrefixSym:qv,hooksSym:ZJ}=uc(),{getLevel:eY,setLevel:tY,isLevelEnabled:rY,mappings:nY,initialLsCache:sY,genLsCache:iY,assertNoLevelCollisions:oY}=kv(),{asChindings:Lv,asJson:aY,buildFormatters:Mv,stringify:zC,noop:WC}=_p(),{version:cY}=Dv(),lY=mv(),uY=class{},KC={constructor:uY,child:fY,bindings:dY,setBindings:hY,flush:gY,isLevelEnabled:rY,version:cY,get level(){return this[VC]()},set level(t){this[jv](t)},get levelVal(){return this[LJ]},set levelVal(t){throw Error("levelVal is read-only")},get msgPrefix(){return this[qv]},get[Symbol.toStringTag](){return"Pino"},[qJ]:sY,[UJ]:mY,[HC]:aY,[VC]:eY,[jv]:tY};Object.setPrototypeOf(KC,jJ.prototype);JC.exports=function(){return Object.create(KC)};var wp=t=>t;function fY(t,e){if(!t)throw Error("missing bindings for child Pino");let r=this[Lo],n=this[gu],s=Object.create(this);if(e==null)return s[gu].bindings!==wp&&(s[gu]=Mv(n.level,wp,n.log)),s[bp]=Lv(s,t),this.onChild!==WC&&this.onChild(s),s;if(e.hasOwnProperty("serializers")===!0){s[Lo]=Object.create(null);for(let l in r)s[Lo][l]=r[l];let a=Object.getOwnPropertySymbols(r);for(var i=0;i<a.length;i++){let l=a[i];s[Lo][l]=r[l]}for(let l in e.serializers)s[Lo][l]=e.serializers[l];let c=Object.getOwnPropertySymbols(e.serializers);for(var o=0;o<c.length;o++){let l=c[o];s[Lo][l]=e.serializers[l]}}else s[Lo]=r;if(e.hasOwnProperty("formatters")){let{level:a,bindings:c,log:l}=e.formatters;s[gu]=Mv(a||n.level,c||wp,l||n.log)}else s[gu]=Mv(n.level,wp,n.log);if(e.hasOwnProperty("customLevels")===!0&&(oY(this.levels,e.customLevels),s.levels=nY(e.customLevels,s[WJ]),iY(s)),typeof e.redact=="object"&&e.redact!==null||Array.isArray(e.redact)){s.redact=e.redact;let a=lY(s.redact,zC),c={stringify:a[JJ]};s[YJ]=zC,s[QJ]=a,s[XJ]=c}if(typeof e.msgPrefix=="string"&&(s[qv]=(this[qv]||"")+e.msgPrefix),s[bp]=Lv(s,t),e.level!==void 0&&e.level!==this.level||e.hasOwnProperty("customLevels")){let a=e.level||this.level;s[jv](a)}return this.onChild(s),s}function dY(){let e=`{${this[bp].substr(1)}}`,r=JSON.parse(e);return delete r.pid,delete r.hostname,r}function hY(t){let e=Lv(this,t);this[bp]=e}function pY(t,e){return Object.assign(e,t)}function mY(t,e,r){let n=this[VJ](),s=this[FJ],i=this[HJ],o=this[GJ],a=this[BJ]||pY,c,l=this[ZJ].streamWrite;t==null?c={}:t instanceof Error?(c={[i]:t},e===void 0&&(e=t.message)):(c=t,e===void 0&&t[o]===void 0&&t[i]&&(e=t[i].message)),s&&(c=a(c,s(c,r,this)));let u=this[HC](c,e,r,n),d=this[GC];d[KJ]===!0&&(d.lastLevel=r,d.lastObj=c,d.lastMsg=e,d.lastTime=n.slice(this[zJ]),d.lastLogger=this),d.write(l?l(u):u)}function gY(t){if(t!=null&&typeof t!="function")throw Error("callback must be a function");let e=this[GC];typeof e.flush=="function"?e.flush(t||WC):t&&t()}});var eI=E((Vv,ZC)=>{"use strict";var{hasOwnProperty:yu}=Object.prototype,Uo=Bv();Uo.configure=Bv;Uo.stringify=Uo;Uo.default=Uo;Vv.stringify=Uo;Vv.configure=Bv;ZC.exports=Uo;var yY=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]/;function Ai(t){return t.length<5e3&&!yY.test(t)?`"${t}"`:JSON.stringify(t)}function Fv(t,e){if(t.length>200||e)return t.sort(e);for(let r=1;r<t.length;r++){let n=t[r],s=r;for(;s!==0&&t[s-1]>n;)t[s]=t[s-1],s--;t[s]=n}return t}var _Y=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function Uv(t){return _Y.call(t)!==void 0&&t.length!==0}function XC(t,e,r){t.length<r&&(r=t.length);let n=e===","?"":" ",s=`"0":${n}${t[0]}`;for(let i=1;i<r;i++)s+=`${e}"${i}":${n}${t[i]}`;return s}function vY(t){if(yu.call(t,"circularValue")){let e=t.circularValue;if(typeof e=="string")return`"${e}"`;if(e==null)return e;if(e===Error||e===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}function wY(t){let e;if(yu.call(t,"deterministic")&&(e=t.deterministic,typeof e!="boolean"&&typeof e!="function"))throw new TypeError('The "deterministic" argument must be of type boolean or comparator function');return e===void 0?!0:e}function bY(t,e){let r;if(yu.call(t,e)&&(r=t[e],typeof r!="boolean"))throw new TypeError(`The "${e}" argument must be of type boolean`);return r===void 0?!0:r}function QC(t,e){let r;if(yu.call(t,e)){if(r=t[e],typeof r!="number")throw new TypeError(`The "${e}" argument must be of type number`);if(!Number.isInteger(r))throw new TypeError(`The "${e}" argument must be an integer`);if(r<1)throw new RangeError(`The "${e}" argument must be >= 1`)}return r===void 0?1/0:r}function Fo(t){return t===1?"1 item":`${t} items`}function EY(t){let e=new Set;for(let r of t)(typeof r=="string"||typeof r=="number")&&e.add(String(r));return e}function SY(t){if(yu.call(t,"strict")){let e=t.strict;if(typeof e!="boolean")throw new TypeError('The "strict" argument must be of type boolean');if(e)return r=>{let n=`Object can not safely be stringified. Received type ${typeof r}`;throw typeof r!="function"&&(n+=` (${r.toString()})`),new Error(n)}}}function Bv(t){t={...t};let e=SY(t);e&&(t.bigint===void 0&&(t.bigint=!1),"circularValue"in t||(t.circularValue=Error));let r=vY(t),n=bY(t,"bigint"),s=wY(t),i=typeof s=="function"?s:void 0,o=QC(t,"maximumDepth"),a=QC(t,"maximumBreadth");function c(f,h,m,y,g,w){let _=h[f];switch(typeof _=="object"&&_!==null&&typeof _.toJSON=="function"&&(_=_.toJSON(f)),_=y.call(h,f,_),typeof _){case"string":return Ai(_);case"object":{if(_===null)return"null";if(m.indexOf(_)!==-1)return r;let v="",S=",",$=w;if(Array.isArray(_)){if(_.length===0)return"[]";if(o<m.length+1)return'"[Array]"';m.push(_),g!==""&&(w+=g,v+=`
${w}`,S=`,
${w}`);let N=Math.min(_.length,a),C=0;for(;C<N-1;C++){let te=c(String(C),_,m,y,g,w);v+=te!==void 0?te:"null",v+=S}let V=c(String(C),_,m,y,g,w);if(v+=V!==void 0?V:"null",_.length-1>a){let te=_.length-a-1;v+=`${S}"... ${Fo(te)} not stringified"`}return g!==""&&(v+=`
${$}`),m.pop(),`[${v}]`}let T=Object.keys(_),O=T.length;if(O===0)return"{}";if(o<m.length+1)return'"[Object]"';let R="",P="";g!==""&&(w+=g,S=`,
${w}`,R=" ");let A=Math.min(O,a);s&&!Uv(_)&&(T=Fv(T,i)),m.push(_);for(let N=0;N<A;N++){let C=T[N],V=c(C,_,m,y,g,w);V!==void 0&&(v+=`${P}${Ai(C)}:${R}${V}`,P=S)}if(O>a){let N=O-a;v+=`${P}"...":${R}"${Fo(N)} not stringified"`,P=S}return g!==""&&P.length>1&&(v=`
${w}${v}
${$}`),m.pop(),`{${v}}`}case"number":return isFinite(_)?String(_):e?e(_):"null";case"boolean":return _===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(_);default:return e?e(_):void 0}}function l(f,h,m,y,g,w){switch(typeof h=="object"&&h!==null&&typeof h.toJSON=="function"&&(h=h.toJSON(f)),typeof h){case"string":return Ai(h);case"object":{if(h===null)return"null";if(m.indexOf(h)!==-1)return r;let _=w,v="",S=",";if(Array.isArray(h)){if(h.length===0)return"[]";if(o<m.length+1)return'"[Array]"';m.push(h),g!==""&&(w+=g,v+=`
${w}`,S=`,
${w}`);let O=Math.min(h.length,a),R=0;for(;R<O-1;R++){let A=l(String(R),h[R],m,y,g,w);v+=A!==void 0?A:"null",v+=S}let P=l(String(R),h[R],m,y,g,w);if(v+=P!==void 0?P:"null",h.length-1>a){let A=h.length-a-1;v+=`${S}"... ${Fo(A)} not stringified"`}return g!==""&&(v+=`
${_}`),m.pop(),`[${v}]`}m.push(h);let $="";g!==""&&(w+=g,S=`,
${w}`,$=" ");let T="";for(let O of y){let R=l(O,h[O],m,y,g,w);R!==void 0&&(v+=`${T}${Ai(O)}:${$}${R}`,T=S)}return g!==""&&T.length>1&&(v=`
${w}${v}
${_}`),m.pop(),`{${v}}`}case"number":return isFinite(h)?String(h):e?e(h):"null";case"boolean":return h===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(h);default:return e?e(h):void 0}}function u(f,h,m,y,g){switch(typeof h){case"string":return Ai(h);case"object":{if(h===null)return"null";if(typeof h.toJSON=="function"){if(h=h.toJSON(f),typeof h!="object")return u(f,h,m,y,g);if(h===null)return"null"}if(m.indexOf(h)!==-1)return r;let w=g;if(Array.isArray(h)){if(h.length===0)return"[]";if(o<m.length+1)return'"[Array]"';m.push(h),g+=y;let R=`
${g}`,P=`,
${g}`,A=Math.min(h.length,a),N=0;for(;N<A-1;N++){let V=u(String(N),h[N],m,y,g);R+=V!==void 0?V:"null",R+=P}let C=u(String(N),h[N],m,y,g);if(R+=C!==void 0?C:"null",h.length-1>a){let V=h.length-a-1;R+=`${P}"... ${Fo(V)} not stringified"`}return R+=`
${w}`,m.pop(),`[${R}]`}let _=Object.keys(h),v=_.length;if(v===0)return"{}";if(o<m.length+1)return'"[Object]"';g+=y;let S=`,
${g}`,$="",T="",O=Math.min(v,a);Uv(h)&&($+=XC(h,S,a),_=_.slice(h.length),O-=h.length,T=S),s&&(_=Fv(_,i)),m.push(h);for(let R=0;R<O;R++){let P=_[R],A=u(P,h[P],m,y,g);A!==void 0&&($+=`${T}${Ai(P)}: ${A}`,T=S)}if(v>a){let R=v-a;$+=`${T}"...": "${Fo(R)} not stringified"`,T=S}return T!==""&&($=`
${g}${$}
${w}`),m.pop(),`{${$}}`}case"number":return isFinite(h)?String(h):e?e(h):"null";case"boolean":return h===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(h);default:return e?e(h):void 0}}function d(f,h,m){switch(typeof h){case"string":return Ai(h);case"object":{if(h===null)return"null";if(typeof h.toJSON=="function"){if(h=h.toJSON(f),typeof h!="object")return d(f,h,m);if(h===null)return"null"}if(m.indexOf(h)!==-1)return r;let y="",g=h.length!==void 0;if(g&&Array.isArray(h)){if(h.length===0)return"[]";if(o<m.length+1)return'"[Array]"';m.push(h);let $=Math.min(h.length,a),T=0;for(;T<$-1;T++){let R=d(String(T),h[T],m);y+=R!==void 0?R:"null",y+=","}let O=d(String(T),h[T],m);if(y+=O!==void 0?O:"null",h.length-1>a){let R=h.length-a-1;y+=`,"... ${Fo(R)} not stringified"`}return m.pop(),`[${y}]`}let w=Object.keys(h),_=w.length;if(_===0)return"{}";if(o<m.length+1)return'"[Object]"';let v="",S=Math.min(_,a);g&&Uv(h)&&(y+=XC(h,",",a),w=w.slice(h.length),S-=h.length,v=","),s&&(w=Fv(w,i)),m.push(h);for(let $=0;$<S;$++){let T=w[$],O=d(T,h[T],m);O!==void 0&&(y+=`${v}${Ai(T)}:${O}`,v=",")}if(_>a){let $=_-a;y+=`${v}"...":"${Fo($)} not stringified"`}return m.pop(),`{${y}}`}case"number":return isFinite(h)?String(h):e?e(h):"null";case"boolean":return h===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(h);default:return e?e(h):void 0}}function p(f,h,m){if(arguments.length>1){let y="";if(typeof m=="number"?y=" ".repeat(Math.min(m,10)):typeof m=="string"&&(y=m.slice(0,10)),h!=null){if(typeof h=="function")return c("",{"":f},[],h,y,"");if(Array.isArray(h))return l("",f,[],EY(h),y,"")}if(y.length!==0)return u("",f,[],y,"")}return d("",f,[])}return p}});var sI=E((bCe,nI)=>{"use strict";var zv=Symbol.for("pino.metadata"),{DEFAULT_LEVELS:rI}=vp(),TY=rI.info;function RY(t,e){t=t||[],e=e||{dedupe:!1};let r=Object.create(rI);r.silent=1/0,e.levels&&typeof e.levels=="object"&&Object.keys(e.levels).forEach(d=>{r[d]=e.levels[d]});let n={write:s,add:a,remove:c,emit:i,flushSync:o,end:l,minLevel:0,lastId:0,streams:[],clone:u,[zv]:!0,streamLevels:r};return Array.isArray(t)?t.forEach(a,n):a.call(n,t),t=null,n;function s(d){let p,f=this.lastLevel,{streams:h}=this,m=0,y;for(let g=$Y(h.length,e.dedupe);PY(g,h.length,e.dedupe);g=OY(g,e.dedupe))if(p=h[g],p.level<=f){if(m!==0&&m!==p.level)break;if(y=p.stream,y[zv]){let{lastTime:w,lastMsg:_,lastObj:v,lastLogger:S}=this;y.lastLevel=f,y.lastTime=w,y.lastMsg=_,y.lastObj=v,y.lastLogger=S}y.write(d),e.dedupe&&(m=p.level)}else if(!e.dedupe)break}function i(...d){for(let{stream:p}of this.streams)typeof p.emit=="function"&&p.emit(...d)}function o(){for(let{stream:d}of this.streams)typeof d.flushSync=="function"&&d.flushSync()}function a(d){if(!d)return n;let p=typeof d.write=="function"||d.stream,f=d.write?d:d.stream;if(!p)throw Error("stream object needs to implement either StreamEntry or DestinationStream interface");let{streams:h,streamLevels:m}=this,y;typeof d.levelVal=="number"?y=d.levelVal:typeof d.level=="string"?y=m[d.level]:typeof d.level=="number"?y=d.level:y=TY;let g={stream:f,level:y,levelVal:void 0,id:++n.lastId};return h.unshift(g),h.sort(tI),this.minLevel=h[0].level,n}function c(d){let{streams:p}=this,f=p.findIndex(h=>h.id===d);return f>=0&&(p.splice(f,1),p.sort(tI),this.minLevel=p.length>0?p[0].level:-1),n}function l(){for(let{stream:d}of this.streams)typeof d.flushSync=="function"&&d.flushSync(),d.end()}function u(d){let p=new Array(this.streams.length);for(let f=0;f<p.length;f++)p[f]={level:d,stream:this.streams[f].stream};return{write:s,add:a,remove:c,minLevel:d,streams:p,clone:u,emit:i,flushSync:o,[zv]:!0}}}function tI(t,e){return t.level-e.level}function $Y(t,e){return e?t-1:0}function OY(t,e){return e?t-1:t+1}function PY(t,e,r){return r?t>=0:t<e}nI.exports=RY});var _I=E((ECe,un)=>{"use strict";var xY=require("os"),dI=fv(),NY=dv(),CY=mv(),hI=XN(),IY=YC(),pI=uc(),{configure:AY}=eI(),{assertDefaultLevelFound:kY,mappings:mI,genLsCache:DY,genLevelComparison:MY,assertLevelComparison:jY}=kv(),{DEFAULT_LEVELS:gI,SORTING_ORDER:qY}=vp(),{createArgsNormalizer:LY,asChindings:FY,buildSafeSonicBoom:iI,buildFormatters:UY,stringify:Hv,normalizeDestFileDescriptor:oI,noop:BY}=_p(),{version:VY}=Dv(),{chindingsSym:aI,redactFmtSym:zY,serializersSym:cI,timeSym:HY,timeSliceIndexSym:GY,streamSym:WY,stringifySym:lI,stringifySafeSym:Gv,stringifiersSym:uI,setLevelSym:KY,endSym:JY,formatOptsSym:YY,messageKeySym:XY,errorKeySym:QY,nestedKeySym:ZY,mixinSym:eX,levelCompSym:tX,useOnlyCustomLevelsSym:rX,formattersSym:fI,hooksSym:nX,nestedKeyStrSym:sX,mixinMergeStrategySym:iX,msgPrefixSym:oX}=pI,{epochTime:yI,nullTime:aX}=hI,{pid:cX}=process,lX=xY.hostname(),uX=dI.err,fX={level:"info",levelComparison:qY.ASC,levels:gI,messageKey:"msg",errorKey:"err",nestedKey:null,enabled:!0,base:{pid:cX,hostname:lX},serializers:Object.assign(Object.create(null),{err:uX}),formatters:Object.assign(Object.create(null),{bindings(t){return t},level(t,e){return{level:e}}}),hooks:{logMethod:void 0,streamWrite:void 0},timestamp:yI,name:void 0,redact:null,customLevels:null,useOnlyCustomLevels:!1,depthLimit:5,edgeLimit:100},dX=LY(fX),hX=Object.assign(Object.create(null),dI);function Wv(...t){let e={},{opts:r,stream:n}=dX(e,NY(),...t);r.level&&typeof r.level=="string"&&gI[r.level.toLowerCase()]!==void 0&&(r.level=r.level.toLowerCase());let{redact:s,crlf:i,serializers:o,timestamp:a,messageKey:c,errorKey:l,nestedKey:u,base:d,name:p,level:f,customLevels:h,levelComparison:m,mixin:y,mixinMergeStrategy:g,useOnlyCustomLevels:w,formatters:_,hooks:v,depthLimit:S,edgeLimit:$,onChild:T,msgPrefix:O}=r,R=AY({maximumDepth:S,maximumBreadth:$}),P=UY(_.level,_.bindings,_.log),A=Hv.bind({[Gv]:R}),N=s?CY(s,A):{},C=s?{stringify:N[zY]}:{stringify:A},V="}"+(i?`\r
`:`
`),te=FY.bind(null,{[aI]:"",[cI]:o,[uI]:N,[lI]:Hv,[Gv]:R,[fI]:P}),H="";d!==null&&(p===void 0?H=te(d):H=te(Object.assign({},d,{name:p})));let K=a instanceof Function?a:a?yI:aX,xt=K().indexOf(":")+1;if(w&&!h)throw Error("customLevels is required if useOnlyCustomLevels is set true");if(y&&typeof y!="function")throw Error(`Unknown mixin type "${typeof y}" - expected "function"`);if(O&&typeof O!="string")throw Error(`Unknown msgPrefix type "${typeof O}" - expected "string"`);kY(f,h,w);let Ar=mI(h,w);typeof n.emit=="function"&&n.emit("message",{code:"PINO_CONFIG",config:{levels:Ar,messageKey:c,errorKey:l}}),jY(m);let Y=MY(m);return Object.assign(e,{levels:Ar,[tX]:Y,[rX]:w,[WY]:n,[HY]:K,[GY]:xt,[lI]:Hv,[Gv]:R,[uI]:N,[JY]:V,[YY]:C,[XY]:c,[QY]:l,[ZY]:u,[sX]:u?`,${JSON.stringify(u)}:{`:"",[cI]:o,[eX]:y,[iX]:g,[aI]:H,[fI]:P,[nX]:v,silent:BY,onChild:T,[oX]:O}),Object.setPrototypeOf(e,IY()),DY(e),e[KY](f),e}un.exports=Wv;un.exports.destination=(t=process.stdout.fd)=>typeof t=="object"?(t.dest=oI(t.dest||process.stdout.fd),iI(t)):iI({dest:oI(t),minLength:0});un.exports.transport=Pv();un.exports.multistream=sI();un.exports.levels=mI();un.exports.stdSerializers=hX;un.exports.stdTimeFunctions=Object.assign({},hI);un.exports.symbols=pI;un.exports.version=VY;un.exports.default=Wv;un.exports.pino=Wv});var bI=E((SCe,wI)=>{"use strict";var Ep=_I(),{serializersSym:vI}=Ep.symbols,{FST_ERR_LOG_INVALID_DESTINATION:pX}=zt();function mX(t){if(t.stream&&t.file)throw new pX;t.file&&(t.stream=Ep.destination(t.file),delete t.file);let e=t.logger,r=t.genReqId,n=null;return e?(t.logger=void 0,t.genReqId=void 0,e[vI]&&(t.serializers=Object.assign({},t.serializers,e[vI])),n=e.child({},t),t.logger=e,t.genReqId=r):n=Ep(t,t.stream),n}var gX={req:function(e){return{method:e.method,url:e.url,version:e.headers&&e.headers["accept-version"],host:e.host,remoteAddress:e.ip,remotePort:e.socket?e.socket.remotePort:void 0}},err:Ep.stdSerializers.err,res:function(e){return{statusCode:e.statusCode}}};wI.exports={serializers:gX,createPinoLogger:mX}});var _u=E((TCe,SI)=>{"use strict";var{FST_ERR_LOG_LOGGER_AND_LOGGER_INSTANCE_PROVIDED:yX,FST_ERR_LOG_INVALID_LOGGER_CONFIG:_X,FST_ERR_LOG_INVALID_LOGGER_INSTANCE:vX,FST_ERR_LOG_INVALID_LOGGER:wX}=zt();function bX(t,e,r,n,s){let i={[t.requestIdLogLabel]:n},o=t.childLoggerFactory.call(t.server,e,i,s||{},r);return t.childLoggerFactory!==EI&&Sp(o,!0),o}function EI(t,e,r){return t.child(e,r)}function Sp(t,e){let r=["info","error","debug","fatal","warn","trace","child"],n=t?r.filter(s=>!t[s]||typeof t[s]!="function"):r;if(n.length){if(n.length===r.length&&!e)return!1;throw wX(n.join(","))}else return!0}function EX(t){if(t.logger&&t.loggerInstance)throw new yX;if(!t.loggerInstance&&!t.logger){let o=yN();return o.child=()=>o,{logger:o,hasLogger:!1}}let{createPinoLogger:e,serializers:r}=bI();if(Sp(t.loggerInstance))return{logger:e({logger:t.loggerInstance,serializers:Object.assign({},r,t.loggerInstance.serializers)}),hasLogger:!0};if(Sp(t.logger))throw _X();if(t.loggerInstance)throw vX();let n={};return Object.prototype.toString.call(t.logger)==="[object Object]"&&Reflect.ownKeys(t.logger).forEach(i=>{Object.defineProperty(n,i,{value:t.logger[i],writable:!0,enumerable:!0,configurable:!0})}),n.level=n.level||"info",n.serializers=Object.assign({},r,n.serializers),t.logger=n,{logger:e(t.logger),hasLogger:!0}}function SX(){let t=process.hrtime();return t[0]*1e3+t[1]/1e6}SI.exports={createChildLogger:bX,defaultChildLoggerFactory:EI,createLogger:EX,validateLogger:Sp,now:SX}});var Tp=E((RCe,TI)=>{"use strict";TI.exports=TX;function hc(t){return t instanceof Buffer?Buffer.from(t):new t.constructor(t.buffer.slice(),t.byteOffset,t.length)}function TX(t){if(t=t||{},t.circles)return RX(t);let e=new Map;if(e.set(Date,o=>new Date(o)),e.set(Map,(o,a)=>new Map(n(Array.from(o),a))),e.set(Set,(o,a)=>new Set(n(Array.from(o),a))),t.constructorHandlers)for(let o of t.constructorHandlers)e.set(o[0],o[1]);let r=null;return t.proto?i:s;function n(o,a){let c=Object.keys(o),l=new Array(c.length);for(let u=0;u<c.length;u++){let d=c[u],p=o[d];typeof p!="object"||p===null?l[d]=p:p.constructor!==Object&&(r=e.get(p.constructor))?l[d]=r(p,a):ArrayBuffer.isView(p)?l[d]=hc(p):l[d]=a(p)}return l}function s(o){if(typeof o!="object"||o===null)return o;if(Array.isArray(o))return n(o,s);if(o.constructor!==Object&&(r=e.get(o.constructor)))return r(o,s);let a={};for(let c in o){if(Object.hasOwnProperty.call(o,c)===!1)continue;let l=o[c];typeof l!="object"||l===null?a[c]=l:l.constructor!==Object&&(r=e.get(l.constructor))?a[c]=r(l,s):ArrayBuffer.isView(l)?a[c]=hc(l):a[c]=s(l)}return a}function i(o){if(typeof o!="object"||o===null)return o;if(Array.isArray(o))return n(o,i);if(o.constructor!==Object&&(r=e.get(o.constructor)))return r(o,i);let a={};for(let c in o){let l=o[c];typeof l!="object"||l===null?a[c]=l:l.constructor!==Object&&(r=e.get(l.constructor))?a[c]=r(l,i):ArrayBuffer.isView(l)?a[c]=hc(l):a[c]=i(l)}return a}}function RX(t){let e=[],r=[],n=new Map;if(n.set(Date,c=>new Date(c)),n.set(Map,(c,l)=>new Map(i(Array.from(c),l))),n.set(Set,(c,l)=>new Set(i(Array.from(c),l))),t.constructorHandlers)for(let c of t.constructorHandlers)n.set(c[0],c[1]);let s=null;return t.proto?a:o;function i(c,l){let u=Object.keys(c),d=new Array(u.length);for(let p=0;p<u.length;p++){let f=u[p],h=c[f];if(typeof h!="object"||h===null)d[f]=h;else if(h.constructor!==Object&&(s=n.get(h.constructor)))d[f]=s(h,l);else if(ArrayBuffer.isView(h))d[f]=hc(h);else{let m=e.indexOf(h);m!==-1?d[f]=r[m]:d[f]=l(h)}}return d}function o(c){if(typeof c!="object"||c===null)return c;if(Array.isArray(c))return i(c,o);if(c.constructor!==Object&&(s=n.get(c.constructor)))return s(c,o);let l={};e.push(c),r.push(l);for(let u in c){if(Object.hasOwnProperty.call(c,u)===!1)continue;let d=c[u];if(typeof d!="object"||d===null)l[u]=d;else if(d.constructor!==Object&&(s=n.get(d.constructor)))l[u]=s(d,o);else if(ArrayBuffer.isView(d))l[u]=hc(d);else{let p=e.indexOf(d);p!==-1?l[u]=r[p]:l[u]=o(d)}}return e.pop(),r.pop(),l}function a(c){if(typeof c!="object"||c===null)return c;if(Array.isArray(c))return i(c,a);if(c.constructor!==Object&&(s=n.get(c.constructor)))return s(c,a);let l={};e.push(c),r.push(l);for(let u in c){let d=c[u];if(typeof d!="object"||d===null)l[u]=d;else if(d.constructor!==Object&&(s=n.get(d.constructor)))l[u]=s(d,a);else if(ArrayBuffer.isView(d))l[u]=hc(d);else{let p=e.indexOf(d);p!==-1?l[u]=r[p]:l[u]=a(d)}}return e.pop(),r.pop(),l}}});var vu=E(($Ce,xI)=>{"use strict";var $X=Tp()({circles:!1,proto:!0}),{kSchemaVisited:RI,kSchemaResponse:OX}=Nt(),Kv=Symbol.for("fluent-schema-object"),{FST_ERR_SCH_MISSING_ID:PX,FST_ERR_SCH_ALREADY_PRESENT:xX,FST_ERR_SCH_DUPLICATE:NX,FST_ERR_SCH_CONTENT_MISSING_SCHEMA:$I}=zt(),PI=["params","body","querystring","query","headers"];function Rp(t){this.store=t||{}}Rp.prototype.add=function(t){let e=$X(t.isFluentSchema||t.isFluentJSONSchema||t[Kv]?t.valueOf():t),r=e.$id;if(!r)throw new PX;if(this.store[r])throw new xX(r);this.store[r]=e};Rp.prototype.getSchemas=function(){return Object.assign({},this.store)};Rp.prototype.getSchema=function(t){return this.store[t]};function OI(t){return typeof t=="object"&&Object.getPrototypeOf(t)!==Object.prototype}function CX(t,e){if(t[RI])return t;if(t.query){if(t.querystring)throw new NX("querystring");t.querystring=t.query}IX(t);for(let r of PI){let n=t[r];if(n&&!OI(n)&&r==="body"&&n.content){let s=n.content,i=Object.keys(s);for(let o=0;o<i.length;o++){let a=i[o];if(!s[a].schema)throw new $I(a)}continue}}if(t.response){let r=Object.keys(t.response);for(let n of r){if(OI(t.response[n]))continue;let s=t.response[n].content;if(s){let i=Object.keys(s);for(let o=0;o<i.length;o++){let a=i[o];if(!s[a].schema)throw new $I(a)}}}}return t[RI]=!0,t}function IX(t){for(let e of PI)t[e]&&(t[e].isFluentSchema||t[e][Kv])&&(t[e]=t[e].valueOf());if(t.response){let e=Object.keys(t.response);for(let r of e)(t.response[r].isFluentSchema||t.response[r][Kv])&&(t.response[r]=t.response[r].valueOf())}}function AX(t,e,r){let n=t[OX];if(!n)return!1;if(n[e]){if(n[e].constructor===Object&&r){let i=r.split(";",1)[0];return n[e][i]?n[e][i]:n[e]["*/*"]?n[e]["*/*"]:!1}return n[e]}let s=(e+"")[0]+"xx";if(n[s]){if(n[s].constructor===Object&&r){let i=r.split(";",1)[0];return n[s][i]?n[s][i]:n[s]["*/*"]?n[s]["*/*"]:!1}return n[s]}if(n.default){if(n.default.constructor===Object&&r){let i=r.split(";",1)[0];return n.default[i]?n.default[i]:n.default["*/*"]?n.default["*/*"]:!1}return n.default}return!1}xI.exports={buildSchemas(t){return new Rp(t)},getSchemaSerializer:AX,normalizeSchema:CX}});var $p=E((OCe,CI)=>{"use strict";var kX=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]/;CI.exports=class NI{constructor(e){switch(e&&e.rounding){case"floor":this.parseInteger=Math.floor;break;case"ceil":this.parseInteger=Math.ceil;break;case"round":this.parseInteger=Math.round;break;case"trunc":default:this.parseInteger=Math.trunc;break}this._options=e}asInteger(e){if(Number.isInteger(e))return""+e;if(typeof e=="bigint")return e.toString();let r=this.parseInteger(e);if(r===1/0||r===-1/0||r!==r)throw new Error(`The value "${e}" cannot be converted to an integer.`);return""+r}asNumber(e){let r=Number(e);if(r!==r)throw new Error(`The value "${e}" cannot be converted to a number.`);return r===1/0||r===-1/0?"null":""+r}asBoolean(e){return e&&"true"||"false"}asDateTime(e){if(e===null)return'""';if(e instanceof Date)return'"'+e.toISOString()+'"';if(typeof e=="string")return'"'+e+'"';throw new Error(`The value "${e}" cannot be converted to a date-time.`)}asDate(e){if(e===null)return'""';if(e instanceof Date)return'"'+new Date(e.getTime()-e.getTimezoneOffset()*6e4).toISOString().slice(0,10)+'"';if(typeof e=="string")return'"'+e+'"';throw new Error(`The value "${e}" cannot be converted to a date.`)}asTime(e){if(e===null)return'""';if(e instanceof Date)return'"'+new Date(e.getTime()-e.getTimezoneOffset()*6e4).toISOString().slice(11,19)+'"';if(typeof e=="string")return'"'+e+'"';throw new Error(`The value "${e}" cannot be converted to a time.`)}asString(e){let r=e.length;if(r===0)return'""';if(r<42){let n="",s=-1,i=255;for(let o=0;o<r;o++)if(i=e.charCodeAt(o),i===34||i===92)s===-1&&(s=0),n+=e.slice(s,o)+"\\",s=o;else if(i<32||i>=55296&&i<=57343)return JSON.stringify(e);return s===-1&&'"'+e+'"'||'"'+n+e.slice(s)+'"'}else return r<5e3&&kX.test(e)===!1?'"'+e+'"':JSON.stringify(e)}asUnsafeString(e){return'"'+e+'"'}getState(){return this._options}static restoreFromState(e){return new NI(e)}}});var AI=E((PCe,II)=>{"use strict";var DX=$p(),MX={mode:"standalone"},jX=DX.restoreFromState(MX),qX=null;II.exports=function(e,r){let n="{",s="}",i="[",o="]",a=",",c=":",l='"',u=n+s,d=i+o,p=l+l,f="null";function h(y){let g=y&&typeof y.toJSON=="function"?y.toJSON():y;if(g===null)return u;let w,_=n,v=!1;return w=g.statusCode,w!==void 0&&(!v&&(v=!0)||(_+=a),_+='"statusCode":',_+=r.asNumber(w)),w=g.code,w!==void 0&&(!v&&(v=!0)||(_+=a),_+='"code":',typeof w!="string"?w===null?_+=p:w instanceof Date?_+=l+w.toISOString()+l:w instanceof RegExp?_+=r.asString(w.source):_+=r.asString(w.toString()):_+=r.asString(w)),w=g.error,w!==void 0&&(!v&&(v=!0)||(_+=a),_+='"error":',typeof w!="string"?w===null?_+=p:w instanceof Date?_+=l+w.toISOString()+l:w instanceof RegExp?_+=r.asString(w.source):_+=r.asString(w.toString()):_+=r.asString(w)),w=g.message,w!==void 0&&(!v&&(v=!0)||(_+=a),_+='"message":',typeof w!="string"?w===null?_+=p:w instanceof Date?_+=l+w.toISOString()+l:w instanceof RegExp?_+=r.asString(w.source):_+=r.asString(w.toString()):_+=r.asString(w)),_+s}return h}(qX,jX)});var wu=E((xCe,jI)=>{"use strict";var kI=require("http").STATUS_CODES,LX=X_(),{kReplyHeaders:Bo,kReplyNextErrorHandler:Op,kReplyIsRunningOnErrorHook:FX,kReplyHasStatusCode:UX,kRouteContext:MI,kDisableRequestLogging:Pp}=Nt(),{FST_ERR_REP_INVALID_PAYLOAD_TYPE:BX,FST_ERR_FAILED_ERROR_SERIALIZATION:VX}=zt(),{getSchemaSerializer:zX}=vu(),Jv=AI(),HX={func:WX,toJSON(){return this.func.name.toString()+"()"}};function GX(t,e,r){t[FX]=!1;let n=t[MI];if(t[Op]===!1){DI(e,t,function(o,a){try{o.raw.writeHead(o.raw.statusCode,o[Bo])}catch(c){o.log[Pp]||o.log.warn({req:o.request,res:o,err:c},c?.message),o.raw.writeHead(o.raw.statusCode)}o.raw.end(a)});return}let s=t[Op]||n.errorHandler;t[Op]=Object.getPrototypeOf(s),delete t[Bo]["content-type"],delete t[Bo]["content-length"];let i=s.func;if(!i){t[Op]=!1,DI(e,t,r);return}try{let o=i(e,t.request,t);o!==void 0&&(o!==null&&typeof o.then=="function"?LX(o,t):t.send(o))}catch(o){t.send(o)}}function WX(t,e,r){if(JX(t,r),!r[UX]||r.statusCode===200){let n=t&&(t.statusCode||t.status);r.code(n>=400?n:500)}r.statusCode<500?r.log[Pp]||r.log.info({res:r,err:t},t?.message):r.log[Pp]||r.log.error({req:e,res:r,err:t},t?.message),r.send(t)}function DI(t,e,r){let n=e.raw,s=e.statusCode;e[Bo]["content-type"]=e[Bo]["content-type"]??"application/json; charset=utf-8";let i;try{let o=zX(e[MI],s,e[Bo]["content-type"]);o===!1?i=Jv({error:kI[s+""],code:t.code,message:t.message,statusCode:s}):i=o(Object.create(t,{error:{value:kI[s+""]},message:{value:t.message},statusCode:{value:s}}))}catch(o){e.log[Pp]||e.log.error({err:o,statusCode:n.statusCode},"The serializer for the given status code failed"),e.code(500),i=Jv(new VX(o.message,t.message))}typeof i!="string"&&!Buffer.isBuffer(i)&&(i=Jv(new BX(typeof i))),e[Bo]["content-length"]=""+Buffer.byteLength(i),r(e,i)}function KX(t=HX,e){if(!e)return t;let r=Object.create(t);return r.func=e,r}function JX(t,e){let r=e.raw,n=r.statusCode;n=n>=400?n:500,t!=null&&(t.headers!==void 0&&e.headers(t.headers),t.status>=400?n=t.status:t.statusCode>=400&&(n=t.statusCode)),r.statusCode=n}jI.exports={buildErrorHandler:KX,handleError:GX}});var Su=E((NCe,UI)=>{"use strict";var{kReply:Yv,kRequest:Xv,kState:YX,kHasBeenDecorated:XX}=Nt(),{FST_ERR_DEC_ALREADY_PRESENT:qI,FST_ERR_DEC_MISSING_DEPENDENCY:QX,FST_ERR_DEC_AFTER_START:ZX,FST_ERR_DEC_REFERENCE_TYPE:eQ,FST_ERR_DEC_DEPENDENCY_INVALID_TYPE:tQ,FST_ERR_DEC_UNDECLARED:rQ}=zt();function nQ(t,e,r,n){if(Object.hasOwn(t,e))throw new qI(e);Qv(t,e,n),r&&(typeof r.getter=="function"||typeof r.setter=="function")?Object.defineProperty(t,e,{get:r.getter,set:r.setter}):t[e]=r}function sQ(t){if(!bu(this,t))throw new rQ(t,"instance");return typeof this[t]=="function"?this[t].bind(this):this[t]}function LI(t,e,r,n){let s=t.prototype;if(Object.hasOwn(s,e)||Eu(t,e))throw new qI(e);t[XX]=!0,Qv(t,e,n),r&&(typeof r.getter=="function"||typeof r.setter=="function")?Object.defineProperty(s,e,{get:r.getter,set:r.setter}):typeof r=="function"?s[e]=r:t.props.push({key:e,value:r})}function FI(t,e){if(typeof e=="object"&&e&&!(typeof e.getter=="function"||typeof e.setter=="function"))throw new eQ(t,typeof e)}function iQ(t,e,r){return Zv(this,t),nQ(this,t,e,r),this}function bu(t,e){return e?e in t||t.prototype&&e in t.prototype||Eu(t,e):t in this}function Eu(t,e){return t.props?t.props.find(({key:r})=>r===e):!1}function oQ(t){return t&&Eu(this[Xv],t)?!0:bu(this[Xv].prototype,t)}function aQ(t){return t&&Eu(this[Yv],t)?!0:bu(this[Yv].prototype,t)}function Qv(t,e,r){if(r!=null){if(!Array.isArray(r))throw new tQ(e);for(let n=0;n!==r.length;++n)if(!bu(t,r[n]))throw new QX(r[n])}}function cQ(t,e,r){return Zv(this,t),FI(t,e),LI(this[Yv],t,e,r),this}function lQ(t,e,r){return Zv(this,t),FI(t,e),LI(this[Xv],t,e,r),this}function Zv(t,e){if(t[YX].started)throw new ZX(e)}UI.exports={add:iQ,exist:bu,existRequest:oQ,existReply:aQ,dependencies:Qv,decorateReply:cQ,decorateRequest:lQ,getInstanceDecorator:sQ,hasKey:Eu}});var kp=E((CCe,Ap)=>{"use strict";var nw=require("stream").finished,uQ=require("stream").Readable,{kFourOhFourContext:BI,kReplyErrorHandlerCalled:YI,kReplyHijacked:iw,kReplyStartTime:Tu,kReplyEndTime:ow,kReplySerializer:Ks,kReplySerializerDefault:Np,kReplyIsError:Cp,kReplyHeaders:Qe,kReplyTrailers:kt,kReplyHasStatusCode:aw,kReplyIsRunningOnErrorHook:cw,kReplyNextErrorHandler:fQ,kDisableRequestLogging:XI,kSchemaResponse:Ip,kReplyCacheSerializeFns:ki,kSchemaController:ew,kOptions:dQ,kRouteContext:Re}=Nt(),{onSendHookRunner:QI,onResponseHookRunner:hQ,preHandlerHookRunner:pQ,preSerializationHookRunner:mQ}=Ci(),VI=tv()[Symbol.for("internals")],gQ=_u(),sw=gQ.now,{handleError:zI}=wu(),{getSchemaSerializer:yQ}=vu(),tw={JSON:"application/json; charset=utf-8",PLAIN:"text/plain; charset=utf-8",OCTET:"application/octet-stream"},{FST_ERR_REP_INVALID_PAYLOAD_TYPE:_Q,FST_ERR_REP_RESPONSE_BODY_CONSUMED:vQ,FST_ERR_REP_READABLE_STREAM_LOCKED:wQ,FST_ERR_REP_ALREADY_SENT:bQ,FST_ERR_SEND_INSIDE_ONERR:EQ,FST_ERR_BAD_STATUS_CODE:SQ,FST_ERR_BAD_TRAILER_NAME:TQ,FST_ERR_BAD_TRAILER_VALUE:RQ,FST_ERR_MISSING_SERIALIZATION_FN:$Q,FST_ERR_MISSING_CONTENTTYPE_SERIALIZATION_FN:OQ,FST_ERR_DEC_UNDECLARED:PQ}=zt(),HI=Su(),ZI=Object.prototype.toString;function Ve(t,e,r){this.raw=t,this[Ks]=null,this[YI]=!1,this[Cp]=!1,this[cw]=!1,this.request=e,this[Qe]={},this[kt]=null,this[aw]=!1,this[Tu]=void 0,this.log=r}Ve.props=[];Object.defineProperties(Ve.prototype,{[Re]:{get(){return this.request[Re]}},elapsedTime:{get(){return this[Tu]===void 0?0:(this[ow]||sw())-this[Tu]}},server:{get(){return this.request[Re].server}},sent:{enumerable:!0,get(){return(this[iw]||this.raw.writableEnded)===!0}},statusCode:{get(){return this.raw.statusCode},set(t){this.code(t)}},routeOptions:{get(){return this.request.routeOptions}}});Ve.prototype.writeEarlyHints=function(t,e){return this.raw.writeEarlyHints(t,e),this};Ve.prototype.hijack=function(){return this[iw]=!0,this};Ve.prototype.send=function(t){if(this[cw])throw new EQ;if(this.sent===!0)return this.log.warn({err:new bQ(this.request.url,this.request.method)}),this;if(this[Cp]||t instanceof Error)return this[Cp]=!1,Ru(this,t,Vo),this;if(t===void 0)return Vo(this,t),this;let e=this.getHeader("content-type"),r=e!==void 0;if(t!==null){if(typeof t.pipe=="function"||typeof t.getReader=="function"||ZI.call(t)==="[object Response]")return Vo(this,t),this;if(t.buffer instanceof ArrayBuffer){r||(this[Qe]["content-type"]=tw.OCTET);let n=Buffer.isBuffer(t)?t:Buffer.from(t.buffer,t.byteOffset,t.byteLength);return Vo(this,n),this}if(!r&&typeof t=="string")return this[Qe]["content-type"]=tw.PLAIN,Vo(this,t),this}if(this[Ks]!==null){if(typeof t!="string")return GI(this,t),this;t=this[Ks](t)}else if(!r||e.indexOf("json")!==-1){if(!r)this[Qe]["content-type"]=tw.JSON;else if(e.indexOf("charset")===-1){let n=e.trim();n.endsWith(";")?this[Qe]["content-type"]=`${n} charset=utf-8`:this[Qe]["content-type"]=`${n}; charset=utf-8`}if(typeof t!="string")return GI(this,t),this}return Vo(this,t),this};Ve.prototype.getHeader=function(t){t=t.toLowerCase();let e=this[Qe][t];return e!==void 0?e:this.raw.getHeader(t)};Ve.prototype.getHeaders=function(){return{...this.raw.getHeaders(),...this[Qe]}};Ve.prototype.hasHeader=function(t){return t=t.toLowerCase(),this[Qe][t]!==void 0||this.raw.hasHeader(t)};Ve.prototype.removeHeader=function(t){return delete this[Qe][t.toLowerCase()],this};Ve.prototype.header=function(t,e=""){return t=t.toLowerCase(),this[Qe][t]&&t==="set-cookie"?(typeof this[Qe][t]=="string"&&(this[Qe][t]=[this[Qe][t]]),Array.isArray(e)?Array.prototype.push.apply(this[Qe][t],e):this[Qe][t].push(e)):this[Qe][t]=e,this};Ve.prototype.headers=function(t){let e=Object.keys(t);for(let r=0;r!==e.length;++r){let n=e[r];this.header(n,t[n])}return this};var xQ=new Set(["transfer-encoding","content-length","host","cache-control","max-forwards","te","authorization","set-cookie","content-encoding","content-type","content-range","trailer"]);Ve.prototype.trailer=function(t,e){if(t=t.toLowerCase(),xQ.has(t))throw new TQ(t);if(typeof e!="function")throw new RQ(t,typeof e);return this[kt]===null&&(this[kt]={}),this[kt][t]=e,this};Ve.prototype.hasTrailer=function(t){return this[kt]?.[t.toLowerCase()]!==void 0};Ve.prototype.removeTrailer=function(t){return this[kt]===null?this:(this[kt][t.toLowerCase()]=void 0,this)};Ve.prototype.code=function(t){let e=+t;if(!(e>=100&&e<=599))throw new SQ(t||String(t));return this.raw.statusCode=e,this[aw]=!0,this};Ve.prototype.status=Ve.prototype.code;Ve.prototype.getSerializationFunction=function(t,e){let r;return typeof t=="string"||typeof t=="number"?typeof e=="string"?r=this[Re][Ip]?.[t]?.[e]:r=this[Re][Ip]?.[t]:typeof t=="object"&&(r=this[Re][ki]?.get(t)),r};Ve.prototype.compileSerializationSchema=function(t,e=null,r=null){let{request:n}=this,{method:s,url:i}=n;if(this[Re][ki]?.has(t))return this[Re][ki].get(t);let a=(this[Re].serializerCompiler||this.server[ew].serializerCompiler||this.server[ew].setupSerializer(this.server[dQ])||this.server[ew].serializerCompiler)({schema:t,method:s,url:i,httpStatus:e,contentType:r});return this[Re][ki]==null&&(this[Re][ki]=new WeakMap),this[Re][ki].set(t,a),a};Ve.prototype.serializeInput=function(t,e,r,n){let s=r,i;if(r=typeof e=="string"||typeof e=="number"?e:r,n=r&&s!==r?s:n,r!=null){if(n!=null?i=this[Re][Ip]?.[r]?.[n]:i=this[Re][Ip]?.[r],i==null)throw n?new OQ(r,n):new $Q(r)}else this[Re][ki]?.has(e)?i=this[Re][ki].get(e):i=this.compileSerializationSchema(e,r,n);return i(t)};Ve.prototype.serialize=function(t){return this[Ks]!==null?this[Ks](t):this[Re]&&this[Re][Np]?this[Re][Np](t,this.raw.statusCode):rA(this[Re],t,this.raw.statusCode)};Ve.prototype.serializer=function(t){return this[Ks]=t,this};Ve.prototype.type=function(t){return this[Qe]["content-type"]=t,this};Ve.prototype.redirect=function(t,e){return e||(e=this[aw]?this.raw.statusCode:302),this.header("location",t).code(e).send()};Ve.prototype.callNotFound=function(){return MQ(this),this};Ve.prototype.then=function(t,e){if(this.sent){t();return}nw(this.raw,r=>{r&&r.code!=="ERR_STREAM_PREMATURE_CLOSE"?e?e(r):this.log&&this.log.warn("unhandled rejection on reply.then"):t()})};Ve.prototype.getDecorator=function(t){if(!HI.hasKey(this,t)&&!HI.exist(this,t))throw new PQ(t,"reply");let e=this[t];return typeof e=="function"?e.bind(this):e};function GI(t,e){t[Re].preSerialization!==null?mQ(t[Re].preSerialization,t.request,t,e,WI):WI(null,void 0,t,e)}function WI(t,e,r,n){if(t!=null){Ru(r,t);return}try{r[Ks]!==null?n=r[Ks](n):r[Re]&&r[Re][Np]?n=r[Re][Np](n,r.raw.statusCode):n=rA(r[Re],n,r.raw.statusCode,r[Qe]["content-type"])}catch(s){NQ(s,r),Ru(r,s);return}Vo(r,n)}function NQ(t,e){t.serialization=e[Re].config}function Vo(t,e){t[Re].onSend!==null?QI(t[Re].onSend,t.request,t,e,CQ):eA(t,e)}function CQ(t,e,r,n){t!=null?Ru(r,t):eA(r,n)}function rw(t,e){let r=t.raw;try{r.writeHead(e,t[Qe])}catch(n){throw n.code==="ERR_HTTP_HEADERS_SENT"&&t.log.warn(`Reply was already sent, did you forget to "return reply" in the "${t.request.raw.url}" (${t.request.raw.method}) route?`),n}}function eA(t,e){let r=t.raw,n=t.request;if(t[kt]!==null){let i=Object.keys(t[kt]),o="";for(let a of i)typeof t[kt][a]=="function"&&(o+=" ",o+=a);t.header("Transfer-Encoding","chunked"),t.header("Trailer",o.trim())}if(ZI.call(e)==="[object Response]"){if(typeof e.status=="number"&&t.code(e.status),typeof e.headers=="object"&&typeof e.headers.forEach=="function")for(let[i,o]of e.headers)t.header(i,o);if(e.body!==null&&e.bodyUsed)throw new vQ;e=e.body}let s=r.statusCode;if(e==null){s>=200&&s!==204&&s!==304&&n.method!=="HEAD"&&t[kt]===null&&(t[Qe]["content-length"]="0"),rw(t,s),xp(e,r,t);return}if(s>=100&&s<200||s===204){t.removeHeader("content-type"),t.removeHeader("content-length"),rw(t,s),xp(void 0,r,t),typeof e.resume=="function"&&(e.on("error",nA),e.resume());return}if(typeof e.pipe=="function"){tA(e,r,t);return}if(typeof e.getReader=="function"){IQ(e,r,t);return}if(typeof e!="string"&&!Buffer.isBuffer(e))throw new _Q(typeof e);if(t[kt]===null){let i=t[Qe]["content-length"];(!i||n.raw.method!=="HEAD"&&Number(i)!==Buffer.byteLength(e))&&(t[Qe]["content-length"]=""+Buffer.byteLength(e))}rw(t,s),r.write(e),xp(e,r,t)}function KI(t,e,r){e.code==="ERR_STREAM_PREMATURE_CLOSE"?t[XI]||t.info({res:r},"stream closed prematurely"):t.warn({err:e},"response terminated with an error with headers already sent")}function IQ(t,e,r){if(t.locked)throw new wQ;let n=uQ.fromWeb(t);tA(n,e,r)}function tA(t,e,r){let n=!0,s=!1;if(AQ(t,e,r),nw(t,{readable:!0,writable:!1},function(i){n=!1,i!=null&&(e.headersSent||r.request.raw.aborted===!0?(s||(s=!0,KI(r.log,i,r)),e.destroy()):Ru(r,i))}),nw(e,function(i){n&&(i!=null&&e.headersSent&&!s&&(s=!0,KI(r.log,i,e)),typeof t.destroy=="function"?t.destroy():typeof t.close=="function"?t.close(nA):typeof t.abort=="function"?t.abort():r.log.warn("stream payload does not end properly"))}),e.headersSent)r.log.warn("response will send, but you shouldn't use res.writeHead in stream mode");else for(let i in r[Qe])e.setHeader(i,r[Qe][i]);t.pipe(e)}function xp(t,e,r){if(r[kt]===null){e.end(null,null,null);return}let n=Object.keys(r[kt]),s={},i=0,o=!0;function a(){i===0&&(e.addTrailers(s),e.end(null,null,null))}for(let c of n){let l=function(d,p){i++,d?r.log.debug(d):s[c]=p,process.nextTick(a)};if(typeof r[kt][c]!="function")continue;o=!1,i--;let u=r[kt][c](r,t,l);typeof u=="object"&&typeof u.then=="function"&&u.then(d=>l(null,d),l)}o&&e.end(null,null,null)}function AQ(t,e,r){r[kt]!==null&&t.on("end",()=>xp(null,e,r))}function Ru(t,e,r){t[Re].onError!==null&&!t[fQ]?(t[cw]=!0,QI(t[Re].onError,t.request,t,e,()=>zI(t,e,r))):zI(t,e,r)}function kQ(t){t[Tu]=sw();let e=r=>{t[ow]=sw(),t.raw.removeListener("finish",e),t.raw.removeListener("error",e);let n=t[Re];n&&n.onResponse!==null?hQ(n.onResponse,t.request,t,JI):JI(r,t.request,t)};t.raw.on("finish",e),t.raw.on("error",e)}function JI(t,e,r){if(r.log[XI])return;let n=r.elapsedTime;if(t!=null){r.log.error({res:r,err:t,responseTime:n},"request errored");return}r.log.info({res:r,responseTime:n},"request completed")}function DQ(t){let e=t.props.slice();function r(n,s,i){this.raw=n,this[Cp]=!1,this[YI]=!1,this[iw]=!1,this[Ks]=null,this.request=s,this[Qe]={},this[kt]=null,this[Tu]=void 0,this[ow]=void 0,this.log=i;let o;for(let a=0;a<e.length;a++)o=e[a],this[o.key]=o.value}return Object.setPrototypeOf(r.prototype,t.prototype),Object.setPrototypeOf(r,t),r.parent=t,r.props=e,r}function MQ(t){if(t[Re][BI]===null){t.log.warn("Trying to send a NotFound error inside a 404 handler. Sending basic 404 response."),t.code(404).send("404 Not Found");return}t.request[Re]=t[Re][BI],t[Re].preHandler!==null?pQ(t[Re].preHandler,t.request,t,VI.preHandlerCallback):VI.preHandlerCallback(null,t.request,t)}function rA(t,e,r,n){let s=yQ(t,r,n);return s?s(e):JSON.stringify(e)}function nA(){}Ap.exports=Ve;Ap.exports.buildReply=DQ;Ap.exports.setupResponseListeners=kQ});var sA=E((ICe,Dp)=>{"use strict";function lw(t){if(!t)throw new TypeError("argument req is required");let e=t.headers["x-forwarded-for"],r=t.socket.remoteAddress;if(!e||typeof e!="string")return[r];if(e.indexOf(",")===-1){let n=e.trim();return n.length?[r,n]:[r]}else return jQ(e,r)}function jQ(t,e){let r=[e],n=t.length,s=n,i,o;for(o=n-1;o>=0;--o)i=t[o],i===" "?s===n&&(s=n=o):i===","?(s!==n&&r.push(t.slice(s,n)),s=n=o):s=o;return s!==n&&r.push(t.substring(s,n)),r}Dp.exports=lw;Dp.exports.default=lw;Dp.exports.forwarded=lw});var oA=E((iA,Mp)=>{(function(t){"use strict";let e="(0?\\d+|0x[a-f0-9]+)",r={fourOctet:new RegExp(`^${e}\\.${e}\\.${e}\\.${e}$`,"i"),threeOctet:new RegExp(`^${e}\\.${e}\\.${e}$`,"i"),twoOctet:new RegExp(`^${e}\\.${e}$`,"i"),longValue:new RegExp(`^${e}$`,"i")},n=new RegExp("^0[0-7]+$","i"),s=new RegExp("^0x[a-f0-9]+$","i"),i="%[0-9a-z]{1,}",o="(?:[0-9a-f]+::?)+",a={zoneIndex:new RegExp(i,"i"),native:new RegExp(`^(::)?(${o})?([0-9a-f]+)?(::)?(${i})?$`,"i"),deprecatedTransitional:new RegExp(`^(?:::)(${e}\\.${e}\\.${e}\\.${e}(${i})?)$`,"i"),transitional:new RegExp(`^((?:${o})|(?:::)(?:${o})?)${e}\\.${e}\\.${e}\\.${e}(${i})?$`,"i")};function c(f,h){if(f.indexOf("::")!==f.lastIndexOf("::"))return null;let m=0,y=-1,g=(f.match(a.zoneIndex)||[])[0],w,_;for(g&&(g=g.substring(1),f=f.replace(/%.+$/,""));(y=f.indexOf(":",y+1))>=0;)m++;if(f.substr(0,2)==="::"&&m--,f.substr(-2,2)==="::"&&m--,m>h)return null;for(_=h-m,w=":";_--;)w+="0:";return f=f.replace("::",w),f[0]===":"&&(f=f.slice(1)),f[f.length-1]===":"&&(f=f.slice(0,-1)),h=function(){let v=f.split(":"),S=[];for(let $=0;$<v.length;$++)S.push(parseInt(v[$],16));return S}(),{parts:h,zoneId:g}}function l(f,h,m,y){if(f.length!==h.length)throw new Error("ipaddr: cannot match CIDR for objects with different lengths");let g=0,w;for(;y>0;){if(w=m-y,w<0&&(w=0),f[g]>>w!==h[g]>>w)return!1;y-=m,g+=1}return!0}function u(f){if(s.test(f))return parseInt(f,16);if(f[0]==="0"&&!isNaN(parseInt(f[1],10))){if(n.test(f))return parseInt(f,8);throw new Error(`ipaddr: cannot parse ${f} as octal`)}return parseInt(f,10)}function d(f,h){for(;f.length<h;)f=`0${f}`;return f}let p={};p.IPv4=function(){function f(h){if(h.length!==4)throw new Error("ipaddr: ipv4 octet count should be 4");let m,y;for(m=0;m<h.length;m++)if(y=h[m],!(0<=y&&y<=255))throw new Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=h}return f.prototype.SpecialRanges={unspecified:[[new f([0,0,0,0]),8]],broadcast:[[new f([255,255,255,255]),32]],multicast:[[new f([224,0,0,0]),4]],linkLocal:[[new f([169,254,0,0]),16]],loopback:[[new f([127,0,0,0]),8]],carrierGradeNat:[[new f([100,64,0,0]),10]],private:[[new f([10,0,0,0]),8],[new f([172,16,0,0]),12],[new f([192,168,0,0]),16]],reserved:[[new f([192,0,0,0]),24],[new f([192,0,2,0]),24],[new f([192,88,99,0]),24],[new f([198,18,0,0]),15],[new f([198,51,100,0]),24],[new f([203,0,113,0]),24],[new f([240,0,0,0]),4]],as112:[[new f([192,175,48,0]),24],[new f([192,31,196,0]),24]],amt:[[new f([192,52,193,0]),24]]},f.prototype.kind=function(){return"ipv4"},f.prototype.match=function(h,m){let y;if(m===void 0&&(y=h,h=y[0],m=y[1]),h.kind()!=="ipv4")throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return l(this.octets,h.octets,8,m)},f.prototype.prefixLengthFromSubnetMask=function(){let h=0,m=!1,y={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0},g,w,_;for(g=3;g>=0;g-=1)if(w=this.octets[g],w in y){if(_=y[w],m&&_!==0)return null;_!==8&&(m=!0),h+=_}else return null;return 32-h},f.prototype.range=function(){return p.subnetMatch(this,this.SpecialRanges)},f.prototype.toByteArray=function(){return this.octets.slice(0)},f.prototype.toIPv4MappedAddress=function(){return p.IPv6.parse(`::ffff:${this.toString()}`)},f.prototype.toNormalizedString=function(){return this.toString()},f.prototype.toString=function(){return this.octets.join(".")},f}(),p.IPv4.broadcastAddressFromCIDR=function(f){try{let h=this.parseCIDR(f),m=h[0].toByteArray(),y=this.subnetMaskFromPrefixLength(h[1]).toByteArray(),g=[],w=0;for(;w<4;)g.push(parseInt(m[w],10)|parseInt(y[w],10)^255),w++;return new this(g)}catch{throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},p.IPv4.isIPv4=function(f){return this.parser(f)!==null},p.IPv4.isValid=function(f){try{return new this(this.parser(f)),!0}catch{return!1}},p.IPv4.isValidCIDR=function(f){try{return this.parseCIDR(f),!0}catch{return!1}},p.IPv4.isValidFourPartDecimal=function(f){return!!(p.IPv4.isValid(f)&&f.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},p.IPv4.isValidCIDRFourPartDecimal=function(f){let h=f.match(/^(.+)\/(\d+)$/);return!p.IPv4.isValidCIDR(f)||!h?!1:p.IPv4.isValidFourPartDecimal(h[1])},p.IPv4.networkAddressFromCIDR=function(f){let h,m,y,g,w;try{for(h=this.parseCIDR(f),y=h[0].toByteArray(),w=this.subnetMaskFromPrefixLength(h[1]).toByteArray(),g=[],m=0;m<4;)g.push(parseInt(y[m],10)&parseInt(w[m],10)),m++;return new this(g)}catch{throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},p.IPv4.parse=function(f){let h=this.parser(f);if(h===null)throw new Error("ipaddr: string is not formatted like an IPv4 Address");return new this(h)},p.IPv4.parseCIDR=function(f){let h;if(h=f.match(/^(.+)\/(\d+)$/)){let m=parseInt(h[2]);if(m>=0&&m<=32){let y=[this.parse(h[1]),m];return Object.defineProperty(y,"toString",{value:function(){return this.join("/")}}),y}}throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")},p.IPv4.parser=function(f){let h,m,y;if(h=f.match(r.fourOctet))return function(){let g=h.slice(1,6),w=[];for(let _=0;_<g.length;_++)m=g[_],w.push(u(m));return w}();if(h=f.match(r.longValue)){if(y=u(h[1]),y>4294967295||y<0)throw new Error("ipaddr: address outside defined range");return function(){let g=[],w;for(w=0;w<=24;w+=8)g.push(y>>w&255);return g}().reverse()}else return(h=f.match(r.twoOctet))?function(){let g=h.slice(1,4),w=[];if(y=u(g[1]),y>16777215||y<0)throw new Error("ipaddr: address outside defined range");return w.push(u(g[0])),w.push(y>>16&255),w.push(y>>8&255),w.push(y&255),w}():(h=f.match(r.threeOctet))?function(){let g=h.slice(1,5),w=[];if(y=u(g[2]),y>65535||y<0)throw new Error("ipaddr: address outside defined range");return w.push(u(g[0])),w.push(u(g[1])),w.push(y>>8&255),w.push(y&255),w}():null},p.IPv4.subnetMaskFromPrefixLength=function(f){if(f=parseInt(f),f<0||f>32)throw new Error("ipaddr: invalid IPv4 prefix length");let h=[0,0,0,0],m=0,y=Math.floor(f/8);for(;m<y;)h[m]=255,m++;return y<4&&(h[y]=Math.pow(2,f%8)-1<<8-f%8),new this(h)},p.IPv6=function(){function f(h,m){let y,g;if(h.length===16)for(this.parts=[],y=0;y<=14;y+=2)this.parts.push(h[y]<<8|h[y+1]);else if(h.length===8)this.parts=h;else throw new Error("ipaddr: ipv6 part count should be 8 or 16");for(y=0;y<this.parts.length;y++)if(g=this.parts[y],!(0<=g&&g<=65535))throw new Error("ipaddr: ipv6 part should fit in 16 bits");m&&(this.zoneId=m)}return f.prototype.SpecialRanges={unspecified:[new f([0,0,0,0,0,0,0,0]),128],linkLocal:[new f([65152,0,0,0,0,0,0,0]),10],multicast:[new f([65280,0,0,0,0,0,0,0]),8],loopback:[new f([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new f([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new f([0,0,0,0,0,65535,0,0]),96],discard:[new f([256,0,0,0,0,0,0,0]),64],rfc6145:[new f([0,0,0,0,65535,0,0,0]),96],rfc6052:[new f([100,65435,0,0,0,0,0,0]),96],"6to4":[new f([8194,0,0,0,0,0,0,0]),16],teredo:[new f([8193,0,0,0,0,0,0,0]),32],benchmarking:[new f([8193,2,0,0,0,0,0,0]),48],amt:[new f([8193,3,0,0,0,0,0,0]),32],as112v6:[[new f([8193,4,274,0,0,0,0,0]),48],[new f([9760,79,32768,0,0,0,0,0]),48]],deprecated:[new f([8193,16,0,0,0,0,0,0]),28],orchid2:[new f([8193,32,0,0,0,0,0,0]),28],droneRemoteIdProtocolEntityTags:[new f([8193,48,0,0,0,0,0,0]),28],reserved:[[new f([8193,0,0,0,0,0,0,0]),23],[new f([8193,3512,0,0,0,0,0,0]),32]]},f.prototype.isIPv4MappedAddress=function(){return this.range()==="ipv4Mapped"},f.prototype.kind=function(){return"ipv6"},f.prototype.match=function(h,m){let y;if(m===void 0&&(y=h,h=y[0],m=y[1]),h.kind()!=="ipv6")throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return l(this.parts,h.parts,16,m)},f.prototype.prefixLengthFromSubnetMask=function(){let h=0,m=!1,y={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0},g,w;for(let _=7;_>=0;_-=1)if(g=this.parts[_],g in y){if(w=y[g],m&&w!==0)return null;w!==16&&(m=!0),h+=w}else return null;return 128-h},f.prototype.range=function(){return p.subnetMatch(this,this.SpecialRanges)},f.prototype.toByteArray=function(){let h,m=[],y=this.parts;for(let g=0;g<y.length;g++)h=y[g],m.push(h>>8),m.push(h&255);return m},f.prototype.toFixedLengthString=function(){let h=function(){let y=[];for(let g=0;g<this.parts.length;g++)y.push(d(this.parts[g].toString(16),4));return y}.call(this).join(":"),m="";return this.zoneId&&(m=`%${this.zoneId}`),h+m},f.prototype.toIPv4Address=function(){if(!this.isIPv4MappedAddress())throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");let h=this.parts.slice(-2),m=h[0],y=h[1];return new p.IPv4([m>>8,m&255,y>>8,y&255])},f.prototype.toNormalizedString=function(){let h=function(){let y=[];for(let g=0;g<this.parts.length;g++)y.push(this.parts[g].toString(16));return y}.call(this).join(":"),m="";return this.zoneId&&(m=`%${this.zoneId}`),h+m},f.prototype.toRFC5952String=function(){let h=/((^|:)(0(:|$)){2,})/g,m=this.toNormalizedString(),y=0,g=-1,w;for(;w=h.exec(m);)w[0].length>g&&(y=w.index,g=w[0].length);return g<0?m:`${m.substring(0,y)}::${m.substring(y+g)}`},f.prototype.toString=function(){return this.toRFC5952String()},f}(),p.IPv6.broadcastAddressFromCIDR=function(f){try{let h=this.parseCIDR(f),m=h[0].toByteArray(),y=this.subnetMaskFromPrefixLength(h[1]).toByteArray(),g=[],w=0;for(;w<16;)g.push(parseInt(m[w],10)|parseInt(y[w],10)^255),w++;return new this(g)}catch(h){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${h})`)}},p.IPv6.isIPv6=function(f){return this.parser(f)!==null},p.IPv6.isValid=function(f){if(typeof f=="string"&&f.indexOf(":")===-1)return!1;try{let h=this.parser(f);return new this(h.parts,h.zoneId),!0}catch{return!1}},p.IPv6.isValidCIDR=function(f){if(typeof f=="string"&&f.indexOf(":")===-1)return!1;try{return this.parseCIDR(f),!0}catch{return!1}},p.IPv6.networkAddressFromCIDR=function(f){let h,m,y,g,w;try{for(h=this.parseCIDR(f),y=h[0].toByteArray(),w=this.subnetMaskFromPrefixLength(h[1]).toByteArray(),g=[],m=0;m<16;)g.push(parseInt(y[m],10)&parseInt(w[m],10)),m++;return new this(g)}catch(_){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${_})`)}},p.IPv6.parse=function(f){let h=this.parser(f);if(h.parts===null)throw new Error("ipaddr: string is not formatted like an IPv6 Address");return new this(h.parts,h.zoneId)},p.IPv6.parseCIDR=function(f){let h,m,y;if((m=f.match(/^(.+)\/(\d+)$/))&&(h=parseInt(m[2]),h>=0&&h<=128))return y=[this.parse(m[1]),h],Object.defineProperty(y,"toString",{value:function(){return this.join("/")}}),y;throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")},p.IPv6.parser=function(f){let h,m,y,g,w,_;if(y=f.match(a.deprecatedTransitional))return this.parser(`::ffff:${y[1]}`);if(a.native.test(f))return c(f,8);if((y=f.match(a.transitional))&&(_=y[6]||"",h=y[1],y[1].endsWith("::")||(h=h.slice(0,-1)),h=c(h+_,6),h.parts)){for(w=[parseInt(y[2]),parseInt(y[3]),parseInt(y[4]),parseInt(y[5])],m=0;m<w.length;m++)if(g=w[m],!(0<=g&&g<=255))return null;return h.parts.push(w[0]<<8|w[1]),h.parts.push(w[2]<<8|w[3]),{parts:h.parts,zoneId:h.zoneId}}return null},p.IPv6.subnetMaskFromPrefixLength=function(f){if(f=parseInt(f),f<0||f>128)throw new Error("ipaddr: invalid IPv6 prefix length");let h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],m=0,y=Math.floor(f/8);for(;m<y;)h[m]=255,m++;return y<16&&(h[y]=Math.pow(2,f%8)-1<<8-f%8),new this(h)},p.fromByteArray=function(f){let h=f.length;if(h===4)return new p.IPv4(f);if(h===16)return new p.IPv6(f);throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},p.isValid=function(f){return p.IPv6.isValid(f)||p.IPv4.isValid(f)},p.isValidCIDR=function(f){return p.IPv6.isValidCIDR(f)||p.IPv4.isValidCIDR(f)},p.parse=function(f){if(p.IPv6.isValid(f))return p.IPv6.parse(f);if(p.IPv4.isValid(f))return p.IPv4.parse(f);throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")},p.parseCIDR=function(f){try{return p.IPv6.parseCIDR(f)}catch{try{return p.IPv4.parseCIDR(f)}catch{throw new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},p.process=function(f){let h=this.parse(f);return h.kind()==="ipv6"&&h.isIPv4MappedAddress()?h.toIPv4Address():h},p.subnetMatch=function(f,h,m){let y,g,w,_;m==null&&(m="unicast");for(g in h)if(Object.prototype.hasOwnProperty.call(h,g)){for(w=h[g],w[0]&&!(w[0]instanceof Array)&&(w=[w]),y=0;y<w.length;y++)if(_=w[y],f.kind()===_[0].kind()&&f.match.apply(f,_))return g}return m},typeof Mp<"u"&&Mp.exports?Mp.exports=p:t.ipaddr=p})(iA)});var fA=E((ACe,pc)=>{"use strict";pc.exports=uw;pc.exports.default=uw;pc.exports.proxyaddr=uw;pc.exports.all=lA;pc.exports.compile=uA;var qQ=sA(),cA=oA(),LQ=/^\d+$/u,jp=cA.isValid,qp=cA.parse,aA={linklocal:["169.254.0.0/16","fe80::/10"],loopback:["127.0.0.1/8","::1/128"],uniquelocal:["10.0.0.0/8","172.16.0.0/12","192.168.0.0/16","fc00::/7"]};function lA(t,e){let r=qQ(t);if(!e)return r;typeof e!="function"&&(e=uA(e));for(let n=0;n<r.length-1;n++)e(r[n],n)||(r.length=n+1);return r}function uA(t){if(!t)throw new TypeError("argument is required");let e;if(typeof t=="string")e=[t];else if(Array.isArray(t))e=t.slice();else throw new TypeError("unsupported trust argument");for(let r=0;r<e.length;r++)t=e[r],Object.hasOwn(aA,t)&&(t=aA[t],e.splice.apply(e,[r,1].concat(t)),r+=t.length-1);return UQ(FQ(e))}function FQ(t){let e=new Array(t.length);for(let r=0;r<t.length;r++)e[r]=BQ(t[r]);return e}function UQ(t){let e=t.length;return e===0?zQ:e===1?GQ(t[0]):HQ(t)}function BQ(t){let e=t.lastIndexOf("/"),r=e!==-1?t.substring(0,e):t;if(!jp(r))throw new TypeError("invalid IP address: "+r);let n=qp(r);e===-1&&n.kind()==="ipv6"&&n.isIPv4MappedAddress()&&(n=n.toIPv4Address());let s=n.kind()==="ipv6"?128:32,i=e!==-1?t.substring(e+1,t.length):null;if(i===null?i=s:LQ.test(i)?i=parseInt(i,10):n.kind()==="ipv4"&&jp(i)?i=VQ(i):i=null,i<=0||i>s)throw new TypeError("invalid range on address: "+t);return[n,i]}function VQ(t){let e=qp(t);return e.kind()==="ipv4"?e.prefixLengthFromSubnetMask():null}function uw(t,e){if(!t)throw new TypeError("req argument is required");if(!e)throw new TypeError("trust argument is required");let r=lA(t,e);return r[r.length-1]}function zQ(){return!1}function HQ(t){return function(r){if(!jp(r))return!1;let n=qp(r),s,i=n.kind();for(let o=0;o<t.length;o++){let a=t[o],c=a[0],l=c.kind(),u=a[1],d=n;if(i!==l){let p=l==="ipv4";if(p&&!n.isIPv4MappedAddress())continue;s||(s=p?n.toIPv4Address():n.toIPv4MappedAddress()),d=s}if(d.match(c,u))return!0}return!1}}function GQ(t){let e=t[0],r=e.kind(),n=r==="ipv4",s=t[1];return function(o){if(!jp(o))return!1;let a=qp(o);if(a.kind()!==r){if(n&&!a.isIPv4MappedAddress())return!1;a=n?a.toIPv4Address():a.toIPv4MappedAddress()}return a.match(e,s)}}});var Fp=E((kCe,pw)=>{"use strict";var Lp=fA(),{kHasBeenDecorated:WQ,kSchemaBody:KQ,kSchemaHeaders:JQ,kSchemaParams:YQ,kSchemaQuerystring:dA,kSchemaController:fw,kOptions:XQ,kRequestCacheValidateFns:Di,kRouteContext:tr,kRequestOriginalUrl:dw}=Nt(),{FST_ERR_REQ_INVALID_VALIDATION_INVOCATION:QQ,FST_ERR_DEC_UNDECLARED:ZQ}=zt(),hA=Su(),pA={body:KQ,headers:JQ,params:YQ,querystring:dA,query:dA};function hw(t,e,r,n,s,i){this.id=t,this[tr]=i,this.params=e,this.raw=r,this.query=n,this.log=s,this.body=void 0}hw.props=[];function eZ(t){if(typeof t=="function")return t;if(t===!0)return null;if(typeof t=="number")return function(e,r){return r<t};if(typeof t=="string"){let e=t.split(",").map(r=>r.trim());return Lp.compile(e)}return Lp.compile(t)}function tZ(t,e){return e?rZ(t,e):yA(t)}function yA(t){let e=t.props.slice();function r(n,s,i,o,a,c){this.id=n,this[tr]=c,this.params=s,this.raw=i,this.query=o,this.log=a,this.body=void 0;let l;for(let u=0;u<e.length;u++)l=e[u],this[l.key]=l.value}return Object.setPrototypeOf(r.prototype,t.prototype),Object.setPrototypeOf(r,t),r.props=e,r.parent=t,r}function mA(t){let e=t.lastIndexOf(",");return e===-1?t.trim():t.slice(e+1).trim()}function rZ(t,e){let r=yA(t),n=eZ(e);return r[WQ]=!0,Object.defineProperties(r.prototype,{ip:{get(){let s=Lp.all(this.raw,n);return s[s.length-1]}},ips:{get(){return Lp.all(this.raw,n)}},host:{get(){return this.ip!==void 0&&this.headers["x-forwarded-host"]?mA(this.headers["x-forwarded-host"]):this.headers.host??this.headers[":authority"]??""}},protocol:{get(){if(this.headers["x-forwarded-proto"])return mA(this.headers["x-forwarded-proto"]);if(this.socket)return this.socket.encrypted?"https":"http"}}}),r}function gA(t,e){if(!hA.hasKey(t,e)&&!hA.exist(t,e))throw new ZQ(e,"request")}Object.defineProperties(hw.prototype,{server:{get(){return this[tr].server}},url:{get(){return this.raw.url}},originalUrl:{get(){return this[dw]||(this[dw]=this.raw.originalUrl||this.raw.url),this[dw]}},method:{get(){return this.raw.method}},routeOptions:{get(){let t=this[tr],e=t._parserOptions.limit,r=t.server.initialConfig.bodyLimit,n=t.server.hasConstraintStrategy("version")?this.raw.headers["accept-version"]:void 0;return{method:t.config?.method,url:t.config?.url,bodyLimit:e||r,attachValidation:t.attachValidation,logLevel:t.logLevel,exposeHeadRoute:t.exposeHeadRoute,prefixTrailingSlash:t.prefixTrailingSlash,handler:t.handler,config:t.config,schema:t.schema,version:n}}},is404:{get(){return this[tr].config?.url===void 0}},socket:{get(){return this.raw.socket}},ip:{get(){if(this.socket)return this.socket.remoteAddress}},host:{get(){return this.raw.headers.host??this.raw.headers[":authority"]??""}},hostname:{get(){return this.host[0]==="["?this.host.slice(0,this.host.indexOf("]")+1):this.host.split(":",1)[0]}},port:{get(){let t=parseInt(this.host.split(":").slice(-1)[0]);if(!isNaN(t))return t;let e=this.headers.host??this.headers[":authority"]??"",r=parseInt(e.split(":").slice(-1)[0]);return isNaN(r)?null:r}},protocol:{get(){if(this.socket)return this.socket.encrypted?"https":"http"}},headers:{get(){return this.additionalHeaders?Object.assign({},this.raw.headers,this.additionalHeaders):this.raw.headers},set(t){this.additionalHeaders=t}},getValidationFunction:{value:function(t){if(typeof t=="string"){let e=pA[t];return this[tr][e]}else if(typeof t=="object")return this[tr][Di]?.get(t)}},compileValidationSchema:{value:function(t,e=null){let{method:r,url:n}=this;if(this[tr][Di]?.has(t))return this[tr][Di].get(t);let i=(this[tr].validatorCompiler||this.server[fw].validatorCompiler||this.server[fw].setupValidator(this.server[XQ])||this.server[fw].validatorCompiler)({schema:t,method:r,url:n,httpPart:e});return this[tr][Di]==null&&(this[tr][Di]=new WeakMap),this[tr][Di].set(t,i),i}},validateInput:{value:function(t,e,r){r=typeof e=="string"?e:r;let n=r!=null&&typeof r=="string"&&pA[r],s;if(n&&(s=this[tr][n]),s==null&&(e==null||typeof e!="object"||Array.isArray(e)))throw new QQ(r);return s==null&&(this[tr][Di]?.has(e)?s=this[tr][Di].get(e):s=this.compileValidationSchema(e,r)),s(t)}},getDecorator:{value:function(t){gA(this,t);let e=this[t];return typeof e=="function"?e.bind(this):e}},setDecorator:{value:function(t,e){gA(this,t),this[t]=e}}});pw.exports=hw;pw.exports.buildRequest=tZ});var Up=E((DCe,_A)=>{"use strict";var{kFourOhFourContext:nZ,kReplySerializerDefault:sZ,kSchemaErrorFormatter:iZ,kErrorHandler:oZ,kChildLoggerFactory:aZ,kOptions:cZ,kReply:lZ,kRequest:uZ,kBodyLimit:fZ,kLogLevel:dZ,kContentTypeParser:hZ,kRouteByFastify:pZ,kRequestCacheValidateFns:mZ,kReplyCacheSerializeFns:gZ}=Nt();function yZ({schema:t,handler:e,config:r,requestIdLogLabel:n,childLoggerFactory:s,errorHandler:i,bodyLimit:o,logLevel:a,logSerializers:c,attachValidation:l,validatorCompiler:u,serializerCompiler:d,replySerializer:p,schemaErrorFormatter:f,exposeHeadRoute:h,prefixTrailingSlash:m,server:y,isFastify:g}){this.schema=t,this.handler=e,this.Reply=y[lZ],this.Request=y[uZ],this.contentTypeParser=y[hZ],this.onRequest=null,this.onSend=null,this.onError=null,this.onTimeout=null,this.preHandler=null,this.onResponse=null,this.preSerialization=null,this.onRequestAbort=null,this.config=r,this.errorHandler=i||y[oZ],this.requestIdLogLabel=n||y[cZ].requestIdLogLabel,this.childLoggerFactory=s||y[aZ],this._middie=null,this._parserOptions={limit:o||y[fZ]},this.exposeHeadRoute=h,this.prefixTrailingSlash=m,this.logLevel=a||y[dZ],this.logSerializers=c,this[nZ]=null,this.attachValidation=l,this[sZ]=p,this.schemaErrorFormatter=f||y[iZ]||_Z,this[pZ]=g,this[mZ]=null,this[gZ]=null,this.validatorCompiler=u||null,this.serializerCompiler=d||null,this.server=y}function _Z(t,e){let r="",n=", ";for(let s=0;s!==t.length;++s){let i=t[s];r+=e+(i.instancePath||"")+" "+i.message+n}return new Error(r.slice(0,-n.length))}_A.exports=yZ});var _w=E(ys=>{"use strict";var mw=class{constructor(e=1e3,r=0){if(isNaN(e)||e<0)throw new Error("Invalid max value");if(isNaN(r)||r<0)throw new Error("Invalid ttl value");this.first=null,this.items=new Map,this.last=null,this.max=e,this.ttl=r}get size(){return this.items.size}clear(){this.items=new Map,this.first=null,this.last=null}delete(e){if(this.items.has(e)){let r=this.items.get(e);this.items.delete(e),r.prev!==null&&(r.prev.next=r.next),r.next!==null&&(r.next.prev=r.prev),this.first===r&&(this.first=r.next),this.last===r&&(this.last=r.prev)}}deleteMany(e){for(var r=0;r<e.length;r++)this.delete(e[r])}evict(){if(this.size>0){let e=this.first;this.items.delete(e.key),this.size===0?(this.first=null,this.last=null):(this.first=e.next,this.first.prev=null)}}expiresAt(e){if(this.items.has(e))return this.items.get(e).expiry}get(e){if(this.items.has(e)){let r=this.items.get(e);if(this.ttl>0&&r.expiry<=Date.now()){this.delete(e);return}return r.value}}getMany(e){let r=[];for(var n=0;n<e.length;n++)r.push(this.get(e[n]));return r}keys(){return this.items.keys()}set(e,r){if(this.items.has(e)){let s=this.items.get(e);s.value=r,s.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl;return}this.max>0&&this.size===this.max&&this.evict();let n={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:r};this.items.set(e,n),this.size===1?this.first=n:this.last.next=n,this.last=n}},gw=class{constructor(e=1e3,r=0){if(isNaN(e)||e<0)throw new Error("Invalid max value");if(isNaN(r)||r<0)throw new Error("Invalid ttl value");this.first=null,this.items=new Map,this.last=null,this.max=e,this.ttl=r}get size(){return this.items.size}bumpLru(e){if(this.last===e)return;let r=this.last,n=e.next,s=e.prev;this.first===e&&(this.first=n),e.next=null,e.prev=r,r.next=e,s!==null&&(s.next=n),n!==null&&(n.prev=s),this.last=e}clear(){this.items=new Map,this.first=null,this.last=null}delete(e){if(this.items.has(e)){let r=this.items.get(e);this.items.delete(e),r.prev!==null&&(r.prev.next=r.next),r.next!==null&&(r.next.prev=r.prev),this.first===r&&(this.first=r.next),this.last===r&&(this.last=r.prev)}}deleteMany(e){for(var r=0;r<e.length;r++)this.delete(e[r])}evict(){if(this.size>0){let e=this.first;this.items.delete(e.key),this.size===0?(this.first=null,this.last=null):(this.first=e.next,this.first.prev=null)}}expiresAt(e){if(this.items.has(e))return this.items.get(e).expiry}get(e){if(this.items.has(e)){let r=this.items.get(e);if(this.ttl>0&&r.expiry<=Date.now()){this.delete(e);return}return this.bumpLru(r),r.value}}getMany(e){let r=[];for(var n=0;n<e.length;n++)r.push(this.get(e[n]));return r}keys(){return this.items.keys()}set(e,r){if(this.items.has(e)){let s=this.items.get(e);s.value=r,s.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl,this.last!==s&&this.bumpLru(s);return}this.max>0&&this.size===this.max&&this.evict();let n={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:r};this.items.set(e,n),this.size===1?this.first=n:this.last.next=n,this.last=n}},$u=class{constructor(e=1e3,r=0){if(isNaN(e)||e<0)throw new Error("Invalid max value");if(isNaN(r)||r<0)throw new Error("Invalid ttl value");this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this.max=e,this.ttl=r}bumpLru(e){if(this.last===e)return;let r=this.last,n=e.next,s=e.prev;this.first===e&&(this.first=n),e.next=null,e.prev=r,r.next=e,s!==null&&(s.next=n),n!==null&&(n.prev=s),this.last=e}clear(){this.items=Object.create(null),this.first=null,this.last=null,this.size=0}delete(e){if(Object.prototype.hasOwnProperty.call(this.items,e)){let r=this.items[e];delete this.items[e],this.size--,r.prev!==null&&(r.prev.next=r.next),r.next!==null&&(r.next.prev=r.prev),this.first===r&&(this.first=r.next),this.last===r&&(this.last=r.prev)}}deleteMany(e){for(var r=0;r<e.length;r++)this.delete(e[r])}evict(){if(this.size>0){let e=this.first;delete this.items[e.key],--this.size===0?(this.first=null,this.last=null):(this.first=e.next,this.first.prev=null)}}expiresAt(e){if(Object.prototype.hasOwnProperty.call(this.items,e))return this.items[e].expiry}get(e){if(Object.prototype.hasOwnProperty.call(this.items,e)){let r=this.items[e];if(this.ttl>0&&r.expiry<=Date.now()){this.delete(e);return}return this.bumpLru(r),r.value}}getMany(e){let r=[];for(var n=0;n<e.length;n++)r.push(this.get(e[n]));return r}keys(){return Object.keys(this.items)}set(e,r){if(Object.prototype.hasOwnProperty.call(this.items,e)){let s=this.items[e];s.value=r,s.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl,this.last!==s&&this.bumpLru(s);return}this.max>0&&this.size===this.max&&this.evict();let n={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:r};this.items[e]=n,++this.size===1?this.first=n:this.last.next=n,this.last=n}},Bp=class{constructor(){this.records={}}initForCache(e,r){this.records[e]={[r]:{cacheSize:0,hits:0,falsyHits:0,emptyHits:0,misses:0,expirations:0,evictions:0,invalidateOne:0,invalidateAll:0,sets:0}}}resetForCache(e){for(let r of Object.keys(this.records[e]))this.records[e][r]={cacheSize:0,hits:0,falsyHits:0,emptyHits:0,misses:0,expirations:0,evictions:0,invalidateOne:0,invalidateAll:0,sets:0}}getStatistics(){return this.records}};function vA(t){return`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")}`}var yw=class{constructor(e,r,n){this.cacheId=e,this.statisticTtlInHours=r,this.collectionStart=new Date,this.currentTimeStamp=vA(this.collectionStart),this.records=n||new Bp,this.records.initForCache(this.cacheId,this.currentTimeStamp)}get currentRecord(){return this.records.records[this.cacheId][this.currentTimeStamp]||(this.records.records[this.cacheId][this.currentTimeStamp]={cacheSize:0,hits:0,falsyHits:0,emptyHits:0,misses:0,expirations:0,evictions:0,sets:0,invalidateOne:0,invalidateAll:0}),this.records.records[this.cacheId][this.currentTimeStamp]}hoursPassed(){return(Date.now()-this.collectionStart)/1e3/60/60}addHit(){this.archiveIfNeeded(),this.currentRecord.hits++}addFalsyHit(){this.archiveIfNeeded(),this.currentRecord.falsyHits++}addEmptyHit(){this.archiveIfNeeded(),this.currentRecord.emptyHits++}addMiss(){this.archiveIfNeeded(),this.currentRecord.misses++}addEviction(){this.archiveIfNeeded(),this.currentRecord.evictions++}setCacheSize(e){this.archiveIfNeeded(),this.currentRecord.cacheSize=e}addExpiration(){this.archiveIfNeeded(),this.currentRecord.expirations++}addSet(){this.archiveIfNeeded(),this.currentRecord.sets++}addInvalidateOne(){this.archiveIfNeeded(),this.currentRecord.invalidateOne++}addInvalidateAll(){this.archiveIfNeeded(),this.currentRecord.invalidateAll++}getStatistics(){return this.records.getStatistics()}archiveIfNeeded(){this.hoursPassed()>=this.statisticTtlInHours&&(this.collectionStart=new Date,this.currentTimeStamp=vA(this.collectionStart),this.records.initForCache(this.cacheId,this.currentTimeStamp))}},Vp=class extends $u{constructor(e,r,n,s,i){if(super(e||1e3,r||0),!n)throw new Error("Cache id is mandatory");this.hitStatistics=new yw(n,i!==void 0?i:24,s)}getStatistics(){return this.hitStatistics.getStatistics()}set(e,r){super.set(e,r),this.hitStatistics.addSet(),this.hitStatistics.setCacheSize(this.size)}evict(){super.evict(),this.hitStatistics.addEviction(),this.hitStatistics.setCacheSize(this.size)}delete(e,r=!1){super.delete(e),r||this.hitStatistics.addInvalidateOne(),this.hitStatistics.setCacheSize(this.size)}clear(){super.clear(),this.hitStatistics.addInvalidateAll(),this.hitStatistics.setCacheSize(this.size)}get(e){if(Object.prototype.hasOwnProperty.call(this.items,e)){let r=this.items[e];if(this.ttl>0&&r.expiry<=Date.now()){this.delete(e,!0),this.hitStatistics.addExpiration();return}return this.bumpLru(r),r.value||this.hitStatistics.addFalsyHit(),(r.value===void 0||r.value===null||r.value==="")&&this.hitStatistics.addEmptyHit(),this.hitStatistics.addHit(),r.value}this.hitStatistics.addMiss()}},zp=class{constructor(e=1e3,r=0){if(isNaN(e)||e<0)throw new Error("Invalid max value");if(isNaN(r)||r<0)throw new Error("Invalid ttl value");this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this.max=e,this.ttl=r}clear(){this.items=Object.create(null),this.first=null,this.last=null,this.size=0}delete(e){if(Object.prototype.hasOwnProperty.call(this.items,e)){let r=this.items[e];delete this.items[e],this.size--,r.prev!==null&&(r.prev.next=r.next),r.next!==null&&(r.next.prev=r.prev),this.first===r&&(this.first=r.next),this.last===r&&(this.last=r.prev)}}deleteMany(e){for(var r=0;r<e.length;r++)this.delete(e[r])}evict(){if(this.size>0){let e=this.first;delete this.items[e.key],--this.size===0?(this.first=null,this.last=null):(this.first=e.next,this.first.prev=null)}}expiresAt(e){if(Object.prototype.hasOwnProperty.call(this.items,e))return this.items[e].expiry}get(e){if(Object.prototype.hasOwnProperty.call(this.items,e)){let r=this.items[e];if(this.ttl>0&&r.expiry<=Date.now()){this.delete(e);return}return r.value}}getMany(e){let r=[];for(var n=0;n<e.length;n++)r.push(this.get(e[n]));return r}keys(){return Object.keys(this.items)}set(e,r){if(Object.prototype.hasOwnProperty.call(this.items,e)){let s=this.items[e];s.value=r,s.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl;return}this.max>0&&this.size===this.max&&this.evict();let n={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:r};this.items[e]=n,++this.size===1?this.first=n:this.last.next=n,this.last=n}};ys.Fifo=zp;ys.FifoMap=mw;ys.FifoObject=zp;ys.HitStatisticsRecord=Bp;ys.Lru=$u;ys.LruHitStatistics=Vp;ys.LruMap=gw;ys.LruObject=$u;ys.LruObjectHitStatistics=Vp});var TA=E((jCe,mc)=>{"use strict";var vZ=typeof Buffer<"u",wA=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,bA=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function EA(t,e,r){r==null&&e!==null&&typeof e=="object"&&(r=e,e=void 0),vZ&&Buffer.isBuffer(t)&&(t=t.toString()),t&&t.charCodeAt(0)===65279&&(t=t.slice(1));let n=JSON.parse(t,e);if(n===null||typeof n!="object")return n;let s=r&&r.protoAction||"error",i=r&&r.constructorAction||"error";if(s==="ignore"&&i==="ignore")return n;if(s!=="ignore"&&i!=="ignore"){if(wA.test(t)===!1&&bA.test(t)===!1)return n}else if(s!=="ignore"&&i==="ignore"){if(wA.test(t)===!1)return n}else if(bA.test(t)===!1)return n;return SA(n,{protoAction:s,constructorAction:i,safe:r&&r.safe})}function SA(t,{protoAction:e="error",constructorAction:r="error",safe:n}={}){let s=[t];for(;s.length;){let i=s;s=[];for(let o of i){if(e!=="ignore"&&Object.prototype.hasOwnProperty.call(o,"__proto__")){if(n===!0)return null;if(e==="error")throw new SyntaxError("Object contains forbidden prototype property");delete o.__proto__}if(r!=="ignore"&&Object.prototype.hasOwnProperty.call(o,"constructor")&&o.constructor!==null&&typeof o.constructor=="object"&&Object.prototype.hasOwnProperty.call(o.constructor,"prototype")){if(n===!0)return null;if(r==="error")throw new SyntaxError("Object contains forbidden prototype property");delete o.constructor}for(let a in o){let c=o[a];c&&typeof c=="object"&&s.push(c)}}}return t}function vw(t,e,r){let{stackTraceLimit:n}=Error;Error.stackTraceLimit=0;try{return EA(t,e,r)}finally{Error.stackTraceLimit=n}}function wZ(t,e){let{stackTraceLimit:r}=Error;Error.stackTraceLimit=0;try{return EA(t,e,{safe:!0})}catch{return}finally{Error.stackTraceLimit=r}}mc.exports=vw;mc.exports.default=vw;mc.exports.parse=vw;mc.exports.safeParse=wZ;mc.exports.scan=SA});var Rw=E((qCe,Pu)=>{"use strict";var{AsyncResource:bZ}=require("async_hooks"),{FifoMap:OA}=_w(),{parse:EZ}=TA(),{kDefaultJsonParse:Ou,kContentTypeParser:gc,kBodyLimit:SZ,kRequestPayloadStream:PA,kState:bw,kTestInternals:TZ,kReplyIsError:RA,kRouteContext:RZ}=Nt(),{FST_ERR_CTP_INVALID_TYPE:Ew,FST_ERR_CTP_EMPTY_TYPE:$Z,FST_ERR_CTP_ALREADY_PRESENT:OZ,FST_ERR_CTP_INVALID_HANDLER:PZ,FST_ERR_CTP_INVALID_PARSE_TYPE:xZ,FST_ERR_CTP_BODY_TOO_LARGE:$A,FST_ERR_CTP_INVALID_MEDIA_TYPE:NZ,FST_ERR_CTP_INVALID_CONTENT_LENGTH:CZ,FST_ERR_CTP_EMPTY_JSON_BODY:IZ,FST_ERR_CTP_INSTANCE_ALREADY_STARTED:Sw,FST_ERR_CTP_INVALID_JSON_BODY:AZ}=zt(),{FSTSEC001:kZ}=oc();function Js(t,e,r){this[Ou]=NA(e,r),this.customParsers=new Map,this.customParsers.set("application/json",new ww(!0,!1,t,this[Ou])),this.customParsers.set("text/plain",new ww(!0,!1,t,Tw)),this.parserList=["application/json","text/plain"],this.parserRegExpList=[],this.cache=new OA(100)}Js.prototype.add=function(t,e,r){let n=typeof t=="string";if(n){if(t=t.trim().toLowerCase(),t.length===0)throw new $Z}else if(!(t instanceof RegExp))throw new Ew;if(typeof r!="function")throw new PZ;if(this.existingParser(t))throw new OZ(t);if(e.parseAs!==void 0&&e.parseAs!=="string"&&e.parseAs!=="buffer")throw new xZ(e.parseAs);let s=new ww(e.parseAs==="string",e.parseAs==="buffer",e.bodyLimit,r);t==="*"?this.customParsers.set("",s):n?(this.parserList.unshift(t),this.customParsers.set(t,s)):(FZ(t),this.parserRegExpList.unshift(t),this.customParsers.set(t.toString(),s))};Js.prototype.hasParser=function(t){if(typeof t=="string")t=t.trim().toLowerCase();else{if(!(t instanceof RegExp))throw new Ew;t=t.toString()}return this.customParsers.has(t)};Js.prototype.existingParser=function(t){return t==="application/json"&&this.customParsers.has(t)?this.customParsers.get(t).fn!==this[Ou]:t==="text/plain"&&this.customParsers.has(t)?this.customParsers.get(t).fn!==Tw:this.hasParser(t)};Js.prototype.getParser=function(t){let e=this.customParsers.get(t);if(e!==void 0||(e=this.cache.get(t),e!==void 0))return e;let r=t.toLowerCase();for(let n=0;n!==this.parserList.length;++n){let s=this.parserList[n];if(r.slice(0,s.length)===s&&(r.length===s.length||r.charCodeAt(s.length)===59||r.charCodeAt(s.length)===32||r.charCodeAt(s.length)===9))return e=this.customParsers.get(s),this.cache.set(t,e),e}for(let n=0;n!==this.parserRegExpList.length;++n){let s=this.parserRegExpList[n];if(s.test(t))return e=this.customParsers.get(s.toString()),this.cache.set(t,e),e}return this.customParsers.get("")};Js.prototype.removeAll=function(){this.customParsers=new Map,this.parserRegExpList=[],this.parserList=[],this.cache=new OA(100)};Js.prototype.remove=function(t){let e;if(typeof t=="string")t=t.trim().toLowerCase(),e=this.parserList;else{if(!(t instanceof RegExp))throw new Ew;t=t.toString(),e=this.parserRegExpList}let r=this.customParsers.delete(t),n=e.findIndex(s=>s.toString()===t);return n>-1&&e.splice(n,1),r||n>-1};Js.prototype.run=function(t,e,r,n){let s=this.getParser(t);if(s===void 0){if(r.is404===!0){e(r,n);return}n[RA]=!0,n.send(new NZ(t||void 0));return}let i=new bZ("content-type-parser:run",r),o=i.bind(c);if(s.asString===!0||s.asBuffer===!0){xA(r,n,n[RZ]._parserOptions,s,o);return}let a=s.fn(r,r[PA],o);a&&typeof a.then=="function"&&a.then(l=>{o(null,l)},o);function c(l,u){if(i.emitDestroy(),l!=null){n.header("connection","close"),n[RA]=!0,n.send(l);return}r.body=u,e(r,n)}};function xA(t,e,r,n,s){let i=n.asString===!0,o=r.limit===null?n.bodyLimit:r.limit,a=Number(t.headers["content-length"]);if(a>o){s(new $A,void 0);return}let c=0,l=i?"":[],u=t[PA]||t.raw;i&&u.setEncoding("utf8"),u.on("data",d),u.on("end",p),u.on("error",p),u.resume();function d(f){c+=i?Buffer.byteLength(f):f.length;let{receivedEncodedLength:h=0}=u;if(c>o||h>o){u.removeListener("data",d),u.removeListener("end",p),u.removeListener("error",p),s(new $A,void 0);return}i?l+=f:l.push(f)}function p(f){if(u.removeListener("data",d),u.removeListener("end",p),u.removeListener("error",p),f!=null){typeof f.statusCode=="number"&&f.statusCode>=400||(f.statusCode=400),s(f,void 0);return}if(!Number.isNaN(a)&&(u.receivedEncodedLength||c)!==a){s(new CZ,void 0);return}i||(l=Buffer.concat(l));let h=n.fn(t,l,s);h&&typeof h.then=="function"&&h.then(m=>{s(null,m)},s)}}function NA(t,e){let r={protoAction:t,constructorAction:e};return n;function n(s,i,o){if(i.length===0){o(new IZ,void 0);return}try{o(null,EZ(i,r))}catch{o(new AZ,void 0)}}}function Tw(t,e,r){r(null,e)}function ww(t,e,r,n){this.asString=t,this.asBuffer=e,this.bodyLimit=r,this.fn=n}function DZ(t){let e=new Js;return e[Ou]=t[Ou],e.customParsers=new Map(t.customParsers.entries()),e.parserList=t.parserList.slice(),e.parserRegExpList=t.parserRegExpList.slice(),e}function MZ(t,e,r){if(this[bw].started)throw new Sw("addContentTypeParser");return typeof e=="function"&&(r=e,e={}),e||(e={}),e.bodyLimit||(e.bodyLimit=this[SZ]),Array.isArray(t)?t.forEach(n=>this[gc].add(n,e,r)):this[gc].add(t,e,r),this}function jZ(t){return this[gc].hasParser(t)}function qZ(t){if(this[bw].started)throw new Sw("removeContentTypeParser");if(Array.isArray(t))for(let e of t)this[gc].remove(e);else this[gc].remove(t)}function LZ(){if(this[bw].started)throw new Sw("removeAllContentTypeParsers");this[gc].removeAll()}function FZ(t){t.source[0]!=="^"&&t.source.includes(";?")===!1&&kZ(t.source)}Pu.exports=Js;Pu.exports.helpers={buildContentTypeParser:DZ,addContentTypeParser:MZ,hasContentTypeParser:jZ,removeContentTypeParser:qZ,removeAllContentTypeParsers:LZ};Pu.exports.defaultParsers={getDefaultJsonParser:NA,defaultTextParser:Tw};Pu.exports[TZ]={rawBody:xA}});var Hp=E(AA=>{var CA=Object.prototype.hasOwnProperty;function IA(t,e,r){for(r of t.keys())if(xu(r,e))return r}function xu(t,e){var r,n,s;if(t===e)return!0;if(t&&e&&(r=t.constructor)===e.constructor){if(r===Date)return t.getTime()===e.getTime();if(r===RegExp)return t.toString()===e.toString();if(r===Array){if((n=t.length)===e.length)for(;n--&&xu(t[n],e[n]););return n===-1}if(r===Set){if(t.size!==e.size)return!1;for(n of t)if(s=n,s&&typeof s=="object"&&(s=IA(e,s),!s)||!e.has(s))return!1;return!0}if(r===Map){if(t.size!==e.size)return!1;for(n of t)if(s=n[0],s&&typeof s=="object"&&(s=IA(e,s),!s)||!xu(n[1],e.get(s)))return!1;return!0}if(r===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(r===DataView){if((n=t.byteLength)===e.byteLength)for(;n--&&t.getInt8(n)===e.getInt8(n););return n===-1}if(ArrayBuffer.isView(t)){if((n=t.byteLength)===e.byteLength)for(;n--&&t[n]===e[n];);return n===-1}if(!r||typeof t=="object"){n=0;for(r in t)if(CA.call(t,r)&&++n&&!CA.call(e,r)||!(r in e)||!xu(t[r],e[r]))return!1;return Object.keys(e).length===n}}return t!==t&&e!==e}AA.dequal=xu});var jA=E((FCe,MA)=>{"use strict";var{dequal:kA}=Hp(),UZ=Symbol.for("json-schema-ref"),$w=class{#e;#r;#s;#l;#a;constructor(e={}){this.#e={},this.#r={},this.#s=e.insertRefSymbol??!1,this.#l=e.allowEqualDuplicates??!0,this.#a=e.cloneSchemaWithoutRefs??!1}addSchema(e,r,n=!0){n&&(e.$id!==void 0&&e.$id.charAt(0)!=="#"?r=e.$id:this.#i(e,r));let s=e.$id;s!==void 0&&typeof s=="string"&&(s.charAt(0)==="#"?this.#m(e,r,s):(this.#i(e,s),r=s));let i=e.$ref;if(i!==void 0&&typeof i=="string"){let{refSchemaId:o,refJsonPointer:a}=this.#R(i,r);this.#e[r].refs.push({schemaId:o,jsonPointer:a})}for(let o in e)typeof e[o]=="object"&&e[o]!==null&&this.addSchema(e[o],r,!1)}getSchema(e,r="#"){let n=this.#e[e];if(n===void 0)throw new Error(`Cannot resolve ref "${e}${r}". Schema with id "${e}" is not found.`);return n.anchors[r]!==void 0?n.anchors[r]:DA(n.schema,r)}hasSchema(e){return this.#e[e]!==void 0}getSchemaRefs(e){let r=this.#e[e];if(r===void 0)throw new Error(`Schema with id "${e}" is not found.`);return r.refs}getSchemaDependencies(e,r={}){let n=this.#e[e];for(let s of n.refs){let i=s.schemaId;i===e||r[i]!==void 0||(r[i]=this.getSchema(i),this.getSchemaDependencies(i,r))}return r}derefSchema(e){if(this.#r[e]!==void 0)return;let r=this.#e[e];if(r===void 0)throw new Error(`Schema with id "${e}" is not found.`);!this.#a&&r.refs.length===0&&(this.#r[e]={schema:r.schema,anchors:r.anchors});let n=[];this.#y(r.schema,e,!0,n);let s=this.getSchemaDependencies(e);for(let i in s){let o=s[i];this.#y(o,i,!0,n)}for(let i of n){let{refSchemaId:o,refJsonPointer:a}=this.#R(i.ref,i.sourceSchemaId),c=this.getDerefSchema(o,a);if(c===null)throw new Error(`Cannot resolve ref "${i.ref}". Ref "${a}" is not found in schema "${o}".`);i.targetSchema=c,i.targetSchemaId=o}for(let i of n)this.#f(i,n)}getDerefSchema(e,r="#"){let n=this.#r[e];return n===void 0&&(this.derefSchema(e),n=this.#r[e]),n.anchors[r]!==void 0?n.anchors[r]:DA(n.schema,r)}#R(e,r){let n=e.indexOf("#");return n===-1?{refSchemaId:e,refJsonPointer:"#"}:n===0?{refSchemaId:r,refJsonPointer:e}:{refSchemaId:e.slice(0,n),refJsonPointer:e.slice(n)}}#y(e,r,n,s=[]){let i=Array.isArray(e)?[...e]:{...e};n&&(e.$id!==void 0&&e.$id.charAt(0)!=="#"?r=e.$id:this.#u(i,r));let o=i.$id;o!==void 0&&typeof o=="string"&&(o.charAt(0)==="#"?this.#o(i,r,o):(this.#u(i,o),r=o)),i.$ref!==void 0&&s.push({ref:i.$ref,sourceSchemaId:r,sourceSchema:i});for(let a in i){let c=i[a];typeof c=="object"&&c!==null&&(i[a]=this.#y(c,r,!1,s))}return i}#f(e,r){let{sourceSchema:n,targetSchema:s}=e;if(n.$ref){if(this.#s&&(n[UZ]=n.$ref),delete n.$ref,s.$ref){let i=r.find(o=>o.sourceSchema===s);this.#f(i,r)}for(let i in s)if(i!=="$id"){if(n[i]!==void 0){if(kA(n[i],s[i]))continue;throw new Error(`Cannot resolve ref "${e.ref}". Property "${i}" already exists in schema "${e.sourceSchemaId}".`)}n[i]=s[i]}e.isResolved=!0}}#i(e,r){let n=this.#e[r];if(n!==void 0){if(this.#l&&kA(e,n.schema))return;throw new Error(`There is already another schema with id "${r}".`)}this.#e[r]={schema:e,anchors:{},refs:[]}}#m(e,r,n){let{anchors:s}=this.#e[r];if(s[n]!==void 0)throw new Error(`There is already another anchor "${n}" in schema "${r}".`);s[n]=e}#u(e,r){this.#r[r]===void 0&&(this.#r[r]={schema:e,anchors:{}})}#o(e,r,n){let{anchors:s}=this.#r[r];s[n]=e}};function DA(t,e){let r=e.split("/"),n=t;for(let s of r)if(!(s===""||s==="#")){if(typeof n!="object"||n===null)return null;n=n[s]}return n??null}MA.exports={RefResolver:$w}});var Iu=E(Me=>{"use strict";Object.defineProperty(Me,"__esModule",{value:!0});Me.regexpCode=Me.getEsmExportName=Me.getProperty=Me.safeStringify=Me.stringify=Me.strConcat=Me.addCodeArg=Me.str=Me._=Me.nil=Me._Code=Me.Name=Me.IDENTIFIER=Me._CodeOrName=void 0;var Nu=class{};Me._CodeOrName=Nu;Me.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var zo=class extends Nu{constructor(e){if(super(),!Me.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};Me.Name=zo;var fn=class extends Nu{constructor(e){super(),this._items=typeof e=="string"?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return e===""||e==='""'}get str(){var e;return(e=this._str)!==null&&e!==void 0?e:this._str=this._items.reduce((r,n)=>`${r}${n}`,"")}get names(){var e;return(e=this._names)!==null&&e!==void 0?e:this._names=this._items.reduce((r,n)=>(n instanceof zo&&(r[n.str]=(r[n.str]||0)+1),r),{})}};Me._Code=fn;Me.nil=new fn("");function qA(t,...e){let r=[t[0]],n=0;for(;n<e.length;)Pw(r,e[n]),r.push(t[++n]);return new fn(r)}Me._=qA;var Ow=new fn("+");function LA(t,...e){let r=[Cu(t[0])],n=0;for(;n<e.length;)r.push(Ow),Pw(r,e[n]),r.push(Ow,Cu(t[++n]));return BZ(r),new fn(r)}Me.str=LA;function Pw(t,e){e instanceof fn?t.push(...e._items):e instanceof zo?t.push(e):t.push(HZ(e))}Me.addCodeArg=Pw;function BZ(t){let e=1;for(;e<t.length-1;){if(t[e]===Ow){let r=VZ(t[e-1],t[e+1]);if(r!==void 0){t.splice(e-1,3,r);continue}t[e++]="+"}e++}}function VZ(t,e){if(e==='""')return t;if(t==='""')return e;if(typeof t=="string")return e instanceof zo||t[t.length-1]!=='"'?void 0:typeof e!="string"?`${t.slice(0,-1)}${e}"`:e[0]==='"'?t.slice(0,-1)+e.slice(1):void 0;if(typeof e=="string"&&e[0]==='"'&&!(t instanceof zo))return`"${t}${e.slice(1)}`}function zZ(t,e){return e.emptyStr()?t:t.emptyStr()?e:LA`${t}${e}`}Me.strConcat=zZ;function HZ(t){return typeof t=="number"||typeof t=="boolean"||t===null?t:Cu(Array.isArray(t)?t.join(","):t)}function GZ(t){return new fn(Cu(t))}Me.stringify=GZ;function Cu(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}Me.safeStringify=Cu;function WZ(t){return typeof t=="string"&&Me.IDENTIFIER.test(t)?new fn(`.${t}`):qA`[${t}]`}Me.getProperty=WZ;function KZ(t){if(typeof t=="string"&&Me.IDENTIFIER.test(t))return new fn(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)}Me.getEsmExportName=KZ;function JZ(t){return new fn(t.toString())}Me.regexpCode=JZ});var Cw=E(Lr=>{"use strict";Object.defineProperty(Lr,"__esModule",{value:!0});Lr.ValueScope=Lr.ValueScopeName=Lr.Scope=Lr.varKinds=Lr.UsedValueState=void 0;var qr=Iu(),xw=class extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}},Gp;(function(t){t[t.Started=0]="Started",t[t.Completed=1]="Completed"})(Gp||(Lr.UsedValueState=Gp={}));Lr.varKinds={const:new qr.Name("const"),let:new qr.Name("let"),var:new qr.Name("var")};var Wp=class{constructor({prefixes:e,parent:r}={}){this._names={},this._prefixes=e,this._parent=r}toName(e){return e instanceof qr.Name?e:this.name(e)}name(e){return new qr.Name(this._newName(e))}_newName(e){let r=this._names[e]||this._nameGroup(e);return`${e}${r.index++}`}_nameGroup(e){var r,n;if(!((n=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||n===void 0)&&n.has(e)||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}};Lr.Scope=Wp;var Kp=class extends qr.Name{constructor(e,r){super(r),this.prefix=e}setValue(e,{property:r,itemIndex:n}){this.value=e,this.scopePath=(0,qr._)`.${new qr.Name(r)}[${n}]`}};Lr.ValueScopeName=Kp;var YZ=(0,qr._)`\n`,Nw=class extends Wp{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?YZ:qr.nil}}get(){return this._scope}name(e){return new Kp(e,this._newName(e))}value(e,r){var n;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let s=this.toName(e),{prefix:i}=s,o=(n=r.key)!==null&&n!==void 0?n:r.ref,a=this._values[i];if(a){let u=a.get(o);if(u)return u}else a=this._values[i]=new Map;a.set(o,s);let c=this._scope[i]||(this._scope[i]=[]),l=c.length;return c[l]=r.ref,s.setValue(r,{property:i,itemIndex:l}),s}getValue(e,r){let n=this._values[e];if(n)return n.get(r)}scopeRefs(e,r=this._values){return this._reduceValues(r,n=>{if(n.scopePath===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return(0,qr._)`${e}${n.scopePath}`})}scopeCode(e=this._values,r,n){return this._reduceValues(e,s=>{if(s.value===void 0)throw new Error(`CodeGen: name "${s}" has no value`);return s.value.code},r,n)}_reduceValues(e,r,n={},s){let i=qr.nil;for(let o in e){let a=e[o];if(!a)continue;let c=n[o]=n[o]||new Map;a.forEach(l=>{if(c.has(l))return;c.set(l,Gp.Started);let u=r(l);if(u){let d=this.opts.es5?Lr.varKinds.var:Lr.varKinds.const;i=(0,qr._)`${i}${d} ${l} = ${u};${this.opts._n}`}else if(u=s?.(l))i=(0,qr._)`${i}${u}${this.opts._n}`;else throw new xw(l);c.set(l,Gp.Completed)})}return i}};Lr.ValueScope=Nw});var we=E(ye=>{"use strict";Object.defineProperty(ye,"__esModule",{value:!0});ye.or=ye.and=ye.not=ye.CodeGen=ye.operators=ye.varKinds=ye.ValueScopeName=ye.ValueScope=ye.Scope=ye.Name=ye.regexpCode=ye.stringify=ye.getProperty=ye.nil=ye.strConcat=ye.str=ye._=void 0;var Ne=Iu(),Un=Cw(),Mi=Iu();Object.defineProperty(ye,"_",{enumerable:!0,get:function(){return Mi._}});Object.defineProperty(ye,"str",{enumerable:!0,get:function(){return Mi.str}});Object.defineProperty(ye,"strConcat",{enumerable:!0,get:function(){return Mi.strConcat}});Object.defineProperty(ye,"nil",{enumerable:!0,get:function(){return Mi.nil}});Object.defineProperty(ye,"getProperty",{enumerable:!0,get:function(){return Mi.getProperty}});Object.defineProperty(ye,"stringify",{enumerable:!0,get:function(){return Mi.stringify}});Object.defineProperty(ye,"regexpCode",{enumerable:!0,get:function(){return Mi.regexpCode}});Object.defineProperty(ye,"Name",{enumerable:!0,get:function(){return Mi.Name}});var Qp=Cw();Object.defineProperty(ye,"Scope",{enumerable:!0,get:function(){return Qp.Scope}});Object.defineProperty(ye,"ValueScope",{enumerable:!0,get:function(){return Qp.ValueScope}});Object.defineProperty(ye,"ValueScopeName",{enumerable:!0,get:function(){return Qp.ValueScopeName}});Object.defineProperty(ye,"varKinds",{enumerable:!0,get:function(){return Qp.varKinds}});ye.operators={GT:new Ne._Code(">"),GTE:new Ne._Code(">="),LT:new Ne._Code("<"),LTE:new Ne._Code("<="),EQ:new Ne._Code("==="),NEQ:new Ne._Code("!=="),NOT:new Ne._Code("!"),OR:new Ne._Code("||"),AND:new Ne._Code("&&"),ADD:new Ne._Code("+")};var Ys=class{optimizeNodes(){return this}optimizeNames(e,r){return this}},Iw=class extends Ys{constructor(e,r,n){super(),this.varKind=e,this.name=r,this.rhs=n}render({es5:e,_n:r}){let n=e?Un.varKinds.var:this.varKind,s=this.rhs===void 0?"":` = ${this.rhs}`;return`${n} ${this.name}${s};`+r}optimizeNames(e,r){if(e[this.name.str])return this.rhs&&(this.rhs=_c(this.rhs,e,r)),this}get names(){return this.rhs instanceof Ne._CodeOrName?this.rhs.names:{}}},Jp=class extends Ys{constructor(e,r,n){super(),this.lhs=e,this.rhs=r,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof Ne.Name&&!e[this.lhs.str]&&!this.sideEffects))return this.rhs=_c(this.rhs,e,r),this}get names(){let e=this.lhs instanceof Ne.Name?{}:{...this.lhs.names};return Xp(e,this.rhs)}},Aw=class extends Jp{constructor(e,r,n,s){super(e,n,s),this.op=r}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}},kw=class extends Ys{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}},Dw=class extends Ys{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}},Mw=class extends Ys{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}},jw=class extends Ys{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,r){return this.code=_c(this.code,e,r),this}get names(){return this.code instanceof Ne._CodeOrName?this.code.names:{}}},Au=class extends Ys{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((r,n)=>r+n.render(e),"")}optimizeNodes(){let{nodes:e}=this,r=e.length;for(;r--;){let n=e[r].optimizeNodes();Array.isArray(n)?e.splice(r,1,...n):n?e[r]=n:e.splice(r,1)}return e.length>0?this:void 0}optimizeNames(e,r){let{nodes:n}=this,s=n.length;for(;s--;){let i=n[s];i.optimizeNames(e,r)||(XZ(e,i.names),n.splice(s,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((e,r)=>Go(e,r.names),{})}},Xs=class extends Au{render(e){return"{"+e._n+super.render(e)+"}"+e._n}},qw=class extends Au{},yc=class extends Xs{};yc.kind="else";var Bn=class extends Xs{constructor(e,r){super(r),this.condition=e}render(e){let r=`if(${this.condition})`+super.render(e);return this.else&&(r+="else "+this.else.render(e)),r}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(e===!0)return this.nodes;let r=this.else;if(r){let n=r.optimizeNodes();r=this.else=Array.isArray(n)?new yc(n):n}if(r)return e===!1?r instanceof Bn?r:r.nodes:this.nodes.length?this:new Bn(FA(e),r instanceof Bn?[r]:r.nodes);if(!(e===!1||!this.nodes.length))return this}optimizeNames(e,r){var n;if(this.else=(n=this.else)===null||n===void 0?void 0:n.optimizeNames(e,r),!!(super.optimizeNames(e,r)||this.else))return this.condition=_c(this.condition,e,r),this}get names(){let e=super.names;return Xp(e,this.condition),this.else&&Go(e,this.else.names),e}};Bn.kind="if";var Ho=class extends Xs{};Ho.kind="for";var Lw=class extends Ho{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iteration=_c(this.iteration,e,r),this}get names(){return Go(super.names,this.iteration.names)}},Fw=class extends Ho{constructor(e,r,n,s){super(),this.varKind=e,this.name=r,this.from=n,this.to=s}render(e){let r=e.es5?Un.varKinds.var:this.varKind,{name:n,from:s,to:i}=this;return`for(${r} ${n}=${s}; ${n}<${i}; ${n}++)`+super.render(e)}get names(){let e=Xp(super.names,this.from);return Xp(e,this.to)}},Yp=class extends Ho{constructor(e,r,n,s){super(),this.loop=e,this.varKind=r,this.name=n,this.iterable=s}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iterable=_c(this.iterable,e,r),this}get names(){return Go(super.names,this.iterable.names)}},ku=class extends Xs{constructor(e,r,n){super(),this.name=e,this.args=r,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}};ku.kind="func";var Du=class extends Au{render(e){return"return "+super.render(e)}};Du.kind="return";var Uw=class extends Xs{render(e){let r="try"+super.render(e);return this.catch&&(r+=this.catch.render(e)),this.finally&&(r+=this.finally.render(e)),r}optimizeNodes(){var e,r;return super.optimizeNodes(),(e=this.catch)===null||e===void 0||e.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(e,r){var n,s;return super.optimizeNames(e,r),(n=this.catch)===null||n===void 0||n.optimizeNames(e,r),(s=this.finally)===null||s===void 0||s.optimizeNames(e,r),this}get names(){let e=super.names;return this.catch&&Go(e,this.catch.names),this.finally&&Go(e,this.finally.names),e}},Mu=class extends Xs{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}};Mu.kind="catch";var ju=class extends Xs{render(e){return"finally"+super.render(e)}};ju.kind="finally";var Bw=class{constructor(e,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=e,this._scope=new Un.Scope({parent:e}),this._nodes=[new qw]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,r){let n=this._extScope.value(e,r);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,r){return this._extScope.getValue(e,r)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,r,n,s){let i=this._scope.toName(r);return n!==void 0&&s&&(this._constants[i.str]=n),this._leafNode(new Iw(e,i,n)),i}const(e,r,n){return this._def(Un.varKinds.const,e,r,n)}let(e,r,n){return this._def(Un.varKinds.let,e,r,n)}var(e,r,n){return this._def(Un.varKinds.var,e,r,n)}assign(e,r,n){return this._leafNode(new Jp(e,r,n))}add(e,r){return this._leafNode(new Aw(e,ye.operators.ADD,r))}code(e){return typeof e=="function"?e():e!==Ne.nil&&this._leafNode(new jw(e)),this}object(...e){let r=["{"];for(let[n,s]of e)r.length>1&&r.push(","),r.push(n),(n!==s||this.opts.es5)&&(r.push(":"),(0,Ne.addCodeArg)(r,s));return r.push("}"),new Ne._Code(r)}if(e,r,n){if(this._blockNode(new Bn(e)),r&&n)this.code(r).else().code(n).endIf();else if(r)this.code(r).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new Bn(e))}else(){return this._elseNode(new yc)}endIf(){return this._endBlockNode(Bn,yc)}_for(e,r){return this._blockNode(e),r&&this.code(r).endFor(),this}for(e,r){return this._for(new Lw(e),r)}forRange(e,r,n,s,i=this.opts.es5?Un.varKinds.var:Un.varKinds.let){let o=this._scope.toName(e);return this._for(new Fw(i,o,r,n),()=>s(o))}forOf(e,r,n,s=Un.varKinds.const){let i=this._scope.toName(e);if(this.opts.es5){let o=r instanceof Ne.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,Ne._)`${o}.length`,a=>{this.var(i,(0,Ne._)`${o}[${a}]`),n(i)})}return this._for(new Yp("of",s,i,r),()=>n(i))}forIn(e,r,n,s=this.opts.es5?Un.varKinds.var:Un.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,Ne._)`Object.keys(${r})`,n);let i=this._scope.toName(e);return this._for(new Yp("in",s,i,r),()=>n(i))}endFor(){return this._endBlockNode(Ho)}label(e){return this._leafNode(new kw(e))}break(e){return this._leafNode(new Dw(e))}return(e){let r=new Du;if(this._blockNode(r),this.code(e),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(Du)}try(e,r,n){if(!r&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');let s=new Uw;if(this._blockNode(s),this.code(e),r){let i=this.name("e");this._currNode=s.catch=new Mu(i),r(i)}return n&&(this._currNode=s.finally=new ju,this.code(n)),this._endBlockNode(Mu,ju)}throw(e){return this._leafNode(new Mw(e))}block(e,r){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(r),this}endBlock(e){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let n=this._nodes.length-r;if(n<0||e!==void 0&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=r,this}func(e,r=Ne.nil,n,s){return this._blockNode(new ku(e,r,n)),s&&this.code(s).endFunc(),this}endFunc(){return this._endBlockNode(ku)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,r){let n=this._currNode;if(n instanceof e||r&&n instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${e.kind}/${r.kind}`:e.kind}"`)}_elseNode(e){let r=this._currNode;if(!(r instanceof Bn))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let r=this._nodes;r[r.length-1]=e}};ye.CodeGen=Bw;function Go(t,e){for(let r in e)t[r]=(t[r]||0)+(e[r]||0);return t}function Xp(t,e){return e instanceof Ne._CodeOrName?Go(t,e.names):t}function _c(t,e,r){if(t instanceof Ne.Name)return n(t);if(!s(t))return t;return new Ne._Code(t._items.reduce((i,o)=>(o instanceof Ne.Name&&(o=n(o)),o instanceof Ne._Code?i.push(...o._items):i.push(o),i),[]));function n(i){let o=r[i.str];return o===void 0||e[i.str]!==1?i:(delete e[i.str],o)}function s(i){return i instanceof Ne._Code&&i._items.some(o=>o instanceof Ne.Name&&e[o.str]===1&&r[o.str]!==void 0)}}function XZ(t,e){for(let r in e)t[r]=(t[r]||0)-(e[r]||0)}function FA(t){return typeof t=="boolean"||typeof t=="number"||t===null?!t:(0,Ne._)`!${Vw(t)}`}ye.not=FA;var QZ=UA(ye.operators.AND);function ZZ(...t){return t.reduce(QZ)}ye.and=ZZ;var eee=UA(ye.operators.OR);function tee(...t){return t.reduce(eee)}ye.or=tee;function UA(t){return(e,r)=>e===Ne.nil?r:r===Ne.nil?e:(0,Ne._)`${Vw(e)} ${t} ${Vw(r)}`}function Vw(t){return t instanceof Ne.Name?t:(0,Ne._)`(${t})`}});var je=E(be=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});be.checkStrictMode=be.getErrorPath=be.Type=be.useFunc=be.setEvaluated=be.evaluatedPropsToName=be.mergeEvaluated=be.eachItem=be.unescapeJsonPointer=be.escapeJsonPointer=be.escapeFragment=be.unescapeFragment=be.schemaRefOrVal=be.schemaHasRulesButRef=be.schemaHasRules=be.checkUnknownRules=be.alwaysValidSchema=be.toHash=void 0;var We=we(),ree=Iu();function nee(t){let e={};for(let r of t)e[r]=!0;return e}be.toHash=nee;function see(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(zA(t,e),!HA(e,t.self.RULES.all))}be.alwaysValidSchema=see;function zA(t,e=t.schema){let{opts:r,self:n}=t;if(!r.strictSchema||typeof e=="boolean")return;let s=n.RULES.keywords;for(let i in e)s[i]||KA(t,`unknown keyword: "${i}"`)}be.checkUnknownRules=zA;function HA(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(e[r])return!0;return!1}be.schemaHasRules=HA;function iee(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}be.schemaHasRulesButRef=iee;function oee({topSchemaRef:t,schemaPath:e},r,n,s){if(!s){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,We._)`${r}`}return(0,We._)`${t}${e}${(0,We.getProperty)(n)}`}be.schemaRefOrVal=oee;function aee(t){return GA(decodeURIComponent(t))}be.unescapeFragment=aee;function cee(t){return encodeURIComponent(Hw(t))}be.escapeFragment=cee;function Hw(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}be.escapeJsonPointer=Hw;function GA(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}be.unescapeJsonPointer=GA;function lee(t,e){if(Array.isArray(t))for(let r of t)e(r);else e(t)}be.eachItem=lee;function BA({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:n}){return(s,i,o,a)=>{let c=o===void 0?i:o instanceof We.Name?(i instanceof We.Name?t(s,i,o):e(s,i,o),o):i instanceof We.Name?(e(s,o,i),i):r(i,o);return a===We.Name&&!(c instanceof We.Name)?n(s,c):c}}be.mergeEvaluated={props:BA({mergeNames:(t,e,r)=>t.if((0,We._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,We._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,We._)`${r} || {}`).code((0,We._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,We._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,We._)`${r} || {}`),Gw(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:WA}),items:BA({mergeNames:(t,e,r)=>t.if((0,We._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,We._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,We._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,We._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function WA(t,e){if(e===!0)return t.var("props",!0);let r=t.var("props",(0,We._)`{}`);return e!==void 0&&Gw(t,r,e),r}be.evaluatedPropsToName=WA;function Gw(t,e,r){Object.keys(r).forEach(n=>t.assign((0,We._)`${e}${(0,We.getProperty)(n)}`,!0))}be.setEvaluated=Gw;var VA={};function uee(t,e){return t.scopeValue("func",{ref:e,code:VA[e.code]||(VA[e.code]=new ree._Code(e.code))})}be.useFunc=uee;var zw;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(zw||(be.Type=zw={}));function fee(t,e,r){if(t instanceof We.Name){let n=e===zw.Num;return r?n?(0,We._)`"[" + ${t} + "]"`:(0,We._)`"['" + ${t} + "']"`:n?(0,We._)`"/" + ${t}`:(0,We._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,We.getProperty)(t).toString():"/"+Hw(t)}be.getErrorPath=fee;function KA(t,e,r=t.opts.strictSchema){if(r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}be.checkStrictMode=KA});var Qs=E(Ww=>{"use strict";Object.defineProperty(Ww,"__esModule",{value:!0});var rr=we(),dee={data:new rr.Name("data"),valCxt:new rr.Name("valCxt"),instancePath:new rr.Name("instancePath"),parentData:new rr.Name("parentData"),parentDataProperty:new rr.Name("parentDataProperty"),rootData:new rr.Name("rootData"),dynamicAnchors:new rr.Name("dynamicAnchors"),vErrors:new rr.Name("vErrors"),errors:new rr.Name("errors"),this:new rr.Name("this"),self:new rr.Name("self"),scope:new rr.Name("scope"),json:new rr.Name("json"),jsonPos:new rr.Name("jsonPos"),jsonLen:new rr.Name("jsonLen"),jsonPart:new rr.Name("jsonPart")};Ww.default=dee});var qu=E(nr=>{"use strict";Object.defineProperty(nr,"__esModule",{value:!0});nr.extendErrors=nr.resetErrorsCount=nr.reportExtraError=nr.reportError=nr.keyword$DataError=nr.keywordError=void 0;var Ae=we(),Zp=je(),br=Qs();nr.keywordError={message:({keyword:t})=>(0,Ae.str)`must pass "${t}" keyword validation`};nr.keyword$DataError={message:({keyword:t,schemaType:e})=>e?(0,Ae.str)`"${t}" keyword must be ${e} ($data)`:(0,Ae.str)`"${t}" keyword is invalid ($data)`};function hee(t,e=nr.keywordError,r,n){let{it:s}=t,{gen:i,compositeRule:o,allErrors:a}=s,c=XA(t,e,r);n??(o||a)?JA(i,c):YA(s,(0,Ae._)`[${c}]`)}nr.reportError=hee;function pee(t,e=nr.keywordError,r){let{it:n}=t,{gen:s,compositeRule:i,allErrors:o}=n,a=XA(t,e,r);JA(s,a),i||o||YA(n,br.default.vErrors)}nr.reportExtraError=pee;function mee(t,e){t.assign(br.default.errors,e),t.if((0,Ae._)`${br.default.vErrors} !== null`,()=>t.if(e,()=>t.assign((0,Ae._)`${br.default.vErrors}.length`,e),()=>t.assign(br.default.vErrors,null)))}nr.resetErrorsCount=mee;function gee({gen:t,keyword:e,schemaValue:r,data:n,errsCount:s,it:i}){if(s===void 0)throw new Error("ajv implementation error");let o=t.name("err");t.forRange("i",s,br.default.errors,a=>{t.const(o,(0,Ae._)`${br.default.vErrors}[${a}]`),t.if((0,Ae._)`${o}.instancePath === undefined`,()=>t.assign((0,Ae._)`${o}.instancePath`,(0,Ae.strConcat)(br.default.instancePath,i.errorPath))),t.assign((0,Ae._)`${o}.schemaPath`,(0,Ae.str)`${i.errSchemaPath}/${e}`),i.opts.verbose&&(t.assign((0,Ae._)`${o}.schema`,r),t.assign((0,Ae._)`${o}.data`,n))})}nr.extendErrors=gee;function JA(t,e){let r=t.const("err",e);t.if((0,Ae._)`${br.default.vErrors} === null`,()=>t.assign(br.default.vErrors,(0,Ae._)`[${r}]`),(0,Ae._)`${br.default.vErrors}.push(${r})`),t.code((0,Ae._)`${br.default.errors}++`)}function YA(t,e){let{gen:r,validateName:n,schemaEnv:s}=t;s.$async?r.throw((0,Ae._)`new ${t.ValidationError}(${e})`):(r.assign((0,Ae._)`${n}.errors`,e),r.return(!1))}var Wo={keyword:new Ae.Name("keyword"),schemaPath:new Ae.Name("schemaPath"),params:new Ae.Name("params"),propertyName:new Ae.Name("propertyName"),message:new Ae.Name("message"),schema:new Ae.Name("schema"),parentSchema:new Ae.Name("parentSchema")};function XA(t,e,r){let{createErrors:n}=t.it;return n===!1?(0,Ae._)`{}`:yee(t,e,r)}function yee(t,e,r={}){let{gen:n,it:s}=t,i=[_ee(s,r),vee(t,r)];return wee(t,e,i),n.object(...i)}function _ee({errorPath:t},{instancePath:e}){let r=e?(0,Ae.str)`${t}${(0,Zp.getErrorPath)(e,Zp.Type.Str)}`:t;return[br.default.instancePath,(0,Ae.strConcat)(br.default.instancePath,r)]}function vee({keyword:t,it:{errSchemaPath:e}},{schemaPath:r,parentSchema:n}){let s=n?e:(0,Ae.str)`${e}/${t}`;return r&&(s=(0,Ae.str)`${s}${(0,Zp.getErrorPath)(r,Zp.Type.Str)}`),[Wo.schemaPath,s]}function wee(t,{params:e,message:r},n){let{keyword:s,data:i,schemaValue:o,it:a}=t,{opts:c,propertyName:l,topSchemaRef:u,schemaPath:d}=a;n.push([Wo.keyword,s],[Wo.params,typeof e=="function"?e(t):e||(0,Ae._)`{}`]),c.messages&&n.push([Wo.message,typeof r=="function"?r(t):r]),c.verbose&&n.push([Wo.schema,o],[Wo.parentSchema,(0,Ae._)`${u}${d}`],[br.default.data,i]),l&&n.push([Wo.propertyName,l])}});var ZA=E(vc=>{"use strict";Object.defineProperty(vc,"__esModule",{value:!0});vc.boolOrEmptySchema=vc.topBoolOrEmptySchema=void 0;var bee=qu(),Eee=we(),See=Qs(),Tee={message:"boolean schema is false"};function Ree(t){let{gen:e,schema:r,validateName:n}=t;r===!1?QA(t,!1):typeof r=="object"&&r.$async===!0?e.return(See.default.data):(e.assign((0,Eee._)`${n}.errors`,null),e.return(!0))}vc.topBoolOrEmptySchema=Ree;function $ee(t,e){let{gen:r,schema:n}=t;n===!1?(r.var(e,!1),QA(t)):r.var(e,!0)}vc.boolOrEmptySchema=$ee;function QA(t,e){let{gen:r,data:n}=t,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,bee.reportError)(s,Tee,void 0,e)}});var Kw=E(wc=>{"use strict";Object.defineProperty(wc,"__esModule",{value:!0});wc.getRules=wc.isJSONType=void 0;var Oee=["string","number","integer","boolean","null","object","array"],Pee=new Set(Oee);function xee(t){return typeof t=="string"&&Pee.has(t)}wc.isJSONType=xee;function Nee(){let t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}wc.getRules=Nee});var Jw=E(ji=>{"use strict";Object.defineProperty(ji,"__esModule",{value:!0});ji.shouldUseRule=ji.shouldUseGroup=ji.schemaHasRulesForType=void 0;function Cee({schema:t,self:e},r){let n=e.RULES.types[r];return n&&n!==!0&&ek(t,n)}ji.schemaHasRulesForType=Cee;function ek(t,e){return e.rules.some(r=>tk(t,r))}ji.shouldUseGroup=ek;function tk(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(n=>t[n]!==void 0))}ji.shouldUseRule=tk});var Lu=E(sr=>{"use strict";Object.defineProperty(sr,"__esModule",{value:!0});sr.reportTypeError=sr.checkDataTypes=sr.checkDataType=sr.coerceAndCheckDataType=sr.getJSONTypes=sr.getSchemaTypes=sr.DataType=void 0;var Iee=Kw(),Aee=Jw(),kee=qu(),fe=we(),rk=je(),bc;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(bc||(sr.DataType=bc={}));function Dee(t){let e=nk(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}sr.getSchemaTypes=Dee;function nk(t){let e=Array.isArray(t)?t:t?[t]:[];if(e.every(Iee.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}sr.getJSONTypes=nk;function Mee(t,e){let{gen:r,data:n,opts:s}=t,i=jee(e,s.coerceTypes),o=e.length>0&&!(i.length===0&&e.length===1&&(0,Aee.schemaHasRulesForType)(t,e[0]));if(o){let a=Xw(e,n,s.strictNumbers,bc.Wrong);r.if(a,()=>{i.length?qee(t,e,i):Qw(t)})}return o}sr.coerceAndCheckDataType=Mee;var sk=new Set(["string","number","integer","boolean","null"]);function jee(t,e){return e?t.filter(r=>sk.has(r)||e==="array"&&r==="array"):[]}function qee(t,e,r){let{gen:n,data:s,opts:i}=t,o=n.let("dataType",(0,fe._)`typeof ${s}`),a=n.let("coerced",(0,fe._)`undefined`);i.coerceTypes==="array"&&n.if((0,fe._)`${o} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>n.assign(s,(0,fe._)`${s}[0]`).assign(o,(0,fe._)`typeof ${s}`).if(Xw(e,s,i.strictNumbers),()=>n.assign(a,s))),n.if((0,fe._)`${a} !== undefined`);for(let l of r)(sk.has(l)||l==="array"&&i.coerceTypes==="array")&&c(l);n.else(),Qw(t),n.endIf(),n.if((0,fe._)`${a} !== undefined`,()=>{n.assign(s,a),Lee(t,a)});function c(l){switch(l){case"string":n.elseIf((0,fe._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,fe._)`"" + ${s}`).elseIf((0,fe._)`${s} === null`).assign(a,(0,fe._)`""`);return;case"number":n.elseIf((0,fe._)`${o} == "boolean" || ${s} === null
              || (${o} == "string" && ${s} && ${s} == +${s})`).assign(a,(0,fe._)`+${s}`);return;case"integer":n.elseIf((0,fe._)`${o} === "boolean" || ${s} === null
              || (${o} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(a,(0,fe._)`+${s}`);return;case"boolean":n.elseIf((0,fe._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(a,!1).elseIf((0,fe._)`${s} === "true" || ${s} === 1`).assign(a,!0);return;case"null":n.elseIf((0,fe._)`${s} === "" || ${s} === 0 || ${s} === false`),n.assign(a,null);return;case"array":n.elseIf((0,fe._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${s} === null`).assign(a,(0,fe._)`[${s}]`)}}}function Lee({gen:t,parentData:e,parentDataProperty:r},n){t.if((0,fe._)`${e} !== undefined`,()=>t.assign((0,fe._)`${e}[${r}]`,n))}function Yw(t,e,r,n=bc.Correct){let s=n===bc.Correct?fe.operators.EQ:fe.operators.NEQ,i;switch(t){case"null":return(0,fe._)`${e} ${s} null`;case"array":i=(0,fe._)`Array.isArray(${e})`;break;case"object":i=(0,fe._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":i=o((0,fe._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":i=o();break;default:return(0,fe._)`typeof ${e} ${s} ${t}`}return n===bc.Correct?i:(0,fe.not)(i);function o(a=fe.nil){return(0,fe.and)((0,fe._)`typeof ${e} == "number"`,a,r?(0,fe._)`isFinite(${e})`:fe.nil)}}sr.checkDataType=Yw;function Xw(t,e,r,n){if(t.length===1)return Yw(t[0],e,r,n);let s,i=(0,rk.toHash)(t);if(i.array&&i.object){let o=(0,fe._)`typeof ${e} != "object"`;s=i.null?o:(0,fe._)`!${e} || ${o}`,delete i.null,delete i.array,delete i.object}else s=fe.nil;i.number&&delete i.integer;for(let o in i)s=(0,fe.and)(s,Yw(o,e,r,n));return s}sr.checkDataTypes=Xw;var Fee={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,fe._)`{type: ${t}}`:(0,fe._)`{type: ${e}}`};function Qw(t){let e=Uee(t);(0,kee.reportError)(e,Fee)}sr.reportTypeError=Qw;function Uee(t){let{gen:e,data:r,schema:n}=t,s=(0,rk.schemaRefOrVal)(t,n,"type");return{gen:e,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:t}}});var ok=E(em=>{"use strict";Object.defineProperty(em,"__esModule",{value:!0});em.assignDefaults=void 0;var Ec=we(),Bee=je();function Vee(t,e){let{properties:r,items:n}=t.schema;if(e==="object"&&r)for(let s in r)ik(t,s,r[s].default);else e==="array"&&Array.isArray(n)&&n.forEach((s,i)=>ik(t,i,s.default))}em.assignDefaults=Vee;function ik(t,e,r){let{gen:n,compositeRule:s,data:i,opts:o}=t;if(r===void 0)return;let a=(0,Ec._)`${i}${(0,Ec.getProperty)(e)}`;if(s){(0,Bee.checkStrictMode)(t,`default is ignored for: ${a}`);return}let c=(0,Ec._)`${a} === undefined`;o.useDefaults==="empty"&&(c=(0,Ec._)`${c} || ${a} === null || ${a} === ""`),n.if(c,(0,Ec._)`${a} = ${(0,Ec.stringify)(r)}`)}});var dn=E(ze=>{"use strict";Object.defineProperty(ze,"__esModule",{value:!0});ze.validateUnion=ze.validateArray=ze.usePattern=ze.callValidateCode=ze.schemaProperties=ze.allSchemaProperties=ze.noPropertyInData=ze.propertyInData=ze.isOwnProperty=ze.hasPropFunc=ze.reportMissingProp=ze.checkMissingProp=ze.checkReportMissingProp=void 0;var et=we(),Zw=je(),qi=Qs(),zee=je();function Hee(t,e){let{gen:r,data:n,it:s}=t;r.if(tb(r,n,e,s.opts.ownProperties),()=>{t.setParams({missingProperty:(0,et._)`${e}`},!0),t.error()})}ze.checkReportMissingProp=Hee;function Gee({gen:t,data:e,it:{opts:r}},n,s){return(0,et.or)(...n.map(i=>(0,et.and)(tb(t,e,i,r.ownProperties),(0,et._)`${s} = ${i}`)))}ze.checkMissingProp=Gee;function Wee(t,e){t.setParams({missingProperty:e},!0),t.error()}ze.reportMissingProp=Wee;function ak(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,et._)`Object.prototype.hasOwnProperty`})}ze.hasPropFunc=ak;function eb(t,e,r){return(0,et._)`${ak(t)}.call(${e}, ${r})`}ze.isOwnProperty=eb;function Kee(t,e,r,n){let s=(0,et._)`${e}${(0,et.getProperty)(r)} !== undefined`;return n?(0,et._)`${s} && ${eb(t,e,r)}`:s}ze.propertyInData=Kee;function tb(t,e,r,n){let s=(0,et._)`${e}${(0,et.getProperty)(r)} === undefined`;return n?(0,et.or)(s,(0,et.not)(eb(t,e,r))):s}ze.noPropertyInData=tb;function ck(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}ze.allSchemaProperties=ck;function Jee(t,e){return ck(e).filter(r=>!(0,Zw.alwaysValidSchema)(t,e[r]))}ze.schemaProperties=Jee;function Yee({schemaCode:t,data:e,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:i},it:o},a,c,l){let u=l?(0,et._)`${t}, ${e}, ${n}${s}`:e,d=[[qi.default.instancePath,(0,et.strConcat)(qi.default.instancePath,i)],[qi.default.parentData,o.parentData],[qi.default.parentDataProperty,o.parentDataProperty],[qi.default.rootData,qi.default.rootData]];o.opts.dynamicRef&&d.push([qi.default.dynamicAnchors,qi.default.dynamicAnchors]);let p=(0,et._)`${u}, ${r.object(...d)}`;return c!==et.nil?(0,et._)`${a}.call(${c}, ${p})`:(0,et._)`${a}(${p})`}ze.callValidateCode=Yee;var Xee=(0,et._)`new RegExp`;function Qee({gen:t,it:{opts:e}},r){let n=e.unicodeRegExp?"u":"",{regExp:s}=e.code,i=s(r,n);return t.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,et._)`${s.code==="new RegExp"?Xee:(0,zee.useFunc)(t,s)}(${r}, ${n})`})}ze.usePattern=Qee;function Zee(t){let{gen:e,data:r,keyword:n,it:s}=t,i=e.name("valid");if(s.allErrors){let a=e.let("valid",!0);return o(()=>e.assign(a,!1)),a}return e.var(i,!0),o(()=>e.break()),i;function o(a){let c=e.const("len",(0,et._)`${r}.length`);e.forRange("i",0,c,l=>{t.subschema({keyword:n,dataProp:l,dataPropType:Zw.Type.Num},i),e.if((0,et.not)(i),a)})}}ze.validateArray=Zee;function ete(t){let{gen:e,schema:r,keyword:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(c=>(0,Zw.alwaysValidSchema)(s,c))&&!s.opts.unevaluated)return;let o=e.let("valid",!1),a=e.name("_valid");e.block(()=>r.forEach((c,l)=>{let u=t.subschema({keyword:n,schemaProp:l,compositeRule:!0},a);e.assign(o,(0,et._)`${o} || ${a}`),t.mergeValidEvaluated(u,a)||e.if((0,et.not)(o))})),t.result(o,()=>t.reset(),()=>t.error(!0))}ze.validateUnion=ete});var fk=E(_s=>{"use strict";Object.defineProperty(_s,"__esModule",{value:!0});_s.validateKeywordUsage=_s.validSchemaType=_s.funcKeywordCode=_s.macroKeywordCode=void 0;var Er=we(),Ko=Qs(),tte=dn(),rte=qu();function nte(t,e){let{gen:r,keyword:n,schema:s,parentSchema:i,it:o}=t,a=e.macro.call(o.self,s,i,o),c=uk(r,n,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);let l=r.name("valid");t.subschema({schema:a,schemaPath:Er.nil,errSchemaPath:`${o.errSchemaPath}/${n}`,topSchemaRef:c,compositeRule:!0},l),t.pass(l,()=>t.error(!0))}_s.macroKeywordCode=nte;function ste(t,e){var r;let{gen:n,keyword:s,schema:i,parentSchema:o,$data:a,it:c}=t;ote(c,e);let l=!a&&e.compile?e.compile.call(c.self,i,o,c):e.validate,u=uk(n,s,l),d=n.let("valid");t.block$data(d,p),t.ok((r=e.valid)!==null&&r!==void 0?r:d);function p(){if(e.errors===!1)m(),e.modifying&&lk(t),y(()=>t.error());else{let g=e.async?f():h();e.modifying&&lk(t),y(()=>ite(t,g))}}function f(){let g=n.let("ruleErrs",null);return n.try(()=>m((0,Er._)`await `),w=>n.assign(d,!1).if((0,Er._)`${w} instanceof ${c.ValidationError}`,()=>n.assign(g,(0,Er._)`${w}.errors`),()=>n.throw(w))),g}function h(){let g=(0,Er._)`${u}.errors`;return n.assign(g,null),m(Er.nil),g}function m(g=e.async?(0,Er._)`await `:Er.nil){let w=c.opts.passContext?Ko.default.this:Ko.default.self,_=!("compile"in e&&!a||e.schema===!1);n.assign(d,(0,Er._)`${g}${(0,tte.callValidateCode)(t,u,w,_)}`,e.modifying)}function y(g){var w;n.if((0,Er.not)((w=e.valid)!==null&&w!==void 0?w:d),g)}}_s.funcKeywordCode=ste;function lk(t){let{gen:e,data:r,it:n}=t;e.if(n.parentData,()=>e.assign(r,(0,Er._)`${n.parentData}[${n.parentDataProperty}]`))}function ite(t,e){let{gen:r}=t;r.if((0,Er._)`Array.isArray(${e})`,()=>{r.assign(Ko.default.vErrors,(0,Er._)`${Ko.default.vErrors} === null ? ${e} : ${Ko.default.vErrors}.concat(${e})`).assign(Ko.default.errors,(0,Er._)`${Ko.default.vErrors}.length`),(0,rte.extendErrors)(t)},()=>t.error())}function ote({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function uk(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,Er.stringify)(r)})}function ate(t,e,r=!1){return!e.length||e.some(n=>n==="array"?Array.isArray(t):n==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==n||r&&typeof t>"u")}_s.validSchemaType=ate;function cte({schema:t,opts:e,self:r,errSchemaPath:n},s,i){if(Array.isArray(s.keyword)?!s.keyword.includes(i):s.keyword!==i)throw new Error("ajv implementation error");let o=s.dependencies;if(o?.some(a=>!Object.prototype.hasOwnProperty.call(t,a)))throw new Error(`parent schema must have dependencies of ${i}: ${o.join(",")}`);if(s.validateSchema&&!s.validateSchema(t[i])){let c=`keyword "${i}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(c);else throw new Error(c)}}_s.validateKeywordUsage=cte});var hk=E(Li=>{"use strict";Object.defineProperty(Li,"__esModule",{value:!0});Li.extendSubschemaMode=Li.extendSubschemaData=Li.getSubschema=void 0;var vs=we(),dk=je();function lte(t,{keyword:e,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:i,topSchemaRef:o}){if(e!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){let a=t.schema[e];return r===void 0?{schema:a,schemaPath:(0,vs._)`${t.schemaPath}${(0,vs.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:a[r],schemaPath:(0,vs._)`${t.schemaPath}${(0,vs.getProperty)(e)}${(0,vs.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,dk.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||i===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:o,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}Li.getSubschema=lte;function ute(t,e,{dataProp:r,dataPropType:n,data:s,dataTypes:i,propertyName:o}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:a}=e;if(r!==void 0){let{errorPath:l,dataPathArr:u,opts:d}=e,p=a.let("data",(0,vs._)`${e.data}${(0,vs.getProperty)(r)}`,!0);c(p),t.errorPath=(0,vs.str)`${l}${(0,dk.getErrorPath)(r,n,d.jsPropertySyntax)}`,t.parentDataProperty=(0,vs._)`${r}`,t.dataPathArr=[...u,t.parentDataProperty]}if(s!==void 0){let l=s instanceof vs.Name?s:a.let("data",s,!0);c(l),o!==void 0&&(t.propertyName=o)}i&&(t.dataTypes=i);function c(l){t.data=l,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,l]}}Li.extendSubschemaData=ute;function fte(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:i}){n!==void 0&&(t.compositeRule=n),s!==void 0&&(t.createErrors=s),i!==void 0&&(t.allErrors=i),t.jtdDiscriminator=e,t.jtdMetadata=r}Li.extendSubschemaMode=fte});var Zs=E((tIe,pk)=>{"use strict";pk.exports=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,s,i;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!t(e[s],r[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[s]))return!1;for(s=n;s--!==0;){var o=i[s];if(!t(e[o],r[o]))return!1}return!0}return e!==e&&r!==r}});var gk=E((rIe,mk)=>{"use strict";var Fi=mk.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};tm(e,n,s,t,"",t)};Fi.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Fi.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Fi.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Fi.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function tm(t,e,r,n,s,i,o,a,c,l){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,s,i,o,a,c,l);for(var u in n){var d=n[u];if(Array.isArray(d)){if(u in Fi.arrayKeywords)for(var p=0;p<d.length;p++)tm(t,e,r,d[p],s+"/"+u+"/"+p,i,s,u,n,p)}else if(u in Fi.propsKeywords){if(d&&typeof d=="object")for(var f in d)tm(t,e,r,d[f],s+"/"+u+"/"+dte(f),i,s,u,n,f)}else(u in Fi.keywords||t.allKeys&&!(u in Fi.skipKeywords))&&tm(t,e,r,d,s+"/"+u,i,s,u,n)}r(n,s,i,o,a,c,l)}}function dte(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}});var Fu=E(Fr=>{"use strict";Object.defineProperty(Fr,"__esModule",{value:!0});Fr.getSchemaRefs=Fr.resolveUrl=Fr.normalizeId=Fr._getFullPath=Fr.getFullPath=Fr.inlineRef=void 0;var hte=je(),pte=Zs(),mte=gk(),gte=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function yte(t,e=!0){return typeof t=="boolean"?!0:e===!0?!rb(t):e?yk(t)<=e:!1}Fr.inlineRef=yte;var _te=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function rb(t){for(let e in t){if(_te.has(e))return!0;let r=t[e];if(Array.isArray(r)&&r.some(rb)||typeof r=="object"&&rb(r))return!0}return!1}function yk(t){let e=0;for(let r in t){if(r==="$ref")return 1/0;if(e++,!gte.has(r)&&(typeof t[r]=="object"&&(0,hte.eachItem)(t[r],n=>e+=yk(n)),e===1/0))return 1/0}return e}function _k(t,e="",r){r!==!1&&(e=Sc(e));let n=t.parse(e);return vk(t,n)}Fr.getFullPath=_k;function vk(t,e){return t.serialize(e).split("#")[0]+"#"}Fr._getFullPath=vk;var vte=/#\/?$/;function Sc(t){return t?t.replace(vte,""):""}Fr.normalizeId=Sc;function wte(t,e,r){return r=Sc(r),t.resolve(e,r)}Fr.resolveUrl=wte;var bte=/^[a-z_][-a-z0-9._]*$/i;function Ete(t,e){if(typeof t=="boolean")return{};let{schemaId:r,uriResolver:n}=this.opts,s=Sc(t[r]||e),i={"":s},o=_k(n,s,!1),a={},c=new Set;return mte(t,{allKeys:!0},(d,p,f,h)=>{if(h===void 0)return;let m=o+p,y=i[h];typeof d[r]=="string"&&(y=g.call(this,d[r])),w.call(this,d.$anchor),w.call(this,d.$dynamicAnchor),i[p]=y;function g(_){let v=this.opts.uriResolver.resolve;if(_=Sc(y?v(y,_):_),c.has(_))throw u(_);c.add(_);let S=this.refs[_];return typeof S=="string"&&(S=this.refs[S]),typeof S=="object"?l(d,S.schema,_):_!==Sc(m)&&(_[0]==="#"?(l(d,a[_],_),a[_]=d):this.refs[_]=m),_}function w(_){if(typeof _=="string"){if(!bte.test(_))throw new Error(`invalid anchor "${_}"`);g.call(this,`#${_}`)}}}),a;function l(d,p,f){if(p!==void 0&&!pte(d,p))throw u(f)}function u(d){return new Error(`reference "${d}" resolves to more than one schema`)}}Fr.getSchemaRefs=Ete});var Vu=E(Ui=>{"use strict";Object.defineProperty(Ui,"__esModule",{value:!0});Ui.getData=Ui.KeywordCxt=Ui.validateFunctionCode=void 0;var Tk=ZA(),wk=Lu(),sb=Jw(),rm=Lu(),Ste=ok(),Bu=fk(),nb=hk(),X=we(),se=Qs(),Tte=Fu(),ei=je(),Uu=qu();function Rte(t){if(Ok(t)&&(Pk(t),$k(t))){Pte(t);return}Rk(t,()=>(0,Tk.topBoolOrEmptySchema)(t))}Ui.validateFunctionCode=Rte;function Rk({gen:t,validateName:e,schema:r,schemaEnv:n,opts:s},i){s.code.es5?t.func(e,(0,X._)`${se.default.data}, ${se.default.valCxt}`,n.$async,()=>{t.code((0,X._)`"use strict"; ${bk(r,s)}`),Ote(t,s),t.code(i)}):t.func(e,(0,X._)`${se.default.data}, ${$te(s)}`,n.$async,()=>t.code(bk(r,s)).code(i))}function $te(t){return(0,X._)`{${se.default.instancePath}="", ${se.default.parentData}, ${se.default.parentDataProperty}, ${se.default.rootData}=${se.default.data}${t.dynamicRef?(0,X._)`, ${se.default.dynamicAnchors}={}`:X.nil}}={}`}function Ote(t,e){t.if(se.default.valCxt,()=>{t.var(se.default.instancePath,(0,X._)`${se.default.valCxt}.${se.default.instancePath}`),t.var(se.default.parentData,(0,X._)`${se.default.valCxt}.${se.default.parentData}`),t.var(se.default.parentDataProperty,(0,X._)`${se.default.valCxt}.${se.default.parentDataProperty}`),t.var(se.default.rootData,(0,X._)`${se.default.valCxt}.${se.default.rootData}`),e.dynamicRef&&t.var(se.default.dynamicAnchors,(0,X._)`${se.default.valCxt}.${se.default.dynamicAnchors}`)},()=>{t.var(se.default.instancePath,(0,X._)`""`),t.var(se.default.parentData,(0,X._)`undefined`),t.var(se.default.parentDataProperty,(0,X._)`undefined`),t.var(se.default.rootData,se.default.data),e.dynamicRef&&t.var(se.default.dynamicAnchors,(0,X._)`{}`)})}function Pte(t){let{schema:e,opts:r,gen:n}=t;Rk(t,()=>{r.$comment&&e.$comment&&Nk(t),Ate(t),n.let(se.default.vErrors,null),n.let(se.default.errors,0),r.unevaluated&&xte(t),xk(t),Mte(t)})}function xte(t){let{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,X._)`${r}.evaluated`),e.if((0,X._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,X._)`${t.evaluated}.props`,(0,X._)`undefined`)),e.if((0,X._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,X._)`${t.evaluated}.items`,(0,X._)`undefined`))}function bk(t,e){let r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,X._)`/*# sourceURL=${r} */`:X.nil}function Nte(t,e){if(Ok(t)&&(Pk(t),$k(t))){Cte(t,e);return}(0,Tk.boolOrEmptySchema)(t,e)}function $k({schema:t,self:e}){if(typeof t=="boolean")return!t;for(let r in t)if(e.RULES.all[r])return!0;return!1}function Ok(t){return typeof t.schema!="boolean"}function Cte(t,e){let{schema:r,gen:n,opts:s}=t;s.$comment&&r.$comment&&Nk(t),kte(t),Dte(t);let i=n.const("_errs",se.default.errors);xk(t,i),n.var(e,(0,X._)`${i} === ${se.default.errors}`)}function Pk(t){(0,ei.checkUnknownRules)(t),Ite(t)}function xk(t,e){if(t.opts.jtd)return Ek(t,[],!1,e);let r=(0,wk.getSchemaTypes)(t.schema),n=(0,wk.coerceAndCheckDataType)(t,r);Ek(t,r,!n,e)}function Ite(t){let{schema:e,errSchemaPath:r,opts:n,self:s}=t;e.$ref&&n.ignoreKeywordsWithRef&&(0,ei.schemaHasRulesButRef)(e,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function Ate(t){let{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,ei.checkStrictMode)(t,"default is ignored in the schema root")}function kte(t){let e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,Tte.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function Dte(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function Nk({gen:t,schemaEnv:e,schema:r,errSchemaPath:n,opts:s}){let i=r.$comment;if(s.$comment===!0)t.code((0,X._)`${se.default.self}.logger.log(${i})`);else if(typeof s.$comment=="function"){let o=(0,X.str)`${n}/$comment`,a=t.scopeValue("root",{ref:e.root});t.code((0,X._)`${se.default.self}.opts.$comment(${i}, ${o}, ${a}.schema)`)}}function Mte(t){let{gen:e,schemaEnv:r,validateName:n,ValidationError:s,opts:i}=t;r.$async?e.if((0,X._)`${se.default.errors} === 0`,()=>e.return(se.default.data),()=>e.throw((0,X._)`new ${s}(${se.default.vErrors})`)):(e.assign((0,X._)`${n}.errors`,se.default.vErrors),i.unevaluated&&jte(t),e.return((0,X._)`${se.default.errors} === 0`))}function jte({gen:t,evaluated:e,props:r,items:n}){r instanceof X.Name&&t.assign((0,X._)`${e}.props`,r),n instanceof X.Name&&t.assign((0,X._)`${e}.items`,n)}function Ek(t,e,r,n){let{gen:s,schema:i,data:o,allErrors:a,opts:c,self:l}=t,{RULES:u}=l;if(i.$ref&&(c.ignoreKeywordsWithRef||!(0,ei.schemaHasRulesButRef)(i,u))){s.block(()=>Ik(t,"$ref",u.all.$ref.definition));return}c.jtd||qte(t,e),s.block(()=>{for(let p of u.rules)d(p);d(u.post)});function d(p){(0,sb.shouldUseGroup)(i,p)&&(p.type?(s.if((0,rm.checkDataType)(p.type,o,c.strictNumbers)),Sk(t,p),e.length===1&&e[0]===p.type&&r&&(s.else(),(0,rm.reportTypeError)(t)),s.endIf()):Sk(t,p),a||s.if((0,X._)`${se.default.errors} === ${n||0}`))}}function Sk(t,e){let{gen:r,schema:n,opts:{useDefaults:s}}=t;s&&(0,Ste.assignDefaults)(t,e.type),r.block(()=>{for(let i of e.rules)(0,sb.shouldUseRule)(n,i)&&Ik(t,i.keyword,i.definition,e.type)})}function qte(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(Lte(t,e),t.opts.allowUnionTypes||Fte(t,e),Ute(t,t.dataTypes))}function Lte(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{Ck(t.dataTypes,r)||ib(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),Vte(t,e)}}function Fte(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&ib(t,"use allowUnionTypes to allow union type keyword")}function Ute(t,e){let r=t.self.RULES.all;for(let n in r){let s=r[n];if(typeof s=="object"&&(0,sb.shouldUseRule)(t.schema,s)){let{type:i}=s.definition;i.length&&!i.some(o=>Bte(e,o))&&ib(t,`missing type "${i.join(",")}" for keyword "${n}"`)}}}function Bte(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function Ck(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function Vte(t,e){let r=[];for(let n of t.dataTypes)Ck(e,n)?r.push(n):e.includes("integer")&&n==="number"&&r.push("integer");t.dataTypes=r}function ib(t,e){let r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,ei.checkStrictMode)(t,e,t.opts.strictTypes)}var nm=class{constructor(e,r,n){if((0,Bu.validateKeywordUsage)(e,r,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,ei.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",Ak(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,Bu.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",se.default.errors))}result(e,r,n){this.failResult((0,X.not)(e),r,n)}failResult(e,r,n){this.gen.if(e),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,X.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:r}=this;this.fail((0,X._)`${r} !== undefined && (${(0,X.or)(this.invalid$data(),e)})`)}error(e,r,n){if(r){this.setParams(r),this._error(e,n),this.setParams({});return}this._error(e,n)}_error(e,r){(e?Uu.reportExtraError:Uu.reportError)(this,this.def.error,r)}$dataError(){(0,Uu.reportError)(this,this.def.$dataError||Uu.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,Uu.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,n=X.nil){this.gen.block(()=>{this.check$data(e,n),r()})}check$data(e=X.nil,r=X.nil){if(!this.$data)return;let{gen:n,schemaCode:s,schemaType:i,def:o}=this;n.if((0,X.or)((0,X._)`${s} === undefined`,r)),e!==X.nil&&n.assign(e,!0),(i.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==X.nil&&n.assign(e,!1)),n.else()}invalid$data(){let{gen:e,schemaCode:r,schemaType:n,def:s,it:i}=this;return(0,X.or)(o(),a());function o(){if(n.length){if(!(r instanceof X.Name))throw new Error("ajv implementation error");let c=Array.isArray(n)?n:[n];return(0,X._)`${(0,rm.checkDataTypes)(c,r,i.opts.strictNumbers,rm.DataType.Wrong)}`}return X.nil}function a(){if(s.validateSchema){let c=e.scopeValue("validate$data",{ref:s.validateSchema});return(0,X._)`!${c}(${r})`}return X.nil}}subschema(e,r){let n=(0,nb.getSubschema)(this.it,e);(0,nb.extendSubschemaData)(n,this.it,e),(0,nb.extendSubschemaMode)(n,e);let s={...this.it,...n,items:void 0,props:void 0};return Nte(s,r),s}mergeEvaluated(e,r){let{it:n,gen:s}=this;n.opts.unevaluated&&(n.props!==!0&&e.props!==void 0&&(n.props=ei.mergeEvaluated.props(s,e.props,n.props,r)),n.items!==!0&&e.items!==void 0&&(n.items=ei.mergeEvaluated.items(s,e.items,n.items,r)))}mergeValidEvaluated(e,r){let{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(e,X.Name)),!0}};Ui.KeywordCxt=nm;function Ik(t,e,r,n){let s=new nm(t,r,e);"code"in r?r.code(s,n):s.$data&&r.validate?(0,Bu.funcKeywordCode)(s,r):"macro"in r?(0,Bu.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,Bu.funcKeywordCode)(s,r)}var zte=/^\/(?:[^~]|~0|~1)*$/,Hte=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Ak(t,{dataLevel:e,dataNames:r,dataPathArr:n}){let s,i;if(t==="")return se.default.rootData;if(t[0]==="/"){if(!zte.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);s=t,i=se.default.rootData}else{let l=Hte.exec(t);if(!l)throw new Error(`Invalid JSON-pointer: ${t}`);let u=+l[1];if(s=l[2],s==="#"){if(u>=e)throw new Error(c("property/index",u));return n[e-u]}if(u>e)throw new Error(c("data",u));if(i=r[e-u],!s)return i}let o=i,a=s.split("/");for(let l of a)l&&(i=(0,X._)`${i}${(0,X.getProperty)((0,ei.unescapeJsonPointer)(l))}`,o=(0,X._)`${o} && ${i}`);return o;function c(l,u){return`Cannot access ${l} ${u} levels up, current level is ${e}`}}Ui.getData=Ak});var sm=E(ab=>{"use strict";Object.defineProperty(ab,"__esModule",{value:!0});var ob=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};ab.default=ob});var zu=E(ub=>{"use strict";Object.defineProperty(ub,"__esModule",{value:!0});var cb=Fu(),lb=class extends Error{constructor(e,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,cb.resolveUrl)(e,r,n),this.missingSchema=(0,cb.normalizeId)((0,cb.getFullPath)(e,this.missingRef))}};ub.default=lb});var om=E(hn=>{"use strict";Object.defineProperty(hn,"__esModule",{value:!0});hn.resolveSchema=hn.getCompilingSchema=hn.resolveRef=hn.compileSchema=hn.SchemaEnv=void 0;var Vn=we(),Gte=sm(),Jo=Qs(),zn=Fu(),kk=je(),Wte=Vu(),Tc=class{constructor(e){var r;this.refs={},this.dynamicAnchors={};let n;typeof e.schema=="object"&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,zn.normalizeId)(n?.[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=n?.$async,this.refs={}}};hn.SchemaEnv=Tc;function db(t){let e=Dk.call(this,t);if(e)return e;let r=(0,zn.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new Vn.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i}),a;t.$async&&(a=o.scopeValue("Error",{ref:Gte.default,code:(0,Vn._)`require("ajv/dist/runtime/validation_error").default`}));let c=o.scopeName("validate");t.validateName=c;let l={gen:o,allErrors:this.opts.allErrors,data:Jo.default.data,parentData:Jo.default.parentData,parentDataProperty:Jo.default.parentDataProperty,dataNames:[Jo.default.data],dataPathArr:[Vn.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,Vn.stringify)(t.schema)}:{ref:t.schema}),validateName:c,ValidationError:a,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:Vn.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Vn._)`""`,opts:this.opts,self:this},u;try{this._compilations.add(t),(0,Wte.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);let d=o.toString();u=`${o.scopeRefs(Jo.default.scope)}return ${d}`,this.opts.code.process&&(u=this.opts.code.process(u,t));let f=new Function(`${Jo.default.self}`,`${Jo.default.scope}`,u)(this,this.scope.get());if(this.scope.value(c,{ref:f}),f.errors=null,f.schema=t.schema,f.schemaEnv=t,t.$async&&(f.$async=!0),this.opts.code.source===!0&&(f.source={validateName:c,validateCode:d,scopeValues:o._values}),this.opts.unevaluated){let{props:h,items:m}=l;f.evaluated={props:h instanceof Vn.Name?void 0:h,items:m instanceof Vn.Name?void 0:m,dynamicProps:h instanceof Vn.Name,dynamicItems:m instanceof Vn.Name},f.source&&(f.source.evaluated=(0,Vn.stringify)(f.evaluated))}return t.validate=f,t}catch(d){throw delete t.validate,delete t.validateName,u&&this.logger.error("Error compiling schema, function code:",u),d}finally{this._compilations.delete(t)}}hn.compileSchema=db;function Kte(t,e,r){var n;r=(0,zn.resolveUrl)(this.opts.uriResolver,e,r);let s=t.refs[r];if(s)return s;let i=Xte.call(this,t,r);if(i===void 0){let o=(n=t.localRefs)===null||n===void 0?void 0:n[r],{schemaId:a}=this.opts;o&&(i=new Tc({schema:o,schemaId:a,root:t,baseId:e}))}if(i!==void 0)return t.refs[r]=Jte.call(this,i)}hn.resolveRef=Kte;function Jte(t){return(0,zn.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:db.call(this,t)}function Dk(t){for(let e of this._compilations)if(Yte(e,t))return e}hn.getCompilingSchema=Dk;function Yte(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function Xte(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||im.call(this,t,e)}function im(t,e){let r=this.opts.uriResolver.parse(e),n=(0,zn._getFullPath)(this.opts.uriResolver,r),s=(0,zn.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&n===s)return fb.call(this,r,t);let i=(0,zn.normalizeId)(n),o=this.refs[i]||this.schemas[i];if(typeof o=="string"){let a=im.call(this,t,o);return typeof a?.schema!="object"?void 0:fb.call(this,r,a)}if(typeof o?.schema=="object"){if(o.validate||db.call(this,o),i===(0,zn.normalizeId)(e)){let{schema:a}=o,{schemaId:c}=this.opts,l=a[c];return l&&(s=(0,zn.resolveUrl)(this.opts.uriResolver,s,l)),new Tc({schema:a,schemaId:c,root:t,baseId:s})}return fb.call(this,r,o)}}hn.resolveSchema=im;var Qte=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function fb(t,{baseId:e,schema:r,root:n}){var s;if(((s=t.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(let a of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let c=r[(0,kk.unescapeFragment)(a)];if(c===void 0)return;r=c;let l=typeof r=="object"&&r[this.opts.schemaId];!Qte.has(a)&&l&&(e=(0,zn.resolveUrl)(this.opts.uriResolver,e,l))}let i;if(typeof r!="boolean"&&r.$ref&&!(0,kk.schemaHasRulesButRef)(r,this.RULES)){let a=(0,zn.resolveUrl)(this.opts.uriResolver,e,r.$ref);i=im.call(this,n,a)}let{schemaId:o}=this.opts;if(i=i||new Tc({schema:r,schemaId:o,root:n,baseId:e}),i.schema!==i.root.schema)return i}});var Mk=E((cIe,Zte)=>{Zte.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var pb=E((lIe,Fk)=>{"use strict";var ere=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),qk=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function hb(t){let e="",r=0,n=0;for(n=0;n<t.length;n++)if(r=t[n].charCodeAt(0),r!==48){if(!(r>=48&&r<=57||r>=65&&r<=70||r>=97&&r<=102))return"";e+=t[n];break}for(n+=1;n<t.length;n++){if(r=t[n].charCodeAt(0),!(r>=48&&r<=57||r>=65&&r<=70||r>=97&&r<=102))return"";e+=t[n]}return e}var tre=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function jk(t){return t.length=0,!0}function rre(t,e,r){if(t.length){let n=hb(t);if(n!=="")e.push(n);else return r.error=!0,!1;t.length=0}return!0}function nre(t){let e=0,r={error:!1,address:"",zone:""},n=[],s=[],i=!1,o=!1,a=rre;for(let c=0;c<t.length;c++){let l=t[c];if(!(l==="["||l==="]"))if(l===":"){if(i===!0&&(o=!0),!a(s,n,r))break;if(++e>7){r.error=!0;break}c>0&&t[c-1]===":"&&(i=!0),n.push(":");continue}else if(l==="%"){if(!a(s,n,r))break;a=jk}else{s.push(l);continue}}return s.length&&(a===jk?r.zone=s.join(""):o?n.push(s.join("")):n.push(hb(s))),r.address=n.join(""),r}function Lk(t){if(sre(t,":")<2)return{host:t,isIPV6:!1};let e=nre(t);if(e.error)return{host:t,isIPV6:!1};{let r=e.address,n=e.address;return e.zone&&(r+="%"+e.zone,n+="%25"+e.zone),{host:r,isIPV6:!0,escapedHost:n}}}function sre(t,e){let r=0;for(let n=0;n<t.length;n++)t[n]===e&&r++;return r}function ire(t){let e=t,r=[],n=-1,s=0;for(;s=e.length;){if(s===1){if(e===".")break;if(e==="/"){r.push("/");break}else{r.push(e);break}}else if(s===2){if(e[0]==="."){if(e[1]===".")break;if(e[1]==="/"){e=e.slice(2);continue}}else if(e[0]==="/"&&(e[1]==="."||e[1]==="/")){r.push("/");break}}else if(s===3&&e==="/.."){r.length!==0&&r.pop(),r.push("/");break}if(e[0]==="."){if(e[1]==="."){if(e[2]==="/"){e=e.slice(3);continue}}else if(e[1]==="/"){e=e.slice(2);continue}}else if(e[0]==="/"&&e[1]==="."){if(e[2]==="/"){e=e.slice(2);continue}else if(e[2]==="."&&e[3]==="/"){e=e.slice(3),r.length!==0&&r.pop();continue}}if((n=e.indexOf("/",1))===-1){r.push(e);break}else r.push(e.slice(0,n)),e=e.slice(n)}return r.join("")}function ore(t,e){let r=e!==!0?escape:unescape;return t.scheme!==void 0&&(t.scheme=r(t.scheme)),t.userinfo!==void 0&&(t.userinfo=r(t.userinfo)),t.host!==void 0&&(t.host=r(t.host)),t.path!==void 0&&(t.path=r(t.path)),t.query!==void 0&&(t.query=r(t.query)),t.fragment!==void 0&&(t.fragment=r(t.fragment)),t}function are(t){let e=[];if(t.userinfo!==void 0&&(e.push(t.userinfo),e.push("@")),t.host!==void 0){let r=unescape(t.host);if(!qk(r)){let n=Lk(r);n.isIPV6===!0?r=`[${n.escapedHost}]`:r=t.host}e.push(r)}return(typeof t.port=="number"||typeof t.port=="string")&&(e.push(":"),e.push(String(t.port))),e.length?e.join(""):void 0}Fk.exports={nonSimpleDomain:tre,recomposeAuthority:are,normalizeComponentEncoding:ore,removeDotSegments:ire,isIPv4:qk,isUUID:ere,normalizeIPv6:Lk,stringArrayToHexStripped:hb}});var Hk=E((uIe,zk)=>{"use strict";var{isUUID:cre}=pb(),lre=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,ure=["http","https","ws","wss","urn","urn:uuid"];function fre(t){return ure.indexOf(t)!==-1}function mb(t){return t.secure===!0?!0:t.secure===!1?!1:t.scheme?t.scheme.length===3&&(t.scheme[0]==="w"||t.scheme[0]==="W")&&(t.scheme[1]==="s"||t.scheme[1]==="S")&&(t.scheme[2]==="s"||t.scheme[2]==="S"):!1}function Uk(t){return t.host||(t.error=t.error||"HTTP URIs must have a host."),t}function Bk(t){let e=String(t.scheme).toLowerCase()==="https";return(t.port===(e?443:80)||t.port==="")&&(t.port=void 0),t.path||(t.path="/"),t}function dre(t){return t.secure=mb(t),t.resourceName=(t.path||"/")+(t.query?"?"+t.query:""),t.path=void 0,t.query=void 0,t}function hre(t){if((t.port===(mb(t)?443:80)||t.port==="")&&(t.port=void 0),typeof t.secure=="boolean"&&(t.scheme=t.secure?"wss":"ws",t.secure=void 0),t.resourceName){let[e,r]=t.resourceName.split("?");t.path=e&&e!=="/"?e:void 0,t.query=r,t.resourceName=void 0}return t.fragment=void 0,t}function pre(t,e){if(!t.path)return t.error="URN can not be parsed",t;let r=t.path.match(lre);if(r){let n=e.scheme||t.scheme||"urn";t.nid=r[1].toLowerCase(),t.nss=r[2];let s=`${n}:${e.nid||t.nid}`,i=gb(s);t.path=void 0,i&&(t=i.parse(t,e))}else t.error=t.error||"URN can not be parsed.";return t}function mre(t,e){if(t.nid===void 0)throw new Error("URN without nid cannot be serialized");let r=e.scheme||t.scheme||"urn",n=t.nid.toLowerCase(),s=`${r}:${e.nid||n}`,i=gb(s);i&&(t=i.serialize(t,e));let o=t,a=t.nss;return o.path=`${n||e.nid}:${a}`,e.skipEscape=!0,o}function gre(t,e){let r=t;return r.uuid=r.nss,r.nss=void 0,!e.tolerant&&(!r.uuid||!cre(r.uuid))&&(r.error=r.error||"UUID is not valid."),r}function yre(t){let e=t;return e.nss=(t.uuid||"").toLowerCase(),e}var Vk={scheme:"http",domainHost:!0,parse:Uk,serialize:Bk},_re={scheme:"https",domainHost:Vk.domainHost,parse:Uk,serialize:Bk},am={scheme:"ws",domainHost:!0,parse:dre,serialize:hre},vre={scheme:"wss",domainHost:am.domainHost,parse:am.parse,serialize:am.serialize},wre={scheme:"urn",parse:pre,serialize:mre,skipNormalize:!0},bre={scheme:"urn:uuid",parse:gre,serialize:yre,skipNormalize:!0},cm={http:Vk,https:_re,ws:am,wss:vre,urn:wre,"urn:uuid":bre};Object.setPrototypeOf(cm,null);function gb(t){return t&&(cm[t]||cm[t.toLowerCase()])||void 0}zk.exports={wsIsSecure:mb,SCHEMES:cm,isValidSchemeName:fre,getSchemeHandler:gb}});var Rc=E((fIe,um)=>{"use strict";var{normalizeIPv6:Ere,removeDotSegments:Hu,recomposeAuthority:Sre,normalizeComponentEncoding:lm,isIPv4:Tre,nonSimpleDomain:Rre}=pb(),{SCHEMES:$re,getSchemeHandler:Gk}=Hk();function Ore(t,e){return typeof t=="string"?t=ws(ti(t,e),e):typeof t=="object"&&(t=ti(ws(t,e),e)),t}function Pre(t,e,r){let n=r?Object.assign({scheme:"null"},r):{scheme:"null"},s=Wk(ti(t,n),ti(e,n),n,!0);return n.skipEscape=!0,ws(s,n)}function Wk(t,e,r,n){let s={};return n||(t=ti(ws(t,r),r),e=ti(ws(e,r),r)),r=r||{},!r.tolerant&&e.scheme?(s.scheme=e.scheme,s.userinfo=e.userinfo,s.host=e.host,s.port=e.port,s.path=Hu(e.path||""),s.query=e.query):(e.userinfo!==void 0||e.host!==void 0||e.port!==void 0?(s.userinfo=e.userinfo,s.host=e.host,s.port=e.port,s.path=Hu(e.path||""),s.query=e.query):(e.path?(e.path[0]==="/"?s.path=Hu(e.path):((t.userinfo!==void 0||t.host!==void 0||t.port!==void 0)&&!t.path?s.path="/"+e.path:t.path?s.path=t.path.slice(0,t.path.lastIndexOf("/")+1)+e.path:s.path=e.path,s.path=Hu(s.path)),s.query=e.query):(s.path=t.path,e.query!==void 0?s.query=e.query:s.query=t.query),s.userinfo=t.userinfo,s.host=t.host,s.port=t.port),s.scheme=t.scheme),s.fragment=e.fragment,s}function xre(t,e,r){return typeof t=="string"?(t=unescape(t),t=ws(lm(ti(t,r),!0),{...r,skipEscape:!0})):typeof t=="object"&&(t=ws(lm(t,!0),{...r,skipEscape:!0})),typeof e=="string"?(e=unescape(e),e=ws(lm(ti(e,r),!0),{...r,skipEscape:!0})):typeof e=="object"&&(e=ws(lm(e,!0),{...r,skipEscape:!0})),t.toLowerCase()===e.toLowerCase()}function ws(t,e){let r={host:t.host,scheme:t.scheme,userinfo:t.userinfo,port:t.port,path:t.path,query:t.query,nid:t.nid,nss:t.nss,uuid:t.uuid,fragment:t.fragment,reference:t.reference,resourceName:t.resourceName,secure:t.secure,error:""},n=Object.assign({},e),s=[],i=Gk(n.scheme||r.scheme);i&&i.serialize&&i.serialize(r,n),r.path!==void 0&&(n.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),r.scheme!==void 0&&(r.path=r.path.split("%3A").join(":")))),n.reference!=="suffix"&&r.scheme&&s.push(r.scheme,":");let o=Sre(r);if(o!==void 0&&(n.reference!=="suffix"&&s.push("//"),s.push(o),r.path&&r.path[0]!=="/"&&s.push("/")),r.path!==void 0){let a=r.path;!n.absolutePath&&(!i||!i.absolutePath)&&(a=Hu(a)),o===void 0&&a[0]==="/"&&a[1]==="/"&&(a="/%2F"+a.slice(2)),s.push(a)}return r.query!==void 0&&s.push("?",r.query),r.fragment!==void 0&&s.push("#",r.fragment),s.join("")}var Nre=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function ti(t,e){let r=Object.assign({},e),n={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},s=!1;r.reference==="suffix"&&(r.scheme?t=r.scheme+":"+t:t="//"+t);let i=t.match(Nre);if(i){if(n.scheme=i[1],n.userinfo=i[3],n.host=i[4],n.port=parseInt(i[5],10),n.path=i[6]||"",n.query=i[7],n.fragment=i[8],isNaN(n.port)&&(n.port=i[5]),n.host)if(Tre(n.host)===!1){let c=Ere(n.host);n.host=c.host.toLowerCase(),s=c.isIPV6}else s=!0;n.scheme===void 0&&n.userinfo===void 0&&n.host===void 0&&n.port===void 0&&n.query===void 0&&!n.path?n.reference="same-document":n.scheme===void 0?n.reference="relative":n.fragment===void 0?n.reference="absolute":n.reference="uri",r.reference&&r.reference!=="suffix"&&r.reference!==n.reference&&(n.error=n.error||"URI is not a "+r.reference+" reference.");let o=Gk(r.scheme||n.scheme);if(!r.unicodeSupport&&(!o||!o.unicodeSupport)&&n.host&&(r.domainHost||o&&o.domainHost)&&s===!1&&Rre(n.host))try{n.host=URL.domainToASCII(n.host.toLowerCase())}catch(a){n.error=n.error||"Host's domain name can not be converted to ASCII: "+a}(!o||o&&!o.skipNormalize)&&(t.indexOf("%")!==-1&&(n.scheme!==void 0&&(n.scheme=unescape(n.scheme)),n.host!==void 0&&(n.host=unescape(n.host))),n.path&&(n.path=escape(unescape(n.path))),n.fragment&&(n.fragment=encodeURI(decodeURIComponent(n.fragment)))),o&&o.parse&&o.parse(n,r)}else n.error=n.error||"URI can not be parsed.";return n}var yb={SCHEMES:$re,normalize:Ore,resolve:Pre,resolveComponent:Wk,equal:xre,serialize:ws,parse:ti};um.exports=yb;um.exports.default=yb;um.exports.fastUri=yb});var Jk=E(_b=>{"use strict";Object.defineProperty(_b,"__esModule",{value:!0});var Kk=Rc();Kk.code='require("ajv/dist/runtime/uri").default';_b.default=Kk});var nD=E(Ht=>{"use strict";Object.defineProperty(Ht,"__esModule",{value:!0});Ht.CodeGen=Ht.Name=Ht.nil=Ht.stringify=Ht.str=Ht._=Ht.KeywordCxt=void 0;var Cre=Vu();Object.defineProperty(Ht,"KeywordCxt",{enumerable:!0,get:function(){return Cre.KeywordCxt}});var $c=we();Object.defineProperty(Ht,"_",{enumerable:!0,get:function(){return $c._}});Object.defineProperty(Ht,"str",{enumerable:!0,get:function(){return $c.str}});Object.defineProperty(Ht,"stringify",{enumerable:!0,get:function(){return $c.stringify}});Object.defineProperty(Ht,"nil",{enumerable:!0,get:function(){return $c.nil}});Object.defineProperty(Ht,"Name",{enumerable:!0,get:function(){return $c.Name}});Object.defineProperty(Ht,"CodeGen",{enumerable:!0,get:function(){return $c.CodeGen}});var Ire=sm(),eD=zu(),Are=Kw(),Gu=om(),kre=we(),Wu=Fu(),fm=Lu(),wb=je(),Yk=Mk(),Dre=Jk(),tD=(t,e)=>new RegExp(t,e);tD.code="new RegExp";var Mre=["removeAdditional","useDefaults","coerceTypes"],jre=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),qre={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},Lre={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},Xk=200;function Fre(t){var e,r,n,s,i,o,a,c,l,u,d,p,f,h,m,y,g,w,_,v,S,$,T,O,R;let P=t.strict,A=(e=t.code)===null||e===void 0?void 0:e.optimize,N=A===!0||A===void 0?1:A||0,C=(n=(r=t.code)===null||r===void 0?void 0:r.regExp)!==null&&n!==void 0?n:tD,V=(s=t.uriResolver)!==null&&s!==void 0?s:Dre.default;return{strictSchema:(o=(i=t.strictSchema)!==null&&i!==void 0?i:P)!==null&&o!==void 0?o:!0,strictNumbers:(c=(a=t.strictNumbers)!==null&&a!==void 0?a:P)!==null&&c!==void 0?c:!0,strictTypes:(u=(l=t.strictTypes)!==null&&l!==void 0?l:P)!==null&&u!==void 0?u:"log",strictTuples:(p=(d=t.strictTuples)!==null&&d!==void 0?d:P)!==null&&p!==void 0?p:"log",strictRequired:(h=(f=t.strictRequired)!==null&&f!==void 0?f:P)!==null&&h!==void 0?h:!1,code:t.code?{...t.code,optimize:N,regExp:C}:{optimize:N,regExp:C},loopRequired:(m=t.loopRequired)!==null&&m!==void 0?m:Xk,loopEnum:(y=t.loopEnum)!==null&&y!==void 0?y:Xk,meta:(g=t.meta)!==null&&g!==void 0?g:!0,messages:(w=t.messages)!==null&&w!==void 0?w:!0,inlineRefs:(_=t.inlineRefs)!==null&&_!==void 0?_:!0,schemaId:(v=t.schemaId)!==null&&v!==void 0?v:"$id",addUsedSchema:(S=t.addUsedSchema)!==null&&S!==void 0?S:!0,validateSchema:($=t.validateSchema)!==null&&$!==void 0?$:!0,validateFormats:(T=t.validateFormats)!==null&&T!==void 0?T:!0,unicodeRegExp:(O=t.unicodeRegExp)!==null&&O!==void 0?O:!0,int32range:(R=t.int32range)!==null&&R!==void 0?R:!0,uriResolver:V}}var Ku=class{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...Fre(e)};let{es5:r,lines:n}=this.opts.code;this.scope=new kre.ValueScope({scope:{},prefixes:jre,es5:r,lines:n}),this.logger=Gre(e.logger);let s=e.validateFormats;e.validateFormats=!1,this.RULES=(0,Are.getRules)(),Qk.call(this,qre,e,"NOT SUPPORTED"),Qk.call(this,Lre,e,"DEPRECATED","warn"),this._metaOpts=zre.call(this),e.formats&&Bre.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&Vre.call(this,e.keywords),typeof e.meta=="object"&&this.addMetaSchema(e.meta),Ure.call(this),e.validateFormats=s}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:r,schemaId:n}=this.opts,s=Yk;n==="id"&&(s={...Yk},s.id=s.$id,delete s.$id),r&&e&&this.addMetaSchema(s,s[n],!1)}defaultMeta(){let{meta:e,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof e=="object"?e[r]||e:void 0}validate(e,r){let n;if(typeof e=="string"){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);let s=n(r);return"$async"in n||(this.errors=n.errors),s}compile(e,r){let n=this._addSchema(e,r);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:n}=this.opts;return s.call(this,e,r);async function s(u,d){await i.call(this,u.$schema);let p=this._addSchema(u,d);return p.validate||o.call(this,p)}async function i(u){u&&!this.getSchema(u)&&await s.call(this,{$ref:u},!0)}async function o(u){try{return this._compileSchemaEnv(u)}catch(d){if(!(d instanceof eD.default))throw d;return a.call(this,d),await c.call(this,d.missingSchema),o.call(this,u)}}function a({missingSchema:u,missingRef:d}){if(this.refs[u])throw new Error(`AnySchema ${u} is loaded but ${d} cannot be resolved`)}async function c(u){let d=await l.call(this,u);this.refs[u]||await i.call(this,d.$schema),this.refs[u]||this.addSchema(d,u,r)}async function l(u){let d=this._loading[u];if(d)return d;try{return await(this._loading[u]=n(u))}finally{delete this._loading[u]}}}addSchema(e,r,n,s=this.opts.validateSchema){if(Array.isArray(e)){for(let o of e)this.addSchema(o,void 0,n,s);return this}let i;if(typeof e=="object"){let{schemaId:o}=this.opts;if(i=e[o],i!==void 0&&typeof i!="string")throw new Error(`schema ${o} must be string`)}return r=(0,Wu.normalizeId)(r||i),this._checkUnique(r),this.schemas[r]=this._addSchema(e,n,r,s,!0),this}addMetaSchema(e,r,n=this.opts.validateSchema){return this.addSchema(e,r,!0,n),this}validateSchema(e,r){if(typeof e=="boolean")return!0;let n;if(n=e.$schema,n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let s=this.validate(n,e);if(!s&&r){let i="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(i);else throw new Error(i)}return s}getSchema(e){let r;for(;typeof(r=Zk.call(this,e))=="string";)e=r;if(r===void 0){let{schemaId:n}=this.opts,s=new Gu.SchemaEnv({schema:{},schemaId:n});if(r=Gu.resolveSchema.call(this,s,e),!r)return;this.refs[e]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=Zk.call(this,e);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{let r=e;this._cache.delete(r);let n=e[this.opts.schemaId];return n&&(n=(0,Wu.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let r of e)this.addKeyword(r);return this}addKeyword(e,r){let n;if(typeof e=="string")n=e,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=n);else if(typeof e=="object"&&r===void 0){if(r=e,n=r.keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(Kre.call(this,n,r),!r)return(0,wb.eachItem)(n,i=>vb.call(this,i)),this;Yre.call(this,r);let s={...r,type:(0,fm.getJSONTypes)(r.type),schemaType:(0,fm.getJSONTypes)(r.schemaType)};return(0,wb.eachItem)(n,s.type.length===0?i=>vb.call(this,i,s):i=>s.type.forEach(o=>vb.call(this,i,s,o))),this}getKeyword(e){let r=this.RULES.all[e];return typeof r=="object"?r.definition:!!r}removeKeyword(e){let{RULES:r}=this;delete r.keywords[e],delete r.all[e];for(let n of r.rules){let s=n.rules.findIndex(i=>i.keyword===e);s>=0&&n.rules.splice(s,1)}return this}addFormat(e,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[e]=r,this}errorsText(e=this.errors,{separator:r=", ",dataVar:n="data"}={}){return!e||e.length===0?"No errors":e.map(s=>`${n}${s.instancePath} ${s.message}`).reduce((s,i)=>s+r+i)}$dataMetaSchema(e,r){let n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(let s of r){let i=s.split("/").slice(1),o=e;for(let a of i)o=o[a];for(let a in n){let c=n[a];if(typeof c!="object")continue;let{$data:l}=c.definition,u=o[a];l&&u&&(o[a]=rD(u))}}return e}_removeAllSchemas(e,r){for(let n in e){let s=e[n];(!r||r.test(n))&&(typeof s=="string"?delete e[n]:s&&!s.meta&&(this._cache.delete(s.schema),delete e[n]))}}_addSchema(e,r,n,s=this.opts.validateSchema,i=this.opts.addUsedSchema){let o,{schemaId:a}=this.opts;if(typeof e=="object")o=e[a];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof e!="boolean")throw new Error("schema must be object or boolean")}let c=this._cache.get(e);if(c!==void 0)return c;n=(0,Wu.normalizeId)(o||n);let l=Wu.getSchemaRefs.call(this,e,n);return c=new Gu.SchemaEnv({schema:e,schemaId:a,meta:r,baseId:n,localRefs:l}),this._cache.set(c.schema,c),i&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=c),s&&this.validateSchema(e,!0),c}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):Gu.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let r=this.opts;this.opts=this._metaOpts;try{Gu.compileSchema.call(this,e)}finally{this.opts=r}}};Ku.ValidationError=Ire.default;Ku.MissingRefError=eD.default;Ht.default=Ku;function Qk(t,e,r,n="error"){for(let s in t){let i=s;i in e&&this.logger[n](`${r}: option ${s}. ${t[i]}`)}}function Zk(t){return t=(0,Wu.normalizeId)(t),this.schemas[t]||this.refs[t]}function Ure(){let t=this.opts.schemas;if(t)if(Array.isArray(t))this.addSchema(t);else for(let e in t)this.addSchema(t[e],e)}function Bre(){for(let t in this.opts.formats){let e=this.opts.formats[t];e&&this.addFormat(t,e)}}function Vre(t){if(Array.isArray(t)){this.addVocabulary(t);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let e in t){let r=t[e];r.keyword||(r.keyword=e),this.addKeyword(r)}}function zre(){let t={...this.opts};for(let e of Mre)delete t[e];return t}var Hre={log(){},warn(){},error(){}};function Gre(t){if(t===!1)return Hre;if(t===void 0)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}var Wre=/^[a-z_$][a-z0-9_$:-]*$/i;function Kre(t,e){let{RULES:r}=this;if((0,wb.eachItem)(t,n=>{if(r.keywords[n])throw new Error(`Keyword ${n} is already defined`);if(!Wre.test(n))throw new Error(`Keyword ${n} has invalid name`)}),!!e&&e.$data&&!("code"in e||"validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function vb(t,e,r){var n;let s=e?.post;if(r&&s)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:i}=this,o=s?i.post:i.rules.find(({type:c})=>c===r);if(o||(o={type:r,rules:[]},i.rules.push(o)),i.keywords[t]=!0,!e)return;let a={keyword:t,definition:{...e,type:(0,fm.getJSONTypes)(e.type),schemaType:(0,fm.getJSONTypes)(e.schemaType)}};e.before?Jre.call(this,o,a,e.before):o.rules.push(a),i.all[t]=a,(n=e.implements)===null||n===void 0||n.forEach(c=>this.addKeyword(c))}function Jre(t,e,r){let n=t.rules.findIndex(s=>s.keyword===r);n>=0?t.rules.splice(n,0,e):(t.rules.push(e),this.logger.warn(`rule ${r} is not defined`))}function Yre(t){let{metaSchema:e}=t;e!==void 0&&(t.$data&&this.opts.$data&&(e=rD(e)),t.validateSchema=this.compile(e,!0))}var Xre={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function rD(t){return{anyOf:[t,Xre]}}});var sD=E(bb=>{"use strict";Object.defineProperty(bb,"__esModule",{value:!0});var Qre={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};bb.default=Qre});var cD=E(Yo=>{"use strict";Object.defineProperty(Yo,"__esModule",{value:!0});Yo.callRef=Yo.getValidate=void 0;var Zre=zu(),iD=dn(),Ur=we(),Oc=Qs(),oD=om(),dm=je(),ene={keyword:"$ref",schemaType:"string",code(t){let{gen:e,schema:r,it:n}=t,{baseId:s,schemaEnv:i,validateName:o,opts:a,self:c}=n,{root:l}=i;if((r==="#"||r==="#/")&&s===l.baseId)return d();let u=oD.resolveRef.call(c,l,s,r);if(u===void 0)throw new Zre.default(n.opts.uriResolver,s,r);if(u instanceof oD.SchemaEnv)return p(u);return f(u);function d(){if(i===l)return hm(t,o,i,i.$async);let h=e.scopeValue("root",{ref:l});return hm(t,(0,Ur._)`${h}.validate`,l,l.$async)}function p(h){let m=aD(t,h);hm(t,m,h,h.$async)}function f(h){let m=e.scopeValue("schema",a.code.source===!0?{ref:h,code:(0,Ur.stringify)(h)}:{ref:h}),y=e.name("valid"),g=t.subschema({schema:h,dataTypes:[],schemaPath:Ur.nil,topSchemaRef:m,errSchemaPath:r},y);t.mergeEvaluated(g),t.ok(y)}}};function aD(t,e){let{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,Ur._)`${r.scopeValue("wrapper",{ref:e})}.validate`}Yo.getValidate=aD;function hm(t,e,r,n){let{gen:s,it:i}=t,{allErrors:o,schemaEnv:a,opts:c}=i,l=c.passContext?Oc.default.this:Ur.nil;n?u():d();function u(){if(!a.$async)throw new Error("async schema referenced by sync schema");let h=s.let("valid");s.try(()=>{s.code((0,Ur._)`await ${(0,iD.callValidateCode)(t,e,l)}`),f(e),o||s.assign(h,!0)},m=>{s.if((0,Ur._)`!(${m} instanceof ${i.ValidationError})`,()=>s.throw(m)),p(m),o||s.assign(h,!1)}),t.ok(h)}function d(){t.result((0,iD.callValidateCode)(t,e,l),()=>f(e),()=>p(e))}function p(h){let m=(0,Ur._)`${h}.errors`;s.assign(Oc.default.vErrors,(0,Ur._)`${Oc.default.vErrors} === null ? ${m} : ${Oc.default.vErrors}.concat(${m})`),s.assign(Oc.default.errors,(0,Ur._)`${Oc.default.vErrors}.length`)}function f(h){var m;if(!i.opts.unevaluated)return;let y=(m=r?.validate)===null||m===void 0?void 0:m.evaluated;if(i.props!==!0)if(y&&!y.dynamicProps)y.props!==void 0&&(i.props=dm.mergeEvaluated.props(s,y.props,i.props));else{let g=s.var("props",(0,Ur._)`${h}.evaluated.props`);i.props=dm.mergeEvaluated.props(s,g,i.props,Ur.Name)}if(i.items!==!0)if(y&&!y.dynamicItems)y.items!==void 0&&(i.items=dm.mergeEvaluated.items(s,y.items,i.items));else{let g=s.var("items",(0,Ur._)`${h}.evaluated.items`);i.items=dm.mergeEvaluated.items(s,g,i.items,Ur.Name)}}}Yo.callRef=hm;Yo.default=ene});var lD=E(Eb=>{"use strict";Object.defineProperty(Eb,"__esModule",{value:!0});var tne=sD(),rne=cD(),nne=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",tne.default,rne.default];Eb.default=nne});var uD=E(Sb=>{"use strict";Object.defineProperty(Sb,"__esModule",{value:!0});var pm=we(),Bi=pm.operators,mm={maximum:{okStr:"<=",ok:Bi.LTE,fail:Bi.GT},minimum:{okStr:">=",ok:Bi.GTE,fail:Bi.LT},exclusiveMaximum:{okStr:"<",ok:Bi.LT,fail:Bi.GTE},exclusiveMinimum:{okStr:">",ok:Bi.GT,fail:Bi.LTE}},sne={message:({keyword:t,schemaCode:e})=>(0,pm.str)`must be ${mm[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,pm._)`{comparison: ${mm[t].okStr}, limit: ${e}}`},ine={keyword:Object.keys(mm),type:"number",schemaType:"number",$data:!0,error:sne,code(t){let{keyword:e,data:r,schemaCode:n}=t;t.fail$data((0,pm._)`${r} ${mm[e].fail} ${n} || isNaN(${r})`)}};Sb.default=ine});var fD=E(Tb=>{"use strict";Object.defineProperty(Tb,"__esModule",{value:!0});var Ju=we(),one={message:({schemaCode:t})=>(0,Ju.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,Ju._)`{multipleOf: ${t}}`},ane={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:one,code(t){let{gen:e,data:r,schemaCode:n,it:s}=t,i=s.opts.multipleOfPrecision,o=e.let("res"),a=i?(0,Ju._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${i}`:(0,Ju._)`${o} !== parseInt(${o})`;t.fail$data((0,Ju._)`(${n} === 0 || (${o} = ${r}/${n}, ${a}))`)}};Tb.default=ane});var hD=E(Rb=>{"use strict";Object.defineProperty(Rb,"__esModule",{value:!0});function dD(t){let e=t.length,r=0,n=0,s;for(;n<e;)r++,s=t.charCodeAt(n++),s>=55296&&s<=56319&&n<e&&(s=t.charCodeAt(n),(s&64512)===56320&&n++);return r}Rb.default=dD;dD.code='require("ajv/dist/runtime/ucs2length").default'});var pD=E($b=>{"use strict";Object.defineProperty($b,"__esModule",{value:!0});var Xo=we(),cne=je(),lne=hD(),une={message({keyword:t,schemaCode:e}){let r=t==="maxLength"?"more":"fewer";return(0,Xo.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,Xo._)`{limit: ${t}}`},fne={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:une,code(t){let{keyword:e,data:r,schemaCode:n,it:s}=t,i=e==="maxLength"?Xo.operators.GT:Xo.operators.LT,o=s.opts.unicode===!1?(0,Xo._)`${r}.length`:(0,Xo._)`${(0,cne.useFunc)(t.gen,lne.default)}(${r})`;t.fail$data((0,Xo._)`${o} ${i} ${n}`)}};$b.default=fne});var mD=E(Ob=>{"use strict";Object.defineProperty(Ob,"__esModule",{value:!0});var dne=dn(),gm=we(),hne={message:({schemaCode:t})=>(0,gm.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,gm._)`{pattern: ${t}}`},pne={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:hne,code(t){let{data:e,$data:r,schema:n,schemaCode:s,it:i}=t,o=i.opts.unicodeRegExp?"u":"",a=r?(0,gm._)`(new RegExp(${s}, ${o}))`:(0,dne.usePattern)(t,n);t.fail$data((0,gm._)`!${a}.test(${e})`)}};Ob.default=pne});var gD=E(Pb=>{"use strict";Object.defineProperty(Pb,"__esModule",{value:!0});var Yu=we(),mne={message({keyword:t,schemaCode:e}){let r=t==="maxProperties"?"more":"fewer";return(0,Yu.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,Yu._)`{limit: ${t}}`},gne={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:mne,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxProperties"?Yu.operators.GT:Yu.operators.LT;t.fail$data((0,Yu._)`Object.keys(${r}).length ${s} ${n}`)}};Pb.default=gne});var yD=E(xb=>{"use strict";Object.defineProperty(xb,"__esModule",{value:!0});var Xu=dn(),Qu=we(),yne=je(),_ne={message:({params:{missingProperty:t}})=>(0,Qu.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,Qu._)`{missingProperty: ${t}}`},vne={keyword:"required",type:"object",schemaType:"array",$data:!0,error:_ne,code(t){let{gen:e,schema:r,schemaCode:n,data:s,$data:i,it:o}=t,{opts:a}=o;if(!i&&r.length===0)return;let c=r.length>=a.loopRequired;if(o.allErrors?l():u(),a.strictRequired){let f=t.parentSchema.properties,{definedProperties:h}=t.it;for(let m of r)if(f?.[m]===void 0&&!h.has(m)){let y=o.schemaEnv.baseId+o.errSchemaPath,g=`required property "${m}" is not defined at "${y}" (strictRequired)`;(0,yne.checkStrictMode)(o,g,o.opts.strictRequired)}}function l(){if(c||i)t.block$data(Qu.nil,d);else for(let f of r)(0,Xu.checkReportMissingProp)(t,f)}function u(){let f=e.let("missing");if(c||i){let h=e.let("valid",!0);t.block$data(h,()=>p(f,h)),t.ok(h)}else e.if((0,Xu.checkMissingProp)(t,r,f)),(0,Xu.reportMissingProp)(t,f),e.else()}function d(){e.forOf("prop",n,f=>{t.setParams({missingProperty:f}),e.if((0,Xu.noPropertyInData)(e,s,f,a.ownProperties),()=>t.error())})}function p(f,h){t.setParams({missingProperty:f}),e.forOf(f,n,()=>{e.assign(h,(0,Xu.propertyInData)(e,s,f,a.ownProperties)),e.if((0,Qu.not)(h),()=>{t.error(),e.break()})},Qu.nil)}}};xb.default=vne});var _D=E(Nb=>{"use strict";Object.defineProperty(Nb,"__esModule",{value:!0});var Zu=we(),wne={message({keyword:t,schemaCode:e}){let r=t==="maxItems"?"more":"fewer";return(0,Zu.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,Zu._)`{limit: ${t}}`},bne={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:wne,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxItems"?Zu.operators.GT:Zu.operators.LT;t.fail$data((0,Zu._)`${r}.length ${s} ${n}`)}};Nb.default=bne});var ef=E(Cb=>{"use strict";Object.defineProperty(Cb,"__esModule",{value:!0});var vD=Zs();vD.code='require("ajv/dist/runtime/equal").default';Cb.default=vD});var wD=E(Ab=>{"use strict";Object.defineProperty(Ab,"__esModule",{value:!0});var Ib=Lu(),Gt=we(),Ene=je(),Sne=ef(),Tne={message:({params:{i:t,j:e}})=>(0,Gt.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,Gt._)`{i: ${t}, j: ${e}}`},Rne={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:Tne,code(t){let{gen:e,data:r,$data:n,schema:s,parentSchema:i,schemaCode:o,it:a}=t;if(!n&&!s)return;let c=e.let("valid"),l=i.items?(0,Ib.getSchemaTypes)(i.items):[];t.block$data(c,u,(0,Gt._)`${o} === false`),t.ok(c);function u(){let h=e.let("i",(0,Gt._)`${r}.length`),m=e.let("j");t.setParams({i:h,j:m}),e.assign(c,!0),e.if((0,Gt._)`${h} > 1`,()=>(d()?p:f)(h,m))}function d(){return l.length>0&&!l.some(h=>h==="object"||h==="array")}function p(h,m){let y=e.name("item"),g=(0,Ib.checkDataTypes)(l,y,a.opts.strictNumbers,Ib.DataType.Wrong),w=e.const("indices",(0,Gt._)`{}`);e.for((0,Gt._)`;${h}--;`,()=>{e.let(y,(0,Gt._)`${r}[${h}]`),e.if(g,(0,Gt._)`continue`),l.length>1&&e.if((0,Gt._)`typeof ${y} == "string"`,(0,Gt._)`${y} += "_"`),e.if((0,Gt._)`typeof ${w}[${y}] == "number"`,()=>{e.assign(m,(0,Gt._)`${w}[${y}]`),t.error(),e.assign(c,!1).break()}).code((0,Gt._)`${w}[${y}] = ${h}`)})}function f(h,m){let y=(0,Ene.useFunc)(e,Sne.default),g=e.name("outer");e.label(g).for((0,Gt._)`;${h}--;`,()=>e.for((0,Gt._)`${m} = ${h}; ${m}--;`,()=>e.if((0,Gt._)`${y}(${r}[${h}], ${r}[${m}])`,()=>{t.error(),e.assign(c,!1).break(g)})))}}};Ab.default=Rne});var bD=E(Db=>{"use strict";Object.defineProperty(Db,"__esModule",{value:!0});var kb=we(),$ne=je(),One=ef(),Pne={message:"must be equal to constant",params:({schemaCode:t})=>(0,kb._)`{allowedValue: ${t}}`},xne={keyword:"const",$data:!0,error:Pne,code(t){let{gen:e,data:r,$data:n,schemaCode:s,schema:i}=t;n||i&&typeof i=="object"?t.fail$data((0,kb._)`!${(0,$ne.useFunc)(e,One.default)}(${r}, ${s})`):t.fail((0,kb._)`${i} !== ${r}`)}};Db.default=xne});var ED=E(Mb=>{"use strict";Object.defineProperty(Mb,"__esModule",{value:!0});var tf=we(),Nne=je(),Cne=ef(),Ine={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,tf._)`{allowedValues: ${t}}`},Ane={keyword:"enum",schemaType:"array",$data:!0,error:Ine,code(t){let{gen:e,data:r,$data:n,schema:s,schemaCode:i,it:o}=t;if(!n&&s.length===0)throw new Error("enum must have non-empty array");let a=s.length>=o.opts.loopEnum,c,l=()=>c??(c=(0,Nne.useFunc)(e,Cne.default)),u;if(a||n)u=e.let("valid"),t.block$data(u,d);else{if(!Array.isArray(s))throw new Error("ajv implementation error");let f=e.const("vSchema",i);u=(0,tf.or)(...s.map((h,m)=>p(f,m)))}t.pass(u);function d(){e.assign(u,!1),e.forOf("v",i,f=>e.if((0,tf._)`${l()}(${r}, ${f})`,()=>e.assign(u,!0).break()))}function p(f,h){let m=s[h];return typeof m=="object"&&m!==null?(0,tf._)`${l()}(${r}, ${f}[${h}])`:(0,tf._)`${r} === ${m}`}}};Mb.default=Ane});var SD=E(jb=>{"use strict";Object.defineProperty(jb,"__esModule",{value:!0});var kne=uD(),Dne=fD(),Mne=pD(),jne=mD(),qne=gD(),Lne=yD(),Fne=_D(),Une=wD(),Bne=bD(),Vne=ED(),zne=[kne.default,Dne.default,Mne.default,jne.default,qne.default,Lne.default,Fne.default,Une.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},Bne.default,Vne.default];jb.default=zne});var Lb=E(rf=>{"use strict";Object.defineProperty(rf,"__esModule",{value:!0});rf.validateAdditionalItems=void 0;var Qo=we(),qb=je(),Hne={message:({params:{len:t}})=>(0,Qo.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,Qo._)`{limit: ${t}}`},Gne={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:Hne,code(t){let{parentSchema:e,it:r}=t,{items:n}=e;if(!Array.isArray(n)){(0,qb.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}TD(t,n)}};function TD(t,e){let{gen:r,schema:n,data:s,keyword:i,it:o}=t;o.items=!0;let a=r.const("len",(0,Qo._)`${s}.length`);if(n===!1)t.setParams({len:e.length}),t.pass((0,Qo._)`${a} <= ${e.length}`);else if(typeof n=="object"&&!(0,qb.alwaysValidSchema)(o,n)){let l=r.var("valid",(0,Qo._)`${a} <= ${e.length}`);r.if((0,Qo.not)(l),()=>c(l)),t.ok(l)}function c(l){r.forRange("i",e.length,a,u=>{t.subschema({keyword:i,dataProp:u,dataPropType:qb.Type.Num},l),o.allErrors||r.if((0,Qo.not)(l),()=>r.break())})}}rf.validateAdditionalItems=TD;rf.default=Gne});var Fb=E(nf=>{"use strict";Object.defineProperty(nf,"__esModule",{value:!0});nf.validateTuple=void 0;var RD=we(),ym=je(),Wne=dn(),Kne={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){let{schema:e,it:r}=t;if(Array.isArray(e))return $D(t,"additionalItems",e);r.items=!0,!(0,ym.alwaysValidSchema)(r,e)&&t.ok((0,Wne.validateArray)(t))}};function $D(t,e,r=t.schema){let{gen:n,parentSchema:s,data:i,keyword:o,it:a}=t;u(s),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=ym.mergeEvaluated.items(n,r.length,a.items));let c=n.name("valid"),l=n.const("len",(0,RD._)`${i}.length`);r.forEach((d,p)=>{(0,ym.alwaysValidSchema)(a,d)||(n.if((0,RD._)`${l} > ${p}`,()=>t.subschema({keyword:o,schemaProp:p,dataProp:p},c)),t.ok(c))});function u(d){let{opts:p,errSchemaPath:f}=a,h=r.length,m=h===d.minItems&&(h===d.maxItems||d[e]===!1);if(p.strictTuples&&!m){let y=`"${o}" is ${h}-tuple, but minItems or maxItems/${e} are not specified or different at path "${f}"`;(0,ym.checkStrictMode)(a,y,p.strictTuples)}}}nf.validateTuple=$D;nf.default=Kne});var OD=E(Ub=>{"use strict";Object.defineProperty(Ub,"__esModule",{value:!0});var Jne=Fb(),Yne={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,Jne.validateTuple)(t,"items")};Ub.default=Yne});var xD=E(Bb=>{"use strict";Object.defineProperty(Bb,"__esModule",{value:!0});var PD=we(),Xne=je(),Qne=dn(),Zne=Lb(),ese={message:({params:{len:t}})=>(0,PD.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,PD._)`{limit: ${t}}`},tse={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:ese,code(t){let{schema:e,parentSchema:r,it:n}=t,{prefixItems:s}=r;n.items=!0,!(0,Xne.alwaysValidSchema)(n,e)&&(s?(0,Zne.validateAdditionalItems)(t,s):t.ok((0,Qne.validateArray)(t)))}};Bb.default=tse});var ND=E(Vb=>{"use strict";Object.defineProperty(Vb,"__esModule",{value:!0});var pn=we(),_m=je(),rse={message:({params:{min:t,max:e}})=>e===void 0?(0,pn.str)`must contain at least ${t} valid item(s)`:(0,pn.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,pn._)`{minContains: ${t}}`:(0,pn._)`{minContains: ${t}, maxContains: ${e}}`},nse={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:rse,code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:i}=t,o,a,{minContains:c,maxContains:l}=n;i.opts.next?(o=c===void 0?1:c,a=l):o=1;let u=e.const("len",(0,pn._)`${s}.length`);if(t.setParams({min:o,max:a}),a===void 0&&o===0){(0,_m.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,_m.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,_m.alwaysValidSchema)(i,r)){let m=(0,pn._)`${u} >= ${o}`;a!==void 0&&(m=(0,pn._)`${m} && ${u} <= ${a}`),t.pass(m);return}i.items=!0;let d=e.name("valid");a===void 0&&o===1?f(d,()=>e.if(d,()=>e.break())):o===0?(e.let(d,!0),a!==void 0&&e.if((0,pn._)`${s}.length > 0`,p)):(e.let(d,!1),p()),t.result(d,()=>t.reset());function p(){let m=e.name("_valid"),y=e.let("count",0);f(m,()=>e.if(m,()=>h(y)))}function f(m,y){e.forRange("i",0,u,g=>{t.subschema({keyword:"contains",dataProp:g,dataPropType:_m.Type.Num,compositeRule:!0},m),y()})}function h(m){e.code((0,pn._)`${m}++`),a===void 0?e.if((0,pn._)`${m} >= ${o}`,()=>e.assign(d,!0).break()):(e.if((0,pn._)`${m} > ${a}`,()=>e.assign(d,!1).break()),o===1?e.assign(d,!0):e.if((0,pn._)`${m} >= ${o}`,()=>e.assign(d,!0)))}}};Vb.default=nse});var AD=E(bs=>{"use strict";Object.defineProperty(bs,"__esModule",{value:!0});bs.validateSchemaDeps=bs.validatePropertyDeps=bs.error=void 0;var zb=we(),sse=je(),sf=dn();bs.error={message:({params:{property:t,depsCount:e,deps:r}})=>{let n=e===1?"property":"properties";return(0,zb.str)`must have ${n} ${r} when property ${t} is present`},params:({params:{property:t,depsCount:e,deps:r,missingProperty:n}})=>(0,zb._)`{property: ${t},
    missingProperty: ${n},
    depsCount: ${e},
    deps: ${r}}`};var ise={keyword:"dependencies",type:"object",schemaType:"object",error:bs.error,code(t){let[e,r]=ose(t);CD(t,e),ID(t,r)}};function ose({schema:t}){let e={},r={};for(let n in t){if(n==="__proto__")continue;let s=Array.isArray(t[n])?e:r;s[n]=t[n]}return[e,r]}function CD(t,e=t.schema){let{gen:r,data:n,it:s}=t;if(Object.keys(e).length===0)return;let i=r.let("missing");for(let o in e){let a=e[o];if(a.length===0)continue;let c=(0,sf.propertyInData)(r,n,o,s.opts.ownProperties);t.setParams({property:o,depsCount:a.length,deps:a.join(", ")}),s.allErrors?r.if(c,()=>{for(let l of a)(0,sf.checkReportMissingProp)(t,l)}):(r.if((0,zb._)`${c} && (${(0,sf.checkMissingProp)(t,a,i)})`),(0,sf.reportMissingProp)(t,i),r.else())}}bs.validatePropertyDeps=CD;function ID(t,e=t.schema){let{gen:r,data:n,keyword:s,it:i}=t,o=r.name("valid");for(let a in e)(0,sse.alwaysValidSchema)(i,e[a])||(r.if((0,sf.propertyInData)(r,n,a,i.opts.ownProperties),()=>{let c=t.subschema({keyword:s,schemaProp:a},o);t.mergeValidEvaluated(c,o)},()=>r.var(o,!0)),t.ok(o))}bs.validateSchemaDeps=ID;bs.default=ise});var DD=E(Hb=>{"use strict";Object.defineProperty(Hb,"__esModule",{value:!0});var kD=we(),ase=je(),cse={message:"property name must be valid",params:({params:t})=>(0,kD._)`{propertyName: ${t.propertyName}}`},lse={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:cse,code(t){let{gen:e,schema:r,data:n,it:s}=t;if((0,ase.alwaysValidSchema)(s,r))return;let i=e.name("valid");e.forIn("key",n,o=>{t.setParams({propertyName:o}),t.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},i),e.if((0,kD.not)(i),()=>{t.error(!0),s.allErrors||e.break()})}),t.ok(i)}};Hb.default=lse});var Wb=E(Gb=>{"use strict";Object.defineProperty(Gb,"__esModule",{value:!0});var vm=dn(),Hn=we(),use=Qs(),wm=je(),fse={message:"must NOT have additional properties",params:({params:t})=>(0,Hn._)`{additionalProperty: ${t.additionalProperty}}`},dse={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:fse,code(t){let{gen:e,schema:r,parentSchema:n,data:s,errsCount:i,it:o}=t;if(!i)throw new Error("ajv implementation error");let{allErrors:a,opts:c}=o;if(o.props=!0,c.removeAdditional!=="all"&&(0,wm.alwaysValidSchema)(o,r))return;let l=(0,vm.allSchemaProperties)(n.properties),u=(0,vm.allSchemaProperties)(n.patternProperties);d(),t.ok((0,Hn._)`${i} === ${use.default.errors}`);function d(){e.forIn("key",s,y=>{!l.length&&!u.length?h(y):e.if(p(y),()=>h(y))})}function p(y){let g;if(l.length>8){let w=(0,wm.schemaRefOrVal)(o,n.properties,"properties");g=(0,vm.isOwnProperty)(e,w,y)}else l.length?g=(0,Hn.or)(...l.map(w=>(0,Hn._)`${y} === ${w}`)):g=Hn.nil;return u.length&&(g=(0,Hn.or)(g,...u.map(w=>(0,Hn._)`${(0,vm.usePattern)(t,w)}.test(${y})`))),(0,Hn.not)(g)}function f(y){e.code((0,Hn._)`delete ${s}[${y}]`)}function h(y){if(c.removeAdditional==="all"||c.removeAdditional&&r===!1){f(y);return}if(r===!1){t.setParams({additionalProperty:y}),t.error(),a||e.break();return}if(typeof r=="object"&&!(0,wm.alwaysValidSchema)(o,r)){let g=e.name("valid");c.removeAdditional==="failing"?(m(y,g,!1),e.if((0,Hn.not)(g),()=>{t.reset(),f(y)})):(m(y,g),a||e.if((0,Hn.not)(g),()=>e.break()))}}function m(y,g,w){let _={keyword:"additionalProperties",dataProp:y,dataPropType:wm.Type.Str};w===!1&&Object.assign(_,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(_,g)}}};Gb.default=dse});var qD=E(Jb=>{"use strict";Object.defineProperty(Jb,"__esModule",{value:!0});var hse=Vu(),MD=dn(),Kb=je(),jD=Wb(),pse={keyword:"properties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:i}=t;i.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&jD.default.code(new hse.KeywordCxt(i,jD.default,"additionalProperties"));let o=(0,MD.allSchemaProperties)(r);for(let d of o)i.definedProperties.add(d);i.opts.unevaluated&&o.length&&i.props!==!0&&(i.props=Kb.mergeEvaluated.props(e,(0,Kb.toHash)(o),i.props));let a=o.filter(d=>!(0,Kb.alwaysValidSchema)(i,r[d]));if(a.length===0)return;let c=e.name("valid");for(let d of a)l(d)?u(d):(e.if((0,MD.propertyInData)(e,s,d,i.opts.ownProperties)),u(d),i.allErrors||e.else().var(c,!0),e.endIf()),t.it.definedProperties.add(d),t.ok(c);function l(d){return i.opts.useDefaults&&!i.compositeRule&&r[d].default!==void 0}function u(d){t.subschema({keyword:"properties",schemaProp:d,dataProp:d},c)}}};Jb.default=pse});var BD=E(Yb=>{"use strict";Object.defineProperty(Yb,"__esModule",{value:!0});var LD=dn(),bm=we(),FD=je(),UD=je(),mse={keyword:"patternProperties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,data:n,parentSchema:s,it:i}=t,{opts:o}=i,a=(0,LD.allSchemaProperties)(r),c=a.filter(m=>(0,FD.alwaysValidSchema)(i,r[m]));if(a.length===0||c.length===a.length&&(!i.opts.unevaluated||i.props===!0))return;let l=o.strictSchema&&!o.allowMatchingProperties&&s.properties,u=e.name("valid");i.props!==!0&&!(i.props instanceof bm.Name)&&(i.props=(0,UD.evaluatedPropsToName)(e,i.props));let{props:d}=i;p();function p(){for(let m of a)l&&f(m),i.allErrors?h(m):(e.var(u,!0),h(m),e.if(u))}function f(m){for(let y in l)new RegExp(m).test(y)&&(0,FD.checkStrictMode)(i,`property ${y} matches pattern ${m} (use allowMatchingProperties)`)}function h(m){e.forIn("key",n,y=>{e.if((0,bm._)`${(0,LD.usePattern)(t,m)}.test(${y})`,()=>{let g=c.includes(m);g||t.subschema({keyword:"patternProperties",schemaProp:m,dataProp:y,dataPropType:UD.Type.Str},u),i.opts.unevaluated&&d!==!0?e.assign((0,bm._)`${d}[${y}]`,!0):!g&&!i.allErrors&&e.if((0,bm.not)(u),()=>e.break())})})}}};Yb.default=mse});var VD=E(Xb=>{"use strict";Object.defineProperty(Xb,"__esModule",{value:!0});var gse=je(),yse={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){let{gen:e,schema:r,it:n}=t;if((0,gse.alwaysValidSchema)(n,r)){t.fail();return}let s=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),t.failResult(s,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};Xb.default=yse});var zD=E(Qb=>{"use strict";Object.defineProperty(Qb,"__esModule",{value:!0});var _se=dn(),vse={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:_se.validateUnion,error:{message:"must match a schema in anyOf"}};Qb.default=vse});var HD=E(Zb=>{"use strict";Object.defineProperty(Zb,"__esModule",{value:!0});var Em=we(),wse=je(),bse={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,Em._)`{passingSchemas: ${t.passing}}`},Ese={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:bse,code(t){let{gen:e,schema:r,parentSchema:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&n.discriminator)return;let i=r,o=e.let("valid",!1),a=e.let("passing",null),c=e.name("_valid");t.setParams({passing:a}),e.block(l),t.result(o,()=>t.reset(),()=>t.error(!0));function l(){i.forEach((u,d)=>{let p;(0,wse.alwaysValidSchema)(s,u)?e.var(c,!0):p=t.subschema({keyword:"oneOf",schemaProp:d,compositeRule:!0},c),d>0&&e.if((0,Em._)`${c} && ${o}`).assign(o,!1).assign(a,(0,Em._)`[${a}, ${d}]`).else(),e.if(c,()=>{e.assign(o,!0),e.assign(a,d),p&&t.mergeEvaluated(p,Em.Name)})})}}};Zb.default=Ese});var GD=E(eE=>{"use strict";Object.defineProperty(eE,"__esModule",{value:!0});var Sse=je(),Tse={keyword:"allOf",schemaType:"array",code(t){let{gen:e,schema:r,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");let s=e.name("valid");r.forEach((i,o)=>{if((0,Sse.alwaysValidSchema)(n,i))return;let a=t.subschema({keyword:"allOf",schemaProp:o},s);t.ok(s),t.mergeEvaluated(a)})}};eE.default=Tse});var JD=E(tE=>{"use strict";Object.defineProperty(tE,"__esModule",{value:!0});var Sm=we(),KD=je(),Rse={message:({params:t})=>(0,Sm.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,Sm._)`{failingKeyword: ${t.ifClause}}`},$se={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:Rse,code(t){let{gen:e,parentSchema:r,it:n}=t;r.then===void 0&&r.else===void 0&&(0,KD.checkStrictMode)(n,'"if" without "then" and "else" is ignored');let s=WD(n,"then"),i=WD(n,"else");if(!s&&!i)return;let o=e.let("valid",!0),a=e.name("_valid");if(c(),t.reset(),s&&i){let u=e.let("ifClause");t.setParams({ifClause:u}),e.if(a,l("then",u),l("else",u))}else s?e.if(a,l("then")):e.if((0,Sm.not)(a),l("else"));t.pass(o,()=>t.error(!0));function c(){let u=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);t.mergeEvaluated(u)}function l(u,d){return()=>{let p=t.subschema({keyword:u},a);e.assign(o,a),t.mergeValidEvaluated(p,o),d?e.assign(d,(0,Sm._)`${u}`):t.setParams({ifClause:u})}}}};function WD(t,e){let r=t.schema[e];return r!==void 0&&!(0,KD.alwaysValidSchema)(t,r)}tE.default=$se});var YD=E(rE=>{"use strict";Object.defineProperty(rE,"__esModule",{value:!0});var Ose=je(),Pse={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,Ose.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};rE.default=Pse});var XD=E(nE=>{"use strict";Object.defineProperty(nE,"__esModule",{value:!0});var xse=Lb(),Nse=OD(),Cse=Fb(),Ise=xD(),Ase=ND(),kse=AD(),Dse=DD(),Mse=Wb(),jse=qD(),qse=BD(),Lse=VD(),Fse=zD(),Use=HD(),Bse=GD(),Vse=JD(),zse=YD();function Hse(t=!1){let e=[Lse.default,Fse.default,Use.default,Bse.default,Vse.default,zse.default,Dse.default,Mse.default,kse.default,jse.default,qse.default];return t?e.push(Nse.default,Ise.default):e.push(xse.default,Cse.default),e.push(Ase.default),e}nE.default=Hse});var QD=E(sE=>{"use strict";Object.defineProperty(sE,"__esModule",{value:!0});var wt=we(),Gse={message:({schemaCode:t})=>(0,wt.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,wt._)`{format: ${t}}`},Wse={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:Gse,code(t,e){let{gen:r,data:n,$data:s,schema:i,schemaCode:o,it:a}=t,{opts:c,errSchemaPath:l,schemaEnv:u,self:d}=a;if(!c.validateFormats)return;s?p():f();function p(){let h=r.scopeValue("formats",{ref:d.formats,code:c.code.formats}),m=r.const("fDef",(0,wt._)`${h}[${o}]`),y=r.let("fType"),g=r.let("format");r.if((0,wt._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>r.assign(y,(0,wt._)`${m}.type || "string"`).assign(g,(0,wt._)`${m}.validate`),()=>r.assign(y,(0,wt._)`"string"`).assign(g,m)),t.fail$data((0,wt.or)(w(),_()));function w(){return c.strictSchema===!1?wt.nil:(0,wt._)`${o} && !${g}`}function _(){let v=u.$async?(0,wt._)`(${m}.async ? await ${g}(${n}) : ${g}(${n}))`:(0,wt._)`${g}(${n})`,S=(0,wt._)`(typeof ${g} == "function" ? ${v} : ${g}.test(${n}))`;return(0,wt._)`${g} && ${g} !== true && ${y} === ${e} && !${S}`}}function f(){let h=d.formats[i];if(!h){w();return}if(h===!0)return;let[m,y,g]=_(h);m===e&&t.pass(v());function w(){if(c.strictSchema===!1){d.logger.warn(S());return}throw new Error(S());function S(){return`unknown format "${i}" ignored in schema at path "${l}"`}}function _(S){let $=S instanceof RegExp?(0,wt.regexpCode)(S):c.code.formats?(0,wt._)`${c.code.formats}${(0,wt.getProperty)(i)}`:void 0,T=r.scopeValue("formats",{key:i,ref:S,code:$});return typeof S=="object"&&!(S instanceof RegExp)?[S.type||"string",S.validate,(0,wt._)`${T}.validate`]:["string",S,T]}function v(){if(typeof h=="object"&&!(h instanceof RegExp)&&h.async){if(!u.$async)throw new Error("async format in sync schema");return(0,wt._)`await ${g}(${n})`}return typeof y=="function"?(0,wt._)`${g}(${n})`:(0,wt._)`${g}.test(${n})`}}}};sE.default=Wse});var ZD=E(iE=>{"use strict";Object.defineProperty(iE,"__esModule",{value:!0});var Kse=QD(),Jse=[Kse.default];iE.default=Jse});var eM=E(Pc=>{"use strict";Object.defineProperty(Pc,"__esModule",{value:!0});Pc.contentVocabulary=Pc.metadataVocabulary=void 0;Pc.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Pc.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var rM=E(oE=>{"use strict";Object.defineProperty(oE,"__esModule",{value:!0});var Yse=lD(),Xse=SD(),Qse=XD(),Zse=ZD(),tM=eM(),eie=[Yse.default,Xse.default,(0,Qse.default)(),Zse.default,tM.metadataVocabulary,tM.contentVocabulary];oE.default=eie});var sM=E(Tm=>{"use strict";Object.defineProperty(Tm,"__esModule",{value:!0});Tm.DiscrError=void 0;var nM;(function(t){t.Tag="tag",t.Mapping="mapping"})(nM||(Tm.DiscrError=nM={}))});var oM=E(cE=>{"use strict";Object.defineProperty(cE,"__esModule",{value:!0});var xc=we(),aE=sM(),iM=om(),tie=zu(),rie=je(),nie={message:({params:{discrError:t,tagName:e}})=>t===aE.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,xc._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},sie={keyword:"discriminator",type:"object",schemaType:"object",error:nie,code(t){let{gen:e,data:r,schema:n,parentSchema:s,it:i}=t,{oneOf:o}=s;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");let a=n.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");let c=e.let("valid",!1),l=e.const("tag",(0,xc._)`${r}${(0,xc.getProperty)(a)}`);e.if((0,xc._)`typeof ${l} == "string"`,()=>u(),()=>t.error(!1,{discrError:aE.DiscrError.Tag,tag:l,tagName:a})),t.ok(c);function u(){let f=p();e.if(!1);for(let h in f)e.elseIf((0,xc._)`${l} === ${h}`),e.assign(c,d(f[h]));e.else(),t.error(!1,{discrError:aE.DiscrError.Mapping,tag:l,tagName:a}),e.endIf()}function d(f){let h=e.name("valid"),m=t.subschema({keyword:"oneOf",schemaProp:f},h);return t.mergeEvaluated(m,xc.Name),h}function p(){var f;let h={},m=g(s),y=!0;for(let v=0;v<o.length;v++){let S=o[v];if(S?.$ref&&!(0,rie.schemaHasRulesButRef)(S,i.self.RULES)){let T=S.$ref;if(S=iM.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,T),S instanceof iM.SchemaEnv&&(S=S.schema),S===void 0)throw new tie.default(i.opts.uriResolver,i.baseId,T)}let $=(f=S?.properties)===null||f===void 0?void 0:f[a];if(typeof $!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);y=y&&(m||g(S)),w($,v)}if(!y)throw new Error(`discriminator: "${a}" must be required`);return h;function g({required:v}){return Array.isArray(v)&&v.includes(a)}function w(v,S){if(v.const)_(v.const,S);else if(v.enum)for(let $ of v.enum)_($,S);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function _(v,S){if(typeof v!="string"||v in h)throw new Error(`discriminator: "${a}" values must be unique strings`);h[v]=S}}}};cE.default=sie});var aM=E((ZIe,iie)=>{iie.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var lM=E((tt,lE)=>{"use strict";Object.defineProperty(tt,"__esModule",{value:!0});tt.MissingRefError=tt.ValidationError=tt.CodeGen=tt.Name=tt.nil=tt.stringify=tt.str=tt._=tt.KeywordCxt=tt.Ajv=void 0;var oie=nD(),aie=rM(),cie=oM(),cM=aM(),lie=["/properties"],Rm="http://json-schema.org/draft-07/schema",Nc=class extends oie.default{_addVocabularies(){super._addVocabularies(),aie.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(cie.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let e=this.opts.$data?this.$dataMetaSchema(cM,lie):cM;this.addMetaSchema(e,Rm,!1),this.refs["http://json-schema.org/schema"]=Rm}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(Rm)?Rm:void 0)}};tt.Ajv=Nc;lE.exports=tt=Nc;lE.exports.Ajv=Nc;Object.defineProperty(tt,"__esModule",{value:!0});tt.default=Nc;var uie=Vu();Object.defineProperty(tt,"KeywordCxt",{enumerable:!0,get:function(){return uie.KeywordCxt}});var Cc=we();Object.defineProperty(tt,"_",{enumerable:!0,get:function(){return Cc._}});Object.defineProperty(tt,"str",{enumerable:!0,get:function(){return Cc.str}});Object.defineProperty(tt,"stringify",{enumerable:!0,get:function(){return Cc.stringify}});Object.defineProperty(tt,"nil",{enumerable:!0,get:function(){return Cc.nil}});Object.defineProperty(tt,"Name",{enumerable:!0,get:function(){return Cc.Name}});Object.defineProperty(tt,"CodeGen",{enumerable:!0,get:function(){return Cc.CodeGen}});var fie=sm();Object.defineProperty(tt,"ValidationError",{enumerable:!0,get:function(){return fie.default}});var die=zu();Object.defineProperty(tt,"MissingRefError",{enumerable:!0,get:function(){return die.default}})});var $m=E(Ss=>{"use strict";Object.defineProperty(Ss,"__esModule",{value:!0});Ss.formatNames=Ss.fastFormats=Ss.fullFormats=void 0;function Es(t,e){return{validate:t,compare:e}}Ss.fullFormats={date:Es(hM,hE),time:Es(fE(!0),pE),"date-time":Es(uM(!0),mM),"iso-time":Es(fE(),pM),"iso-date-time":Es(uM(),gM),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:_ie,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:Rie,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:vie,int32:{type:"number",validate:Eie},int64:{type:"number",validate:Sie},float:{type:"number",validate:dM},double:{type:"number",validate:dM},password:!0,binary:!0};Ss.fastFormats={...Ss.fullFormats,date:Es(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,hE),time:Es(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,pE),"date-time":Es(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,mM),"iso-time":Es(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,pM),"iso-date-time":Es(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,gM),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i};Ss.formatNames=Object.keys(Ss.fullFormats);function hie(t){return t%4===0&&(t%100!==0||t%400===0)}var pie=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,mie=[0,31,28,31,30,31,30,31,31,30,31,30,31];function hM(t){let e=pie.exec(t);if(!e)return!1;let r=+e[1],n=+e[2],s=+e[3];return n>=1&&n<=12&&s>=1&&s<=(n===2&&hie(r)?29:mie[n])}function hE(t,e){if(t&&e)return t>e?1:t<e?-1:0}var uE=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function fE(t){return function(r){let n=uE.exec(r);if(!n)return!1;let s=+n[1],i=+n[2],o=+n[3],a=n[4],c=n[5]==="-"?-1:1,l=+(n[6]||0),u=+(n[7]||0);if(l>23||u>59||t&&!a)return!1;if(s<=23&&i<=59&&o<60)return!0;let d=i-u*c,p=s-l*c-(d<0?1:0);return(p===23||p===-1)&&(d===59||d===-1)&&o<61}}function pE(t,e){if(!(t&&e))return;let r=new Date("2020-01-01T"+t).valueOf(),n=new Date("2020-01-01T"+e).valueOf();if(r&&n)return r-n}function pM(t,e){if(!(t&&e))return;let r=uE.exec(t),n=uE.exec(e);if(r&&n)return t=r[1]+r[2]+r[3],e=n[1]+n[2]+n[3],t>e?1:t<e?-1:0}var dE=/t|\s/i;function uM(t){let e=fE(t);return function(n){let s=n.split(dE);return s.length===2&&hM(s[0])&&e(s[1])}}function mM(t,e){if(!(t&&e))return;let r=new Date(t).valueOf(),n=new Date(e).valueOf();if(r&&n)return r-n}function gM(t,e){if(!(t&&e))return;let[r,n]=t.split(dE),[s,i]=e.split(dE),o=hE(r,s);if(o!==void 0)return o||pE(n,i)}var gie=/\/|:/,yie=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function _ie(t){return gie.test(t)&&yie.test(t)}var fM=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function vie(t){return fM.lastIndex=0,fM.test(t)}var wie=-(2**31),bie=2**31-1;function Eie(t){return Number.isInteger(t)&&t<=bie&&t>=wie}function Sie(t){return Number.isInteger(t)}function dM(){return!0}var Tie=/[^\\]\\Z/;function Rie(t){if(Tie.test(t))return!1;try{return new RegExp(t),!0}catch{return!1}}});var cf=E(qe=>{"use strict";Object.defineProperty(qe,"__esModule",{value:!0});qe.regexpCode=qe.getEsmExportName=qe.getProperty=qe.safeStringify=qe.stringify=qe.strConcat=qe.addCodeArg=qe.str=qe._=qe.nil=qe._Code=qe.Name=qe.IDENTIFIER=qe._CodeOrName=void 0;var of=class{};qe._CodeOrName=of;qe.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var Zo=class extends of{constructor(e){if(super(),!qe.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};qe.Name=Zo;var mn=class extends of{constructor(e){super(),this._items=typeof e=="string"?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return e===""||e==='""'}get str(){var e;return(e=this._str)!==null&&e!==void 0?e:this._str=this._items.reduce((r,n)=>`${r}${n}`,"")}get names(){var e;return(e=this._names)!==null&&e!==void 0?e:this._names=this._items.reduce((r,n)=>(n instanceof Zo&&(r[n.str]=(r[n.str]||0)+1),r),{})}};qe._Code=mn;qe.nil=new mn("");function yM(t,...e){let r=[t[0]],n=0;for(;n<e.length;)gE(r,e[n]),r.push(t[++n]);return new mn(r)}qe._=yM;var mE=new mn("+");function _M(t,...e){let r=[af(t[0])],n=0;for(;n<e.length;)r.push(mE),gE(r,e[n]),r.push(mE,af(t[++n]));return $ie(r),new mn(r)}qe.str=_M;function gE(t,e){e instanceof mn?t.push(...e._items):e instanceof Zo?t.push(e):t.push(xie(e))}qe.addCodeArg=gE;function $ie(t){let e=1;for(;e<t.length-1;){if(t[e]===mE){let r=Oie(t[e-1],t[e+1]);if(r!==void 0){t.splice(e-1,3,r);continue}t[e++]="+"}e++}}function Oie(t,e){if(e==='""')return t;if(t==='""')return e;if(typeof t=="string")return e instanceof Zo||t[t.length-1]!=='"'?void 0:typeof e!="string"?`${t.slice(0,-1)}${e}"`:e[0]==='"'?t.slice(0,-1)+e.slice(1):void 0;if(typeof e=="string"&&e[0]==='"'&&!(t instanceof Zo))return`"${t}${e.slice(1)}`}function Pie(t,e){return e.emptyStr()?t:t.emptyStr()?e:_M`${t}${e}`}qe.strConcat=Pie;function xie(t){return typeof t=="number"||typeof t=="boolean"||t===null?t:af(Array.isArray(t)?t.join(","):t)}function Nie(t){return new mn(af(t))}qe.stringify=Nie;function af(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}qe.safeStringify=af;function Cie(t){return typeof t=="string"&&qe.IDENTIFIER.test(t)?new mn(`.${t}`):yM`[${t}]`}qe.getProperty=Cie;function Iie(t){if(typeof t=="string"&&qe.IDENTIFIER.test(t))return new mn(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)}qe.getEsmExportName=Iie;function Aie(t){return new mn(t.toString())}qe.regexpCode=Aie});var vE=E(Vr=>{"use strict";Object.defineProperty(Vr,"__esModule",{value:!0});Vr.ValueScope=Vr.ValueScopeName=Vr.Scope=Vr.varKinds=Vr.UsedValueState=void 0;var Br=cf(),yE=class extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}},Om;(function(t){t[t.Started=0]="Started",t[t.Completed=1]="Completed"})(Om||(Vr.UsedValueState=Om={}));Vr.varKinds={const:new Br.Name("const"),let:new Br.Name("let"),var:new Br.Name("var")};var Pm=class{constructor({prefixes:e,parent:r}={}){this._names={},this._prefixes=e,this._parent=r}toName(e){return e instanceof Br.Name?e:this.name(e)}name(e){return new Br.Name(this._newName(e))}_newName(e){let r=this._names[e]||this._nameGroup(e);return`${e}${r.index++}`}_nameGroup(e){var r,n;if(!((n=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||n===void 0)&&n.has(e)||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}};Vr.Scope=Pm;var xm=class extends Br.Name{constructor(e,r){super(r),this.prefix=e}setValue(e,{property:r,itemIndex:n}){this.value=e,this.scopePath=(0,Br._)`.${new Br.Name(r)}[${n}]`}};Vr.ValueScopeName=xm;var kie=(0,Br._)`\n`,_E=class extends Pm{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?kie:Br.nil}}get(){return this._scope}name(e){return new xm(e,this._newName(e))}value(e,r){var n;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let s=this.toName(e),{prefix:i}=s,o=(n=r.key)!==null&&n!==void 0?n:r.ref,a=this._values[i];if(a){let u=a.get(o);if(u)return u}else a=this._values[i]=new Map;a.set(o,s);let c=this._scope[i]||(this._scope[i]=[]),l=c.length;return c[l]=r.ref,s.setValue(r,{property:i,itemIndex:l}),s}getValue(e,r){let n=this._values[e];if(n)return n.get(r)}scopeRefs(e,r=this._values){return this._reduceValues(r,n=>{if(n.scopePath===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return(0,Br._)`${e}${n.scopePath}`})}scopeCode(e=this._values,r,n){return this._reduceValues(e,s=>{if(s.value===void 0)throw new Error(`CodeGen: name "${s}" has no value`);return s.value.code},r,n)}_reduceValues(e,r,n={},s){let i=Br.nil;for(let o in e){let a=e[o];if(!a)continue;let c=n[o]=n[o]||new Map;a.forEach(l=>{if(c.has(l))return;c.set(l,Om.Started);let u=r(l);if(u){let d=this.opts.es5?Vr.varKinds.var:Vr.varKinds.const;i=(0,Br._)`${i}${d} ${l} = ${u};${this.opts._n}`}else if(u=s?.(l))i=(0,Br._)`${i}${u}${this.opts._n}`;else throw new yE(l);c.set(l,Om.Completed)})}return i}};Vr.ValueScope=_E});var pe=E(_e=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0});_e.or=_e.and=_e.not=_e.CodeGen=_e.operators=_e.varKinds=_e.ValueScopeName=_e.ValueScope=_e.Scope=_e.Name=_e.regexpCode=_e.stringify=_e.getProperty=_e.nil=_e.strConcat=_e.str=_e._=void 0;var Ce=cf(),Gn=vE(),Vi=cf();Object.defineProperty(_e,"_",{enumerable:!0,get:function(){return Vi._}});Object.defineProperty(_e,"str",{enumerable:!0,get:function(){return Vi.str}});Object.defineProperty(_e,"strConcat",{enumerable:!0,get:function(){return Vi.strConcat}});Object.defineProperty(_e,"nil",{enumerable:!0,get:function(){return Vi.nil}});Object.defineProperty(_e,"getProperty",{enumerable:!0,get:function(){return Vi.getProperty}});Object.defineProperty(_e,"stringify",{enumerable:!0,get:function(){return Vi.stringify}});Object.defineProperty(_e,"regexpCode",{enumerable:!0,get:function(){return Vi.regexpCode}});Object.defineProperty(_e,"Name",{enumerable:!0,get:function(){return Vi.Name}});var Am=vE();Object.defineProperty(_e,"Scope",{enumerable:!0,get:function(){return Am.Scope}});Object.defineProperty(_e,"ValueScope",{enumerable:!0,get:function(){return Am.ValueScope}});Object.defineProperty(_e,"ValueScopeName",{enumerable:!0,get:function(){return Am.ValueScopeName}});Object.defineProperty(_e,"varKinds",{enumerable:!0,get:function(){return Am.varKinds}});_e.operators={GT:new Ce._Code(">"),GTE:new Ce._Code(">="),LT:new Ce._Code("<"),LTE:new Ce._Code("<="),EQ:new Ce._Code("==="),NEQ:new Ce._Code("!=="),NOT:new Ce._Code("!"),OR:new Ce._Code("||"),AND:new Ce._Code("&&"),ADD:new Ce._Code("+")};var ri=class{optimizeNodes(){return this}optimizeNames(e,r){return this}},wE=class extends ri{constructor(e,r,n){super(),this.varKind=e,this.name=r,this.rhs=n}render({es5:e,_n:r}){let n=e?Gn.varKinds.var:this.varKind,s=this.rhs===void 0?"":` = ${this.rhs}`;return`${n} ${this.name}${s};`+r}optimizeNames(e,r){if(e[this.name.str])return this.rhs&&(this.rhs=Ac(this.rhs,e,r)),this}get names(){return this.rhs instanceof Ce._CodeOrName?this.rhs.names:{}}},Nm=class extends ri{constructor(e,r,n){super(),this.lhs=e,this.rhs=r,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof Ce.Name&&!e[this.lhs.str]&&!this.sideEffects))return this.rhs=Ac(this.rhs,e,r),this}get names(){let e=this.lhs instanceof Ce.Name?{}:{...this.lhs.names};return Im(e,this.rhs)}},bE=class extends Nm{constructor(e,r,n,s){super(e,n,s),this.op=r}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}},EE=class extends ri{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}},SE=class extends ri{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}},TE=class extends ri{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}},RE=class extends ri{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,r){return this.code=Ac(this.code,e,r),this}get names(){return this.code instanceof Ce._CodeOrName?this.code.names:{}}},lf=class extends ri{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((r,n)=>r+n.render(e),"")}optimizeNodes(){let{nodes:e}=this,r=e.length;for(;r--;){let n=e[r].optimizeNodes();Array.isArray(n)?e.splice(r,1,...n):n?e[r]=n:e.splice(r,1)}return e.length>0?this:void 0}optimizeNames(e,r){let{nodes:n}=this,s=n.length;for(;s--;){let i=n[s];i.optimizeNames(e,r)||(Die(e,i.names),n.splice(s,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((e,r)=>ta(e,r.names),{})}},ni=class extends lf{render(e){return"{"+e._n+super.render(e)+"}"+e._n}},$E=class extends lf{},Ic=class extends ni{};Ic.kind="else";var Wn=class extends ni{constructor(e,r){super(r),this.condition=e}render(e){let r=`if(${this.condition})`+super.render(e);return this.else&&(r+="else "+this.else.render(e)),r}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(e===!0)return this.nodes;let r=this.else;if(r){let n=r.optimizeNodes();r=this.else=Array.isArray(n)?new Ic(n):n}if(r)return e===!1?r instanceof Wn?r:r.nodes:this.nodes.length?this:new Wn(vM(e),r instanceof Wn?[r]:r.nodes);if(!(e===!1||!this.nodes.length))return this}optimizeNames(e,r){var n;if(this.else=(n=this.else)===null||n===void 0?void 0:n.optimizeNames(e,r),!!(super.optimizeNames(e,r)||this.else))return this.condition=Ac(this.condition,e,r),this}get names(){let e=super.names;return Im(e,this.condition),this.else&&ta(e,this.else.names),e}};Wn.kind="if";var ea=class extends ni{};ea.kind="for";var OE=class extends ea{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iteration=Ac(this.iteration,e,r),this}get names(){return ta(super.names,this.iteration.names)}},PE=class extends ea{constructor(e,r,n,s){super(),this.varKind=e,this.name=r,this.from=n,this.to=s}render(e){let r=e.es5?Gn.varKinds.var:this.varKind,{name:n,from:s,to:i}=this;return`for(${r} ${n}=${s}; ${n}<${i}; ${n}++)`+super.render(e)}get names(){let e=Im(super.names,this.from);return Im(e,this.to)}},Cm=class extends ea{constructor(e,r,n,s){super(),this.loop=e,this.varKind=r,this.name=n,this.iterable=s}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iterable=Ac(this.iterable,e,r),this}get names(){return ta(super.names,this.iterable.names)}},uf=class extends ni{constructor(e,r,n){super(),this.name=e,this.args=r,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}};uf.kind="func";var ff=class extends lf{render(e){return"return "+super.render(e)}};ff.kind="return";var xE=class extends ni{render(e){let r="try"+super.render(e);return this.catch&&(r+=this.catch.render(e)),this.finally&&(r+=this.finally.render(e)),r}optimizeNodes(){var e,r;return super.optimizeNodes(),(e=this.catch)===null||e===void 0||e.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(e,r){var n,s;return super.optimizeNames(e,r),(n=this.catch)===null||n===void 0||n.optimizeNames(e,r),(s=this.finally)===null||s===void 0||s.optimizeNames(e,r),this}get names(){let e=super.names;return this.catch&&ta(e,this.catch.names),this.finally&&ta(e,this.finally.names),e}},df=class extends ni{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}};df.kind="catch";var hf=class extends ni{render(e){return"finally"+super.render(e)}};hf.kind="finally";var NE=class{constructor(e,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=e,this._scope=new Gn.Scope({parent:e}),this._nodes=[new $E]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,r){let n=this._extScope.value(e,r);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,r){return this._extScope.getValue(e,r)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,r,n,s){let i=this._scope.toName(r);return n!==void 0&&s&&(this._constants[i.str]=n),this._leafNode(new wE(e,i,n)),i}const(e,r,n){return this._def(Gn.varKinds.const,e,r,n)}let(e,r,n){return this._def(Gn.varKinds.let,e,r,n)}var(e,r,n){return this._def(Gn.varKinds.var,e,r,n)}assign(e,r,n){return this._leafNode(new Nm(e,r,n))}add(e,r){return this._leafNode(new bE(e,_e.operators.ADD,r))}code(e){return typeof e=="function"?e():e!==Ce.nil&&this._leafNode(new RE(e)),this}object(...e){let r=["{"];for(let[n,s]of e)r.length>1&&r.push(","),r.push(n),(n!==s||this.opts.es5)&&(r.push(":"),(0,Ce.addCodeArg)(r,s));return r.push("}"),new Ce._Code(r)}if(e,r,n){if(this._blockNode(new Wn(e)),r&&n)this.code(r).else().code(n).endIf();else if(r)this.code(r).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new Wn(e))}else(){return this._elseNode(new Ic)}endIf(){return this._endBlockNode(Wn,Ic)}_for(e,r){return this._blockNode(e),r&&this.code(r).endFor(),this}for(e,r){return this._for(new OE(e),r)}forRange(e,r,n,s,i=this.opts.es5?Gn.varKinds.var:Gn.varKinds.let){let o=this._scope.toName(e);return this._for(new PE(i,o,r,n),()=>s(o))}forOf(e,r,n,s=Gn.varKinds.const){let i=this._scope.toName(e);if(this.opts.es5){let o=r instanceof Ce.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,Ce._)`${o}.length`,a=>{this.var(i,(0,Ce._)`${o}[${a}]`),n(i)})}return this._for(new Cm("of",s,i,r),()=>n(i))}forIn(e,r,n,s=this.opts.es5?Gn.varKinds.var:Gn.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,Ce._)`Object.keys(${r})`,n);let i=this._scope.toName(e);return this._for(new Cm("in",s,i,r),()=>n(i))}endFor(){return this._endBlockNode(ea)}label(e){return this._leafNode(new EE(e))}break(e){return this._leafNode(new SE(e))}return(e){let r=new ff;if(this._blockNode(r),this.code(e),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(ff)}try(e,r,n){if(!r&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');let s=new xE;if(this._blockNode(s),this.code(e),r){let i=this.name("e");this._currNode=s.catch=new df(i),r(i)}return n&&(this._currNode=s.finally=new hf,this.code(n)),this._endBlockNode(df,hf)}throw(e){return this._leafNode(new TE(e))}block(e,r){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(r),this}endBlock(e){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let n=this._nodes.length-r;if(n<0||e!==void 0&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=r,this}func(e,r=Ce.nil,n,s){return this._blockNode(new uf(e,r,n)),s&&this.code(s).endFunc(),this}endFunc(){return this._endBlockNode(uf)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,r){let n=this._currNode;if(n instanceof e||r&&n instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${e.kind}/${r.kind}`:e.kind}"`)}_elseNode(e){let r=this._currNode;if(!(r instanceof Wn))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let r=this._nodes;r[r.length-1]=e}};_e.CodeGen=NE;function ta(t,e){for(let r in e)t[r]=(t[r]||0)+(e[r]||0);return t}function Im(t,e){return e instanceof Ce._CodeOrName?ta(t,e.names):t}function Ac(t,e,r){if(t instanceof Ce.Name)return n(t);if(!s(t))return t;return new Ce._Code(t._items.reduce((i,o)=>(o instanceof Ce.Name&&(o=n(o)),o instanceof Ce._Code?i.push(...o._items):i.push(o),i),[]));function n(i){let o=r[i.str];return o===void 0||e[i.str]!==1?i:(delete e[i.str],o)}function s(i){return i instanceof Ce._Code&&i._items.some(o=>o instanceof Ce.Name&&e[o.str]===1&&r[o.str]!==void 0)}}function Die(t,e){for(let r in e)t[r]=(t[r]||0)-(e[r]||0)}function vM(t){return typeof t=="boolean"||typeof t=="number"||t===null?!t:(0,Ce._)`!${CE(t)}`}_e.not=vM;var Mie=wM(_e.operators.AND);function jie(...t){return t.reduce(Mie)}_e.and=jie;var qie=wM(_e.operators.OR);function Lie(...t){return t.reduce(qie)}_e.or=Lie;function wM(t){return(e,r)=>e===Ce.nil?r:r===Ce.nil?e:(0,Ce._)`${CE(e)} ${t} ${CE(r)}`}function CE(t){return t instanceof Ce.Name?t:(0,Ce._)`(${t})`}});var Le=E(Ee=>{"use strict";Object.defineProperty(Ee,"__esModule",{value:!0});Ee.checkStrictMode=Ee.getErrorPath=Ee.Type=Ee.useFunc=Ee.setEvaluated=Ee.evaluatedPropsToName=Ee.mergeEvaluated=Ee.eachItem=Ee.unescapeJsonPointer=Ee.escapeJsonPointer=Ee.escapeFragment=Ee.unescapeFragment=Ee.schemaRefOrVal=Ee.schemaHasRulesButRef=Ee.schemaHasRules=Ee.checkUnknownRules=Ee.alwaysValidSchema=Ee.toHash=void 0;var Ke=pe(),Fie=cf();function Uie(t){let e={};for(let r of t)e[r]=!0;return e}Ee.toHash=Uie;function Bie(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(SM(t,e),!TM(e,t.self.RULES.all))}Ee.alwaysValidSchema=Bie;function SM(t,e=t.schema){let{opts:r,self:n}=t;if(!r.strictSchema||typeof e=="boolean")return;let s=n.RULES.keywords;for(let i in e)s[i]||OM(t,`unknown keyword: "${i}"`)}Ee.checkUnknownRules=SM;function TM(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(e[r])return!0;return!1}Ee.schemaHasRules=TM;function Vie(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}Ee.schemaHasRulesButRef=Vie;function zie({topSchemaRef:t,schemaPath:e},r,n,s){if(!s){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,Ke._)`${r}`}return(0,Ke._)`${t}${e}${(0,Ke.getProperty)(n)}`}Ee.schemaRefOrVal=zie;function Hie(t){return RM(decodeURIComponent(t))}Ee.unescapeFragment=Hie;function Gie(t){return encodeURIComponent(AE(t))}Ee.escapeFragment=Gie;function AE(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}Ee.escapeJsonPointer=AE;function RM(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}Ee.unescapeJsonPointer=RM;function Wie(t,e){if(Array.isArray(t))for(let r of t)e(r);else e(t)}Ee.eachItem=Wie;function bM({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:n}){return(s,i,o,a)=>{let c=o===void 0?i:o instanceof Ke.Name?(i instanceof Ke.Name?t(s,i,o):e(s,i,o),o):i instanceof Ke.Name?(e(s,o,i),i):r(i,o);return a===Ke.Name&&!(c instanceof Ke.Name)?n(s,c):c}}Ee.mergeEvaluated={props:bM({mergeNames:(t,e,r)=>t.if((0,Ke._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,Ke._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,Ke._)`${r} || {}`).code((0,Ke._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,Ke._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,Ke._)`${r} || {}`),kE(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:$M}),items:bM({mergeNames:(t,e,r)=>t.if((0,Ke._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,Ke._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,Ke._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,Ke._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function $M(t,e){if(e===!0)return t.var("props",!0);let r=t.var("props",(0,Ke._)`{}`);return e!==void 0&&kE(t,r,e),r}Ee.evaluatedPropsToName=$M;function kE(t,e,r){Object.keys(r).forEach(n=>t.assign((0,Ke._)`${e}${(0,Ke.getProperty)(n)}`,!0))}Ee.setEvaluated=kE;var EM={};function Kie(t,e){return t.scopeValue("func",{ref:e,code:EM[e.code]||(EM[e.code]=new Fie._Code(e.code))})}Ee.useFunc=Kie;var IE;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(IE||(Ee.Type=IE={}));function Jie(t,e,r){if(t instanceof Ke.Name){let n=e===IE.Num;return r?n?(0,Ke._)`"[" + ${t} + "]"`:(0,Ke._)`"['" + ${t} + "']"`:n?(0,Ke._)`"/" + ${t}`:(0,Ke._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,Ke.getProperty)(t).toString():"/"+AE(t)}Ee.getErrorPath=Jie;function OM(t,e,r=t.opts.strictSchema){if(r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}Ee.checkStrictMode=OM});var si=E(DE=>{"use strict";Object.defineProperty(DE,"__esModule",{value:!0});var ir=pe(),Yie={data:new ir.Name("data"),valCxt:new ir.Name("valCxt"),instancePath:new ir.Name("instancePath"),parentData:new ir.Name("parentData"),parentDataProperty:new ir.Name("parentDataProperty"),rootData:new ir.Name("rootData"),dynamicAnchors:new ir.Name("dynamicAnchors"),vErrors:new ir.Name("vErrors"),errors:new ir.Name("errors"),this:new ir.Name("this"),self:new ir.Name("self"),scope:new ir.Name("scope"),json:new ir.Name("json"),jsonPos:new ir.Name("jsonPos"),jsonLen:new ir.Name("jsonLen"),jsonPart:new ir.Name("jsonPart")};DE.default=Yie});var pf=E(or=>{"use strict";Object.defineProperty(or,"__esModule",{value:!0});or.extendErrors=or.resetErrorsCount=or.reportExtraError=or.reportError=or.keyword$DataError=or.keywordError=void 0;var ke=pe(),km=Le(),Sr=si();or.keywordError={message:({keyword:t})=>(0,ke.str)`must pass "${t}" keyword validation`};or.keyword$DataError={message:({keyword:t,schemaType:e})=>e?(0,ke.str)`"${t}" keyword must be ${e} ($data)`:(0,ke.str)`"${t}" keyword is invalid ($data)`};function Xie(t,e=or.keywordError,r,n){let{it:s}=t,{gen:i,compositeRule:o,allErrors:a}=s,c=NM(t,e,r);n??(o||a)?PM(i,c):xM(s,(0,ke._)`[${c}]`)}or.reportError=Xie;function Qie(t,e=or.keywordError,r){let{it:n}=t,{gen:s,compositeRule:i,allErrors:o}=n,a=NM(t,e,r);PM(s,a),i||o||xM(n,Sr.default.vErrors)}or.reportExtraError=Qie;function Zie(t,e){t.assign(Sr.default.errors,e),t.if((0,ke._)`${Sr.default.vErrors} !== null`,()=>t.if(e,()=>t.assign((0,ke._)`${Sr.default.vErrors}.length`,e),()=>t.assign(Sr.default.vErrors,null)))}or.resetErrorsCount=Zie;function eoe({gen:t,keyword:e,schemaValue:r,data:n,errsCount:s,it:i}){if(s===void 0)throw new Error("ajv implementation error");let o=t.name("err");t.forRange("i",s,Sr.default.errors,a=>{t.const(o,(0,ke._)`${Sr.default.vErrors}[${a}]`),t.if((0,ke._)`${o}.instancePath === undefined`,()=>t.assign((0,ke._)`${o}.instancePath`,(0,ke.strConcat)(Sr.default.instancePath,i.errorPath))),t.assign((0,ke._)`${o}.schemaPath`,(0,ke.str)`${i.errSchemaPath}/${e}`),i.opts.verbose&&(t.assign((0,ke._)`${o}.schema`,r),t.assign((0,ke._)`${o}.data`,n))})}or.extendErrors=eoe;function PM(t,e){let r=t.const("err",e);t.if((0,ke._)`${Sr.default.vErrors} === null`,()=>t.assign(Sr.default.vErrors,(0,ke._)`[${r}]`),(0,ke._)`${Sr.default.vErrors}.push(${r})`),t.code((0,ke._)`${Sr.default.errors}++`)}function xM(t,e){let{gen:r,validateName:n,schemaEnv:s}=t;s.$async?r.throw((0,ke._)`new ${t.ValidationError}(${e})`):(r.assign((0,ke._)`${n}.errors`,e),r.return(!1))}var ra={keyword:new ke.Name("keyword"),schemaPath:new ke.Name("schemaPath"),params:new ke.Name("params"),propertyName:new ke.Name("propertyName"),message:new ke.Name("message"),schema:new ke.Name("schema"),parentSchema:new ke.Name("parentSchema")};function NM(t,e,r){let{createErrors:n}=t.it;return n===!1?(0,ke._)`{}`:toe(t,e,r)}function toe(t,e,r={}){let{gen:n,it:s}=t,i=[roe(s,r),noe(t,r)];return soe(t,e,i),n.object(...i)}function roe({errorPath:t},{instancePath:e}){let r=e?(0,ke.str)`${t}${(0,km.getErrorPath)(e,km.Type.Str)}`:t;return[Sr.default.instancePath,(0,ke.strConcat)(Sr.default.instancePath,r)]}function noe({keyword:t,it:{errSchemaPath:e}},{schemaPath:r,parentSchema:n}){let s=n?e:(0,ke.str)`${e}/${t}`;return r&&(s=(0,ke.str)`${s}${(0,km.getErrorPath)(r,km.Type.Str)}`),[ra.schemaPath,s]}function soe(t,{params:e,message:r},n){let{keyword:s,data:i,schemaValue:o,it:a}=t,{opts:c,propertyName:l,topSchemaRef:u,schemaPath:d}=a;n.push([ra.keyword,s],[ra.params,typeof e=="function"?e(t):e||(0,ke._)`{}`]),c.messages&&n.push([ra.message,typeof r=="function"?r(t):r]),c.verbose&&n.push([ra.schema,o],[ra.parentSchema,(0,ke._)`${u}${d}`],[Sr.default.data,i]),l&&n.push([ra.propertyName,l])}});var IM=E(kc=>{"use strict";Object.defineProperty(kc,"__esModule",{value:!0});kc.boolOrEmptySchema=kc.topBoolOrEmptySchema=void 0;var ioe=pf(),ooe=pe(),aoe=si(),coe={message:"boolean schema is false"};function loe(t){let{gen:e,schema:r,validateName:n}=t;r===!1?CM(t,!1):typeof r=="object"&&r.$async===!0?e.return(aoe.default.data):(e.assign((0,ooe._)`${n}.errors`,null),e.return(!0))}kc.topBoolOrEmptySchema=loe;function uoe(t,e){let{gen:r,schema:n}=t;n===!1?(r.var(e,!1),CM(t)):r.var(e,!0)}kc.boolOrEmptySchema=uoe;function CM(t,e){let{gen:r,data:n}=t,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,ioe.reportError)(s,coe,void 0,e)}});var ME=E(Dc=>{"use strict";Object.defineProperty(Dc,"__esModule",{value:!0});Dc.getRules=Dc.isJSONType=void 0;var foe=["string","number","integer","boolean","null","object","array"],doe=new Set(foe);function hoe(t){return typeof t=="string"&&doe.has(t)}Dc.isJSONType=hoe;function poe(){let t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}Dc.getRules=poe});var jE=E(zi=>{"use strict";Object.defineProperty(zi,"__esModule",{value:!0});zi.shouldUseRule=zi.shouldUseGroup=zi.schemaHasRulesForType=void 0;function moe({schema:t,self:e},r){let n=e.RULES.types[r];return n&&n!==!0&&AM(t,n)}zi.schemaHasRulesForType=moe;function AM(t,e){return e.rules.some(r=>kM(t,r))}zi.shouldUseGroup=AM;function kM(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(n=>t[n]!==void 0))}zi.shouldUseRule=kM});var mf=E(ar=>{"use strict";Object.defineProperty(ar,"__esModule",{value:!0});ar.reportTypeError=ar.checkDataTypes=ar.checkDataType=ar.coerceAndCheckDataType=ar.getJSONTypes=ar.getSchemaTypes=ar.DataType=void 0;var goe=ME(),yoe=jE(),_oe=pf(),de=pe(),DM=Le(),Mc;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(Mc||(ar.DataType=Mc={}));function voe(t){let e=MM(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}ar.getSchemaTypes=voe;function MM(t){let e=Array.isArray(t)?t:t?[t]:[];if(e.every(goe.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}ar.getJSONTypes=MM;function woe(t,e){let{gen:r,data:n,opts:s}=t,i=boe(e,s.coerceTypes),o=e.length>0&&!(i.length===0&&e.length===1&&(0,yoe.schemaHasRulesForType)(t,e[0]));if(o){let a=LE(e,n,s.strictNumbers,Mc.Wrong);r.if(a,()=>{i.length?Eoe(t,e,i):FE(t)})}return o}ar.coerceAndCheckDataType=woe;var jM=new Set(["string","number","integer","boolean","null"]);function boe(t,e){return e?t.filter(r=>jM.has(r)||e==="array"&&r==="array"):[]}function Eoe(t,e,r){let{gen:n,data:s,opts:i}=t,o=n.let("dataType",(0,de._)`typeof ${s}`),a=n.let("coerced",(0,de._)`undefined`);i.coerceTypes==="array"&&n.if((0,de._)`${o} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>n.assign(s,(0,de._)`${s}[0]`).assign(o,(0,de._)`typeof ${s}`).if(LE(e,s,i.strictNumbers),()=>n.assign(a,s))),n.if((0,de._)`${a} !== undefined`);for(let l of r)(jM.has(l)||l==="array"&&i.coerceTypes==="array")&&c(l);n.else(),FE(t),n.endIf(),n.if((0,de._)`${a} !== undefined`,()=>{n.assign(s,a),Soe(t,a)});function c(l){switch(l){case"string":n.elseIf((0,de._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,de._)`"" + ${s}`).elseIf((0,de._)`${s} === null`).assign(a,(0,de._)`""`);return;case"number":n.elseIf((0,de._)`${o} == "boolean" || ${s} === null
              || (${o} == "string" && ${s} && ${s} == +${s})`).assign(a,(0,de._)`+${s}`);return;case"integer":n.elseIf((0,de._)`${o} === "boolean" || ${s} === null
              || (${o} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(a,(0,de._)`+${s}`);return;case"boolean":n.elseIf((0,de._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(a,!1).elseIf((0,de._)`${s} === "true" || ${s} === 1`).assign(a,!0);return;case"null":n.elseIf((0,de._)`${s} === "" || ${s} === 0 || ${s} === false`),n.assign(a,null);return;case"array":n.elseIf((0,de._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${s} === null`).assign(a,(0,de._)`[${s}]`)}}}function Soe({gen:t,parentData:e,parentDataProperty:r},n){t.if((0,de._)`${e} !== undefined`,()=>t.assign((0,de._)`${e}[${r}]`,n))}function qE(t,e,r,n=Mc.Correct){let s=n===Mc.Correct?de.operators.EQ:de.operators.NEQ,i;switch(t){case"null":return(0,de._)`${e} ${s} null`;case"array":i=(0,de._)`Array.isArray(${e})`;break;case"object":i=(0,de._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":i=o((0,de._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":i=o();break;default:return(0,de._)`typeof ${e} ${s} ${t}`}return n===Mc.Correct?i:(0,de.not)(i);function o(a=de.nil){return(0,de.and)((0,de._)`typeof ${e} == "number"`,a,r?(0,de._)`isFinite(${e})`:de.nil)}}ar.checkDataType=qE;function LE(t,e,r,n){if(t.length===1)return qE(t[0],e,r,n);let s,i=(0,DM.toHash)(t);if(i.array&&i.object){let o=(0,de._)`typeof ${e} != "object"`;s=i.null?o:(0,de._)`!${e} || ${o}`,delete i.null,delete i.array,delete i.object}else s=de.nil;i.number&&delete i.integer;for(let o in i)s=(0,de.and)(s,qE(o,e,r,n));return s}ar.checkDataTypes=LE;var Toe={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,de._)`{type: ${t}}`:(0,de._)`{type: ${e}}`};function FE(t){let e=Roe(t);(0,_oe.reportError)(e,Toe)}ar.reportTypeError=FE;function Roe(t){let{gen:e,data:r,schema:n}=t,s=(0,DM.schemaRefOrVal)(t,n,"type");return{gen:e,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:t}}});var LM=E(Dm=>{"use strict";Object.defineProperty(Dm,"__esModule",{value:!0});Dm.assignDefaults=void 0;var jc=pe(),$oe=Le();function Ooe(t,e){let{properties:r,items:n}=t.schema;if(e==="object"&&r)for(let s in r)qM(t,s,r[s].default);else e==="array"&&Array.isArray(n)&&n.forEach((s,i)=>qM(t,i,s.default))}Dm.assignDefaults=Ooe;function qM(t,e,r){let{gen:n,compositeRule:s,data:i,opts:o}=t;if(r===void 0)return;let a=(0,jc._)`${i}${(0,jc.getProperty)(e)}`;if(s){(0,$oe.checkStrictMode)(t,`default is ignored for: ${a}`);return}let c=(0,jc._)`${a} === undefined`;o.useDefaults==="empty"&&(c=(0,jc._)`${c} || ${a} === null || ${a} === ""`),n.if(c,(0,jc._)`${a} = ${(0,jc.stringify)(r)}`)}});var gn=E(He=>{"use strict";Object.defineProperty(He,"__esModule",{value:!0});He.validateUnion=He.validateArray=He.usePattern=He.callValidateCode=He.schemaProperties=He.allSchemaProperties=He.noPropertyInData=He.propertyInData=He.isOwnProperty=He.hasPropFunc=He.reportMissingProp=He.checkMissingProp=He.checkReportMissingProp=void 0;var rt=pe(),UE=Le(),Hi=si(),Poe=Le();function xoe(t,e){let{gen:r,data:n,it:s}=t;r.if(VE(r,n,e,s.opts.ownProperties),()=>{t.setParams({missingProperty:(0,rt._)`${e}`},!0),t.error()})}He.checkReportMissingProp=xoe;function Noe({gen:t,data:e,it:{opts:r}},n,s){return(0,rt.or)(...n.map(i=>(0,rt.and)(VE(t,e,i,r.ownProperties),(0,rt._)`${s} = ${i}`)))}He.checkMissingProp=Noe;function Coe(t,e){t.setParams({missingProperty:e},!0),t.error()}He.reportMissingProp=Coe;function FM(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,rt._)`Object.prototype.hasOwnProperty`})}He.hasPropFunc=FM;function BE(t,e,r){return(0,rt._)`${FM(t)}.call(${e}, ${r})`}He.isOwnProperty=BE;function Ioe(t,e,r,n){let s=(0,rt._)`${e}${(0,rt.getProperty)(r)} !== undefined`;return n?(0,rt._)`${s} && ${BE(t,e,r)}`:s}He.propertyInData=Ioe;function VE(t,e,r,n){let s=(0,rt._)`${e}${(0,rt.getProperty)(r)} === undefined`;return n?(0,rt.or)(s,(0,rt.not)(BE(t,e,r))):s}He.noPropertyInData=VE;function UM(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}He.allSchemaProperties=UM;function Aoe(t,e){return UM(e).filter(r=>!(0,UE.alwaysValidSchema)(t,e[r]))}He.schemaProperties=Aoe;function koe({schemaCode:t,data:e,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:i},it:o},a,c,l){let u=l?(0,rt._)`${t}, ${e}, ${n}${s}`:e,d=[[Hi.default.instancePath,(0,rt.strConcat)(Hi.default.instancePath,i)],[Hi.default.parentData,o.parentData],[Hi.default.parentDataProperty,o.parentDataProperty],[Hi.default.rootData,Hi.default.rootData]];o.opts.dynamicRef&&d.push([Hi.default.dynamicAnchors,Hi.default.dynamicAnchors]);let p=(0,rt._)`${u}, ${r.object(...d)}`;return c!==rt.nil?(0,rt._)`${a}.call(${c}, ${p})`:(0,rt._)`${a}(${p})`}He.callValidateCode=koe;var Doe=(0,rt._)`new RegExp`;function Moe({gen:t,it:{opts:e}},r){let n=e.unicodeRegExp?"u":"",{regExp:s}=e.code,i=s(r,n);return t.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,rt._)`${s.code==="new RegExp"?Doe:(0,Poe.useFunc)(t,s)}(${r}, ${n})`})}He.usePattern=Moe;function joe(t){let{gen:e,data:r,keyword:n,it:s}=t,i=e.name("valid");if(s.allErrors){let a=e.let("valid",!0);return o(()=>e.assign(a,!1)),a}return e.var(i,!0),o(()=>e.break()),i;function o(a){let c=e.const("len",(0,rt._)`${r}.length`);e.forRange("i",0,c,l=>{t.subschema({keyword:n,dataProp:l,dataPropType:UE.Type.Num},i),e.if((0,rt.not)(i),a)})}}He.validateArray=joe;function qoe(t){let{gen:e,schema:r,keyword:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(c=>(0,UE.alwaysValidSchema)(s,c))&&!s.opts.unevaluated)return;let o=e.let("valid",!1),a=e.name("_valid");e.block(()=>r.forEach((c,l)=>{let u=t.subschema({keyword:n,schemaProp:l,compositeRule:!0},a);e.assign(o,(0,rt._)`${o} || ${a}`),t.mergeValidEvaluated(u,a)||e.if((0,rt.not)(o))})),t.result(o,()=>t.reset(),()=>t.error(!0))}He.validateUnion=qoe});var zM=E(Ts=>{"use strict";Object.defineProperty(Ts,"__esModule",{value:!0});Ts.validateKeywordUsage=Ts.validSchemaType=Ts.funcKeywordCode=Ts.macroKeywordCode=void 0;var Tr=pe(),na=si(),Loe=gn(),Foe=pf();function Uoe(t,e){let{gen:r,keyword:n,schema:s,parentSchema:i,it:o}=t,a=e.macro.call(o.self,s,i,o),c=VM(r,n,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);let l=r.name("valid");t.subschema({schema:a,schemaPath:Tr.nil,errSchemaPath:`${o.errSchemaPath}/${n}`,topSchemaRef:c,compositeRule:!0},l),t.pass(l,()=>t.error(!0))}Ts.macroKeywordCode=Uoe;function Boe(t,e){var r;let{gen:n,keyword:s,schema:i,parentSchema:o,$data:a,it:c}=t;zoe(c,e);let l=!a&&e.compile?e.compile.call(c.self,i,o,c):e.validate,u=VM(n,s,l),d=n.let("valid");t.block$data(d,p),t.ok((r=e.valid)!==null&&r!==void 0?r:d);function p(){if(e.errors===!1)m(),e.modifying&&BM(t),y(()=>t.error());else{let g=e.async?f():h();e.modifying&&BM(t),y(()=>Voe(t,g))}}function f(){let g=n.let("ruleErrs",null);return n.try(()=>m((0,Tr._)`await `),w=>n.assign(d,!1).if((0,Tr._)`${w} instanceof ${c.ValidationError}`,()=>n.assign(g,(0,Tr._)`${w}.errors`),()=>n.throw(w))),g}function h(){let g=(0,Tr._)`${u}.errors`;return n.assign(g,null),m(Tr.nil),g}function m(g=e.async?(0,Tr._)`await `:Tr.nil){let w=c.opts.passContext?na.default.this:na.default.self,_=!("compile"in e&&!a||e.schema===!1);n.assign(d,(0,Tr._)`${g}${(0,Loe.callValidateCode)(t,u,w,_)}`,e.modifying)}function y(g){var w;n.if((0,Tr.not)((w=e.valid)!==null&&w!==void 0?w:d),g)}}Ts.funcKeywordCode=Boe;function BM(t){let{gen:e,data:r,it:n}=t;e.if(n.parentData,()=>e.assign(r,(0,Tr._)`${n.parentData}[${n.parentDataProperty}]`))}function Voe(t,e){let{gen:r}=t;r.if((0,Tr._)`Array.isArray(${e})`,()=>{r.assign(na.default.vErrors,(0,Tr._)`${na.default.vErrors} === null ? ${e} : ${na.default.vErrors}.concat(${e})`).assign(na.default.errors,(0,Tr._)`${na.default.vErrors}.length`),(0,Foe.extendErrors)(t)},()=>t.error())}function zoe({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function VM(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,Tr.stringify)(r)})}function Hoe(t,e,r=!1){return!e.length||e.some(n=>n==="array"?Array.isArray(t):n==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==n||r&&typeof t>"u")}Ts.validSchemaType=Hoe;function Goe({schema:t,opts:e,self:r,errSchemaPath:n},s,i){if(Array.isArray(s.keyword)?!s.keyword.includes(i):s.keyword!==i)throw new Error("ajv implementation error");let o=s.dependencies;if(o?.some(a=>!Object.prototype.hasOwnProperty.call(t,a)))throw new Error(`parent schema must have dependencies of ${i}: ${o.join(",")}`);if(s.validateSchema&&!s.validateSchema(t[i])){let c=`keyword "${i}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(c);else throw new Error(c)}}Ts.validateKeywordUsage=Goe});var GM=E(Gi=>{"use strict";Object.defineProperty(Gi,"__esModule",{value:!0});Gi.extendSubschemaMode=Gi.extendSubschemaData=Gi.getSubschema=void 0;var Rs=pe(),HM=Le();function Woe(t,{keyword:e,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:i,topSchemaRef:o}){if(e!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){let a=t.schema[e];return r===void 0?{schema:a,schemaPath:(0,Rs._)`${t.schemaPath}${(0,Rs.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:a[r],schemaPath:(0,Rs._)`${t.schemaPath}${(0,Rs.getProperty)(e)}${(0,Rs.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,HM.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||i===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:o,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}Gi.getSubschema=Woe;function Koe(t,e,{dataProp:r,dataPropType:n,data:s,dataTypes:i,propertyName:o}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:a}=e;if(r!==void 0){let{errorPath:l,dataPathArr:u,opts:d}=e,p=a.let("data",(0,Rs._)`${e.data}${(0,Rs.getProperty)(r)}`,!0);c(p),t.errorPath=(0,Rs.str)`${l}${(0,HM.getErrorPath)(r,n,d.jsPropertySyntax)}`,t.parentDataProperty=(0,Rs._)`${r}`,t.dataPathArr=[...u,t.parentDataProperty]}if(s!==void 0){let l=s instanceof Rs.Name?s:a.let("data",s,!0);c(l),o!==void 0&&(t.propertyName=o)}i&&(t.dataTypes=i);function c(l){t.data=l,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,l]}}Gi.extendSubschemaData=Koe;function Joe(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:i}){n!==void 0&&(t.compositeRule=n),s!==void 0&&(t.createErrors=s),i!==void 0&&(t.allErrors=i),t.jtdDiscriminator=e,t.jtdMetadata=r}Gi.extendSubschemaMode=Joe});var KM=E((mAe,WM)=>{"use strict";var Wi=WM.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};Mm(e,n,s,t,"",t)};Wi.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Wi.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Wi.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Wi.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Mm(t,e,r,n,s,i,o,a,c,l){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,s,i,o,a,c,l);for(var u in n){var d=n[u];if(Array.isArray(d)){if(u in Wi.arrayKeywords)for(var p=0;p<d.length;p++)Mm(t,e,r,d[p],s+"/"+u+"/"+p,i,s,u,n,p)}else if(u in Wi.propsKeywords){if(d&&typeof d=="object")for(var f in d)Mm(t,e,r,d[f],s+"/"+u+"/"+Yoe(f),i,s,u,n,f)}else(u in Wi.keywords||t.allKeys&&!(u in Wi.skipKeywords))&&Mm(t,e,r,d,s+"/"+u,i,s,u,n)}r(n,s,i,o,a,c,l)}}function Yoe(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}});var gf=E(zr=>{"use strict";Object.defineProperty(zr,"__esModule",{value:!0});zr.getSchemaRefs=zr.resolveUrl=zr.normalizeId=zr._getFullPath=zr.getFullPath=zr.inlineRef=void 0;var Xoe=Le(),Qoe=Zs(),Zoe=KM(),eae=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function tae(t,e=!0){return typeof t=="boolean"?!0:e===!0?!zE(t):e?JM(t)<=e:!1}zr.inlineRef=tae;var rae=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function zE(t){for(let e in t){if(rae.has(e))return!0;let r=t[e];if(Array.isArray(r)&&r.some(zE)||typeof r=="object"&&zE(r))return!0}return!1}function JM(t){let e=0;for(let r in t){if(r==="$ref")return 1/0;if(e++,!eae.has(r)&&(typeof t[r]=="object"&&(0,Xoe.eachItem)(t[r],n=>e+=JM(n)),e===1/0))return 1/0}return e}function YM(t,e="",r){r!==!1&&(e=qc(e));let n=t.parse(e);return XM(t,n)}zr.getFullPath=YM;function XM(t,e){return t.serialize(e).split("#")[0]+"#"}zr._getFullPath=XM;var nae=/#\/?$/;function qc(t){return t?t.replace(nae,""):""}zr.normalizeId=qc;function sae(t,e,r){return r=qc(r),t.resolve(e,r)}zr.resolveUrl=sae;var iae=/^[a-z_][-a-z0-9._]*$/i;function oae(t,e){if(typeof t=="boolean")return{};let{schemaId:r,uriResolver:n}=this.opts,s=qc(t[r]||e),i={"":s},o=YM(n,s,!1),a={},c=new Set;return Zoe(t,{allKeys:!0},(d,p,f,h)=>{if(h===void 0)return;let m=o+p,y=i[h];typeof d[r]=="string"&&(y=g.call(this,d[r])),w.call(this,d.$anchor),w.call(this,d.$dynamicAnchor),i[p]=y;function g(_){let v=this.opts.uriResolver.resolve;if(_=qc(y?v(y,_):_),c.has(_))throw u(_);c.add(_);let S=this.refs[_];return typeof S=="string"&&(S=this.refs[S]),typeof S=="object"?l(d,S.schema,_):_!==qc(m)&&(_[0]==="#"?(l(d,a[_],_),a[_]=d):this.refs[_]=m),_}function w(_){if(typeof _=="string"){if(!iae.test(_))throw new Error(`invalid anchor "${_}"`);g.call(this,`#${_}`)}}}),a;function l(d,p,f){if(p!==void 0&&!Qoe(d,p))throw u(f)}function u(d){return new Error(`reference "${d}" resolves to more than one schema`)}}zr.getSchemaRefs=oae});var vf=E(Ki=>{"use strict";Object.defineProperty(Ki,"__esModule",{value:!0});Ki.getData=Ki.KeywordCxt=Ki.validateFunctionCode=void 0;var rj=IM(),QM=mf(),GE=jE(),jm=mf(),aae=LM(),_f=zM(),HE=GM(),Q=pe(),ie=si(),cae=gf(),ii=Le(),yf=pf();function lae(t){if(ij(t)&&(oj(t),sj(t))){dae(t);return}nj(t,()=>(0,rj.topBoolOrEmptySchema)(t))}Ki.validateFunctionCode=lae;function nj({gen:t,validateName:e,schema:r,schemaEnv:n,opts:s},i){s.code.es5?t.func(e,(0,Q._)`${ie.default.data}, ${ie.default.valCxt}`,n.$async,()=>{t.code((0,Q._)`"use strict"; ${ZM(r,s)}`),fae(t,s),t.code(i)}):t.func(e,(0,Q._)`${ie.default.data}, ${uae(s)}`,n.$async,()=>t.code(ZM(r,s)).code(i))}function uae(t){return(0,Q._)`{${ie.default.instancePath}="", ${ie.default.parentData}, ${ie.default.parentDataProperty}, ${ie.default.rootData}=${ie.default.data}${t.dynamicRef?(0,Q._)`, ${ie.default.dynamicAnchors}={}`:Q.nil}}={}`}function fae(t,e){t.if(ie.default.valCxt,()=>{t.var(ie.default.instancePath,(0,Q._)`${ie.default.valCxt}.${ie.default.instancePath}`),t.var(ie.default.parentData,(0,Q._)`${ie.default.valCxt}.${ie.default.parentData}`),t.var(ie.default.parentDataProperty,(0,Q._)`${ie.default.valCxt}.${ie.default.parentDataProperty}`),t.var(ie.default.rootData,(0,Q._)`${ie.default.valCxt}.${ie.default.rootData}`),e.dynamicRef&&t.var(ie.default.dynamicAnchors,(0,Q._)`${ie.default.valCxt}.${ie.default.dynamicAnchors}`)},()=>{t.var(ie.default.instancePath,(0,Q._)`""`),t.var(ie.default.parentData,(0,Q._)`undefined`),t.var(ie.default.parentDataProperty,(0,Q._)`undefined`),t.var(ie.default.rootData,ie.default.data),e.dynamicRef&&t.var(ie.default.dynamicAnchors,(0,Q._)`{}`)})}function dae(t){let{schema:e,opts:r,gen:n}=t;nj(t,()=>{r.$comment&&e.$comment&&cj(t),yae(t),n.let(ie.default.vErrors,null),n.let(ie.default.errors,0),r.unevaluated&&hae(t),aj(t),wae(t)})}function hae(t){let{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,Q._)`${r}.evaluated`),e.if((0,Q._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,Q._)`${t.evaluated}.props`,(0,Q._)`undefined`)),e.if((0,Q._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,Q._)`${t.evaluated}.items`,(0,Q._)`undefined`))}function ZM(t,e){let r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,Q._)`/*# sourceURL=${r} */`:Q.nil}function pae(t,e){if(ij(t)&&(oj(t),sj(t))){mae(t,e);return}(0,rj.boolOrEmptySchema)(t,e)}function sj({schema:t,self:e}){if(typeof t=="boolean")return!t;for(let r in t)if(e.RULES.all[r])return!0;return!1}function ij(t){return typeof t.schema!="boolean"}function mae(t,e){let{schema:r,gen:n,opts:s}=t;s.$comment&&r.$comment&&cj(t),_ae(t),vae(t);let i=n.const("_errs",ie.default.errors);aj(t,i),n.var(e,(0,Q._)`${i} === ${ie.default.errors}`)}function oj(t){(0,ii.checkUnknownRules)(t),gae(t)}function aj(t,e){if(t.opts.jtd)return ej(t,[],!1,e);let r=(0,QM.getSchemaTypes)(t.schema),n=(0,QM.coerceAndCheckDataType)(t,r);ej(t,r,!n,e)}function gae(t){let{schema:e,errSchemaPath:r,opts:n,self:s}=t;e.$ref&&n.ignoreKeywordsWithRef&&(0,ii.schemaHasRulesButRef)(e,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function yae(t){let{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,ii.checkStrictMode)(t,"default is ignored in the schema root")}function _ae(t){let e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,cae.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function vae(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function cj({gen:t,schemaEnv:e,schema:r,errSchemaPath:n,opts:s}){let i=r.$comment;if(s.$comment===!0)t.code((0,Q._)`${ie.default.self}.logger.log(${i})`);else if(typeof s.$comment=="function"){let o=(0,Q.str)`${n}/$comment`,a=t.scopeValue("root",{ref:e.root});t.code((0,Q._)`${ie.default.self}.opts.$comment(${i}, ${o}, ${a}.schema)`)}}function wae(t){let{gen:e,schemaEnv:r,validateName:n,ValidationError:s,opts:i}=t;r.$async?e.if((0,Q._)`${ie.default.errors} === 0`,()=>e.return(ie.default.data),()=>e.throw((0,Q._)`new ${s}(${ie.default.vErrors})`)):(e.assign((0,Q._)`${n}.errors`,ie.default.vErrors),i.unevaluated&&bae(t),e.return((0,Q._)`${ie.default.errors} === 0`))}function bae({gen:t,evaluated:e,props:r,items:n}){r instanceof Q.Name&&t.assign((0,Q._)`${e}.props`,r),n instanceof Q.Name&&t.assign((0,Q._)`${e}.items`,n)}function ej(t,e,r,n){let{gen:s,schema:i,data:o,allErrors:a,opts:c,self:l}=t,{RULES:u}=l;if(i.$ref&&(c.ignoreKeywordsWithRef||!(0,ii.schemaHasRulesButRef)(i,u))){s.block(()=>uj(t,"$ref",u.all.$ref.definition));return}c.jtd||Eae(t,e),s.block(()=>{for(let p of u.rules)d(p);d(u.post)});function d(p){(0,GE.shouldUseGroup)(i,p)&&(p.type?(s.if((0,jm.checkDataType)(p.type,o,c.strictNumbers)),tj(t,p),e.length===1&&e[0]===p.type&&r&&(s.else(),(0,jm.reportTypeError)(t)),s.endIf()):tj(t,p),a||s.if((0,Q._)`${ie.default.errors} === ${n||0}`))}}function tj(t,e){let{gen:r,schema:n,opts:{useDefaults:s}}=t;s&&(0,aae.assignDefaults)(t,e.type),r.block(()=>{for(let i of e.rules)(0,GE.shouldUseRule)(n,i)&&uj(t,i.keyword,i.definition,e.type)})}function Eae(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(Sae(t,e),t.opts.allowUnionTypes||Tae(t,e),Rae(t,t.dataTypes))}function Sae(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{lj(t.dataTypes,r)||WE(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),Oae(t,e)}}function Tae(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&WE(t,"use allowUnionTypes to allow union type keyword")}function Rae(t,e){let r=t.self.RULES.all;for(let n in r){let s=r[n];if(typeof s=="object"&&(0,GE.shouldUseRule)(t.schema,s)){let{type:i}=s.definition;i.length&&!i.some(o=>$ae(e,o))&&WE(t,`missing type "${i.join(",")}" for keyword "${n}"`)}}}function $ae(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function lj(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function Oae(t,e){let r=[];for(let n of t.dataTypes)lj(e,n)?r.push(n):e.includes("integer")&&n==="number"&&r.push("integer");t.dataTypes=r}function WE(t,e){let r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,ii.checkStrictMode)(t,e,t.opts.strictTypes)}var qm=class{constructor(e,r,n){if((0,_f.validateKeywordUsage)(e,r,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,ii.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",fj(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,_f.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",ie.default.errors))}result(e,r,n){this.failResult((0,Q.not)(e),r,n)}failResult(e,r,n){this.gen.if(e),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,Q.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:r}=this;this.fail((0,Q._)`${r} !== undefined && (${(0,Q.or)(this.invalid$data(),e)})`)}error(e,r,n){if(r){this.setParams(r),this._error(e,n),this.setParams({});return}this._error(e,n)}_error(e,r){(e?yf.reportExtraError:yf.reportError)(this,this.def.error,r)}$dataError(){(0,yf.reportError)(this,this.def.$dataError||yf.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,yf.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,n=Q.nil){this.gen.block(()=>{this.check$data(e,n),r()})}check$data(e=Q.nil,r=Q.nil){if(!this.$data)return;let{gen:n,schemaCode:s,schemaType:i,def:o}=this;n.if((0,Q.or)((0,Q._)`${s} === undefined`,r)),e!==Q.nil&&n.assign(e,!0),(i.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==Q.nil&&n.assign(e,!1)),n.else()}invalid$data(){let{gen:e,schemaCode:r,schemaType:n,def:s,it:i}=this;return(0,Q.or)(o(),a());function o(){if(n.length){if(!(r instanceof Q.Name))throw new Error("ajv implementation error");let c=Array.isArray(n)?n:[n];return(0,Q._)`${(0,jm.checkDataTypes)(c,r,i.opts.strictNumbers,jm.DataType.Wrong)}`}return Q.nil}function a(){if(s.validateSchema){let c=e.scopeValue("validate$data",{ref:s.validateSchema});return(0,Q._)`!${c}(${r})`}return Q.nil}}subschema(e,r){let n=(0,HE.getSubschema)(this.it,e);(0,HE.extendSubschemaData)(n,this.it,e),(0,HE.extendSubschemaMode)(n,e);let s={...this.it,...n,items:void 0,props:void 0};return pae(s,r),s}mergeEvaluated(e,r){let{it:n,gen:s}=this;n.opts.unevaluated&&(n.props!==!0&&e.props!==void 0&&(n.props=ii.mergeEvaluated.props(s,e.props,n.props,r)),n.items!==!0&&e.items!==void 0&&(n.items=ii.mergeEvaluated.items(s,e.items,n.items,r)))}mergeValidEvaluated(e,r){let{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(e,Q.Name)),!0}};Ki.KeywordCxt=qm;function uj(t,e,r,n){let s=new qm(t,r,e);"code"in r?r.code(s,n):s.$data&&r.validate?(0,_f.funcKeywordCode)(s,r):"macro"in r?(0,_f.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,_f.funcKeywordCode)(s,r)}var Pae=/^\/(?:[^~]|~0|~1)*$/,xae=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function fj(t,{dataLevel:e,dataNames:r,dataPathArr:n}){let s,i;if(t==="")return ie.default.rootData;if(t[0]==="/"){if(!Pae.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);s=t,i=ie.default.rootData}else{let l=xae.exec(t);if(!l)throw new Error(`Invalid JSON-pointer: ${t}`);let u=+l[1];if(s=l[2],s==="#"){if(u>=e)throw new Error(c("property/index",u));return n[e-u]}if(u>e)throw new Error(c("data",u));if(i=r[e-u],!s)return i}let o=i,a=s.split("/");for(let l of a)l&&(i=(0,Q._)`${i}${(0,Q.getProperty)((0,ii.unescapeJsonPointer)(l))}`,o=(0,Q._)`${o} && ${i}`);return o;function c(l,u){return`Cannot access ${l} ${u} levels up, current level is ${e}`}}Ki.getData=fj});var Lm=E(JE=>{"use strict";Object.defineProperty(JE,"__esModule",{value:!0});var KE=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};JE.default=KE});var wf=E(QE=>{"use strict";Object.defineProperty(QE,"__esModule",{value:!0});var YE=gf(),XE=class extends Error{constructor(e,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,YE.resolveUrl)(e,r,n),this.missingSchema=(0,YE.normalizeId)((0,YE.getFullPath)(e,this.missingRef))}};QE.default=XE});var Um=E(yn=>{"use strict";Object.defineProperty(yn,"__esModule",{value:!0});yn.resolveSchema=yn.getCompilingSchema=yn.resolveRef=yn.compileSchema=yn.SchemaEnv=void 0;var Kn=pe(),Nae=Lm(),sa=si(),Jn=gf(),dj=Le(),Cae=vf(),Lc=class{constructor(e){var r;this.refs={},this.dynamicAnchors={};let n;typeof e.schema=="object"&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,Jn.normalizeId)(n?.[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=n?.$async,this.refs={}}};yn.SchemaEnv=Lc;function eS(t){let e=hj.call(this,t);if(e)return e;let r=(0,Jn.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new Kn.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i}),a;t.$async&&(a=o.scopeValue("Error",{ref:Nae.default,code:(0,Kn._)`require("ajv/dist/runtime/validation_error").default`}));let c=o.scopeName("validate");t.validateName=c;let l={gen:o,allErrors:this.opts.allErrors,data:sa.default.data,parentData:sa.default.parentData,parentDataProperty:sa.default.parentDataProperty,dataNames:[sa.default.data],dataPathArr:[Kn.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,Kn.stringify)(t.schema)}:{ref:t.schema}),validateName:c,ValidationError:a,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:Kn.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Kn._)`""`,opts:this.opts,self:this},u;try{this._compilations.add(t),(0,Cae.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);let d=o.toString();u=`${o.scopeRefs(sa.default.scope)}return ${d}`,this.opts.code.process&&(u=this.opts.code.process(u,t));let f=new Function(`${sa.default.self}`,`${sa.default.scope}`,u)(this,this.scope.get());if(this.scope.value(c,{ref:f}),f.errors=null,f.schema=t.schema,f.schemaEnv=t,t.$async&&(f.$async=!0),this.opts.code.source===!0&&(f.source={validateName:c,validateCode:d,scopeValues:o._values}),this.opts.unevaluated){let{props:h,items:m}=l;f.evaluated={props:h instanceof Kn.Name?void 0:h,items:m instanceof Kn.Name?void 0:m,dynamicProps:h instanceof Kn.Name,dynamicItems:m instanceof Kn.Name},f.source&&(f.source.evaluated=(0,Kn.stringify)(f.evaluated))}return t.validate=f,t}catch(d){throw delete t.validate,delete t.validateName,u&&this.logger.error("Error compiling schema, function code:",u),d}finally{this._compilations.delete(t)}}yn.compileSchema=eS;function Iae(t,e,r){var n;r=(0,Jn.resolveUrl)(this.opts.uriResolver,e,r);let s=t.refs[r];if(s)return s;let i=Dae.call(this,t,r);if(i===void 0){let o=(n=t.localRefs)===null||n===void 0?void 0:n[r],{schemaId:a}=this.opts;o&&(i=new Lc({schema:o,schemaId:a,root:t,baseId:e}))}if(i!==void 0)return t.refs[r]=Aae.call(this,i)}yn.resolveRef=Iae;function Aae(t){return(0,Jn.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:eS.call(this,t)}function hj(t){for(let e of this._compilations)if(kae(e,t))return e}yn.getCompilingSchema=hj;function kae(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function Dae(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||Fm.call(this,t,e)}function Fm(t,e){let r=this.opts.uriResolver.parse(e),n=(0,Jn._getFullPath)(this.opts.uriResolver,r),s=(0,Jn.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&n===s)return ZE.call(this,r,t);let i=(0,Jn.normalizeId)(n),o=this.refs[i]||this.schemas[i];if(typeof o=="string"){let a=Fm.call(this,t,o);return typeof a?.schema!="object"?void 0:ZE.call(this,r,a)}if(typeof o?.schema=="object"){if(o.validate||eS.call(this,o),i===(0,Jn.normalizeId)(e)){let{schema:a}=o,{schemaId:c}=this.opts,l=a[c];return l&&(s=(0,Jn.resolveUrl)(this.opts.uriResolver,s,l)),new Lc({schema:a,schemaId:c,root:t,baseId:s})}return ZE.call(this,r,o)}}yn.resolveSchema=Fm;var Mae=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function ZE(t,{baseId:e,schema:r,root:n}){var s;if(((s=t.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(let a of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let c=r[(0,dj.unescapeFragment)(a)];if(c===void 0)return;r=c;let l=typeof r=="object"&&r[this.opts.schemaId];!Mae.has(a)&&l&&(e=(0,Jn.resolveUrl)(this.opts.uriResolver,e,l))}let i;if(typeof r!="boolean"&&r.$ref&&!(0,dj.schemaHasRulesButRef)(r,this.RULES)){let a=(0,Jn.resolveUrl)(this.opts.uriResolver,e,r.$ref);i=Fm.call(this,n,a)}let{schemaId:o}=this.opts;if(i=i||new Lc({schema:r,schemaId:o,root:n,baseId:e}),i.schema!==i.root.schema)return i}});var pj=E((bAe,jae)=>{jae.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var gj=E(tS=>{"use strict";Object.defineProperty(tS,"__esModule",{value:!0});var mj=Rc();mj.code='require("ajv/dist/runtime/uri").default';tS.default=mj});var Tj=E(Wt=>{"use strict";Object.defineProperty(Wt,"__esModule",{value:!0});Wt.CodeGen=Wt.Name=Wt.nil=Wt.stringify=Wt.str=Wt._=Wt.KeywordCxt=void 0;var qae=vf();Object.defineProperty(Wt,"KeywordCxt",{enumerable:!0,get:function(){return qae.KeywordCxt}});var Fc=pe();Object.defineProperty(Wt,"_",{enumerable:!0,get:function(){return Fc._}});Object.defineProperty(Wt,"str",{enumerable:!0,get:function(){return Fc.str}});Object.defineProperty(Wt,"stringify",{enumerable:!0,get:function(){return Fc.stringify}});Object.defineProperty(Wt,"nil",{enumerable:!0,get:function(){return Fc.nil}});Object.defineProperty(Wt,"Name",{enumerable:!0,get:function(){return Fc.Name}});Object.defineProperty(Wt,"CodeGen",{enumerable:!0,get:function(){return Fc.CodeGen}});var Lae=Lm(),bj=wf(),Fae=ME(),bf=Um(),Uae=pe(),Ef=gf(),Bm=mf(),nS=Le(),yj=pj(),Bae=gj(),Ej=(t,e)=>new RegExp(t,e);Ej.code="new RegExp";var Vae=["removeAdditional","useDefaults","coerceTypes"],zae=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),Hae={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},Gae={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},_j=200;function Wae(t){var e,r,n,s,i,o,a,c,l,u,d,p,f,h,m,y,g,w,_,v,S,$,T,O,R;let P=t.strict,A=(e=t.code)===null||e===void 0?void 0:e.optimize,N=A===!0||A===void 0?1:A||0,C=(n=(r=t.code)===null||r===void 0?void 0:r.regExp)!==null&&n!==void 0?n:Ej,V=(s=t.uriResolver)!==null&&s!==void 0?s:Bae.default;return{strictSchema:(o=(i=t.strictSchema)!==null&&i!==void 0?i:P)!==null&&o!==void 0?o:!0,strictNumbers:(c=(a=t.strictNumbers)!==null&&a!==void 0?a:P)!==null&&c!==void 0?c:!0,strictTypes:(u=(l=t.strictTypes)!==null&&l!==void 0?l:P)!==null&&u!==void 0?u:"log",strictTuples:(p=(d=t.strictTuples)!==null&&d!==void 0?d:P)!==null&&p!==void 0?p:"log",strictRequired:(h=(f=t.strictRequired)!==null&&f!==void 0?f:P)!==null&&h!==void 0?h:!1,code:t.code?{...t.code,optimize:N,regExp:C}:{optimize:N,regExp:C},loopRequired:(m=t.loopRequired)!==null&&m!==void 0?m:_j,loopEnum:(y=t.loopEnum)!==null&&y!==void 0?y:_j,meta:(g=t.meta)!==null&&g!==void 0?g:!0,messages:(w=t.messages)!==null&&w!==void 0?w:!0,inlineRefs:(_=t.inlineRefs)!==null&&_!==void 0?_:!0,schemaId:(v=t.schemaId)!==null&&v!==void 0?v:"$id",addUsedSchema:(S=t.addUsedSchema)!==null&&S!==void 0?S:!0,validateSchema:($=t.validateSchema)!==null&&$!==void 0?$:!0,validateFormats:(T=t.validateFormats)!==null&&T!==void 0?T:!0,unicodeRegExp:(O=t.unicodeRegExp)!==null&&O!==void 0?O:!0,int32range:(R=t.int32range)!==null&&R!==void 0?R:!0,uriResolver:V}}var Sf=class{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...Wae(e)};let{es5:r,lines:n}=this.opts.code;this.scope=new Uae.ValueScope({scope:{},prefixes:zae,es5:r,lines:n}),this.logger=Zae(e.logger);let s=e.validateFormats;e.validateFormats=!1,this.RULES=(0,Fae.getRules)(),vj.call(this,Hae,e,"NOT SUPPORTED"),vj.call(this,Gae,e,"DEPRECATED","warn"),this._metaOpts=Xae.call(this),e.formats&&Jae.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&Yae.call(this,e.keywords),typeof e.meta=="object"&&this.addMetaSchema(e.meta),Kae.call(this),e.validateFormats=s}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:r,schemaId:n}=this.opts,s=yj;n==="id"&&(s={...yj},s.id=s.$id,delete s.$id),r&&e&&this.addMetaSchema(s,s[n],!1)}defaultMeta(){let{meta:e,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof e=="object"?e[r]||e:void 0}validate(e,r){let n;if(typeof e=="string"){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);let s=n(r);return"$async"in n||(this.errors=n.errors),s}compile(e,r){let n=this._addSchema(e,r);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:n}=this.opts;return s.call(this,e,r);async function s(u,d){await i.call(this,u.$schema);let p=this._addSchema(u,d);return p.validate||o.call(this,p)}async function i(u){u&&!this.getSchema(u)&&await s.call(this,{$ref:u},!0)}async function o(u){try{return this._compileSchemaEnv(u)}catch(d){if(!(d instanceof bj.default))throw d;return a.call(this,d),await c.call(this,d.missingSchema),o.call(this,u)}}function a({missingSchema:u,missingRef:d}){if(this.refs[u])throw new Error(`AnySchema ${u} is loaded but ${d} cannot be resolved`)}async function c(u){let d=await l.call(this,u);this.refs[u]||await i.call(this,d.$schema),this.refs[u]||this.addSchema(d,u,r)}async function l(u){let d=this._loading[u];if(d)return d;try{return await(this._loading[u]=n(u))}finally{delete this._loading[u]}}}addSchema(e,r,n,s=this.opts.validateSchema){if(Array.isArray(e)){for(let o of e)this.addSchema(o,void 0,n,s);return this}let i;if(typeof e=="object"){let{schemaId:o}=this.opts;if(i=e[o],i!==void 0&&typeof i!="string")throw new Error(`schema ${o} must be string`)}return r=(0,Ef.normalizeId)(r||i),this._checkUnique(r),this.schemas[r]=this._addSchema(e,n,r,s,!0),this}addMetaSchema(e,r,n=this.opts.validateSchema){return this.addSchema(e,r,!0,n),this}validateSchema(e,r){if(typeof e=="boolean")return!0;let n;if(n=e.$schema,n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let s=this.validate(n,e);if(!s&&r){let i="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(i);else throw new Error(i)}return s}getSchema(e){let r;for(;typeof(r=wj.call(this,e))=="string";)e=r;if(r===void 0){let{schemaId:n}=this.opts,s=new bf.SchemaEnv({schema:{},schemaId:n});if(r=bf.resolveSchema.call(this,s,e),!r)return;this.refs[e]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=wj.call(this,e);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{let r=e;this._cache.delete(r);let n=e[this.opts.schemaId];return n&&(n=(0,Ef.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let r of e)this.addKeyword(r);return this}addKeyword(e,r){let n;if(typeof e=="string")n=e,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=n);else if(typeof e=="object"&&r===void 0){if(r=e,n=r.keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(tce.call(this,n,r),!r)return(0,nS.eachItem)(n,i=>rS.call(this,i)),this;nce.call(this,r);let s={...r,type:(0,Bm.getJSONTypes)(r.type),schemaType:(0,Bm.getJSONTypes)(r.schemaType)};return(0,nS.eachItem)(n,s.type.length===0?i=>rS.call(this,i,s):i=>s.type.forEach(o=>rS.call(this,i,s,o))),this}getKeyword(e){let r=this.RULES.all[e];return typeof r=="object"?r.definition:!!r}removeKeyword(e){let{RULES:r}=this;delete r.keywords[e],delete r.all[e];for(let n of r.rules){let s=n.rules.findIndex(i=>i.keyword===e);s>=0&&n.rules.splice(s,1)}return this}addFormat(e,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[e]=r,this}errorsText(e=this.errors,{separator:r=", ",dataVar:n="data"}={}){return!e||e.length===0?"No errors":e.map(s=>`${n}${s.instancePath} ${s.message}`).reduce((s,i)=>s+r+i)}$dataMetaSchema(e,r){let n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(let s of r){let i=s.split("/").slice(1),o=e;for(let a of i)o=o[a];for(let a in n){let c=n[a];if(typeof c!="object")continue;let{$data:l}=c.definition,u=o[a];l&&u&&(o[a]=Sj(u))}}return e}_removeAllSchemas(e,r){for(let n in e){let s=e[n];(!r||r.test(n))&&(typeof s=="string"?delete e[n]:s&&!s.meta&&(this._cache.delete(s.schema),delete e[n]))}}_addSchema(e,r,n,s=this.opts.validateSchema,i=this.opts.addUsedSchema){let o,{schemaId:a}=this.opts;if(typeof e=="object")o=e[a];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof e!="boolean")throw new Error("schema must be object or boolean")}let c=this._cache.get(e);if(c!==void 0)return c;n=(0,Ef.normalizeId)(o||n);let l=Ef.getSchemaRefs.call(this,e,n);return c=new bf.SchemaEnv({schema:e,schemaId:a,meta:r,baseId:n,localRefs:l}),this._cache.set(c.schema,c),i&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=c),s&&this.validateSchema(e,!0),c}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):bf.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let r=this.opts;this.opts=this._metaOpts;try{bf.compileSchema.call(this,e)}finally{this.opts=r}}};Sf.ValidationError=Lae.default;Sf.MissingRefError=bj.default;Wt.default=Sf;function vj(t,e,r,n="error"){for(let s in t){let i=s;i in e&&this.logger[n](`${r}: option ${s}. ${t[i]}`)}}function wj(t){return t=(0,Ef.normalizeId)(t),this.schemas[t]||this.refs[t]}function Kae(){let t=this.opts.schemas;if(t)if(Array.isArray(t))this.addSchema(t);else for(let e in t)this.addSchema(t[e],e)}function Jae(){for(let t in this.opts.formats){let e=this.opts.formats[t];e&&this.addFormat(t,e)}}function Yae(t){if(Array.isArray(t)){this.addVocabulary(t);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let e in t){let r=t[e];r.keyword||(r.keyword=e),this.addKeyword(r)}}function Xae(){let t={...this.opts};for(let e of Vae)delete t[e];return t}var Qae={log(){},warn(){},error(){}};function Zae(t){if(t===!1)return Qae;if(t===void 0)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}var ece=/^[a-z_$][a-z0-9_$:-]*$/i;function tce(t,e){let{RULES:r}=this;if((0,nS.eachItem)(t,n=>{if(r.keywords[n])throw new Error(`Keyword ${n} is already defined`);if(!ece.test(n))throw new Error(`Keyword ${n} has invalid name`)}),!!e&&e.$data&&!("code"in e||"validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function rS(t,e,r){var n;let s=e?.post;if(r&&s)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:i}=this,o=s?i.post:i.rules.find(({type:c})=>c===r);if(o||(o={type:r,rules:[]},i.rules.push(o)),i.keywords[t]=!0,!e)return;let a={keyword:t,definition:{...e,type:(0,Bm.getJSONTypes)(e.type),schemaType:(0,Bm.getJSONTypes)(e.schemaType)}};e.before?rce.call(this,o,a,e.before):o.rules.push(a),i.all[t]=a,(n=e.implements)===null||n===void 0||n.forEach(c=>this.addKeyword(c))}function rce(t,e,r){let n=t.rules.findIndex(s=>s.keyword===r);n>=0?t.rules.splice(n,0,e):(t.rules.push(e),this.logger.warn(`rule ${r} is not defined`))}function nce(t){let{metaSchema:e}=t;e!==void 0&&(t.$data&&this.opts.$data&&(e=Sj(e)),t.validateSchema=this.compile(e,!0))}var sce={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Sj(t){return{anyOf:[t,sce]}}});var Rj=E(sS=>{"use strict";Object.defineProperty(sS,"__esModule",{value:!0});var ice={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};sS.default=ice});var xj=E(ia=>{"use strict";Object.defineProperty(ia,"__esModule",{value:!0});ia.callRef=ia.getValidate=void 0;var oce=wf(),$j=gn(),Hr=pe(),Uc=si(),Oj=Um(),Vm=Le(),ace={keyword:"$ref",schemaType:"string",code(t){let{gen:e,schema:r,it:n}=t,{baseId:s,schemaEnv:i,validateName:o,opts:a,self:c}=n,{root:l}=i;if((r==="#"||r==="#/")&&s===l.baseId)return d();let u=Oj.resolveRef.call(c,l,s,r);if(u===void 0)throw new oce.default(n.opts.uriResolver,s,r);if(u instanceof Oj.SchemaEnv)return p(u);return f(u);function d(){if(i===l)return zm(t,o,i,i.$async);let h=e.scopeValue("root",{ref:l});return zm(t,(0,Hr._)`${h}.validate`,l,l.$async)}function p(h){let m=Pj(t,h);zm(t,m,h,h.$async)}function f(h){let m=e.scopeValue("schema",a.code.source===!0?{ref:h,code:(0,Hr.stringify)(h)}:{ref:h}),y=e.name("valid"),g=t.subschema({schema:h,dataTypes:[],schemaPath:Hr.nil,topSchemaRef:m,errSchemaPath:r},y);t.mergeEvaluated(g),t.ok(y)}}};function Pj(t,e){let{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,Hr._)`${r.scopeValue("wrapper",{ref:e})}.validate`}ia.getValidate=Pj;function zm(t,e,r,n){let{gen:s,it:i}=t,{allErrors:o,schemaEnv:a,opts:c}=i,l=c.passContext?Uc.default.this:Hr.nil;n?u():d();function u(){if(!a.$async)throw new Error("async schema referenced by sync schema");let h=s.let("valid");s.try(()=>{s.code((0,Hr._)`await ${(0,$j.callValidateCode)(t,e,l)}`),f(e),o||s.assign(h,!0)},m=>{s.if((0,Hr._)`!(${m} instanceof ${i.ValidationError})`,()=>s.throw(m)),p(m),o||s.assign(h,!1)}),t.ok(h)}function d(){t.result((0,$j.callValidateCode)(t,e,l),()=>f(e),()=>p(e))}function p(h){let m=(0,Hr._)`${h}.errors`;s.assign(Uc.default.vErrors,(0,Hr._)`${Uc.default.vErrors} === null ? ${m} : ${Uc.default.vErrors}.concat(${m})`),s.assign(Uc.default.errors,(0,Hr._)`${Uc.default.vErrors}.length`)}function f(h){var m;if(!i.opts.unevaluated)return;let y=(m=r?.validate)===null||m===void 0?void 0:m.evaluated;if(i.props!==!0)if(y&&!y.dynamicProps)y.props!==void 0&&(i.props=Vm.mergeEvaluated.props(s,y.props,i.props));else{let g=s.var("props",(0,Hr._)`${h}.evaluated.props`);i.props=Vm.mergeEvaluated.props(s,g,i.props,Hr.Name)}if(i.items!==!0)if(y&&!y.dynamicItems)y.items!==void 0&&(i.items=Vm.mergeEvaluated.items(s,y.items,i.items));else{let g=s.var("items",(0,Hr._)`${h}.evaluated.items`);i.items=Vm.mergeEvaluated.items(s,g,i.items,Hr.Name)}}}ia.callRef=zm;ia.default=ace});var Nj=E(iS=>{"use strict";Object.defineProperty(iS,"__esModule",{value:!0});var cce=Rj(),lce=xj(),uce=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",cce.default,lce.default];iS.default=uce});var Cj=E(oS=>{"use strict";Object.defineProperty(oS,"__esModule",{value:!0});var Hm=pe(),Ji=Hm.operators,Gm={maximum:{okStr:"<=",ok:Ji.LTE,fail:Ji.GT},minimum:{okStr:">=",ok:Ji.GTE,fail:Ji.LT},exclusiveMaximum:{okStr:"<",ok:Ji.LT,fail:Ji.GTE},exclusiveMinimum:{okStr:">",ok:Ji.GT,fail:Ji.LTE}},fce={message:({keyword:t,schemaCode:e})=>(0,Hm.str)`must be ${Gm[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,Hm._)`{comparison: ${Gm[t].okStr}, limit: ${e}}`},dce={keyword:Object.keys(Gm),type:"number",schemaType:"number",$data:!0,error:fce,code(t){let{keyword:e,data:r,schemaCode:n}=t;t.fail$data((0,Hm._)`${r} ${Gm[e].fail} ${n} || isNaN(${r})`)}};oS.default=dce});var Ij=E(aS=>{"use strict";Object.defineProperty(aS,"__esModule",{value:!0});var Tf=pe(),hce={message:({schemaCode:t})=>(0,Tf.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,Tf._)`{multipleOf: ${t}}`},pce={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:hce,code(t){let{gen:e,data:r,schemaCode:n,it:s}=t,i=s.opts.multipleOfPrecision,o=e.let("res"),a=i?(0,Tf._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${i}`:(0,Tf._)`${o} !== parseInt(${o})`;t.fail$data((0,Tf._)`(${n} === 0 || (${o} = ${r}/${n}, ${a}))`)}};aS.default=pce});var kj=E(cS=>{"use strict";Object.defineProperty(cS,"__esModule",{value:!0});function Aj(t){let e=t.length,r=0,n=0,s;for(;n<e;)r++,s=t.charCodeAt(n++),s>=55296&&s<=56319&&n<e&&(s=t.charCodeAt(n),(s&64512)===56320&&n++);return r}cS.default=Aj;Aj.code='require("ajv/dist/runtime/ucs2length").default'});var Dj=E(lS=>{"use strict";Object.defineProperty(lS,"__esModule",{value:!0});var oa=pe(),mce=Le(),gce=kj(),yce={message({keyword:t,schemaCode:e}){let r=t==="maxLength"?"more":"fewer";return(0,oa.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,oa._)`{limit: ${t}}`},_ce={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:yce,code(t){let{keyword:e,data:r,schemaCode:n,it:s}=t,i=e==="maxLength"?oa.operators.GT:oa.operators.LT,o=s.opts.unicode===!1?(0,oa._)`${r}.length`:(0,oa._)`${(0,mce.useFunc)(t.gen,gce.default)}(${r})`;t.fail$data((0,oa._)`${o} ${i} ${n}`)}};lS.default=_ce});var Mj=E(uS=>{"use strict";Object.defineProperty(uS,"__esModule",{value:!0});var vce=gn(),Wm=pe(),wce={message:({schemaCode:t})=>(0,Wm.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,Wm._)`{pattern: ${t}}`},bce={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:wce,code(t){let{data:e,$data:r,schema:n,schemaCode:s,it:i}=t,o=i.opts.unicodeRegExp?"u":"",a=r?(0,Wm._)`(new RegExp(${s}, ${o}))`:(0,vce.usePattern)(t,n);t.fail$data((0,Wm._)`!${a}.test(${e})`)}};uS.default=bce});var jj=E(fS=>{"use strict";Object.defineProperty(fS,"__esModule",{value:!0});var Rf=pe(),Ece={message({keyword:t,schemaCode:e}){let r=t==="maxProperties"?"more":"fewer";return(0,Rf.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,Rf._)`{limit: ${t}}`},Sce={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Ece,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxProperties"?Rf.operators.GT:Rf.operators.LT;t.fail$data((0,Rf._)`Object.keys(${r}).length ${s} ${n}`)}};fS.default=Sce});var qj=E(dS=>{"use strict";Object.defineProperty(dS,"__esModule",{value:!0});var $f=gn(),Of=pe(),Tce=Le(),Rce={message:({params:{missingProperty:t}})=>(0,Of.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,Of._)`{missingProperty: ${t}}`},$ce={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Rce,code(t){let{gen:e,schema:r,schemaCode:n,data:s,$data:i,it:o}=t,{opts:a}=o;if(!i&&r.length===0)return;let c=r.length>=a.loopRequired;if(o.allErrors?l():u(),a.strictRequired){let f=t.parentSchema.properties,{definedProperties:h}=t.it;for(let m of r)if(f?.[m]===void 0&&!h.has(m)){let y=o.schemaEnv.baseId+o.errSchemaPath,g=`required property "${m}" is not defined at "${y}" (strictRequired)`;(0,Tce.checkStrictMode)(o,g,o.opts.strictRequired)}}function l(){if(c||i)t.block$data(Of.nil,d);else for(let f of r)(0,$f.checkReportMissingProp)(t,f)}function u(){let f=e.let("missing");if(c||i){let h=e.let("valid",!0);t.block$data(h,()=>p(f,h)),t.ok(h)}else e.if((0,$f.checkMissingProp)(t,r,f)),(0,$f.reportMissingProp)(t,f),e.else()}function d(){e.forOf("prop",n,f=>{t.setParams({missingProperty:f}),e.if((0,$f.noPropertyInData)(e,s,f,a.ownProperties),()=>t.error())})}function p(f,h){t.setParams({missingProperty:f}),e.forOf(f,n,()=>{e.assign(h,(0,$f.propertyInData)(e,s,f,a.ownProperties)),e.if((0,Of.not)(h),()=>{t.error(),e.break()})},Of.nil)}}};dS.default=$ce});var Lj=E(hS=>{"use strict";Object.defineProperty(hS,"__esModule",{value:!0});var Pf=pe(),Oce={message({keyword:t,schemaCode:e}){let r=t==="maxItems"?"more":"fewer";return(0,Pf.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,Pf._)`{limit: ${t}}`},Pce={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Oce,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxItems"?Pf.operators.GT:Pf.operators.LT;t.fail$data((0,Pf._)`${r}.length ${s} ${n}`)}};hS.default=Pce});var Km=E(pS=>{"use strict";Object.defineProperty(pS,"__esModule",{value:!0});var Fj=Zs();Fj.code='require("ajv/dist/runtime/equal").default';pS.default=Fj});var Uj=E(gS=>{"use strict";Object.defineProperty(gS,"__esModule",{value:!0});var mS=mf(),Kt=pe(),xce=Le(),Nce=Km(),Cce={message:({params:{i:t,j:e}})=>(0,Kt.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,Kt._)`{i: ${t}, j: ${e}}`},Ice={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:Cce,code(t){let{gen:e,data:r,$data:n,schema:s,parentSchema:i,schemaCode:o,it:a}=t;if(!n&&!s)return;let c=e.let("valid"),l=i.items?(0,mS.getSchemaTypes)(i.items):[];t.block$data(c,u,(0,Kt._)`${o} === false`),t.ok(c);function u(){let h=e.let("i",(0,Kt._)`${r}.length`),m=e.let("j");t.setParams({i:h,j:m}),e.assign(c,!0),e.if((0,Kt._)`${h} > 1`,()=>(d()?p:f)(h,m))}function d(){return l.length>0&&!l.some(h=>h==="object"||h==="array")}function p(h,m){let y=e.name("item"),g=(0,mS.checkDataTypes)(l,y,a.opts.strictNumbers,mS.DataType.Wrong),w=e.const("indices",(0,Kt._)`{}`);e.for((0,Kt._)`;${h}--;`,()=>{e.let(y,(0,Kt._)`${r}[${h}]`),e.if(g,(0,Kt._)`continue`),l.length>1&&e.if((0,Kt._)`typeof ${y} == "string"`,(0,Kt._)`${y} += "_"`),e.if((0,Kt._)`typeof ${w}[${y}] == "number"`,()=>{e.assign(m,(0,Kt._)`${w}[${y}]`),t.error(),e.assign(c,!1).break()}).code((0,Kt._)`${w}[${y}] = ${h}`)})}function f(h,m){let y=(0,xce.useFunc)(e,Nce.default),g=e.name("outer");e.label(g).for((0,Kt._)`;${h}--;`,()=>e.for((0,Kt._)`${m} = ${h}; ${m}--;`,()=>e.if((0,Kt._)`${y}(${r}[${h}], ${r}[${m}])`,()=>{t.error(),e.assign(c,!1).break(g)})))}}};gS.default=Ice});var Bj=E(_S=>{"use strict";Object.defineProperty(_S,"__esModule",{value:!0});var yS=pe(),Ace=Le(),kce=Km(),Dce={message:"must be equal to constant",params:({schemaCode:t})=>(0,yS._)`{allowedValue: ${t}}`},Mce={keyword:"const",$data:!0,error:Dce,code(t){let{gen:e,data:r,$data:n,schemaCode:s,schema:i}=t;n||i&&typeof i=="object"?t.fail$data((0,yS._)`!${(0,Ace.useFunc)(e,kce.default)}(${r}, ${s})`):t.fail((0,yS._)`${i} !== ${r}`)}};_S.default=Mce});var Vj=E(vS=>{"use strict";Object.defineProperty(vS,"__esModule",{value:!0});var xf=pe(),jce=Le(),qce=Km(),Lce={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,xf._)`{allowedValues: ${t}}`},Fce={keyword:"enum",schemaType:"array",$data:!0,error:Lce,code(t){let{gen:e,data:r,$data:n,schema:s,schemaCode:i,it:o}=t;if(!n&&s.length===0)throw new Error("enum must have non-empty array");let a=s.length>=o.opts.loopEnum,c,l=()=>c??(c=(0,jce.useFunc)(e,qce.default)),u;if(a||n)u=e.let("valid"),t.block$data(u,d);else{if(!Array.isArray(s))throw new Error("ajv implementation error");let f=e.const("vSchema",i);u=(0,xf.or)(...s.map((h,m)=>p(f,m)))}t.pass(u);function d(){e.assign(u,!1),e.forOf("v",i,f=>e.if((0,xf._)`${l()}(${r}, ${f})`,()=>e.assign(u,!0).break()))}function p(f,h){let m=s[h];return typeof m=="object"&&m!==null?(0,xf._)`${l()}(${r}, ${f}[${h}])`:(0,xf._)`${r} === ${m}`}}};vS.default=Fce});var zj=E(wS=>{"use strict";Object.defineProperty(wS,"__esModule",{value:!0});var Uce=Cj(),Bce=Ij(),Vce=Dj(),zce=Mj(),Hce=jj(),Gce=qj(),Wce=Lj(),Kce=Uj(),Jce=Bj(),Yce=Vj(),Xce=[Uce.default,Bce.default,Vce.default,zce.default,Hce.default,Gce.default,Wce.default,Kce.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},Jce.default,Yce.default];wS.default=Xce});var ES=E(Nf=>{"use strict";Object.defineProperty(Nf,"__esModule",{value:!0});Nf.validateAdditionalItems=void 0;var aa=pe(),bS=Le(),Qce={message:({params:{len:t}})=>(0,aa.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,aa._)`{limit: ${t}}`},Zce={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:Qce,code(t){let{parentSchema:e,it:r}=t,{items:n}=e;if(!Array.isArray(n)){(0,bS.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}Hj(t,n)}};function Hj(t,e){let{gen:r,schema:n,data:s,keyword:i,it:o}=t;o.items=!0;let a=r.const("len",(0,aa._)`${s}.length`);if(n===!1)t.setParams({len:e.length}),t.pass((0,aa._)`${a} <= ${e.length}`);else if(typeof n=="object"&&!(0,bS.alwaysValidSchema)(o,n)){let l=r.var("valid",(0,aa._)`${a} <= ${e.length}`);r.if((0,aa.not)(l),()=>c(l)),t.ok(l)}function c(l){r.forRange("i",e.length,a,u=>{t.subschema({keyword:i,dataProp:u,dataPropType:bS.Type.Num},l),o.allErrors||r.if((0,aa.not)(l),()=>r.break())})}}Nf.validateAdditionalItems=Hj;Nf.default=Zce});var SS=E(Cf=>{"use strict";Object.defineProperty(Cf,"__esModule",{value:!0});Cf.validateTuple=void 0;var Gj=pe(),Jm=Le(),ele=gn(),tle={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){let{schema:e,it:r}=t;if(Array.isArray(e))return Wj(t,"additionalItems",e);r.items=!0,!(0,Jm.alwaysValidSchema)(r,e)&&t.ok((0,ele.validateArray)(t))}};function Wj(t,e,r=t.schema){let{gen:n,parentSchema:s,data:i,keyword:o,it:a}=t;u(s),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=Jm.mergeEvaluated.items(n,r.length,a.items));let c=n.name("valid"),l=n.const("len",(0,Gj._)`${i}.length`);r.forEach((d,p)=>{(0,Jm.alwaysValidSchema)(a,d)||(n.if((0,Gj._)`${l} > ${p}`,()=>t.subschema({keyword:o,schemaProp:p,dataProp:p},c)),t.ok(c))});function u(d){let{opts:p,errSchemaPath:f}=a,h=r.length,m=h===d.minItems&&(h===d.maxItems||d[e]===!1);if(p.strictTuples&&!m){let y=`"${o}" is ${h}-tuple, but minItems or maxItems/${e} are not specified or different at path "${f}"`;(0,Jm.checkStrictMode)(a,y,p.strictTuples)}}}Cf.validateTuple=Wj;Cf.default=tle});var Kj=E(TS=>{"use strict";Object.defineProperty(TS,"__esModule",{value:!0});var rle=SS(),nle={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,rle.validateTuple)(t,"items")};TS.default=nle});var Yj=E(RS=>{"use strict";Object.defineProperty(RS,"__esModule",{value:!0});var Jj=pe(),sle=Le(),ile=gn(),ole=ES(),ale={message:({params:{len:t}})=>(0,Jj.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,Jj._)`{limit: ${t}}`},cle={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:ale,code(t){let{schema:e,parentSchema:r,it:n}=t,{prefixItems:s}=r;n.items=!0,!(0,sle.alwaysValidSchema)(n,e)&&(s?(0,ole.validateAdditionalItems)(t,s):t.ok((0,ile.validateArray)(t)))}};RS.default=cle});var Xj=E($S=>{"use strict";Object.defineProperty($S,"__esModule",{value:!0});var _n=pe(),Ym=Le(),lle={message:({params:{min:t,max:e}})=>e===void 0?(0,_n.str)`must contain at least ${t} valid item(s)`:(0,_n.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,_n._)`{minContains: ${t}}`:(0,_n._)`{minContains: ${t}, maxContains: ${e}}`},ule={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:lle,code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:i}=t,o,a,{minContains:c,maxContains:l}=n;i.opts.next?(o=c===void 0?1:c,a=l):o=1;let u=e.const("len",(0,_n._)`${s}.length`);if(t.setParams({min:o,max:a}),a===void 0&&o===0){(0,Ym.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,Ym.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,Ym.alwaysValidSchema)(i,r)){let m=(0,_n._)`${u} >= ${o}`;a!==void 0&&(m=(0,_n._)`${m} && ${u} <= ${a}`),t.pass(m);return}i.items=!0;let d=e.name("valid");a===void 0&&o===1?f(d,()=>e.if(d,()=>e.break())):o===0?(e.let(d,!0),a!==void 0&&e.if((0,_n._)`${s}.length > 0`,p)):(e.let(d,!1),p()),t.result(d,()=>t.reset());function p(){let m=e.name("_valid"),y=e.let("count",0);f(m,()=>e.if(m,()=>h(y)))}function f(m,y){e.forRange("i",0,u,g=>{t.subschema({keyword:"contains",dataProp:g,dataPropType:Ym.Type.Num,compositeRule:!0},m),y()})}function h(m){e.code((0,_n._)`${m}++`),a===void 0?e.if((0,_n._)`${m} >= ${o}`,()=>e.assign(d,!0).break()):(e.if((0,_n._)`${m} > ${a}`,()=>e.assign(d,!1).break()),o===1?e.assign(d,!0):e.if((0,_n._)`${m} >= ${o}`,()=>e.assign(d,!0)))}}};$S.default=ule});var eq=E($s=>{"use strict";Object.defineProperty($s,"__esModule",{value:!0});$s.validateSchemaDeps=$s.validatePropertyDeps=$s.error=void 0;var OS=pe(),fle=Le(),If=gn();$s.error={message:({params:{property:t,depsCount:e,deps:r}})=>{let n=e===1?"property":"properties";return(0,OS.str)`must have ${n} ${r} when property ${t} is present`},params:({params:{property:t,depsCount:e,deps:r,missingProperty:n}})=>(0,OS._)`{property: ${t},
    missingProperty: ${n},
    depsCount: ${e},
    deps: ${r}}`};var dle={keyword:"dependencies",type:"object",schemaType:"object",error:$s.error,code(t){let[e,r]=hle(t);Qj(t,e),Zj(t,r)}};function hle({schema:t}){let e={},r={};for(let n in t){if(n==="__proto__")continue;let s=Array.isArray(t[n])?e:r;s[n]=t[n]}return[e,r]}function Qj(t,e=t.schema){let{gen:r,data:n,it:s}=t;if(Object.keys(e).length===0)return;let i=r.let("missing");for(let o in e){let a=e[o];if(a.length===0)continue;let c=(0,If.propertyInData)(r,n,o,s.opts.ownProperties);t.setParams({property:o,depsCount:a.length,deps:a.join(", ")}),s.allErrors?r.if(c,()=>{for(let l of a)(0,If.checkReportMissingProp)(t,l)}):(r.if((0,OS._)`${c} && (${(0,If.checkMissingProp)(t,a,i)})`),(0,If.reportMissingProp)(t,i),r.else())}}$s.validatePropertyDeps=Qj;function Zj(t,e=t.schema){let{gen:r,data:n,keyword:s,it:i}=t,o=r.name("valid");for(let a in e)(0,fle.alwaysValidSchema)(i,e[a])||(r.if((0,If.propertyInData)(r,n,a,i.opts.ownProperties),()=>{let c=t.subschema({keyword:s,schemaProp:a},o);t.mergeValidEvaluated(c,o)},()=>r.var(o,!0)),t.ok(o))}$s.validateSchemaDeps=Zj;$s.default=dle});var rq=E(PS=>{"use strict";Object.defineProperty(PS,"__esModule",{value:!0});var tq=pe(),ple=Le(),mle={message:"property name must be valid",params:({params:t})=>(0,tq._)`{propertyName: ${t.propertyName}}`},gle={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:mle,code(t){let{gen:e,schema:r,data:n,it:s}=t;if((0,ple.alwaysValidSchema)(s,r))return;let i=e.name("valid");e.forIn("key",n,o=>{t.setParams({propertyName:o}),t.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},i),e.if((0,tq.not)(i),()=>{t.error(!0),s.allErrors||e.break()})}),t.ok(i)}};PS.default=gle});var NS=E(xS=>{"use strict";Object.defineProperty(xS,"__esModule",{value:!0});var Xm=gn(),Yn=pe(),yle=si(),Qm=Le(),_le={message:"must NOT have additional properties",params:({params:t})=>(0,Yn._)`{additionalProperty: ${t.additionalProperty}}`},vle={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:_le,code(t){let{gen:e,schema:r,parentSchema:n,data:s,errsCount:i,it:o}=t;if(!i)throw new Error("ajv implementation error");let{allErrors:a,opts:c}=o;if(o.props=!0,c.removeAdditional!=="all"&&(0,Qm.alwaysValidSchema)(o,r))return;let l=(0,Xm.allSchemaProperties)(n.properties),u=(0,Xm.allSchemaProperties)(n.patternProperties);d(),t.ok((0,Yn._)`${i} === ${yle.default.errors}`);function d(){e.forIn("key",s,y=>{!l.length&&!u.length?h(y):e.if(p(y),()=>h(y))})}function p(y){let g;if(l.length>8){let w=(0,Qm.schemaRefOrVal)(o,n.properties,"properties");g=(0,Xm.isOwnProperty)(e,w,y)}else l.length?g=(0,Yn.or)(...l.map(w=>(0,Yn._)`${y} === ${w}`)):g=Yn.nil;return u.length&&(g=(0,Yn.or)(g,...u.map(w=>(0,Yn._)`${(0,Xm.usePattern)(t,w)}.test(${y})`))),(0,Yn.not)(g)}function f(y){e.code((0,Yn._)`delete ${s}[${y}]`)}function h(y){if(c.removeAdditional==="all"||c.removeAdditional&&r===!1){f(y);return}if(r===!1){t.setParams({additionalProperty:y}),t.error(),a||e.break();return}if(typeof r=="object"&&!(0,Qm.alwaysValidSchema)(o,r)){let g=e.name("valid");c.removeAdditional==="failing"?(m(y,g,!1),e.if((0,Yn.not)(g),()=>{t.reset(),f(y)})):(m(y,g),a||e.if((0,Yn.not)(g),()=>e.break()))}}function m(y,g,w){let _={keyword:"additionalProperties",dataProp:y,dataPropType:Qm.Type.Str};w===!1&&Object.assign(_,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(_,g)}}};xS.default=vle});var iq=E(IS=>{"use strict";Object.defineProperty(IS,"__esModule",{value:!0});var wle=vf(),nq=gn(),CS=Le(),sq=NS(),ble={keyword:"properties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:i}=t;i.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&sq.default.code(new wle.KeywordCxt(i,sq.default,"additionalProperties"));let o=(0,nq.allSchemaProperties)(r);for(let d of o)i.definedProperties.add(d);i.opts.unevaluated&&o.length&&i.props!==!0&&(i.props=CS.mergeEvaluated.props(e,(0,CS.toHash)(o),i.props));let a=o.filter(d=>!(0,CS.alwaysValidSchema)(i,r[d]));if(a.length===0)return;let c=e.name("valid");for(let d of a)l(d)?u(d):(e.if((0,nq.propertyInData)(e,s,d,i.opts.ownProperties)),u(d),i.allErrors||e.else().var(c,!0),e.endIf()),t.it.definedProperties.add(d),t.ok(c);function l(d){return i.opts.useDefaults&&!i.compositeRule&&r[d].default!==void 0}function u(d){t.subschema({keyword:"properties",schemaProp:d,dataProp:d},c)}}};IS.default=ble});var lq=E(AS=>{"use strict";Object.defineProperty(AS,"__esModule",{value:!0});var oq=gn(),Zm=pe(),aq=Le(),cq=Le(),Ele={keyword:"patternProperties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,data:n,parentSchema:s,it:i}=t,{opts:o}=i,a=(0,oq.allSchemaProperties)(r),c=a.filter(m=>(0,aq.alwaysValidSchema)(i,r[m]));if(a.length===0||c.length===a.length&&(!i.opts.unevaluated||i.props===!0))return;let l=o.strictSchema&&!o.allowMatchingProperties&&s.properties,u=e.name("valid");i.props!==!0&&!(i.props instanceof Zm.Name)&&(i.props=(0,cq.evaluatedPropsToName)(e,i.props));let{props:d}=i;p();function p(){for(let m of a)l&&f(m),i.allErrors?h(m):(e.var(u,!0),h(m),e.if(u))}function f(m){for(let y in l)new RegExp(m).test(y)&&(0,aq.checkStrictMode)(i,`property ${y} matches pattern ${m} (use allowMatchingProperties)`)}function h(m){e.forIn("key",n,y=>{e.if((0,Zm._)`${(0,oq.usePattern)(t,m)}.test(${y})`,()=>{let g=c.includes(m);g||t.subschema({keyword:"patternProperties",schemaProp:m,dataProp:y,dataPropType:cq.Type.Str},u),i.opts.unevaluated&&d!==!0?e.assign((0,Zm._)`${d}[${y}]`,!0):!g&&!i.allErrors&&e.if((0,Zm.not)(u),()=>e.break())})})}}};AS.default=Ele});var uq=E(kS=>{"use strict";Object.defineProperty(kS,"__esModule",{value:!0});var Sle=Le(),Tle={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){let{gen:e,schema:r,it:n}=t;if((0,Sle.alwaysValidSchema)(n,r)){t.fail();return}let s=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),t.failResult(s,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};kS.default=Tle});var fq=E(DS=>{"use strict";Object.defineProperty(DS,"__esModule",{value:!0});var Rle=gn(),$le={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Rle.validateUnion,error:{message:"must match a schema in anyOf"}};DS.default=$le});var dq=E(MS=>{"use strict";Object.defineProperty(MS,"__esModule",{value:!0});var eg=pe(),Ole=Le(),Ple={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,eg._)`{passingSchemas: ${t.passing}}`},xle={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Ple,code(t){let{gen:e,schema:r,parentSchema:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&n.discriminator)return;let i=r,o=e.let("valid",!1),a=e.let("passing",null),c=e.name("_valid");t.setParams({passing:a}),e.block(l),t.result(o,()=>t.reset(),()=>t.error(!0));function l(){i.forEach((u,d)=>{let p;(0,Ole.alwaysValidSchema)(s,u)?e.var(c,!0):p=t.subschema({keyword:"oneOf",schemaProp:d,compositeRule:!0},c),d>0&&e.if((0,eg._)`${c} && ${o}`).assign(o,!1).assign(a,(0,eg._)`[${a}, ${d}]`).else(),e.if(c,()=>{e.assign(o,!0),e.assign(a,d),p&&t.mergeEvaluated(p,eg.Name)})})}}};MS.default=xle});var hq=E(jS=>{"use strict";Object.defineProperty(jS,"__esModule",{value:!0});var Nle=Le(),Cle={keyword:"allOf",schemaType:"array",code(t){let{gen:e,schema:r,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");let s=e.name("valid");r.forEach((i,o)=>{if((0,Nle.alwaysValidSchema)(n,i))return;let a=t.subschema({keyword:"allOf",schemaProp:o},s);t.ok(s),t.mergeEvaluated(a)})}};jS.default=Cle});var gq=E(qS=>{"use strict";Object.defineProperty(qS,"__esModule",{value:!0});var tg=pe(),mq=Le(),Ile={message:({params:t})=>(0,tg.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,tg._)`{failingKeyword: ${t.ifClause}}`},Ale={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:Ile,code(t){let{gen:e,parentSchema:r,it:n}=t;r.then===void 0&&r.else===void 0&&(0,mq.checkStrictMode)(n,'"if" without "then" and "else" is ignored');let s=pq(n,"then"),i=pq(n,"else");if(!s&&!i)return;let o=e.let("valid",!0),a=e.name("_valid");if(c(),t.reset(),s&&i){let u=e.let("ifClause");t.setParams({ifClause:u}),e.if(a,l("then",u),l("else",u))}else s?e.if(a,l("then")):e.if((0,tg.not)(a),l("else"));t.pass(o,()=>t.error(!0));function c(){let u=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);t.mergeEvaluated(u)}function l(u,d){return()=>{let p=t.subschema({keyword:u},a);e.assign(o,a),t.mergeValidEvaluated(p,o),d?e.assign(d,(0,tg._)`${u}`):t.setParams({ifClause:u})}}}};function pq(t,e){let r=t.schema[e];return r!==void 0&&!(0,mq.alwaysValidSchema)(t,r)}qS.default=Ale});var yq=E(LS=>{"use strict";Object.defineProperty(LS,"__esModule",{value:!0});var kle=Le(),Dle={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,kle.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};LS.default=Dle});var _q=E(FS=>{"use strict";Object.defineProperty(FS,"__esModule",{value:!0});var Mle=ES(),jle=Kj(),qle=SS(),Lle=Yj(),Fle=Xj(),Ule=eq(),Ble=rq(),Vle=NS(),zle=iq(),Hle=lq(),Gle=uq(),Wle=fq(),Kle=dq(),Jle=hq(),Yle=gq(),Xle=yq();function Qle(t=!1){let e=[Gle.default,Wle.default,Kle.default,Jle.default,Yle.default,Xle.default,Ble.default,Vle.default,Ule.default,zle.default,Hle.default];return t?e.push(jle.default,Lle.default):e.push(Mle.default,qle.default),e.push(Fle.default),e}FS.default=Qle});var vq=E(US=>{"use strict";Object.defineProperty(US,"__esModule",{value:!0});var bt=pe(),Zle={message:({schemaCode:t})=>(0,bt.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,bt._)`{format: ${t}}`},eue={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:Zle,code(t,e){let{gen:r,data:n,$data:s,schema:i,schemaCode:o,it:a}=t,{opts:c,errSchemaPath:l,schemaEnv:u,self:d}=a;if(!c.validateFormats)return;s?p():f();function p(){let h=r.scopeValue("formats",{ref:d.formats,code:c.code.formats}),m=r.const("fDef",(0,bt._)`${h}[${o}]`),y=r.let("fType"),g=r.let("format");r.if((0,bt._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>r.assign(y,(0,bt._)`${m}.type || "string"`).assign(g,(0,bt._)`${m}.validate`),()=>r.assign(y,(0,bt._)`"string"`).assign(g,m)),t.fail$data((0,bt.or)(w(),_()));function w(){return c.strictSchema===!1?bt.nil:(0,bt._)`${o} && !${g}`}function _(){let v=u.$async?(0,bt._)`(${m}.async ? await ${g}(${n}) : ${g}(${n}))`:(0,bt._)`${g}(${n})`,S=(0,bt._)`(typeof ${g} == "function" ? ${v} : ${g}.test(${n}))`;return(0,bt._)`${g} && ${g} !== true && ${y} === ${e} && !${S}`}}function f(){let h=d.formats[i];if(!h){w();return}if(h===!0)return;let[m,y,g]=_(h);m===e&&t.pass(v());function w(){if(c.strictSchema===!1){d.logger.warn(S());return}throw new Error(S());function S(){return`unknown format "${i}" ignored in schema at path "${l}"`}}function _(S){let $=S instanceof RegExp?(0,bt.regexpCode)(S):c.code.formats?(0,bt._)`${c.code.formats}${(0,bt.getProperty)(i)}`:void 0,T=r.scopeValue("formats",{key:i,ref:S,code:$});return typeof S=="object"&&!(S instanceof RegExp)?[S.type||"string",S.validate,(0,bt._)`${T}.validate`]:["string",S,T]}function v(){if(typeof h=="object"&&!(h instanceof RegExp)&&h.async){if(!u.$async)throw new Error("async format in sync schema");return(0,bt._)`await ${g}(${n})`}return typeof y=="function"?(0,bt._)`${g}(${n})`:(0,bt._)`${g}.test(${n})`}}}};US.default=eue});var wq=E(BS=>{"use strict";Object.defineProperty(BS,"__esModule",{value:!0});var tue=vq(),rue=[tue.default];BS.default=rue});var bq=E(Bc=>{"use strict";Object.defineProperty(Bc,"__esModule",{value:!0});Bc.contentVocabulary=Bc.metadataVocabulary=void 0;Bc.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Bc.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var Sq=E(VS=>{"use strict";Object.defineProperty(VS,"__esModule",{value:!0});var nue=Nj(),sue=zj(),iue=_q(),oue=wq(),Eq=bq(),aue=[nue.default,sue.default,(0,iue.default)(),oue.default,Eq.metadataVocabulary,Eq.contentVocabulary];VS.default=aue});var Rq=E(rg=>{"use strict";Object.defineProperty(rg,"__esModule",{value:!0});rg.DiscrError=void 0;var Tq;(function(t){t.Tag="tag",t.Mapping="mapping"})(Tq||(rg.DiscrError=Tq={}))});var Oq=E(HS=>{"use strict";Object.defineProperty(HS,"__esModule",{value:!0});var Vc=pe(),zS=Rq(),$q=Um(),cue=wf(),lue=Le(),uue={message:({params:{discrError:t,tagName:e}})=>t===zS.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,Vc._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},fue={keyword:"discriminator",type:"object",schemaType:"object",error:uue,code(t){let{gen:e,data:r,schema:n,parentSchema:s,it:i}=t,{oneOf:o}=s;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");let a=n.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");let c=e.let("valid",!1),l=e.const("tag",(0,Vc._)`${r}${(0,Vc.getProperty)(a)}`);e.if((0,Vc._)`typeof ${l} == "string"`,()=>u(),()=>t.error(!1,{discrError:zS.DiscrError.Tag,tag:l,tagName:a})),t.ok(c);function u(){let f=p();e.if(!1);for(let h in f)e.elseIf((0,Vc._)`${l} === ${h}`),e.assign(c,d(f[h]));e.else(),t.error(!1,{discrError:zS.DiscrError.Mapping,tag:l,tagName:a}),e.endIf()}function d(f){let h=e.name("valid"),m=t.subschema({keyword:"oneOf",schemaProp:f},h);return t.mergeEvaluated(m,Vc.Name),h}function p(){var f;let h={},m=g(s),y=!0;for(let v=0;v<o.length;v++){let S=o[v];if(S?.$ref&&!(0,lue.schemaHasRulesButRef)(S,i.self.RULES)){let T=S.$ref;if(S=$q.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,T),S instanceof $q.SchemaEnv&&(S=S.schema),S===void 0)throw new cue.default(i.opts.uriResolver,i.baseId,T)}let $=(f=S?.properties)===null||f===void 0?void 0:f[a];if(typeof $!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);y=y&&(m||g(S)),w($,v)}if(!y)throw new Error(`discriminator: "${a}" must be required`);return h;function g({required:v}){return Array.isArray(v)&&v.includes(a)}function w(v,S){if(v.const)_(v.const,S);else if(v.enum)for(let $ of v.enum)_($,S);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function _(v,S){if(typeof v!="string"||v in h)throw new Error(`discriminator: "${a}" values must be unique strings`);h[v]=S}}}};HS.default=fue});var Pq=E((lke,due)=>{due.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var Nq=E((nt,GS)=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});nt.MissingRefError=nt.ValidationError=nt.CodeGen=nt.Name=nt.nil=nt.stringify=nt.str=nt._=nt.KeywordCxt=nt.Ajv=void 0;var hue=Tj(),pue=Sq(),mue=Oq(),xq=Pq(),gue=["/properties"],ng="http://json-schema.org/draft-07/schema",zc=class extends hue.default{_addVocabularies(){super._addVocabularies(),pue.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(mue.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let e=this.opts.$data?this.$dataMetaSchema(xq,gue):xq;this.addMetaSchema(e,ng,!1),this.refs["http://json-schema.org/schema"]=ng}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(ng)?ng:void 0)}};nt.Ajv=zc;GS.exports=nt=zc;GS.exports.Ajv=zc;Object.defineProperty(nt,"__esModule",{value:!0});nt.default=zc;var yue=vf();Object.defineProperty(nt,"KeywordCxt",{enumerable:!0,get:function(){return yue.KeywordCxt}});var Hc=pe();Object.defineProperty(nt,"_",{enumerable:!0,get:function(){return Hc._}});Object.defineProperty(nt,"str",{enumerable:!0,get:function(){return Hc.str}});Object.defineProperty(nt,"stringify",{enumerable:!0,get:function(){return Hc.stringify}});Object.defineProperty(nt,"nil",{enumerable:!0,get:function(){return Hc.nil}});Object.defineProperty(nt,"Name",{enumerable:!0,get:function(){return Hc.Name}});Object.defineProperty(nt,"CodeGen",{enumerable:!0,get:function(){return Hc.CodeGen}});var _ue=Lm();Object.defineProperty(nt,"ValidationError",{enumerable:!0,get:function(){return _ue.default}});var vue=wf();Object.defineProperty(nt,"MissingRefError",{enumerable:!0,get:function(){return vue.default}})});var Cq=E(Gc=>{"use strict";Object.defineProperty(Gc,"__esModule",{value:!0});Gc.formatLimitDefinition=void 0;var wue=Nq(),Xn=pe(),Yi=Xn.operators,sg={formatMaximum:{okStr:"<=",ok:Yi.LTE,fail:Yi.GT},formatMinimum:{okStr:">=",ok:Yi.GTE,fail:Yi.LT},formatExclusiveMaximum:{okStr:"<",ok:Yi.LT,fail:Yi.GTE},formatExclusiveMinimum:{okStr:">",ok:Yi.GT,fail:Yi.LTE}},bue={message:({keyword:t,schemaCode:e})=>(0,Xn.str)`should be ${sg[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,Xn._)`{comparison: ${sg[t].okStr}, limit: ${e}}`};Gc.formatLimitDefinition={keyword:Object.keys(sg),type:"string",schemaType:"string",$data:!0,error:bue,code(t){let{gen:e,data:r,schemaCode:n,keyword:s,it:i}=t,{opts:o,self:a}=i;if(!o.validateFormats)return;let c=new wue.KeywordCxt(i,a.RULES.all.format.definition,"format");c.$data?l():u();function l(){let p=e.scopeValue("formats",{ref:a.formats,code:o.code.formats}),f=e.const("fmt",(0,Xn._)`${p}[${c.schemaCode}]`);t.fail$data((0,Xn.or)((0,Xn._)`typeof ${f} != "object"`,(0,Xn._)`${f} instanceof RegExp`,(0,Xn._)`typeof ${f}.compare != "function"`,d(f)))}function u(){let p=c.schema,f=a.formats[p];if(!f||f===!0)return;if(typeof f!="object"||f instanceof RegExp||typeof f.compare!="function")throw new Error(`"${s}": format "${p}" does not define "compare" function`);let h=e.scopeValue("formats",{key:p,ref:f,code:o.code.formats?(0,Xn._)`${o.code.formats}${(0,Xn.getProperty)(p)}`:void 0});t.fail$data(d(h))}function d(p){return(0,Xn._)`${p}.compare(${r}, ${n}) ${sg[s].fail} 0`}},dependencies:["format"]};var Eue=t=>(t.addKeyword(Gc.formatLimitDefinition),t);Gc.default=Eue});var JS=E((Af,kq)=>{"use strict";Object.defineProperty(Af,"__esModule",{value:!0});var Wc=$m(),Sue=Cq(),WS=pe(),Iq=new WS.Name("fullFormats"),Tue=new WS.Name("fastFormats"),KS=(t,e={keywords:!0})=>{if(Array.isArray(e))return Aq(t,e,Wc.fullFormats,Iq),t;let[r,n]=e.mode==="fast"?[Wc.fastFormats,Tue]:[Wc.fullFormats,Iq],s=e.formats||Wc.formatNames;return Aq(t,s,r,n),e.keywords&&(0,Sue.default)(t),t};KS.get=(t,e="full")=>{let n=(e==="fast"?Wc.fastFormats:Wc.fullFormats)[t];if(!n)throw new Error(`Unknown format "${t}"`);return n};function Aq(t,e,r,n){var s,i;(s=(i=t.opts.code).formats)!==null&&s!==void 0||(i.formats=(0,WS._)`require("ajv-formats/dist/formats").${n}`);for(let o of e)t.addFormat(o,r[o])}kq.exports=Af=KS;Object.defineProperty(Af,"__esModule",{value:!0});Af.default=KS});var YS=E((fke,Dq)=>{"use strict";var Rue=lM(),$ue=Rc(),Oue=JS(),Pue=Tp()({proto:!0}),kf=class{constructor(e){this.ajv=new Rue({...e,strictSchema:!1,validateSchema:!1,allowUnionTypes:!0,uriResolver:$ue}),Oue(this.ajv),this.ajv.addKeyword({keyword:"fjs_type",type:"object",errors:!1,validate:(r,n)=>n instanceof Date}),this._ajvSchemas={},this._ajvOptions=e||{}}addSchema(e,r){let n=e.$id||r;if(e.$id!==void 0&&e.$id[0]==="#"&&(n=r+e.$id),this.ajv.refs[n]===void 0&&this.ajv.schemas[n]===void 0){let s=Pue(e);this.convertSchemaToAjvFormat(s),this.ajv.addSchema(s,n),this._ajvSchemas[n]=e}}validate(e,r){return this.ajv.validate(e,r)}convertSchemaToAjvFormat(e){if(e!==null){e.type==="string"?(e.fjs_type="string",e.type=["string","object"]):Array.isArray(e.type)&&e.type.includes("string")&&!e.type.includes("object")&&(e.fjs_type="string",e.type.push("object"));for(let r in e)typeof e[r]=="object"&&this.convertSchemaToAjvFormat(e[r])}}getState(){return{ajvOptions:this._ajvOptions,ajvSchemas:this._ajvSchemas}}static restoreFromState(e){let r=new kf(e.ajvOptions);for(let[n,s]of Object.entries(e.ajvSchemas))r.ajv.addSchema(s,n);return r}};Dq.exports=kf});var jq=E((dke,Mq)=>{"use strict";var Df=class{constructor(e,r,n="#"){this.schema=e,this.schemaId=r,this.jsonPointer=n}getPropertyLocation(e){return new Df(this.schema[e],this.schemaId,this.jsonPointer+"/"+e)}getSchemaRef(){return this.schemaId+this.jsonPointer}};Mq.exports=Df});var Bq=E((hke,QS)=>{"use strict";QS.exports=q;QS.exports.default=q;var xue={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0},qq={enum:["array","boolean","integer","null","number","object","string"]},Lq=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,Nue=$m().fullFormats.uri,Fq=$m().fullFormats.regex;function vn(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0,a=o;return typeof t=="number"&&!(t%1)&&!isNaN(t)&&isFinite(t)?o===a&&typeof t=="number"&&isFinite(t)&&(t<0||isNaN(t))?(vn.errors=[{instancePath:e,schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1):(vn.errors=i,o===0):(vn.errors=[{instancePath:e,schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1)}var XS={validate:q};function Rr(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(o===0)if(Array.isArray(t)){if(t.length<1)return Rr.errors=[{instancePath:e,schemaPath:"#/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var a=!0;let c=t.length;for(let l=0;l<c;l++){let u=o;XS.validate(t[l],{instancePath:e+"/"+l,parentData:t,parentDataProperty:l,rootData:s})||(i=i===null?XS.validate.errors:i.concat(XS.validate.errors),o=i.length);var a=u===o;if(!a)break}}}else return Rr.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;return Rr.errors=i,o===0}var Uq=ef().default;function q(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t&&typeof t=="object"&&!Array.isArray(t))&&typeof t!="boolean")return q.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:xue.type},message:"must be object,boolean"}],!1;if(o===0&&t&&typeof t=="object"&&!Array.isArray(t)){if(t.$id!==void 0){let _=t.$id,v=o;if(o===v&&o===v)if(typeof _=="string"){if(!Lq.test(_))return q.errors=[{instancePath:e+"/$id",schemaPath:"#/properties/%24id/format",keyword:"format",params:{format:"uri-reference"},message:'must match format "uri-reference"'}],!1}else return q.errors=[{instancePath:e+"/$id",schemaPath:"#/properties/%24id/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=v===o}else var a=!0;if(a){if(t.$schema!==void 0){let _=t.$schema,v=o;if(o===v&&o===v)if(typeof _=="string"){if(!Nue(_))return q.errors=[{instancePath:e+"/$schema",schemaPath:"#/properties/%24schema/format",keyword:"format",params:{format:"uri"},message:'must match format "uri"'}],!1}else return q.errors=[{instancePath:e+"/$schema",schemaPath:"#/properties/%24schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=v===o}else var a=!0;if(a){if(t.$ref!==void 0){let _=t.$ref,v=o;if(o===v&&o===v)if(typeof _=="string"){if(!Lq.test(_))return q.errors=[{instancePath:e+"/$ref",schemaPath:"#/properties/%24ref/format",keyword:"format",params:{format:"uri-reference"},message:'must match format "uri-reference"'}],!1}else return q.errors=[{instancePath:e+"/$ref",schemaPath:"#/properties/%24ref/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=v===o}else var a=!0;if(a){if(t.$comment!==void 0){let _=o;if(typeof t.$comment!="string")return q.errors=[{instancePath:e+"/$comment",schemaPath:"#/properties/%24comment/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=_===o}else var a=!0;if(a){if(t.title!==void 0){let _=o;if(typeof t.title!="string")return q.errors=[{instancePath:e+"/title",schemaPath:"#/properties/title/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=_===o}else var a=!0;if(a){if(t.description!==void 0){let _=o;if(typeof t.description!="string")return q.errors=[{instancePath:e+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=_===o}else var a=!0;if(a){if(t.readOnly!==void 0){let _=o;if(typeof t.readOnly!="boolean")return q.errors=[{instancePath:e+"/readOnly",schemaPath:"#/properties/readOnly/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var a=_===o}else var a=!0;if(a){if(t.examples!==void 0){let _=o;if(o===_&&!Array.isArray(t.examples))return q.errors=[{instancePath:e+"/examples",schemaPath:"#/properties/examples/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=_===o}else var a=!0;if(a){if(t.multipleOf!==void 0){let _=t.multipleOf,v=o;if(o===v)if(typeof _=="number"&&isFinite(_)){if(_<=0||isNaN(_))return q.errors=[{instancePath:e+"/multipleOf",schemaPath:"#/properties/multipleOf/exclusiveMinimum",keyword:"exclusiveMinimum",params:{comparison:">",limit:0},message:"must be > 0"}],!1}else return q.errors=[{instancePath:e+"/multipleOf",schemaPath:"#/properties/multipleOf/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=v===o}else var a=!0;if(a){if(t.maximum!==void 0){let _=t.maximum,v=o;if(!(typeof _=="number"&&isFinite(_)))return q.errors=[{instancePath:e+"/maximum",schemaPath:"#/properties/maximum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=v===o}else var a=!0;if(a){if(t.exclusiveMaximum!==void 0){let _=t.exclusiveMaximum,v=o;if(!(typeof _=="number"&&isFinite(_)))return q.errors=[{instancePath:e+"/exclusiveMaximum",schemaPath:"#/properties/exclusiveMaximum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=v===o}else var a=!0;if(a){if(t.minimum!==void 0){let _=t.minimum,v=o;if(!(typeof _=="number"&&isFinite(_)))return q.errors=[{instancePath:e+"/minimum",schemaPath:"#/properties/minimum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=v===o}else var a=!0;if(a){if(t.exclusiveMinimum!==void 0){let _=t.exclusiveMinimum,v=o;if(!(typeof _=="number"&&isFinite(_)))return q.errors=[{instancePath:e+"/exclusiveMinimum",schemaPath:"#/properties/exclusiveMinimum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=v===o}else var a=!0;if(a){if(t.maxLength!==void 0){let _=t.maxLength,v=o,S=o;if(!(typeof _=="number"&&!(_%1)&&!isNaN(_)&&isFinite(_)))return q.errors=[{instancePath:e+"/maxLength",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===S&&typeof _=="number"&&isFinite(_)&&(_<0||isNaN(_)))return q.errors=[{instancePath:e+"/maxLength",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=v===o}else var a=!0;if(a){if(t.minLength!==void 0){let _=o;vn(t.minLength,{instancePath:e+"/minLength",parentData:t,parentDataProperty:"minLength",rootData:s})||(i=i===null?vn.errors:i.concat(vn.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.pattern!==void 0){let _=t.pattern,v=o;if(o===v&&o===v)if(typeof _=="string"){if(!Fq(_))return q.errors=[{instancePath:e+"/pattern",schemaPath:"#/properties/pattern/format",keyword:"format",params:{format:"regex"},message:'must match format "regex"'}],!1}else return q.errors=[{instancePath:e+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=v===o}else var a=!0;if(a){if(t.additionalItems!==void 0){let _=o;q(t.additionalItems,{instancePath:e+"/additionalItems",parentData:t,parentDataProperty:"additionalItems",rootData:s})||(i=i===null?q.errors:i.concat(q.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.items!==void 0){let _=t.items,v=o,S=o,$=!1,T=o;q(_,{instancePath:e+"/items",parentData:t,parentDataProperty:"items",rootData:s})||(i=i===null?q.errors:i.concat(q.errors),o=i.length);var c=T===o;if($=$||c,!$){let R=o;Rr(_,{instancePath:e+"/items",parentData:t,parentDataProperty:"items",rootData:s})||(i=i===null?Rr.errors:i.concat(Rr.errors),o=i.length);var c=R===o;$=$||c}if($)o=S,i!==null&&(S?i.length=S:i=null);else{let R={instancePath:e+"/items",schemaPath:"#/properties/items/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[R]:i.push(R),o++,q.errors=i,!1}var a=v===o}else var a=!0;if(a){if(t.maxItems!==void 0){let _=t.maxItems,v=o,S=o;if(!(typeof _=="number"&&!(_%1)&&!isNaN(_)&&isFinite(_)))return q.errors=[{instancePath:e+"/maxItems",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===S&&typeof _=="number"&&isFinite(_)&&(_<0||isNaN(_)))return q.errors=[{instancePath:e+"/maxItems",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=v===o}else var a=!0;if(a){if(t.minItems!==void 0){let _=o;vn(t.minItems,{instancePath:e+"/minItems",parentData:t,parentDataProperty:"minItems",rootData:s})||(i=i===null?vn.errors:i.concat(vn.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.uniqueItems!==void 0){let _=o;if(typeof t.uniqueItems!="boolean")return q.errors=[{instancePath:e+"/uniqueItems",schemaPath:"#/properties/uniqueItems/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var a=_===o}else var a=!0;if(a){if(t.contains!==void 0){let _=o;q(t.contains,{instancePath:e+"/contains",parentData:t,parentDataProperty:"contains",rootData:s})||(i=i===null?q.errors:i.concat(q.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.maxProperties!==void 0){let _=t.maxProperties,v=o,S=o;if(!(typeof _=="number"&&!(_%1)&&!isNaN(_)&&isFinite(_)))return q.errors=[{instancePath:e+"/maxProperties",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===S&&typeof _=="number"&&isFinite(_)&&(_<0||isNaN(_)))return q.errors=[{instancePath:e+"/maxProperties",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=v===o}else var a=!0;if(a){if(t.minProperties!==void 0){let _=o;vn(t.minProperties,{instancePath:e+"/minProperties",parentData:t,parentDataProperty:"minProperties",rootData:s})||(i=i===null?vn.errors:i.concat(vn.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.required!==void 0){let _=t.required,v=o;if(o===o)if(Array.isArray(_)){var l=!0;let T=_.length;for(let O=0;O<T;O++){let R=o;if(typeof _[O]!="string")return q.errors=[{instancePath:e+"/required/"+O,schemaPath:"#/definitions/stringArray/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=R===o;if(!l)break}if(l){let O=_.length,R;if(O>1){let P={};for(;O--;){let A=_[O];if(typeof A=="string"){if(typeof P[A]=="number"){return R=P[A],q.errors=[{instancePath:e+"/required",schemaPath:"#/definitions/stringArray/uniqueItems",keyword:"uniqueItems",params:{i:O,j:R},message:"must NOT have duplicate items (items ## "+R+" and "+O+" are identical)"}],!1;break}P[A]=O}}}}}else return q.errors=[{instancePath:e+"/required",schemaPath:"#/definitions/stringArray/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=v===o}else var a=!0;if(a){if(t.additionalProperties!==void 0){let _=o;q(t.additionalProperties,{instancePath:e+"/additionalProperties",parentData:t,parentDataProperty:"additionalProperties",rootData:s})||(i=i===null?q.errors:i.concat(q.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.definitions!==void 0){let _=t.definitions,v=o;if(o===v)if(_&&typeof _=="object"&&!Array.isArray(_))for(let $ in _){let T=o;q(_[$],{instancePath:e+"/definitions/"+$.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:_,parentDataProperty:$,rootData:s})||(i=i===null?q.errors:i.concat(q.errors),o=i.length);var u=T===o;if(!u)break}else return q.errors=[{instancePath:e+"/definitions",schemaPath:"#/properties/definitions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=v===o}else var a=!0;if(a){if(t.properties!==void 0){let _=t.properties,v=o;if(o===v)if(_&&typeof _=="object"&&!Array.isArray(_))for(let $ in _){let T=o;q(_[$],{instancePath:e+"/properties/"+$.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:_,parentDataProperty:$,rootData:s})||(i=i===null?q.errors:i.concat(q.errors),o=i.length);var d=T===o;if(!d)break}else return q.errors=[{instancePath:e+"/properties",schemaPath:"#/properties/properties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=v===o}else var a=!0;if(a){if(t.patternProperties!==void 0){let _=t.patternProperties,v=o;if(o===v)if(_&&typeof _=="object"&&!Array.isArray(_)){for(let $ in _){let T=o;if(o===T&&typeof $=="string"&&!Fq($)){let O={instancePath:e+"/patternProperties",schemaPath:"#/properties/patternProperties/propertyNames/format",keyword:"format",params:{format:"regex"},message:'must match format "regex"',propertyName:$};i===null?i=[O]:i.push(O),o++}var p=T===o;if(!p){let O={instancePath:e+"/patternProperties",schemaPath:"#/properties/patternProperties/propertyNames",keyword:"propertyNames",params:{propertyName:$},message:"property name must be valid"};return i===null?i=[O]:i.push(O),o++,q.errors=i,!1;break}}if(p)for(let $ in _){let T=o;q(_[$],{instancePath:e+"/patternProperties/"+$.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:_,parentDataProperty:$,rootData:s})||(i=i===null?q.errors:i.concat(q.errors),o=i.length);var f=T===o;if(!f)break}}else return q.errors=[{instancePath:e+"/patternProperties",schemaPath:"#/properties/patternProperties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=v===o}else var a=!0;if(a){if(t.dependencies!==void 0){let _=t.dependencies,v=o;if(o===v)if(_&&typeof _=="object"&&!Array.isArray(_))for(let $ in _){let T=_[$],O=o,R=o,P=!1,A=o;q(T,{instancePath:e+"/dependencies/"+$.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:_,parentDataProperty:$,rootData:s})||(i=i===null?q.errors:i.concat(q.errors),o=i.length);var h=A===o;if(P=P||h,!P){let N=o;if(o===o)if(Array.isArray(T)){var m=!0;let te=T.length;for(let H=0;H<te;H++){let K=o;if(typeof T[H]!="string"){let Ar={instancePath:e+"/dependencies/"+$.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+H,schemaPath:"#/definitions/stringArray/items/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[Ar]:i.push(Ar),o++}var m=K===o;if(!m)break}if(m){let H=T.length,K;if(H>1){let xt={};for(;H--;){let Ar=T[H];if(typeof Ar=="string"){if(typeof xt[Ar]=="number"){K=xt[Ar];let Y={instancePath:e+"/dependencies/"+$.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/stringArray/uniqueItems",keyword:"uniqueItems",params:{i:H,j:K},message:"must NOT have duplicate items (items ## "+K+" and "+H+" are identical)"};i===null?i=[Y]:i.push(Y),o++;break}xt[Ar]=H}}}}}else{let te={instancePath:e+"/dependencies/"+$.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/stringArray/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[te]:i.push(te),o++}var h=N===o;P=P||h}if(P)o=R,i!==null&&(R?i.length=R:i=null);else{let N={instancePath:e+"/dependencies/"+$.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/dependencies/additionalProperties/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[N]:i.push(N),o++,q.errors=i,!1}var y=O===o;if(!y)break}else return q.errors=[{instancePath:e+"/dependencies",schemaPath:"#/properties/dependencies/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=v===o}else var a=!0;if(a){if(t.propertyNames!==void 0){let _=o;q(t.propertyNames,{instancePath:e+"/propertyNames",parentData:t,parentDataProperty:"propertyNames",rootData:s})||(i=i===null?q.errors:i.concat(q.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.enum!==void 0){let _=t.enum,v=o;if(o===v)if(Array.isArray(_)){if(_.length<1)return q.errors=[{instancePath:e+"/enum",schemaPath:"#/properties/enum/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{let $=_.length,T;if($>1){e:for(;$--;)for(T=$;T--;)if(Uq(_[$],_[T])){return q.errors=[{instancePath:e+"/enum",schemaPath:"#/properties/enum/uniqueItems",keyword:"uniqueItems",params:{i:$,j:T},message:"must NOT have duplicate items (items ## "+T+" and "+$+" are identical)"}],!1;break e}}}}else return q.errors=[{instancePath:e+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=v===o}else var a=!0;if(a){if(t.type!==void 0){let _=t.type,v=o,S=o,$=!1,T=o;if(!(_==="array"||_==="boolean"||_==="integer"||_==="null"||_==="number"||_==="object"||_==="string")){let R={instancePath:e+"/type",schemaPath:"#/definitions/simpleTypes/enum",keyword:"enum",params:{allowedValues:qq.enum},message:"must be equal to one of the allowed values"};i===null?i=[R]:i.push(R),o++}var g=T===o;if($=$||g,!$){let R=o;if(o===R)if(Array.isArray(_))if(_.length<1){let A={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"};i===null?i=[A]:i.push(A),o++}else{var w=!0;let A=_.length;for(let N=0;N<A;N++){let C=_[N],V=o;if(!(C==="array"||C==="boolean"||C==="integer"||C==="null"||C==="number"||C==="object"||C==="string")){let H={instancePath:e+"/type/"+N,schemaPath:"#/definitions/simpleTypes/enum",keyword:"enum",params:{allowedValues:qq.enum},message:"must be equal to one of the allowed values"};i===null?i=[H]:i.push(H),o++}var w=V===o;if(!w)break}if(w){let N=_.length,C;if(N>1){e:for(;N--;)for(C=N;C--;)if(Uq(_[N],_[C])){let V={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/uniqueItems",keyword:"uniqueItems",params:{i:N,j:C},message:"must NOT have duplicate items (items ## "+C+" and "+N+" are identical)"};i===null?i=[V]:i.push(V),o++;break e}}}}else{let A={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[A]:i.push(A),o++}var g=R===o;$=$||g}if($)o=S,i!==null&&(S?i.length=S:i=null);else{let R={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[R]:i.push(R),o++,q.errors=i,!1}var a=v===o}else var a=!0;if(a){if(t.format!==void 0){let _=o;if(typeof t.format!="string")return q.errors=[{instancePath:e+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=_===o}else var a=!0;if(a){if(t.contentMediaType!==void 0){let _=o;if(typeof t.contentMediaType!="string")return q.errors=[{instancePath:e+"/contentMediaType",schemaPath:"#/properties/contentMediaType/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=_===o}else var a=!0;if(a){if(t.contentEncoding!==void 0){let _=o;if(typeof t.contentEncoding!="string")return q.errors=[{instancePath:e+"/contentEncoding",schemaPath:"#/properties/contentEncoding/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=_===o}else var a=!0;if(a){if(t.if!==void 0){let _=o;q(t.if,{instancePath:e+"/if",parentData:t,parentDataProperty:"if",rootData:s})||(i=i===null?q.errors:i.concat(q.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.then!==void 0){let _=o;q(t.then,{instancePath:e+"/then",parentData:t,parentDataProperty:"then",rootData:s})||(i=i===null?q.errors:i.concat(q.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.else!==void 0){let _=o;q(t.else,{instancePath:e+"/else",parentData:t,parentDataProperty:"else",rootData:s})||(i=i===null?q.errors:i.concat(q.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.allOf!==void 0){let _=o;Rr(t.allOf,{instancePath:e+"/allOf",parentData:t,parentDataProperty:"allOf",rootData:s})||(i=i===null?Rr.errors:i.concat(Rr.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.anyOf!==void 0){let _=o;Rr(t.anyOf,{instancePath:e+"/anyOf",parentData:t,parentDataProperty:"anyOf",rootData:s})||(i=i===null?Rr.errors:i.concat(Rr.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.oneOf!==void 0){let _=o;Rr(t.oneOf,{instancePath:e+"/oneOf",parentData:t,parentDataProperty:"oneOf",rootData:s})||(i=i===null?Rr.errors:i.concat(Rr.errors),o=i.length);var a=_===o}else var a=!0;if(a)if(t.not!==void 0){let _=o;q(t.not,{instancePath:e+"/not",parentData:t,parentDataProperty:"not",rootData:s})||(i=i===null?q.errors:i.concat(q.errors),o=i.length);var a=_===o}else var a=!0}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}return q.errors=i,o===0}});var rT=E((pke,Vq)=>{"use strict";var ZS=class extends Error{constructor(e,r){super(),this.name="JsonSchemaMergeError",this.code="JSON_SCHEMA_MERGE_ERROR",this.message=`Failed to merge "${e}" keyword schemas.`,this.schemas=r}},eT=class extends Error{constructor(e,r){super(),this.name="JsonSchemaMergeError",this.code="JSON_SCHEMA_MERGE_ERROR",this.message=`Resolver for "${e}" keyword not found.`,this.schemas=r}},tT=class extends Error{constructor(e){super(),this.name="JsonSchemaMergeError",this.code="JSON_SCHEMA_MERGE_ERROR",this.message=`Invalid "onConflict" option: "${e}".`}};Vq.exports={MergeError:ZS,ResolverNotFoundError:eT,InvalidOnConflictOptionError:tT}});var Gq=E((mke,Hq)=>{"use strict";var{dequal:Cue}=Hp(),{MergeError:nT}=rT();function zq(t){let e=t[0];for(let r=1;r<t.length;r++)e=e.filter(n=>t[r].includes(n));return e}function Iue(t,e,r){let n=zq(e);if(n.length===0)throw new nT(t,e);r[t]=n}function Aue(t,e,r){for(let s=0;s<e.length;s++)Array.isArray(e[s])||(e[s]=[e[s]]);let n=zq(e);if(n.length===0)throw new nT(t,e);n.length===1?r[t]=n[0]:r[t]=n}function kue(t,e,r){let n=[];for(let s of e)for(let i of s)n.includes(i)||n.push(i);r[t]=n}function Due(t,e,r){r[t]=Math.min(...e)}function Mue(t,e,r){r[t]=Math.max(...e)}function jue(t,e,r){let n=(a,c)=>c?n(c,a%c):a,s=(a,c)=>a*c/n(a,c),i=1;for(let a of e)for(;a*i%1!==0;)i*=10;let o=e[0]*i;for(let a of e)o=s(o,a*i);r[t]=o/i}function que(t,e,r){let n=e[0];for(let s=1;s<e.length;s++)if(!Cue(e[s],n))throw new nT(t,e);r[t]=n}function Lue(){}function Fue(t,e,r){for(let n of e)if(n===!1){r[t]=!1;return}r[t]=!0}function Uue(t,e,r){for(let n of e)if(n===!0){r[t]=!0;return}r[t]=!1}Hq.exports={arraysIntersection:Iue,hybridArraysIntersection:Aue,arraysUnion:kue,minNumber:Due,maxNumber:Mue,commonMultiple:jue,allEqual:que,booleanAnd:Fue,booleanOr:Uue,skip:Lue}});var Qq=E((gke,Xq)=>{"use strict";var{dequal:Bue}=Hp(),dt=Gq(),ag=rT(),Jq={$id:dt.skip,type:dt.hybridArraysIntersection,enum:dt.arraysIntersection,minLength:dt.maxNumber,maxLength:dt.minNumber,minimum:dt.maxNumber,maximum:dt.minNumber,multipleOf:dt.commonMultiple,exclusiveMinimum:dt.maxNumber,exclusiveMaximum:dt.minNumber,minItems:dt.maxNumber,maxItems:dt.minNumber,maxProperties:dt.minNumber,minProperties:dt.maxNumber,const:dt.allEqual,default:dt.allEqual,format:dt.allEqual,required:dt.arraysUnion,properties:Kue,patternProperties:og,additionalProperties:ig,items:Hue,additionalItems:Gue,definitions:og,$defs:og,nullable:dt.booleanAnd,oneOf:Wq,anyOf:Wq,allOf:dt.arraysUnion,not:ig,if:Jue,then:dt.skip,else:dt.skip,dependencies:Kq,dependentRequired:Kq,dependentSchemas:og,propertyNames:ig,uniqueItems:dt.booleanOr,contains:ig};function ig(t,e,r,n,s){r[t]=Qn(e,s)}function Vue(t){let e=[[]];for(let r of t){let n=[];for(let s of e)for(let i of r)n.push([...s,i]);e=n}return e}function Wq(t,e,r,n,s){if(e.length===1){r[t]=e[0];return}let i=Vue(e),o=[];for(let a of i)try{let c=Qn(a,s);c!==void 0&&o.push(c)}catch(c){if(c instanceof ag.MergeError)continue;throw c}r[t]=o}function zue(t,e){let{items:r,additionalItems:n}=t;return Array.isArray(r)?e<r.length?r[e]:n:r!==void 0?r:n}function Hue(t,e,r,n,s){let i=0;for(let a of e)Array.isArray(a)&&(i=Math.max(i,a.length));if(i===0){r[t]=Qn(e,s);return}let o=[];for(let a=0;a<i;a++){let c=[];for(let l of n){let u=zue(l,a);u!==void 0&&c.push(u)}o[a]=Qn(c,s)}r[t]=o}function Gue(t,e,r,n,s){let i=!1;for(let a of n)if(Array.isArray(a.items)){i=!0;break}if(!i){r[t]=Qn(e,s);return}let o=[];for(let a of n){let c=a.additionalItems;c===void 0&&!Array.isArray(a.items)&&(c=a.items),c!==void 0&&o.push(c)}r[t]=Qn(o,s)}function Wue(t,e){let{properties:r,patternProperties:n,additionalProperties:s}=t;if(r?.[e]!==void 0)return r[e];for(let i of Object.keys(n??{}))if(new RegExp(i).test(e))return n[i];return s}function Kue(t,e,r,n,s){let i={};for(let a of n){let c=a.properties??{};for(let l of Object.keys(c)){if(i[l]!==void 0)continue;let u=c[l];i[l]=[u];for(let d of n){if(a===d)continue;let p=Wue(d,l);p!==void 0&&i[l].push(p)}}}let o={};for(let a of Object.keys(i)){let c=i[a];o[a]=Qn(c,s)}r[t]=o}function og(t,e,r,n,s){let i={};for(let a of e)for(let c of Object.keys(a))i[c]===void 0&&(i[c]=[]),i[c].push(a[c]);let o={};for(let a of Object.keys(i)){let c=i[a],l=Qn(c,s);o[a]=l}r[t]=o}function Jue(t,e,r,n,s){for(let i=0;i<n.length;i++){let o={if:n[i].if,then:n[i].then,else:n[i].else};if(o.if!==void 0){if(r.if===void 0){r.if=o.if,o.then!==void 0&&(r.then=o.then),o.else!==void 0&&(r.else=o.else);continue}r.then!==void 0&&(r.then=Qn([r.then,o],s)),r.else!==void 0&&(r.else=Qn([r.else,o],s))}}}function Kq(t,e,r){let n={};for(let s of e)for(let i of Object.keys(s)){n[i]===void 0&&(n[i]=[]);let o=n[i];for(let a of s[i])o.includes(a)||o.push(a)}r[t]=n}function Qn(t,e){if(t.length===0)return{};if(t.length===1)return t[0];let r={},n={},s=!0;for(let i of t){if(i===!1)return!1;if(i!==!0){s=!1;for(let o of Object.keys(i))n[o]===void 0&&(n[o]=[]),n[o].push(i[o])}}if(s)return!0;for(let i of Object.keys(n)){let o=n[i];(e.resolvers[i]??e.defaultResolver)(i,o,r,t,e)}return r}function Yq(t,e,r,n,s){let i=s.onConflict??"throw";if(e.length===1||i==="first"){r[t]=e[0];return}let o=!0;for(let a=1;a<e.length;a++)if(!Bue(e[a],e[0])){o=!1;break}if(o){r[t]=e[0];return}if(i==="throw")throw new ag.ResolverNotFoundError(t,e);if(i!=="skip")throw new ag.InvalidOnConflictOptionError(i)}function Yue(t,e={}){return e.defaultResolver===void 0&&(e.defaultResolver=Yq),e.resolvers={...Jq,...e.resolvers},Qn(t,e)}Xq.exports={mergeSchemas:Yue,keywordsResolvers:Jq,defaultResolver:Yq,...ag}});var eL=E((yke,Zq)=>{"use strict";var{mergeSchemas:Xue}=Qq();function Que(t){return Xue(t,{onConflict:"skip"})}Zq.exports=Que});var tL=E((_ke,sT)=>{"use strict";function Zue(t,e,r,n){let s="";e.validatorSchemasIds.size>0?(s+=`const Validator = require('fast-json-stringify/lib/validator')
`,s+=`const validatorState = ${JSON.stringify(n.getState())}
`,s+=`const validator = Validator.restoreFromState(validatorState)
`):s+=`const validator = null
`;let{schema:i,...o}=r.getState();return`
  'use strict'

  const Serializer = require('fast-json-stringify/lib/serializer')
  const serializerState = ${JSON.stringify(o)}
  const serializer = Serializer.restoreFromState(serializerState)

  ${s}

  module.exports = ${t.toString()}(validator, serializer)`}sT.exports=Zue;sT.exports.dependencies={Serializer:$p(),Validator:YS()}});var uL=E((vke,Kc)=>{"use strict";var{RefResolver:efe}=jA(),tfe=$p(),rfe=YS(),ca=jq(),rL=Bq(),nfe=eL(),sfe=/'/g,cg=2e4,sL="default",ife=`
const {
  asString,
  asNumber,
  asBoolean,
  asDateTime,
  asDate,
  asTime,
  asUnsafeString
} = serializer

const asInteger = serializer.asInteger.bind(serializer)

`,ofe=["floor","ceil","round","trunc"],iL=["default","json-stringify"],Mf=0;function iT(t,e){if(!rL(t)){e?e=`"${e}" `:e="";let r=rL.errors[0],n=new Error(`${e}schema is invalid: data${r.instancePath} ${r.message}`);throw n.errors=iT.errors,n}}function jf(t,e){let r=e.schema.$ref,n=r.indexOf("#");n===-1&&(n=r.length);let s=r.slice(0,n)||e.schemaId,i=r.slice(n)||"#",o=t.refResolver.getSchema(s,i);if(o===null)throw new Error(`Cannot find reference "${r}"`);let a=new ca(o,s,i);return o.$ref!==void 0?jf(t,a):a}function lg(t,e){let r=t.refResolver.getSchema(e,"#");return new ca(r,e,"#")}function nL(t,e){return t.$id&&t.$id.charAt(0)!=="#"?t.$id:e}function oT(t,e){iT(t),e=e||{};let r={functions:[],functionsCounter:0,functionsNamesBySchema:new Map,options:e,refResolver:new efe,rootSchemaId:t.$id||`__fjs_root_${Mf++}`,validatorSchemasIds:new Set,mergedSchemasIds:new Map},n=nL(t,r.rootSchemaId);if(r.refResolver.hasSchema(n)||r.refResolver.addSchema(t,r.rootSchemaId),e.schema)for(let u in e.schema){let d=e.schema[u],p=nL(d,u);r.refResolver.hasSchema(p)||(iT(d,u),r.refResolver.addSchema(d,u))}if(e.rounding&&!ofe.includes(e.rounding))throw new Error(`Unsupported integer rounding method ${e.rounding}`);if(e.largeArrayMechanism)if(iL.includes(e.largeArrayMechanism))sL=e.largeArrayMechanism;else throw new Error(`Unsupported large array mechanism ${e.largeArrayMechanism}`);if(e.largeArraySize)if(typeof e.largeArraySize=="string"&&Number.isFinite(Number.parseInt(e.largeArraySize,10)))cg=Number.parseInt(e.largeArraySize,10);else if(typeof e.largeArraySize=="number"&&Number.isInteger(e.largeArraySize))cg=e.largeArraySize;else if(typeof e.largeArraySize=="bigint")cg=Number(e.largeArraySize);else throw new Error(`Unsupported large array size. Expected integer-like, got ${typeof e.largeArraySize} with value ${e.largeArraySize}`);let s=new ca(t,r.rootSchemaId),i=tn(r,s,"input"),o=`
    ${ife}
    const JSON_STR_BEGIN_OBJECT = '{'
    const JSON_STR_END_OBJECT = '}'
    const JSON_STR_BEGIN_ARRAY = '['
    const JSON_STR_END_ARRAY = ']'
    const JSON_STR_COMMA = ','
    const JSON_STR_COLONS = ':'
    const JSON_STR_QUOTE = '"'
    const JSON_STR_EMPTY_OBJECT = JSON_STR_BEGIN_OBJECT + JSON_STR_END_OBJECT
    const JSON_STR_EMPTY_ARRAY = JSON_STR_BEGIN_ARRAY + JSON_STR_END_ARRAY
    const JSON_STR_EMPTY_STRING = JSON_STR_QUOTE + JSON_STR_QUOTE
    const JSON_STR_NULL = 'null'
  `;i==="json += anonymous0(input)"?o+=`
    ${r.functions.join(`
`)}
    const main = anonymous0
    return main
    `:o+=`
    function main (input) {
      let json = ''
      ${i}
      return json
    }
    ${r.functions.join(`
`)}
    return main
    `;let a=new tfe(e),c=new rfe(e.ajv);for(let u of r.validatorSchemasIds){let d=r.refResolver.getSchema(u);c.addSchema(d,u);let p=r.refResolver.getSchemaDependencies(u);for(let[f,h]of Object.entries(p))c.addSchema(h,f)}if(e.debugMode&&(e.mode="debug"),e.mode==="debug")return{validator:c,serializer:a,code:`validator
serializer
${o}`,ajv:c.ajv};let l=new Function("validator","serializer",o);return e.mode==="standalone"?tL()(l,r,a,c):l(c,a)}var afe=["properties","required","additionalProperties","patternProperties","maxProperties","minProperties","dependencies"],cfe=["items","additionalItems","maxItems","minItems","uniqueItems","contains"],lfe=["maxLength","minLength","pattern"],ufe=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum"];function ffe(t){for(let e of afe)if(e in t)return"object";for(let e of cfe)if(e in t)return"array";for(let e of lfe)if(e in t)return"string";for(let e of ufe)if(e in t)return"number";return t.type}function dfe(t,e,r){let n=e.schema,s=Object.keys(n.properties||{}),i=`
    const propertiesKeys = ${JSON.stringify(s)}
    for (const [key, value] of Object.entries(obj)) {
      if (
        propertiesKeys.includes(key) ||
        value === undefined ||
        typeof value === 'function' ||
        typeof value === 'symbol'
      ) continue
  `,o=e.getPropertyLocation("patternProperties"),a=o.schema;if(a!==void 0)for(let u in a){let d=o.getPropertyLocation(u);i+=`
        if (/${u.replace(/\\*\//g,"\\/")}/.test(key)) {
          ${r}
          json += asString(key) + JSON_STR_COLONS
          ${tn(t,d,"value")}
          continue
        }
      `}let l=e.getPropertyLocation("additionalProperties").schema;if(l!==void 0)if(l===!0)i+=`
        ${r}
        json += asString(key) + JSON_STR_COLONS + JSON.stringify(value)
      `;else{let u=e.getPropertyLocation("additionalProperties");i+=`
        ${r}
        json += asString(key) + JSON_STR_COLONS
        ${tn(t,u,"value")}
      `}return i+=`
    }
  `,i}function hfe(t,e){let r=e.schema,n=e.getPropertyLocation("properties"),s=r.required||[],i=Object.keys(r.properties||{}).sort((l,u)=>{let d=s.includes(l),p=s.includes(u);return d===p?0:d?-1:1}),o=s.includes(i[0]),a=`let value
`;for(let l of s)if(!i.includes(l)){let u=JSON.stringify(l);a+=`if (obj[${u}] === undefined) throw new Error('${u.replace(/'/g,"\\'")} is required!')
`}a+=`let json = JSON_STR_BEGIN_OBJECT
`;let c="";o||(a+=`let addComma = false
`,c="!addComma && (addComma = true) || (json += JSON_STR_COMMA)");for(let l of i){let u=n.getPropertyLocation(l);u.schema.$ref&&(u=jf(t,u));let d=JSON.stringify(l),p=u.schema.default,f=s.includes(l);a+=`
      value = obj[${d}]
      if (value !== undefined) {
        ${c}
        json += ${JSON.stringify(d+":")}
        ${tn(t,u,"value")}
      }`,p!==void 0?a+=` else {
        ${c}
        json += ${JSON.stringify(d+":"+JSON.stringify(p))}
      }
      `:f?a+=` else {
        throw new Error('${d.replace(/'/g,"\\'")} is required!')
      }
      `:a+=`
`,o&&(c="json += ','")}return(r.patternProperties||r.additionalProperties)&&(a+=dfe(t,e,c)),a+=`
    return json + JSON_STR_END_OBJECT
  `,a}function ug(t,e,r){for(let o=0;o<r.length;o++){let a=r[o];a.schema.$ref&&(r[o]=jf(t,a))}let n=[];for(let o of r){let a=oL(t,o.schema,o.schemaId);delete a.$id,n.push(a)}let s=nfe(n),i=new ca(s,e);return t.refResolver.addSchema(s,e),i}function oL(t,e,r){let n=Array.isArray(e)?[]:{};e.$id!==void 0&&e.$id.charAt(0)!=="#"&&(r=e.$id);let s=t.mergedSchemasIds.get(e);s&&t.mergedSchemasIds.set(n,s);for(let i in e){let o=e[i];i==="$ref"&&typeof o=="string"&&o.charAt(0)==="#"&&(o=r+o),typeof o=="object"&&o!==null&&(o=oL(t,o,r)),n[i]=o}return n}function pfe(t){return`(${t} && typeof ${t}.toJSON === 'function')
    ? ${t}.toJSON()
    : ${t}
  `}function mfe(t,e){let r=e.schema;if(t.functionsNamesBySchema.has(r))return t.functionsNamesBySchema.get(r);let n=cL(t);t.functionsNamesBySchema.set(r,n);let s=e.getSchemaRef();s.startsWith(t.rootSchemaId)&&(s=s.replace(t.rootSchemaId,""));let i=`
  `,o=r.nullable===!0;return i+=`
    // ${s}
    function ${n} (input) {
      const obj = ${pfe("input")}
      ${o?"":"if (obj === null) return JSON_STR_EMPTY_OBJECT"}

      ${hfe(t,e)}
    }
  `,t.functions.push(i),n}function gfe(t,e){let r=e.schema,n=e.getPropertyLocation("items");n.schema=n.schema||{},n.schema.$ref&&(n=jf(t,n));let s=n.schema;if(t.functionsNamesBySchema.has(r))return t.functionsNamesBySchema.get(r);let i=cL(t);t.functionsNamesBySchema.set(r,i);let o=e.getSchemaRef();o.startsWith(t.rootSchemaId)&&(o=o.replace(t.rootSchemaId,""));let a=`
    function ${i} (obj) {
      // ${o}
  `,c=r.nullable===!0;if(a+=`
    ${c?"":"if (obj === null) return JSON_STR_EMPTY_ARRAY"}
    if (!Array.isArray(obj)) {
      throw new TypeError(\`The value of '${o}' does not match schema definition.\`)
    }
    const arrayLength = obj.length
  `,!r.additionalItems&&Array.isArray(s)&&(a+=`
      if (arrayLength > ${s.length}) {
        throw new Error(\`Item at ${s.length} does not match schema definition.\`)
      }
    `),sL==="json-stringify"&&(a+=`if (arrayLength >= ${cg}) return JSON.stringify(obj)
`),a+=`
    const arrayEnd = arrayLength - 1
    let value
    let json = ''
  `,Array.isArray(s)){for(let l=0;l<s.length;l++){let u=s[l];a+=`value = obj[${l}]`;let d=tn(t,n.getPropertyLocation(l),"value");a+=`
        if (${l} < arrayLength) {
          if (${aL(u.type,"value")}) {
            ${d}
            if (${l} < arrayEnd) {
              json += JSON_STR_COMMA
            }
          } else {
            throw new Error(\`Item at ${l} does not match schema definition.\`)
          }
        }
        `}r.additionalItems&&(a+=`
        for (let i = ${s.length}; i < arrayLength; i++) {
          value = obj[i]
          json += JSON.stringify(value)
          if (i < arrayEnd) {
            json += JSON_STR_COMMA
          }
        }`)}else{let l=tn(t,n,"value");a+=`
      for (let i = 0; i < arrayLength; i++) {
        value = obj[i]
        ${l}
        if (i < arrayEnd) {
          json += JSON_STR_COMMA
        }
      }`}return a+=`
    return JSON_STR_BEGIN_ARRAY + json + JSON_STR_END_ARRAY
  }`,t.functions.push(a),i}function aL(t,e){let r;switch(t){case"null":r="value === null";break;case"string":r=`typeof value === 'string' ||
      value === null ||
      value instanceof Date ||
      value instanceof RegExp ||
      (
        typeof value === "object" &&
        typeof value.toString === "function" &&
        value.toString !== Object.prototype.toString
      )`;break;case"integer":r="Number.isInteger(value)";break;case"number":r="Number.isFinite(value)";break;case"boolean":r="typeof value === 'boolean'";break;case"object":r="value && typeof value === 'object' && value.constructor === Object";break;case"array":r="Array.isArray(value)";break;default:Array.isArray(t)&&(r=`(${t.map(s=>aL(s,e)).join(" || ")})`)}return r}function cL(t){return"anonymous"+t.functionsCounter++}function yfe(t,e,r){let s=e.schema.type.sort(a=>a==="null"?-1:1),i="";s.forEach((a,c)=>{e.schema={...e.schema,type:a};let l=lL(t,e,r),u=c===0?"if":"else if";switch(a){case"null":i+=`
          ${u} (${r} === null)
            ${l}
          `;break;case"string":{i+=`
          ${u}(
            typeof ${r} === "string" ||
            ${r} === null ||
            ${r} instanceof Date ||
            ${r} instanceof RegExp ||
            (
              typeof ${r} === "object" &&
              typeof ${r}.toString === "function" &&
              ${r}.toString !== Object.prototype.toString
            )
          )
            ${l}
        `;break}case"array":{i+=`
          ${u}(Array.isArray(${r}))
            ${l}
        `;break}case"integer":{i+=`
          ${u}(Number.isInteger(${r}) || ${r} === null)
            ${l}
        `;break}default:{i+=`
          ${u}(typeof ${r} === "${a}" || ${r} === null)
            ${l}
        `;break}}});let o=e.getSchemaRef();return o.startsWith(t.rootSchemaId)&&(o=o.replace(t.rootSchemaId,"")),i+=`
    else throw new TypeError(\`The value of '${o}' does not match schema definition.\`)
  `,i}function lL(t,e,r){let n=e.schema;switch(n.type){case"null":return"json += JSON_STR_NULL";case"string":return n.format==="date-time"?`json += asDateTime(${r})`:n.format==="date"?`json += asDate(${r})`:n.format==="time"?`json += asTime(${r})`:n.format==="unsafe"?`json += asUnsafeString(${r})`:`
        if (typeof ${r} !== 'string') {
          if (${r} === null) {
            json += JSON_STR_EMPTY_STRING
          } else if (${r} instanceof Date) {
            json += JSON_STR_QUOTE + ${r}.toISOString() + JSON_STR_QUOTE
          } else if (${r} instanceof RegExp) {
            json += asString(${r}.source)
          } else {
            json += asString(${r}.toString())
          }
        } else {
          json += asString(${r})
        }
        `;case"integer":return`json += asInteger(${r})`;case"number":return`json += asNumber(${r})`;case"boolean":return`json += asBoolean(${r})`;case"object":return`json += ${mfe(t,e)}(${r})`;case"array":return`json += ${gfe(t,e)}(${r})`;case void 0:return`json += JSON.stringify(${r})`;default:throw new Error(`${n.type} unsupported`)}}function _fe(t,e){let r=t.schema,n=r.type,s=Array.isArray(n)&&n.includes("null"),i="";return s&&(i+=`
      if (${e} === null) {
        json += JSON_STR_NULL
      } else {
    `),i+=`json += '${JSON.stringify(r.const).replace(sfe,"\\'")}'`,s&&(i+=`
      }
    `),i}function vfe(t,e,r){let n=e.schema,s=t.mergedSchemasIds.get(n);if(s){let u=lg(t,s);return tn(t,u,r)}s=`__fjs_merged_${Mf++}`,t.mergedSchemasIds.set(n,s);let{allOf:i,...o}=e.schema,a=[new ca(o,e.schemaId,e.jsonPointer)],c=e.getPropertyLocation("allOf");for(let u=0;u<i.length;u++)a.push(c.getPropertyLocation(u));let l=ug(t,s,a);return tn(t,l,r)}function wfe(t,e,r){t.validatorSchemasIds.add(e.schemaId);let s=e.schema.anyOf?"anyOf":"oneOf",{[s]:i,...o}=e.schema,a=new ca(o,e.schemaId,e.jsonPointer),c=e.getPropertyLocation(s),l="";for(let d=0;d<i.length;d++){let p=c.getPropertyLocation(d),f=p.schema,h=t.mergedSchemasIds.get(f),m=null;h?m=lg(t,h):(h=`__fjs_merged_${Mf++}`,t.mergedSchemasIds.set(f,h),m=ug(t,h,[a,p]));let y=tn(t,m,r),g=p.getSchemaRef();l+=`
      ${d===0?"if":"else if"}(validator.validate("${g}", ${r}))
        ${y}
    `}let u=e.getSchemaRef();return u.startsWith(t.rootSchemaId)&&(u=u.replace(t.rootSchemaId,"")),l+=`
    else throw new TypeError(\`The value of '${u}' does not match schema definition.\`)
  `,l}function bfe(t,e,r){t.validatorSchemasIds.add(e.schemaId);let{if:n,then:s,else:i,...o}=e.schema,a=new ca(o,e.schemaId,e.jsonPointer),l=e.getPropertyLocation("if").getSchemaRef(),u=e.getPropertyLocation("then"),d=t.mergedSchemasIds.get(s),p=null;if(d?p=lg(t,d):(d=`__fjs_merged_${Mf++}`,t.mergedSchemasIds.set(s,d),p=ug(t,d,[a,u])),!i)return`
      if (validator.validate("${l}", ${r})) {
        ${tn(t,p,r)}
      } else {
        ${tn(t,a,r)}
      }
    `;let f=e.getPropertyLocation("else"),h=t.mergedSchemasIds.get(i),m=null;return h?m=lg(t,h):(h=`__fjs_merged_${Mf++}`,t.mergedSchemasIds.set(i,h),m=ug(t,h,[a,f])),`
    if (validator.validate("${l}", ${r})) {
      ${tn(t,p,r)}
    } else {
      ${tn(t,m,r)}
    }
  `}function tn(t,e,r){let n=e.schema;if(typeof n=="boolean")return`json += JSON.stringify(${r})`;if(n.$ref&&(e=jf(t,e),n=e.schema),n.allOf)return vfe(t,e,r);if(n.anyOf||n.oneOf)return wfe(t,e,r);if(n.if&&n.then)return bfe(t,e,r);if(n.type===void 0){let a=ffe(n);a&&(n.type=a)}let s="",i=n.type,o=n.nullable===!0;return o&&(s+=`
      if (${r} === null) {
        json += JSON_STR_NULL
      } else {
    `),n.const!==void 0?s+=_fe(e,r):Array.isArray(i)?s+=yfe(t,e,r):s+=lL(t,e,r),o&&(s+=`
      }
    `),s}Kc.exports=oT;Kc.exports.default=oT;Kc.exports.build=oT;Kc.exports.validLargeArrayMechanisms=iL;Kc.exports.restore=function({code:t,validator:e,serializer:r}){return Function.apply(null,["validator","serializer",t]).apply(null,[e,r])}});var hL=E((wke,fg)=>{"use strict";var Efe=uL();function fL(){return function(e,r){let n=Object.assign({},r,{schema:e});return Sfe.bind(null,n)}}function Sfe(t,{schema:e}){return t.schema&&e.$id&&t.schema[e.$id]&&(t.schema={...t.schema},delete t.schema[e.$id]),Efe(e,t)}function dL(t={readMode:!0}){if(t.readMode===!0&&typeof t.restoreFunction!="function")throw new Error("You must provide a function for the restoreFunction-option when readMode ON");if(t.readMode!==!0&&typeof t.storeFunction!="function")throw new Error("You must provide a function for the storeFunction-option when readMode OFF");if(t.readMode===!0)return function(){return function(n){return t.restoreFunction(n)}};let e=fL();return function(n,s={}){s.mode="standalone";let i=e(n,s);return function(o){let a=i(o);return t.storeFunction(o,a),new Function(a)}}}fg.exports.SerializerSelector=fL;fg.exports.StandaloneSerializer=dL;fg.exports.default=dL});var pL=E((bke,qf)=>{"use strict";var{SerializerSelector:aT,StandaloneSerializer:Tfe}=hL();qf.exports=aT;qf.exports.default=aT;qf.exports.SerializerSelector=aT;qf.exports.StandaloneSerializer=Tfe});var Jc=E(Fe=>{"use strict";Object.defineProperty(Fe,"__esModule",{value:!0});Fe.regexpCode=Fe.getEsmExportName=Fe.getProperty=Fe.safeStringify=Fe.stringify=Fe.strConcat=Fe.addCodeArg=Fe.str=Fe._=Fe.nil=Fe._Code=Fe.Name=Fe.IDENTIFIER=Fe._CodeOrName=void 0;var Lf=class{};Fe._CodeOrName=Lf;Fe.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var la=class extends Lf{constructor(e){if(super(),!Fe.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};Fe.Name=la;var wn=class extends Lf{constructor(e){super(),this._items=typeof e=="string"?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return e===""||e==='""'}get str(){var e;return(e=this._str)!==null&&e!==void 0?e:this._str=this._items.reduce((r,n)=>`${r}${n}`,"")}get names(){var e;return(e=this._names)!==null&&e!==void 0?e:this._names=this._items.reduce((r,n)=>(n instanceof la&&(r[n.str]=(r[n.str]||0)+1),r),{})}};Fe._Code=wn;Fe.nil=new wn("");function mL(t,...e){let r=[t[0]],n=0;for(;n<e.length;)lT(r,e[n]),r.push(t[++n]);return new wn(r)}Fe._=mL;var cT=new wn("+");function gL(t,...e){let r=[Ff(t[0])],n=0;for(;n<e.length;)r.push(cT),lT(r,e[n]),r.push(cT,Ff(t[++n]));return Rfe(r),new wn(r)}Fe.str=gL;function lT(t,e){e instanceof wn?t.push(...e._items):e instanceof la?t.push(e):t.push(Pfe(e))}Fe.addCodeArg=lT;function Rfe(t){let e=1;for(;e<t.length-1;){if(t[e]===cT){let r=$fe(t[e-1],t[e+1]);if(r!==void 0){t.splice(e-1,3,r);continue}t[e++]="+"}e++}}function $fe(t,e){if(e==='""')return t;if(t==='""')return e;if(typeof t=="string")return e instanceof la||t[t.length-1]!=='"'?void 0:typeof e!="string"?`${t.slice(0,-1)}${e}"`:e[0]==='"'?t.slice(0,-1)+e.slice(1):void 0;if(typeof e=="string"&&e[0]==='"'&&!(t instanceof la))return`"${t}${e.slice(1)}`}function Ofe(t,e){return e.emptyStr()?t:t.emptyStr()?e:gL`${t}${e}`}Fe.strConcat=Ofe;function Pfe(t){return typeof t=="number"||typeof t=="boolean"||t===null?t:Ff(Array.isArray(t)?t.join(","):t)}function xfe(t){return new wn(Ff(t))}Fe.stringify=xfe;function Ff(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}Fe.safeStringify=Ff;function Nfe(t){return typeof t=="string"&&Fe.IDENTIFIER.test(t)?new wn(`.${t}`):mL`[${t}]`}Fe.getProperty=Nfe;function Cfe(t){if(typeof t=="string"&&Fe.IDENTIFIER.test(t))return new wn(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)}Fe.getEsmExportName=Cfe;function Ife(t){return new wn(t.toString())}Fe.regexpCode=Ife});var mg=E(Wr=>{"use strict";Object.defineProperty(Wr,"__esModule",{value:!0});Wr.ValueScope=Wr.ValueScopeName=Wr.Scope=Wr.varKinds=Wr.UsedValueState=void 0;var Gr=Jc(),uT=class extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}},dg;(function(t){t[t.Started=0]="Started",t[t.Completed=1]="Completed"})(dg||(Wr.UsedValueState=dg={}));Wr.varKinds={const:new Gr.Name("const"),let:new Gr.Name("let"),var:new Gr.Name("var")};var hg=class{constructor({prefixes:e,parent:r}={}){this._names={},this._prefixes=e,this._parent=r}toName(e){return e instanceof Gr.Name?e:this.name(e)}name(e){return new Gr.Name(this._newName(e))}_newName(e){let r=this._names[e]||this._nameGroup(e);return`${e}${r.index++}`}_nameGroup(e){var r,n;if(!((n=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||n===void 0)&&n.has(e)||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}};Wr.Scope=hg;var pg=class extends Gr.Name{constructor(e,r){super(r),this.prefix=e}setValue(e,{property:r,itemIndex:n}){this.value=e,this.scopePath=(0,Gr._)`.${new Gr.Name(r)}[${n}]`}};Wr.ValueScopeName=pg;var Afe=(0,Gr._)`\n`,fT=class extends hg{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?Afe:Gr.nil}}get(){return this._scope}name(e){return new pg(e,this._newName(e))}value(e,r){var n;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let s=this.toName(e),{prefix:i}=s,o=(n=r.key)!==null&&n!==void 0?n:r.ref,a=this._values[i];if(a){let u=a.get(o);if(u)return u}else a=this._values[i]=new Map;a.set(o,s);let c=this._scope[i]||(this._scope[i]=[]),l=c.length;return c[l]=r.ref,s.setValue(r,{property:i,itemIndex:l}),s}getValue(e,r){let n=this._values[e];if(n)return n.get(r)}scopeRefs(e,r=this._values){return this._reduceValues(r,n=>{if(n.scopePath===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return(0,Gr._)`${e}${n.scopePath}`})}scopeCode(e=this._values,r,n){return this._reduceValues(e,s=>{if(s.value===void 0)throw new Error(`CodeGen: name "${s}" has no value`);return s.value.code},r,n)}_reduceValues(e,r,n={},s){let i=Gr.nil;for(let o in e){let a=e[o];if(!a)continue;let c=n[o]=n[o]||new Map;a.forEach(l=>{if(c.has(l))return;c.set(l,dg.Started);let u=r(l);if(u){let d=this.opts.es5?Wr.varKinds.var:Wr.varKinds.const;i=(0,Gr._)`${i}${d} ${l} = ${u};${this.opts._n}`}else if(u=s?.(l))i=(0,Gr._)`${i}${u}${this.opts._n}`;else throw new uT(l);c.set(l,dg.Completed)})}return i}};Wr.ValueScope=fT});var ne=E(ve=>{"use strict";Object.defineProperty(ve,"__esModule",{value:!0});ve.or=ve.and=ve.not=ve.CodeGen=ve.operators=ve.varKinds=ve.ValueScopeName=ve.ValueScope=ve.Scope=ve.Name=ve.regexpCode=ve.stringify=ve.getProperty=ve.nil=ve.strConcat=ve.str=ve._=void 0;var Ie=Jc(),Zn=mg(),Xi=Jc();Object.defineProperty(ve,"_",{enumerable:!0,get:function(){return Xi._}});Object.defineProperty(ve,"str",{enumerable:!0,get:function(){return Xi.str}});Object.defineProperty(ve,"strConcat",{enumerable:!0,get:function(){return Xi.strConcat}});Object.defineProperty(ve,"nil",{enumerable:!0,get:function(){return Xi.nil}});Object.defineProperty(ve,"getProperty",{enumerable:!0,get:function(){return Xi.getProperty}});Object.defineProperty(ve,"stringify",{enumerable:!0,get:function(){return Xi.stringify}});Object.defineProperty(ve,"regexpCode",{enumerable:!0,get:function(){return Xi.regexpCode}});Object.defineProperty(ve,"Name",{enumerable:!0,get:function(){return Xi.Name}});var vg=mg();Object.defineProperty(ve,"Scope",{enumerable:!0,get:function(){return vg.Scope}});Object.defineProperty(ve,"ValueScope",{enumerable:!0,get:function(){return vg.ValueScope}});Object.defineProperty(ve,"ValueScopeName",{enumerable:!0,get:function(){return vg.ValueScopeName}});Object.defineProperty(ve,"varKinds",{enumerable:!0,get:function(){return vg.varKinds}});ve.operators={GT:new Ie._Code(">"),GTE:new Ie._Code(">="),LT:new Ie._Code("<"),LTE:new Ie._Code("<="),EQ:new Ie._Code("==="),NEQ:new Ie._Code("!=="),NOT:new Ie._Code("!"),OR:new Ie._Code("||"),AND:new Ie._Code("&&"),ADD:new Ie._Code("+")};var oi=class{optimizeNodes(){return this}optimizeNames(e,r){return this}},dT=class extends oi{constructor(e,r,n){super(),this.varKind=e,this.name=r,this.rhs=n}render({es5:e,_n:r}){let n=e?Zn.varKinds.var:this.varKind,s=this.rhs===void 0?"":` = ${this.rhs}`;return`${n} ${this.name}${s};`+r}optimizeNames(e,r){if(e[this.name.str])return this.rhs&&(this.rhs=Xc(this.rhs,e,r)),this}get names(){return this.rhs instanceof Ie._CodeOrName?this.rhs.names:{}}},gg=class extends oi{constructor(e,r,n){super(),this.lhs=e,this.rhs=r,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof Ie.Name&&!e[this.lhs.str]&&!this.sideEffects))return this.rhs=Xc(this.rhs,e,r),this}get names(){let e=this.lhs instanceof Ie.Name?{}:{...this.lhs.names};return _g(e,this.rhs)}},hT=class extends gg{constructor(e,r,n,s){super(e,n,s),this.op=r}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}},pT=class extends oi{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}},mT=class extends oi{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}},gT=class extends oi{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}},yT=class extends oi{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,r){return this.code=Xc(this.code,e,r),this}get names(){return this.code instanceof Ie._CodeOrName?this.code.names:{}}},Uf=class extends oi{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((r,n)=>r+n.render(e),"")}optimizeNodes(){let{nodes:e}=this,r=e.length;for(;r--;){let n=e[r].optimizeNodes();Array.isArray(n)?e.splice(r,1,...n):n?e[r]=n:e.splice(r,1)}return e.length>0?this:void 0}optimizeNames(e,r){let{nodes:n}=this,s=n.length;for(;s--;){let i=n[s];i.optimizeNames(e,r)||(kfe(e,i.names),n.splice(s,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((e,r)=>fa(e,r.names),{})}},ai=class extends Uf{render(e){return"{"+e._n+super.render(e)+"}"+e._n}},_T=class extends Uf{},Yc=class extends ai{};Yc.kind="else";var es=class extends ai{constructor(e,r){super(r),this.condition=e}render(e){let r=`if(${this.condition})`+super.render(e);return this.else&&(r+="else "+this.else.render(e)),r}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(e===!0)return this.nodes;let r=this.else;if(r){let n=r.optimizeNodes();r=this.else=Array.isArray(n)?new Yc(n):n}if(r)return e===!1?r instanceof es?r:r.nodes:this.nodes.length?this:new es(yL(e),r instanceof es?[r]:r.nodes);if(!(e===!1||!this.nodes.length))return this}optimizeNames(e,r){var n;if(this.else=(n=this.else)===null||n===void 0?void 0:n.optimizeNames(e,r),!!(super.optimizeNames(e,r)||this.else))return this.condition=Xc(this.condition,e,r),this}get names(){let e=super.names;return _g(e,this.condition),this.else&&fa(e,this.else.names),e}};es.kind="if";var ua=class extends ai{};ua.kind="for";var vT=class extends ua{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iteration=Xc(this.iteration,e,r),this}get names(){return fa(super.names,this.iteration.names)}},wT=class extends ua{constructor(e,r,n,s){super(),this.varKind=e,this.name=r,this.from=n,this.to=s}render(e){let r=e.es5?Zn.varKinds.var:this.varKind,{name:n,from:s,to:i}=this;return`for(${r} ${n}=${s}; ${n}<${i}; ${n}++)`+super.render(e)}get names(){let e=_g(super.names,this.from);return _g(e,this.to)}},yg=class extends ua{constructor(e,r,n,s){super(),this.loop=e,this.varKind=r,this.name=n,this.iterable=s}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iterable=Xc(this.iterable,e,r),this}get names(){return fa(super.names,this.iterable.names)}},Bf=class extends ai{constructor(e,r,n){super(),this.name=e,this.args=r,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}};Bf.kind="func";var Vf=class extends Uf{render(e){return"return "+super.render(e)}};Vf.kind="return";var bT=class extends ai{render(e){let r="try"+super.render(e);return this.catch&&(r+=this.catch.render(e)),this.finally&&(r+=this.finally.render(e)),r}optimizeNodes(){var e,r;return super.optimizeNodes(),(e=this.catch)===null||e===void 0||e.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(e,r){var n,s;return super.optimizeNames(e,r),(n=this.catch)===null||n===void 0||n.optimizeNames(e,r),(s=this.finally)===null||s===void 0||s.optimizeNames(e,r),this}get names(){let e=super.names;return this.catch&&fa(e,this.catch.names),this.finally&&fa(e,this.finally.names),e}},zf=class extends ai{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}};zf.kind="catch";var Hf=class extends ai{render(e){return"finally"+super.render(e)}};Hf.kind="finally";var ET=class{constructor(e,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=e,this._scope=new Zn.Scope({parent:e}),this._nodes=[new _T]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,r){let n=this._extScope.value(e,r);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,r){return this._extScope.getValue(e,r)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,r,n,s){let i=this._scope.toName(r);return n!==void 0&&s&&(this._constants[i.str]=n),this._leafNode(new dT(e,i,n)),i}const(e,r,n){return this._def(Zn.varKinds.const,e,r,n)}let(e,r,n){return this._def(Zn.varKinds.let,e,r,n)}var(e,r,n){return this._def(Zn.varKinds.var,e,r,n)}assign(e,r,n){return this._leafNode(new gg(e,r,n))}add(e,r){return this._leafNode(new hT(e,ve.operators.ADD,r))}code(e){return typeof e=="function"?e():e!==Ie.nil&&this._leafNode(new yT(e)),this}object(...e){let r=["{"];for(let[n,s]of e)r.length>1&&r.push(","),r.push(n),(n!==s||this.opts.es5)&&(r.push(":"),(0,Ie.addCodeArg)(r,s));return r.push("}"),new Ie._Code(r)}if(e,r,n){if(this._blockNode(new es(e)),r&&n)this.code(r).else().code(n).endIf();else if(r)this.code(r).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new es(e))}else(){return this._elseNode(new Yc)}endIf(){return this._endBlockNode(es,Yc)}_for(e,r){return this._blockNode(e),r&&this.code(r).endFor(),this}for(e,r){return this._for(new vT(e),r)}forRange(e,r,n,s,i=this.opts.es5?Zn.varKinds.var:Zn.varKinds.let){let o=this._scope.toName(e);return this._for(new wT(i,o,r,n),()=>s(o))}forOf(e,r,n,s=Zn.varKinds.const){let i=this._scope.toName(e);if(this.opts.es5){let o=r instanceof Ie.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,Ie._)`${o}.length`,a=>{this.var(i,(0,Ie._)`${o}[${a}]`),n(i)})}return this._for(new yg("of",s,i,r),()=>n(i))}forIn(e,r,n,s=this.opts.es5?Zn.varKinds.var:Zn.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,Ie._)`Object.keys(${r})`,n);let i=this._scope.toName(e);return this._for(new yg("in",s,i,r),()=>n(i))}endFor(){return this._endBlockNode(ua)}label(e){return this._leafNode(new pT(e))}break(e){return this._leafNode(new mT(e))}return(e){let r=new Vf;if(this._blockNode(r),this.code(e),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(Vf)}try(e,r,n){if(!r&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');let s=new bT;if(this._blockNode(s),this.code(e),r){let i=this.name("e");this._currNode=s.catch=new zf(i),r(i)}return n&&(this._currNode=s.finally=new Hf,this.code(n)),this._endBlockNode(zf,Hf)}throw(e){return this._leafNode(new gT(e))}block(e,r){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(r),this}endBlock(e){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let n=this._nodes.length-r;if(n<0||e!==void 0&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=r,this}func(e,r=Ie.nil,n,s){return this._blockNode(new Bf(e,r,n)),s&&this.code(s).endFunc(),this}endFunc(){return this._endBlockNode(Bf)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,r){let n=this._currNode;if(n instanceof e||r&&n instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${e.kind}/${r.kind}`:e.kind}"`)}_elseNode(e){let r=this._currNode;if(!(r instanceof es))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let r=this._nodes;r[r.length-1]=e}};ve.CodeGen=ET;function fa(t,e){for(let r in e)t[r]=(t[r]||0)+(e[r]||0);return t}function _g(t,e){return e instanceof Ie._CodeOrName?fa(t,e.names):t}function Xc(t,e,r){if(t instanceof Ie.Name)return n(t);if(!s(t))return t;return new Ie._Code(t._items.reduce((i,o)=>(o instanceof Ie.Name&&(o=n(o)),o instanceof Ie._Code?i.push(...o._items):i.push(o),i),[]));function n(i){let o=r[i.str];return o===void 0||e[i.str]!==1?i:(delete e[i.str],o)}function s(i){return i instanceof Ie._Code&&i._items.some(o=>o instanceof Ie.Name&&e[o.str]===1&&r[o.str]!==void 0)}}function kfe(t,e){for(let r in e)t[r]=(t[r]||0)-(e[r]||0)}function yL(t){return typeof t=="boolean"||typeof t=="number"||t===null?!t:(0,Ie._)`!${ST(t)}`}ve.not=yL;var Dfe=_L(ve.operators.AND);function Mfe(...t){return t.reduce(Dfe)}ve.and=Mfe;var jfe=_L(ve.operators.OR);function qfe(...t){return t.reduce(jfe)}ve.or=qfe;function _L(t){return(e,r)=>e===Ie.nil?r:r===Ie.nil?e:(0,Ie._)`${ST(e)} ${t} ${ST(r)}`}function ST(t){return t instanceof Ie.Name?t:(0,Ie._)`(${t})`}});var me=E(Se=>{"use strict";Object.defineProperty(Se,"__esModule",{value:!0});Se.checkStrictMode=Se.getErrorPath=Se.Type=Se.useFunc=Se.setEvaluated=Se.evaluatedPropsToName=Se.mergeEvaluated=Se.eachItem=Se.unescapeJsonPointer=Se.escapeJsonPointer=Se.escapeFragment=Se.unescapeFragment=Se.schemaRefOrVal=Se.schemaHasRulesButRef=Se.schemaHasRules=Se.checkUnknownRules=Se.alwaysValidSchema=Se.toHash=void 0;var Je=ne(),Lfe=Jc();function Ffe(t){let e={};for(let r of t)e[r]=!0;return e}Se.toHash=Ffe;function Ufe(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(bL(t,e),!EL(e,t.self.RULES.all))}Se.alwaysValidSchema=Ufe;function bL(t,e=t.schema){let{opts:r,self:n}=t;if(!r.strictSchema||typeof e=="boolean")return;let s=n.RULES.keywords;for(let i in e)s[i]||RL(t,`unknown keyword: "${i}"`)}Se.checkUnknownRules=bL;function EL(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(e[r])return!0;return!1}Se.schemaHasRules=EL;function Bfe(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}Se.schemaHasRulesButRef=Bfe;function Vfe({topSchemaRef:t,schemaPath:e},r,n,s){if(!s){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,Je._)`${r}`}return(0,Je._)`${t}${e}${(0,Je.getProperty)(n)}`}Se.schemaRefOrVal=Vfe;function zfe(t){return SL(decodeURIComponent(t))}Se.unescapeFragment=zfe;function Hfe(t){return encodeURIComponent(RT(t))}Se.escapeFragment=Hfe;function RT(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}Se.escapeJsonPointer=RT;function SL(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}Se.unescapeJsonPointer=SL;function Gfe(t,e){if(Array.isArray(t))for(let r of t)e(r);else e(t)}Se.eachItem=Gfe;function vL({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:n}){return(s,i,o,a)=>{let c=o===void 0?i:o instanceof Je.Name?(i instanceof Je.Name?t(s,i,o):e(s,i,o),o):i instanceof Je.Name?(e(s,o,i),i):r(i,o);return a===Je.Name&&!(c instanceof Je.Name)?n(s,c):c}}Se.mergeEvaluated={props:vL({mergeNames:(t,e,r)=>t.if((0,Je._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,Je._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,Je._)`${r} || {}`).code((0,Je._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,Je._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,Je._)`${r} || {}`),$T(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:TL}),items:vL({mergeNames:(t,e,r)=>t.if((0,Je._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,Je._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,Je._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,Je._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function TL(t,e){if(e===!0)return t.var("props",!0);let r=t.var("props",(0,Je._)`{}`);return e!==void 0&&$T(t,r,e),r}Se.evaluatedPropsToName=TL;function $T(t,e,r){Object.keys(r).forEach(n=>t.assign((0,Je._)`${e}${(0,Je.getProperty)(n)}`,!0))}Se.setEvaluated=$T;var wL={};function Wfe(t,e){return t.scopeValue("func",{ref:e,code:wL[e.code]||(wL[e.code]=new Lfe._Code(e.code))})}Se.useFunc=Wfe;var TT;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(TT||(Se.Type=TT={}));function Kfe(t,e,r){if(t instanceof Je.Name){let n=e===TT.Num;return r?n?(0,Je._)`"[" + ${t} + "]"`:(0,Je._)`"['" + ${t} + "']"`:n?(0,Je._)`"/" + ${t}`:(0,Je._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,Je.getProperty)(t).toString():"/"+RT(t)}Se.getErrorPath=Kfe;function RL(t,e,r=t.opts.strictSchema){if(r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}Se.checkStrictMode=RL});var bn=E(OT=>{"use strict";Object.defineProperty(OT,"__esModule",{value:!0});var cr=ne(),Jfe={data:new cr.Name("data"),valCxt:new cr.Name("valCxt"),instancePath:new cr.Name("instancePath"),parentData:new cr.Name("parentData"),parentDataProperty:new cr.Name("parentDataProperty"),rootData:new cr.Name("rootData"),dynamicAnchors:new cr.Name("dynamicAnchors"),vErrors:new cr.Name("vErrors"),errors:new cr.Name("errors"),this:new cr.Name("this"),self:new cr.Name("self"),scope:new cr.Name("scope"),json:new cr.Name("json"),jsonPos:new cr.Name("jsonPos"),jsonLen:new cr.Name("jsonLen"),jsonPart:new cr.Name("jsonPart")};OT.default=Jfe});var Gf=E(lr=>{"use strict";Object.defineProperty(lr,"__esModule",{value:!0});lr.extendErrors=lr.resetErrorsCount=lr.reportExtraError=lr.reportError=lr.keyword$DataError=lr.keywordError=void 0;var De=ne(),wg=me(),$r=bn();lr.keywordError={message:({keyword:t})=>(0,De.str)`must pass "${t}" keyword validation`};lr.keyword$DataError={message:({keyword:t,schemaType:e})=>e?(0,De.str)`"${t}" keyword must be ${e} ($data)`:(0,De.str)`"${t}" keyword is invalid ($data)`};function Yfe(t,e=lr.keywordError,r,n){let{it:s}=t,{gen:i,compositeRule:o,allErrors:a}=s,c=PL(t,e,r);n??(o||a)?$L(i,c):OL(s,(0,De._)`[${c}]`)}lr.reportError=Yfe;function Xfe(t,e=lr.keywordError,r){let{it:n}=t,{gen:s,compositeRule:i,allErrors:o}=n,a=PL(t,e,r);$L(s,a),i||o||OL(n,$r.default.vErrors)}lr.reportExtraError=Xfe;function Qfe(t,e){t.assign($r.default.errors,e),t.if((0,De._)`${$r.default.vErrors} !== null`,()=>t.if(e,()=>t.assign((0,De._)`${$r.default.vErrors}.length`,e),()=>t.assign($r.default.vErrors,null)))}lr.resetErrorsCount=Qfe;function Zfe({gen:t,keyword:e,schemaValue:r,data:n,errsCount:s,it:i}){if(s===void 0)throw new Error("ajv implementation error");let o=t.name("err");t.forRange("i",s,$r.default.errors,a=>{t.const(o,(0,De._)`${$r.default.vErrors}[${a}]`),t.if((0,De._)`${o}.instancePath === undefined`,()=>t.assign((0,De._)`${o}.instancePath`,(0,De.strConcat)($r.default.instancePath,i.errorPath))),t.assign((0,De._)`${o}.schemaPath`,(0,De.str)`${i.errSchemaPath}/${e}`),i.opts.verbose&&(t.assign((0,De._)`${o}.schema`,r),t.assign((0,De._)`${o}.data`,n))})}lr.extendErrors=Zfe;function $L(t,e){let r=t.const("err",e);t.if((0,De._)`${$r.default.vErrors} === null`,()=>t.assign($r.default.vErrors,(0,De._)`[${r}]`),(0,De._)`${$r.default.vErrors}.push(${r})`),t.code((0,De._)`${$r.default.errors}++`)}function OL(t,e){let{gen:r,validateName:n,schemaEnv:s}=t;s.$async?r.throw((0,De._)`new ${t.ValidationError}(${e})`):(r.assign((0,De._)`${n}.errors`,e),r.return(!1))}var da={keyword:new De.Name("keyword"),schemaPath:new De.Name("schemaPath"),params:new De.Name("params"),propertyName:new De.Name("propertyName"),message:new De.Name("message"),schema:new De.Name("schema"),parentSchema:new De.Name("parentSchema")};function PL(t,e,r){let{createErrors:n}=t.it;return n===!1?(0,De._)`{}`:ede(t,e,r)}function ede(t,e,r={}){let{gen:n,it:s}=t,i=[tde(s,r),rde(t,r)];return nde(t,e,i),n.object(...i)}function tde({errorPath:t},{instancePath:e}){let r=e?(0,De.str)`${t}${(0,wg.getErrorPath)(e,wg.Type.Str)}`:t;return[$r.default.instancePath,(0,De.strConcat)($r.default.instancePath,r)]}function rde({keyword:t,it:{errSchemaPath:e}},{schemaPath:r,parentSchema:n}){let s=n?e:(0,De.str)`${e}/${t}`;return r&&(s=(0,De.str)`${s}${(0,wg.getErrorPath)(r,wg.Type.Str)}`),[da.schemaPath,s]}function nde(t,{params:e,message:r},n){let{keyword:s,data:i,schemaValue:o,it:a}=t,{opts:c,propertyName:l,topSchemaRef:u,schemaPath:d}=a;n.push([da.keyword,s],[da.params,typeof e=="function"?e(t):e||(0,De._)`{}`]),c.messages&&n.push([da.message,typeof r=="function"?r(t):r]),c.verbose&&n.push([da.schema,o],[da.parentSchema,(0,De._)`${u}${d}`],[$r.default.data,i]),l&&n.push([da.propertyName,l])}});var NL=E(Qc=>{"use strict";Object.defineProperty(Qc,"__esModule",{value:!0});Qc.boolOrEmptySchema=Qc.topBoolOrEmptySchema=void 0;var sde=Gf(),ide=ne(),ode=bn(),ade={message:"boolean schema is false"};function cde(t){let{gen:e,schema:r,validateName:n}=t;r===!1?xL(t,!1):typeof r=="object"&&r.$async===!0?e.return(ode.default.data):(e.assign((0,ide._)`${n}.errors`,null),e.return(!0))}Qc.topBoolOrEmptySchema=cde;function lde(t,e){let{gen:r,schema:n}=t;n===!1?(r.var(e,!1),xL(t)):r.var(e,!0)}Qc.boolOrEmptySchema=lde;function xL(t,e){let{gen:r,data:n}=t,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,sde.reportError)(s,ade,void 0,e)}});var PT=E(Zc=>{"use strict";Object.defineProperty(Zc,"__esModule",{value:!0});Zc.getRules=Zc.isJSONType=void 0;var ude=["string","number","integer","boolean","null","object","array"],fde=new Set(ude);function dde(t){return typeof t=="string"&&fde.has(t)}Zc.isJSONType=dde;function hde(){let t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}Zc.getRules=hde});var xT=E(Qi=>{"use strict";Object.defineProperty(Qi,"__esModule",{value:!0});Qi.shouldUseRule=Qi.shouldUseGroup=Qi.schemaHasRulesForType=void 0;function pde({schema:t,self:e},r){let n=e.RULES.types[r];return n&&n!==!0&&CL(t,n)}Qi.schemaHasRulesForType=pde;function CL(t,e){return e.rules.some(r=>IL(t,r))}Qi.shouldUseGroup=CL;function IL(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(n=>t[n]!==void 0))}Qi.shouldUseRule=IL});var Wf=E(ur=>{"use strict";Object.defineProperty(ur,"__esModule",{value:!0});ur.reportTypeError=ur.checkDataTypes=ur.checkDataType=ur.coerceAndCheckDataType=ur.getJSONTypes=ur.getSchemaTypes=ur.DataType=void 0;var mde=PT(),gde=xT(),yde=Gf(),he=ne(),AL=me(),el;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(el||(ur.DataType=el={}));function _de(t){let e=kL(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}ur.getSchemaTypes=_de;function kL(t){let e=Array.isArray(t)?t:t?[t]:[];if(e.every(mde.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}ur.getJSONTypes=kL;function vde(t,e){let{gen:r,data:n,opts:s}=t,i=wde(e,s.coerceTypes),o=e.length>0&&!(i.length===0&&e.length===1&&(0,gde.schemaHasRulesForType)(t,e[0]));if(o){let a=CT(e,n,s.strictNumbers,el.Wrong);r.if(a,()=>{i.length?bde(t,e,i):IT(t)})}return o}ur.coerceAndCheckDataType=vde;var DL=new Set(["string","number","integer","boolean","null"]);function wde(t,e){return e?t.filter(r=>DL.has(r)||e==="array"&&r==="array"):[]}function bde(t,e,r){let{gen:n,data:s,opts:i}=t,o=n.let("dataType",(0,he._)`typeof ${s}`),a=n.let("coerced",(0,he._)`undefined`);i.coerceTypes==="array"&&n.if((0,he._)`${o} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>n.assign(s,(0,he._)`${s}[0]`).assign(o,(0,he._)`typeof ${s}`).if(CT(e,s,i.strictNumbers),()=>n.assign(a,s))),n.if((0,he._)`${a} !== undefined`);for(let l of r)(DL.has(l)||l==="array"&&i.coerceTypes==="array")&&c(l);n.else(),IT(t),n.endIf(),n.if((0,he._)`${a} !== undefined`,()=>{n.assign(s,a),Ede(t,a)});function c(l){switch(l){case"string":n.elseIf((0,he._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,he._)`"" + ${s}`).elseIf((0,he._)`${s} === null`).assign(a,(0,he._)`""`);return;case"number":n.elseIf((0,he._)`${o} == "boolean" || ${s} === null
              || (${o} == "string" && ${s} && ${s} == +${s})`).assign(a,(0,he._)`+${s}`);return;case"integer":n.elseIf((0,he._)`${o} === "boolean" || ${s} === null
              || (${o} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(a,(0,he._)`+${s}`);return;case"boolean":n.elseIf((0,he._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(a,!1).elseIf((0,he._)`${s} === "true" || ${s} === 1`).assign(a,!0);return;case"null":n.elseIf((0,he._)`${s} === "" || ${s} === 0 || ${s} === false`),n.assign(a,null);return;case"array":n.elseIf((0,he._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${s} === null`).assign(a,(0,he._)`[${s}]`)}}}function Ede({gen:t,parentData:e,parentDataProperty:r},n){t.if((0,he._)`${e} !== undefined`,()=>t.assign((0,he._)`${e}[${r}]`,n))}function NT(t,e,r,n=el.Correct){let s=n===el.Correct?he.operators.EQ:he.operators.NEQ,i;switch(t){case"null":return(0,he._)`${e} ${s} null`;case"array":i=(0,he._)`Array.isArray(${e})`;break;case"object":i=(0,he._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":i=o((0,he._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":i=o();break;default:return(0,he._)`typeof ${e} ${s} ${t}`}return n===el.Correct?i:(0,he.not)(i);function o(a=he.nil){return(0,he.and)((0,he._)`typeof ${e} == "number"`,a,r?(0,he._)`isFinite(${e})`:he.nil)}}ur.checkDataType=NT;function CT(t,e,r,n){if(t.length===1)return NT(t[0],e,r,n);let s,i=(0,AL.toHash)(t);if(i.array&&i.object){let o=(0,he._)`typeof ${e} != "object"`;s=i.null?o:(0,he._)`!${e} || ${o}`,delete i.null,delete i.array,delete i.object}else s=he.nil;i.number&&delete i.integer;for(let o in i)s=(0,he.and)(s,NT(o,e,r,n));return s}ur.checkDataTypes=CT;var Sde={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,he._)`{type: ${t}}`:(0,he._)`{type: ${e}}`};function IT(t){let e=Tde(t);(0,yde.reportError)(e,Sde)}ur.reportTypeError=IT;function Tde(t){let{gen:e,data:r,schema:n}=t,s=(0,AL.schemaRefOrVal)(t,n,"type");return{gen:e,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:t}}});var jL=E(bg=>{"use strict";Object.defineProperty(bg,"__esModule",{value:!0});bg.assignDefaults=void 0;var tl=ne(),Rde=me();function $de(t,e){let{properties:r,items:n}=t.schema;if(e==="object"&&r)for(let s in r)ML(t,s,r[s].default);else e==="array"&&Array.isArray(n)&&n.forEach((s,i)=>ML(t,i,s.default))}bg.assignDefaults=$de;function ML(t,e,r){let{gen:n,compositeRule:s,data:i,opts:o}=t;if(r===void 0)return;let a=(0,tl._)`${i}${(0,tl.getProperty)(e)}`;if(s){(0,Rde.checkStrictMode)(t,`default is ignored for: ${a}`);return}let c=(0,tl._)`${a} === undefined`;o.useDefaults==="empty"&&(c=(0,tl._)`${c} || ${a} === null || ${a} === ""`),n.if(c,(0,tl._)`${a} = ${(0,tl.stringify)(r)}`)}});var Jt=E(Ge=>{"use strict";Object.defineProperty(Ge,"__esModule",{value:!0});Ge.validateUnion=Ge.validateArray=Ge.usePattern=Ge.callValidateCode=Ge.schemaProperties=Ge.allSchemaProperties=Ge.noPropertyInData=Ge.propertyInData=Ge.isOwnProperty=Ge.hasPropFunc=Ge.reportMissingProp=Ge.checkMissingProp=Ge.checkReportMissingProp=void 0;var st=ne(),AT=me(),Zi=bn(),Ode=me();function Pde(t,e){let{gen:r,data:n,it:s}=t;r.if(DT(r,n,e,s.opts.ownProperties),()=>{t.setParams({missingProperty:(0,st._)`${e}`},!0),t.error()})}Ge.checkReportMissingProp=Pde;function xde({gen:t,data:e,it:{opts:r}},n,s){return(0,st.or)(...n.map(i=>(0,st.and)(DT(t,e,i,r.ownProperties),(0,st._)`${s} = ${i}`)))}Ge.checkMissingProp=xde;function Nde(t,e){t.setParams({missingProperty:e},!0),t.error()}Ge.reportMissingProp=Nde;function qL(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,st._)`Object.prototype.hasOwnProperty`})}Ge.hasPropFunc=qL;function kT(t,e,r){return(0,st._)`${qL(t)}.call(${e}, ${r})`}Ge.isOwnProperty=kT;function Cde(t,e,r,n){let s=(0,st._)`${e}${(0,st.getProperty)(r)} !== undefined`;return n?(0,st._)`${s} && ${kT(t,e,r)}`:s}Ge.propertyInData=Cde;function DT(t,e,r,n){let s=(0,st._)`${e}${(0,st.getProperty)(r)} === undefined`;return n?(0,st.or)(s,(0,st.not)(kT(t,e,r))):s}Ge.noPropertyInData=DT;function LL(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}Ge.allSchemaProperties=LL;function Ide(t,e){return LL(e).filter(r=>!(0,AT.alwaysValidSchema)(t,e[r]))}Ge.schemaProperties=Ide;function Ade({schemaCode:t,data:e,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:i},it:o},a,c,l){let u=l?(0,st._)`${t}, ${e}, ${n}${s}`:e,d=[[Zi.default.instancePath,(0,st.strConcat)(Zi.default.instancePath,i)],[Zi.default.parentData,o.parentData],[Zi.default.parentDataProperty,o.parentDataProperty],[Zi.default.rootData,Zi.default.rootData]];o.opts.dynamicRef&&d.push([Zi.default.dynamicAnchors,Zi.default.dynamicAnchors]);let p=(0,st._)`${u}, ${r.object(...d)}`;return c!==st.nil?(0,st._)`${a}.call(${c}, ${p})`:(0,st._)`${a}(${p})`}Ge.callValidateCode=Ade;var kde=(0,st._)`new RegExp`;function Dde({gen:t,it:{opts:e}},r){let n=e.unicodeRegExp?"u":"",{regExp:s}=e.code,i=s(r,n);return t.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,st._)`${s.code==="new RegExp"?kde:(0,Ode.useFunc)(t,s)}(${r}, ${n})`})}Ge.usePattern=Dde;function Mde(t){let{gen:e,data:r,keyword:n,it:s}=t,i=e.name("valid");if(s.allErrors){let a=e.let("valid",!0);return o(()=>e.assign(a,!1)),a}return e.var(i,!0),o(()=>e.break()),i;function o(a){let c=e.const("len",(0,st._)`${r}.length`);e.forRange("i",0,c,l=>{t.subschema({keyword:n,dataProp:l,dataPropType:AT.Type.Num},i),e.if((0,st.not)(i),a)})}}Ge.validateArray=Mde;function jde(t){let{gen:e,schema:r,keyword:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(c=>(0,AT.alwaysValidSchema)(s,c))&&!s.opts.unevaluated)return;let o=e.let("valid",!1),a=e.name("_valid");e.block(()=>r.forEach((c,l)=>{let u=t.subschema({keyword:n,schemaProp:l,compositeRule:!0},a);e.assign(o,(0,st._)`${o} || ${a}`),t.mergeValidEvaluated(u,a)||e.if((0,st.not)(o))})),t.result(o,()=>t.reset(),()=>t.error(!0))}Ge.validateUnion=jde});var BL=E(Os=>{"use strict";Object.defineProperty(Os,"__esModule",{value:!0});Os.validateKeywordUsage=Os.validSchemaType=Os.funcKeywordCode=Os.macroKeywordCode=void 0;var Or=ne(),ha=bn(),qde=Jt(),Lde=Gf();function Fde(t,e){let{gen:r,keyword:n,schema:s,parentSchema:i,it:o}=t,a=e.macro.call(o.self,s,i,o),c=UL(r,n,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);let l=r.name("valid");t.subschema({schema:a,schemaPath:Or.nil,errSchemaPath:`${o.errSchemaPath}/${n}`,topSchemaRef:c,compositeRule:!0},l),t.pass(l,()=>t.error(!0))}Os.macroKeywordCode=Fde;function Ude(t,e){var r;let{gen:n,keyword:s,schema:i,parentSchema:o,$data:a,it:c}=t;Vde(c,e);let l=!a&&e.compile?e.compile.call(c.self,i,o,c):e.validate,u=UL(n,s,l),d=n.let("valid");t.block$data(d,p),t.ok((r=e.valid)!==null&&r!==void 0?r:d);function p(){if(e.errors===!1)m(),e.modifying&&FL(t),y(()=>t.error());else{let g=e.async?f():h();e.modifying&&FL(t),y(()=>Bde(t,g))}}function f(){let g=n.let("ruleErrs",null);return n.try(()=>m((0,Or._)`await `),w=>n.assign(d,!1).if((0,Or._)`${w} instanceof ${c.ValidationError}`,()=>n.assign(g,(0,Or._)`${w}.errors`),()=>n.throw(w))),g}function h(){let g=(0,Or._)`${u}.errors`;return n.assign(g,null),m(Or.nil),g}function m(g=e.async?(0,Or._)`await `:Or.nil){let w=c.opts.passContext?ha.default.this:ha.default.self,_=!("compile"in e&&!a||e.schema===!1);n.assign(d,(0,Or._)`${g}${(0,qde.callValidateCode)(t,u,w,_)}`,e.modifying)}function y(g){var w;n.if((0,Or.not)((w=e.valid)!==null&&w!==void 0?w:d),g)}}Os.funcKeywordCode=Ude;function FL(t){let{gen:e,data:r,it:n}=t;e.if(n.parentData,()=>e.assign(r,(0,Or._)`${n.parentData}[${n.parentDataProperty}]`))}function Bde(t,e){let{gen:r}=t;r.if((0,Or._)`Array.isArray(${e})`,()=>{r.assign(ha.default.vErrors,(0,Or._)`${ha.default.vErrors} === null ? ${e} : ${ha.default.vErrors}.concat(${e})`).assign(ha.default.errors,(0,Or._)`${ha.default.vErrors}.length`),(0,Lde.extendErrors)(t)},()=>t.error())}function Vde({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function UL(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,Or.stringify)(r)})}function zde(t,e,r=!1){return!e.length||e.some(n=>n==="array"?Array.isArray(t):n==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==n||r&&typeof t>"u")}Os.validSchemaType=zde;function Hde({schema:t,opts:e,self:r,errSchemaPath:n},s,i){if(Array.isArray(s.keyword)?!s.keyword.includes(i):s.keyword!==i)throw new Error("ajv implementation error");let o=s.dependencies;if(o?.some(a=>!Object.prototype.hasOwnProperty.call(t,a)))throw new Error(`parent schema must have dependencies of ${i}: ${o.join(",")}`);if(s.validateSchema&&!s.validateSchema(t[i])){let c=`keyword "${i}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(c);else throw new Error(c)}}Os.validateKeywordUsage=Hde});var zL=E(eo=>{"use strict";Object.defineProperty(eo,"__esModule",{value:!0});eo.extendSubschemaMode=eo.extendSubschemaData=eo.getSubschema=void 0;var Ps=ne(),VL=me();function Gde(t,{keyword:e,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:i,topSchemaRef:o}){if(e!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){let a=t.schema[e];return r===void 0?{schema:a,schemaPath:(0,Ps._)`${t.schemaPath}${(0,Ps.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:a[r],schemaPath:(0,Ps._)`${t.schemaPath}${(0,Ps.getProperty)(e)}${(0,Ps.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,VL.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||i===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:o,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}eo.getSubschema=Gde;function Wde(t,e,{dataProp:r,dataPropType:n,data:s,dataTypes:i,propertyName:o}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:a}=e;if(r!==void 0){let{errorPath:l,dataPathArr:u,opts:d}=e,p=a.let("data",(0,Ps._)`${e.data}${(0,Ps.getProperty)(r)}`,!0);c(p),t.errorPath=(0,Ps.str)`${l}${(0,VL.getErrorPath)(r,n,d.jsPropertySyntax)}`,t.parentDataProperty=(0,Ps._)`${r}`,t.dataPathArr=[...u,t.parentDataProperty]}if(s!==void 0){let l=s instanceof Ps.Name?s:a.let("data",s,!0);c(l),o!==void 0&&(t.propertyName=o)}i&&(t.dataTypes=i);function c(l){t.data=l,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,l]}}eo.extendSubschemaData=Wde;function Kde(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:i}){n!==void 0&&(t.compositeRule=n),s!==void 0&&(t.createErrors=s),i!==void 0&&(t.allErrors=i),t.jtdDiscriminator=e,t.jtdMetadata=r}eo.extendSubschemaMode=Kde});var GL=E((Mke,HL)=>{"use strict";var to=HL.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};Eg(e,n,s,t,"",t)};to.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};to.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};to.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};to.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Eg(t,e,r,n,s,i,o,a,c,l){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,s,i,o,a,c,l);for(var u in n){var d=n[u];if(Array.isArray(d)){if(u in to.arrayKeywords)for(var p=0;p<d.length;p++)Eg(t,e,r,d[p],s+"/"+u+"/"+p,i,s,u,n,p)}else if(u in to.propsKeywords){if(d&&typeof d=="object")for(var f in d)Eg(t,e,r,d[f],s+"/"+u+"/"+Jde(f),i,s,u,n,f)}else(u in to.keywords||t.allKeys&&!(u in to.skipKeywords))&&Eg(t,e,r,d,s+"/"+u,i,s,u,n)}r(n,s,i,o,a,c,l)}}function Jde(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}});var Kf=E(Kr=>{"use strict";Object.defineProperty(Kr,"__esModule",{value:!0});Kr.getSchemaRefs=Kr.resolveUrl=Kr.normalizeId=Kr._getFullPath=Kr.getFullPath=Kr.inlineRef=void 0;var Yde=me(),Xde=Zs(),Qde=GL(),Zde=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function ehe(t,e=!0){return typeof t=="boolean"?!0:e===!0?!MT(t):e?WL(t)<=e:!1}Kr.inlineRef=ehe;var the=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function MT(t){for(let e in t){if(the.has(e))return!0;let r=t[e];if(Array.isArray(r)&&r.some(MT)||typeof r=="object"&&MT(r))return!0}return!1}function WL(t){let e=0;for(let r in t){if(r==="$ref")return 1/0;if(e++,!Zde.has(r)&&(typeof t[r]=="object"&&(0,Yde.eachItem)(t[r],n=>e+=WL(n)),e===1/0))return 1/0}return e}function KL(t,e="",r){r!==!1&&(e=rl(e));let n=t.parse(e);return JL(t,n)}Kr.getFullPath=KL;function JL(t,e){return t.serialize(e).split("#")[0]+"#"}Kr._getFullPath=JL;var rhe=/#\/?$/;function rl(t){return t?t.replace(rhe,""):""}Kr.normalizeId=rl;function nhe(t,e,r){return r=rl(r),t.resolve(e,r)}Kr.resolveUrl=nhe;var she=/^[a-z_][-a-z0-9._]*$/i;function ihe(t,e){if(typeof t=="boolean")return{};let{schemaId:r,uriResolver:n}=this.opts,s=rl(t[r]||e),i={"":s},o=KL(n,s,!1),a={},c=new Set;return Qde(t,{allKeys:!0},(d,p,f,h)=>{if(h===void 0)return;let m=o+p,y=i[h];typeof d[r]=="string"&&(y=g.call(this,d[r])),w.call(this,d.$anchor),w.call(this,d.$dynamicAnchor),i[p]=y;function g(_){let v=this.opts.uriResolver.resolve;if(_=rl(y?v(y,_):_),c.has(_))throw u(_);c.add(_);let S=this.refs[_];return typeof S=="string"&&(S=this.refs[S]),typeof S=="object"?l(d,S.schema,_):_!==rl(m)&&(_[0]==="#"?(l(d,a[_],_),a[_]=d):this.refs[_]=m),_}function w(_){if(typeof _=="string"){if(!she.test(_))throw new Error(`invalid anchor "${_}"`);g.call(this,`#${_}`)}}}),a;function l(d,p,f){if(p!==void 0&&!Xde(d,p))throw u(f)}function u(d){return new Error(`reference "${d}" resolves to more than one schema`)}}Kr.getSchemaRefs=ihe});var nl=E(ro=>{"use strict";Object.defineProperty(ro,"__esModule",{value:!0});ro.getData=ro.KeywordCxt=ro.validateFunctionCode=void 0;var eF=NL(),YL=Wf(),qT=xT(),Sg=Wf(),ohe=jL(),Yf=BL(),jT=zL(),Z=ne(),oe=bn(),ahe=Kf(),ci=me(),Jf=Gf();function che(t){if(nF(t)&&(sF(t),rF(t))){fhe(t);return}tF(t,()=>(0,eF.topBoolOrEmptySchema)(t))}ro.validateFunctionCode=che;function tF({gen:t,validateName:e,schema:r,schemaEnv:n,opts:s},i){s.code.es5?t.func(e,(0,Z._)`${oe.default.data}, ${oe.default.valCxt}`,n.$async,()=>{t.code((0,Z._)`"use strict"; ${XL(r,s)}`),uhe(t,s),t.code(i)}):t.func(e,(0,Z._)`${oe.default.data}, ${lhe(s)}`,n.$async,()=>t.code(XL(r,s)).code(i))}function lhe(t){return(0,Z._)`{${oe.default.instancePath}="", ${oe.default.parentData}, ${oe.default.parentDataProperty}, ${oe.default.rootData}=${oe.default.data}${t.dynamicRef?(0,Z._)`, ${oe.default.dynamicAnchors}={}`:Z.nil}}={}`}function uhe(t,e){t.if(oe.default.valCxt,()=>{t.var(oe.default.instancePath,(0,Z._)`${oe.default.valCxt}.${oe.default.instancePath}`),t.var(oe.default.parentData,(0,Z._)`${oe.default.valCxt}.${oe.default.parentData}`),t.var(oe.default.parentDataProperty,(0,Z._)`${oe.default.valCxt}.${oe.default.parentDataProperty}`),t.var(oe.default.rootData,(0,Z._)`${oe.default.valCxt}.${oe.default.rootData}`),e.dynamicRef&&t.var(oe.default.dynamicAnchors,(0,Z._)`${oe.default.valCxt}.${oe.default.dynamicAnchors}`)},()=>{t.var(oe.default.instancePath,(0,Z._)`""`),t.var(oe.default.parentData,(0,Z._)`undefined`),t.var(oe.default.parentDataProperty,(0,Z._)`undefined`),t.var(oe.default.rootData,oe.default.data),e.dynamicRef&&t.var(oe.default.dynamicAnchors,(0,Z._)`{}`)})}function fhe(t){let{schema:e,opts:r,gen:n}=t;tF(t,()=>{r.$comment&&e.$comment&&oF(t),ghe(t),n.let(oe.default.vErrors,null),n.let(oe.default.errors,0),r.unevaluated&&dhe(t),iF(t),vhe(t)})}function dhe(t){let{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,Z._)`${r}.evaluated`),e.if((0,Z._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,Z._)`${t.evaluated}.props`,(0,Z._)`undefined`)),e.if((0,Z._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,Z._)`${t.evaluated}.items`,(0,Z._)`undefined`))}function XL(t,e){let r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,Z._)`/*# sourceURL=${r} */`:Z.nil}function hhe(t,e){if(nF(t)&&(sF(t),rF(t))){phe(t,e);return}(0,eF.boolOrEmptySchema)(t,e)}function rF({schema:t,self:e}){if(typeof t=="boolean")return!t;for(let r in t)if(e.RULES.all[r])return!0;return!1}function nF(t){return typeof t.schema!="boolean"}function phe(t,e){let{schema:r,gen:n,opts:s}=t;s.$comment&&r.$comment&&oF(t),yhe(t),_he(t);let i=n.const("_errs",oe.default.errors);iF(t,i),n.var(e,(0,Z._)`${i} === ${oe.default.errors}`)}function sF(t){(0,ci.checkUnknownRules)(t),mhe(t)}function iF(t,e){if(t.opts.jtd)return QL(t,[],!1,e);let r=(0,YL.getSchemaTypes)(t.schema),n=(0,YL.coerceAndCheckDataType)(t,r);QL(t,r,!n,e)}function mhe(t){let{schema:e,errSchemaPath:r,opts:n,self:s}=t;e.$ref&&n.ignoreKeywordsWithRef&&(0,ci.schemaHasRulesButRef)(e,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function ghe(t){let{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,ci.checkStrictMode)(t,"default is ignored in the schema root")}function yhe(t){let e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,ahe.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function _he(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function oF({gen:t,schemaEnv:e,schema:r,errSchemaPath:n,opts:s}){let i=r.$comment;if(s.$comment===!0)t.code((0,Z._)`${oe.default.self}.logger.log(${i})`);else if(typeof s.$comment=="function"){let o=(0,Z.str)`${n}/$comment`,a=t.scopeValue("root",{ref:e.root});t.code((0,Z._)`${oe.default.self}.opts.$comment(${i}, ${o}, ${a}.schema)`)}}function vhe(t){let{gen:e,schemaEnv:r,validateName:n,ValidationError:s,opts:i}=t;r.$async?e.if((0,Z._)`${oe.default.errors} === 0`,()=>e.return(oe.default.data),()=>e.throw((0,Z._)`new ${s}(${oe.default.vErrors})`)):(e.assign((0,Z._)`${n}.errors`,oe.default.vErrors),i.unevaluated&&whe(t),e.return((0,Z._)`${oe.default.errors} === 0`))}function whe({gen:t,evaluated:e,props:r,items:n}){r instanceof Z.Name&&t.assign((0,Z._)`${e}.props`,r),n instanceof Z.Name&&t.assign((0,Z._)`${e}.items`,n)}function QL(t,e,r,n){let{gen:s,schema:i,data:o,allErrors:a,opts:c,self:l}=t,{RULES:u}=l;if(i.$ref&&(c.ignoreKeywordsWithRef||!(0,ci.schemaHasRulesButRef)(i,u))){s.block(()=>cF(t,"$ref",u.all.$ref.definition));return}c.jtd||bhe(t,e),s.block(()=>{for(let p of u.rules)d(p);d(u.post)});function d(p){(0,qT.shouldUseGroup)(i,p)&&(p.type?(s.if((0,Sg.checkDataType)(p.type,o,c.strictNumbers)),ZL(t,p),e.length===1&&e[0]===p.type&&r&&(s.else(),(0,Sg.reportTypeError)(t)),s.endIf()):ZL(t,p),a||s.if((0,Z._)`${oe.default.errors} === ${n||0}`))}}function ZL(t,e){let{gen:r,schema:n,opts:{useDefaults:s}}=t;s&&(0,ohe.assignDefaults)(t,e.type),r.block(()=>{for(let i of e.rules)(0,qT.shouldUseRule)(n,i)&&cF(t,i.keyword,i.definition,e.type)})}function bhe(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(Ehe(t,e),t.opts.allowUnionTypes||She(t,e),The(t,t.dataTypes))}function Ehe(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{aF(t.dataTypes,r)||LT(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),$he(t,e)}}function She(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&LT(t,"use allowUnionTypes to allow union type keyword")}function The(t,e){let r=t.self.RULES.all;for(let n in r){let s=r[n];if(typeof s=="object"&&(0,qT.shouldUseRule)(t.schema,s)){let{type:i}=s.definition;i.length&&!i.some(o=>Rhe(e,o))&&LT(t,`missing type "${i.join(",")}" for keyword "${n}"`)}}}function Rhe(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function aF(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function $he(t,e){let r=[];for(let n of t.dataTypes)aF(e,n)?r.push(n):e.includes("integer")&&n==="number"&&r.push("integer");t.dataTypes=r}function LT(t,e){let r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,ci.checkStrictMode)(t,e,t.opts.strictTypes)}var Tg=class{constructor(e,r,n){if((0,Yf.validateKeywordUsage)(e,r,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,ci.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",lF(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,Yf.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",oe.default.errors))}result(e,r,n){this.failResult((0,Z.not)(e),r,n)}failResult(e,r,n){this.gen.if(e),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,Z.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:r}=this;this.fail((0,Z._)`${r} !== undefined && (${(0,Z.or)(this.invalid$data(),e)})`)}error(e,r,n){if(r){this.setParams(r),this._error(e,n),this.setParams({});return}this._error(e,n)}_error(e,r){(e?Jf.reportExtraError:Jf.reportError)(this,this.def.error,r)}$dataError(){(0,Jf.reportError)(this,this.def.$dataError||Jf.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,Jf.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,n=Z.nil){this.gen.block(()=>{this.check$data(e,n),r()})}check$data(e=Z.nil,r=Z.nil){if(!this.$data)return;let{gen:n,schemaCode:s,schemaType:i,def:o}=this;n.if((0,Z.or)((0,Z._)`${s} === undefined`,r)),e!==Z.nil&&n.assign(e,!0),(i.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==Z.nil&&n.assign(e,!1)),n.else()}invalid$data(){let{gen:e,schemaCode:r,schemaType:n,def:s,it:i}=this;return(0,Z.or)(o(),a());function o(){if(n.length){if(!(r instanceof Z.Name))throw new Error("ajv implementation error");let c=Array.isArray(n)?n:[n];return(0,Z._)`${(0,Sg.checkDataTypes)(c,r,i.opts.strictNumbers,Sg.DataType.Wrong)}`}return Z.nil}function a(){if(s.validateSchema){let c=e.scopeValue("validate$data",{ref:s.validateSchema});return(0,Z._)`!${c}(${r})`}return Z.nil}}subschema(e,r){let n=(0,jT.getSubschema)(this.it,e);(0,jT.extendSubschemaData)(n,this.it,e),(0,jT.extendSubschemaMode)(n,e);let s={...this.it,...n,items:void 0,props:void 0};return hhe(s,r),s}mergeEvaluated(e,r){let{it:n,gen:s}=this;n.opts.unevaluated&&(n.props!==!0&&e.props!==void 0&&(n.props=ci.mergeEvaluated.props(s,e.props,n.props,r)),n.items!==!0&&e.items!==void 0&&(n.items=ci.mergeEvaluated.items(s,e.items,n.items,r)))}mergeValidEvaluated(e,r){let{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(e,Z.Name)),!0}};ro.KeywordCxt=Tg;function cF(t,e,r,n){let s=new Tg(t,r,e);"code"in r?r.code(s,n):s.$data&&r.validate?(0,Yf.funcKeywordCode)(s,r):"macro"in r?(0,Yf.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,Yf.funcKeywordCode)(s,r)}var Ohe=/^\/(?:[^~]|~0|~1)*$/,Phe=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function lF(t,{dataLevel:e,dataNames:r,dataPathArr:n}){let s,i;if(t==="")return oe.default.rootData;if(t[0]==="/"){if(!Ohe.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);s=t,i=oe.default.rootData}else{let l=Phe.exec(t);if(!l)throw new Error(`Invalid JSON-pointer: ${t}`);let u=+l[1];if(s=l[2],s==="#"){if(u>=e)throw new Error(c("property/index",u));return n[e-u]}if(u>e)throw new Error(c("data",u));if(i=r[e-u],!s)return i}let o=i,a=s.split("/");for(let l of a)l&&(i=(0,Z._)`${i}${(0,Z.getProperty)((0,ci.unescapeJsonPointer)(l))}`,o=(0,Z._)`${o} && ${i}`);return o;function c(l,u){return`Cannot access ${l} ${u} levels up, current level is ${e}`}}ro.getData=lF});var Xf=E(UT=>{"use strict";Object.defineProperty(UT,"__esModule",{value:!0});var FT=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};UT.default=FT});var li=E(zT=>{"use strict";Object.defineProperty(zT,"__esModule",{value:!0});var BT=Kf(),VT=class extends Error{constructor(e,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,BT.resolveUrl)(e,r,n),this.missingSchema=(0,BT.normalizeId)((0,BT.getFullPath)(e,this.missingRef))}};zT.default=VT});var ma=E(En=>{"use strict";Object.defineProperty(En,"__esModule",{value:!0});En.resolveSchema=En.getCompilingSchema=En.resolveRef=En.compileSchema=En.SchemaEnv=void 0;var ts=ne(),xhe=Xf(),pa=bn(),rs=Kf(),uF=me(),Nhe=nl(),sl=class{constructor(e){var r;this.refs={},this.dynamicAnchors={};let n;typeof e.schema=="object"&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,rs.normalizeId)(n?.[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=n?.$async,this.refs={}}};En.SchemaEnv=sl;function GT(t){let e=fF.call(this,t);if(e)return e;let r=(0,rs.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new ts.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i}),a;t.$async&&(a=o.scopeValue("Error",{ref:xhe.default,code:(0,ts._)`require("ajv/dist/runtime/validation_error").default`}));let c=o.scopeName("validate");t.validateName=c;let l={gen:o,allErrors:this.opts.allErrors,data:pa.default.data,parentData:pa.default.parentData,parentDataProperty:pa.default.parentDataProperty,dataNames:[pa.default.data],dataPathArr:[ts.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,ts.stringify)(t.schema)}:{ref:t.schema}),validateName:c,ValidationError:a,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:ts.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,ts._)`""`,opts:this.opts,self:this},u;try{this._compilations.add(t),(0,Nhe.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);let d=o.toString();u=`${o.scopeRefs(pa.default.scope)}return ${d}`,this.opts.code.process&&(u=this.opts.code.process(u,t));let f=new Function(`${pa.default.self}`,`${pa.default.scope}`,u)(this,this.scope.get());if(this.scope.value(c,{ref:f}),f.errors=null,f.schema=t.schema,f.schemaEnv=t,t.$async&&(f.$async=!0),this.opts.code.source===!0&&(f.source={validateName:c,validateCode:d,scopeValues:o._values}),this.opts.unevaluated){let{props:h,items:m}=l;f.evaluated={props:h instanceof ts.Name?void 0:h,items:m instanceof ts.Name?void 0:m,dynamicProps:h instanceof ts.Name,dynamicItems:m instanceof ts.Name},f.source&&(f.source.evaluated=(0,ts.stringify)(f.evaluated))}return t.validate=f,t}catch(d){throw delete t.validate,delete t.validateName,u&&this.logger.error("Error compiling schema, function code:",u),d}finally{this._compilations.delete(t)}}En.compileSchema=GT;function Che(t,e,r){var n;r=(0,rs.resolveUrl)(this.opts.uriResolver,e,r);let s=t.refs[r];if(s)return s;let i=khe.call(this,t,r);if(i===void 0){let o=(n=t.localRefs)===null||n===void 0?void 0:n[r],{schemaId:a}=this.opts;o&&(i=new sl({schema:o,schemaId:a,root:t,baseId:e}))}if(i!==void 0)return t.refs[r]=Ihe.call(this,i)}En.resolveRef=Che;function Ihe(t){return(0,rs.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:GT.call(this,t)}function fF(t){for(let e of this._compilations)if(Ahe(e,t))return e}En.getCompilingSchema=fF;function Ahe(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function khe(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||Rg.call(this,t,e)}function Rg(t,e){let r=this.opts.uriResolver.parse(e),n=(0,rs._getFullPath)(this.opts.uriResolver,r),s=(0,rs.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&n===s)return HT.call(this,r,t);let i=(0,rs.normalizeId)(n),o=this.refs[i]||this.schemas[i];if(typeof o=="string"){let a=Rg.call(this,t,o);return typeof a?.schema!="object"?void 0:HT.call(this,r,a)}if(typeof o?.schema=="object"){if(o.validate||GT.call(this,o),i===(0,rs.normalizeId)(e)){let{schema:a}=o,{schemaId:c}=this.opts,l=a[c];return l&&(s=(0,rs.resolveUrl)(this.opts.uriResolver,s,l)),new sl({schema:a,schemaId:c,root:t,baseId:s})}return HT.call(this,r,o)}}En.resolveSchema=Rg;var Dhe=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function HT(t,{baseId:e,schema:r,root:n}){var s;if(((s=t.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(let a of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let c=r[(0,uF.unescapeFragment)(a)];if(c===void 0)return;r=c;let l=typeof r=="object"&&r[this.opts.schemaId];!Dhe.has(a)&&l&&(e=(0,rs.resolveUrl)(this.opts.uriResolver,e,l))}let i;if(typeof r!="boolean"&&r.$ref&&!(0,uF.schemaHasRulesButRef)(r,this.RULES)){let a=(0,rs.resolveUrl)(this.opts.uriResolver,e,r.$ref);i=Rg.call(this,n,a)}let{schemaId:o}=this.opts;if(i=i||new sl({schema:r,schemaId:o,root:n,baseId:e}),i.schema!==i.root.schema)return i}});var dF=E((Bke,Mhe)=>{Mhe.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var pF=E(WT=>{"use strict";Object.defineProperty(WT,"__esModule",{value:!0});var hF=Rc();hF.code='require("ajv/dist/runtime/uri").default';WT.default=hF});var YT=E(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0});Yt.CodeGen=Yt.Name=Yt.nil=Yt.stringify=Yt.str=Yt._=Yt.KeywordCxt=void 0;var jhe=nl();Object.defineProperty(Yt,"KeywordCxt",{enumerable:!0,get:function(){return jhe.KeywordCxt}});var il=ne();Object.defineProperty(Yt,"_",{enumerable:!0,get:function(){return il._}});Object.defineProperty(Yt,"str",{enumerable:!0,get:function(){return il.str}});Object.defineProperty(Yt,"stringify",{enumerable:!0,get:function(){return il.stringify}});Object.defineProperty(Yt,"nil",{enumerable:!0,get:function(){return il.nil}});Object.defineProperty(Yt,"Name",{enumerable:!0,get:function(){return il.Name}});Object.defineProperty(Yt,"CodeGen",{enumerable:!0,get:function(){return il.CodeGen}});var qhe=Xf(),vF=li(),Lhe=PT(),Qf=ma(),Fhe=ne(),Zf=Kf(),$g=Wf(),JT=me(),mF=dF(),Uhe=pF(),wF=(t,e)=>new RegExp(t,e);wF.code="new RegExp";var Bhe=["removeAdditional","useDefaults","coerceTypes"],Vhe=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),zhe={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},Hhe={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},gF=200;function Ghe(t){var e,r,n,s,i,o,a,c,l,u,d,p,f,h,m,y,g,w,_,v,S,$,T,O,R;let P=t.strict,A=(e=t.code)===null||e===void 0?void 0:e.optimize,N=A===!0||A===void 0?1:A||0,C=(n=(r=t.code)===null||r===void 0?void 0:r.regExp)!==null&&n!==void 0?n:wF,V=(s=t.uriResolver)!==null&&s!==void 0?s:Uhe.default;return{strictSchema:(o=(i=t.strictSchema)!==null&&i!==void 0?i:P)!==null&&o!==void 0?o:!0,strictNumbers:(c=(a=t.strictNumbers)!==null&&a!==void 0?a:P)!==null&&c!==void 0?c:!0,strictTypes:(u=(l=t.strictTypes)!==null&&l!==void 0?l:P)!==null&&u!==void 0?u:"log",strictTuples:(p=(d=t.strictTuples)!==null&&d!==void 0?d:P)!==null&&p!==void 0?p:"log",strictRequired:(h=(f=t.strictRequired)!==null&&f!==void 0?f:P)!==null&&h!==void 0?h:!1,code:t.code?{...t.code,optimize:N,regExp:C}:{optimize:N,regExp:C},loopRequired:(m=t.loopRequired)!==null&&m!==void 0?m:gF,loopEnum:(y=t.loopEnum)!==null&&y!==void 0?y:gF,meta:(g=t.meta)!==null&&g!==void 0?g:!0,messages:(w=t.messages)!==null&&w!==void 0?w:!0,inlineRefs:(_=t.inlineRefs)!==null&&_!==void 0?_:!0,schemaId:(v=t.schemaId)!==null&&v!==void 0?v:"$id",addUsedSchema:(S=t.addUsedSchema)!==null&&S!==void 0?S:!0,validateSchema:($=t.validateSchema)!==null&&$!==void 0?$:!0,validateFormats:(T=t.validateFormats)!==null&&T!==void 0?T:!0,unicodeRegExp:(O=t.unicodeRegExp)!==null&&O!==void 0?O:!0,int32range:(R=t.int32range)!==null&&R!==void 0?R:!0,uriResolver:V}}var ed=class{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...Ghe(e)};let{es5:r,lines:n}=this.opts.code;this.scope=new Fhe.ValueScope({scope:{},prefixes:Vhe,es5:r,lines:n}),this.logger=Qhe(e.logger);let s=e.validateFormats;e.validateFormats=!1,this.RULES=(0,Lhe.getRules)(),yF.call(this,zhe,e,"NOT SUPPORTED"),yF.call(this,Hhe,e,"DEPRECATED","warn"),this._metaOpts=Yhe.call(this),e.formats&&Khe.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&Jhe.call(this,e.keywords),typeof e.meta=="object"&&this.addMetaSchema(e.meta),Whe.call(this),e.validateFormats=s}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:r,schemaId:n}=this.opts,s=mF;n==="id"&&(s={...mF},s.id=s.$id,delete s.$id),r&&e&&this.addMetaSchema(s,s[n],!1)}defaultMeta(){let{meta:e,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof e=="object"?e[r]||e:void 0}validate(e,r){let n;if(typeof e=="string"){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);let s=n(r);return"$async"in n||(this.errors=n.errors),s}compile(e,r){let n=this._addSchema(e,r);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:n}=this.opts;return s.call(this,e,r);async function s(u,d){await i.call(this,u.$schema);let p=this._addSchema(u,d);return p.validate||o.call(this,p)}async function i(u){u&&!this.getSchema(u)&&await s.call(this,{$ref:u},!0)}async function o(u){try{return this._compileSchemaEnv(u)}catch(d){if(!(d instanceof vF.default))throw d;return a.call(this,d),await c.call(this,d.missingSchema),o.call(this,u)}}function a({missingSchema:u,missingRef:d}){if(this.refs[u])throw new Error(`AnySchema ${u} is loaded but ${d} cannot be resolved`)}async function c(u){let d=await l.call(this,u);this.refs[u]||await i.call(this,d.$schema),this.refs[u]||this.addSchema(d,u,r)}async function l(u){let d=this._loading[u];if(d)return d;try{return await(this._loading[u]=n(u))}finally{delete this._loading[u]}}}addSchema(e,r,n,s=this.opts.validateSchema){if(Array.isArray(e)){for(let o of e)this.addSchema(o,void 0,n,s);return this}let i;if(typeof e=="object"){let{schemaId:o}=this.opts;if(i=e[o],i!==void 0&&typeof i!="string")throw new Error(`schema ${o} must be string`)}return r=(0,Zf.normalizeId)(r||i),this._checkUnique(r),this.schemas[r]=this._addSchema(e,n,r,s,!0),this}addMetaSchema(e,r,n=this.opts.validateSchema){return this.addSchema(e,r,!0,n),this}validateSchema(e,r){if(typeof e=="boolean")return!0;let n;if(n=e.$schema,n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let s=this.validate(n,e);if(!s&&r){let i="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(i);else throw new Error(i)}return s}getSchema(e){let r;for(;typeof(r=_F.call(this,e))=="string";)e=r;if(r===void 0){let{schemaId:n}=this.opts,s=new Qf.SchemaEnv({schema:{},schemaId:n});if(r=Qf.resolveSchema.call(this,s,e),!r)return;this.refs[e]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=_F.call(this,e);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{let r=e;this._cache.delete(r);let n=e[this.opts.schemaId];return n&&(n=(0,Zf.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let r of e)this.addKeyword(r);return this}addKeyword(e,r){let n;if(typeof e=="string")n=e,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=n);else if(typeof e=="object"&&r===void 0){if(r=e,n=r.keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(epe.call(this,n,r),!r)return(0,JT.eachItem)(n,i=>KT.call(this,i)),this;rpe.call(this,r);let s={...r,type:(0,$g.getJSONTypes)(r.type),schemaType:(0,$g.getJSONTypes)(r.schemaType)};return(0,JT.eachItem)(n,s.type.length===0?i=>KT.call(this,i,s):i=>s.type.forEach(o=>KT.call(this,i,s,o))),this}getKeyword(e){let r=this.RULES.all[e];return typeof r=="object"?r.definition:!!r}removeKeyword(e){let{RULES:r}=this;delete r.keywords[e],delete r.all[e];for(let n of r.rules){let s=n.rules.findIndex(i=>i.keyword===e);s>=0&&n.rules.splice(s,1)}return this}addFormat(e,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[e]=r,this}errorsText(e=this.errors,{separator:r=", ",dataVar:n="data"}={}){return!e||e.length===0?"No errors":e.map(s=>`${n}${s.instancePath} ${s.message}`).reduce((s,i)=>s+r+i)}$dataMetaSchema(e,r){let n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(let s of r){let i=s.split("/").slice(1),o=e;for(let a of i)o=o[a];for(let a in n){let c=n[a];if(typeof c!="object")continue;let{$data:l}=c.definition,u=o[a];l&&u&&(o[a]=bF(u))}}return e}_removeAllSchemas(e,r){for(let n in e){let s=e[n];(!r||r.test(n))&&(typeof s=="string"?delete e[n]:s&&!s.meta&&(this._cache.delete(s.schema),delete e[n]))}}_addSchema(e,r,n,s=this.opts.validateSchema,i=this.opts.addUsedSchema){let o,{schemaId:a}=this.opts;if(typeof e=="object")o=e[a];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof e!="boolean")throw new Error("schema must be object or boolean")}let c=this._cache.get(e);if(c!==void 0)return c;n=(0,Zf.normalizeId)(o||n);let l=Zf.getSchemaRefs.call(this,e,n);return c=new Qf.SchemaEnv({schema:e,schemaId:a,meta:r,baseId:n,localRefs:l}),this._cache.set(c.schema,c),i&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=c),s&&this.validateSchema(e,!0),c}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):Qf.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let r=this.opts;this.opts=this._metaOpts;try{Qf.compileSchema.call(this,e)}finally{this.opts=r}}};ed.ValidationError=qhe.default;ed.MissingRefError=vF.default;Yt.default=ed;function yF(t,e,r,n="error"){for(let s in t){let i=s;i in e&&this.logger[n](`${r}: option ${s}. ${t[i]}`)}}function _F(t){return t=(0,Zf.normalizeId)(t),this.schemas[t]||this.refs[t]}function Whe(){let t=this.opts.schemas;if(t)if(Array.isArray(t))this.addSchema(t);else for(let e in t)this.addSchema(t[e],e)}function Khe(){for(let t in this.opts.formats){let e=this.opts.formats[t];e&&this.addFormat(t,e)}}function Jhe(t){if(Array.isArray(t)){this.addVocabulary(t);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let e in t){let r=t[e];r.keyword||(r.keyword=e),this.addKeyword(r)}}function Yhe(){let t={...this.opts};for(let e of Bhe)delete t[e];return t}var Xhe={log(){},warn(){},error(){}};function Qhe(t){if(t===!1)return Xhe;if(t===void 0)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}var Zhe=/^[a-z_$][a-z0-9_$:-]*$/i;function epe(t,e){let{RULES:r}=this;if((0,JT.eachItem)(t,n=>{if(r.keywords[n])throw new Error(`Keyword ${n} is already defined`);if(!Zhe.test(n))throw new Error(`Keyword ${n} has invalid name`)}),!!e&&e.$data&&!("code"in e||"validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function KT(t,e,r){var n;let s=e?.post;if(r&&s)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:i}=this,o=s?i.post:i.rules.find(({type:c})=>c===r);if(o||(o={type:r,rules:[]},i.rules.push(o)),i.keywords[t]=!0,!e)return;let a={keyword:t,definition:{...e,type:(0,$g.getJSONTypes)(e.type),schemaType:(0,$g.getJSONTypes)(e.schemaType)}};e.before?tpe.call(this,o,a,e.before):o.rules.push(a),i.all[t]=a,(n=e.implements)===null||n===void 0||n.forEach(c=>this.addKeyword(c))}function tpe(t,e,r){let n=t.rules.findIndex(s=>s.keyword===r);n>=0?t.rules.splice(n,0,e):(t.rules.push(e),this.logger.warn(`rule ${r} is not defined`))}function rpe(t){let{metaSchema:e}=t;e!==void 0&&(t.$data&&this.opts.$data&&(e=bF(e)),t.validateSchema=this.compile(e,!0))}var npe={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function bF(t){return{anyOf:[t,npe]}}});var EF=E(XT=>{"use strict";Object.defineProperty(XT,"__esModule",{value:!0});var spe={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};XT.default=spe});var QT=E(ga=>{"use strict";Object.defineProperty(ga,"__esModule",{value:!0});ga.callRef=ga.getValidate=void 0;var ipe=li(),SF=Jt(),Jr=ne(),ol=bn(),TF=ma(),Og=me(),ope={keyword:"$ref",schemaType:"string",code(t){let{gen:e,schema:r,it:n}=t,{baseId:s,schemaEnv:i,validateName:o,opts:a,self:c}=n,{root:l}=i;if((r==="#"||r==="#/")&&s===l.baseId)return d();let u=TF.resolveRef.call(c,l,s,r);if(u===void 0)throw new ipe.default(n.opts.uriResolver,s,r);if(u instanceof TF.SchemaEnv)return p(u);return f(u);function d(){if(i===l)return Pg(t,o,i,i.$async);let h=e.scopeValue("root",{ref:l});return Pg(t,(0,Jr._)`${h}.validate`,l,l.$async)}function p(h){let m=RF(t,h);Pg(t,m,h,h.$async)}function f(h){let m=e.scopeValue("schema",a.code.source===!0?{ref:h,code:(0,Jr.stringify)(h)}:{ref:h}),y=e.name("valid"),g=t.subschema({schema:h,dataTypes:[],schemaPath:Jr.nil,topSchemaRef:m,errSchemaPath:r},y);t.mergeEvaluated(g),t.ok(y)}}};function RF(t,e){let{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,Jr._)`${r.scopeValue("wrapper",{ref:e})}.validate`}ga.getValidate=RF;function Pg(t,e,r,n){let{gen:s,it:i}=t,{allErrors:o,schemaEnv:a,opts:c}=i,l=c.passContext?ol.default.this:Jr.nil;n?u():d();function u(){if(!a.$async)throw new Error("async schema referenced by sync schema");let h=s.let("valid");s.try(()=>{s.code((0,Jr._)`await ${(0,SF.callValidateCode)(t,e,l)}`),f(e),o||s.assign(h,!0)},m=>{s.if((0,Jr._)`!(${m} instanceof ${i.ValidationError})`,()=>s.throw(m)),p(m),o||s.assign(h,!1)}),t.ok(h)}function d(){t.result((0,SF.callValidateCode)(t,e,l),()=>f(e),()=>p(e))}function p(h){let m=(0,Jr._)`${h}.errors`;s.assign(ol.default.vErrors,(0,Jr._)`${ol.default.vErrors} === null ? ${m} : ${ol.default.vErrors}.concat(${m})`),s.assign(ol.default.errors,(0,Jr._)`${ol.default.vErrors}.length`)}function f(h){var m;if(!i.opts.unevaluated)return;let y=(m=r?.validate)===null||m===void 0?void 0:m.evaluated;if(i.props!==!0)if(y&&!y.dynamicProps)y.props!==void 0&&(i.props=Og.mergeEvaluated.props(s,y.props,i.props));else{let g=s.var("props",(0,Jr._)`${h}.evaluated.props`);i.props=Og.mergeEvaluated.props(s,g,i.props,Jr.Name)}if(i.items!==!0)if(y&&!y.dynamicItems)y.items!==void 0&&(i.items=Og.mergeEvaluated.items(s,y.items,i.items));else{let g=s.var("items",(0,Jr._)`${h}.evaluated.items`);i.items=Og.mergeEvaluated.items(s,g,i.items,Jr.Name)}}}ga.callRef=Pg;ga.default=ope});var $F=E(ZT=>{"use strict";Object.defineProperty(ZT,"__esModule",{value:!0});var ape=EF(),cpe=QT(),lpe=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",ape.default,cpe.default];ZT.default=lpe});var OF=E(eR=>{"use strict";Object.defineProperty(eR,"__esModule",{value:!0});var xg=ne(),no=xg.operators,Ng={maximum:{okStr:"<=",ok:no.LTE,fail:no.GT},minimum:{okStr:">=",ok:no.GTE,fail:no.LT},exclusiveMaximum:{okStr:"<",ok:no.LT,fail:no.GTE},exclusiveMinimum:{okStr:">",ok:no.GT,fail:no.LTE}},upe={message:({keyword:t,schemaCode:e})=>(0,xg.str)`must be ${Ng[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,xg._)`{comparison: ${Ng[t].okStr}, limit: ${e}}`},fpe={keyword:Object.keys(Ng),type:"number",schemaType:"number",$data:!0,error:upe,code(t){let{keyword:e,data:r,schemaCode:n}=t;t.fail$data((0,xg._)`${r} ${Ng[e].fail} ${n} || isNaN(${r})`)}};eR.default=fpe});var PF=E(tR=>{"use strict";Object.defineProperty(tR,"__esModule",{value:!0});var td=ne(),dpe={message:({schemaCode:t})=>(0,td.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,td._)`{multipleOf: ${t}}`},hpe={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:dpe,code(t){let{gen:e,data:r,schemaCode:n,it:s}=t,i=s.opts.multipleOfPrecision,o=e.let("res"),a=i?(0,td._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${i}`:(0,td._)`${o} !== parseInt(${o})`;t.fail$data((0,td._)`(${n} === 0 || (${o} = ${r}/${n}, ${a}))`)}};tR.default=hpe});var NF=E(rR=>{"use strict";Object.defineProperty(rR,"__esModule",{value:!0});function xF(t){let e=t.length,r=0,n=0,s;for(;n<e;)r++,s=t.charCodeAt(n++),s>=55296&&s<=56319&&n<e&&(s=t.charCodeAt(n),(s&64512)===56320&&n++);return r}rR.default=xF;xF.code='require("ajv/dist/runtime/ucs2length").default'});var CF=E(nR=>{"use strict";Object.defineProperty(nR,"__esModule",{value:!0});var ya=ne(),ppe=me(),mpe=NF(),gpe={message({keyword:t,schemaCode:e}){let r=t==="maxLength"?"more":"fewer";return(0,ya.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,ya._)`{limit: ${t}}`},ype={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:gpe,code(t){let{keyword:e,data:r,schemaCode:n,it:s}=t,i=e==="maxLength"?ya.operators.GT:ya.operators.LT,o=s.opts.unicode===!1?(0,ya._)`${r}.length`:(0,ya._)`${(0,ppe.useFunc)(t.gen,mpe.default)}(${r})`;t.fail$data((0,ya._)`${o} ${i} ${n}`)}};nR.default=ype});var IF=E(sR=>{"use strict";Object.defineProperty(sR,"__esModule",{value:!0});var _pe=Jt(),Cg=ne(),vpe={message:({schemaCode:t})=>(0,Cg.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,Cg._)`{pattern: ${t}}`},wpe={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:vpe,code(t){let{data:e,$data:r,schema:n,schemaCode:s,it:i}=t,o=i.opts.unicodeRegExp?"u":"",a=r?(0,Cg._)`(new RegExp(${s}, ${o}))`:(0,_pe.usePattern)(t,n);t.fail$data((0,Cg._)`!${a}.test(${e})`)}};sR.default=wpe});var AF=E(iR=>{"use strict";Object.defineProperty(iR,"__esModule",{value:!0});var rd=ne(),bpe={message({keyword:t,schemaCode:e}){let r=t==="maxProperties"?"more":"fewer";return(0,rd.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,rd._)`{limit: ${t}}`},Epe={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:bpe,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxProperties"?rd.operators.GT:rd.operators.LT;t.fail$data((0,rd._)`Object.keys(${r}).length ${s} ${n}`)}};iR.default=Epe});var kF=E(oR=>{"use strict";Object.defineProperty(oR,"__esModule",{value:!0});var nd=Jt(),sd=ne(),Spe=me(),Tpe={message:({params:{missingProperty:t}})=>(0,sd.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,sd._)`{missingProperty: ${t}}`},Rpe={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Tpe,code(t){let{gen:e,schema:r,schemaCode:n,data:s,$data:i,it:o}=t,{opts:a}=o;if(!i&&r.length===0)return;let c=r.length>=a.loopRequired;if(o.allErrors?l():u(),a.strictRequired){let f=t.parentSchema.properties,{definedProperties:h}=t.it;for(let m of r)if(f?.[m]===void 0&&!h.has(m)){let y=o.schemaEnv.baseId+o.errSchemaPath,g=`required property "${m}" is not defined at "${y}" (strictRequired)`;(0,Spe.checkStrictMode)(o,g,o.opts.strictRequired)}}function l(){if(c||i)t.block$data(sd.nil,d);else for(let f of r)(0,nd.checkReportMissingProp)(t,f)}function u(){let f=e.let("missing");if(c||i){let h=e.let("valid",!0);t.block$data(h,()=>p(f,h)),t.ok(h)}else e.if((0,nd.checkMissingProp)(t,r,f)),(0,nd.reportMissingProp)(t,f),e.else()}function d(){e.forOf("prop",n,f=>{t.setParams({missingProperty:f}),e.if((0,nd.noPropertyInData)(e,s,f,a.ownProperties),()=>t.error())})}function p(f,h){t.setParams({missingProperty:f}),e.forOf(f,n,()=>{e.assign(h,(0,nd.propertyInData)(e,s,f,a.ownProperties)),e.if((0,sd.not)(h),()=>{t.error(),e.break()})},sd.nil)}}};oR.default=Rpe});var DF=E(aR=>{"use strict";Object.defineProperty(aR,"__esModule",{value:!0});var id=ne(),$pe={message({keyword:t,schemaCode:e}){let r=t==="maxItems"?"more":"fewer";return(0,id.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,id._)`{limit: ${t}}`},Ope={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:$pe,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxItems"?id.operators.GT:id.operators.LT;t.fail$data((0,id._)`${r}.length ${s} ${n}`)}};aR.default=Ope});var Ig=E(cR=>{"use strict";Object.defineProperty(cR,"__esModule",{value:!0});var MF=Zs();MF.code='require("ajv/dist/runtime/equal").default';cR.default=MF});var jF=E(uR=>{"use strict";Object.defineProperty(uR,"__esModule",{value:!0});var lR=Wf(),Xt=ne(),Ppe=me(),xpe=Ig(),Npe={message:({params:{i:t,j:e}})=>(0,Xt.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,Xt._)`{i: ${t}, j: ${e}}`},Cpe={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:Npe,code(t){let{gen:e,data:r,$data:n,schema:s,parentSchema:i,schemaCode:o,it:a}=t;if(!n&&!s)return;let c=e.let("valid"),l=i.items?(0,lR.getSchemaTypes)(i.items):[];t.block$data(c,u,(0,Xt._)`${o} === false`),t.ok(c);function u(){let h=e.let("i",(0,Xt._)`${r}.length`),m=e.let("j");t.setParams({i:h,j:m}),e.assign(c,!0),e.if((0,Xt._)`${h} > 1`,()=>(d()?p:f)(h,m))}function d(){return l.length>0&&!l.some(h=>h==="object"||h==="array")}function p(h,m){let y=e.name("item"),g=(0,lR.checkDataTypes)(l,y,a.opts.strictNumbers,lR.DataType.Wrong),w=e.const("indices",(0,Xt._)`{}`);e.for((0,Xt._)`;${h}--;`,()=>{e.let(y,(0,Xt._)`${r}[${h}]`),e.if(g,(0,Xt._)`continue`),l.length>1&&e.if((0,Xt._)`typeof ${y} == "string"`,(0,Xt._)`${y} += "_"`),e.if((0,Xt._)`typeof ${w}[${y}] == "number"`,()=>{e.assign(m,(0,Xt._)`${w}[${y}]`),t.error(),e.assign(c,!1).break()}).code((0,Xt._)`${w}[${y}] = ${h}`)})}function f(h,m){let y=(0,Ppe.useFunc)(e,xpe.default),g=e.name("outer");e.label(g).for((0,Xt._)`;${h}--;`,()=>e.for((0,Xt._)`${m} = ${h}; ${m}--;`,()=>e.if((0,Xt._)`${y}(${r}[${h}], ${r}[${m}])`,()=>{t.error(),e.assign(c,!1).break(g)})))}}};uR.default=Cpe});var qF=E(dR=>{"use strict";Object.defineProperty(dR,"__esModule",{value:!0});var fR=ne(),Ipe=me(),Ape=Ig(),kpe={message:"must be equal to constant",params:({schemaCode:t})=>(0,fR._)`{allowedValue: ${t}}`},Dpe={keyword:"const",$data:!0,error:kpe,code(t){let{gen:e,data:r,$data:n,schemaCode:s,schema:i}=t;n||i&&typeof i=="object"?t.fail$data((0,fR._)`!${(0,Ipe.useFunc)(e,Ape.default)}(${r}, ${s})`):t.fail((0,fR._)`${i} !== ${r}`)}};dR.default=Dpe});var LF=E(hR=>{"use strict";Object.defineProperty(hR,"__esModule",{value:!0});var od=ne(),Mpe=me(),jpe=Ig(),qpe={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,od._)`{allowedValues: ${t}}`},Lpe={keyword:"enum",schemaType:"array",$data:!0,error:qpe,code(t){let{gen:e,data:r,$data:n,schema:s,schemaCode:i,it:o}=t;if(!n&&s.length===0)throw new Error("enum must have non-empty array");let a=s.length>=o.opts.loopEnum,c,l=()=>c??(c=(0,Mpe.useFunc)(e,jpe.default)),u;if(a||n)u=e.let("valid"),t.block$data(u,d);else{if(!Array.isArray(s))throw new Error("ajv implementation error");let f=e.const("vSchema",i);u=(0,od.or)(...s.map((h,m)=>p(f,m)))}t.pass(u);function d(){e.assign(u,!1),e.forOf("v",i,f=>e.if((0,od._)`${l()}(${r}, ${f})`,()=>e.assign(u,!0).break()))}function p(f,h){let m=s[h];return typeof m=="object"&&m!==null?(0,od._)`${l()}(${r}, ${f}[${h}])`:(0,od._)`${r} === ${m}`}}};hR.default=Lpe});var FF=E(pR=>{"use strict";Object.defineProperty(pR,"__esModule",{value:!0});var Fpe=OF(),Upe=PF(),Bpe=CF(),Vpe=IF(),zpe=AF(),Hpe=kF(),Gpe=DF(),Wpe=jF(),Kpe=qF(),Jpe=LF(),Ype=[Fpe.default,Upe.default,Bpe.default,Vpe.default,zpe.default,Hpe.default,Gpe.default,Wpe.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},Kpe.default,Jpe.default];pR.default=Ype});var gR=E(ad=>{"use strict";Object.defineProperty(ad,"__esModule",{value:!0});ad.validateAdditionalItems=void 0;var _a=ne(),mR=me(),Xpe={message:({params:{len:t}})=>(0,_a.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,_a._)`{limit: ${t}}`},Qpe={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:Xpe,code(t){let{parentSchema:e,it:r}=t,{items:n}=e;if(!Array.isArray(n)){(0,mR.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}UF(t,n)}};function UF(t,e){let{gen:r,schema:n,data:s,keyword:i,it:o}=t;o.items=!0;let a=r.const("len",(0,_a._)`${s}.length`);if(n===!1)t.setParams({len:e.length}),t.pass((0,_a._)`${a} <= ${e.length}`);else if(typeof n=="object"&&!(0,mR.alwaysValidSchema)(o,n)){let l=r.var("valid",(0,_a._)`${a} <= ${e.length}`);r.if((0,_a.not)(l),()=>c(l)),t.ok(l)}function c(l){r.forRange("i",e.length,a,u=>{t.subschema({keyword:i,dataProp:u,dataPropType:mR.Type.Num},l),o.allErrors||r.if((0,_a.not)(l),()=>r.break())})}}ad.validateAdditionalItems=UF;ad.default=Qpe});var yR=E(cd=>{"use strict";Object.defineProperty(cd,"__esModule",{value:!0});cd.validateTuple=void 0;var BF=ne(),Ag=me(),Zpe=Jt(),eme={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){let{schema:e,it:r}=t;if(Array.isArray(e))return VF(t,"additionalItems",e);r.items=!0,!(0,Ag.alwaysValidSchema)(r,e)&&t.ok((0,Zpe.validateArray)(t))}};function VF(t,e,r=t.schema){let{gen:n,parentSchema:s,data:i,keyword:o,it:a}=t;u(s),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=Ag.mergeEvaluated.items(n,r.length,a.items));let c=n.name("valid"),l=n.const("len",(0,BF._)`${i}.length`);r.forEach((d,p)=>{(0,Ag.alwaysValidSchema)(a,d)||(n.if((0,BF._)`${l} > ${p}`,()=>t.subschema({keyword:o,schemaProp:p,dataProp:p},c)),t.ok(c))});function u(d){let{opts:p,errSchemaPath:f}=a,h=r.length,m=h===d.minItems&&(h===d.maxItems||d[e]===!1);if(p.strictTuples&&!m){let y=`"${o}" is ${h}-tuple, but minItems or maxItems/${e} are not specified or different at path "${f}"`;(0,Ag.checkStrictMode)(a,y,p.strictTuples)}}}cd.validateTuple=VF;cd.default=eme});var zF=E(_R=>{"use strict";Object.defineProperty(_R,"__esModule",{value:!0});var tme=yR(),rme={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,tme.validateTuple)(t,"items")};_R.default=rme});var GF=E(vR=>{"use strict";Object.defineProperty(vR,"__esModule",{value:!0});var HF=ne(),nme=me(),sme=Jt(),ime=gR(),ome={message:({params:{len:t}})=>(0,HF.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,HF._)`{limit: ${t}}`},ame={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:ome,code(t){let{schema:e,parentSchema:r,it:n}=t,{prefixItems:s}=r;n.items=!0,!(0,nme.alwaysValidSchema)(n,e)&&(s?(0,ime.validateAdditionalItems)(t,s):t.ok((0,sme.validateArray)(t)))}};vR.default=ame});var WF=E(wR=>{"use strict";Object.defineProperty(wR,"__esModule",{value:!0});var Sn=ne(),kg=me(),cme={message:({params:{min:t,max:e}})=>e===void 0?(0,Sn.str)`must contain at least ${t} valid item(s)`:(0,Sn.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,Sn._)`{minContains: ${t}}`:(0,Sn._)`{minContains: ${t}, maxContains: ${e}}`},lme={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:cme,code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:i}=t,o,a,{minContains:c,maxContains:l}=n;i.opts.next?(o=c===void 0?1:c,a=l):o=1;let u=e.const("len",(0,Sn._)`${s}.length`);if(t.setParams({min:o,max:a}),a===void 0&&o===0){(0,kg.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,kg.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,kg.alwaysValidSchema)(i,r)){let m=(0,Sn._)`${u} >= ${o}`;a!==void 0&&(m=(0,Sn._)`${m} && ${u} <= ${a}`),t.pass(m);return}i.items=!0;let d=e.name("valid");a===void 0&&o===1?f(d,()=>e.if(d,()=>e.break())):o===0?(e.let(d,!0),a!==void 0&&e.if((0,Sn._)`${s}.length > 0`,p)):(e.let(d,!1),p()),t.result(d,()=>t.reset());function p(){let m=e.name("_valid"),y=e.let("count",0);f(m,()=>e.if(m,()=>h(y)))}function f(m,y){e.forRange("i",0,u,g=>{t.subschema({keyword:"contains",dataProp:g,dataPropType:kg.Type.Num,compositeRule:!0},m),y()})}function h(m){e.code((0,Sn._)`${m}++`),a===void 0?e.if((0,Sn._)`${m} >= ${o}`,()=>e.assign(d,!0).break()):(e.if((0,Sn._)`${m} > ${a}`,()=>e.assign(d,!1).break()),o===1?e.assign(d,!0):e.if((0,Sn._)`${m} >= ${o}`,()=>e.assign(d,!0)))}}};wR.default=lme});var YF=E(xs=>{"use strict";Object.defineProperty(xs,"__esModule",{value:!0});xs.validateSchemaDeps=xs.validatePropertyDeps=xs.error=void 0;var bR=ne(),ume=me(),ld=Jt();xs.error={message:({params:{property:t,depsCount:e,deps:r}})=>{let n=e===1?"property":"properties";return(0,bR.str)`must have ${n} ${r} when property ${t} is present`},params:({params:{property:t,depsCount:e,deps:r,missingProperty:n}})=>(0,bR._)`{property: ${t},
    missingProperty: ${n},
    depsCount: ${e},
    deps: ${r}}`};var fme={keyword:"dependencies",type:"object",schemaType:"object",error:xs.error,code(t){let[e,r]=dme(t);KF(t,e),JF(t,r)}};function dme({schema:t}){let e={},r={};for(let n in t){if(n==="__proto__")continue;let s=Array.isArray(t[n])?e:r;s[n]=t[n]}return[e,r]}function KF(t,e=t.schema){let{gen:r,data:n,it:s}=t;if(Object.keys(e).length===0)return;let i=r.let("missing");for(let o in e){let a=e[o];if(a.length===0)continue;let c=(0,ld.propertyInData)(r,n,o,s.opts.ownProperties);t.setParams({property:o,depsCount:a.length,deps:a.join(", ")}),s.allErrors?r.if(c,()=>{for(let l of a)(0,ld.checkReportMissingProp)(t,l)}):(r.if((0,bR._)`${c} && (${(0,ld.checkMissingProp)(t,a,i)})`),(0,ld.reportMissingProp)(t,i),r.else())}}xs.validatePropertyDeps=KF;function JF(t,e=t.schema){let{gen:r,data:n,keyword:s,it:i}=t,o=r.name("valid");for(let a in e)(0,ume.alwaysValidSchema)(i,e[a])||(r.if((0,ld.propertyInData)(r,n,a,i.opts.ownProperties),()=>{let c=t.subschema({keyword:s,schemaProp:a},o);t.mergeValidEvaluated(c,o)},()=>r.var(o,!0)),t.ok(o))}xs.validateSchemaDeps=JF;xs.default=fme});var QF=E(ER=>{"use strict";Object.defineProperty(ER,"__esModule",{value:!0});var XF=ne(),hme=me(),pme={message:"property name must be valid",params:({params:t})=>(0,XF._)`{propertyName: ${t.propertyName}}`},mme={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:pme,code(t){let{gen:e,schema:r,data:n,it:s}=t;if((0,hme.alwaysValidSchema)(s,r))return;let i=e.name("valid");e.forIn("key",n,o=>{t.setParams({propertyName:o}),t.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},i),e.if((0,XF.not)(i),()=>{t.error(!0),s.allErrors||e.break()})}),t.ok(i)}};ER.default=mme});var TR=E(SR=>{"use strict";Object.defineProperty(SR,"__esModule",{value:!0});var Dg=Jt(),ns=ne(),gme=bn(),Mg=me(),yme={message:"must NOT have additional properties",params:({params:t})=>(0,ns._)`{additionalProperty: ${t.additionalProperty}}`},_me={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:yme,code(t){let{gen:e,schema:r,parentSchema:n,data:s,errsCount:i,it:o}=t;if(!i)throw new Error("ajv implementation error");let{allErrors:a,opts:c}=o;if(o.props=!0,c.removeAdditional!=="all"&&(0,Mg.alwaysValidSchema)(o,r))return;let l=(0,Dg.allSchemaProperties)(n.properties),u=(0,Dg.allSchemaProperties)(n.patternProperties);d(),t.ok((0,ns._)`${i} === ${gme.default.errors}`);function d(){e.forIn("key",s,y=>{!l.length&&!u.length?h(y):e.if(p(y),()=>h(y))})}function p(y){let g;if(l.length>8){let w=(0,Mg.schemaRefOrVal)(o,n.properties,"properties");g=(0,Dg.isOwnProperty)(e,w,y)}else l.length?g=(0,ns.or)(...l.map(w=>(0,ns._)`${y} === ${w}`)):g=ns.nil;return u.length&&(g=(0,ns.or)(g,...u.map(w=>(0,ns._)`${(0,Dg.usePattern)(t,w)}.test(${y})`))),(0,ns.not)(g)}function f(y){e.code((0,ns._)`delete ${s}[${y}]`)}function h(y){if(c.removeAdditional==="all"||c.removeAdditional&&r===!1){f(y);return}if(r===!1){t.setParams({additionalProperty:y}),t.error(),a||e.break();return}if(typeof r=="object"&&!(0,Mg.alwaysValidSchema)(o,r)){let g=e.name("valid");c.removeAdditional==="failing"?(m(y,g,!1),e.if((0,ns.not)(g),()=>{t.reset(),f(y)})):(m(y,g),a||e.if((0,ns.not)(g),()=>e.break()))}}function m(y,g,w){let _={keyword:"additionalProperties",dataProp:y,dataPropType:Mg.Type.Str};w===!1&&Object.assign(_,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(_,g)}}};SR.default=_me});var t2=E($R=>{"use strict";Object.defineProperty($R,"__esModule",{value:!0});var vme=nl(),ZF=Jt(),RR=me(),e2=TR(),wme={keyword:"properties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:i}=t;i.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&e2.default.code(new vme.KeywordCxt(i,e2.default,"additionalProperties"));let o=(0,ZF.allSchemaProperties)(r);for(let d of o)i.definedProperties.add(d);i.opts.unevaluated&&o.length&&i.props!==!0&&(i.props=RR.mergeEvaluated.props(e,(0,RR.toHash)(o),i.props));let a=o.filter(d=>!(0,RR.alwaysValidSchema)(i,r[d]));if(a.length===0)return;let c=e.name("valid");for(let d of a)l(d)?u(d):(e.if((0,ZF.propertyInData)(e,s,d,i.opts.ownProperties)),u(d),i.allErrors||e.else().var(c,!0),e.endIf()),t.it.definedProperties.add(d),t.ok(c);function l(d){return i.opts.useDefaults&&!i.compositeRule&&r[d].default!==void 0}function u(d){t.subschema({keyword:"properties",schemaProp:d,dataProp:d},c)}}};$R.default=wme});var i2=E(OR=>{"use strict";Object.defineProperty(OR,"__esModule",{value:!0});var r2=Jt(),jg=ne(),n2=me(),s2=me(),bme={keyword:"patternProperties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,data:n,parentSchema:s,it:i}=t,{opts:o}=i,a=(0,r2.allSchemaProperties)(r),c=a.filter(m=>(0,n2.alwaysValidSchema)(i,r[m]));if(a.length===0||c.length===a.length&&(!i.opts.unevaluated||i.props===!0))return;let l=o.strictSchema&&!o.allowMatchingProperties&&s.properties,u=e.name("valid");i.props!==!0&&!(i.props instanceof jg.Name)&&(i.props=(0,s2.evaluatedPropsToName)(e,i.props));let{props:d}=i;p();function p(){for(let m of a)l&&f(m),i.allErrors?h(m):(e.var(u,!0),h(m),e.if(u))}function f(m){for(let y in l)new RegExp(m).test(y)&&(0,n2.checkStrictMode)(i,`property ${y} matches pattern ${m} (use allowMatchingProperties)`)}function h(m){e.forIn("key",n,y=>{e.if((0,jg._)`${(0,r2.usePattern)(t,m)}.test(${y})`,()=>{let g=c.includes(m);g||t.subschema({keyword:"patternProperties",schemaProp:m,dataProp:y,dataPropType:s2.Type.Str},u),i.opts.unevaluated&&d!==!0?e.assign((0,jg._)`${d}[${y}]`,!0):!g&&!i.allErrors&&e.if((0,jg.not)(u),()=>e.break())})})}}};OR.default=bme});var o2=E(PR=>{"use strict";Object.defineProperty(PR,"__esModule",{value:!0});var Eme=me(),Sme={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){let{gen:e,schema:r,it:n}=t;if((0,Eme.alwaysValidSchema)(n,r)){t.fail();return}let s=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),t.failResult(s,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};PR.default=Sme});var a2=E(xR=>{"use strict";Object.defineProperty(xR,"__esModule",{value:!0});var Tme=Jt(),Rme={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Tme.validateUnion,error:{message:"must match a schema in anyOf"}};xR.default=Rme});var c2=E(NR=>{"use strict";Object.defineProperty(NR,"__esModule",{value:!0});var qg=ne(),$me=me(),Ome={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,qg._)`{passingSchemas: ${t.passing}}`},Pme={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Ome,code(t){let{gen:e,schema:r,parentSchema:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&n.discriminator)return;let i=r,o=e.let("valid",!1),a=e.let("passing",null),c=e.name("_valid");t.setParams({passing:a}),e.block(l),t.result(o,()=>t.reset(),()=>t.error(!0));function l(){i.forEach((u,d)=>{let p;(0,$me.alwaysValidSchema)(s,u)?e.var(c,!0):p=t.subschema({keyword:"oneOf",schemaProp:d,compositeRule:!0},c),d>0&&e.if((0,qg._)`${c} && ${o}`).assign(o,!1).assign(a,(0,qg._)`[${a}, ${d}]`).else(),e.if(c,()=>{e.assign(o,!0),e.assign(a,d),p&&t.mergeEvaluated(p,qg.Name)})})}}};NR.default=Pme});var l2=E(CR=>{"use strict";Object.defineProperty(CR,"__esModule",{value:!0});var xme=me(),Nme={keyword:"allOf",schemaType:"array",code(t){let{gen:e,schema:r,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");let s=e.name("valid");r.forEach((i,o)=>{if((0,xme.alwaysValidSchema)(n,i))return;let a=t.subschema({keyword:"allOf",schemaProp:o},s);t.ok(s),t.mergeEvaluated(a)})}};CR.default=Nme});var d2=E(IR=>{"use strict";Object.defineProperty(IR,"__esModule",{value:!0});var Lg=ne(),f2=me(),Cme={message:({params:t})=>(0,Lg.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,Lg._)`{failingKeyword: ${t.ifClause}}`},Ime={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:Cme,code(t){let{gen:e,parentSchema:r,it:n}=t;r.then===void 0&&r.else===void 0&&(0,f2.checkStrictMode)(n,'"if" without "then" and "else" is ignored');let s=u2(n,"then"),i=u2(n,"else");if(!s&&!i)return;let o=e.let("valid",!0),a=e.name("_valid");if(c(),t.reset(),s&&i){let u=e.let("ifClause");t.setParams({ifClause:u}),e.if(a,l("then",u),l("else",u))}else s?e.if(a,l("then")):e.if((0,Lg.not)(a),l("else"));t.pass(o,()=>t.error(!0));function c(){let u=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);t.mergeEvaluated(u)}function l(u,d){return()=>{let p=t.subschema({keyword:u},a);e.assign(o,a),t.mergeValidEvaluated(p,o),d?e.assign(d,(0,Lg._)`${u}`):t.setParams({ifClause:u})}}}};function u2(t,e){let r=t.schema[e];return r!==void 0&&!(0,f2.alwaysValidSchema)(t,r)}IR.default=Ime});var h2=E(AR=>{"use strict";Object.defineProperty(AR,"__esModule",{value:!0});var Ame=me(),kme={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,Ame.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};AR.default=kme});var p2=E(kR=>{"use strict";Object.defineProperty(kR,"__esModule",{value:!0});var Dme=gR(),Mme=zF(),jme=yR(),qme=GF(),Lme=WF(),Fme=YF(),Ume=QF(),Bme=TR(),Vme=t2(),zme=i2(),Hme=o2(),Gme=a2(),Wme=c2(),Kme=l2(),Jme=d2(),Yme=h2();function Xme(t=!1){let e=[Hme.default,Gme.default,Wme.default,Kme.default,Jme.default,Yme.default,Ume.default,Bme.default,Fme.default,Vme.default,zme.default];return t?e.push(Mme.default,qme.default):e.push(Dme.default,jme.default),e.push(Lme.default),e}kR.default=Xme});var m2=E(DR=>{"use strict";Object.defineProperty(DR,"__esModule",{value:!0});var Et=ne(),Qme={message:({schemaCode:t})=>(0,Et.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,Et._)`{format: ${t}}`},Zme={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:Qme,code(t,e){let{gen:r,data:n,$data:s,schema:i,schemaCode:o,it:a}=t,{opts:c,errSchemaPath:l,schemaEnv:u,self:d}=a;if(!c.validateFormats)return;s?p():f();function p(){let h=r.scopeValue("formats",{ref:d.formats,code:c.code.formats}),m=r.const("fDef",(0,Et._)`${h}[${o}]`),y=r.let("fType"),g=r.let("format");r.if((0,Et._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>r.assign(y,(0,Et._)`${m}.type || "string"`).assign(g,(0,Et._)`${m}.validate`),()=>r.assign(y,(0,Et._)`"string"`).assign(g,m)),t.fail$data((0,Et.or)(w(),_()));function w(){return c.strictSchema===!1?Et.nil:(0,Et._)`${o} && !${g}`}function _(){let v=u.$async?(0,Et._)`(${m}.async ? await ${g}(${n}) : ${g}(${n}))`:(0,Et._)`${g}(${n})`,S=(0,Et._)`(typeof ${g} == "function" ? ${v} : ${g}.test(${n}))`;return(0,Et._)`${g} && ${g} !== true && ${y} === ${e} && !${S}`}}function f(){let h=d.formats[i];if(!h){w();return}if(h===!0)return;let[m,y,g]=_(h);m===e&&t.pass(v());function w(){if(c.strictSchema===!1){d.logger.warn(S());return}throw new Error(S());function S(){return`unknown format "${i}" ignored in schema at path "${l}"`}}function _(S){let $=S instanceof RegExp?(0,Et.regexpCode)(S):c.code.formats?(0,Et._)`${c.code.formats}${(0,Et.getProperty)(i)}`:void 0,T=r.scopeValue("formats",{key:i,ref:S,code:$});return typeof S=="object"&&!(S instanceof RegExp)?[S.type||"string",S.validate,(0,Et._)`${T}.validate`]:["string",S,T]}function v(){if(typeof h=="object"&&!(h instanceof RegExp)&&h.async){if(!u.$async)throw new Error("async format in sync schema");return(0,Et._)`await ${g}(${n})`}return typeof y=="function"?(0,Et._)`${g}(${n})`:(0,Et._)`${g}.test(${n})`}}}};DR.default=Zme});var g2=E(MR=>{"use strict";Object.defineProperty(MR,"__esModule",{value:!0});var ege=m2(),tge=[ege.default];MR.default=tge});var y2=E(al=>{"use strict";Object.defineProperty(al,"__esModule",{value:!0});al.contentVocabulary=al.metadataVocabulary=void 0;al.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];al.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var v2=E(jR=>{"use strict";Object.defineProperty(jR,"__esModule",{value:!0});var rge=$F(),nge=FF(),sge=p2(),ige=g2(),_2=y2(),oge=[rge.default,nge.default,(0,sge.default)(),ige.default,_2.metadataVocabulary,_2.contentVocabulary];jR.default=oge});var qR=E(Fg=>{"use strict";Object.defineProperty(Fg,"__esModule",{value:!0});Fg.DiscrError=void 0;var w2;(function(t){t.Tag="tag",t.Mapping="mapping"})(w2||(Fg.DiscrError=w2={}))});var E2=E(FR=>{"use strict";Object.defineProperty(FR,"__esModule",{value:!0});var cl=ne(),LR=qR(),b2=ma(),age=li(),cge=me(),lge={message:({params:{discrError:t,tagName:e}})=>t===LR.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,cl._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},uge={keyword:"discriminator",type:"object",schemaType:"object",error:lge,code(t){let{gen:e,data:r,schema:n,parentSchema:s,it:i}=t,{oneOf:o}=s;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");let a=n.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");let c=e.let("valid",!1),l=e.const("tag",(0,cl._)`${r}${(0,cl.getProperty)(a)}`);e.if((0,cl._)`typeof ${l} == "string"`,()=>u(),()=>t.error(!1,{discrError:LR.DiscrError.Tag,tag:l,tagName:a})),t.ok(c);function u(){let f=p();e.if(!1);for(let h in f)e.elseIf((0,cl._)`${l} === ${h}`),e.assign(c,d(f[h]));e.else(),t.error(!1,{discrError:LR.DiscrError.Mapping,tag:l,tagName:a}),e.endIf()}function d(f){let h=e.name("valid"),m=t.subschema({keyword:"oneOf",schemaProp:f},h);return t.mergeEvaluated(m,cl.Name),h}function p(){var f;let h={},m=g(s),y=!0;for(let v=0;v<o.length;v++){let S=o[v];if(S?.$ref&&!(0,cge.schemaHasRulesButRef)(S,i.self.RULES)){let T=S.$ref;if(S=b2.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,T),S instanceof b2.SchemaEnv&&(S=S.schema),S===void 0)throw new age.default(i.opts.uriResolver,i.baseId,T)}let $=(f=S?.properties)===null||f===void 0?void 0:f[a];if(typeof $!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);y=y&&(m||g(S)),w($,v)}if(!y)throw new Error(`discriminator: "${a}" must be required`);return h;function g({required:v}){return Array.isArray(v)&&v.includes(a)}function w(v,S){if(v.const)_(v.const,S);else if(v.enum)for(let $ of v.enum)_($,S);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function _(v,S){if(typeof v!="string"||v in h)throw new Error(`discriminator: "${a}" values must be unique strings`);h[v]=S}}}};FR.default=uge});var S2=E((NDe,fge)=>{fge.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var R2=E((it,UR)=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0});it.MissingRefError=it.ValidationError=it.CodeGen=it.Name=it.nil=it.stringify=it.str=it._=it.KeywordCxt=it.Ajv=void 0;var dge=YT(),hge=v2(),pge=E2(),T2=S2(),mge=["/properties"],Ug="http://json-schema.org/draft-07/schema",ll=class extends dge.default{_addVocabularies(){super._addVocabularies(),hge.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(pge.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let e=this.opts.$data?this.$dataMetaSchema(T2,mge):T2;this.addMetaSchema(e,Ug,!1),this.refs["http://json-schema.org/schema"]=Ug}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(Ug)?Ug:void 0)}};it.Ajv=ll;UR.exports=it=ll;UR.exports.Ajv=ll;Object.defineProperty(it,"__esModule",{value:!0});it.default=ll;var gge=nl();Object.defineProperty(it,"KeywordCxt",{enumerable:!0,get:function(){return gge.KeywordCxt}});var ul=ne();Object.defineProperty(it,"_",{enumerable:!0,get:function(){return ul._}});Object.defineProperty(it,"str",{enumerable:!0,get:function(){return ul.str}});Object.defineProperty(it,"stringify",{enumerable:!0,get:function(){return ul.stringify}});Object.defineProperty(it,"nil",{enumerable:!0,get:function(){return ul.nil}});Object.defineProperty(it,"Name",{enumerable:!0,get:function(){return ul.Name}});Object.defineProperty(it,"CodeGen",{enumerable:!0,get:function(){return ul.CodeGen}});var yge=Xf();Object.defineProperty(it,"ValidationError",{enumerable:!0,get:function(){return yge.default}});var _ge=li();Object.defineProperty(it,"MissingRefError",{enumerable:!0,get:function(){return _ge.default}})});var ui=E(ud=>{"use strict";Object.defineProperty(ud,"__esModule",{value:!0});ud.checkMetadata=void 0;var vge=me(),wge={keyword:"metadata",schemaType:"object",code(t){$2(t);let{gen:e,schema:r,it:n}=t;if((0,vge.alwaysValidSchema)(n,r))return;let s=e.name("valid");t.subschema({keyword:"metadata",jtdMetadata:!0},s),t.ok(s)}};function $2({it:t,keyword:e},r){if(t.jtdMetadata!==r)throw new Error(`JTD: "${e}" cannot be used in this schema location`)}ud.checkMetadata=$2;ud.default=wge});var Bg=E(dd=>{"use strict";Object.defineProperty(dd,"__esModule",{value:!0});dd.hasRef=void 0;var O2=ma(),fd=ne(),bge=li(),P2=bn(),x2=QT(),Ege=ui(),Sge={keyword:"ref",schemaType:"string",code(t){(0,Ege.checkMetadata)(t);let{gen:e,data:r,schema:n,parentSchema:s,it:i}=t,{schemaEnv:{root:o}}=i,a=e.name("valid");s.nullable?(e.var(a,(0,fd._)`${r} === null`),e.if((0,fd.not)(a),c)):(e.var(a,!1),c()),t.ok(a);function c(){var d;let p=(d=o.schema.definitions)===null||d===void 0?void 0:d[n];if(!p)throw new bge.default(i.opts.uriResolver,"",n,`No definition ${n}`);BR(p)||!i.opts.inlineRefs?l(p):u(p)}function l(d){let p=O2.compileSchema.call(i.self,new O2.SchemaEnv({schema:d,root:o,schemaPath:`/definitions/${n}`})),f=(0,x2.getValidate)(t,p),h=e.const("_errs",P2.default.errors);(0,x2.callRef)(t,f,p,p.$async),e.assign(a,(0,fd._)`${h} === ${P2.default.errors}`)}function u(d){let p=e.scopeValue("schema",i.opts.code.source===!0?{ref:d,code:(0,fd.stringify)(d)}:{ref:d});t.subschema({schema:d,dataTypes:[],schemaPath:fd.nil,topSchemaRef:p,errSchemaPath:`/definitions/${n}`},a)}}};function BR(t){for(let e in t){let r;if(e==="ref"||typeof(r=t[e])=="object"&&BR(r))return!0}return!1}dd.hasRef=BR;dd.default=Sge});var zR=E(VR=>{"use strict";Object.defineProperty(VR,"__esModule",{value:!0});var Tge=/t|\s/i,Rge=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,$ge=/^(\d\d):(\d\d):(\d\d)(?:\.\d+)?(?:z|([+-]\d\d)(?::?(\d\d))?)$/i,Oge=[0,31,28,31,30,31,30,31,31,30,31,30,31];function C2(t,e){let r=t.split(Tge);return r.length===2&&N2(r[0])&&Pge(r[1])||e&&r.length===1&&N2(r[0])}VR.default=C2;function N2(t){let e=Rge.exec(t);if(!e)return!1;let r=+e[1],n=+e[2],s=+e[3];return n>=1&&n<=12&&s>=1&&(s<=Oge[n]||n===2&&s===29&&(r%100===0?r%400===0:r%4===0))}function Pge(t){let e=$ge.exec(t);if(!e)return!1;let r=+e[1],n=+e[2],s=+e[3],i=+(e[4]||0),o=+(e[5]||0);return r<=23&&n<=59&&s<=59||r-i===23&&n-o===59&&s===60}C2.code='require("ajv/dist/runtime/timestamp").default'});var fl=E(so=>{"use strict";Object.defineProperty(so,"__esModule",{value:!0});so.typeErrorParams=so.typeErrorMessage=so.typeError=void 0;var xge=ne();function Nge(t){return{message:e=>I2(e,t),params:e=>A2(e,t)}}so.typeError=Nge;function I2({parentSchema:t},e){return t?.nullable?`must be ${e} or null`:`must be ${e}`}so.typeErrorMessage=I2;function A2({parentSchema:t},e){return(0,xge._)`{type: ${e}, nullable: ${!!t?.nullable}}`}so.typeErrorParams=A2});var HR=E(dl=>{"use strict";Object.defineProperty(dl,"__esModule",{value:!0});dl.intRange=void 0;var rn=ne(),Cge=zR(),Ige=me(),Age=ui(),k2=fl();dl.intRange={int8:[-128,127,3],uint8:[0,255,3],int16:[-32768,32767,5],uint16:[0,65535,5],int32:[-2147483648,2147483647,10],uint32:[0,4294967295,10]};var kge={message:t=>(0,k2.typeErrorMessage)(t,t.schema),params:t=>(0,k2.typeErrorParams)(t,t.schema)};function Dge(t){let{gen:e,data:r,it:n}=t,{timestamp:s,allowDate:i}=n.opts;if(s==="date")return(0,rn._)`${r} instanceof Date `;let o=(0,Ige.useFunc)(e,Cge.default),a=i?(0,rn._)`, true`:rn.nil,c=(0,rn._)`typeof ${r} == "string" && ${o}(${r}${a})`;return s==="string"?c:(0,rn.or)((0,rn._)`${r} instanceof Date`,c)}var Mge={keyword:"type",schemaType:"string",error:kge,code(t){(0,Age.checkMetadata)(t);let{data:e,schema:r,parentSchema:n,it:s}=t,i;switch(r){case"boolean":case"string":i=(0,rn._)`typeof ${e} == ${r}`;break;case"timestamp":{i=Dge(t);break}case"float32":case"float64":i=(0,rn._)`typeof ${e} == "number"`;break;default:{let o=r;if(i=(0,rn._)`typeof ${e} == "number" && isFinite(${e}) && !(${e} % 1)`,!s.opts.int32range&&(o==="int32"||o==="uint32"))o==="uint32"&&(i=(0,rn._)`${i} && ${e} >= 0`);else{let[a,c]=dl.intRange[o];i=(0,rn._)`${i} && ${e} >= ${a} && ${e} <= ${c}`}}}t.pass(n.nullable?(0,rn.or)((0,rn._)`${e} === null`,i):i)}};dl.default=Mge});var pl=E(hl=>{"use strict";Object.defineProperty(hl,"__esModule",{value:!0});hl.checkNullableObject=hl.checkNullable=void 0;var Vg=ne();function D2({gen:t,data:e,parentSchema:r},n=Vg.nil){let s=t.name("valid");return r.nullable?(t.let(s,(0,Vg._)`${e} === null`),n=(0,Vg.not)(s)):t.let(s,!1),[s,n]}hl.checkNullable=D2;function jge(t,e){let[r,n]=D2(t,e);return[r,(0,Vg._)`${n} && typeof ${t.data} == "object" && !Array.isArray(${t.data})`]}hl.checkNullableObject=jge});var M2=E(GR=>{"use strict";Object.defineProperty(GR,"__esModule",{value:!0});var io=ne(),qge=ui(),Lge=pl(),Fge={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,io._)`{allowedValues: ${t}}`},Uge={keyword:"enum",schemaType:"array",error:Fge,code(t){(0,qge.checkMetadata)(t);let{gen:e,data:r,schema:n,schemaValue:s,parentSchema:i,it:o}=t;if(n.length===0)throw new Error("enum must have non-empty array");if(n.length!==new Set(n).size)throw new Error("enum items must be unique");let a,c=(0,io._)`typeof ${r} == "string"`;if(n.length>=o.opts.loopEnum){let u;[a,u]=(0,Lge.checkNullable)(t,c),e.if(u,l)}else{if(!Array.isArray(n))throw new Error("ajv implementation error");a=(0,io.and)(c,(0,io.or)(...n.map(u=>(0,io._)`${r} === ${u}`))),i.nullable&&(a=(0,io.or)((0,io._)`${r} === null`,a))}t.pass(a);function l(){e.forOf("v",s,u=>e.if((0,io._)`${a} = ${r} === ${u}`,()=>e.break()))}}};GR.default=Uge});var q2=E(WR=>{"use strict";Object.defineProperty(WR,"__esModule",{value:!0});var Bge=me(),Vge=Jt(),j2=ne(),zge=ui(),Hge=pl(),Gge=fl(),Wge={keyword:"elements",schemaType:"object",error:(0,Gge.typeError)("array"),code(t){(0,zge.checkMetadata)(t);let{gen:e,data:r,schema:n,it:s}=t;if((0,Bge.alwaysValidSchema)(s,n))return;let[i]=(0,Hge.checkNullable)(t);e.if((0,j2.not)(i),()=>e.if((0,j2._)`Array.isArray(${r})`,()=>e.assign(i,(0,Vge.validateArray)(t)),()=>t.error())),t.ok(i)}};WR.default=Wge});var JR=E(oo=>{"use strict";Object.defineProperty(oo,"__esModule",{value:!0});oo.validateProperties=oo.error=void 0;var KR=Jt(),L2=me(),fi=ne(),Kge=ui(),Jge=pl(),F2=fl(),ml;(function(t){t.Additional="additional",t.Missing="missing"})(ml||(ml={}));oo.error={message:t=>{let{params:e}=t;return e.propError?e.propError===ml.Additional?"must NOT have additional properties":`must have property '${e.missingProperty}'`:(0,F2.typeErrorMessage)(t,"object")},params:t=>{let{params:e}=t;return e.propError?e.propError===ml.Additional?(0,fi._)`{error: ${e.propError}, additionalProperty: ${e.additionalProperty}}`:(0,fi._)`{error: ${e.propError}, missingProperty: ${e.missingProperty}}`:(0,F2.typeErrorParams)(t,"object")}};var Yge={keyword:"properties",schemaType:"object",error:oo.error,code:U2};function U2(t){(0,Kge.checkMetadata)(t);let{gen:e,data:r,parentSchema:n,it:s}=t,{additionalProperties:i,nullable:o}=n;if(s.jtdDiscriminator&&o)throw new Error("JTD: nullable inside discriminator mapping");if(f())throw new Error("JTD: properties and optionalProperties have common members");let[a,c]=h("properties"),[l,u]=h("optionalProperties");if(c.length===0&&u.length===0&&i)return;let[d,p]=s.jtdDiscriminator===void 0?(0,Jge.checkNullableObject)(t,r):[e.let("valid",!1),!0];e.if(p,()=>e.assign(d,!0).block(()=>{m(c,"properties",!0),m(u,"optionalProperties"),i||g()})),t.pass(d);function f(){let _=n.properties,v=n.optionalProperties;if(!(_&&v))return!1;for(let S in _)if(Object.prototype.hasOwnProperty.call(v,S))return!0;return!1}function h(_){let v=n[_],S=v?(0,KR.allSchemaProperties)(v):[];if(s.jtdDiscriminator&&S.some(T=>T===s.jtdDiscriminator))throw new Error(`JTD: discriminator tag used in ${_}`);let $=S.filter(T=>!(0,L2.alwaysValidSchema)(s,v[T]));return[S,$]}function m(_,v,S){let $=e.var("valid");for(let O of _)e.if((0,KR.propertyInData)(e,r,O,s.opts.ownProperties),()=>y(O,v,$),()=>T(O)),t.ok($);function T(O){S?(e.assign($,!1),t.error(!1,{propError:ml.Missing,missingProperty:O},{schemaPath:O})):e.assign($,!0)}}function y(_,v,S){t.subschema({keyword:v,schemaProp:_,dataProp:_},S)}function g(){e.forIn("key",r,_=>{let v=w(_,a,"properties",s.jtdDiscriminator),S=w(_,l,"optionalProperties"),$=v===!0?S:S===!0?v:(0,fi.and)(v,S);e.if($,()=>{s.opts.removeAdditional?e.code((0,fi._)`delete ${r}[${_}]`):(t.error(!1,{propError:ml.Additional,additionalProperty:_},{instancePath:_,parentSchema:!0}),s.opts.allErrors||e.break())})})}function w(_,v,S,$){let T;if(v.length>8){let O=(0,L2.schemaRefOrVal)(s,n[S],S);T=(0,fi.not)((0,KR.isOwnProperty)(e,O,_)),$!==void 0&&(T=(0,fi.and)(T,(0,fi._)`${_} !== ${$}`))}else if(v.length||$!==void 0){let O=$===void 0?v:[$].concat(v);T=(0,fi.and)(...O.map(R=>(0,fi._)`${_} !== ${R}`))}else T=!0;return T}}oo.validateProperties=U2;oo.default=Yge});var V2=E(YR=>{"use strict";Object.defineProperty(YR,"__esModule",{value:!0});var B2=JR(),Xge={keyword:"optionalProperties",schemaType:"object",error:B2.error,code(t){t.parentSchema.properties||(0,B2.validateProperties)(t)}};YR.default=Xge});var H2=E(XR=>{"use strict";Object.defineProperty(XR,"__esModule",{value:!0});var va=ne(),Qge=ui(),Zge=pl(),z2=fl(),zg=qR(),eye={message:t=>{let{schema:e,params:r}=t;return r.discrError?r.discrError===zg.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in mapping`:(0,z2.typeErrorMessage)(t,"object")},params:t=>{let{schema:e,params:r}=t;return r.discrError?(0,va._)`{error: ${r.discrError}, tag: ${e}, tagValue: ${r.tag}}`:(0,z2.typeErrorParams)(t,"object")}},tye={keyword:"discriminator",schemaType:"string",implements:["mapping"],error:eye,code(t){(0,Qge.checkMetadata)(t);let{gen:e,data:r,schema:n,parentSchema:s}=t,[i,o]=(0,Zge.checkNullableObject)(t,r);e.if(o),a(),e.elseIf((0,va.not)(i)),t.error(),e.endIf(),t.ok(i);function a(){let u=e.const("tag",(0,va._)`${r}${(0,va.getProperty)(n)}`);e.if((0,va._)`${u} === undefined`),t.error(!1,{discrError:zg.DiscrError.Tag,tag:u}),e.elseIf((0,va._)`typeof ${u} == "string"`),c(u),e.else(),t.error(!1,{discrError:zg.DiscrError.Tag,tag:u},{instancePath:n}),e.endIf()}function c(u){e.if(!1);for(let d in s.mapping)e.elseIf((0,va._)`${u} === ${d}`),e.assign(i,l(d));e.else(),t.error(!1,{discrError:zg.DiscrError.Mapping,tag:u},{instancePath:n,schemaPath:"mapping",parentSchema:!0}),e.endIf()}function l(u){let d=e.name("valid");return t.subschema({keyword:"mapping",schemaProp:u,jtdDiscriminator:n},d),d}}};XR.default=tye});var W2=E(QR=>{"use strict";Object.defineProperty(QR,"__esModule",{value:!0});var G2=me(),Hg=ne(),rye=ui(),nye=pl(),sye=fl(),iye={keyword:"values",schemaType:"object",error:(0,sye.typeError)("object"),code(t){(0,rye.checkMetadata)(t);let{gen:e,data:r,schema:n,it:s}=t,[i,o]=(0,nye.checkNullableObject)(t,r);(0,G2.alwaysValidSchema)(s,n)?e.if((0,Hg.not)((0,Hg.or)(o,i)),()=>t.error()):(e.if(o),e.assign(i,a()),e.elseIf((0,Hg.not)(i)),t.error(),e.endIf()),t.ok(i);function a(){let c=e.name("valid");if(s.allErrors){let u=e.let("valid",!0);return l(()=>e.assign(u,!1)),u}return e.var(c,!0),l(()=>e.break()),c;function l(u){e.forIn("key",r,d=>{t.subschema({keyword:"values",dataProp:d,dataPropType:G2.Type.Str},c),e.if((0,Hg.not)(c),u)})}}}};QR.default=iye});var K2=E(ZR=>{"use strict";Object.defineProperty(ZR,"__esModule",{value:!0});var oye=Jt(),aye={keyword:"union",schemaType:"array",trackErrors:!0,code:oye.validateUnion,error:{message:"must match a schema in union"}};ZR.default=aye});var J2=E(e$=>{"use strict";Object.defineProperty(e$,"__esModule",{value:!0});var cye=Bg(),lye=HR(),uye=M2(),fye=q2(),dye=JR(),hye=V2(),pye=H2(),mye=W2(),gye=K2(),yye=ui(),_ye=["definitions",cye.default,lye.default,uye.default,fye.default,dye.default,hye.default,pye.default,mye.default,gye.default,yye.default,{keyword:"additionalProperties",schemaType:"boolean"},{keyword:"nullable",schemaType:"boolean"}];e$.default=_ye});var Z2=E(t$=>{"use strict";Object.defineProperty(t$,"__esModule",{value:!0});var di=t=>{let e={nullable:{type:"boolean"},metadata:{optionalProperties:{union:{elements:{ref:"schema"}}},additionalProperties:!0}};return t&&(e.definitions={values:{ref:"schema"}}),e},vye=t=>({optionalProperties:di(t)}),wye=t=>({properties:{ref:{type:"string"}},optionalProperties:di(t)}),bye=t=>({properties:{type:{enum:["boolean","timestamp","string","float32","float64","int8","uint8","int16","uint16","int32","uint32"]}},optionalProperties:di(t)}),Eye=t=>({properties:{enum:{elements:{type:"string"}}},optionalProperties:di(t)}),Sye=t=>({properties:{elements:{ref:"schema"}},optionalProperties:di(t)}),X2=t=>({properties:{properties:{values:{ref:"schema"}}},optionalProperties:{optionalProperties:{values:{ref:"schema"}},additionalProperties:{type:"boolean"},...di(t)}}),Q2=t=>({properties:{optionalProperties:{values:{ref:"schema"}}},optionalProperties:{additionalProperties:{type:"boolean"},...di(t)}}),Tye=t=>({properties:{discriminator:{type:"string"},mapping:{values:{metadata:{union:[X2(!1),Q2(!1)]}}}},optionalProperties:di(t)}),Rye=t=>({properties:{values:{ref:"schema"}},optionalProperties:di(t)}),Y2=t=>({metadata:{union:[vye,wye,bye,Eye,Sye,X2,Q2,Tye,Rye].map(e=>e(t))}}),$ye={definitions:{schema:Y2(!1)},...Y2(!0)};t$.default=$ye});var r$=E(Gg=>{"use strict";Object.defineProperty(Gg,"__esModule",{value:!0});Gg.jtdForms=void 0;Gg.jtdForms=["elements","values","discriminator","properties","optionalProperties","enum","type","ref"]});var tU=E(s$=>{"use strict";Object.defineProperty(s$,"__esModule",{value:!0});var n$=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,Oye={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function eU(t){return n$.lastIndex=0,'"'+(n$.test(t)?t.replace(n$,e=>{let r=Oye[e];return typeof r=="string"?r:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}):t)+'"'}s$.default=eU;eU.code='require("ajv/dist/runtime/quote").default'});var aU=E(o$=>{"use strict";Object.defineProperty(o$,"__esModule",{value:!0});var Pye=r$(),nU=ma(),Oe=ne(),xye=li(),Ze=bn(),Nye=Jt(),Cye=Bg(),Iye=me(),Aye=tU(),kye={elements:Mye,values:jye,discriminator:qye,properties:rU,optionalProperties:rU,enum:hd,type:Lye,ref:Uye};function sU(t,e){let r=nU.getCompilingSchema.call(this,t);if(r)return r;let{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new Oe.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i}),a=o.scopeName("serialize"),c={self:this,gen:o,schema:t.schema,schemaEnv:t,definitions:e,data:Ze.default.data},l;try{this._compilations.add(t),t.serializeName=a,o.func(a,Ze.default.data,!1,()=>{o.let(Ze.default.json,(0,Oe.str)``),pd(c),o.return(Ze.default.json)}),o.optimize(this.opts.code.optimize);let u=o.toString();l=`${o.scopeRefs(Ze.default.scope)}return ${u}`;let p=new Function(`${Ze.default.scope}`,l)(this.scope.get());this.scope.value(a,{ref:p}),t.serialize=p}catch(u){throw l&&this.logger.error("Error compiling serializer, function code:",l),delete t.serialize,delete t.serializeName,u}finally{this._compilations.delete(t)}return t}o$.default=sU;function pd(t){let e;for(let r of Pye.jtdForms)if(r in t.schema){e=r;break}Dye(t,e?kye[e]:Vye)}function Dye(t,e){let{gen:r,schema:n,data:s}=t;if(!n.nullable)return e(t);r.if((0,Oe._)`${s} === undefined || ${s} === null`,()=>r.add(Ze.default.json,(0,Oe._)`"null"`),()=>e(t))}function Mye(t){let{gen:e,schema:r,data:n}=t;e.add(Ze.default.json,(0,Oe.str)`[`);let s=e.let("first",!0);e.forOf("el",n,i=>{i$(t,s),pd({...t,schema:r.elements,data:i})}),e.add(Ze.default.json,(0,Oe.str)`]`)}function jye(t){let{gen:e,schema:r,data:n}=t;e.add(Ze.default.json,(0,Oe.str)`{`);let s=e.let("first",!0);e.forIn("key",n,i=>iU(t,i,r.values,s)),e.add(Ze.default.json,(0,Oe.str)`}`)}function iU(t,e,r,n){let{gen:s,data:i}=t;i$(t,n),hd({...t,data:e}),s.add(Ze.default.json,(0,Oe.str)`:`);let o=s.const("value",(0,Oe._)`${i}${(0,Oe.getProperty)(e)}`);pd({...t,schema:r,data:o})}function qye(t){let{gen:e,schema:r,data:n}=t,{discriminator:s}=r;e.add(Ze.default.json,(0,Oe.str)`{${JSON.stringify(s)}:`);let i=e.const("tag",(0,Oe._)`${n}${(0,Oe.getProperty)(s)}`);hd({...t,data:i}),e.if(!1);for(let o in r.mapping){e.elseIf((0,Oe._)`${i} === ${o}`);let a=r.mapping[o];oU({...t,schema:a},s)}e.endIf(),e.add(Ze.default.json,(0,Oe.str)`}`)}function rU(t){let{gen:e}=t;e.add(Ze.default.json,(0,Oe.str)`{`),oU(t),e.add(Ze.default.json,(0,Oe.str)`}`)}function oU(t,e){let{gen:r,schema:n,data:s}=t,{properties:i,optionalProperties:o}=n,a=p(i),c=p(o),l=f(a.concat(c)),u=!e,d;for(let g of a)u?u=!1:r.add(Ze.default.json,(0,Oe.str)`,`),m(g,i[g],h(g));u&&(d=r.let("first",!0));for(let g of c){let w=h(g);r.if((0,Oe.and)((0,Oe._)`${w} !== undefined`,(0,Nye.isOwnProperty)(r,s,g)),()=>{i$(t,d),m(g,o[g],w)})}n.additionalProperties&&r.forIn("key",s,g=>r.if(y(g,l),()=>iU(t,g,{},d)));function p(g){return g?Object.keys(g):[]}function f(g){if(e&&g.push(e),new Set(g).size!==g.length)throw new Error("JTD: properties/optionalProperties/disciminator overlap");return g}function h(g){return r.const("value",(0,Oe._)`${s}${(0,Oe.getProperty)(g)}`)}function m(g,w,_){r.add(Ze.default.json,(0,Oe.str)`${JSON.stringify(g)}:`),pd({...t,schema:w,data:_})}function y(g,w){return w.length?(0,Oe.and)(...w.map(_=>(0,Oe._)`${g} !== ${_}`)):!0}}function Lye(t){let{gen:e,schema:r,data:n}=t;switch(r.type){case"boolean":e.add(Ze.default.json,(0,Oe._)`${n} ? "true" : "false"`);break;case"string":hd(t);break;case"timestamp":e.if((0,Oe._)`${n} instanceof Date`,()=>e.add(Ze.default.json,(0,Oe._)`'"' + ${n}.toISOString() + '"'`),()=>hd(t));break;default:Fye(t)}}function hd({gen:t,data:e}){t.add(Ze.default.json,(0,Oe._)`${(0,Iye.useFunc)(t,Aye.default)}(${e})`)}function Fye({gen:t,data:e}){t.add(Ze.default.json,(0,Oe._)`"" + ${e}`)}function Uye(t){let{gen:e,self:r,data:n,definitions:s,schema:i,schemaEnv:o}=t,{ref:a}=i,c=s[a];if(!c)throw new xye.default(r.opts.uriResolver,"",a,`No definition ${a}`);if(!(0,Cye.hasRef)(c))return pd({...t,schema:c});let{root:l}=o,u=sU.call(r,new nU.SchemaEnv({schema:c,root:l}),s);e.add(Ze.default.json,(0,Oe._)`${Bye(e,u)}(${n})`)}function Bye(t,e){return e.serialize?t.scopeValue("serialize",{ref:e.serialize}):(0,Oe._)`${t.scopeValue("wrapper",{ref:e})}.serialize`}function Vye({gen:t,data:e}){t.add(Ze.default.json,(0,Oe._)`JSON.stringify(${e})`)}function i$({gen:t},e){e?t.if(e,()=>t.assign(e,!1),()=>t.add(Ze.default.json,(0,Oe.str)`,`)):t.add(Ze.default.json,(0,Oe.str)`,`)}});var lU=E(co=>{"use strict";Object.defineProperty(co,"__esModule",{value:!0});co.parseJsonString=co.parseJsonNumber=co.parseJson=void 0;var zye=/position\s(\d+)(?: \(line \d+ column \d+\))?$/;function hi(t,e){let r;hi.message=void 0;let n;e&&(t=t.slice(e));try{return hi.position=e+t.length,JSON.parse(t)}catch(s){if(n=zye.exec(s.message),!n){hi.message="unexpected end";return}r=+n[1];let i=t[r];t=t.slice(0,r),hi.position=e+r;try{return JSON.parse(t)}catch{hi.message=`unexpected token ${i}`;return}}}co.parseJson=hi;hi.message=void 0;hi.position=0;hi.code='require("ajv/dist/runtime/parseJson").parseJson';function pi(t,e,r){let n="",s;if(pi.message=void 0,t[e]==="-"&&(n+="-",e++),t[e]==="0")n+="0",e++;else if(!i(r)){o();return}if(r)return pi.position=e,+n;if(t[e]==="."&&(n+=".",e++,!i())){o();return}if(s=t[e],(s==="e"||s==="E")&&(n+="e",e++,s=t[e],(s==="+"||s==="-")&&(n+=s,e++),!i())){o();return}return pi.position=e,+n;function i(a){let c=!1;for(;s=t[e],s>="0"&&s<="9"&&(a===void 0||a-- >0);)c=!0,n+=s,e++;return c}function o(){pi.position=e,pi.message=e<t.length?`unexpected token ${t[e]}`:"unexpected end"}}co.parseJsonNumber=pi;pi.message=void 0;pi.position=0;pi.code='require("ajv/dist/runtime/parseJson").parseJsonNumber';var cU={b:"\b",f:"\f",n:`
`,r:"\r",t:"	",'"':'"',"/":"/","\\":"\\"},Hye="a".charCodeAt(0),Gye="0".charCodeAt(0);function ao(t,e){let r="",n;for(ao.message=void 0;n=t[e++],n!=='"';)if(n==="\\")if(n=t[e],n in cU)r+=cU[n],e++;else if(n==="u"){e++;let i=4,o=0;for(;i--;){if(o<<=4,n=t[e],n===void 0){s("unexpected end");return}if(n=n.toLowerCase(),n>="a"&&n<="f")o+=n.charCodeAt(0)-Hye+10;else if(n>="0"&&n<="9")o+=n.charCodeAt(0)-Gye;else{s(`unexpected token ${n}`);return}e++}r+=String.fromCharCode(o)}else{s(`unexpected token ${n}`);return}else if(n===void 0){s("unexpected end");return}else if(n.charCodeAt(0)>=32)r+=n;else{s(`unexpected token ${n}`);return}return ao.position=e,r;function s(i){ao.position=e,ao.message=i}}co.parseJsonString=ao;ao.message=void 0;ao.position=0;ao.code='require("ajv/dist/runtime/parseJson").parseJsonString'});var wU=E(p$=>{"use strict";Object.defineProperty(p$,"__esModule",{value:!0});var Wye=r$(),hU=ma(),ee=ne(),Kye=li(),$e=bn(),Jye=Jt(),Yye=Bg(),Xye=HR(),l$=lU(),pU=me(),Qye=zR(),Zye={elements:n0e,values:s0e,discriminator:o0e,properties:uU,optionalProperties:uU,enum:c0e,type:a0e,ref:l0e};function mU(t,e){let r=hU.getCompilingSchema.call(this,t);if(r)return r;let{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new ee.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i}),a=o.scopeName("parse"),c={self:this,gen:o,schema:t.schema,schemaEnv:t,definitions:e,data:$e.default.data,parseName:a,char:o.name("c")},l;try{this._compilations.add(t),t.parseName=a,e0e(c),o.optimize(this.opts.code.optimize);let u=o.toString();l=`${o.scopeRefs($e.default.scope)}return ${u}`;let p=new Function(`${$e.default.scope}`,l)(this.scope.get());this.scope.value(a,{ref:p}),t.parse=p}catch(u){throw l&&this.logger.error("Error compiling parser, function code:",l),delete t.parse,delete t.parseName,u}finally{this._compilations.delete(t)}return t}p$.default=mU;var c$=(0,ee._)`undefined`;function e0e(t){let{gen:e,parseName:r,char:n}=t;e.func(r,(0,ee._)`${$e.default.json}, ${$e.default.jsonPos}, ${$e.default.jsonPart}`,!1,()=>{e.let($e.default.data),e.let(n),e.assign((0,ee._)`${r}.message`,c$),e.assign((0,ee._)`${r}.position`,c$),e.assign($e.default.jsonPos,(0,ee._)`${$e.default.jsonPos} || 0`),e.const($e.default.jsonLen,(0,ee._)`${$e.default.json}.length`),Wg(t),h$(t),e.if($e.default.jsonPart,()=>{e.assign((0,ee._)`${r}.position`,$e.default.jsonPos),e.return($e.default.data)}),e.if((0,ee._)`${$e.default.jsonPos} === ${$e.default.jsonLen}`,()=>e.return($e.default.data)),gl(t)})}function Wg(t){let e;for(let r of Wye.jtdForms)if(r in t.schema){e=r;break}e?r0e(t,Zye[e]):f$(t)}var t0e=dU(!0,dU(!1,gl));function r0e(t,e){let{gen:r,schema:n,data:s}=t;if(!n.nullable)return e(t);md(t,"null",e,()=>r.assign(s,null))}function n0e(t){let{gen:e,schema:r,data:n}=t;Ns(t,"[");let s=e.let("i",0);e.assign(n,(0,ee._)`[]`),u$(t,"]",()=>{let i=e.let("el");Wg({...t,schema:r.elements,data:i}),e.assign((0,ee._)`${n}[${s}++]`,i)})}function s0e(t){let{gen:e,schema:r,data:n}=t;Ns(t,"{"),e.assign(n,(0,ee._)`{}`),u$(t,"}",()=>i0e(t,r.values))}function u$(t,e,r){gU(t,e,r),Ns(t,e)}function gU(t,e,r){let{gen:n}=t;n.for((0,ee._)`;${$e.default.jsonPos}<${$e.default.jsonLen} && ${Kg(1)}!==${e};`,()=>{r(),md(t,",",()=>n.break(),s)});function s(){md(t,e,()=>{},gl)}}function i0e(t,e){let{gen:r}=t,n=r.let("key");wa({...t,data:n}),Ns(t,":"),_U(t,n,e)}function o0e(t){let{gen:e,data:r,schema:n}=t,{discriminator:s,mapping:i}=n;Ns(t,"{"),e.assign(r,(0,ee._)`{}`);let o=e.const("pos",$e.default.jsonPos),a=e.let("value"),c=e.let("tag");gU(t,"}",()=>{let l=e.let("key");wa({...t,data:l}),Ns(t,":"),e.if((0,ee._)`${l} === ${s}`,()=>{wa({...t,data:c}),e.assign((0,ee._)`${r}[${l}]`,c),e.break()},()=>f$({...t,data:a}))}),e.assign($e.default.jsonPos,o),e.if((0,ee._)`${c} === undefined`),mi(t,(0,ee.str)`discriminator tag not found`);for(let l in i)e.elseIf((0,ee._)`${c} === ${l}`),yU({...t,schema:i[l]},s);e.else(),mi(t,(0,ee.str)`discriminator value not in schema`),e.endIf()}function uU(t){let{gen:e,data:r}=t;Ns(t,"{"),e.assign(r,(0,ee._)`{}`),yU(t)}function yU(t,e){let{gen:r,schema:n,data:s}=t,{properties:i,optionalProperties:o,additionalProperties:a}=n;if(u$(t,"}",()=>{let c=r.let("key");if(wa({...t,data:c}),Ns(t,":"),r.if(!1),fU(t,c,i),fU(t,c,o),e){r.elseIf((0,ee._)`${c} === ${e}`);let l=r.let("tag");wa({...t,data:l})}r.else(),a?f$({...t,data:(0,ee._)`${s}[${c}]`}):mi(t,(0,ee.str)`property ${c} not allowed`),r.endIf()}),i){let c=(0,Jye.hasPropFunc)(r),l=(0,ee.and)(...Object.keys(i).map(u=>(0,ee._)`${c}.call(${s}, ${u})`));r.if((0,ee.not)(l),()=>mi(t,(0,ee.str)`missing required properties`))}}function fU(t,e,r={}){let{gen:n}=t;for(let s in r)n.elseIf((0,ee._)`${e} === ${s}`),_U(t,e,r[s])}function _U(t,e,r){Wg({...t,schema:r,data:(0,ee._)`${t.data}[${e}]`})}function a0e(t){let{gen:e,schema:r,data:n,self:s}=t;switch(r.type){case"boolean":t0e(t);break;case"string":wa(t);break;case"timestamp":{wa(t);let i=(0,pU.useFunc)(e,Qye.default),{allowDate:o,parseDate:a}=s.opts,c=o?(0,ee._)`!${i}(${n}, true)`:(0,ee._)`!${i}(${n})`,l=a?(0,ee.or)(c,(0,ee._)`(${n} = new Date(${n}), false)`,(0,ee._)`isNaN(${n}.valueOf())`):c;e.if(l,()=>mi(t,(0,ee.str)`invalid timestamp`));break}case"float32":case"float64":a$(t);break;default:{let i=r.type;if(!s.opts.int32range&&(i==="int32"||i==="uint32"))a$(t,16),i==="uint32"&&e.if((0,ee._)`${n} < 0`,()=>mi(t,(0,ee.str)`integer out of range`));else{let[o,a,c]=Xye.intRange[i];a$(t,c),e.if((0,ee._)`${n} < ${o} || ${n} > ${a}`,()=>mi(t,(0,ee.str)`integer out of range`))}}}}function wa(t){Ns(t,'"'),d$(t,l$.parseJsonString)}function c0e(t){let{gen:e,data:r,schema:n}=t,s=n.enum;Ns(t,'"'),e.if(!1);for(let i of s){let o=JSON.stringify(i).slice(1);e.elseIf((0,ee._)`${Kg(o.length)} === ${o}`),e.assign(r,(0,ee.str)`${i}`),e.add($e.default.jsonPos,o.length)}e.else(),gl(t),e.endIf()}function a$(t,e){let{gen:r}=t;h$(t),r.if((0,ee._)`"-0123456789".indexOf(${Kg(1)}) < 0`,()=>gl(t),()=>d$(t,l$.parseJsonNumber,e))}function dU(t,e){return r=>{let{gen:n,data:s}=r;md(r,`${t}`,()=>e(r),()=>n.assign(s,t))}}function l0e(t){let{gen:e,self:r,definitions:n,schema:s,schemaEnv:i}=t,{ref:o}=s,a=n[o];if(!a)throw new Kye.default(r.opts.uriResolver,"",o,`No definition ${o}`);if(!(0,Yye.hasRef)(a))return Wg({...t,schema:a});let{root:c}=i,l=mU.call(r,new hU.SchemaEnv({schema:a,root:c}),n);vU(t,u0e(e,l),!0)}function u0e(t,e){return e.parse?t.scopeValue("parse",{ref:e.parse}):(0,ee._)`${t.scopeValue("wrapper",{ref:e})}.parse`}function f$(t){d$(t,l$.parseJson)}function d$(t,e,r){vU(t,(0,pU.useFunc)(t.gen,e),r)}function vU(t,e,r){let{gen:n,data:s}=t;n.assign(s,(0,ee._)`${e}(${$e.default.json}, ${$e.default.jsonPos}${r?(0,ee._)`, ${r}`:ee.nil})`),n.assign($e.default.jsonPos,(0,ee._)`${e}.position`),n.if((0,ee._)`${s} === undefined`,()=>mi(t,(0,ee._)`${e}.message`))}function Ns(t,e){md(t,e,gl)}function md(t,e,r,n){let{gen:s}=t,i=e.length;h$(t),s.if((0,ee._)`${Kg(i)} === ${e}`,()=>{s.add($e.default.jsonPos,i),n?.(t)},()=>r(t))}function h$({gen:t,char:e}){t.code((0,ee._)`while((${e}=${$e.default.json}[${$e.default.jsonPos}],${e}===" "||${e}==="\\n"||${e}==="\\r"||${e}==="\\t"))${$e.default.jsonPos}++;`)}function Kg(t){return t===1?(0,ee._)`${$e.default.json}[${$e.default.jsonPos}]`:(0,ee._)`${$e.default.json}.slice(${$e.default.jsonPos}, ${$e.default.jsonPos}+${t})`}function gl(t){mi(t,(0,ee._)`"unexpected token " + ${$e.default.json}[${$e.default.jsonPos}]`)}function mi({gen:t,parseName:e},r){t.assign((0,ee._)`${e}.message`,r),t.assign((0,ee._)`${e}.position`,$e.default.jsonPos),t.return(c$)}});var y$=E((ot,g$)=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});ot.MissingRefError=ot.ValidationError=ot.CodeGen=ot.Name=ot.nil=ot.stringify=ot.str=ot._=ot.KeywordCxt=ot.Ajv=void 0;var f0e=YT(),d0e=J2(),h0e=Z2(),p0e=aU(),m0e=wU(),m$="JTD-meta-schema",yl=class extends f0e.default{constructor(e={}){super({...e,jtd:!0})}_addVocabularies(){super._addVocabularies(),this.addVocabulary(d0e.default)}_addDefaultMetaSchema(){super._addDefaultMetaSchema(),this.opts.meta&&this.addMetaSchema(h0e.default,m$,!1)}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(m$)?m$:void 0)}compileSerializer(e){let r=this._addSchema(e);return r.serialize||this._compileSerializer(r)}compileParser(e){let r=this._addSchema(e);return r.parse||this._compileParser(r)}_compileSerializer(e){if(p0e.default.call(this,e,e.schema.definitions||{}),!e.serialize)throw new Error("ajv implementation error");return e.serialize}_compileParser(e){if(m0e.default.call(this,e,e.schema.definitions||{}),!e.parse)throw new Error("ajv implementation error");return e.parse}};ot.Ajv=yl;g$.exports=ot=yl;g$.exports.Ajv=yl;Object.defineProperty(ot,"__esModule",{value:!0});ot.default=yl;var g0e=nl();Object.defineProperty(ot,"KeywordCxt",{enumerable:!0,get:function(){return g0e.KeywordCxt}});var _l=ne();Object.defineProperty(ot,"_",{enumerable:!0,get:function(){return _l._}});Object.defineProperty(ot,"str",{enumerable:!0,get:function(){return _l.str}});Object.defineProperty(ot,"stringify",{enumerable:!0,get:function(){return _l.stringify}});Object.defineProperty(ot,"nil",{enumerable:!0,get:function(){return _l.nil}});Object.defineProperty(ot,"Name",{enumerable:!0,get:function(){return _l.Name}});Object.defineProperty(ot,"CodeGen",{enumerable:!0,get:function(){return _l.CodeGen}});var y0e=Xf();Object.defineProperty(ot,"ValidationError",{enumerable:!0,get:function(){return y0e.default}});var _0e=li();Object.defineProperty(ot,"MissingRefError",{enumerable:!0,get:function(){return _0e.default}})});var _$=E((XDe,bU)=>{"use strict";var v0e=Rc();bU.exports=Object.freeze({coerceTypes:"array",useDefaults:!0,removeAdditional:!0,uriResolver:v0e,addUsedSchema:!1,allErrors:!1})});var TU=E((QDe,SU)=>{"use strict";var w0e=R2().default,b0e=y$(),EU=_$(),v$=class{constructor(e,r){r.mode==="JTD"?this.ajv=new b0e(Object.assign({},EU,r.customOptions)):this.ajv=new w0e(Object.assign({},EU,r.customOptions));let n=!0;if(r.plugins&&r.plugins.length>0)for(let i of r.plugins)Array.isArray(i)?(n=n&&i[0].name!=="formatsPlugin",i[0](this.ajv,i[1])):(n=n&&i.name!=="formatsPlugin",i(this.ajv));n&&JS()(this.ajv),r.onCreate?.(this.ajv);let s=Object.values(e);for(let i of s)this.ajv.addSchema(i)}buildValidatorFunction({schema:e}){if(e.$id){let r=this.ajv.getSchema(e.$id);if(r)return r}return this.ajv.compile(e)}};SU.exports=v$});var $U=E((ZDe,RU)=>{"use strict";var E0e=y$(),S0e=_$(),w$=class{constructor(e,r){this.ajv=new E0e(Object.assign({},S0e,r))}buildSerializerFunction({schema:e}){return this.ajv.compileSerializer(e)}};RU.exports=w$});var xU=E((yd,PU)=>{"use strict";Object.defineProperty(yd,"__esModule",{value:!0});var gd=mg(),ss=Jc();function OU(t,e){if(!t.opts.code.source)throw new Error("moduleCode: ajv instance must have code.source option");let{_n:r}=t.scope.opts;return typeof e=="function"?s(e.source):e!==void 0?i(e,n):i(t.schemas,a=>a.meta?void 0:t.compile(a.schema));function n(a){let c=t.getSchema(a);if(!c)throw new Error(`moduleCode: no schema with id ${a}`);return c}function s(a){let c={},l=a?.validateName,u=o(c,a);return t.opts.code.esm?`"use strict";${r}export const validate = ${l};${r}export default ${l};${r}${u}`:`"use strict";${r}module.exports = ${l};${r}module.exports.default = ${l};${r}${u}`}function i(a,c){var l;let u={},d=(0,ss._)`"use strict";`;for(let p in a){let f=c(a[p]);if(f){let h=o(u,f.source),m=t.opts.code.esm?(0,ss._)`export const ${(0,ss.getEsmExportName)(p)}`:(0,ss._)`exports${(0,ss.getProperty)(p)}`;d=(0,ss._)`${d}${r}${m} = ${(l=f.source)===null||l===void 0?void 0:l.validateName};${r}${h}`}}return`${d}`}function o(a,c){if(!c)throw new Error('moduleCode: function does not have "source" property');if(p(c.validateName)===gd.UsedValueState.Completed)return ss.nil;f(c.validateName,gd.UsedValueState.Started);let l=t.scope.scopeCode(c.scopeValues,a,d),u=new ss._Code(`${l}${r}${c.validateCode}`);return c.evaluated?(0,ss._)`${u}${c.validateName}.evaluated = ${c.evaluated};${r}`:u;function d(h){var m;let y=(m=h.value)===null||m===void 0?void 0:m.ref;if(h.prefix==="validate"&&typeof y=="function")return o(a,y.source);if((h.prefix==="root"||h.prefix==="wrapper")&&typeof y=="object"){let{validate:g,validateName:w}=y;if(!w)throw new Error("ajv internal error");let _=t.opts.code.es5?gd.varKinds.var:gd.varKinds.const,v=(0,ss._)`${_} ${h} = {validate: ${w}};`;if(p(w)===gd.UsedValueState.Started)return v;let S=o(a,g?.source);return(0,ss._)`${v}${r}${S}`}}function p(h){var m;return(m=a[h.prefix])===null||m===void 0?void 0:m.get(h)}function f(h,m){let{prefix:y}=h;(a[y]=a[y]||new Map).set(h,m)}}}PU.exports=yd=OU;Object.defineProperty(yd,"__esModule",{value:!0});yd.default=OU});var IU=E((eMe,CU)=>{"use strict";var NU=b$(),T0e=xU().default;function R0e(t={readMode:!0}){if(t.readMode===!0&&!t.restoreFunction)throw new Error("You must provide a restoreFunction options when readMode ON");if(t.readMode!==!0&&!t.storeFunction)throw new Error("You must provide a storeFunction options when readMode OFF");if(t.readMode===!0)return function(){return function(n){return t.restoreFunction(n)}};let e=NU();return function(n,s={}){(!s.customOptions||!s.customOptions.code)&&(s.customOptions=Object.assign({},s.customOptions,{code:{source:!0}}));let i=e(n,s);return function(o){let a=i(o),c=T0e(i[NU.AjvReference].ajv,a);return t.storeFunction(o,c),a}}}CU.exports=R0e});var b$=E((tMe,vl)=>{"use strict";var kU=Symbol.for("fastify.ajv-compiler.reference"),$0e=TU(),O0e=$U();function E$(t){let e=new Map,r=new Map;return t&&t.jtdSerializer===!0?function(s,i){let o=AU({},i);if(r.has(o))return r.get(o);let a=new O0e(s,i),c=a.buildSerializerFunction.bind(a);return r.set(o,c),c}:function(s,i){let o=AU(s,i.customOptions);if(e.has(o))return e.get(o);let a=new $0e(s,i),c=a.buildValidatorFunction.bind(a);return e.set(o,c),i.customOptions.code!==void 0&&(c[kU]=a),c}}function AU(t,e){let r=JSON.stringify(t),n=JSON.stringify(e);return`${r}${n}`}vl.exports=E$;vl.exports.default=E$;vl.exports.AjvCompiler=E$;vl.exports.AjvReference=kU;vl.exports.StandaloneValidator=IU()});var S$=E((rMe,DU)=>{"use strict";var{buildSchemas:P0e}=vu(),x0e=pL(),N0e=b$();function C0e(t,e){if(t)return new wl(t,e);let r=Object.assign({buildValidator:null,buildSerializer:null},e?.compilersFactory);r.buildValidator||(r.buildValidator=N0e()),r.buildSerializer||(r.buildSerializer=x0e());let n={bucket:e&&e.bucket||P0e,compilersFactory:r,isCustomValidatorCompiler:typeof e?.compilersFactory?.buildValidator=="function",isCustomSerializerCompiler:typeof e?.compilersFactory?.buildValidator=="function"};return new wl(void 0,n)}var wl=class{constructor(e,r){this.opts=r||e?.opts,this.addedSchemas=!1,this.compilersFactory=this.opts.compilersFactory,e?(this.schemaBucket=this.opts.bucket(e.getSchemas()),this.validatorCompiler=e.getValidatorCompiler(),this.serializerCompiler=e.getSerializerCompiler(),this.isCustomValidatorCompiler=e.isCustomValidatorCompiler,this.isCustomSerializerCompiler=e.isCustomSerializerCompiler,this.parent=e):(this.schemaBucket=this.opts.bucket(),this.isCustomValidatorCompiler=this.opts.isCustomValidatorCompiler||!1,this.isCustomSerializerCompiler=this.opts.isCustomSerializerCompiler||!1)}add(e){return this.addedSchemas=!0,this.schemaBucket.add(e)}getSchema(e){return this.schemaBucket.getSchema(e)}getSchemas(){return this.schemaBucket.getSchemas()}setValidatorCompiler(e){this.compilersFactory=Object.assign({},this.compilersFactory,{buildValidator:()=>e}),this.validatorCompiler=e,this.isCustomValidatorCompiler=!0}setSerializerCompiler(e){this.compilersFactory=Object.assign({},this.compilersFactory,{buildSerializer:()=>e}),this.serializerCompiler=e,this.isCustomSerializerCompiler=!0}getValidatorCompiler(){return this.validatorCompiler||this.parent&&this.parent.getValidatorCompiler()}getSerializerCompiler(){return this.serializerCompiler||this.parent&&this.parent.getSerializerCompiler()}getSerializerBuilder(){return this.compilersFactory.buildSerializer||this.parent&&this.parent.getSerializerBuilder()}getValidatorBuilder(){return this.compilersFactory.buildValidator||this.parent&&this.parent.getValidatorBuilder()}setupValidator(e){this.validatorCompiler!==void 0&&!this.addedSchemas||(this.validatorCompiler=this.getValidatorBuilder()(this.schemaBucket.getSchemas(),e.ajv))}setupSerializer(e){this.serializerCompiler!==void 0&&!this.addedSchemas||(this.serializerCompiler=this.getSerializerBuilder()(this.schemaBucket.getSchemas(),e.serializerOpts))}};wl.buildSchemaController=C0e;DU.exports=wl});var _d=E((nMe,MU)=>{"use strict";var I0e="2.0.0",A0e=Number.MAX_SAFE_INTEGER||9007199254740991,k0e=16,D0e=256-6,M0e=["major","premajor","minor","preminor","patch","prepatch","prerelease"];MU.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:k0e,MAX_SAFE_BUILD_LENGTH:D0e,MAX_SAFE_INTEGER:A0e,RELEASE_TYPES:M0e,SEMVER_SPEC_VERSION:I0e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var vd=E((sMe,jU)=>{"use strict";var j0e=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};jU.exports=j0e});var bl=E((Cs,qU)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:T$,MAX_SAFE_BUILD_LENGTH:q0e,MAX_LENGTH:L0e}=_d(),F0e=vd();Cs=qU.exports={};var U0e=Cs.re=[],B0e=Cs.safeRe=[],G=Cs.src=[],V0e=Cs.safeSrc=[],W=Cs.t={},z0e=0,R$="[a-zA-Z0-9-]",H0e=[["\\s",1],["\\d",L0e],[R$,q0e]],G0e=t=>{for(let[e,r]of H0e)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},ue=(t,e,r)=>{let n=G0e(e),s=z0e++;F0e(t,s,e),W[t]=s,G[s]=e,V0e[s]=n,U0e[s]=new RegExp(e,r?"g":void 0),B0e[s]=new RegExp(n,r?"g":void 0)};ue("NUMERICIDENTIFIER","0|[1-9]\\d*");ue("NUMERICIDENTIFIERLOOSE","\\d+");ue("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${R$}*`);ue("MAINVERSION",`(${G[W.NUMERICIDENTIFIER]})\\.(${G[W.NUMERICIDENTIFIER]})\\.(${G[W.NUMERICIDENTIFIER]})`);ue("MAINVERSIONLOOSE",`(${G[W.NUMERICIDENTIFIERLOOSE]})\\.(${G[W.NUMERICIDENTIFIERLOOSE]})\\.(${G[W.NUMERICIDENTIFIERLOOSE]})`);ue("PRERELEASEIDENTIFIER",`(?:${G[W.NONNUMERICIDENTIFIER]}|${G[W.NUMERICIDENTIFIER]})`);ue("PRERELEASEIDENTIFIERLOOSE",`(?:${G[W.NONNUMERICIDENTIFIER]}|${G[W.NUMERICIDENTIFIERLOOSE]})`);ue("PRERELEASE",`(?:-(${G[W.PRERELEASEIDENTIFIER]}(?:\\.${G[W.PRERELEASEIDENTIFIER]})*))`);ue("PRERELEASELOOSE",`(?:-?(${G[W.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${G[W.PRERELEASEIDENTIFIERLOOSE]})*))`);ue("BUILDIDENTIFIER",`${R$}+`);ue("BUILD",`(?:\\+(${G[W.BUILDIDENTIFIER]}(?:\\.${G[W.BUILDIDENTIFIER]})*))`);ue("FULLPLAIN",`v?${G[W.MAINVERSION]}${G[W.PRERELEASE]}?${G[W.BUILD]}?`);ue("FULL",`^${G[W.FULLPLAIN]}$`);ue("LOOSEPLAIN",`[v=\\s]*${G[W.MAINVERSIONLOOSE]}${G[W.PRERELEASELOOSE]}?${G[W.BUILD]}?`);ue("LOOSE",`^${G[W.LOOSEPLAIN]}$`);ue("GTLT","((?:<|>)?=?)");ue("XRANGEIDENTIFIERLOOSE",`${G[W.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);ue("XRANGEIDENTIFIER",`${G[W.NUMERICIDENTIFIER]}|x|X|\\*`);ue("XRANGEPLAIN",`[v=\\s]*(${G[W.XRANGEIDENTIFIER]})(?:\\.(${G[W.XRANGEIDENTIFIER]})(?:\\.(${G[W.XRANGEIDENTIFIER]})(?:${G[W.PRERELEASE]})?${G[W.BUILD]}?)?)?`);ue("XRANGEPLAINLOOSE",`[v=\\s]*(${G[W.XRANGEIDENTIFIERLOOSE]})(?:\\.(${G[W.XRANGEIDENTIFIERLOOSE]})(?:\\.(${G[W.XRANGEIDENTIFIERLOOSE]})(?:${G[W.PRERELEASELOOSE]})?${G[W.BUILD]}?)?)?`);ue("XRANGE",`^${G[W.GTLT]}\\s*${G[W.XRANGEPLAIN]}$`);ue("XRANGELOOSE",`^${G[W.GTLT]}\\s*${G[W.XRANGEPLAINLOOSE]}$`);ue("COERCEPLAIN",`(^|[^\\d])(\\d{1,${T$}})(?:\\.(\\d{1,${T$}}))?(?:\\.(\\d{1,${T$}}))?`);ue("COERCE",`${G[W.COERCEPLAIN]}(?:$|[^\\d])`);ue("COERCEFULL",G[W.COERCEPLAIN]+`(?:${G[W.PRERELEASE]})?(?:${G[W.BUILD]})?(?:$|[^\\d])`);ue("COERCERTL",G[W.COERCE],!0);ue("COERCERTLFULL",G[W.COERCEFULL],!0);ue("LONETILDE","(?:~>?)");ue("TILDETRIM",`(\\s*)${G[W.LONETILDE]}\\s+`,!0);Cs.tildeTrimReplace="$1~";ue("TILDE",`^${G[W.LONETILDE]}${G[W.XRANGEPLAIN]}$`);ue("TILDELOOSE",`^${G[W.LONETILDE]}${G[W.XRANGEPLAINLOOSE]}$`);ue("LONECARET","(?:\\^)");ue("CARETTRIM",`(\\s*)${G[W.LONECARET]}\\s+`,!0);Cs.caretTrimReplace="$1^";ue("CARET",`^${G[W.LONECARET]}${G[W.XRANGEPLAIN]}$`);ue("CARETLOOSE",`^${G[W.LONECARET]}${G[W.XRANGEPLAINLOOSE]}$`);ue("COMPARATORLOOSE",`^${G[W.GTLT]}\\s*(${G[W.LOOSEPLAIN]})$|^$`);ue("COMPARATOR",`^${G[W.GTLT]}\\s*(${G[W.FULLPLAIN]})$|^$`);ue("COMPARATORTRIM",`(\\s*)${G[W.GTLT]}\\s*(${G[W.LOOSEPLAIN]}|${G[W.XRANGEPLAIN]})`,!0);Cs.comparatorTrimReplace="$1$2$3";ue("HYPHENRANGE",`^\\s*(${G[W.XRANGEPLAIN]})\\s+-\\s+(${G[W.XRANGEPLAIN]})\\s*$`);ue("HYPHENRANGELOOSE",`^\\s*(${G[W.XRANGEPLAINLOOSE]})\\s+-\\s+(${G[W.XRANGEPLAINLOOSE]})\\s*$`);ue("STAR","(<|>)?=?\\s*\\*");ue("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");ue("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var Jg=E((iMe,LU)=>{"use strict";var W0e=Object.freeze({loose:!0}),K0e=Object.freeze({}),J0e=t=>t?typeof t!="object"?W0e:t:K0e;LU.exports=J0e});var $$=E((oMe,BU)=>{"use strict";var FU=/^[0-9]+$/,UU=(t,e)=>{let r=FU.test(t),n=FU.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},Y0e=(t,e)=>UU(e,t);BU.exports={compareIdentifiers:UU,rcompareIdentifiers:Y0e}});var fr=E((aMe,zU)=>{"use strict";var Yg=vd(),{MAX_LENGTH:VU,MAX_SAFE_INTEGER:Xg}=_d(),{safeRe:Qg,t:Zg}=bl(),X0e=Jg(),{compareIdentifiers:El}=$$(),nn=class{constructor(e,r){if(r=X0e(r),e instanceof nn){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>VU)throw new TypeError(`version is longer than ${VU} characters`);Yg("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?Qg[Zg.LOOSE]:Qg[Zg.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Xg||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Xg||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Xg||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){let i=+s;if(i>=0&&i<Xg)return i}return s}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Yg("SemVer.compare",this.version,this.options,e),!(e instanceof nn)){if(typeof e=="string"&&e===this.version)return 0;e=new nn(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof nn||(e=new nn(e,this.options)),El(this.major,e.major)||El(this.minor,e.minor)||El(this.patch,e.patch)}comparePre(e){if(e instanceof nn||(e=new nn(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],s=e.prerelease[r];if(Yg("prerelease compare",r,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return El(n,s)}while(++r)}compareBuild(e){e instanceof nn||(e=new nn(e,this.options));let r=0;do{let n=this.build[r],s=e.build[r];if(Yg("build compare",r,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return El(n,s)}while(++r)}inc(e,r,n){if(e.startsWith("pre")){if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(r){let s=`-${r}`.match(this.options.loose?Qg[Zg.PRERELEASELOOSE]:Qg[Zg.PRERELEASE]);if(!s||s[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let s=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[s];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(s)}}if(r){let i=[r,s];n===!1&&(i=[r]),El(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};zU.exports=nn});var ba=E((cMe,GU)=>{"use strict";var HU=fr(),Q0e=(t,e,r=!1)=>{if(t instanceof HU)return t;try{return new HU(t,e)}catch(n){if(!r)return null;throw n}};GU.exports=Q0e});var KU=E((lMe,WU)=>{"use strict";var Z0e=ba(),e_e=(t,e)=>{let r=Z0e(t,e);return r?r.version:null};WU.exports=e_e});var YU=E((uMe,JU)=>{"use strict";var t_e=ba(),r_e=(t,e)=>{let r=t_e(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};JU.exports=r_e});var ZU=E((fMe,QU)=>{"use strict";var XU=fr(),n_e=(t,e,r,n,s)=>{typeof r=="string"&&(s=n,n=r,r=void 0);try{return new XU(t instanceof XU?t.version:t,r).inc(e,n,s).version}catch{return null}};QU.exports=n_e});var rB=E((dMe,tB)=>{"use strict";var eB=ba(),s_e=(t,e)=>{let r=eB(t,null,!0),n=eB(e,null,!0),s=r.compare(n);if(s===0)return null;let i=s>0,o=i?r:n,a=i?n:r,c=!!o.prerelease.length;if(!!a.prerelease.length&&!c){if(!a.patch&&!a.minor)return"major";if(a.compareMain(o)===0)return a.minor&&!a.patch?"minor":"patch"}let u=c?"pre":"";return r.major!==n.major?u+"major":r.minor!==n.minor?u+"minor":r.patch!==n.patch?u+"patch":"prerelease"};tB.exports=s_e});var sB=E((hMe,nB)=>{"use strict";var i_e=fr(),o_e=(t,e)=>new i_e(t,e).major;nB.exports=o_e});var oB=E((pMe,iB)=>{"use strict";var a_e=fr(),c_e=(t,e)=>new a_e(t,e).minor;iB.exports=c_e});var cB=E((mMe,aB)=>{"use strict";var l_e=fr(),u_e=(t,e)=>new l_e(t,e).patch;aB.exports=u_e});var uB=E((gMe,lB)=>{"use strict";var f_e=ba(),d_e=(t,e)=>{let r=f_e(t,e);return r&&r.prerelease.length?r.prerelease:null};lB.exports=d_e});var Tn=E((yMe,dB)=>{"use strict";var fB=fr(),h_e=(t,e,r)=>new fB(t,r).compare(new fB(e,r));dB.exports=h_e});var pB=E((_Me,hB)=>{"use strict";var p_e=Tn(),m_e=(t,e,r)=>p_e(e,t,r);hB.exports=m_e});var gB=E((vMe,mB)=>{"use strict";var g_e=Tn(),y_e=(t,e)=>g_e(t,e,!0);mB.exports=y_e});var ey=E((wMe,_B)=>{"use strict";var yB=fr(),__e=(t,e,r)=>{let n=new yB(t,r),s=new yB(e,r);return n.compare(s)||n.compareBuild(s)};_B.exports=__e});var wB=E((bMe,vB)=>{"use strict";var v_e=ey(),w_e=(t,e)=>t.sort((r,n)=>v_e(r,n,e));vB.exports=w_e});var EB=E((EMe,bB)=>{"use strict";var b_e=ey(),E_e=(t,e)=>t.sort((r,n)=>b_e(n,r,e));bB.exports=E_e});var wd=E((SMe,SB)=>{"use strict";var S_e=Tn(),T_e=(t,e,r)=>S_e(t,e,r)>0;SB.exports=T_e});var ty=E((TMe,TB)=>{"use strict";var R_e=Tn(),$_e=(t,e,r)=>R_e(t,e,r)<0;TB.exports=$_e});var O$=E((RMe,RB)=>{"use strict";var O_e=Tn(),P_e=(t,e,r)=>O_e(t,e,r)===0;RB.exports=P_e});var P$=E(($Me,$B)=>{"use strict";var x_e=Tn(),N_e=(t,e,r)=>x_e(t,e,r)!==0;$B.exports=N_e});var ry=E((OMe,OB)=>{"use strict";var C_e=Tn(),I_e=(t,e,r)=>C_e(t,e,r)>=0;OB.exports=I_e});var ny=E((PMe,PB)=>{"use strict";var A_e=Tn(),k_e=(t,e,r)=>A_e(t,e,r)<=0;PB.exports=k_e});var x$=E((xMe,xB)=>{"use strict";var D_e=O$(),M_e=P$(),j_e=wd(),q_e=ry(),L_e=ty(),F_e=ny(),U_e=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return D_e(t,r,n);case"!=":return M_e(t,r,n);case">":return j_e(t,r,n);case">=":return q_e(t,r,n);case"<":return L_e(t,r,n);case"<=":return F_e(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};xB.exports=U_e});var CB=E((NMe,NB)=>{"use strict";var B_e=fr(),V_e=ba(),{safeRe:sy,t:iy}=bl(),z_e=(t,e)=>{if(t instanceof B_e)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(e.includePrerelease?sy[iy.COERCEFULL]:sy[iy.COERCE]);else{let c=e.includePrerelease?sy[iy.COERCERTLFULL]:sy[iy.COERCERTL],l;for(;(l=c.exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||l.index+l[0].length!==r.index+r[0].length)&&(r=l),c.lastIndex=l.index+l[1].length+l[2].length;c.lastIndex=-1}if(r===null)return null;let n=r[2],s=r[3]||"0",i=r[4]||"0",o=e.includePrerelease&&r[5]?`-${r[5]}`:"",a=e.includePrerelease&&r[6]?`+${r[6]}`:"";return V_e(`${n}.${s}.${i}${o}${a}`,e)};NB.exports=z_e});var AB=E((CMe,IB)=>{"use strict";var N$=class{constructor(){this.max=1e3,this.map=new Map}get(e){let r=this.map.get(e);if(r!==void 0)return this.map.delete(e),this.map.set(e,r),r}delete(e){return this.map.delete(e)}set(e,r){if(!this.delete(e)&&r!==void 0){if(this.map.size>=this.max){let s=this.map.keys().next().value;this.delete(s)}this.map.set(e,r)}return this}};IB.exports=N$});var Rn=E((IMe,jB)=>{"use strict";var H_e=/\s+/g,Ea=class{constructor(e,r){if(r=W_e(r),e instanceof Ea)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new Ea(e.raw,r);if(e instanceof C$)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().replace(H_e," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(s=>!DB(s[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let s of this.set)if(s.length===1&&eve(s[0])){this.set=[s];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let r=this.set[e];for(let n=0;n<r.length;n++)n>0&&(this.formatted+=" "),this.formatted+=r[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&Q_e)|(this.options.loose&&Z_e))+":"+e,s=kB.get(n);if(s)return s;let i=this.options.loose,o=i?Yr[Pr.HYPHENRANGELOOSE]:Yr[Pr.HYPHENRANGE];e=e.replace(o,uve(this.options.includePrerelease)),at("hyphen replace",e),e=e.replace(Yr[Pr.COMPARATORTRIM],J_e),at("comparator trim",e),e=e.replace(Yr[Pr.TILDETRIM],Y_e),at("tilde trim",e),e=e.replace(Yr[Pr.CARETTRIM],X_e),at("caret trim",e);let a=e.split(" ").map(d=>tve(d,this.options)).join(" ").split(/\s+/).map(d=>lve(d,this.options));i&&(a=a.filter(d=>(at("loose invalid filter",d,this.options),!!d.match(Yr[Pr.COMPARATORLOOSE])))),at("range list",a);let c=new Map,l=a.map(d=>new C$(d,this.options));for(let d of l){if(DB(d))return[d];c.set(d.value,d)}c.size>1&&c.has("")&&c.delete("");let u=[...c.values()];return kB.set(n,u),u}intersects(e,r){if(!(e instanceof Ea))throw new TypeError("a Range is required");return this.set.some(n=>MB(n,r)&&e.set.some(s=>MB(s,r)&&n.every(i=>s.every(o=>i.intersects(o,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new K_e(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(fve(this.set[r],e,this.options))return!0;return!1}};jB.exports=Ea;var G_e=AB(),kB=new G_e,W_e=Jg(),C$=bd(),at=vd(),K_e=fr(),{safeRe:Yr,t:Pr,comparatorTrimReplace:J_e,tildeTrimReplace:Y_e,caretTrimReplace:X_e}=bl(),{FLAG_INCLUDE_PRERELEASE:Q_e,FLAG_LOOSE:Z_e}=_d(),DB=t=>t.value==="<0.0.0-0",eve=t=>t.value==="",MB=(t,e)=>{let r=!0,n=t.slice(),s=n.pop();for(;r&&n.length;)r=n.every(i=>s.intersects(i,e)),s=n.pop();return r},tve=(t,e)=>(at("comp",t,e),t=sve(t,e),at("caret",t),t=rve(t,e),at("tildes",t),t=ove(t,e),at("xrange",t),t=cve(t,e),at("stars",t),t),xr=t=>!t||t.toLowerCase()==="x"||t==="*",rve=(t,e)=>t.trim().split(/\s+/).map(r=>nve(r,e)).join(" "),nve=(t,e)=>{let r=e.loose?Yr[Pr.TILDELOOSE]:Yr[Pr.TILDE];return t.replace(r,(n,s,i,o,a)=>{at("tilde",t,n,s,i,o,a);let c;return xr(s)?c="":xr(i)?c=`>=${s}.0.0 <${+s+1}.0.0-0`:xr(o)?c=`>=${s}.${i}.0 <${s}.${+i+1}.0-0`:a?(at("replaceTilde pr",a),c=`>=${s}.${i}.${o}-${a} <${s}.${+i+1}.0-0`):c=`>=${s}.${i}.${o} <${s}.${+i+1}.0-0`,at("tilde return",c),c})},sve=(t,e)=>t.trim().split(/\s+/).map(r=>ive(r,e)).join(" "),ive=(t,e)=>{at("caret",t,e);let r=e.loose?Yr[Pr.CARETLOOSE]:Yr[Pr.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(s,i,o,a,c)=>{at("caret",t,s,i,o,a,c);let l;return xr(i)?l="":xr(o)?l=`>=${i}.0.0${n} <${+i+1}.0.0-0`:xr(a)?i==="0"?l=`>=${i}.${o}.0${n} <${i}.${+o+1}.0-0`:l=`>=${i}.${o}.0${n} <${+i+1}.0.0-0`:c?(at("replaceCaret pr",c),i==="0"?o==="0"?l=`>=${i}.${o}.${a}-${c} <${i}.${o}.${+a+1}-0`:l=`>=${i}.${o}.${a}-${c} <${i}.${+o+1}.0-0`:l=`>=${i}.${o}.${a}-${c} <${+i+1}.0.0-0`):(at("no pr"),i==="0"?o==="0"?l=`>=${i}.${o}.${a}${n} <${i}.${o}.${+a+1}-0`:l=`>=${i}.${o}.${a}${n} <${i}.${+o+1}.0-0`:l=`>=${i}.${o}.${a} <${+i+1}.0.0-0`),at("caret return",l),l})},ove=(t,e)=>(at("replaceXRanges",t,e),t.split(/\s+/).map(r=>ave(r,e)).join(" ")),ave=(t,e)=>{t=t.trim();let r=e.loose?Yr[Pr.XRANGELOOSE]:Yr[Pr.XRANGE];return t.replace(r,(n,s,i,o,a,c)=>{at("xRange",t,n,s,i,o,a,c);let l=xr(i),u=l||xr(o),d=u||xr(a),p=d;return s==="="&&p&&(s=""),c=e.includePrerelease?"-0":"",l?s===">"||s==="<"?n="<0.0.0-0":n="*":s&&p?(u&&(o=0),a=0,s===">"?(s=">=",u?(i=+i+1,o=0,a=0):(o=+o+1,a=0)):s==="<="&&(s="<",u?i=+i+1:o=+o+1),s==="<"&&(c="-0"),n=`${s+i}.${o}.${a}${c}`):u?n=`>=${i}.0.0${c} <${+i+1}.0.0-0`:d&&(n=`>=${i}.${o}.0${c} <${i}.${+o+1}.0-0`),at("xRange return",n),n})},cve=(t,e)=>(at("replaceStars",t,e),t.trim().replace(Yr[Pr.STAR],"")),lve=(t,e)=>(at("replaceGTE0",t,e),t.trim().replace(Yr[e.includePrerelease?Pr.GTE0PRE:Pr.GTE0],"")),uve=t=>(e,r,n,s,i,o,a,c,l,u,d,p)=>(xr(n)?r="":xr(s)?r=`>=${n}.0.0${t?"-0":""}`:xr(i)?r=`>=${n}.${s}.0${t?"-0":""}`:o?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,xr(l)?c="":xr(u)?c=`<${+l+1}.0.0-0`:xr(d)?c=`<${l}.${+u+1}.0-0`:p?c=`<=${l}.${u}.${d}-${p}`:t?c=`<${l}.${u}.${+d+1}-0`:c=`<=${c}`,`${r} ${c}`.trim()),fve=(t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(at(t[n].semver),t[n].semver!==C$.ANY&&t[n].semver.prerelease.length>0){let s=t[n].semver;if(s.major===e.major&&s.minor===e.minor&&s.patch===e.patch)return!0}return!1}return!0}});var bd=E((AMe,VB)=>{"use strict";var Ed=Symbol("SemVer ANY"),Sl=class{static get ANY(){return Ed}constructor(e,r){if(r=qB(r),e instanceof Sl){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),A$("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===Ed?this.value="":this.value=this.operator+this.semver.version,A$("comp",this)}parse(e){let r=this.options.loose?LB[FB.COMPARATORLOOSE]:LB[FB.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new UB(n[2],this.options.loose):this.semver=Ed}toString(){return this.value}test(e){if(A$("Comparator.test",e,this.options.loose),this.semver===Ed||e===Ed)return!0;if(typeof e=="string")try{e=new UB(e,this.options)}catch{return!1}return I$(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof Sl))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new BB(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new BB(this.value,r).test(e.semver):(r=qB(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||I$(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||I$(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};VB.exports=Sl;var qB=Jg(),{safeRe:LB,t:FB}=bl(),I$=x$(),A$=vd(),UB=fr(),BB=Rn()});var Sd=E((kMe,zB)=>{"use strict";var dve=Rn(),hve=(t,e,r)=>{try{e=new dve(e,r)}catch{return!1}return e.test(t)};zB.exports=hve});var GB=E((DMe,HB)=>{"use strict";var pve=Rn(),mve=(t,e)=>new pve(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));HB.exports=mve});var KB=E((MMe,WB)=>{"use strict";var gve=fr(),yve=Rn(),_ve=(t,e,r)=>{let n=null,s=null,i=null;try{i=new yve(e,r)}catch{return null}return t.forEach(o=>{i.test(o)&&(!n||s.compare(o)===-1)&&(n=o,s=new gve(n,r))}),n};WB.exports=_ve});var YB=E((jMe,JB)=>{"use strict";var vve=fr(),wve=Rn(),bve=(t,e,r)=>{let n=null,s=null,i=null;try{i=new wve(e,r)}catch{return null}return t.forEach(o=>{i.test(o)&&(!n||s.compare(o)===1)&&(n=o,s=new vve(n,r))}),n};JB.exports=bve});var ZB=E((qMe,QB)=>{"use strict";var k$=fr(),Eve=Rn(),XB=wd(),Sve=(t,e)=>{t=new Eve(t,e);let r=new k$("0.0.0");if(t.test(r)||(r=new k$("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let s=t.set[n],i=null;s.forEach(o=>{let a=new k$(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!i||XB(a,i))&&(i=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),i&&(!r||XB(r,i))&&(r=i)}return r&&t.test(r)?r:null};QB.exports=Sve});var tV=E((LMe,eV)=>{"use strict";var Tve=Rn(),Rve=(t,e)=>{try{return new Tve(t,e).range||"*"}catch{return null}};eV.exports=Rve});var oy=E((FMe,iV)=>{"use strict";var $ve=fr(),sV=bd(),{ANY:Ove}=sV,Pve=Rn(),xve=Sd(),rV=wd(),nV=ty(),Nve=ny(),Cve=ry(),Ive=(t,e,r,n)=>{t=new $ve(t,n),e=new Pve(e,n);let s,i,o,a,c;switch(r){case">":s=rV,i=Nve,o=nV,a=">",c=">=";break;case"<":s=nV,i=Cve,o=rV,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(xve(t,e,n))return!1;for(let l=0;l<e.set.length;++l){let u=e.set[l],d=null,p=null;if(u.forEach(f=>{f.semver===Ove&&(f=new sV(">=0.0.0")),d=d||f,p=p||f,s(f.semver,d.semver,n)?d=f:o(f.semver,p.semver,n)&&(p=f)}),d.operator===a||d.operator===c||(!p.operator||p.operator===a)&&i(t,p.semver))return!1;if(p.operator===c&&o(t,p.semver))return!1}return!0};iV.exports=Ive});var aV=E((UMe,oV)=>{"use strict";var Ave=oy(),kve=(t,e,r)=>Ave(t,e,">",r);oV.exports=kve});var lV=E((BMe,cV)=>{"use strict";var Dve=oy(),Mve=(t,e,r)=>Dve(t,e,"<",r);cV.exports=Mve});var dV=E((VMe,fV)=>{"use strict";var uV=Rn(),jve=(t,e,r)=>(t=new uV(t,r),e=new uV(e,r),t.intersects(e,r));fV.exports=jve});var pV=E((zMe,hV)=>{"use strict";var qve=Sd(),Lve=Tn();hV.exports=(t,e,r)=>{let n=[],s=null,i=null,o=t.sort((u,d)=>Lve(u,d,r));for(let u of o)qve(u,e,r)?(i=u,s||(s=u)):(i&&n.push([s,i]),i=null,s=null);s&&n.push([s,null]);let a=[];for(let[u,d]of n)u===d?a.push(u):!d&&u===o[0]?a.push("*"):d?u===o[0]?a.push(`<=${d}`):a.push(`${u} - ${d}`):a.push(`>=${u}`);let c=a.join(" || "),l=typeof e.raw=="string"?e.raw:String(e);return c.length<l.length?c:e}});var wV=E((HMe,vV)=>{"use strict";var mV=Rn(),M$=bd(),{ANY:D$}=M$,Td=Sd(),j$=Tn(),Fve=(t,e,r={})=>{if(t===e)return!0;t=new mV(t,r),e=new mV(e,r);let n=!1;e:for(let s of t.set){for(let i of e.set){let o=Bve(s,i,r);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},Uve=[new M$(">=0.0.0-0")],gV=[new M$(">=0.0.0")],Bve=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===D$){if(e.length===1&&e[0].semver===D$)return!0;r.includePrerelease?t=Uve:t=gV}if(e.length===1&&e[0].semver===D$){if(r.includePrerelease)return!0;e=gV}let n=new Set,s,i;for(let f of t)f.operator===">"||f.operator===">="?s=yV(s,f,r):f.operator==="<"||f.operator==="<="?i=_V(i,f,r):n.add(f.semver);if(n.size>1)return null;let o;if(s&&i){if(o=j$(s.semver,i.semver,r),o>0)return null;if(o===0&&(s.operator!==">="||i.operator!=="<="))return null}for(let f of n){if(s&&!Td(f,String(s),r)||i&&!Td(f,String(i),r))return null;for(let h of e)if(!Td(f,String(h),r))return!1;return!0}let a,c,l,u,d=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1,p=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1;d&&d.prerelease.length===1&&i.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(let f of e){if(u=u||f.operator===">"||f.operator===">=",l=l||f.operator==="<"||f.operator==="<=",s){if(p&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===p.major&&f.semver.minor===p.minor&&f.semver.patch===p.patch&&(p=!1),f.operator===">"||f.operator===">="){if(a=yV(s,f,r),a===f&&a!==s)return!1}else if(s.operator===">="&&!Td(s.semver,String(f),r))return!1}if(i){if(d&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===d.major&&f.semver.minor===d.minor&&f.semver.patch===d.patch&&(d=!1),f.operator==="<"||f.operator==="<="){if(c=_V(i,f,r),c===f&&c!==i)return!1}else if(i.operator==="<="&&!Td(i.semver,String(f),r))return!1}if(!f.operator&&(i||s)&&o!==0)return!1}return!(s&&l&&!i&&o!==0||i&&u&&!s&&o!==0||p||d)},yV=(t,e,r)=>{if(!t)return e;let n=j$(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},_V=(t,e,r)=>{if(!t)return e;let n=j$(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};vV.exports=Fve});var TV=E((GMe,SV)=>{"use strict";var q$=bl(),bV=_d(),Vve=fr(),EV=$$(),zve=ba(),Hve=KU(),Gve=YU(),Wve=ZU(),Kve=rB(),Jve=sB(),Yve=oB(),Xve=cB(),Qve=uB(),Zve=Tn(),ewe=pB(),twe=gB(),rwe=ey(),nwe=wB(),swe=EB(),iwe=wd(),owe=ty(),awe=O$(),cwe=P$(),lwe=ry(),uwe=ny(),fwe=x$(),dwe=CB(),hwe=bd(),pwe=Rn(),mwe=Sd(),gwe=GB(),ywe=KB(),_we=YB(),vwe=ZB(),wwe=tV(),bwe=oy(),Ewe=aV(),Swe=lV(),Twe=dV(),Rwe=pV(),$we=wV();SV.exports={parse:zve,valid:Hve,clean:Gve,inc:Wve,diff:Kve,major:Jve,minor:Yve,patch:Xve,prerelease:Qve,compare:Zve,rcompare:ewe,compareLoose:twe,compareBuild:rwe,sort:nwe,rsort:swe,gt:iwe,lt:owe,eq:awe,neq:cwe,gte:lwe,lte:uwe,cmp:fwe,coerce:dwe,Comparator:hwe,Range:pwe,satisfies:mwe,toComparators:gwe,maxSatisfying:ywe,minSatisfying:_we,minVersion:vwe,validRange:wwe,outside:bwe,gtr:Ewe,ltr:Swe,intersects:Twe,simplifyRange:Rwe,subset:$we,SemVer:Vve,re:q$.re,src:q$.src,tokens:q$.t,SEMVER_SPEC_VERSION:bV.SEMVER_SPEC_VERSION,RELEASE_TYPES:bV.RELEASE_TYPES,compareIdentifiers:EV.compareIdentifiers,rcompareIdentifiers:EV.rcompareIdentifiers}});var z$=E((WMe,V$)=>{"use strict";var L$=TV(),U$=require("assert"),B$=Symbol.for("registered-plugin"),{kTestInternals:Owe}=Nt(),{exist:Pwe,existReply:xwe,existRequest:Nwe}=Su(),{FST_ERR_PLUGIN_VERSION_MISMATCH:Cwe,FST_ERR_PLUGIN_NOT_PRESENT_IN_INSTANCE:Iwe,FST_ERR_PLUGIN_INVALID_ASYNC_HANDLER:Awe}=zt(),kwe=/-(?:rc|pre|alpha).+$/u;function Rd(t){return t[Symbol.for("plugin-meta")]}function RV(t){let e=$V(t);if(e)return e;let r=require.cache;if(r){let n=Object.keys(r);for(let s=0;s<n.length;s++){let i=n[s];if(r[i].exports===t)return i}}return t.name?t.name:null}function Dwe(t){return t.toString().split(`
`,2).map(e=>e.trim()).join(" -- ")}function $V(t){return t[Symbol.for("fastify.display-name")]}function OV(t){return!!t[Symbol.for("skip-override")]}function PV(t){let e=Rd(t);if(!e)return;let r=e.dependencies;r&&(U$(Array.isArray(r),"The dependencies should be an array of strings"),r.forEach(n=>{U$(this[B$].indexOf(n)>-1,`The dependency '${n}' of plugin '${e.name}' is not registered`)}))}function xV(t){let e=Rd(t);if(!e)return;let{decorators:r,name:n}=e;r&&(r.fastify&&F$(this,"Fastify",r.fastify,n),r.reply&&F$(this,"Reply",r.reply,n),r.request&&F$(this,"Request",r.request,n))}var Mwe={Fastify:Pwe,Request:Nwe,Reply:xwe};function F$(t,e,r,n){U$(Array.isArray(r),"The decorators should be an array of strings"),r.forEach(s=>{let i=typeof n=="string"?` required by '${n}'`:"";if(!Mwe[e].call(t,s))throw new Iwe(s,i,e)})}function jwe(t){let e=Rd(t);if(e?.fastify==null)return;let r=e.fastify,n=kwe.test(this.version);if(!(n===!0&&L$.gt(this.version,L$.coerce(r))===!0)&&r&&L$.satisfies(this.version,r,{includePrerelease:n})===!1)throw new Cwe(e.name,r,this.version)}function qwe(t){let e=Rd(t);if(!e)return;let r=e.name;if(r)return this[B$].push(r),r}function Lwe(t,e){if(t.constructor.name==="AsyncFunction"&&t.length===3)throw new Awe(e)}function Fwe(t){let e=qwe.call(this,t)||RV(t);return Lwe.call(this,t,e),jwe.call(this,t),xV.call(this,t),PV.call(this,t),OV(t)}V$.exports={getPluginName:RV,getFuncPreview:Dwe,kRegisteredPlugins:B$,getDisplayName:$V,registerPlugin:Fwe};V$.exports[Owe]={shouldSkipOverride:OV,getMeta:Rd,checkDecorators:xV,checkDependencies:PV}});var ay=E((KMe,NV)=>{"use strict";function Uwe(t,e){let r=e||Vwe();return t?zwe(t,r):r}function Bwe(t,e){return t.genReqId(e)}function Vwe(){let e=0;return function(){return e=e+1&2147483647,`req-${e.toString(36)}`}}function zwe(t,e){return function(r){return r.headers[t]||e(r)}}NV.exports={getGenReqId:Bwe,reqIdGenFactory:Uwe}});var G$=E((JMe,AV)=>{"use strict";var CV=12,Hwe=0,H$=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,7,7,7,7,7,7,7,7,7,7,7,7,8,7,7,10,9,9,9,11,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,24,36,48,60,72,84,96,0,12,12,12,0,0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,0,0,0,0,0,24,24,24,0,0,0,0,0,0,0,0,0,24,24,0,0,0,0,0,0,0,0,0,0,48,48,48,0,0,0,0,0,0,0,0,0,0,48,48,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,0,0,0,127,63,63,63,0,31,15,15,15,7,7,7];function Gwe(t){var e=t.indexOf("%");if(e===-1)return t;for(var r=t.length,n="",s=0,i=0,o=e,a=CV;e>-1&&e<r;){var c=IV(t[e+1],4),l=IV(t[e+2],0),u=c|l,d=H$[u];if(a=H$[256+a+d],i=i<<6|u&H$[364+d],a===CV)n+=t.slice(s,o),n+=i<=65535?String.fromCharCode(i):String.fromCharCode(55232+(i>>10),56320+(i&1023)),i=0,s=e+3,e=o=t.indexOf("%",s);else{if(a===Hwe)return null;if(e+=3,e<r&&t.charCodeAt(e)===37)continue;return null}}return n+t.slice(s)}var Wwe={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};function IV(t,e){var r=Wwe[t];return r===void 0?255:r<<e}AV.exports=Gwe});var qV=E((YMe,jV)=>{"use strict";var kV=G$(),DV=/\+/g,MV=function(){};MV.prototype=Object.create(null);function Kwe(t){let e=new MV;if(typeof t!="string")return e;let r=t.length,n="",s="",i=-1,o=-1,a=!1,c=!1,l=!1,u=!1,d=!1,p=0;for(let f=0;f<r+1;f++)if(p=f!==r?t.charCodeAt(f):38,p===38){if(d=o>i,d||(o=f),n=t.slice(i+1,o),d||n.length>0){l&&(n=n.replace(DV," ")),a&&(n=kV(n)||n),d&&(s=t.slice(o+1,f),u&&(s=s.replace(DV," ")),c&&(s=kV(s)||s));let h=e[n];h===void 0?e[n]=s:h.pop?h.push(s):e[n]=[h,s]}s="",i=f,o=f,a=!1,c=!1,l=!1,u=!1}else p===61?o<=i?o=f:c=!0:p===43?o>i?u=!0:l=!0:p===37&&(o>i?c=!0:a=!0);return e}jV.exports=Kwe});var FV=E((XMe,LV)=>{var Is=Array.from({length:256},(t,e)=>"%"+((e<16?"0":"")+e.toString(16)).toUpperCase()),Jwe=new Int8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,1,1,0,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,0]);function Ywe(t){let e=t.length;if(e===0)return"";let r="",n=0,s=0;e:for(;s<e;s++){let i=t.charCodeAt(s);for(;i<128;){if(Jwe[i]!==1&&(n<s&&(r+=t.slice(n,s)),n=s+1,r+=Is[i]),++s===e)break e;i=t.charCodeAt(s)}if(n<s&&(r+=t.slice(n,s)),i<2048){n=s+1,r+=Is[192|i>>6]+Is[128|i&63];continue}if(i<55296||i>=57344){n=s+1,r+=Is[224|i>>12]+Is[128|i>>6&63]+Is[128|i&63];continue}if(++s,s>=e)throw new Error("URI malformed");let o=t.charCodeAt(s)&1023;n=s+1,i=65536+((i&1023)<<10|o),r+=Is[240|i>>18]+Is[128|i>>12&63]+Is[128|i>>6&63]+Is[128|i&63]}return n===0?t:n<e?r+t.slice(n):r}LV.exports={encodeString:Ywe}});var VV=E((QMe,BV)=>{"use strict";var{encodeString:W$}=FV();function UV(t){let e=typeof t;return e==="string"?W$(t):e==="bigint"?t.toString():e==="boolean"?t?"true":"false":e==="number"&&Number.isFinite(t)?t<1e21?""+t:W$(""+t):""}function Xwe(t){let e="";if(t===null||typeof t!="object")return e;let r="&",n=Object.keys(t),s=n.length,i=0;for(let o=0;o<s;o++){let a=n[o],c=t[a],l=W$(a)+"=";if(o&&(e+=r),Array.isArray(c)){i=c.length;for(let u=0;u<i;u++)u&&(e+=r),e+=l,e+=UV(c[u])}else e+=l,e+=UV(c)}return e}BV.exports=Xwe});var WV=E((ZMe,$d)=>{"use strict";var zV=qV(),HV=VV(),GV={parse:zV,stringify:HV};$d.exports=GV;$d.exports.default=GV;$d.exports.parse=zV;$d.exports.stringify=HV});var JV=E(KV=>{"use strict";Object.defineProperty(KV,"__esModule",{value:!0})});var YV=E(Od=>{"use strict";Object.defineProperty(Od,"__esModule",{value:!0});Od.types=void 0;var Qwe;(function(t){t[t.ROOT=0]="ROOT",t[t.GROUP=1]="GROUP",t[t.POSITION=2]="POSITION",t[t.SET=3]="SET",t[t.RANGE=4]="RANGE",t[t.REPETITION=5]="REPETITION",t[t.REFERENCE=6]="REFERENCE",t[t.CHAR=7]="CHAR"})(Qwe=Od.types||(Od.types={}))});var QV=E(XV=>{"use strict";Object.defineProperty(XV,"__esModule",{value:!0})});var yi=E(gi=>{"use strict";var Zwe=gi&&gi.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),K$=gi&&gi.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Zwe(e,t,r)};Object.defineProperty(gi,"__esModule",{value:!0});K$(JV(),gi);K$(YV(),gi);K$(QV(),gi)});var cy=E(dr=>{"use strict";Object.defineProperty(dr,"__esModule",{value:!0});dr.anyChar=dr.notWhitespace=dr.whitespace=dr.notInts=dr.ints=dr.notWords=dr.words=void 0;var Ue=yi(),ZV=()=>[{type:Ue.types.RANGE,from:48,to:57}],ez=()=>[{type:Ue.types.CHAR,value:95},{type:Ue.types.RANGE,from:97,to:122},{type:Ue.types.RANGE,from:65,to:90},{type:Ue.types.RANGE,from:48,to:57}],tz=()=>[{type:Ue.types.CHAR,value:9},{type:Ue.types.CHAR,value:10},{type:Ue.types.CHAR,value:11},{type:Ue.types.CHAR,value:12},{type:Ue.types.CHAR,value:13},{type:Ue.types.CHAR,value:32},{type:Ue.types.CHAR,value:160},{type:Ue.types.CHAR,value:5760},{type:Ue.types.RANGE,from:8192,to:8202},{type:Ue.types.CHAR,value:8232},{type:Ue.types.CHAR,value:8233},{type:Ue.types.CHAR,value:8239},{type:Ue.types.CHAR,value:8287},{type:Ue.types.CHAR,value:12288},{type:Ue.types.CHAR,value:65279}],ebe=()=>[{type:Ue.types.CHAR,value:10},{type:Ue.types.CHAR,value:13},{type:Ue.types.CHAR,value:8232},{type:Ue.types.CHAR,value:8233}];dr.words=()=>({type:Ue.types.SET,set:ez(),not:!1});dr.notWords=()=>({type:Ue.types.SET,set:ez(),not:!0});dr.ints=()=>({type:Ue.types.SET,set:ZV(),not:!1});dr.notInts=()=>({type:Ue.types.SET,set:ZV(),not:!0});dr.whitespace=()=>({type:Ue.types.SET,set:tz(),not:!1});dr.notWhitespace=()=>({type:Ue.types.SET,set:tz(),not:!0});dr.anyChar=()=>({type:Ue.types.SET,set:ebe(),not:!0})});var nz=E($n=>{"use strict";var tbe=$n&&$n.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),rbe=$n&&$n.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),nbe=$n&&$n.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&tbe(e,t,r);return rbe(e,t),e};Object.defineProperty($n,"__esModule",{value:!0});$n.tokenizeClass=$n.strToChars=void 0;var rz=yi(),Tl=nbe(cy()),sbe="@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^ ?";$n.strToChars=t=>{let e=/(\[\\b\])|(\\)?\\(?:u([A-F0-9]{4})|x([A-F0-9]{2})|c([@A-Z[\\\]^?])|([0tnvfr]))/g;return t.replace(e,(r,n,s,i,o,a,c)=>{if(s)return r;let l=n?8:i?parseInt(i,16):o?parseInt(o,16):a?sbe.indexOf(a):{0:0,t:9,n:10,v:11,f:12,r:13}[c],u=String.fromCharCode(l);return/[[\]{}^$.|?*+()]/.test(u)?`\\${u}`:u})};$n.tokenizeClass=(t,e)=>{var r,n,s,i,o,a,c;let l=[],u,d,p=/\\(?:(w)|(d)|(s)|(W)|(D)|(S))|((?:(?:\\)(.)|([^\]\\]))-(((?:\\)])|(((?:\\)?([^\]])))))|(\])|(?:\\)?([^])/g;for(;(u=p.exec(t))!==null;){let f=(c=(a=(o=(i=(s=(n=(r=u[1]&&Tl.words())!==null&&r!==void 0?r:u[2]&&Tl.ints())!==null&&n!==void 0?n:u[3]&&Tl.whitespace())!==null&&s!==void 0?s:u[4]&&Tl.notWords())!==null&&i!==void 0?i:u[5]&&Tl.notInts())!==null&&o!==void 0?o:u[6]&&Tl.notWhitespace())!==null&&a!==void 0?a:u[7]&&{type:rz.types.RANGE,from:(u[8]||u[9]).charCodeAt(0),to:(d=u[10]).charCodeAt(d.length-1)})!==null&&c!==void 0?c:(d=u[16])&&{type:rz.types.CHAR,value:d.charCodeAt(0)};if(f)l.push(f);else return[l,p.lastIndex]}throw new SyntaxError(`Invalid regular expression: /${e}/: Unterminated character class`)}});var J$=E(As=>{"use strict";var ibe=As&&As.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),obe=As&&As.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),oz=As&&As.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&ibe(e,t,r);return obe(e,t),e};Object.defineProperty(As,"__esModule",{value:!0});As.tokenizer=void 0;var sz=oz(nz()),Qt=yi(),Sa=oz(cy()),abe=/^[a-zA-Z_$]$/i,cbe=/^[a-zA-Z0-9_$]$/i,iz=/\d/;As.tokenizer=t=>{let e=0,r,n={type:Qt.types.ROOT,stack:[]},s=n,i=n.stack,o=[],a=[],c=0,l=d=>{throw new SyntaxError(`Invalid regular expression: /${t}/: Nothing to repeat at column ${d-1}`)},u=sz.strToChars(t);for(;e<u.length;)switch(r=u[e++]){case"\\":if(e===u.length)throw new SyntaxError(`Invalid regular expression: /${t}/: \\ at end of pattern`);switch(r=u[e++]){case"b":i.push({type:Qt.types.POSITION,value:"b"});break;case"B":i.push({type:Qt.types.POSITION,value:"B"});break;case"w":i.push(Sa.words());break;case"W":i.push(Sa.notWords());break;case"d":i.push(Sa.ints());break;case"D":i.push(Sa.notInts());break;case"s":i.push(Sa.whitespace());break;case"S":i.push(Sa.notWhitespace());break;default:if(iz.test(r)){let d=r;for(;e<u.length&&iz.test(u[e]);)d+=u[e++];let p=parseInt(d,10),f={type:Qt.types.REFERENCE,value:p};i.push(f),a.push({reference:f,stack:i,index:i.length-1})}else i.push({type:Qt.types.CHAR,value:r.charCodeAt(0)})}break;case"^":i.push({type:Qt.types.POSITION,value:"^"});break;case"$":i.push({type:Qt.types.POSITION,value:"$"});break;case"[":{let d;u[e]==="^"?(d=!0,e++):d=!1;let p=sz.tokenizeClass(u.slice(e),t);e+=p[1],i.push({type:Qt.types.SET,set:p[0],not:d});break}case".":i.push(Sa.anyChar());break;case"(":{let d={type:Qt.types.GROUP,stack:[],remember:!0};if(u[e]==="?")if(r=u[e+1],e+=2,r==="=")d.followedBy=!0,d.remember=!1;else if(r==="!")d.notFollowedBy=!0,d.remember=!1;else if(r==="<"){let p="";if(abe.test(u[e]))p+=u[e],e++;else throw new SyntaxError(`Invalid regular expression: /${t}/: Invalid capture group name, character '${u[e]}' after '<' at column ${e+1}`);for(;e<u.length&&cbe.test(u[e]);)p+=u[e],e++;if(!p)throw new SyntaxError(`Invalid regular expression: /${t}/: Invalid capture group name, character '${u[e]}' after '<' at column ${e+1}`);if(u[e]!==">")throw new SyntaxError(`Invalid regular expression: /${t}/: Unclosed capture group name, expected '>', found '${u[e]}' at column ${e+1}`);d.name=p,e++}else if(r===":")d.remember=!1;else throw new SyntaxError(`Invalid regular expression: /${t}/: Invalid group, character '${r}' after '?' at column ${e-1}`);else c+=1;i.push(d),o.push(s),s=d,i=d.stack;break}case")":if(o.length===0)throw new SyntaxError(`Invalid regular expression: /${t}/: Unmatched ) at column ${e-1}`);s=o.pop(),i=s.options?s.options[s.options.length-1]:s.stack;break;case"|":{s.options||(s.options=[s.stack],delete s.stack);let d=[];s.options.push(d),i=d;break}case"{":{let d=/^(\d+)(,(\d+)?)?\}/.exec(u.slice(e)),p,f;d!==null?(i.length===0&&l(e),p=parseInt(d[1],10),f=d[2]?d[3]?parseInt(d[3],10):1/0:p,e+=d[0].length,i.push({type:Qt.types.REPETITION,min:p,max:f,value:i.pop()})):i.push({type:Qt.types.CHAR,value:123});break}case"?":i.length===0&&l(e),i.push({type:Qt.types.REPETITION,min:0,max:1,value:i.pop()});break;case"+":i.length===0&&l(e),i.push({type:Qt.types.REPETITION,min:1,max:1/0,value:i.pop()});break;case"*":i.length===0&&l(e),i.push({type:Qt.types.REPETITION,min:0,max:1/0,value:i.pop()});break;default:i.push({type:Qt.types.CHAR,value:r.charCodeAt(0)})}if(o.length!==0)throw new SyntaxError(`Invalid regular expression: /${t}/: Unterminated group`);return lbe(a,c),n};function lbe(t,e){for(let r of t.reverse())if(e<r.reference.value){r.reference.type=Qt.types.CHAR;let n=r.reference.value.toString();if(r.reference.value=parseInt(n,8),!/^[0-7]+$/.test(n)){let s=0;for(;n[s]!=="8"&&n[s]!=="9";)s+=1;if(s===0?(r.reference.value=n.charCodeAt(0),s+=1):r.reference.value=parseInt(n.slice(0,s),8),n.length>s){let i=r.stack.splice(r.index+1);for(let o of n.slice(s))r.stack.push({type:Qt.types.CHAR,value:o.charCodeAt(0)});r.stack.push(...i)}}}}});var cz=E(hr=>{"use strict";var ube=hr&&hr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),fbe=hr&&hr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),dbe=hr&&hr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&ube(e,t,r);return fbe(e,t),e};Object.defineProperty(hr,"__esModule",{value:!0});hr.NOTANYCHAR=hr.WHITESPACE=hr.WORDS=hr.INTS=void 0;var ly=dbe(cy()),az=yi();function uy(t){let e={},r=0;for(let n of t)n.type===az.types.CHAR&&(e[n.value]=!0),n.type===az.types.RANGE&&(e[`${n.from}-${n.to}`]=!0),r+=1;return{lookup:()=>Object.assign({},e),len:r}}hr.INTS=uy(ly.ints().set);hr.WORDS=uy(ly.words().set);hr.WHITESPACE=uy(ly.whitespace().set);hr.NOTANYCHAR=uy(ly.anyChar().set)});var uz=E(On=>{"use strict";var hbe=On&&On.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),pbe=On&&On.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),mbe=On&&On.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&hbe(e,t,r);return pbe(e,t),e};Object.defineProperty(On,"__esModule",{value:!0});On.writeSetTokens=On.setChar=void 0;var py=yi(),fy=mbe(cz());function hy(t){return t===94?"\\^":t===92?"\\\\":t===93?"\\]":t===45?"\\-":String.fromCharCode(t)}On.setChar=hy;function dy(t,{lookup:e,len:r}){if(r!==t.length)return!1;let n=e();for(let s of t){if(s.type===py.types.SET)return!1;let i=s.type===py.types.CHAR?s.value:`${s.from}-${s.to}`;if(n[i])n[i]=!1;else return!1}return!0}function lz(t,e=!1){if(dy(t.set,fy.INTS))return t.not?"\\D":"\\d";if(dy(t.set,fy.WORDS))return t.not?"\\W":"\\w";if(t.not&&dy(t.set,fy.NOTANYCHAR))return".";if(dy(t.set,fy.WHITESPACE))return t.not?"\\S":"\\s";let r="";for(let s=0;s<t.set.length;s++){let i=t.set[s];r+=gbe(i)}let n=`${t.not?"^":""}${r}`;return e?n:`[${n}]`}On.writeSetTokens=lz;function gbe(t){return t.type===py.types.CHAR?hy(t.value):t.type===py.types.RANGE?`${hy(t.from)}-${hy(t.to)}`:lz(t,!0)}});var X$=E(Rl=>{"use strict";Object.defineProperty(Rl,"__esModule",{value:!0});Rl.reconstruct=void 0;var lo=yi(),Y$=uz(),fz=t=>t.map(Rl.reconstruct).join(""),dz=t=>{if("options"in t)return t.options.map(fz).join("|");if("stack"in t)return fz(t.stack);throw new Error("options or stack must be Root or Group token")};Rl.reconstruct=t=>{switch(t.type){case lo.types.ROOT:return dz(t);case lo.types.CHAR:{let e=String.fromCharCode(t.value);return(/[[\\{}$^.|?*+()]/.test(e)?"\\":"")+e}case lo.types.POSITION:return t.value==="^"||t.value==="$"?t.value:`\\${t.value}`;case lo.types.REFERENCE:return`\\${t.value}`;case lo.types.SET:return Y$.writeSetTokens(t);case lo.types.GROUP:return`(${t.name?`?<${t.name}>`:t.remember?"":t.followedBy?"?=":t.notFollowedBy?"?!":"?:"}${dz(t)})`;case lo.types.REPETITION:{let{min:e,max:r}=t,n;return e===0&&r===1?n="?":e===1&&r===1/0?n="+":e===0&&r===1/0?n="*":r===1/0?n=`{${e},}`:e===r?n=`{${e}}`:n=`{${e},${r}}`,`${Rl.reconstruct(t.value)}${n}`}case lo.types.RANGE:return`${Y$.setChar(t.from)}-${Y$.setChar(t.to)}`;default:throw new Error(`Invalid token type ${t}`)}}});var mz=E((Pn,my)=>{"use strict";var ybe=Pn&&Pn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Q$=Pn&&Pn.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&ybe(e,t,r)};Object.defineProperty(Pn,"__esModule",{value:!0});Pn.types=void 0;var hz=yi();Object.defineProperty(Pn,"types",{enumerable:!0,get:function(){return hz.types}});Q$(J$(),Pn);Q$(X$(),Pn);var pz=J$(),_be=X$();Q$(yi(),Pn);Pn.default=pz.tokenizer;my.exports=pz.tokenizer;my.exports.types=hz.types;my.exports.reconstruct=_be.reconstruct});var yz=E((uje,gy)=>{"use strict";var gz=mz(),vbe=gz.types;function Z$(t,e){e||(e={});let r=e.limit===void 0?25:e.limit;wbe(t)?t=t.source:typeof t!="string"&&(t=String(t));try{t=gz(t)}catch{return!1}let n=0;return function s(i,o){let a,c,l;if(i.type===vbe.REPETITION&&(o++,n++,o>1||n>r))return!1;if(i.options){for(a=0,l=i.options.length;a<l;a++)if(c=s({stack:i.options[a]},o),!c)return!1}let u=i.stack||i.value?.stack;if(!u)return!0;for(a=0;a<u.length;a++)if(c=s(u[a],o),!c)return!1;return!0}(t,0)}function wbe(t){return{}.toString.call(t)==="[object RegExp]"}gy.exports=Z$;gy.exports.default=Z$;gy.exports.safeRegex=Z$});var yy=E((fje,_z)=>{"use strict";_z.exports={name:"__fmw_internal_strategy_merged_tree_http_method__",storage:function(){let t=new Map;return{get:e=>t.get(e)||null,set:(e,r)=>{t.set(e,r)}}},deriveConstraint:t=>t.method,mustMatchWhenDerived:!0}});var Rz=E((dje,Tz)=>{"use strict";var vz=Zs(),wz=yy(),bz=Symbol("treeData");function Ez(t,e=""){let r="",n=Object.keys(t);for(let s=0;s<n.length;s++){let i=n[s],o=t[i],a=s===n.length-1,c=a?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ",l=a?"    ":"\u2502   ",d=(o[bz]||"").replaceAll(`
`,`
`+e+l);r+=e+c+i+d+`
`,r+=Ez(o,e+l)}return r}function bbe(t){let e=t.name||"";return e=e.replace("bound","").trim(),e=(e||"anonymous")+"()",e}function Sz(t){return Array.isArray(t)?t.map(e=>Sz(e)):typeof t=="symbol"?t.toString():typeof t=="function"?bbe(t):t}function Ebe(t,e){if(!e.includeMeta)return{};let r=e.buildPrettyMeta(t),n={},s=e.includeMeta;Array.isArray(s)||(s=Reflect.ownKeys(r));for(let i of s){if(!Object.prototype.hasOwnProperty.call(r,i))continue;let o=i.toString(),a=r[i];if(a!=null){let c=JSON.stringify(Sz(a));n[o]=c}}return n}function Sbe(t){let e="";for(let[r,n]of Object.entries(t))e+=`
\u2022 (${r}) ${n}`;return e}function Tbe(t){let e={...t.opts.constraints},r=e[wz.name];return delete e[wz.name],{...t,method:r,opts:{constraints:e}}}function Rbe(t){let e=` (${t.method})`,r=t.opts.constraints||{};return Object.keys(r).length!==0&&(e+=" "+JSON.stringify(r)),e+=Sbe(t.metaData),e}function $be(t){return t.reduce((e,r)=>{for(let n of e)if(vz(r.opts.constraints,n.opts.constraints)&&vz(r.metaData,n.metaData))return n.method+=", "+r.method,e;return e.push(r),e},[])}function Obe(t,e,r){let n=t.routes;return r.method===void 0&&(n=n.map(Tbe)),n=n.map(s=>(s.metaData=Ebe(s,r),s)),r.method===void 0&&(n=$be(n)),n.map(Rbe).join(`
${e}`)}function _y(t,e,r,n){if((t.isLeafNode||n.commonPrefix!==!1)&&(r=r||"(empty root node)",e=e[r]={},t.isLeafNode&&(e[bz]=Obe(t,r,n)),r=""),t.staticChildren)for(let s of Object.values(t.staticChildren))_y(s,e,r+s.prefix,n);if(t.parametricChildren)for(let s of Object.values(t.parametricChildren)){let i=Array.from(s.nodePaths).join("|");_y(s,e,r+i,n)}t.wildcardChild&&_y(t.wildcardChild,e,"*",n)}function Pbe(t,e){let r={};return _y(t,r,t.prefix,e),Ez(r)}Tz.exports={prettyPrintTree:Pbe}});var Pz=E((hje,Oz)=>{"use strict";var $z=function(){};$z.prototype=Object.create(null);Oz.exports={NullObject:$z}});var Nz=E((pje,xz)=>{"use strict";var{NullObject:xbe}=Pz(),Nbe=yy(),e1=class{constructor(){this.unconstrainedHandler=null,this.constraints=[],this.handlers=[],this.constrainedHandlerStores=null}getMatchingHandler(e){return e===void 0?this.unconstrainedHandler:this._getHandlerMatchingConstraints(e)}addHandler(e,r){let n=r.params,s=r.opts.constraints||{},i={params:n,constraints:s,handler:r.handler,store:r.store||null,_createParamsObject:this._compileCreateParamsObject(n)},o=Object.keys(s);o.length===0&&(this.unconstrainedHandler=i);for(let c of o)this.constraints.includes(c)||(c==="version"?this.constraints.unshift(c):this.constraints.push(c));let a=o.includes(Nbe.name);if(!a&&this.handlers.length>=31)throw new Error("find-my-way supports a maximum of 31 route handlers per node when there are constraints, limit reached");this.handlers.push(i),this.handlers.sort((c,l)=>Object.keys(c.constraints).length-Object.keys(l.constraints).length),a||this._compileGetHandlerMatchingConstraints(e,s)}_compileCreateParamsObject(e){let r=[];r.push("const fn = function _createParamsObject (paramsArray) {"),r.push("const params = new NullObject()");for(let n=0;n<e.length;n++)r.push(`params['${e[n]}'] = paramsArray[${n}]`);return r.push("return params"),r.push("}"),r.push("return fn"),new Function("NullObject",r.join(`
`))(xbe)}_getHandlerMatchingConstraints(){return null}_buildConstraintStore(e,r){for(let n=0;n<this.handlers.length;n++){let i=this.handlers[n].constraints[r];if(i!==void 0){let o=e.get(i)||0;o|=1<<n,e.set(i,o)}}}_constrainedIndexBitmask(e){let r=0;for(let n=0;n<this.handlers.length;n++)this.handlers[n].constraints[e]!==void 0&&(r|=1<<n);return~r}_compileGetHandlerMatchingConstraints(e){this.constrainedHandlerStores={};for(let n of this.constraints){let s=e.newStoreForConstraint(n);this.constrainedHandlerStores[n]=s,this._buildConstraintStore(s,n)}let r=[];r.push(`
    let candidates = ${(1<<this.handlers.length)-1}
    let mask, matches
    `);for(let n of this.constraints){r.push(`
      mask = ${this._constrainedIndexBitmask(n)}
      value = derivedConstraints.${n}
      `);let i=e.strategies[n].mustMatchWhenDerived?"matches":"(matches | mask)";r.push(`
      if (value === undefined) {
        candidates &= mask
      } else {
        matches = this.constrainedHandlerStores.${n}.get(value) || 0
        candidates &= ${i}
      }
      if (candidates === 0) return null;
      `)}for(let n in e.strategies)e.strategies[n].mustMatchWhenDerived&&!this.constraints.includes(n)&&r.push(`if (derivedConstraints.${n} !== undefined) return null`);r.push("return this.handlers[Math.floor(Math.log2(candidates))]"),this._getHandlerMatchingConstraints=new Function("derivedConstraints",r.join(`
`))}};xz.exports=e1});var Iz=E((mje,Cz)=>{"use strict";var Cbe=Nz(),Sy={STATIC:0,PARAMETRIC:1,WILDCARD:2},vy=class{constructor(){this.isLeafNode=!1,this.routes=null,this.handlerStorage=null}addRoute(e,r){this.routes===null&&(this.routes=[]),this.handlerStorage===null&&(this.handlerStorage=new Cbe),this.isLeafNode=!0,this.routes.push(e),this.handlerStorage.addHandler(r,e)}},wy=class extends vy{constructor(){super(),this.staticChildren={}}findStaticMatchingChild(e,r){let n=this.staticChildren[e.charAt(r)];return n===void 0||!n.matchPrefix(e,r)?null:n}getStaticChild(e,r=0){if(e.length===r)return this;let n=this.findStaticMatchingChild(e,r);return n?n.getStaticChild(e,r+n.prefix.length):null}createStaticChild(e){if(e.length===0)return this;let r=this.staticChildren[e.charAt(0)];if(r){let s=1;for(;s<r.prefix.length;s++)if(e.charCodeAt(s)!==r.prefix.charCodeAt(s)){r=r.split(this,s);break}return r.createStaticChild(e.slice(s))}let n=e.charAt(0);return this.staticChildren[n]=new $l(e),this.staticChildren[n]}},$l=class extends wy{constructor(e){super(),this.prefix=e,this.wildcardChild=null,this.parametricChildren=[],this.kind=Sy.STATIC,this._compilePrefixMatch()}getParametricChild(e){let r=e&&e.source,n=this.parametricChildren.find(s=>(s.regex&&s.regex.source)===r);return n||null}createParametricChild(e,r,n){let s=this.getParametricChild(e);return s?(s.nodePaths.add(n),s):(s=new by(e,r,n),this.parametricChildren.push(s),this.parametricChildren.sort((i,o)=>i.isRegex?o.isRegex?i.staticSuffix===null?1:o.staticSuffix===null?-1:o.staticSuffix.endsWith(i.staticSuffix)?1:i.staticSuffix.endsWith(o.staticSuffix)?-1:0:-1:1),s)}getWildcardChild(){return this.wildcardChild}createWildcardChild(){return this.wildcardChild=this.getWildcardChild()||new Ey,this.wildcardChild}split(e,r){let n=this.prefix.slice(0,r),s=this.prefix.slice(r);this.prefix=s,this._compilePrefixMatch();let i=new $l(n);return i.staticChildren[s.charAt(0)]=this,e.staticChildren[n.charAt(0)]=i,i}getNextNode(e,r,n,s){let i=this.findStaticMatchingChild(e,r),o=0;if(i===null){if(this.parametricChildren.length===0)return this.wildcardChild;i=this.parametricChildren[0],o=1}this.wildcardChild!==null&&n.push({paramsCount:s,brotherPathIndex:r,brotherNode:this.wildcardChild});for(let a=this.parametricChildren.length-1;a>=o;a--)n.push({paramsCount:s,brotherPathIndex:r,brotherNode:this.parametricChildren[a]});return i}_compilePrefixMatch(){if(this.prefix.length===1){this.matchPrefix=()=>!0;return}let e=[];for(let r=1;r<this.prefix.length;r++){let n=this.prefix.charCodeAt(r);e.push(`path.charCodeAt(i + ${r}) === ${n}`)}this.matchPrefix=new Function("path","i",`return ${e.join(" && ")}`)}},by=class extends wy{constructor(e,r,n){super(),this.isRegex=!!e,this.regex=e||null,this.staticSuffix=r||null,this.kind=Sy.PARAMETRIC,this.nodePaths=new Set([n])}getNextNode(e,r){return this.findStaticMatchingChild(e,r)}},Ey=class extends vy{constructor(){super(),this.kind=Sy.WILDCARD}getNextNode(){return null}};Cz.exports={StaticNode:$l,ParametricNode:by,WildcardNode:Ey,NODE_TYPES:Sy}});var kz=E((gje,Az)=>{"use strict";var Ibe=require("assert");function Pd(){if(!(this instanceof Pd))return new Pd;this.store=new Map,this.maxMajor=0,this.maxMinors={},this.maxPatches={}}Pd.prototype.set=function(t,e){if(typeof t!="string")throw new TypeError("Version should be a string");let[r,n,s]=t.split(".",3);if(isNaN(r))throw new TypeError("Major version must be a numeric value");return r=Number(r),n=Number(n)||0,s=Number(s)||0,r>=this.maxMajor&&(this.maxMajor=r,this.store.set("x",e),this.store.set("*",e),this.store.set("x.x",e),this.store.set("x.x.x",e)),n>=(this.maxMinors[r]||0)&&(this.maxMinors[r]=n,this.store.set(`${r}.x`,e),this.store.set(`${r}.x.x`,e)),s>=(this.maxPatches[`${r}.${n}`]||0)&&(this.maxPatches[`${r}.${n}`]=s,this.store.set(`${r}.${n}.x`,e)),this.store.set(`${r}.${n}.${s}`,e),this};Pd.prototype.get=function(t){return this.store.get(t)};Az.exports={name:"version",mustMatchWhenDerived:!0,storage:Pd,validate(t){Ibe(typeof t=="string","Version should be a string")}}});var Mz=E((yje,Dz)=>{"use strict";var Abe=require("assert");function kbe(){let t=new Map,e=[];return{get:r=>{let n=t.get(r);if(n)return n;for(let s of e)if(s.host.test(r))return s.value},set:(r,n)=>{r instanceof RegExp?e.push({host:r,value:n}):t.set(r,n)}}}Dz.exports={name:"host",mustMatchWhenDerived:!1,storage:kbe,validate(t){Abe(typeof t=="string"||Object.prototype.toString.call(t)==="[object RegExp]","Host should be a string or a RegExp")}}});var qz=E((_je,jz)=>{"use strict";var Dbe=kz(),Mbe=Mz(),t1=require("assert"),r1=class{constructor(e){if(this.strategies={version:Dbe,host:Mbe},this.strategiesInUse=new Set,this.asyncStrategiesInUse=new Set,e)for(let r of Object.values(e))this.addConstraintStrategy(r)}isStrategyUsed(e){return this.strategiesInUse.has(e)||this.asyncStrategiesInUse.has(e)}hasConstraintStrategy(e){let r=this.strategies[e];return r!==void 0?r.isCustom||this.isStrategyUsed(e):!1}addConstraintStrategy(e){if(t1(typeof e.name=="string"&&e.name!=="","strategy.name is required."),t1(e.storage&&typeof e.storage=="function","strategy.storage function is required."),t1(e.deriveConstraint&&typeof e.deriveConstraint=="function","strategy.deriveConstraint function is required."),this.strategies[e.name]&&this.strategies[e.name].isCustom)throw new Error(`There already exists a custom constraint with the name ${e.name}.`);if(this.isStrategyUsed(e.name))throw new Error(`There already exists a route with ${e.name} constraint.`);e.isCustom=!0,e.isAsync=e.deriveConstraint.length===3,this.strategies[e.name]=e,e.mustMatchWhenDerived&&this.noteUsage({[e.name]:e})}deriveConstraints(e,r,n){let s=this.deriveSyncConstraints(e,r);if(n===void 0)return s;this.deriveAsyncConstraints(s,e,r,n)}deriveSyncConstraints(e,r){}noteUsage(e){if(e){let r=this.strategiesInUse.size;for(let n in e)this.strategies[n].isAsync?this.asyncStrategiesInUse.add(n):this.strategiesInUse.add(n);r!==this.strategiesInUse.size&&this._buildDeriveConstraints()}}newStoreForConstraint(e){if(!this.strategies[e])throw new Error(`No strategy registered for constraint key ${e}`);return this.strategies[e].storage()}validateConstraints(e){for(let r in e){let n=e[r];if(typeof n>"u")throw new Error("Can't pass an undefined constraint value, must pass null or no key at all");let s=this.strategies[r];if(!s)throw new Error(`No strategy registered for constraint key ${r}`);s.validate&&s.validate(n)}}deriveAsyncConstraints(e,r,n,s){let i=this.asyncStrategiesInUse.size;if(i===0){s(null,e);return}e=e||{};for(let o of this.asyncStrategiesInUse)this.strategies[o].deriveConstraint(r,n,(c,l)=>{if(c!==null){s(c);return}e[o]=l,--i===0&&s(null,e)})}_buildDeriveConstraints(){if(this.strategiesInUse.size===0)return;let e=["return {"];for(let r of this.strategiesInUse){let n=this.strategies[r];n.isCustom?e.push(`  ${n.name}: this.strategies.${r}.deriveConstraint(req, ctx),`):r==="version"?e.push("   version: req.headers['accept-version'],"):e.push("   host: req.headers.host || req.headers[':authority'],")}e.push("}"),this.deriveSyncConstraints=new Function("req","ctx",e.join(`
`)).bind(this)}};jz.exports=r1});var Fz=E((vje,Lz)=>{"use strict";var jbe=["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","QUERY","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE"];Lz.exports=jbe});var Vz=E((wje,Bz)=>{"use strict";function Uz(t,e){return t===50?e===53?"%":e===51?"#":e===52?"$":e===54?"&":e===66||e===98?"+":e===67||e===99?",":e===70||e===102?"/":null:t===51?e===65||e===97?":":e===66||e===98?";":e===68||e===100?"=":e===70||e===102?"?":null:t===52&&e===48?"@":null}function qbe(t,e){let r=!1,n=!1,s="";for(let o=1;o<t.length;o++){let a=t.charCodeAt(o);if(a===37){let c=t.charCodeAt(o+1),l=t.charCodeAt(o+2);Uz(c,l)===null?r=!0:(n=!0,c===50&&l===53&&(r=!0,t=t.slice(0,o+1)+"25"+t.slice(o+1),o+=2),o+=2)}else if(a===63||a===35||a===59&&e){s=t.slice(o+1),t=t.slice(0,o);break}}return{path:r?decodeURI(t):t,querystring:s,shouldDecodeParam:n}}function Lbe(t){let e=t.indexOf("%");if(e===-1)return t;let r="",n=e;for(let s=e;s<t.length;s++)if(t.charCodeAt(s)===37){let i=t.charCodeAt(s+1),o=t.charCodeAt(s+2),a=Uz(i,o);r+=t.slice(n,s)+a,n=s+3}return t.slice(0,e)+r+t.slice(n)}Bz.exports={safeDecodeURI:qbe,safeDecodeURIComponent:Lbe}});var a1=E((bje,Zz)=>{"use strict";var St=require("assert"),Fbe=WV(),Pl=yz(),s1=Zs(),{prettyPrintTree:Ube}=Rz(),{StaticNode:zz,NODE_TYPES:Hz}=Iz(),Bbe=qz(),Ol=Fz(),n1=yy(),{safeDecodeURI:Vbe,safeDecodeURIComponent:Gz}=Vz(),Wz=/^https?:\/\/.*?\//,Ta=/(\/:[^/()]*?)\?(\/?)/,Kz=/[.*+?^${}()|[\]\\]/g,Jz=/\/\/+/g;if(!Pl(Wz))throw new Error("the FULL_PATH_REGEXP is not safe, update this module");if(!Pl(Ta))throw new Error("the OPTIONAL_PARAM_REGEXP is not safe, update this module");if(!Pl(Kz))throw new Error("the ESCAPE_REGEXP is not safe, update this module");if(!Pl(Jz))throw new Error("the REMOVE_DUPLICATE_SLASHES_REGEXP is not safe, update this module");function gt(t){if(!(this instanceof gt))return new gt(t);t=t||{},this._opts=t,t.defaultRoute?(St(typeof t.defaultRoute=="function","The default route must be a function"),this.defaultRoute=t.defaultRoute):this.defaultRoute=null,t.onBadUrl?(St(typeof t.onBadUrl=="function","The bad url handler must be a function"),this.onBadUrl=t.onBadUrl):this.onBadUrl=null,t.buildPrettyMeta?(St(typeof t.buildPrettyMeta=="function","buildPrettyMeta must be a function"),this.buildPrettyMeta=t.buildPrettyMeta):this.buildPrettyMeta=zbe,t.querystringParser?(St(typeof t.querystringParser=="function","querystringParser must be a function"),this.querystringParser=t.querystringParser):this.querystringParser=e=>e.length===0?{}:Fbe.parse(e),this.caseSensitive=t.caseSensitive===void 0?!0:t.caseSensitive,this.ignoreTrailingSlash=t.ignoreTrailingSlash||!1,this.ignoreDuplicateSlashes=t.ignoreDuplicateSlashes||!1,this.maxParamLength=t.maxParamLength||100,this.allowUnsafeRegex=t.allowUnsafeRegex||!1,this.constrainer=new Bbe(t.constraints),this.useSemicolonDelimiter=t.useSemicolonDelimiter||!1,this.routes=[],this.trees={}}gt.prototype.on=function(e,r,n,s,i){typeof n=="function"&&(s!==void 0&&(i=s),s=n,n={}),St(typeof r=="string","Path should be a string"),St(r.length>0,"The path could not be empty"),St(r[0]==="/"||r[0]==="*","The first character of a path should be `/` or `*`"),St(typeof s=="function","Handler should be a function");let o=r.match(Ta);if(o){St(r.length===o.index+o[0].length,"Optional Parameter needs to be the last parameter of the path");let l=r.replace(Ta,"$1$2"),u=r.replace(Ta,"$2")||"/";this.on(e,l,n,s,i),this.on(e,u,n,s,i);return}let a=r;this.ignoreDuplicateSlashes&&(r=i1(r)),this.ignoreTrailingSlash&&(r=o1(r));let c=Array.isArray(e)?e:[e];for(let l of c)St(typeof l=="string","Method should be a string"),St(Ol.includes(l),`Method '${l}' is not an http method.`),this._on(l,r,n,s,i,a)};gt.prototype._on=function(e,r,n,s,i){let o={};n.constraints!==void 0&&(St(typeof n.constraints=="object"&&n.constraints!==null,"Constraints should be an object"),Object.keys(n.constraints).length!==0&&(o=n.constraints)),this.constrainer.validateConstraints(o),this.constrainer.noteUsage(o),this.trees[e]===void 0&&(this.trees[e]=new zz("/"));let a=r;if(a==="*"&&this.trees[e].prefix.length!==0){let p=this.trees[e];this.trees[e]=new zz(""),this.trees[e].staticChildren["/"]=p}let c=this.trees[e],l=c.prefix.length,u=[];for(let p=0;p<=a.length;p++){if(a.charCodeAt(p)===58&&a.charCodeAt(p+1)===58){p++;continue}let f=a.charCodeAt(p)===58&&a.charCodeAt(p+1)!==58,h=a.charCodeAt(p)===42;if(f||h||p===a.length&&p!==l){let m=a.slice(l,p);this.caseSensitive||(m=m.toLowerCase()),m=m.replaceAll("::",":"),m=m.replaceAll("%","%25"),c=c.createStaticChild(m)}if(f){let m=!1,y=!0,g="",w=[],_=p+1;for(let v=_;;v++){let S=a.charCodeAt(v),$=S===40,T=S===45||S===46,O=S===47||v===a.length;if($||T||O){let R=a.slice(_,v);if(u.push(R),m=m||$||T,$){let N=Qz(a,v),C=a.slice(v,N+1);this.allowUnsafeRegex||St(Pl(new RegExp(C)),`The regex '${C}' is not safe!`),w.push(Xz(C)),v=N+1,y=!0}else w.push(y?"(.*?)":`(${g}|(?:(?!${g}).)*)`),y=!1;let P=v;for(;v<a.length;v++){let N=a.charCodeAt(v);if(N===47)break;if(N===58)if(a.charCodeAt(v+1)===58)v++;else break}let A=a.slice(P,v);if(A&&(A=A.replaceAll("::",":"),A=A.replaceAll("%","%25"),w.push(g=Yz(A))),_=v+1,O||a.charCodeAt(v)===47||v===a.length){let N=m?"()"+A:A,C=a.slice(p,v);a=a.slice(0,p+1)+N+a.slice(v),p+=N.length;let V=m?new RegExp("^"+w.join("")+"$"):null;c=c.createParametricChild(V,A||null,C),l=p+1;break}}}}else if(h&&(u.push("*"),c=c.createWildcardChild(),l=p+1,p!==a.length-1))throw new Error("Wildcard must be the last character in the route")}this.caseSensitive||(a=a.toLowerCase()),a==="*"&&(a="/*");for(let p of this.routes){let f=p.opts.constraints||{};if(p.method===e&&p.pattern===a&&s1(f,o))throw new Error(`Method '${e}' already declared for route '${a}' with constraints '${JSON.stringify(o)}'`)}let d={method:e,path:r,pattern:a,params:u,opts:n,handler:s,store:i};this.routes.push(d),c.addRoute(d,this.constrainer)};gt.prototype.hasRoute=function(e,r,n){return this.findRoute(e,r,n)!==null};gt.prototype.findRoute=function(e,r,n={}){if(this.trees[e]===void 0)return null;let s=r,i=this.trees[e],o=i.prefix.length,a=[];for(let c=0;c<=s.length;c++){if(s.charCodeAt(c)===58&&s.charCodeAt(c+1)===58){c++;continue}let l=s.charCodeAt(c)===58&&s.charCodeAt(c+1)!==58,u=s.charCodeAt(c)===42;if(l||u||c===s.length&&c!==o){let d=s.slice(o,c);if(this.caseSensitive||(d=d.toLowerCase()),d=d.replaceAll("::",":"),d=d.replaceAll("%","%25"),i=i.getStaticChild(d),i===null)return null}if(l){let d=!1,p=!0,f="",h=[],m=c+1;for(let y=m;;y++){let g=s.charCodeAt(y),w=g===40,_=g===45||g===46,v=g===47||y===s.length;if(w||_||v){let S=s.slice(m,y);if(a.push(S),d=d||w||_,w){let O=Qz(s,y),R=s.slice(y,O+1);this.allowUnsafeRegex||St(Pl(new RegExp(R)),`The regex '${R}' is not safe!`),h.push(Xz(R)),y=O+1,p=!1}else h.push(p?"(.*?)":`(${f}|(?:(?!${f}).)*)`),p=!1;let $=y;for(;y<s.length;y++){let O=s.charCodeAt(y);if(O===47)break;if(O===58)if(s.charCodeAt(y+1)===58)y++;else break}let T=s.slice($,y);if(T&&(T=T.replaceAll("::",":"),T=T.replaceAll("%","%25"),h.push(f=Yz(T))),m=y+1,v||s.charCodeAt(y)===47||y===s.length){let O=d?"()"+T:T,R=s.slice(c,y);s=s.slice(0,c+1)+O+s.slice(y),c+=O.length;let P=d?new RegExp("^"+h.join("")+"$"):null;if(i=i.getParametricChild(P,T||null,R),i===null)return null;o=c+1;break}}}}else if(u&&(a.push("*"),i=i.getWildcardChild(),o=c+1,c!==s.length-1))throw new Error("Wildcard must be the last character in the route")}this.caseSensitive||(s=s.toLowerCase());for(let c of this.routes){let l=c.opts.constraints||{};if(c.method===e&&c.pattern===s&&s1(l,n))return{handler:c.handler,store:c.store,params:c.params}}return null};gt.prototype.hasConstraintStrategy=function(t){return this.constrainer.hasConstraintStrategy(t)};gt.prototype.addConstraintStrategy=function(t){this.constrainer.addConstraintStrategy(t),this._rebuild(this.routes)};gt.prototype.reset=function(){this.trees={},this.routes=[]};gt.prototype.off=function(e,r,n){St(typeof r=="string","Path should be a string"),St(r.length>0,"The path could not be empty"),St(r[0]==="/"||r[0]==="*","The first character of a path should be `/` or `*`"),St(typeof n>"u"||typeof n=="object"&&!Array.isArray(n)&&n!==null,"Constraints should be an object or undefined.");let s=r.match(Ta);if(s){St(r.length===s.index+s[0].length,"Optional Parameter needs to be the last parameter of the path");let o=r.replace(Ta,"$1$2"),a=r.replace(Ta,"$2");this.off(e,o,n),this.off(e,a,n);return}this.ignoreDuplicateSlashes&&(r=i1(r)),this.ignoreTrailingSlash&&(r=o1(r));let i=Array.isArray(e)?e:[e];for(let o of i)this._off(o,r,n)};gt.prototype._off=function(e,r,n){St(typeof e=="string","Method should be a string"),St(Ol.includes(e),`Method '${e}' is not an http method.`);function s(c){return e!==c.method||r!==c.path}function i(c){return s(c)||!s1(n,c.opts.constraints||{})}let o=n?i:s,a=this.routes.filter(o);this._rebuild(a)};gt.prototype.lookup=function(e,r,n,s){if(typeof n=="function"&&(s=n,n=void 0),s===void 0){let i=this.constrainer.deriveConstraints(e,n),o=this.find(e.method,e.url,i);return this.callHandler(o,e,r,n)}this.constrainer.deriveConstraints(e,n,(i,o)=>{if(i!==null){s(i);return}try{let a=this.find(e.method,e.url,o),c=this.callHandler(a,e,r,n);s(null,c)}catch(a){s(a)}})};gt.prototype.callHandler=function(e,r,n,s){return e===null?this._defaultRoute(r,n,s):s===void 0?e.handler(r,n,e.params,e.store,e.searchParams):e.handler.call(s,r,n,e.params,e.store,e.searchParams)};gt.prototype.find=function(e,r,n){let s=this.trees[e];if(s===void 0)return null;r.charCodeAt(0)!==47&&(r=r.replace(Wz,"/")),this.ignoreDuplicateSlashes&&(r=i1(r));let i,o,a;try{i=Vbe(r,this.useSemicolonDelimiter),r=i.path,o=i.querystring,a=i.shouldDecodeParam}catch{return this._onBadUrl(r)}this.ignoreTrailingSlash&&(r=o1(r));let c=r;this.caseSensitive===!1&&(r=r.toLowerCase());let l=this.maxParamLength,u=s.prefix.length,d=[],p=r.length,f=[];for(;;){if(u===p&&s.isLeafNode){let g=s.handlerStorage.getMatchingHandler(n);if(g!==null)return{handler:g.handler,store:g.store,params:g._createParamsObject(d),searchParams:this.querystringParser(o)}}let h=s.getNextNode(r,u,f,d.length);if(h===null){if(f.length===0)return null;let g=f.pop();u=g.brotherPathIndex,d.splice(g.paramsCount),h=g.brotherNode}if(s=h,s.kind===Hz.STATIC){u+=s.prefix.length;continue}if(s.kind===Hz.WILDCARD){let g=c.slice(u);a&&(g=Gz(g)),d.push(g),u=p;continue}let m=c.indexOf("/",u);m===-1&&(m=p);let y=c.slice(u,m);if(a&&(y=Gz(y)),s.isRegex){let g=s.regex.exec(y);if(g===null)continue;for(let w=1;w<g.length;w++){let _=g[w];if(_.length>l)return null;d.push(_)}}else{if(y.length>l)return null;d.push(y)}u=m}};gt.prototype._rebuild=function(t){this.reset();for(let e of t){let{method:r,path:n,opts:s,handler:i,store:o}=e;this._on(r,n,s,i,o)}};gt.prototype._defaultRoute=function(t,e,r){if(this.defaultRoute!==null)return r===void 0?this.defaultRoute(t,e):this.defaultRoute.call(r,t,e);e.statusCode=404,e.end()};gt.prototype._onBadUrl=function(t){if(this.onBadUrl===null)return null;let e=this.onBadUrl;return{handler:(r,n,s)=>e(t,r,n),params:{},store:null}};gt.prototype.prettyPrint=function(t={}){let e=t.method;t.buildPrettyMeta=this.buildPrettyMeta.bind(this);let r=null;if(e===void 0){let{version:n,host:s,...i}=this.constrainer.strategies;i[n1.name]=n1;let o=new gt({...this._opts,constraints:i}),a=this.routes.map(c=>{let l={...c.opts.constraints,[n1.name]:c.method};return{...c,method:"MERGED",opts:{constraints:l}}});o._rebuild(a),r=o.trees.MERGED}else r=this.trees[e];return r==null?"(empty tree)":Ube(r,t)};for(let t in Ol){if(!Ol.hasOwnProperty(t))continue;let e=Ol[t],r=e.toLowerCase();gt.prototype[r]=function(n,s,i){return this.on(e,n,s,i)}}gt.prototype.all=function(t,e,r){this.on(Ol,t,e,r)};Zz.exports=gt;function Yz(t){return t.replace(Kz,"\\$&")}function i1(t){return t.indexOf("//")!==-1?t.replace(Jz,"/"):t}function o1(t){return t.length>1&&t.charCodeAt(t.length-1)===47?t.slice(0,-1):t}function Xz(t){return t.charCodeAt(1)===94&&(t=t.slice(0,1)+t.slice(2)),t.charCodeAt(t.length-2)===36&&(t=t.slice(0,t.length-2)+t.slice(t.length-1)),t}function Qz(t,e){let r=1;for(;e<t.length;){if(e++,t.charCodeAt(e)===92){e++;continue}if(t.charCodeAt(e)===41?r--:t.charCodeAt(e)===40&&r++,!r)return e}throw new TypeError('Invalid regexp expression in "'+t+'"')}function zbe(t){return t?t.store?Object.assign({},t.store):{}:{}}});var t4=E((Eje,e4)=>{"use strict";function c1(t,e,r,n){if(r===void 0){e.header("content-length","0"),n(null,null);return}if(typeof r.resume=="function"){r.on("error",i=>{e.log.error({err:i},"Error on Stream found for HEAD route")}),r.resume(),n(null,null);return}if(typeof r.getReader=="function"){r.cancel("Stream cancelled by HEAD route").catch(i=>{e.log.error({err:i},"Error on Stream found for HEAD route")}),n(null,null);return}let s=""+Buffer.byteLength(r);e.header("content-length",s),n(null,null)}function Hbe(t){return t==null?c1:Array.isArray(t)?[...t,c1]:[t,c1]}e4.exports={parseHeadOnSendHandlers:Hbe}});var _4=E((Sje,y4)=>{"use strict";var Gbe=a1(),Wbe=Up(),r4=tv(),{onRequestAbortHookRunner:Kbe,lifecycleHooks:n4,preParsingHookRunner:Jbe,onTimeoutHookRunner:Ybe,onRequestHookRunner:Xbe}=Ci(),{normalizeSchema:Qbe}=vu(),{parseHeadOnSendHandlers:Zbe}=t4(),{compileSchemasForValidation:eEe,compileSchemasForSerialization:tEe}=Y_(),{FST_ERR_SCH_VALIDATION_BUILD:rEe,FST_ERR_SCH_SERIALIZATION_BUILD:nEe,FST_ERR_DUPLICATED_ROUTE:sEe,FST_ERR_INVALID_URL:iEe,FST_ERR_HOOK_INVALID_HANDLER:s4,FST_ERR_ROUTE_OPTIONS_NOT_OBJ:oEe,FST_ERR_ROUTE_DUPLICATED_HANDLER:aEe,FST_ERR_ROUTE_HANDLER_NOT_FN:i4,FST_ERR_ROUTE_MISSING_HANDLER:cEe,FST_ERR_ROUTE_METHOD_NOT_SUPPORTED:lEe,FST_ERR_ROUTE_METHOD_INVALID:uEe,FST_ERR_ROUTE_BODY_VALIDATION_SCHEMA_NOT_SUPPORTED:fEe,FST_ERR_ROUTE_BODY_LIMIT_OPTION_NOT_INT:dEe,FST_ERR_HOOK_INVALID_ASYNC_HANDLER:l1}=zt(),{FSTDEP022:hEe}=oc(),{kRoutePrefix:pEe,kSupportedHTTPMethods:d1,kLogLevel:mEe,kLogSerializers:o4,kHooks:a4,kSchemaController:gEe,kOptions:c4,kReplySerializerDefault:u1,kReplyIsError:yEe,kRequestPayloadStream:_Ee,kDisableRequestLogging:vEe,kSchemaErrorFormatter:wEe,kErrorHandler:l4,kHasBeenDecorated:u4,kRequestAcceptVersion:f1,kRouteByFastify:bEe,kRouteContext:f4}=Nt(),{buildErrorHandler:EEe}=wu(),{createChildLogger:SEe}=_u(),{getGenReqId:TEe}=ay(),d4=["allowUnsafeRegex","buildPrettyMeta","caseSensitive","constraints","defaultRoute","ignoreDuplicateSlashes","ignoreTrailingSlash","maxParamLength","onBadUrl","querystringParser","useSemicolonDelimiter"];function REe(t){let e=Gbe(t.config),r,n,s,i,o,a,c,l,u,d,p,f,h=!1;return{setup(T,O){r=O.avvio,n=O.fourOhFour,i=O.hasLogger,o=O.setupResponseListeners,a=O.throwIfAlreadyStarted,s=T.logger,p=T.exposeHeadRoutes,c=T.disableRequestLogging,l=T.routerOptions.ignoreTrailingSlash,u=T.routerOptions.ignoreDuplicateSlashes,d=Object.hasOwn(T,"return503OnClosing")?T.return503OnClosing:!0,f=O.keepAliveConnections},routing:e.lookup.bind(e),route:S,hasRoute:_,prepareRoute:w,routeHandler:$,closeRoutes:()=>{h=!0},printRoutes:e.prettyPrint.bind(e),addConstraintStrategy:m,hasConstraintStrategy:y,isAsyncConstraint:g,findRoute:v};function m(T){return a("Cannot add constraint strategy!"),e.addConstraintStrategy(T)}function y(T){return e.hasConstraintStrategy(T)}function g(){return e.constrainer.asyncStrategiesInUse.size>0}function w({method:T,url:O,options:R,handler:P,isFastify:A}){if(typeof O!="string")throw new iEe(typeof O);if(!P&&typeof R=="function")P=R,R={};else if(P&&typeof P=="function"){if(Object.prototype.toString.call(R)!=="[object Object]")throw new oEe(T,O);if(R.handler)throw typeof R.handler=="function"?new aEe(T,O):new i4(T,O)}return R=Object.assign({},R,{method:T,url:O,path:O,handler:P||R&&R.handler}),S.call(this,{options:R,isFastify:A})}function _({options:T}){let O=T.method?.toUpperCase()??"";return e.hasRoute(O,T.url||"",T.constraints)}function v(T){let O=e.find(T.method,T.url||"",T.constraints);return O?{handler:O.handler,params:O.params,searchParams:O.searchParams}:null}function S({options:T,isFastify:O}){a("Cannot add route!");let R={...T},P=R.url||R.path||"";if(!R.handler)throw new cEe(R.method,P);if(R.errorHandler!==void 0&&typeof R.errorHandler!="function")throw new i4(R.method,P);g4(R.bodyLimit);let A=R.exposeHeadRoute??p,N=!1,C=!1;if(Array.isArray(R.method))for(let K=0;K<R.method.length;++K)R.method[K]=h4.call(this,R.method[K]),p4.call(this,R.method[K],P,R.schema),N=R.method.includes("GET"),C=R.method.includes("HEAD");else R.method=h4.call(this,R.method),p4.call(this,R.method,P,R.schema),N=R.method==="GET",C=R.method==="HEAD";let V=A&&N?{...T}:null,te=this[pEe];if(P==="/"&&te.length>0&&R.method!=="HEAD")switch(R.prefixTrailingSlash){case"slash":H.call(this,{path:P,isFastify:O});break;case"no-slash":H.call(this,{path:"",isFastify:O});break;case"both":default:H.call(this,{path:"",isFastify:O}),l!==!0&&(u!==!0||!te.endsWith("/"))&&H.call(this,{path:P,prefixing:!0,isFastify:O})}else P[0]==="/"&&te.endsWith("/")?H.call(this,{path:P.slice(1),isFastify:O}):H.call(this,{path:P,isFastify:O});return this;function H({path:K,prefixing:xt=!1,isFastify:Ar=!1}){let Y=te+K;if(R.url=Y,R.path=Y,R.routePath=K,R.prefix=te,R.logLevel=R.logLevel||this[mEe],(this[o4]||R.logSerializers)&&(R.logSerializers=Object.assign(Object.create(this[o4]),R.logSerializers)),R.attachValidation==null&&(R.attachValidation=!1),xt===!1)for(let x of this[a4].onRoute)x.call(this,R);for(let x of n4)if(R&&x in R){if(Array.isArray(R[x]))for(let D of R[x]){if(typeof D!="function")throw new s4(x,Object.prototype.toString.call(D));if(x==="onSend"||x==="preSerialization"||x==="onError"||x==="preParsing"){if(D.constructor.name==="AsyncFunction"&&D.length===4)throw new l1}else if(x==="onRequestAbort"){if(D.constructor.name==="AsyncFunction"&&D.length!==1)throw new l1}else if(D.constructor.name==="AsyncFunction"&&D.length===3)throw new l1}else if(R[x]!==void 0&&typeof R[x]!="function")throw new s4(x,Object.prototype.toString.call(R[x]))}let ls=R.constraints||{},xo={...R.config,url:Y,method:R.method},re=new Wbe({schema:R.schema,handler:R.handler.bind(this),config:xo,errorHandler:R.errorHandler,childLoggerFactory:R.childLoggerFactory,bodyLimit:R.bodyLimit,logLevel:R.logLevel,logSerializers:R.logSerializers,attachValidation:R.attachValidation,schemaErrorFormatter:R.schemaErrorFormatter,replySerializer:this[u1],validatorCompiler:R.validatorCompiler,serializerCompiler:R.serializerCompiler,exposeHeadRoute:A,prefixTrailingSlash:R.prefixTrailingSlash||"both",server:this,isFastify:Ar}),No=e.findRoute("HEAD",R.url,ls)!==null;try{e.on(R.method,R.url,{constraints:ls},$,re)}catch(x){if(!re[bEe])throw x.message.includes(`Method '${R.method}' already declared for route`)?new sEe(R.method,R.url):x}if(this.after((x,D)=>{re.errorHandler=R.errorHandler?EEe(this[l4],R.errorHandler):this[l4],re._parserOptions.limit=R.bodyLimit||null,re.logLevel=R.logLevel,re.logSerializers=R.logSerializers,re.attachValidation=R.attachValidation,re[u1]=this[u1],re.schemaErrorFormatter=R.schemaErrorFormatter||this[wEe]||re.schemaErrorFormatter,r.once("preReady",()=>{for(let z of n4){let B=this[a4][z].concat(R[z]||[]).map(lt=>lt.bind(this));re[z]=B.length?B:null}for(;!re.Request[u4]&&re.Request.parent;)re.Request=re.Request.parent;for(;!re.Reply[u4]&&re.Reply.parent;)re.Reply=re.Reply.parent;if(n.setContext(this,re),R.schema){re.schema=Qbe(re.schema,this.initialConfig);let z=this[gEe];!R.validatorCompiler&&(R.schema.body||R.schema.headers||R.schema.querystring||R.schema.params)&&z.setupValidator(this[c4]);try{let B=typeof R?.validatorCompiler=="function"||z.isCustomValidatorCompiler;eEe(re,R.validatorCompiler||z.validatorCompiler,B)}catch(B){throw new rEe(R.method,Y,B.message)}R.schema.response&&!R.serializerCompiler&&z.setupSerializer(this[c4]);try{tEe(re,R.serializerCompiler||z.serializerCompiler)}catch(B){throw new nEe(R.method,Y,B.message)}}}),D(x)}),A&&N&&!C&&!No){let x=Zbe(V.onSend);w.call(this,{method:"HEAD",url:K,options:{...V,onSend:x},isFastify:!0})}}}function $(T,O,R,P,A){let N=TEe(P.server,T),C={level:P.logLevel};P.logSerializers&&(C.serializers=P.logSerializers);let V=SEe(P,s,T,N,C);if(V[vEe]=c,h===!0&&(T.httpVersionMajor!==2&&O.setHeader("Connection","close"),d)){let xt={"Content-Type":"application/json","Content-Length":"80"};O.writeHead(503,xt),O.end('{"error":"Service Unavailable","message":"Service Unavailable","statusCode":503}'),V.info({res:{statusCode:503}},"request aborted - refusing to accept new requests as server is closing");return}String.prototype.toLowerCase.call(T.headers.connection||"")==="keep-alive"&&f.has(T.socket)===!1&&(f.add(T.socket),T.socket.on("close",xEe.bind({keepAliveConnections:f,socket:T.socket}))),T.headers[f1]!==void 0&&(T.headers["accept-version"]=T.headers[f1],T.headers[f1]=void 0);let H=new P.Request(N,R,T,A,V,P),K=new P.Reply(O,H,V);c===!1&&V.info({req:H},"incoming request"),(i===!0||P.onResponse!==null)&&o(K),P.onRequest!==null?Xbe(P.onRequest,H,K,m4):m4(null,H,K),P.onRequestAbort!==null&&T.on("close",()=>{T.aborted&&Kbe(P.onRequestAbort,H,$Ee.bind(null,K))}),P.onTimeout!==null&&(H.raw.socket._meta||H.raw.socket.on("timeout",OEe),H.raw.socket._meta={context:P,request:H,reply:K})}}function $Ee(t,e){e&&t.log.error({err:e},"onRequestAborted hook failed")}function OEe(){let{context:t,request:e,reply:r}=this._meta;Ybe(t.onTimeout,e,r,NEe)}function h4(t){if(typeof t!="string")throw new uEe;if(t=t.toUpperCase(),!this[d1].bodyless.has(t)&&!this[d1].bodywith.has(t))throw new lEe(t);return t}function p4(t,e,r){if(this[d1].bodyless.has(t)&&r?.body)throw new fEe(t,e)}function g4(t){if(t!==void 0&&(!Number.isInteger(t)||t<=0))throw new dEe(t)}function m4(t,e,r){if(r.sent!==!0){if(t!=null){r[yEe]=!0,r.send(t);return}e[_Ee]=e.raw,e[f4].preParsing!==null?Jbe(e[f4].preParsing,e,r,r4.bind(e.server)):r4.call(e.server,null,e,r)}}function PEe(t,e){let r=t.routerOptions||Object.create(null),n=d4.filter(s=>Object.hasOwn(t,s));n.length>0&&hEe(n.join(", "));for(let s of d4)Object.hasOwn(r,s)||(r[s]=t[s]??e[s]);return r}function xEe(){this.keepAliveConnections.delete(this.socket)}function NEe(){}y4.exports={buildRouting:REe,validateBodyLimitOption:g4,buildRouterOptions:PEe}});var R4=E((Tje,T4)=>{"use strict";var CEe=a1(),v4=kp(),w4=Fp(),IEe=Up(),{kRoutePrefix:AEe,kCanSetNotFoundHandler:xd,kFourOhFourLevelInstance:Nd,kFourOhFourContext:ks,kHooks:kEe,kErrorHandler:b4}=Nt(),{lifecycleHooks:DEe}=Ci(),{buildErrorHandler:MEe}=wu(),{FST_ERR_NOT_FOUND:jEe}=zt(),{createChildLogger:E4}=_u(),{getGenReqId:S4}=ay();function qEe(t){let{logger:e,disableRequestLogging:r}=t,n=CEe({onBadUrl:a(),defaultRoute:d}),s=null;return{router:n,setNotFoundHandler:l,setContext:c,arrange404:i};function i(p){p[Nd]=p,p[xd]=!0,n.onBadUrl=n.onBadUrl.bind(p),n.defaultRoute=n.defaultRoute.bind(p)}function o(p,f){let{url:h,method:m}=p.raw,y=`Route ${m}:${h} not found`;r||p.log.info(y),f.code(404).send({message:y,error:"Not Found",statusCode:404})}function a(){return function(f,h,m){let y=this[Nd][ks],g=S4(y.server,h),w=E4(y,e,h,g),_=new w4(g,null,h,null,w,y),v=new v4(m,_,w);s(_,v)}}function c(p,f){let h=Object.assign({},p[ks]);h.onSend=f.onSend,f[ks]=h}function l(p,f,h,m){this[xd]===void 0&&(this[xd]=!0),this[ks]===void 0&&(this[ks]=null);let y=this,g=this[AEe]||"/";if(this[xd]===!1)throw new Error(`Not found handler already set for Fastify instance with prefix: '${g}'`);typeof p=="object"&&(p.preHandler&&(Array.isArray(p.preHandler)?p.preHandler=p.preHandler.map(w=>w.bind(y)):p.preHandler=p.preHandler.bind(y)),p.preValidation&&(Array.isArray(p.preValidation)?p.preValidation=p.preValidation.map(w=>w.bind(y)):p.preValidation=p.preValidation.bind(y))),typeof p=="function"&&(f=p,p=void 0),p=p||{},f?(this[Nd][xd]=!1,f=f.bind(this),s=f):(f=o,s=o),this.after((w,_)=>{u.call(this,g,p,f,h,m),_(w)})}function u(p,f,h,m,y){let g=new IEe({schema:f.schema,handler:h,config:f.config||{},server:this});if(m.once("preReady",()=>{let w=this[ks];for(let _ of DEe){let v=this[kEe][_].concat(f[_]||[]).map(S=>S.bind(this));w[_]=v.length?v:null}w.errorHandler=f.errorHandler?MEe(this[b4],f.errorHandler):this[b4]}),this[ks]!==null&&p==="/"){Object.assign(this[ks],g);return}this[Nd][ks]=g,n.all(p+(p.endsWith("/")?"*":"/*"),y,g),n.all(p,y,g)}function d(p,f){let h=this[Nd][ks],m=S4(h.server,p),y=E4(h,e,p,m);y.info({req:p},"incoming request");let g=new w4(m,null,p,null,y,h),w=new v4(f,g,y);g.log.warn("the default handler for 404 did not catch this, this is likely a fastify bug, please report it"),g.log.warn(n.prettyPrint()),w.code(404).send(new jEe)}}T4.exports=qEe});var $4=E((Rje,Ty)=>{"use strict";Ty.exports=Pe;Ty.exports.default=Pe;var LEe={type:"object",additionalProperties:!1,properties:{connectionTimeout:{type:"integer",default:0},keepAliveTimeout:{type:"integer",default:72e3},forceCloseConnections:{oneOf:[{type:"string",pattern:"idle"},{type:"boolean"}]},maxRequestsPerSocket:{type:"integer",default:0,nullable:!0},requestTimeout:{type:"integer",default:0},bodyLimit:{type:"integer",default:1048576},caseSensitive:{type:"boolean",default:!0},allowUnsafeRegex:{type:"boolean",default:!1},http2:{type:"boolean"},https:{if:{not:{oneOf:[{type:"boolean"},{type:"null"},{type:"object",additionalProperties:!1,required:["allowHTTP1"],properties:{allowHTTP1:{type:"boolean"}}}]}},then:{setDefaultValue:!0}},ignoreTrailingSlash:{type:"boolean",default:!1},ignoreDuplicateSlashes:{type:"boolean",default:!1},disableRequestLogging:{type:"boolean",default:!1},maxParamLength:{type:"integer",default:100},onProtoPoisoning:{type:"string",default:"error"},onConstructorPoisoning:{type:"string",default:"error"},pluginTimeout:{type:"integer",default:1e4},requestIdHeader:{anyOf:[{type:"boolean"},{type:"string"}],default:!1},requestIdLogLabel:{type:"string",default:"reqId"},http2SessionTimeout:{type:"integer",default:72e3},exposeHeadRoutes:{type:"boolean",default:!0},useSemicolonDelimiter:{type:"boolean",default:!1},routerOptions:{type:"object",additionalProperties:!1,properties:{ignoreTrailingSlash:{type:"boolean",default:!1},ignoreDuplicateSlashes:{type:"boolean",default:!1},maxParamLength:{type:"integer",default:100},allowUnsafeRegex:{type:"boolean",default:!1},useSemicolonDelimiter:{type:"boolean",default:!1}}},constraints:{type:"object",additionalProperties:{type:"object",required:["name","storage","validate","deriveConstraint"],additionalProperties:!0,properties:{name:{type:"string"},storage:{},validate:{},deriveConstraint:{}}}}}},FEe=Object.prototype.hasOwnProperty,UEe=new RegExp("idle","u");function Pe(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(o===0)if(t&&typeof t=="object"&&!Array.isArray(t)){t.connectionTimeout===void 0&&(t.connectionTimeout=0),t.keepAliveTimeout===void 0&&(t.keepAliveTimeout=72e3),t.maxRequestsPerSocket===void 0&&(t.maxRequestsPerSocket=0),t.requestTimeout===void 0&&(t.requestTimeout=0),t.bodyLimit===void 0&&(t.bodyLimit=1048576),t.caseSensitive===void 0&&(t.caseSensitive=!0),t.allowUnsafeRegex===void 0&&(t.allowUnsafeRegex=!1),t.ignoreTrailingSlash===void 0&&(t.ignoreTrailingSlash=!1),t.ignoreDuplicateSlashes===void 0&&(t.ignoreDuplicateSlashes=!1),t.disableRequestLogging===void 0&&(t.disableRequestLogging=!1),t.maxParamLength===void 0&&(t.maxParamLength=100),t.onProtoPoisoning===void 0&&(t.onProtoPoisoning="error"),t.onConstructorPoisoning===void 0&&(t.onConstructorPoisoning="error"),t.pluginTimeout===void 0&&(t.pluginTimeout=1e4),t.requestIdHeader===void 0&&(t.requestIdHeader=!1),t.requestIdLogLabel===void 0&&(t.requestIdLogLabel="reqId"),t.http2SessionTimeout===void 0&&(t.http2SessionTimeout=72e3),t.exposeHeadRoutes===void 0&&(t.exposeHeadRoutes=!0),t.useSemicolonDelimiter===void 0&&(t.useSemicolonDelimiter=!1);let m=o;for(let y in t)FEe.call(LEe.properties,y)||delete t[y];if(m===o){let y=t.connectionTimeout,g=o;if(!(typeof y=="number"&&!(y%1)&&!isNaN(y)&&isFinite(y))){let w=typeof y,_;if(_===void 0)if(w==="boolean"||y===null||w==="string"&&y&&y==+y&&!(y%1))_=+y;else return Pe.errors=[{instancePath:e+"/connectionTimeout",schemaPath:"#/properties/connectionTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;_!==void 0&&(y=_,t!==void 0&&(t.connectionTimeout=_))}var a=g===o;if(a){let w=t.keepAliveTimeout,_=o;if(!(typeof w=="number"&&!(w%1)&&!isNaN(w)&&isFinite(w))){let S=typeof w,$;if($===void 0)if(S==="boolean"||w===null||S==="string"&&w&&w==+w&&!(w%1))$=+w;else return Pe.errors=[{instancePath:e+"/keepAliveTimeout",schemaPath:"#/properties/keepAliveTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;$!==void 0&&(w=$,t!==void 0&&(t.keepAliveTimeout=$))}var a=_===o;if(a){if(t.forceCloseConnections!==void 0){let S=t.forceCloseConnections,$=o,T=o,O=!1,R=null,P=o;if(typeof S!="string"){let C=typeof S,V;if(V===void 0)if(C=="number"||C=="boolean")V=""+S;else if(S===null)V="";else{let te={instancePath:e+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[te]:i.push(te),o++}V!==void 0&&(S=V,t!==void 0&&(t.forceCloseConnections=V))}if(o===P&&typeof S=="string"&&!UEe.test(S)){let C={instancePath:e+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf/0/pattern",keyword:"pattern",params:{pattern:"idle"},message:'must match pattern "idle"'};i===null?i=[C]:i.push(C),o++}var c=P===o;c&&(O=!0,R=0);let A=o;if(typeof S!="boolean"){let C;if(C===void 0)if(S==="false"||S===0||S===null)C=!1;else if(S==="true"||S===1)C=!0;else{let V={instancePath:e+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf/1/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};i===null?i=[V]:i.push(V),o++}C!==void 0&&(S=C,t!==void 0&&(t.forceCloseConnections=C))}var c=A===o;if(c&&O?(O=!1,R=[R,1]):c&&(O=!0,R=1),O)o=T,i!==null&&(T?i.length=T:i=null);else{let C={instancePath:e+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf",keyword:"oneOf",params:{passingSchemas:R},message:"must match exactly one schema in oneOf"};return i===null?i=[C]:i.push(C),o++,Pe.errors=i,!1}var a=$===o}else var a=!0;if(a){let S=t.maxRequestsPerSocket,$=o;if(!(typeof S=="number"&&!(S%1)&&!isNaN(S)&&isFinite(S))&&S!==null){let O=typeof S,R;if(R===void 0)if(O==="boolean"||S===null||O==="string"&&S&&S==+S&&!(S%1))R=+S;else if(S===""||S===0||S===!1)R=null;else return Pe.errors=[{instancePath:e+"/maxRequestsPerSocket",schemaPath:"#/properties/maxRequestsPerSocket/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;R!==void 0&&(S=R,t!==void 0&&(t.maxRequestsPerSocket=R))}var a=$===o;if(a){let O=t.requestTimeout,R=o;if(!(typeof O=="number"&&!(O%1)&&!isNaN(O)&&isFinite(O))){let A=typeof O,N;if(N===void 0)if(A==="boolean"||O===null||A==="string"&&O&&O==+O&&!(O%1))N=+O;else return Pe.errors=[{instancePath:e+"/requestTimeout",schemaPath:"#/properties/requestTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;N!==void 0&&(O=N,t!==void 0&&(t.requestTimeout=N))}var a=R===o;if(a){let A=t.bodyLimit,N=o;if(!(typeof A=="number"&&!(A%1)&&!isNaN(A)&&isFinite(A))){let V=typeof A,te;if(te===void 0)if(V==="boolean"||A===null||V==="string"&&A&&A==+A&&!(A%1))te=+A;else return Pe.errors=[{instancePath:e+"/bodyLimit",schemaPath:"#/properties/bodyLimit/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;te!==void 0&&(A=te,t!==void 0&&(t.bodyLimit=te))}var a=N===o;if(a){let V=t.caseSensitive,te=o;if(typeof V!="boolean"){let K;if(K===void 0)if(V==="false"||V===0||V===null)K=!1;else if(V==="true"||V===1)K=!0;else return Pe.errors=[{instancePath:e+"/caseSensitive",schemaPath:"#/properties/caseSensitive/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;K!==void 0&&(V=K,t!==void 0&&(t.caseSensitive=K))}var a=te===o;if(a){let K=t.allowUnsafeRegex,xt=o;if(typeof K!="boolean"){let Y;if(Y===void 0)if(K==="false"||K===0||K===null)Y=!1;else if(K==="true"||K===1)Y=!0;else return Pe.errors=[{instancePath:e+"/allowUnsafeRegex",schemaPath:"#/properties/allowUnsafeRegex/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;Y!==void 0&&(K=Y,t!==void 0&&(t.allowUnsafeRegex=Y))}var a=xt===o;if(a){if(t.http2!==void 0){let Y=t.http2,ls=o;if(typeof Y!="boolean"){let re;if(re===void 0)if(Y==="false"||Y===0||Y===null)re=!1;else if(Y==="true"||Y===1)re=!0;else return Pe.errors=[{instancePath:e+"/http2",schemaPath:"#/properties/http2/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;re!==void 0&&(Y=re,t!==void 0&&(t.http2=re))}var a=ls===o}else var a=!0;if(a){if(t.https!==void 0){let Y=t.https,ls=o,xo=o,re=!0,Xa=o,No=o,x=o,D=o,z=!1,B=null,lt=o;if(typeof Y!="boolean"){let ce;if(ce===void 0)if(Y==="false"||Y===0||Y===null)ce=!1;else if(Y==="true"||Y===1)ce=!0;else{let Mn={};i===null?i=[Mn]:i.push(Mn),o++}ce!==void 0&&(Y=ce,t!==void 0&&(t.https=ce))}var l=lt===o;l&&(z=!0,B=0);let ft=o;if(Y!==null){let ce;if(ce===void 0)if(Y===""||Y===0||Y===!1)ce=null;else{let Mn={};i===null?i=[Mn]:i.push(Mn),o++}ce!==void 0&&(Y=ce,t!==void 0&&(t.https=ce))}var l=ft===o;if(l&&z)z=!1,B=[B,1];else{l&&(z=!0,B=1);let ce=o;if(o===ce)if(Y&&typeof Y=="object"&&!Array.isArray(Y)){let vr;if(Y.allowHTTP1===void 0&&(vr="allowHTTP1")){let en={};i===null?i=[en]:i.push(en),o++}else{let en=o;for(let us in Y)us!=="allowHTTP1"&&delete Y[us];if(en===o&&Y.allowHTTP1!==void 0){let us=Y.allowHTTP1;if(typeof us!="boolean"){let pt;if(pt===void 0)if(us==="false"||us===0||us===null)pt=!1;else if(us==="true"||us===1)pt=!0;else{let jn={};i===null?i=[jn]:i.push(jn),o++}pt!==void 0&&(us=pt,Y!==void 0&&(Y.allowHTTP1=pt))}}}}else{let vr={};i===null?i=[vr]:i.push(vr),o++}var l=ce===o;l&&z?(z=!1,B=[B,2]):l&&(z=!0,B=2)}if(z)o=D,i!==null&&(D?i.length=D:i=null);else{let ce={};i===null?i=[ce]:i.push(ce),o++}var u=x===o;if(u){let ce={};i===null?i=[ce]:i.push(ce),o++}else o=No,i!==null&&(No?i.length=No:i=null);var d=Xa===o;if(o=xo,i!==null&&(xo?i.length=xo:i=null),d){let ce=o;t.https=!0;var d=ce===o;re=d}if(!re){let ce={instancePath:e+"/https",schemaPath:"#/properties/https/if",keyword:"if",params:{failingKeyword:"then"},message:'must match "then" schema'};return i===null?i=[ce]:i.push(ce),o++,Pe.errors=i,!1}var a=ls===o}else var a=!0;if(a){let Y=t.ignoreTrailingSlash,ls=o;if(typeof Y!="boolean"){let re;if(re===void 0)if(Y==="false"||Y===0||Y===null)re=!1;else if(Y==="true"||Y===1)re=!0;else return Pe.errors=[{instancePath:e+"/ignoreTrailingSlash",schemaPath:"#/properties/ignoreTrailingSlash/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;re!==void 0&&(Y=re,t!==void 0&&(t.ignoreTrailingSlash=re))}var a=ls===o;if(a){let re=t.ignoreDuplicateSlashes,Xa=o;if(typeof re!="boolean"){let x;if(x===void 0)if(re==="false"||re===0||re===null)x=!1;else if(re==="true"||re===1)x=!0;else return Pe.errors=[{instancePath:e+"/ignoreDuplicateSlashes",schemaPath:"#/properties/ignoreDuplicateSlashes/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;x!==void 0&&(re=x,t!==void 0&&(t.ignoreDuplicateSlashes=x))}var a=Xa===o;if(a){let x=t.disableRequestLogging,D=o;if(typeof x!="boolean"){let B;if(B===void 0)if(x==="false"||x===0||x===null)B=!1;else if(x==="true"||x===1)B=!0;else return Pe.errors=[{instancePath:e+"/disableRequestLogging",schemaPath:"#/properties/disableRequestLogging/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;B!==void 0&&(x=B,t!==void 0&&(t.disableRequestLogging=B))}var a=D===o;if(a){let B=t.maxParamLength,lt=o;if(!(typeof B=="number"&&!(B%1)&&!isNaN(B)&&isFinite(B))){let It=typeof B,ce;if(ce===void 0)if(It==="boolean"||B===null||It==="string"&&B&&B==+B&&!(B%1))ce=+B;else return Pe.errors=[{instancePath:e+"/maxParamLength",schemaPath:"#/properties/maxParamLength/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;ce!==void 0&&(B=ce,t!==void 0&&(t.maxParamLength=ce))}var a=lt===o;if(a){let It=t.onProtoPoisoning,ce=o;if(typeof It!="string"){let vr=typeof It,en;if(en===void 0)if(vr=="number"||vr=="boolean")en=""+It;else if(It===null)en="";else return Pe.errors=[{instancePath:e+"/onProtoPoisoning",schemaPath:"#/properties/onProtoPoisoning/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;en!==void 0&&(It=en,t!==void 0&&(t.onProtoPoisoning=en))}var a=ce===o;if(a){let vr=t.onConstructorPoisoning,en=o;if(typeof vr!="string"){let pt=typeof vr,jn;if(jn===void 0)if(pt=="number"||pt=="boolean")jn=""+vr;else if(vr===null)jn="";else return Pe.errors=[{instancePath:e+"/onConstructorPoisoning",schemaPath:"#/properties/onConstructorPoisoning/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;jn!==void 0&&(vr=jn,t!==void 0&&(t.onConstructorPoisoning=jn))}var a=en===o;if(a){let pt=t.pluginTimeout,jn=o;if(!(typeof pt=="number"&&!(pt%1)&&!isNaN(pt)&&isFinite(pt))){let wr=typeof pt,Co;if(Co===void 0)if(wr==="boolean"||pt===null||wr==="string"&&pt&&pt==+pt&&!(pt%1))Co=+pt;else return Pe.errors=[{instancePath:e+"/pluginTimeout",schemaPath:"#/properties/pluginTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;Co!==void 0&&(pt=Co,t!==void 0&&(t.pluginTimeout=Co))}var a=jn===o;if(a){let wr=t.requestIdHeader,Co=o,k_=o,Qa=!1,C8=o;if(typeof wr!="boolean"){let Bt;if(Bt===void 0)if(wr==="false"||wr===0||wr===null)Bt=!1;else if(wr==="true"||wr===1)Bt=!0;else{let Fh={instancePath:e+"/requestIdHeader",schemaPath:"#/properties/requestIdHeader/anyOf/0/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};i===null?i=[Fh]:i.push(Fh),o++}Bt!==void 0&&(wr=Bt,t!==void 0&&(t.requestIdHeader=Bt))}var p=C8===o;if(Qa=Qa||p,!Qa){let Bt=o;if(typeof wr!="string"){let KP=typeof wr,mt;if(mt===void 0)if(KP=="number"||KP=="boolean")mt=""+wr;else if(wr===null)mt="";else{let qn={instancePath:e+"/requestIdHeader",schemaPath:"#/properties/requestIdHeader/anyOf/1/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[qn]:i.push(qn),o++}mt!==void 0&&(wr=mt,t!==void 0&&(t.requestIdHeader=mt))}var p=Bt===o;Qa=Qa||p}if(Qa)o=k_,i!==null&&(k_?i.length=k_:i=null);else{let Bt={instancePath:e+"/requestIdHeader",schemaPath:"#/properties/requestIdHeader/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[Bt]:i.push(Bt),o++,Pe.errors=i,!1}var a=Co===o;if(a){let Bt=t.requestIdLogLabel,Fh=o;if(typeof Bt!="string"){let mt=typeof Bt,qn;if(qn===void 0)if(mt=="number"||mt=="boolean")qn=""+Bt;else if(Bt===null)qn="";else return Pe.errors=[{instancePath:e+"/requestIdLogLabel",schemaPath:"#/properties/requestIdLogLabel/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;qn!==void 0&&(Bt=qn,t!==void 0&&(t.requestIdLogLabel=qn))}var a=Fh===o;if(a){let mt=t.http2SessionTimeout,qn=o;if(!(typeof mt=="number"&&!(mt%1)&&!isNaN(mt)&&isFinite(mt))){let fs=typeof mt,Io;if(Io===void 0)if(fs==="boolean"||mt===null||fs==="string"&&mt&&mt==+mt&&!(mt%1))Io=+mt;else return Pe.errors=[{instancePath:e+"/http2SessionTimeout",schemaPath:"#/properties/http2SessionTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;Io!==void 0&&(mt=Io,t!==void 0&&(t.http2SessionTimeout=Io))}var a=qn===o;if(a){let fs=t.exposeHeadRoutes,Io=o;if(typeof fs!="boolean"){let kr;if(kr===void 0)if(fs==="false"||fs===0||fs===null)kr=!1;else if(fs==="true"||fs===1)kr=!0;else return Pe.errors=[{instancePath:e+"/exposeHeadRoutes",schemaPath:"#/properties/exposeHeadRoutes/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;kr!==void 0&&(fs=kr,t!==void 0&&(t.exposeHeadRoutes=kr))}var a=Io===o;if(a){let kr=t.useSemicolonDelimiter,I8=o;if(typeof kr!="boolean"){let le;if(le===void 0)if(kr==="false"||kr===0||kr===null)le=!1;else if(kr==="true"||kr===1)le=!0;else return Pe.errors=[{instancePath:e+"/useSemicolonDelimiter",schemaPath:"#/properties/useSemicolonDelimiter/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;le!==void 0&&(kr=le,t!==void 0&&(t.useSemicolonDelimiter=le))}var a=I8===o;if(a){if(t.routerOptions!==void 0){let le=t.routerOptions,su=o;if(o===su)if(le&&typeof le=="object"&&!Array.isArray(le)){le.ignoreTrailingSlash===void 0&&(le.ignoreTrailingSlash=!1),le.ignoreDuplicateSlashes===void 0&&(le.ignoreDuplicateSlashes=!1),le.maxParamLength===void 0&&(le.maxParamLength=100),le.allowUnsafeRegex===void 0&&(le.allowUnsafeRegex=!1),le.useSemicolonDelimiter===void 0&&(le.useSemicolonDelimiter=!1);let Za=o;for(let Ye in le)Ye==="ignoreTrailingSlash"||Ye==="ignoreDuplicateSlashes"||Ye==="maxParamLength"||Ye==="allowUnsafeRegex"||Ye==="useSemicolonDelimiter"||delete le[Ye];if(Za===o){let Ye=le.ignoreTrailingSlash,Uh=o;if(typeof Ye!="boolean"){let yt;if(yt===void 0)if(Ye==="false"||Ye===0||Ye===null)yt=!1;else if(Ye==="true"||Ye===1)yt=!0;else return Pe.errors=[{instancePath:e+"/routerOptions/ignoreTrailingSlash",schemaPath:"#/properties/routerOptions/properties/ignoreTrailingSlash/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;yt!==void 0&&(Ye=yt,le!==void 0&&(le.ignoreTrailingSlash=yt))}var f=Uh===o;if(f){let yt=le.ignoreDuplicateSlashes,Ao=o;if(typeof yt!="boolean"){let Xe;if(Xe===void 0)if(yt==="false"||yt===0||yt===null)Xe=!1;else if(yt==="true"||yt===1)Xe=!0;else return Pe.errors=[{instancePath:e+"/routerOptions/ignoreDuplicateSlashes",schemaPath:"#/properties/routerOptions/properties/ignoreDuplicateSlashes/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;Xe!==void 0&&(yt=Xe,le!==void 0&&(le.ignoreDuplicateSlashes=Xe))}var f=Ao===o;if(f){let Xe=le.maxParamLength,A8=o;if(!(typeof Xe=="number"&&!(Xe%1)&&!isNaN(Xe)&&isFinite(Xe))){let ds=typeof Xe,ko;if(ko===void 0)if(ds==="boolean"||Xe===null||ds==="string"&&Xe&&Xe==+Xe&&!(Xe%1))ko=+Xe;else return Pe.errors=[{instancePath:e+"/routerOptions/maxParamLength",schemaPath:"#/properties/routerOptions/properties/maxParamLength/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;ko!==void 0&&(Xe=ko,le!==void 0&&(le.maxParamLength=ko))}var f=A8===o;if(f){let ds=le.allowUnsafeRegex,ko=o;if(typeof ds!="boolean"){let Dr;if(Dr===void 0)if(ds==="false"||ds===0||ds===null)Dr=!1;else if(ds==="true"||ds===1)Dr=!0;else return Pe.errors=[{instancePath:e+"/routerOptions/allowUnsafeRegex",schemaPath:"#/properties/routerOptions/properties/allowUnsafeRegex/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;Dr!==void 0&&(ds=Dr,le!==void 0&&(le.allowUnsafeRegex=Dr))}var f=ko===o;if(f){let Dr=le.useSemicolonDelimiter,k8=o;if(typeof Dr!="boolean"){let ec;if(ec===void 0)if(Dr==="false"||Dr===0||Dr===null)ec=!1;else if(Dr==="true"||Dr===1)ec=!0;else return Pe.errors=[{instancePath:e+"/routerOptions/useSemicolonDelimiter",schemaPath:"#/properties/routerOptions/properties/useSemicolonDelimiter/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;ec!==void 0&&(Dr=ec,le!==void 0&&(le.useSemicolonDelimiter=ec))}var f=k8===o}}}}}}else return Pe.errors=[{instancePath:e+"/routerOptions",schemaPath:"#/properties/routerOptions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=su===o}else var a=!0;if(a)if(t.constraints!==void 0){let le=t.constraints,su=o;if(o===su)if(le&&typeof le=="object"&&!Array.isArray(le))for(let Za in le){let Ye=le[Za],Uh=o;if(o===Uh)if(Ye&&typeof Ye=="object"&&!Array.isArray(Ye)){let yt;if(Ye.name===void 0&&(yt="name")||Ye.storage===void 0&&(yt="storage")||Ye.validate===void 0&&(yt="validate")||Ye.deriveConstraint===void 0&&(yt="deriveConstraint"))return Pe.errors=[{instancePath:e+"/constraints/"+Za.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/constraints/additionalProperties/required",keyword:"required",params:{missingProperty:yt},message:"must have required property '"+yt+"'"}],!1;if(Ye.name!==void 0){let Ao=Ye.name;if(typeof Ao!="string"){let JP=typeof Ao,Xe;if(Xe===void 0)if(JP=="number"||JP=="boolean")Xe=""+Ao;else if(Ao===null)Xe="";else return Pe.errors=[{instancePath:e+"/constraints/"+Za.replace(/~/g,"~0").replace(/\//g,"~1")+"/name",schemaPath:"#/properties/constraints/additionalProperties/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;Xe!==void 0&&(Ao=Xe,Ye!==void 0&&(Ye.name=Xe))}}}else return Pe.errors=[{instancePath:e+"/constraints/"+Za.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/constraints/additionalProperties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var h=Uh===o;if(!h)break}else return Pe.errors=[{instancePath:e+"/constraints",schemaPath:"#/properties/constraints/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=su===o}else var a=!0}}}}}}}}}}}}}}}}}}}}}}}}else return Pe.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Pe.errors=i,o===0}Ty.exports.defaultInitOptions={connectionTimeout:0,keepAliveTimeout:72e3,maxRequestsPerSocket:0,requestTimeout:0,bodyLimit:1048576,caseSensitive:!0,allowUnsafeRegex:!1,disableRequestLogging:!1,ignoreTrailingSlash:!1,ignoreDuplicateSlashes:!1,maxParamLength:100,onProtoPoisoning:"error",onConstructorPoisoning:"error",pluginTimeout:1e4,requestIdHeader:!1,requestIdLogLabel:"reqId",http2SessionTimeout:72e3,exposeHeadRoutes:!0,useSemicolonDelimiter:!1,allowErrorHandlerOverride:!0,routerOptions:{ignoreTrailingSlash:!1,ignoreDuplicateSlashes:!1,maxParamLength:100,allowUnsafeRegex:!1,useSemicolonDelimiter:!1}}});var O4=E(($je,$y)=>{"use strict";var Ry=$4(),BEe=Tp()({circles:!0,proto:!1}),{FST_ERR_INIT_OPTS_INVALID:VEe}=zt();function zEe(t){let e=BEe(t);if(!Ry(e)){let r=new VEe(JSON.stringify(Ry.errors.map(n=>n.message)));throw r.errors=Ry.errors,r}return h1(e)}function h1(t){let e=Object.getOwnPropertyNames(t);for(let r of e){let n=t[r];ArrayBuffer.isView(n)&&!(n instanceof DataView)||(t[r]=n&&typeof n=="object"?h1(n):n)}return Object.freeze(t)}$y.exports=zEe;$y.exports.defaultInitOptions=Ry.defaultInitOptions;$y.exports.utils={deepFreezeObject:h1}});var M4=E((Oje,D4)=>{"use strict";var{kAvvioBoot:HEe,kChildren:P4,kRoutePrefix:x4,kLogLevel:N4,kLogSerializers:p1,kHooks:m1,kSchemaController:xl,kContentTypeParser:C4,kReply:I4,kRequest:A4,kFourOhFour:GEe,kPluginNameChain:k4,kErrorHandlerAlreadySet:WEe}=Nt(),KEe=kp(),JEe=Fp(),YEe=S$(),XEe=Rw(),{buildHooks:QEe}=Ci(),Cd=z$();D4.exports=function(e,r,n){let s=Cd.registerPlugin.call(e,r),i=Cd.getPluginName(r)||Cd.getFuncPreview(r);if(s)return e[k4].push(i),e;let o=Object.create(e);e[P4].push(o),o.ready=e[HEe].bind(o),o[P4]=[],o[I4]=KEe.buildReply(o[I4]),o[A4]=JEe.buildRequest(o[A4]),o[C4]=XEe.helpers.buildContentTypeParser(o[C4]),o[m1]=QEe(o[m1]),o[x4]=ZEe(o[x4],n.prefix),o[N4]=n.logLevel||o[N4],o[xl]=YEe.buildSchemaController(e[xl]),o.getSchema=o[xl].getSchema.bind(o[xl]),o.getSchemas=o[xl].getSchemas.bind(o[xl]),o[Cd.kRegisteredPlugins]=Object.create(o[Cd.kRegisteredPlugins]),o[k4]=[i],o[WEe]=!1,(o[p1]||n.logSerializers)&&(o[p1]=Object.assign(Object.create(o[p1]),n.logSerializers)),n.prefix&&o[GEe].arrange404(o);for(let a of o[m1].onRegister)a.call(e,o,n);return o};function ZEe(t,e){return e?(t.endsWith("/")&&e[0]==="/"?e=e.slice(1):e[0]!=="/"&&(e="/"+e),t+e):t}});var U4=E(Ds=>{"use strict";Object.defineProperty(Ds,"__esModule",{value:!0});Ds.parseCookie=L4;Ds.parse=L4;Ds.stringifyCookie=iSe;Ds.stringifySetCookie=Oy;Ds.serialize=Oy;Ds.parseSetCookie=oSe;Ds.stringifySetCookie=Oy;Ds.serialize=Oy;var j4=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,q4=/^[\u0021-\u003A\u003C-\u007E]*$/,eSe=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,tSe=/^[\u0020-\u003A\u003D-\u007E]*$/,rSe=/^-?\d+$/,nSe=Object.prototype.toString,sSe=(()=>{let t=function(){};return t.prototype=Object.create(null),t})();function L4(t,e){let r=new sSe,n=t.length;if(n<2)return r;let s=e?.decode||F4,i=0;do{let o=y1(t,i,n);if(o===-1)break;let a=g1(t,i,n);if(o>a){i=t.lastIndexOf(";",o-1)+1;continue}let c=uo(t,i,o);r[c]===void 0&&(r[c]=s(uo(t,o+1,a))),i=a+1}while(i<n);return r}function iSe(t,e){let r=e?.encode||encodeURIComponent,n=[];for(let s of Object.keys(t)){let i=t[s];if(i===void 0)continue;if(!j4.test(s))throw new TypeError(`cookie name is invalid: ${s}`);let o=r(i);if(!q4.test(o))throw new TypeError(`cookie val is invalid: ${i}`);n.push(`${s}=${o}`)}return n.join("; ")}function Oy(t,e,r){let n=typeof t=="object"?t:{...r,name:t,value:String(e)},i=(typeof e=="object"?e:r)?.encode||encodeURIComponent;if(!j4.test(n.name))throw new TypeError(`argument name is invalid: ${n.name}`);let o=n.value?i(n.value):"";if(!q4.test(o))throw new TypeError(`argument val is invalid: ${n.value}`);let a=n.name+"="+o;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError(`option maxAge is invalid: ${n.maxAge}`);a+="; Max-Age="+n.maxAge}if(n.domain){if(!eSe.test(n.domain))throw new TypeError(`option domain is invalid: ${n.domain}`);a+="; Domain="+n.domain}if(n.path){if(!tSe.test(n.path))throw new TypeError(`option path is invalid: ${n.path}`);a+="; Path="+n.path}if(n.expires){if(!aSe(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError(`option expires is invalid: ${n.expires}`);a+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(a+="; HttpOnly"),n.secure&&(a+="; Secure"),n.partitioned&&(a+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":a+="; Priority=Low";break;case"medium":a+="; Priority=Medium";break;case"high":a+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${n.priority}`)}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"none":a+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${n.sameSite}`)}return a}function oSe(t,e){let r=e?.decode||F4,n=t.length,s=g1(t,0,n),i=y1(t,0,s),o=i===-1?{name:"",value:r(uo(t,0,s))}:{name:uo(t,0,i),value:r(uo(t,i+1,s))},a=s+1;for(;a<n;){let c=g1(t,a,n),l=y1(t,a,c),u=l===-1?uo(t,a,c):uo(t,a,l),d=l===-1?void 0:uo(t,l+1,c);switch(u.toLowerCase()){case"httponly":o.httpOnly=!0;break;case"secure":o.secure=!0;break;case"partitioned":o.partitioned=!0;break;case"domain":o.domain=d;break;case"path":o.path=d;break;case"max-age":d&&rSe.test(d)&&(o.maxAge=Number(d));break;case"expires":if(!d)break;let p=new Date(d);Number.isFinite(p.valueOf())&&(o.expires=p);break;case"priority":if(!d)break;let f=d.toLowerCase();(f==="low"||f==="medium"||f==="high")&&(o.priority=f);break;case"samesite":if(!d)break;let h=d.toLowerCase();(h==="lax"||h==="strict"||h==="none")&&(o.sameSite=h);break}a=c+1}return o}function g1(t,e,r){let n=t.indexOf(";",e);return n===-1?r:n}function y1(t,e,r){let n=t.indexOf("=",e);return n<r?n:-1}function uo(t,e,r){let n=e,s=r;do{let i=t.charCodeAt(n);if(i!==32&&i!==9)break}while(++n<s);for(;s>n;){let i=t.charCodeAt(s-1);if(i!==32&&i!==9)break;s--}return t.slice(n,s)}function F4(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}function aSe(t){return nSe.call(t)==="[object Date]"}});var V4=E((xje,Py)=>{"use strict";var{format:_1}=require("util");function cSe(t){return B4({...t,name:"DeprecationWarning"})}function B4({name:t,code:e,message:r,unlimited:n=!1}={}){if(!t)throw new Error("Warning name must not be empty");if(!e)throw new Error("Warning code must not be empty");if(!r)throw new Error("Warning message must not be empty");if(typeof n!="boolean")throw new Error("Warning opts.unlimited must be a boolean");e=e.toUpperCase();let s={[t]:function(o,a,c){i.emitted===!0&&i.unlimited!==!0||(i.emitted=!0,process.emitWarning(i.format(o,a,c),i.name,i.code))}};n&&(s={[t]:function(o,a,c){i.emitted=!0,process.emitWarning(i.format(o,a,c),i.name,i.code)}});let i=s[t];return i.emitted=!1,i.message=r,i.unlimited=n,i.code=e,i.format=function(o,a,c){let l;return o&&a&&c?l=_1(r,o,a,c):o&&a?l=_1(r,o,a):o?l=_1(r,o):l=r,l},i}var v1={createWarning:B4,createDeprecation:cSe};Py.exports=v1;Py.exports.default=v1;Py.exports.processWarning=v1});var G4=E((Nje,H4)=>{"use strict";var{URL:z4}=require("url"),w1="http://localhost";H4.exports=function(e,r){(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]")&&e.startsWith("//")&&(e=w1+e);let n=typeof e=="object"?Object.assign(new z4(w1),e):new z4(e,w1);if(typeof r=="string"){r=new URLSearchParams(r);for(let s of r.keys()){n.searchParams.delete(s);for(let i of r.getAll(s))n.searchParams.append(s,i)}}else{let s=Object.assign({},e.query,r);for(let i in s){let o=s[i];if(Array.isArray(o)){n.searchParams.delete(i);for(let a of o)n.searchParams.append(i,a)}else n.searchParams.set(i,o)}}return n}});var W4=E((Cje,b1)=>{"use strict";var{randomUUID:lSe}=require("crypto"),{Readable:uSe}=require("stream"),Nl;function fSe(t){return t&&typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&t[Symbol.toStringTag]==="FormData"}function dSe(t){Nl=Nl??new TextEncoder;let e=`----formdata-${lSe()}`,r=`--${e}\r
Content-Disposition: form-data`;let n=c=>c.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),s=c=>c.replace(/\r?\n|\r/g,`\r
`),i=new Uint8Array([13,10]);async function*o(){for(let[c,l]of t)if(typeof l=="string")yield Nl.encode(`${r}; name="${n(s(c))}"\r
\r
`),yield Nl.encode(`${s(l)}\r
`);else{let u=`${r}; name="${n(s(c))}"`;l.name&&(u+=`; filename="${n(l.name)}"`),u+=`\r
Content-Type: ${l.type||"application/octet-stream"}\r
\r
`,yield Nl.encode(u),l.stream?yield*l.stream():yield l,yield i}yield Nl.encode(`--${e}--`)}return{stream:uSe.from(o()),contentType:`multipart/form-data; boundary=${e}`}}b1.exports.isFormDataLike=fSe;b1.exports.formDataToStream=dSe});var Y4=E((Ije,xy)=>{"use strict";var{Readable:K4,addAbortSignal:hSe}=require("stream"),S1=require("util"),pSe=U4(),mSe=require("assert"),{createDeprecation:gSe}=V4(),ySe=G4(),{isFormDataLike:_Se,formDataToStream:vSe}=W4(),{EventEmitter:wSe}=require("events"),bSe=gSe({name:"FastifyDeprecationLightMyRequest",code:"FST_LIGHTMYREQUEST_DEP01",message:'You are accessing "request.connection", use "request.socket" instead.'});function ESe(t){return t.port?t.host:t.hostname+(t.protocol==="https:"?":443":":80")}var E1=class extends wSe{constructor(e){super(),this.remoteAddress=e}};function J4(t){return new e(this);function e(r){fo.call(r,{...t,Request:void 0}),Object.assign(this,r);for(let n of Object.keys(fo.prototype))this.constructor.prototype[n]=fo.prototype[n];return S1.inherits(this.constructor,t.Request),this}}function fo(t){K4.call(this,{autoDestroy:!1});let e=ySe(t.url||t.path,t.query);this.url=e.pathname+e.search,this.aborted=!1,this.httpVersionMajor=1,this.httpVersionMinor=1,this.httpVersion="1.1",this.method=t.method?t.method.toUpperCase():"GET",this.headers={},this.rawHeaders=[];let r=t.headers||{};for(let o in r){let a=o.toLowerCase();if((a==="user-agent"||a==="content-type")&&r[o]===void 0){this.headers[a]=void 0;continue}let c=r[o];mSe(c!==void 0,'invalid value "undefined" for header '+o),this.headers[a]=""+c}if("user-agent"in this.headers||(this.headers["user-agent"]="lightMyRequest"),this.headers.host=this.headers.host||t.authority||ESe(e),t.cookies){let{cookies:o}=t,a=Object.keys(o).map(c=>pSe.serialize(c,o[c]));this.headers.cookie&&a.unshift(this.headers.cookie),this.headers.cookie=a.join("; ")}this.socket=new E1(t.remoteAddress||"127.0.0.1"),Object.defineProperty(this,"connection",{get(){return bSe(),this.socket},configurable:!0});let n=t.payload||t.body||null,s=n&&typeof n.resume=="function";if(_Se(n)){let o=vSe(n);n=o.stream,s=!0,this.headers["content-type"]=o.contentType,this.headers["transfer-encoding"]="chunked"}n&&typeof n!="string"&&!s&&!Buffer.isBuffer(n)&&(n=JSON.stringify(n),"content-type"in this.headers||(this.headers["content-type"]="application/json")),n&&!s&&!Object.hasOwn(this.headers,"content-length")&&(this.headers["content-length"]=(Buffer.isBuffer(n)?n.length:Buffer.byteLength(n)).toString());for(let o of Object.keys(this.headers))this.rawHeaders.push(o,this.headers[o]);this._lightMyRequest={payload:n,isDone:!1,simulate:t.simulate||{},payloadAsStream:t.payloadAsStream,signal:t.signal};let i=t.signal;i&&hSe(i,this);{let o=this._lightMyRequest.payload;o?._readableState?(this._read=SSe,o.on("error",a=>{this.destroy(a)}),o.on("end",()=>{this.push(null)})):this._read=TSe}return this}function SSe(){let t=this._lightMyRequest.payload,e=!0,r=!1,n;for(;e&&(n=t.read());)r=!0,e=this.push(n);e&&!r&&this._lightMyRequest.payload.once("readable",this._read.bind(this))}function TSe(){setImmediate(()=>{if(this._lightMyRequest.isDone){this._lightMyRequest.simulate.end!==!1&&this.push(null);return}this._lightMyRequest.isDone=!0,this._lightMyRequest.payload&&(this._lightMyRequest.simulate.split?(this.push(this._lightMyRequest.payload.slice(0,1)),this.push(this._lightMyRequest.payload.slice(1))):this.push(this._lightMyRequest.payload)),this._lightMyRequest.simulate.error&&this.emit("error",new Error("Simulated")),this._lightMyRequest.simulate.close&&this.emit("close"),this._lightMyRequest.simulate.end!==!1&&this.push(null)})}S1.inherits(fo,K4);S1.inherits(J4,fo);fo.prototype.destroy=function(t){this.destroyed||this._lightMyRequest.isDone||(this.destroyed=!0,t&&(this._error=!0,process.nextTick(()=>this.emit("error",t))),process.nextTick(()=>this.emit("close")))};xy.exports=fo;xy.exports.Request=fo;xy.exports.CustomRequest=J4});var Q4=E((Aje,Id)=>{"use strict";var Ny={decodeValues:!0,map:!1,silent:!1};function T1(t){return typeof t!="string"||t in{}}function R1(){return Object.create(null)}function $1(t){return typeof t=="string"&&!!t.trim()}function O1(t,e){var r=t.split(";").filter($1),n=r.shift(),s=RSe(n),i=s.name,o=s.value;if(e=e?Object.assign({},Ny,e):Ny,T1(i))return null;try{o=e.decodeValues?decodeURIComponent(o):o}catch(c){console.error("set-cookie-parser: failed to decode cookie value. Set options.decodeValues=false to disable decoding.",c)}var a=R1();return a.name=i,a.value=o,r.forEach(function(c){var l=c.split("="),u=l.shift().trimLeft().toLowerCase();if(!T1(u)){var d=l.join("=");if(u==="expires")a.expires=new Date(d);else if(u==="max-age"){var p=parseInt(d,10);Number.isNaN(p)||(a.maxAge=p)}else u==="secure"?a.secure=!0:u==="httponly"?a.httpOnly=!0:u==="samesite"?a.sameSite=d:u==="partitioned"?a.partitioned=!0:u&&(a[u]=d)}}),a}function RSe(t){var e="",r="",n=t.split("=");return n.length>1?(e=n.shift(),r=n.join("=")):r=t,{name:e,value:r}}function X4(t,e){if(e=e?Object.assign({},Ny,e):Ny,!t)return e.map?R1():[];if(t.headers)if(typeof t.headers.getSetCookie=="function")t=t.headers.getSetCookie();else if(t.headers["set-cookie"])t=t.headers["set-cookie"];else{var r=t.headers[Object.keys(t.headers).find(function(s){return s.toLowerCase()==="set-cookie"})];!r&&t.headers.cookie&&!e.silent&&console.warn("Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning."),t=r}if(Array.isArray(t)||(t=[t]),e.map){var n=R1();return t.filter($1).reduce(function(s,i){var o=O1(i,e);return o&&!T1(o.name)&&(s[o.name]=o),s},n)}else return t.filter($1).map(function(s){return O1(s,e)}).filter(Boolean)}function $Se(t){if(Array.isArray(t))return t;if(typeof t!="string")return[];var e=[],r=0,n,s,i,o,a;function c(){for(;r<t.length&&/\s/.test(t.charAt(r));)r+=1;return r<t.length}function l(){return s=t.charAt(r),s!=="="&&s!==";"&&s!==","}for(;r<t.length;){for(n=r,a=!1;c();)if(s=t.charAt(r),s===","){for(i=r,r+=1,c(),o=r;r<t.length&&l();)r+=1;r<t.length&&t.charAt(r)==="="?(a=!0,r=o,e.push(t.substring(n,i)),n=r):r=i+1}else r+=1;(!a||r>=t.length)&&e.push(t.substring(n,t.length))}return e}Id.exports=X4;Id.exports.parse=X4;Id.exports.parseString=O1;Id.exports.splitCookiesString=$Se});var nH=E((kje,rH)=>{"use strict";var Ad=require("http"),{Writable:OSe,Readable:Z4,addAbortSignal:PSe}=require("stream"),xSe=require("util"),NSe=Q4();function ho(t,e,r){if(Ad.ServerResponse.call(this,t),t._lightMyRequest?.payloadAsStream){let a=this.emit.bind(this,"drain");this._lightMyRequest={headers:null,trailers:{},stream:new Z4({read:a})};let c=t._lightMyRequest.signal;c&&PSe(c,this._lightMyRequest.stream)}else this._lightMyRequest={headers:null,trailers:{},payloadChunks:[]};this.setHeader("foo","bar"),this.removeHeader("foo"),this.assignSocket(CSe()),this._promiseCallback=typeof r=="function";let n=!1,s=a=>{if(!n){if(n=!0,this._promiseCallback)return process.nextTick(()=>e(a));process.nextTick(()=>e(null,a))}};this._lightMyRequest.onEndSuccess=s;let i=!1,o=a=>{if(n){this._lightMyRequest.stream&&!i&&(a||(a=new Error("response destroyed before completion"),a.code="LIGHT_ECONNRESET"),this._lightMyRequest.stream.destroy(a),this._lightMyRequest.stream.on("error",()=>{}));return}if(n=!0,a||(a=new Error("response destroyed before completion"),a.code="LIGHT_ECONNRESET"),this._promiseCallback)return process.nextTick(()=>r(a));process.nextTick(()=>e(a,null))};this._lightMyRequest.stream?this.once("finish",()=>{i=!0,this._lightMyRequest.stream.push(null)}):this.once("finish",()=>{let a=eH(this);a.raw.req=t,s(a)}),this.connection.once("error",o),this.once("error",o),this.once("close",o)}xSe.inherits(ho,Ad.ServerResponse);ho.prototype.setTimeout=function(t,e){return this.timeoutHandle=setTimeout(()=>{this.emit("timeout")},t),this.on("timeout",e),this};ho.prototype.writeHead=function(){let t=Ad.ServerResponse.prototype.writeHead.apply(this,arguments);return tH(this),this._lightMyRequest.stream&&this._lightMyRequest.onEndSuccess(eH(this)),t};ho.prototype.write=function(t,e,r){return this.timeoutHandle&&clearTimeout(this.timeoutHandle),Ad.ServerResponse.prototype.write.call(this,t,e,r),this._lightMyRequest.stream?this._lightMyRequest.stream.push(Buffer.from(t,e)):(this._lightMyRequest.payloadChunks.push(Buffer.from(t,e)),!0)};ho.prototype.end=function(t,e,r){t&&this.write(t,e),Ad.ServerResponse.prototype.end.call(this,r),this.emit("finish"),this.destroy()};ho.prototype.destroy=function(t){this.destroyed||(this.destroyed=!0,t&&process.nextTick(()=>this.emit("error",t)),process.nextTick(()=>this.emit("close")))};ho.prototype.addTrailers=function(t){for(let e in t)this._lightMyRequest.trailers[e.toLowerCase().trim()]=t[e].toString().trim()};function eH(t){t._lightMyRequest.headers===null&&tH(t),ISe(t);let e={raw:{res:t},headers:t._lightMyRequest.headers,statusCode:t.statusCode,statusMessage:t.statusMessage,trailers:{},get cookies(){return NSe.parse(this)}};if(e.trailers=t._lightMyRequest.trailers,t._lightMyRequest.payloadChunks){let r=Buffer.concat(t._lightMyRequest.payloadChunks);e.rawPayload=r,e.payload=r.toString(),e.body=e.payload,e.json=function(){return JSON.parse(e.payload)}}else e.json=function(){throw new Error("Response payload is not available with payloadAsStream: true")};return e.stream=function(){return t._lightMyRequest.stream?t._lightMyRequest.stream:Z4.from(t._lightMyRequest.payloadChunks)},e}function CSe(){return new OSe({write(t,e,r){setImmediate(r)}})}function ISe(t){let e=t._lightMyRequest.headers;for(let r of Object.keys(e)){let n=e[r];Array.isArray(n)?e[r]=n.map(s=>""+s):e[r]=""+n}}function tH(t){t._lightMyRequest.headers=Object.assign({},t.getHeaders()),["Date","Connection","Transfer-Encoding"].forEach(e=>{let r=new RegExp("\\r\\n"+e+": ([^\\r]*)\\r\\n"),n=t._header?.match(r);n&&(t._lightMyRequest.headers[e.toLowerCase()]=n[1])})}rH.exports=ho});var sH=E((Dje,P1)=>{"use strict";P1.exports=$t;P1.exports.default=$t;var ASe={type:"object",properties:{url:{oneOf:[{type:"string"},{type:"object",properties:{protocol:{type:"string"},hostname:{type:"string"},pathname:{type:"string"}},additionalProperties:!0,required:["pathname"]}]},path:{oneOf:[{type:"string"},{type:"object",properties:{protocol:{type:"string"},hostname:{type:"string"},pathname:{type:"string"}},additionalProperties:!0,required:["pathname"]}]},cookies:{type:"object",additionalProperties:!0},headers:{type:"object",additionalProperties:!0},query:{anyOf:[{type:"object",additionalProperties:!0},{type:"string"}]},simulate:{type:"object",properties:{end:{type:"boolean"},split:{type:"boolean"},error:{type:"boolean"},close:{type:"boolean"}}},authority:{type:"string"},remoteAddress:{type:"string"},method:{type:"string",enum:["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","QUERY","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE","acl","bind","checkout","connect","copy","delete","get","head","link","lock","m-search","merge","mkactivity","mkcalendar","mkcol","move","notify","options","patch","post","propfind","proppatch","purge","put","query","rebind","report","search","source","subscribe","trace","unbind","unlink","unlock","unsubscribe"]},validate:{type:"boolean"}},additionalProperties:!0,oneOf:[{required:["url"]},{required:["path"]}]};function $t(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0,a=o,c=!1,l=null,u=o;if(t&&typeof t=="object"&&!Array.isArray(t)){let v;if(t.url===void 0&&(v="url")){let S={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:v},message:"must have required property '"+v+"'"};i===null?i=[S]:i.push(S),o++}}var p=u===o;p&&(c=!0,l=0);let d=o;if(t&&typeof t=="object"&&!Array.isArray(t)){let v;if(t.path===void 0&&(v="path")){let S={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:v},message:"must have required property '"+v+"'"};i===null?i=[S]:i.push(S),o++}}var p=d===o;if(p&&c?(c=!1,l=[l,1]):p&&(c=!0,l=1),c)o=a,i!==null&&(a?i.length=a:i=null);else{let v={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:l},message:"must match exactly one schema in oneOf"};return i===null?i=[v]:i.push(v),o++,$t.errors=i,!1}if(o===0)if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.url!==void 0){let v=t.url,S=o,$=o,T=!1,O=null,R=o;if(typeof v!="string"){let A=typeof v,N;if(N===void 0)if(A=="number"||A=="boolean")N=""+v;else if(v===null)N="";else{let C={instancePath:e+"/url",schemaPath:"#/properties/url/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[C]:i.push(C),o++}N!==void 0&&(v=N,t!==void 0&&(t.url=N))}var h=R===o;h&&(T=!0,O=0);let P=o;if(o===P)if(v&&typeof v=="object"&&!Array.isArray(v)){let A;if(v.pathname===void 0&&(A="pathname")){let N={instancePath:e+"/url",schemaPath:"#/properties/url/oneOf/1/required",keyword:"required",params:{missingProperty:A},message:"must have required property '"+A+"'"};i===null?i=[N]:i.push(N),o++}else{if(v.protocol!==void 0){let N=v.protocol,C=o;if(typeof N!="string"){let V=typeof N,te;if(te===void 0)if(V=="number"||V=="boolean")te=""+N;else if(N===null)te="";else{let H={instancePath:e+"/url/protocol",schemaPath:"#/properties/url/oneOf/1/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[H]:i.push(H),o++}te!==void 0&&(N=te,v!==void 0&&(v.protocol=te))}var f=C===o}else var f=!0;if(f){if(v.hostname!==void 0){let N=v.hostname,C=o;if(typeof N!="string"){let te=typeof N,H;if(H===void 0)if(te=="number"||te=="boolean")H=""+N;else if(N===null)H="";else{let K={instancePath:e+"/url/hostname",schemaPath:"#/properties/url/oneOf/1/properties/hostname/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[K]:i.push(K),o++}H!==void 0&&(N=H,v!==void 0&&(v.hostname=H))}var f=C===o}else var f=!0;if(f)if(v.pathname!==void 0){let N=v.pathname,C=o;if(typeof N!="string"){let te=typeof N,H;if(H===void 0)if(te=="number"||te=="boolean")H=""+N;else if(N===null)H="";else{let K={instancePath:e+"/url/pathname",schemaPath:"#/properties/url/oneOf/1/properties/pathname/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[K]:i.push(K),o++}H!==void 0&&(N=H,v!==void 0&&(v.pathname=H))}var f=C===o}else var f=!0}}}else{let A={instancePath:e+"/url",schemaPath:"#/properties/url/oneOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[A]:i.push(A),o++}var h=P===o;if(h&&T?(T=!1,O=[O,1]):h&&(T=!0,O=1),T)o=$,i!==null&&($?i.length=$:i=null);else{let A={instancePath:e+"/url",schemaPath:"#/properties/url/oneOf",keyword:"oneOf",params:{passingSchemas:O},message:"must match exactly one schema in oneOf"};return i===null?i=[A]:i.push(A),o++,$t.errors=i,!1}var m=S===o}else var m=!0;if(m){if(t.path!==void 0){let v=t.path,S=o,$=o,T=!1,O=null,R=o;if(typeof v!="string"){let N=typeof v,C;if(C===void 0)if(N=="number"||N=="boolean")C=""+v;else if(v===null)C="";else{let V={instancePath:e+"/path",schemaPath:"#/properties/path/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[V]:i.push(V),o++}C!==void 0&&(v=C,t!==void 0&&(t.path=C))}var g=R===o;g&&(T=!0,O=0);let P=o;if(o===P)if(v&&typeof v=="object"&&!Array.isArray(v)){let N;if(v.pathname===void 0&&(N="pathname")){let C={instancePath:e+"/path",schemaPath:"#/properties/path/oneOf/1/required",keyword:"required",params:{missingProperty:N},message:"must have required property '"+N+"'"};i===null?i=[C]:i.push(C),o++}else{if(v.protocol!==void 0){let C=v.protocol,V=o;if(typeof C!="string"){let te=typeof C,H;if(H===void 0)if(te=="number"||te=="boolean")H=""+C;else if(C===null)H="";else{let K={instancePath:e+"/path/protocol",schemaPath:"#/properties/path/oneOf/1/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[K]:i.push(K),o++}H!==void 0&&(C=H,v!==void 0&&(v.protocol=H))}var y=V===o}else var y=!0;if(y){if(v.hostname!==void 0){let C=v.hostname,V=o;if(typeof C!="string"){let H=typeof C,K;if(K===void 0)if(H=="number"||H=="boolean")K=""+C;else if(C===null)K="";else{let xt={instancePath:e+"/path/hostname",schemaPath:"#/properties/path/oneOf/1/properties/hostname/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[xt]:i.push(xt),o++}K!==void 0&&(C=K,v!==void 0&&(v.hostname=K))}var y=V===o}else var y=!0;if(y)if(v.pathname!==void 0){let C=v.pathname,V=o;if(typeof C!="string"){let H=typeof C,K;if(K===void 0)if(H=="number"||H=="boolean")K=""+C;else if(C===null)K="";else{let xt={instancePath:e+"/path/pathname",schemaPath:"#/properties/path/oneOf/1/properties/pathname/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[xt]:i.push(xt),o++}K!==void 0&&(C=K,v!==void 0&&(v.pathname=K))}var y=V===o}else var y=!0}}}else{let N={instancePath:e+"/path",schemaPath:"#/properties/path/oneOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[N]:i.push(N),o++}var g=P===o;if(g&&T?(T=!1,O=[O,1]):g&&(T=!0,O=1),T)o=$,i!==null&&($?i.length=$:i=null);else{let N={instancePath:e+"/path",schemaPath:"#/properties/path/oneOf",keyword:"oneOf",params:{passingSchemas:O},message:"must match exactly one schema in oneOf"};return i===null?i=[N]:i.push(N),o++,$t.errors=i,!1}var m=S===o}else var m=!0;if(m){if(t.cookies!==void 0){let v=t.cookies,S=o;if(o===S&&!(v&&typeof v=="object"&&!Array.isArray(v)))return $t.errors=[{instancePath:e+"/cookies",schemaPath:"#/properties/cookies/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var m=S===o}else var m=!0;if(m){if(t.headers!==void 0){let v=t.headers,S=o;if(o===S&&!(v&&typeof v=="object"&&!Array.isArray(v)))return $t.errors=[{instancePath:e+"/headers",schemaPath:"#/properties/headers/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var m=S===o}else var m=!0;if(m){if(t.query!==void 0){let v=t.query,S=o,$=o,T=!1,O=o;if(o===O&&!(v&&typeof v=="object"&&!Array.isArray(v))){let P={instancePath:e+"/query",schemaPath:"#/properties/query/anyOf/0/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[P]:i.push(P),o++}var w=O===o;if(T=T||w,!T){let P=o;if(typeof v!="string"){let N=typeof v,C;if(C===void 0)if(N=="number"||N=="boolean")C=""+v;else if(v===null)C="";else{let V={instancePath:e+"/query",schemaPath:"#/properties/query/anyOf/1/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[V]:i.push(V),o++}C!==void 0&&(v=C,t!==void 0&&(t.query=C))}var w=P===o;T=T||w}if(T)o=$,i!==null&&($?i.length=$:i=null);else{let P={instancePath:e+"/query",schemaPath:"#/properties/query/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[P]:i.push(P),o++,$t.errors=i,!1}var m=S===o}else var m=!0;if(m){if(t.simulate!==void 0){let v=t.simulate,S=o;if(o===S)if(v&&typeof v=="object"&&!Array.isArray(v)){if(v.end!==void 0){let T=v.end,O=o;if(typeof T!="boolean"){let R;if(R===void 0)if(T==="false"||T===0||T===null)R=!1;else if(T==="true"||T===1)R=!0;else return $t.errors=[{instancePath:e+"/simulate/end",schemaPath:"#/properties/simulate/properties/end/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;R!==void 0&&(T=R,v!==void 0&&(v.end=R))}var _=O===o}else var _=!0;if(_){if(v.split!==void 0){let T=v.split,O=o;if(typeof T!="boolean"){let P;if(P===void 0)if(T==="false"||T===0||T===null)P=!1;else if(T==="true"||T===1)P=!0;else return $t.errors=[{instancePath:e+"/simulate/split",schemaPath:"#/properties/simulate/properties/split/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;P!==void 0&&(T=P,v!==void 0&&(v.split=P))}var _=O===o}else var _=!0;if(_){if(v.error!==void 0){let T=v.error,O=o;if(typeof T!="boolean"){let P;if(P===void 0)if(T==="false"||T===0||T===null)P=!1;else if(T==="true"||T===1)P=!0;else return $t.errors=[{instancePath:e+"/simulate/error",schemaPath:"#/properties/simulate/properties/error/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;P!==void 0&&(T=P,v!==void 0&&(v.error=P))}var _=O===o}else var _=!0;if(_)if(v.close!==void 0){let T=v.close,O=o;if(typeof T!="boolean"){let P;if(P===void 0)if(T==="false"||T===0||T===null)P=!1;else if(T==="true"||T===1)P=!0;else return $t.errors=[{instancePath:e+"/simulate/close",schemaPath:"#/properties/simulate/properties/close/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;P!==void 0&&(T=P,v!==void 0&&(v.close=P))}var _=O===o}else var _=!0}}}else return $t.errors=[{instancePath:e+"/simulate",schemaPath:"#/properties/simulate/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var m=S===o}else var m=!0;if(m){if(t.authority!==void 0){let v=t.authority,S=o;if(typeof v!="string"){let T=typeof v,O;if(O===void 0)if(T=="number"||T=="boolean")O=""+v;else if(v===null)O="";else return $t.errors=[{instancePath:e+"/authority",schemaPath:"#/properties/authority/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;O!==void 0&&(v=O,t!==void 0&&(t.authority=O))}var m=S===o}else var m=!0;if(m){if(t.remoteAddress!==void 0){let v=t.remoteAddress,S=o;if(typeof v!="string"){let T=typeof v,O;if(O===void 0)if(T=="number"||T=="boolean")O=""+v;else if(v===null)O="";else return $t.errors=[{instancePath:e+"/remoteAddress",schemaPath:"#/properties/remoteAddress/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;O!==void 0&&(v=O,t!==void 0&&(t.remoteAddress=O))}var m=S===o}else var m=!0;if(m){if(t.method!==void 0){let v=t.method,S=o;if(typeof v!="string"){let T=typeof v,O;if(O===void 0)if(T=="number"||T=="boolean")O=""+v;else if(v===null)O="";else return $t.errors=[{instancePath:e+"/method",schemaPath:"#/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;O!==void 0&&(v=O,t!==void 0&&(t.method=O))}if(!(v==="ACL"||v==="BIND"||v==="CHECKOUT"||v==="CONNECT"||v==="COPY"||v==="DELETE"||v==="GET"||v==="HEAD"||v==="LINK"||v==="LOCK"||v==="M-SEARCH"||v==="MERGE"||v==="MKACTIVITY"||v==="MKCALENDAR"||v==="MKCOL"||v==="MOVE"||v==="NOTIFY"||v==="OPTIONS"||v==="PATCH"||v==="POST"||v==="PROPFIND"||v==="PROPPATCH"||v==="PURGE"||v==="PUT"||v==="QUERY"||v==="REBIND"||v==="REPORT"||v==="SEARCH"||v==="SOURCE"||v==="SUBSCRIBE"||v==="TRACE"||v==="UNBIND"||v==="UNLINK"||v==="UNLOCK"||v==="UNSUBSCRIBE"||v==="acl"||v==="bind"||v==="checkout"||v==="connect"||v==="copy"||v==="delete"||v==="get"||v==="head"||v==="link"||v==="lock"||v==="m-search"||v==="merge"||v==="mkactivity"||v==="mkcalendar"||v==="mkcol"||v==="move"||v==="notify"||v==="options"||v==="patch"||v==="post"||v==="propfind"||v==="proppatch"||v==="purge"||v==="put"||v==="query"||v==="rebind"||v==="report"||v==="search"||v==="source"||v==="subscribe"||v==="trace"||v==="unbind"||v==="unlink"||v==="unlock"||v==="unsubscribe"))return $t.errors=[{instancePath:e+"/method",schemaPath:"#/properties/method/enum",keyword:"enum",params:{allowedValues:ASe.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var m=S===o}else var m=!0;if(m)if(t.validate!==void 0){let v=t.validate,S=o;if(typeof v!="boolean"){let T;if(T===void 0)if(v==="false"||v===0||v===null)T=!1;else if(v==="true"||v===1)T=!0;else return $t.errors=[{instancePath:e+"/validate",schemaPath:"#/properties/validate/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;T!==void 0&&(v=T,t!==void 0&&(t.validate=T))}var m=S===o}else var m=!0}}}}}}}}}else return $t.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return $t.errors=i,o===0}});var aH=E((Mje,Dd)=>{"use strict";var kSe=require("assert"),x1=Y4(),Cy=nH(),Ay="The dispatch function has already been invoked",iH=sH();function N1(t,e,r){return r===void 0?new kd(t,e):Iy(t,e,r)}function DSe(t,e){let r=t._lightMyRequest.payload;if(!r||r._readableState||typeof r.resume!="function")return e();let n=[];r.on("data",s=>n.push(Buffer.from(s))),r.on("end",()=>{let s=Buffer.concat(n);return t.headers["content-length"]=t.headers["content-length"]||""+s.length,delete t.headers["transfer-encoding"],t._lightMyRequest.payload=s,e()}),r.resume()}function oH(t,e,r,n){return r.once("error",function(s){this.destroyed&&n.destroy(s)}),r.once("close",function(){this.destroyed&&!this._error&&n.destroy()}),DSe(r,()=>t.call(e,r,n))}function Iy(t,e,r){if(e=typeof e=="string"?{url:e}:e,e.validate!==!1&&(kSe(typeof t=="function","dispatchFunc should be a function"),!iH(e)))throw new Error(iH.errors.map(o=>o.message));let n=e.server||{},s=e.Request?x1.CustomRequest:x1;if(t.request&&t.request.app===t&&(Object.setPrototypeOf(Object.getPrototypeOf(t.request),s.prototype),Object.setPrototypeOf(Object.getPrototypeOf(t.response),Cy.prototype)),typeof r=="function"){let i=new s(e),o=new Cy(i,r);return oH(t,n,i,o)}else return new Promise((i,o)=>{let a=new s(e),c=new Cy(a,i,o);oH(t,n,a,c)})}function kd(t,e){typeof e=="string"?this.option={url:e}:this.option=Object.assign({},e),this.dispatch=t,this._hasInvoked=!1,this._promise=null,this.option.autoStart!==!1&&process.nextTick(()=>{this._hasInvoked||this.end()})}var MSe=["delete","get","head","options","patch","post","put","trace"];MSe.forEach(t=>{kd.prototype[t]=function(e){if(this._hasInvoked===!0||this._promise)throw new Error(Ay);return this.option.url=e,this.option.method=t.toUpperCase(),this}});var jSe=["body","cookies","headers","payload","query"];jSe.forEach(t=>{kd.prototype[t]=function(e){if(this._hasInvoked===!0||this._promise)throw new Error(Ay);return this.option[t]=e,this}});kd.prototype.end=function(t){if(this._hasInvoked===!0||this._promise)throw new Error(Ay);if(this._hasInvoked=!0,typeof t=="function")Iy(this.dispatch,this.option,t);else return this._promise=Iy(this.dispatch,this.option),this._promise};Object.getOwnPropertyNames(Promise.prototype).forEach(t=>{t!=="constructor"&&(kd.prototype[t]=function(...e){if(!this._promise){if(this._hasInvoked===!0)throw new Error(Ay);this._hasInvoked=!0,this._promise=Iy(this.dispatch,this.option)}return this._promise[t](...e)})});function qSe(t){return t instanceof x1||t instanceof Cy||t?.constructor?.name==="_CustomLMRRequest"}Dd.exports=N1;Dd.exports.default=N1;Dd.exports.inject=N1;Dd.exports.isInjection=qSe});var SH=E((jje,Fd)=>{"use strict";var LSe="5.6.2",FSe=kx(),jy=require("http"),USe=require("diagnostics_channel"),Md,{kAvvioBoot:jd,kChildren:C1,kServerBindings:cH,kBodyLimit:BSe,kSupportedHTTPMethods:Ra,kRoutePrefix:lH,kLogLevel:VSe,kLogSerializers:zSe,kHooks:I1,kSchemaController:po,kRequestAcceptVersion:HSe,kReplySerializerDefault:uH,kContentTypeParser:GSe,kReply:WSe,kRequest:KSe,kFourOhFour:JSe,kState:ht,kOptions:A1,kPluginNameChain:qd,kSchemaErrorFormatter:k1,kErrorHandler:ky,kKeepAliveConnections:D1,kChildLoggerFactory:M1,kGenReqId:j1,kErrorHandlerAlreadySet:Dy}=Nt(),{createServer:YSe}=cN(),Ld=kp(),My=Fp(),XSe=Up(),$a=Su(),Oa=Rw(),fH=S$(),{Hooks:QSe,hookRunnerApplication:dH,supportedHooks:q1}=Ci(),{createChildLogger:hH,defaultChildLoggerFactory:ZSe,createLogger:eTe}=_u(),pH=z$(),{getGenReqId:mH,reqIdGenFactory:bH}=ay(),{buildRouting:tTe,validateBodyLimitOption:rTe,buildRouterOptions:nTe}=_4(),sTe=R4(),EH=O4(),iTe=M4(),{appendStackTrace:oTe,AVVIO_ERRORS_MAP:gH,...Pa}=zt(),aTe=W_(),{defaultInitOptions:Xr}=EH,{FST_ERR_ASYNC_CONSTRAINT:cTe,FST_ERR_BAD_URL:lTe,FST_ERR_OPTIONS_NOT_OBJ:uTe,FST_ERR_QSP_NOT_FN:fTe,FST_ERR_SCHEMA_CONTROLLER_BUCKET_OPT_NOT_FN:dTe,FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_OBJ:hTe,FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_ARR:pTe,FST_ERR_INSTANCE_ALREADY_LISTENING:mTe,FST_ERR_REOPENED_CLOSE_SERVER:gTe,FST_ERR_ROUTE_REWRITE_NOT_STR:yTe,FST_ERR_SCHEMA_ERROR_FORMATTER_NOT_FN:yH,FST_ERR_ERROR_HANDLER_NOT_FN:_Te,FST_ERR_ERROR_HANDLER_ALREADY_SET:vTe,FST_ERR_ROUTE_METHOD_INVALID:wTe}=Pa,{buildErrorHandler:_H}=wu(),{FSTWRN004:bTe}=oc(),vH=USe.channel("fastify.initialization");function L1(t){let{options:e,genReqId:r,disableRequestLogging:n,hasLogger:s,initialConfig:i}=ETe(t,A,N),o=tTe({config:e.routerOptions}),a=sTe(e),c=re(o,e),{server:l,listen:u,forceCloseConnections:d,serverHasCloseAllConnections:p,serverHasCloseHttp2Sessions:f,keepAliveConnections:h}=YSe(e,c),m=Ld.setupResponseListeners,y=fH.buildSchemaController(null,e.schemaController),g={[ht]:{listening:!1,closing:!1,started:!1,ready:!1,booting:!1,aborted:!1,readyResolver:null},[D1]:h,[Ra]:{bodyless:new Set(["GET","HEAD","TRACE"]),bodywith:new Set(["DELETE","OPTIONS","PATCH","PUT","POST"])},[A1]:e,[C1]:[],[cH]:[],[BSe]:e.bodyLimit,[lH]:"",[VSe]:"",[zSe]:null,[I1]:new QSe,[po]:y,[k1]:null,[ky]:_H(),[Dy]:!1,[M1]:e.childLoggerFactory||ZSe,[uH]:null,[GSe]:new Oa(e.bodyLimit,e.onProtoPoisoning||Xr.onProtoPoisoning,e.onConstructorPoisoning||Xr.onConstructorPoisoning),[WSe]:Ld.buildReply(Ld),[KSe]:My.buildRequest(My,e.trustProxy),[JSe]:a,[pH.kRegisteredPlugins]:[],[qd]:["fastify"],[jd]:null,[j1]:r,routing:c,delete:function(D,z,B){return o.prepareRoute.call(this,{method:"DELETE",url:D,options:z,handler:B})},get:function(D,z,B){return o.prepareRoute.call(this,{method:"GET",url:D,options:z,handler:B})},head:function(D,z,B){return o.prepareRoute.call(this,{method:"HEAD",url:D,options:z,handler:B})},trace:function(D,z,B){return o.prepareRoute.call(this,{method:"TRACE",url:D,options:z,handler:B})},patch:function(D,z,B){return o.prepareRoute.call(this,{method:"PATCH",url:D,options:z,handler:B})},post:function(D,z,B){return o.prepareRoute.call(this,{method:"POST",url:D,options:z,handler:B})},put:function(D,z,B){return o.prepareRoute.call(this,{method:"PUT",url:D,options:z,handler:B})},options:function(D,z,B){return o.prepareRoute.call(this,{method:"OPTIONS",url:D,options:z,handler:B})},all:function(D,z,B){return o.prepareRoute.call(this,{method:this.supportedMethods,url:D,options:z,handler:B})},route:function(D){return o.route.call(this,{options:D})},hasRoute:function(D){return o.hasRoute.call(this,{options:D})},findRoute:function(D){return o.findRoute(D)},log:e.logger,withTypeProvider:O,addHook:R,addSchema:P,getSchema:y.getSchema.bind(y),getSchemas:y.getSchemas.bind(y),setValidatorCompiler:te,setSerializerCompiler:K,setSchemaController:xt,setReplySerializer:Ar,setSchemaErrorFormatter:H,setGenReqId:Xa,addContentTypeParser:Oa.helpers.addContentTypeParser,hasContentTypeParser:Oa.helpers.hasContentTypeParser,getDefaultJsonParser:Oa.defaultParsers.getDefaultJsonParser,defaultTextParser:Oa.defaultParsers.defaultTextParser,removeContentTypeParser:Oa.helpers.removeContentTypeParser,removeAllContentTypeParsers:Oa.helpers.removeAllContentTypeParsers,register:null,after:null,ready:null,onClose:null,close:null,printPlugins:null,hasPlugin:function(x){return this[pH.kRegisteredPlugins].includes(x)||this[qd].includes(x)},listen:u,server:l,addresses:function(){let x=this[cH].map(D=>D.address());return x.push(this.server.address()),x.filter(D=>D)},decorate:$a.add,hasDecorator:$a.exist,decorateReply:$a.decorateReply,decorateRequest:$a.decorateRequest,hasRequestDecorator:$a.existRequest,hasReplyDecorator:$a.existReply,getDecorator:$a.getInstanceDecorator,addHttpMethod:No,inject:$,printRoutes:xo,setNotFoundHandler:V,setErrorHandler:Y,setChildLoggerFactory:ls,initialConfig:i,addConstraintStrategy:o.addConstraintStrategy.bind(o),hasConstraintStrategy:o.hasConstraintStrategy.bind(o)};Object.defineProperties(g,{listeningOrigin:{get(){let x=this.addresses().slice(-1).pop();if(typeof x=="string")return x;let D=x.family==="IPv6"?`[${x.address}]`:x.address;return`${this[A1].https?"https":"http"}://${D}:${x.port}`}},pluginName:{configurable:!0,get(){return this[qd].length>1?this[qd].join(" -> "):this[qd][0]}},prefix:{configurable:!0,get(){return this[lH]}},validatorCompiler:{configurable:!0,get(){return this[po].getValidatorCompiler()}},serializerCompiler:{configurable:!0,get(){return this[po].getSerializerCompiler()}},childLoggerFactory:{configurable:!0,get(){return this[M1]}},version:{configurable:!0,get(){return LSe}},errorHandler:{configurable:!0,get(){return this[ky].func}},genReqId:{configurable:!0,get(){return this[j1]}},supportedMethods:{configurable:!1,get(){return[...this[Ra].bodyless,...this[Ra].bodywith]}}}),e.schemaErrorFormatter&&(wH(e.schemaErrorFormatter),g[k1]=e.schemaErrorFormatter.bind(g));let w=Number(e.pluginTimeout),_=FSe(g,{autostart:!1,timeout:isNaN(w)===!1?w:Xr.pluginTimeout,expose:{use:"register"}});_.override=iTe,_.on("start",()=>g[ht].started=!0),g[jd]=g.ready,g.ready=T,g.printPlugins=_.prettyPrint.bind(_),_.once("preReady",()=>{g.onClose((x,D)=>{g[ht].closing=!0,o.closeRoutes(),dH("preClose",g[jd],g,function(){if(g[ht].listening){if(d==="idle")x.server.closeIdleConnections();else if(p&&d)x.server.closeAllConnections();else if(d===!0)for(let z of g[D1])z.destroy(),g[D1].delete(z)}f&&x.server.closeHttp2Sessions(),!e.serverFactory||g[ht].listening?x.server.close(function(z){z&&z.code!=="ERR_SERVER_NOT_RUNNING"?D(null):D()}):process.nextTick(D,null)})})});let v=new XSe({server:g,config:{}});return g.setNotFoundHandler(),a.arrange404(g),o.setup(e,{avvio:_,fourOhFour:a,hasLogger:s,setupResponseListeners:m,throwIfAlreadyStarted:S,keepAliveConnections:h}),l.on("clientError",e.clientErrorHandler.bind(g)),vH.hasSubscribers&&vH.publish({fastify:g}),"asyncDispose"in Symbol&&(g[Symbol.asyncDispose]=function(){return g.close()}),g;function S(x){if(g[ht].started)throw new mTe(x)}function $(x,D){if(Md===void 0&&(Md=aH()),g[ht].started){if(g[ht].closing){let z=new gTe;if(D){D(z);return}else return Promise.reject(z)}return Md(c,x,D)}if(D)this.ready(z=>{z?D(z,null):Md(c,x,D)});else return Md((z,B)=>{this.ready(function(lt){if(lt){B.emit("error",lt);return}c(z,B)})},x)}function T(x){if(this[ht].readyResolver!==null){if(x!=null){this[ht].readyResolver.promise.then(()=>x(null,g),x);return}return this[ht].readyResolver.promise}if(process.nextTick(D),this[ht].readyResolver=aTe.withResolvers(),x)this[ht].readyResolver.promise.then(()=>x(null,g),x);else return this[ht].readyResolver.promise;function D(){g[jd]((B,lt)=>{B||g[ht].started||g[ht].ready||g[ht].booting?z(B):(g[ht].booting=!0,dH("onReady",g[jd],g,z)),lt()})}function z(B){if(B=B!=null&&gH[B.code]!=null?oTe(B,new gH[B.code](B.message)):B,B)return g[ht].readyResolver.reject(B);g[ht].readyResolver.resolve(g),g[ht].booting=!1,g[ht].ready=!0,g[ht].readyResolver=null}}function O(){return this}function R(x,D){if(S('Cannot call "addHook"!'),D==null)throw new Pa.FST_ERR_HOOK_INVALID_HANDLER(x,D);if(x==="onSend"||x==="preSerialization"||x==="onError"||x==="preParsing"){if(D.constructor.name==="AsyncFunction"&&D.length===4)throw new Pa.FST_ERR_HOOK_INVALID_ASYNC_HANDLER}else if(x==="onReady"||x==="onListen"){if(D.constructor.name==="AsyncFunction"&&D.length!==0)throw new Pa.FST_ERR_HOOK_INVALID_ASYNC_HANDLER}else if(x==="onRequestAbort"){if(D.constructor.name==="AsyncFunction"&&D.length!==1)throw new Pa.FST_ERR_HOOK_INVALID_ASYNC_HANDLER}else if(D.constructor.name==="AsyncFunction"&&D.length===3)throw new Pa.FST_ERR_HOOK_INVALID_ASYNC_HANDLER;return x==="onClose"?this.onClose(D.bind(this)):x==="onReady"||x==="onListen"||x==="onRoute"?this[I1].add(x,D):this.after((B,lt)=>{try{z.call(this,x,D),lt(B)}catch(ft){lt(ft)}}),this;function z(B,lt){this[I1].add(B,lt),this[C1].forEach(ft=>z.call(ft,B,lt))}}function P(x){return S('Cannot call "addSchema"!'),this[po].add(x),this[C1].forEach(D=>D.addSchema(x)),this}function A(x,D){x.headers["accept-version"]!==void 0&&(x.headers[HSe]=x.headers["accept-version"],x.headers["accept-version"]=void 0),a.router.lookup(x,D)}function N(x,D,z){if(e.frameworkErrors){let lt=mH(v.server,D),ft=hH(v,e.logger,D,lt),It=new My(lt,null,D,null,ft,v),ce=new Ld(z,It,ft);return n===!1&&ft.info({req:It},"incoming request"),e.frameworkErrors(new lTe(x),It,ce)}let B=`{"error":"Bad Request","code":"FST_ERR_BAD_URL","message":"'${x}' is not a valid url component","statusCode":400}`;z.writeHead(400,{"Content-Type":"application/json","Content-Length":B.length}),z.end(B)}function C(x,D,z){if(x!==!1)return function(lt){if(lt){if(e.frameworkErrors){let It=mH(v.server,D),ce=hH(v,e.logger,D,It),Mn=new My(It,null,D,null,ce,v),vr=new Ld(z,Mn,ce);return n===!1&&ce.info({req:Mn},"incoming request"),e.frameworkErrors(new cTe,Mn,vr)}let ft='{"error":"Internal Server Error","message":"Unexpected error from async constraint","statusCode":500}';z.writeHead(500,{"Content-Type":"application/json","Content-Length":ft.length}),z.end(ft)}}}function V(x,D){return S('Cannot call "setNotFoundHandler"!'),a.setNotFoundHandler.call(this,x,D,_,o.routeHandler),this}function te(x){return S('Cannot call "setValidatorCompiler"!'),this[po].setValidatorCompiler(x),this}function H(x){return S('Cannot call "setSchemaErrorFormatter"!'),wH(x),this[k1]=x.bind(this),this}function K(x){return S('Cannot call "setSerializerCompiler"!'),this[po].setSerializerCompiler(x),this}function xt(x){S('Cannot call "setSchemaController"!');let D=this[po],z=fH.buildSchemaController(D,Object.assign({},D.opts,x));return this[po]=z,this.getSchema=z.getSchema.bind(z),this.getSchemas=z.getSchemas.bind(z),this}function Ar(x){return S('Cannot call "setReplySerializer"!'),this[uH]=x,this}function Y(x){if(S('Cannot call "setErrorHandler"!'),typeof x!="function")throw new _Te;if(!e.allowErrorHandlerOverride&&this[Dy])throw new vTe;return this[Dy]&&bTe("To disable this behavior, set 'allowErrorHandlerOverride' to false or ignore this message. For more information, visit: https://fastify.dev/docs/latest/Reference/Server/#allowerrorhandleroverride"),this[Dy]=!0,this[ky]=_H(this[ky],x.bind(this)),this}function ls(x){return S('Cannot call "setChildLoggerFactory"!'),this[M1]=x,this}function xo(x={}){return x.includeMeta=x.includeHooks?x.includeMeta?q1.concat(x.includeMeta):q1:x.includeMeta,o.printRoutes(x)}function re(x,{rewriteUrl:D,logger:z}){let B;return function(ft,It){if(B===void 0&&(B=x.isAsyncConstraint()),D){ft.originalUrl=ft.url;let ce=D.call(g,ft);if(typeof ce=="string")ft.url=ce;else{let Mn=new yTe(ft.url,typeof ce);ft.destroy(Mn)}}x.routing(ft,It,C(B,ft,It))}}function Xa(x){return S('Cannot call "setGenReqId"!'),this[j1]=bH(this[A1].requestIdHeader,x),this}function No(x,{hasBody:D=!1}={}){if(typeof x!="string"||jy.METHODS.indexOf(x)===-1)throw new wTe;D===!0?(this[Ra].bodywith.add(x),this[Ra].bodyless.delete(x)):(this[Ra].bodywith.delete(x),this[Ra].bodyless.add(x));let z=x.toLowerCase();return this.hasDecorator(z)||this.decorate(z,function(B,lt,ft){return o.prepareRoute.call(this,{method:x,url:B,options:lt,handler:ft})}),this}}function ETe(t,e,r){if(t&&typeof t!="object")throw new uTe;if(t=Object.assign({},t),t.querystringParser&&typeof t.querystringParser!="function"||t.routerOptions?.querystringParser&&typeof t.routerOptions.querystringParser!="function")throw new fTe(typeof(t.querystringParser??t.routerOptions.querystringParser));if(t.schemaController&&t.schemaController.bucket&&typeof t.schemaController.bucket!="function")throw new dTe(typeof t.schemaController.bucket);rTe(t.bodyLimit);let n=typeof t.requestIdHeader=="string"&&t.requestIdHeader.length!==0?t.requestIdHeader.toLowerCase():t.requestIdHeader===!0&&"request-id",s=bH(n,t.genReqId),i=t.requestIdLogLabel||"reqId";t.bodyLimit=t.bodyLimit||Xr.bodyLimit;let o=t.disableRequestLogging||!1,a=Object.assign({customOptions:{},plugins:[]},t.ajv);if(!a.customOptions||Object.prototype.toString.call(a.customOptions)!=="[object Object]")throw new hTe(typeof a.customOptions);if(!a.plugins||!Array.isArray(a.plugins))throw new pTe(typeof a.plugins);let{logger:c,hasLogger:l}=eTe(t);t.connectionTimeout=t.connectionTimeout||Xr.connectionTimeout,t.keepAliveTimeout=t.keepAliveTimeout||Xr.keepAliveTimeout,t.maxRequestsPerSocket=t.maxRequestsPerSocket||Xr.maxRequestsPerSocket,t.requestTimeout=t.requestTimeout||Xr.requestTimeout,t.logger=c,t.requestIdHeader=n,t.requestIdLogLabel=i,t.disableRequestLogging=o,t.ajv=a,t.clientErrorHandler=t.clientErrorHandler||TTe,t.allowErrorHandlerOverride=t.allowErrorHandlerOverride??Xr.allowErrorHandlerOverride;let u=EH(t);return t.exposeHeadRoutes=u.exposeHeadRoutes,t.http2SessionTimeout=u.http2SessionTimeout,t.routerOptions=nTe(t,{defaultRoute:e,onBadUrl:r,ignoreTrailingSlash:Xr.ignoreTrailingSlash,ignoreDuplicateSlashes:Xr.ignoreDuplicateSlashes,maxParamLength:Xr.maxParamLength,allowUnsafeRegex:Xr.allowUnsafeRegex,buildPrettyMeta:STe,useSemicolonDelimiter:Xr.useSemicolonDelimiter}),{options:t,genReqId:s,disableRequestLogging:o,hasLogger:l,initialConfig:u}}function STe(t){let e={};return["errorHandler","logLevel","logSerializers"].concat(q1).forEach(n=>{e[n]=t.store[n]}),Object.assign({},e)}function TTe(t,e){if(t.code==="ECONNRESET"||e.destroyed)return;let r,n,s,i;t.code==="ERR_HTTP_REQUEST_TIMEOUT"?(n="408",s=jy.STATUS_CODES[n],r=`{"error":"${s}","message":"Client Timeout","statusCode":408}`,i="timeout"):t.code==="HPE_HEADER_OVERFLOW"?(n="431",s=jy.STATUS_CODES[n],r=`{"error":"${s}","message":"Exceeded maximum allowed HTTP header size","statusCode":431}`,i="header_overflow"):(n="400",s=jy.STATUS_CODES[n],r=`{"error":"${s}","message":"Client Error","statusCode":400}`,i="error"),this.log.trace({err:t},`client ${i}`),e.writable&&e.write(`HTTP/1.1 ${n} ${s}\r
Content-Length: ${r.length}\r
Content-Type: application/json\r
\r
${r}`),e.destroy(t)}function wH(t){if(typeof t!="function")throw new yH(typeof t);if(t.constructor.name==="AsyncFunction")throw new yH("AsyncFunction")}Fd.exports=L1;Fd.exports.errorCodes=Pa;Fd.exports.fastify=L1;Fd.exports.default=L1});var RH=E(xa=>{"use strict";Object.defineProperty(xa,"__esModule",{value:!0});xa.range=xa.balanced=void 0;var RTe=(t,e,r)=>{let n=t instanceof RegExp?TH(t,r):t,s=e instanceof RegExp?TH(e,r):e,i=n!==null&&s!=null&&(0,xa.range)(n,s,r);return i&&{start:i[0],end:i[1],pre:r.slice(0,i[0]),body:r.slice(i[0]+n.length,i[1]),post:r.slice(i[1]+s.length)}};xa.balanced=RTe;var TH=(t,e)=>{let r=e.match(t);return r?r[0]:null},$Te=(t,e,r)=>{let n,s,i,o,a,c=r.indexOf(t),l=r.indexOf(e,c+1),u=c;if(c>=0&&l>0){if(t===e)return[c,l];for(n=[],i=r.length;u>=0&&!a;){if(u===c)n.push(u),c=r.indexOf(t,u+1);else if(n.length===1){let d=n.pop();d!==void 0&&(a=[d,l])}else s=n.pop(),s!==void 0&&s<i&&(i=s,o=l),l=r.indexOf(e,u+1);u=c<l&&c>=0?c:l}n.length&&o!==void 0&&(a=[i,o])}return a};xa.range=$Te});var IH=E(B1=>{"use strict";Object.defineProperty(B1,"__esModule",{value:!0});B1.expand=LTe;var $H=RH(),OH="\0SLASH"+Math.random()+"\0",PH="\0OPEN"+Math.random()+"\0",U1="\0CLOSE"+Math.random()+"\0",xH="\0COMMA"+Math.random()+"\0",NH="\0PERIOD"+Math.random()+"\0",OTe=new RegExp(OH,"g"),PTe=new RegExp(PH,"g"),xTe=new RegExp(U1,"g"),NTe=new RegExp(xH,"g"),CTe=new RegExp(NH,"g"),ITe=/\\\\/g,ATe=/\\{/g,kTe=/\\}/g,DTe=/\\,/g,MTe=/\\./g;function F1(t){return isNaN(t)?t.charCodeAt(0):parseInt(t,10)}function jTe(t){return t.replace(ITe,OH).replace(ATe,PH).replace(kTe,U1).replace(DTe,xH).replace(MTe,NH)}function qTe(t){return t.replace(OTe,"\\").replace(PTe,"{").replace(xTe,"}").replace(NTe,",").replace(CTe,".")}function CH(t){if(!t)return[""];let e=[],r=(0,$H.balanced)("{","}",t);if(!r)return t.split(",");let{pre:n,body:s,post:i}=r,o=n.split(",");o[o.length-1]+="{"+s+"}";let a=CH(i);return i.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),e.push.apply(e,o),e}function LTe(t){return t?(t.slice(0,2)==="{}"&&(t="\\{\\}"+t.slice(2)),Ud(jTe(t),!0).map(qTe)):[]}function FTe(t){return"{"+t+"}"}function UTe(t){return/^-?0\d/.test(t)}function BTe(t,e){return t<=e}function VTe(t,e){return t>=e}function Ud(t,e){let r=[],n=(0,$H.balanced)("{","}",t);if(!n)return[t];let s=n.pre,i=n.post.length?Ud(n.post,!1):[""];if(/\$$/.test(n.pre))for(let o=0;o<i.length;o++){let a=s+"{"+n.body+"}"+i[o];r.push(a)}else{let o=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),a=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),c=o||a,l=n.body.indexOf(",")>=0;if(!c&&!l)return n.post.match(/,(?!,).*\}/)?(t=n.pre+"{"+n.body+U1+n.post,Ud(t)):[t];let u;if(c)u=n.body.split(/\.\./);else if(u=CH(n.body),u.length===1&&u[0]!==void 0&&(u=Ud(u[0],!1).map(FTe),u.length===1))return i.map(p=>n.pre+u[0]+p);let d;if(c&&u[0]!==void 0&&u[1]!==void 0){let p=F1(u[0]),f=F1(u[1]),h=Math.max(u[0].length,u[1].length),m=u.length===3&&u[2]!==void 0?Math.abs(F1(u[2])):1,y=BTe;f<p&&(m*=-1,y=VTe);let w=u.some(UTe);d=[];for(let _=p;y(_,f);_+=m){let v;if(a)v=String.fromCharCode(_),v==="\\"&&(v="");else if(v=String(_),w){let S=h-v.length;if(S>0){let $=new Array(S+1).join("0");_<0?v="-"+$+v.slice(1):v=$+v}}d.push(v)}}else{d=[];for(let p=0;p<u.length;p++)d.push.apply(d,Ud(u[p],!1))}for(let p=0;p<d.length;p++)for(let f=0;f<i.length;f++){let h=s+d[p]+i[f];(!e||c||h)&&r.push(h)}}return r}});var AH=E(qy=>{"use strict";Object.defineProperty(qy,"__esModule",{value:!0});qy.assertValidPattern=void 0;var zTe=1024*64,HTe=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>zTe)throw new TypeError("pattern is too long")};qy.assertValidPattern=HTe});var DH=E(Ly=>{"use strict";Object.defineProperty(Ly,"__esModule",{value:!0});Ly.parseClass=void 0;var GTe={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},Bd=t=>t.replace(/[[\]\\-]/g,"\\$&"),WTe=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),kH=t=>t.join(""),KTe=(t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],s=[],i=r+1,o=!1,a=!1,c=!1,l=!1,u=r,d="";e:for(;i<t.length;){let m=t.charAt(i);if((m==="!"||m==="^")&&i===r+1){l=!0,i++;continue}if(m==="]"&&o&&!c){u=i+1;break}if(o=!0,m==="\\"&&!c){c=!0,i++;continue}if(m==="["&&!c){for(let[y,[g,w,_]]of Object.entries(GTe))if(t.startsWith(y,i)){if(d)return["$.",!1,t.length-r,!0];i+=y.length,_?s.push(g):n.push(g),a=a||w;continue e}}if(c=!1,d){m>d?n.push(Bd(d)+"-"+Bd(m)):m===d&&n.push(Bd(m)),d="",i++;continue}if(t.startsWith("-]",i+1)){n.push(Bd(m+"-")),i+=2;continue}if(t.startsWith("-",i+1)){d=m,i+=2;continue}n.push(Bd(m)),i++}if(u<i)return["",!1,0,!1];if(!n.length&&!s.length)return["$.",!1,t.length-r,!0];if(s.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!l){let m=n[0].length===2?n[0].slice(-1):n[0];return[WTe(m),!1,u-r,!1]}let p="["+(l?"^":"")+kH(n)+"]",f="["+(l?"":"^")+kH(s)+"]";return[n.length&&s.length?"("+p+"|"+f+")":n.length?p:f,a,u-r,!0]};Ly.parseClass=KTe});var Uy=E(Fy=>{"use strict";Object.defineProperty(Fy,"__esModule",{value:!0});Fy.unescape=void 0;var JTe=(t,{windowsPathsNoEscape:e=!1,magicalBraces:r=!0}={})=>r?e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1"):e?t.replace(/\[([^\/\\{}])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\{}])\]/g,"$1$2").replace(/\\([^\/{}])/g,"$1");Fy.unescape=JTe});var H1=E(Wy=>{"use strict";Object.defineProperty(Wy,"__esModule",{value:!0});Wy.AST=void 0;var YTe=DH(),By=Uy(),XTe=new Set(["!","?","+","*","@"]),MH=t=>XTe.has(t),QTe="(?!(?:^|/)\\.\\.?(?:$|/))",Vy="(?!\\.)",ZTe=new Set(["[","."]),eRe=new Set(["..","."]),tRe=new Set("().*{}+?[]^$\\!"),rRe=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),z1="[^/]",jH=z1+"*?",qH=z1+"+?",Ct,Dt,_i,ct,Ot,mo,Na,go,Ms,Ca,zd,Hy,LH,Cl,zy,Hd,V1,Gy,FH,Qr=class{constructor(e,r,n={}){At(this,Hy);At(this,Hd);Bh(this,"type");At(this,Ct,void 0);At(this,Dt,void 0);At(this,_i,!1);At(this,ct,[]);At(this,Ot,void 0);At(this,mo,void 0);At(this,Na,void 0);At(this,go,!1);At(this,Ms,void 0);At(this,Ca,void 0);At(this,zd,!1);this.type=e,e&&ut(this,Dt,!0),ut(this,Ot,r),ut(this,Ct,L(this,Ot)?L(L(this,Ot),Ct):this),ut(this,Ms,L(this,Ct)===this?n:L(L(this,Ct),Ms)),ut(this,Na,L(this,Ct)===this?[]:L(L(this,Ct),Na)),e==="!"&&!L(L(this,Ct),go)&&L(this,Na).push(this),ut(this,mo,L(this,Ot)?L(L(this,Ot),ct).length:0)}get hasMagic(){if(L(this,Dt)!==void 0)return L(this,Dt);for(let e of L(this,ct))if(typeof e!="string"&&(e.type||e.hasMagic))return ut(this,Dt,!0);return L(this,Dt)}toString(){return L(this,Ca)!==void 0?L(this,Ca):this.type?ut(this,Ca,this.type+"("+L(this,ct).map(e=>String(e)).join("|")+")"):ut(this,Ca,L(this,ct).map(e=>String(e)).join(""))}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof Qr&&L(r,Ot)===this))throw new Error("invalid part: "+r);L(this,ct).push(r)}}toJSON(){let e=this.type===null?L(this,ct).slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...L(this,ct).map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===L(this,Ct)||L(L(this,Ct),go)&&L(this,Ot)?.type==="!")&&e.push({}),e}isStart(){if(L(this,Ct)===this)return!0;if(!L(this,Ot)?.isStart())return!1;if(L(this,mo)===0)return!0;let e=L(this,Ot);for(let r=0;r<L(this,mo);r++){let n=L(e,ct)[r];if(!(n instanceof Qr&&n.type==="!"))return!1}return!0}isEnd(){if(L(this,Ct)===this||L(this,Ot)?.type==="!")return!0;if(!L(this,Ot)?.isEnd())return!1;if(!this.type)return L(this,Ot)?.isEnd();let e=L(this,Ot)?L(L(this,Ot),ct).length:0;return L(this,mo)===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new Qr(this.type,e);for(let n of L(this,ct))r.copyIn(n);return r}static fromGlob(e,r={}){var s;let n=new Qr(null,void 0,r);return xi(s=Qr,Cl,zy).call(s,e,n,0,r),n}toMMPattern(){if(this!==L(this,Ct))return L(this,Ct).toMMPattern();let e=this.toString(),[r,n,s,i]=this.toRegExpSource();if(!(s||L(this,Dt)||L(this,Ms).nocase&&!L(this,Ms).nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let a=(L(this,Ms).nocase?"i":"")+(i?"u":"");return Object.assign(new RegExp(`^${r}$`,a),{_src:r,_glob:e})}get options(){return L(this,Ms)}toRegExpSource(e){let r=e??!!L(this,Ms).dot;if(L(this,Ct)===this&&xi(this,Hy,LH).call(this),!this.type){let c=this.isStart()&&this.isEnd()&&!L(this,ct).some(f=>typeof f!="string"),l=L(this,ct).map(f=>{var w;let[h,m,y,g]=typeof f=="string"?xi(w=Qr,Gy,FH).call(w,f,L(this,Dt),c):f.toRegExpSource(e);return ut(this,Dt,L(this,Dt)||y),ut(this,_i,L(this,_i)||g),h}).join(""),u="";if(this.isStart()&&typeof L(this,ct)[0]=="string"&&!(L(this,ct).length===1&&eRe.has(L(this,ct)[0]))){let h=ZTe,m=r&&h.has(l.charAt(0))||l.startsWith("\\.")&&h.has(l.charAt(2))||l.startsWith("\\.\\.")&&h.has(l.charAt(4)),y=!r&&!e&&h.has(l.charAt(0));u=m?QTe:y?Vy:""}let d="";return this.isEnd()&&L(L(this,Ct),go)&&L(this,Ot)?.type==="!"&&(d="(?:$|\\/)"),[u+l+d,(0,By.unescape)(l),ut(this,Dt,!!L(this,Dt)),L(this,_i)]}let n=this.type==="*"||this.type==="+",s=this.type==="!"?"(?:(?!(?:":"(?:",i=xi(this,Hd,V1).call(this,r);if(this.isStart()&&this.isEnd()&&!i&&this.type!=="!"){let c=this.toString();return ut(this,ct,[c]),this.type=null,ut(this,Dt,void 0),[c,(0,By.unescape)(this.toString()),!1,!1]}let o=!n||e||r||!Vy?"":xi(this,Hd,V1).call(this,!0);o===i&&(o=""),o&&(i=`(?:${i})(?:${o})*?`);let a="";if(this.type==="!"&&L(this,zd))a=(this.isStart()&&!r?Vy:"")+qH;else{let c=this.type==="!"?"))"+(this.isStart()&&!r&&!e?Vy:"")+jH+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&o?")":this.type==="*"&&o?")?":`)${this.type}`;a=s+i+c}return[a,(0,By.unescape)(i),ut(this,Dt,!!L(this,Dt)),L(this,_i)]}},Vd=Qr;Ct=new WeakMap,Dt=new WeakMap,_i=new WeakMap,ct=new WeakMap,Ot=new WeakMap,mo=new WeakMap,Na=new WeakMap,go=new WeakMap,Ms=new WeakMap,Ca=new WeakMap,zd=new WeakMap,Hy=new WeakSet,LH=function(){if(this!==L(this,Ct))throw new Error("should only call on root");if(L(this,go))return this;this.toString(),ut(this,go,!0);let e;for(;e=L(this,Na).pop();){if(e.type!=="!")continue;let r=e,n=L(r,Ot);for(;n;){for(let s=L(r,mo)+1;!n.type&&s<L(n,ct).length;s++)for(let i of L(e,ct)){if(typeof i=="string")throw new Error("string part in extglob AST??");i.copyIn(L(n,ct)[s])}r=n,n=L(r,Ot)}}return this},Cl=new WeakSet,zy=function(e,r,n,s){var f,h;let i=!1,o=!1,a=-1,c=!1;if(r.type===null){let m=n,y="";for(;m<e.length;){let g=e.charAt(m++);if(i||g==="\\"){i=!i,y+=g;continue}if(o){m===a+1?(g==="^"||g==="!")&&(c=!0):g==="]"&&!(m===a+2&&c)&&(o=!1),y+=g;continue}else if(g==="["){o=!0,a=m,c=!1,y+=g;continue}if(!s.noext&&MH(g)&&e.charAt(m)==="("){r.push(y),y="";let w=new Qr(g,r);m=xi(f=Qr,Cl,zy).call(f,e,w,m,s),r.push(w);continue}y+=g}return r.push(y),m}let l=n+1,u=new Qr(null,r),d=[],p="";for(;l<e.length;){let m=e.charAt(l++);if(i||m==="\\"){i=!i,p+=m;continue}if(o){l===a+1?(m==="^"||m==="!")&&(c=!0):m==="]"&&!(l===a+2&&c)&&(o=!1),p+=m;continue}else if(m==="["){o=!0,a=l,c=!1,p+=m;continue}if(MH(m)&&e.charAt(l)==="("){u.push(p),p="";let y=new Qr(m,u);u.push(y),l=xi(h=Qr,Cl,zy).call(h,e,y,l,s);continue}if(m==="|"){u.push(p),p="",d.push(u),u=new Qr(null,r);continue}if(m===")")return p===""&&L(r,ct).length===0&&ut(r,zd,!0),u.push(p),p="",r.push(...d,u),l;p+=m}return r.type=null,ut(r,Dt,void 0),ut(r,ct,[e.substring(n-1)]),l},Hd=new WeakSet,V1=function(e){return L(this,ct).map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,s,i,o]=r.toRegExpSource(e);return ut(this,_i,L(this,_i)||o),n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")},Gy=new WeakSet,FH=function(e,r,n=!1){let s=!1,i="",o=!1;for(let a=0;a<e.length;a++){let c=e.charAt(a);if(s){s=!1,i+=(tRe.has(c)?"\\":"")+c;continue}if(c==="\\"){a===e.length-1?i+="\\\\":s=!0;continue}if(c==="["){let[l,u,d,p]=(0,YTe.parseClass)(e,a);if(d){i+=l,o=o||u,a+=d-1,r=r||p;continue}}if(c==="*"){i+=n&&e==="*"?qH:jH,r=!0;continue}if(c==="?"){i+=z1,r=!0;continue}i+=rRe(c)}return[i,(0,By.unescape)(e),!!r,o]},At(Vd,Cl),At(Vd,Gy);Wy.AST=Vd});var G1=E(Ky=>{"use strict";Object.defineProperty(Ky,"__esModule",{value:!0});Ky.escape=void 0;var nRe=(t,{windowsPathsNoEscape:e=!1,magicalBraces:r=!1}={})=>r?e?t.replace(/[?*()[\]{}]/g,"[$&]"):t.replace(/[?*()[\]\\{}]/g,"\\$&"):e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&");Ky.escape=nRe});var yo=E(J=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});J.unescape=J.escape=J.AST=J.Minimatch=J.match=J.makeRe=J.braceExpand=J.defaults=J.filter=J.GLOBSTAR=J.sep=J.minimatch=void 0;var sRe=IH(),Jy=AH(),VH=H1(),iRe=G1(),oRe=Uy(),aRe=(t,e,r={})=>((0,Jy.assertValidPattern)(e),!r.nocomment&&e.charAt(0)==="#"?!1:new Ia(e,r).match(t));J.minimatch=aRe;var cRe=/^\*+([^+@!?\*\[\(]*)$/,lRe=t=>e=>!e.startsWith(".")&&e.endsWith(t),uRe=t=>e=>e.endsWith(t),fRe=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),dRe=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),hRe=/^\*+\.\*+$/,pRe=t=>!t.startsWith(".")&&t.includes("."),mRe=t=>t!=="."&&t!==".."&&t.includes("."),gRe=/^\.\*+$/,yRe=t=>t!=="."&&t!==".."&&t.startsWith("."),_Re=/^\*+$/,vRe=t=>t.length!==0&&!t.startsWith("."),wRe=t=>t.length!==0&&t!=="."&&t!=="..",bRe=/^\?+([^+@!?\*\[\(]*)?$/,ERe=([t,e=""])=>{let r=zH([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},SRe=([t,e=""])=>{let r=HH([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},TRe=([t,e=""])=>{let r=HH([t]);return e?n=>r(n)&&n.endsWith(e):r},RRe=([t,e=""])=>{let r=zH([t]);return e?n=>r(n)&&n.endsWith(e):r},zH=([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},HH=([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},GH=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",UH={win32:{sep:"\\"},posix:{sep:"/"}};J.sep=GH==="win32"?UH.win32.sep:UH.posix.sep;J.minimatch.sep=J.sep;J.GLOBSTAR=Symbol("globstar **");J.minimatch.GLOBSTAR=J.GLOBSTAR;var $Re="[^/]",ORe=$Re+"*?",PRe="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",xRe="(?:(?!(?:\\/|^)\\.).)*?",NRe=(t,e={})=>r=>(0,J.minimatch)(r,t,e);J.filter=NRe;J.minimatch.filter=J.filter;var xn=(t,e={})=>Object.assign({},t,e),CRe=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return J.minimatch;let e=J.minimatch;return Object.assign((n,s,i={})=>e(n,s,xn(t,i)),{Minimatch:class extends e.Minimatch{constructor(s,i={}){super(s,xn(t,i))}static defaults(s){return e.defaults(xn(t,s)).Minimatch}},AST:class extends e.AST{constructor(s,i,o={}){super(s,i,xn(t,o))}static fromGlob(s,i={}){return e.AST.fromGlob(s,xn(t,i))}},unescape:(n,s={})=>e.unescape(n,xn(t,s)),escape:(n,s={})=>e.escape(n,xn(t,s)),filter:(n,s={})=>e.filter(n,xn(t,s)),defaults:n=>e.defaults(xn(t,n)),makeRe:(n,s={})=>e.makeRe(n,xn(t,s)),braceExpand:(n,s={})=>e.braceExpand(n,xn(t,s)),match:(n,s,i={})=>e.match(n,s,xn(t,i)),sep:e.sep,GLOBSTAR:J.GLOBSTAR})};J.defaults=CRe;J.minimatch.defaults=J.defaults;var IRe=(t,e={})=>((0,Jy.assertValidPattern)(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,sRe.expand)(t));J.braceExpand=IRe;J.minimatch.braceExpand=J.braceExpand;var ARe=(t,e={})=>new Ia(t,e).makeRe();J.makeRe=ARe;J.minimatch.makeRe=J.makeRe;var kRe=(t,e,r={})=>{let n=new Ia(e,r);return t=t.filter(s=>n.match(s)),n.options.nonull&&!t.length&&t.push(e),t};J.match=kRe;J.minimatch.match=J.match;var BH=/[?*]|[+@!]\(.*?\)|\[|\]/,DRe=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Ia=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){(0,Jy.assertValidPattern)(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||GH,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...i)=>console.error(...i)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(i=>this.slashSplit(i));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let s=this.globParts.map((i,o,a)=>{if(this.isWindows&&this.windowsNoMagicRoot){let c=i[0]===""&&i[1]===""&&(i[2]==="?"||!BH.test(i[2]))&&!BH.test(i[3]),l=/^[a-z]:/i.test(i[0]);if(c)return[...i.slice(0,4),...i.slice(4).map(u=>this.parse(u))];if(l)return[i[0],...i.slice(1).map(u=>this.parse(u))]}return i.map(c=>this.parse(c))});if(this.debug(this.pattern,s),this.set=s.filter(i=>i.indexOf(!1)===-1),this.isWindows)for(let i=0;i<this.set.length;i++){let o=this.set[i];o[0]===""&&o[1]===""&&this.globParts[i][2]==="?"&&typeof o[3]=="string"&&/^[a-z]:$/i.test(o[3])&&(o[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let s=0;s<e[n].length;s++)e[n][s]==="**"&&(e[n][s]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let s=n;for(;r[s+1]==="**";)s++;s!==n&&r.splice(n,s-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,s)=>{let i=n[n.length-1];return s==="**"&&i==="**"?n:s===".."&&i&&i!==".."&&i!=="."&&i!=="**"?(n.pop(),n):(n.push(s),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let s=1;s<e.length-1;s++){let i=e[s];s===1&&i===""&&e[0]===""||(i==="."||i==="")&&(r=!0,e.splice(s,1),s--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let s=e[n-1];s&&s!=="."&&s!==".."&&s!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let s=-1;for(;(s=n.indexOf("**",s+1))!==-1;){let o=s;for(;n[o+1]==="**";)o++;o>s&&n.splice(s+1,o-s);let a=n[s+1],c=n[s+2],l=n[s+3];if(a!==".."||!c||c==="."||c===".."||!l||l==="."||l==="..")continue;r=!0,n.splice(s,1);let u=n.slice(0);u[s]="**",e.push(u),s--}if(!this.preserveMultipleSlashes){for(let o=1;o<n.length-1;o++){let a=n[o];o===1&&a===""&&n[0]===""||(a==="."||a==="")&&(r=!0,n.splice(o,1),o--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let i=0;for(;(i=n.indexOf("..",i+1))!==-1;){let o=n[i-1];if(o&&o!=="."&&o!==".."&&o!=="**"){r=!0;let c=i===1&&n[i+1]==="**"?["."]:[];n.splice(i-1,2,...c),n.length===0&&n.push(""),i-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let s=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);if(s){e[r]=[],e[n]=s;break}}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let s=0,i=0,o=[],a="";for(;s<e.length&&i<r.length;)if(e[s]===r[i])o.push(a==="b"?r[i]:e[s]),s++,i++;else if(n&&e[s]==="**"&&r[i]===e[s+1])o.push(e[s]),s++;else if(n&&r[i]==="**"&&e[s]===r[i+1])o.push(r[i]),i++;else if(e[s]==="*"&&r[i]&&(this.options.dot||!r[i].startsWith("."))&&r[i]!=="**"){if(a==="b")return!1;a="a",o.push(e[s]),s++,i++}else if(r[i]==="*"&&e[s]&&(this.options.dot||!e[s].startsWith("."))&&e[s]!=="**"){if(a==="a")return!1;a="b",o.push(r[i]),s++,i++}else return!1;return e.length===r.length&&o}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let s=0;s<e.length&&e.charAt(s)==="!";s++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let s=this.options;if(this.isWindows){let m=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),y=!m&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),g=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),w=!g&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),_=y?3:m?0:void 0,v=w?3:g?0:void 0;if(typeof _=="number"&&typeof v=="number"){let[S,$]=[e[_],r[v]];S.toLowerCase()===$.toLowerCase()&&(r[v]=S,v>_?r=r.slice(v):_>v&&(e=e.slice(_)))}}let{optimizationLevel:i=1}=this.options;i>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var o=0,a=0,c=e.length,l=r.length;o<c&&a<l;o++,a++){this.debug("matchOne loop");var u=r[a],d=e[o];if(this.debug(r,u,d),u===!1)return!1;if(u===J.GLOBSTAR){this.debug("GLOBSTAR",[r,u,d]);var p=o,f=a+1;if(f===l){for(this.debug("** at the end");o<c;o++)if(e[o]==="."||e[o]===".."||!s.dot&&e[o].charAt(0)===".")return!1;return!0}for(;p<c;){var h=e[p];if(this.debug(`
globstar while`,e,p,r,f,h),this.matchOne(e.slice(p),r.slice(f),n))return this.debug("globstar found match!",p,c,h),!0;if(h==="."||h===".."||!s.dot&&h.charAt(0)==="."){this.debug("dot detected!",e,p,r,f);break}this.debug("globstar swallow a segment, and continue"),p++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,p,r,f),p===c))}let m;if(typeof u=="string"?(m=d===u,this.debug("string match",u,d,m)):(m=u.test(d),this.debug("pattern match",u,d,m)),!m)return!1}if(o===c&&a===l)return!0;if(o===c)return n;if(a===l)return o===c-1&&e[o]==="";throw new Error("wtf?")}braceExpand(){return(0,J.braceExpand)(this.pattern,this.options)}parse(e){(0,Jy.assertValidPattern)(e);let r=this.options;if(e==="**")return J.GLOBSTAR;if(e==="")return"";let n,s=null;(n=e.match(_Re))?s=r.dot?wRe:vRe:(n=e.match(cRe))?s=(r.nocase?r.dot?dRe:fRe:r.dot?uRe:lRe)(n[1]):(n=e.match(bRe))?s=(r.nocase?r.dot?SRe:ERe:r.dot?TRe:RRe)(n):(n=e.match(hRe))?s=r.dot?mRe:pRe:(n=e.match(gRe))&&(s=yRe);let i=VH.AST.fromGlob(e,this.options).toMMPattern();return s&&typeof i=="object"&&Reflect.defineProperty(i,"test",{value:s}),i}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?ORe:r.dot?PRe:xRe,s=new Set(r.nocase?["i"]:[]),i=e.map(c=>{let l=c.map(d=>{if(d instanceof RegExp)for(let p of d.flags.split(""))s.add(p);return typeof d=="string"?DRe(d):d===J.GLOBSTAR?J.GLOBSTAR:d._src});l.forEach((d,p)=>{let f=l[p+1],h=l[p-1];d!==J.GLOBSTAR||h===J.GLOBSTAR||(h===void 0?f!==void 0&&f!==J.GLOBSTAR?l[p+1]="(?:\\/|"+n+"\\/)?"+f:l[p]=n:f===void 0?l[p-1]=h+"(?:\\/|\\/"+n+")?":f!==J.GLOBSTAR&&(l[p-1]=h+"(?:\\/|\\/"+n+"\\/)"+f,l[p+1]=J.GLOBSTAR))});let u=l.filter(d=>d!==J.GLOBSTAR);if(this.partial&&u.length>=1){let d=[];for(let p=1;p<=u.length;p++)d.push(u.slice(0,p).join("/"));return"(?:"+d.join("|")+")"}return u.join("/")}).join("|"),[o,a]=e.length>1?["(?:",")"]:["",""];i="^"+o+i+a+"$",this.partial&&(i="^(?:\\/|"+o+i.slice(1,-1)+a+")$"),this.negate&&(i="^(?!"+i+").+$");try{this.regexp=new RegExp(i,[...s].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let s=this.slashSplit(e);this.debug(this.pattern,"split",s);let i=this.set;this.debug(this.pattern,"set",i);let o=s[s.length-1];if(!o)for(let a=s.length-2;!o&&a>=0;a--)o=s[a];for(let a=0;a<i.length;a++){let c=i[a],l=s;if(n.matchBase&&c.length===1&&(l=[o]),this.matchOne(l,c,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return J.minimatch.defaults(e).Minimatch}};J.Minimatch=Ia;var MRe=H1();Object.defineProperty(J,"AST",{enumerable:!0,get:function(){return MRe.AST}});var jRe=G1();Object.defineProperty(J,"escape",{enumerable:!0,get:function(){return jRe.escape}});var qRe=Uy();Object.defineProperty(J,"unescape",{enumerable:!0,get:function(){return qRe.unescape}});J.minimatch.AST=VH.AST;J.minimatch.Minimatch=Ia;J.minimatch.escape=iRe.escape;J.minimatch.unescape=oRe.unescape});var XH=E(Qy=>{"use strict";Object.defineProperty(Qy,"__esModule",{value:!0});Qy.LRUCache=void 0;var LRe=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,KH=new Set,W1=typeof process=="object"&&process?process:{},JH=(t,e,r,n)=>{typeof W1.emitWarning=="function"?W1.emitWarning(t,e,r,n):console.error(`[${r}] ${e}: ${t}`)},Xy=globalThis.AbortController,WH=globalThis.AbortSignal;if(typeof Xy>"u"){WH=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,s){this._onabort.push(s)}},Xy=class{constructor(){e()}signal=new WH;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let s of this.signal._onabort)s(n);this.signal.onabort?.(n)}}};let t=W1.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,JH("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var FRe=t=>!KH.has(t),Xje=Symbol("type"),_o=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),YH=t=>_o(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?Al:null:null,Al=class extends Array{constructor(e){super(e),this.fill(0)}},kl,Il=class{heap;length;static create(e){let r=YH(e);if(!r)return[];ut(Il,kl,!0);let n=new Il(e,r);return ut(Il,kl,!1),n}constructor(e,r){if(!L(Il,kl))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},Yy=Il;kl=new WeakMap,At(Yy,kl,!1);var Gd=class{#e;#r;#s;#l;#a;#R;#y;#f;get perf(){return this.#f}ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#i;#m;#u;#o;#n;#v;#S;#_;#d;#P;#h;#E;#T;#p;#g;#w;#$;#t;#k;static unsafeExposeInternals(e){return{starts:e.#T,ttls:e.#p,autopurgeTimers:e.#g,sizes:e.#E,keyMap:e.#u,keyList:e.#o,valList:e.#n,next:e.#v,prev:e.#S,get head(){return e.#_},get tail(){return e.#d},free:e.#P,isBackgroundFetch:r=>e.#c(r),backgroundFetch:(r,n,s,i)=>e.#B(r,n,s,i),moveToTail:r=>e.#M(r),indexes:r=>e.#N(r),rindexes:r=>e.#C(r),isStale:r=>e.#b(r)}}get max(){return this.#e}get maxSize(){return this.#r}get calculatedSize(){return this.#m}get size(){return this.#i}get fetchMethod(){return this.#R}get memoMethod(){return this.#y}get dispose(){return this.#s}get onInsert(){return this.#l}get disposeAfter(){return this.#a}constructor(e){let{max:r=0,ttl:n,ttlResolution:s=1,ttlAutopurge:i,updateAgeOnGet:o,updateAgeOnHas:a,allowStale:c,dispose:l,onInsert:u,disposeAfter:d,noDisposeOnSet:p,noUpdateTTL:f,maxSize:h=0,maxEntrySize:m=0,sizeCalculation:y,fetchMethod:g,memoMethod:w,noDeleteOnFetchRejection:_,noDeleteOnStaleGet:v,allowStaleOnFetchRejection:S,allowStaleOnFetchAbort:$,ignoreFetchAbort:T,perf:O}=e;if(O!==void 0&&typeof O?.now!="function")throw new TypeError("perf option must have a now() method if specified");if(this.#f=O??LRe,r!==0&&!_o(r))throw new TypeError("max option must be a nonnegative integer");let R=r?YH(r):Array;if(!R)throw new Error("invalid max value: "+r);if(this.#e=r,this.#r=h,this.maxEntrySize=m||this.#r,this.sizeCalculation=y,this.sizeCalculation){if(!this.#r&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(w!==void 0&&typeof w!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#y=w,g!==void 0&&typeof g!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#R=g,this.#$=!!g,this.#u=new Map,this.#o=new Array(r).fill(void 0),this.#n=new Array(r).fill(void 0),this.#v=new R(r),this.#S=new R(r),this.#_=0,this.#d=0,this.#P=Yy.create(r),this.#i=0,this.#m=0,typeof l=="function"&&(this.#s=l),typeof u=="function"&&(this.#l=u),typeof d=="function"?(this.#a=d,this.#h=[]):(this.#a=void 0,this.#h=void 0),this.#w=!!this.#s,this.#k=!!this.#l,this.#t=!!this.#a,this.noDisposeOnSet=!!p,this.noUpdateTTL=!!f,this.noDeleteOnFetchRejection=!!_,this.allowStaleOnFetchRejection=!!S,this.allowStaleOnFetchAbort=!!$,this.ignoreFetchAbort=!!T,this.maxEntrySize!==0){if(this.#r!==0&&!_o(this.#r))throw new TypeError("maxSize must be a positive integer if specified");if(!_o(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#z()}if(this.allowStale=!!c,this.noDeleteOnStaleGet=!!v,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!a,this.ttlResolution=_o(s)||s===0?s:1,this.ttlAutopurge=!!i,this.ttl=n||0,this.ttl){if(!_o(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#I()}if(this.#e===0&&this.ttl===0&&this.#r===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#r){let P="LRU_CACHE_UNBOUNDED";FRe(P)&&(KH.add(P),JH("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",P,Gd))}}getRemainingTTL(e){return this.#u.has(e)?1/0:0}#I(){let e=new Al(this.#e),r=new Al(this.#e);this.#p=e,this.#T=r;let n=this.ttlAutopurge?new Array(this.#e):void 0;this.#g=n,this.#q=(o,a,c=this.#f.now())=>{if(r[o]=a!==0?c:0,e[o]=a,n?.[o]&&(clearTimeout(n[o]),n[o]=void 0),a!==0&&n){let l=setTimeout(()=>{this.#b(o)&&this.#x(this.#o[o],"expire")},a+1);l.unref&&l.unref(),n[o]=l}},this.#O=o=>{r[o]=e[o]!==0?this.#f.now():0},this.#A=(o,a)=>{if(e[a]){let c=e[a],l=r[a];if(!c||!l)return;o.ttl=c,o.start=l,o.now=s||i();let u=o.now-l;o.remainingTTL=c-u}};let s=0,i=()=>{let o=this.#f.now();if(this.ttlResolution>0){s=o;let a=setTimeout(()=>s=0,this.ttlResolution);a.unref&&a.unref()}return o};this.getRemainingTTL=o=>{let a=this.#u.get(o);if(a===void 0)return 0;let c=e[a],l=r[a];if(!c||!l)return 1/0;let u=(s||i())-l;return c-u},this.#b=o=>{let a=r[o],c=e[o];return!!c&&!!a&&(s||i())-a>c}}#O=()=>{};#A=()=>{};#q=()=>{};#b=()=>!1;#z(){let e=new Al(this.#e);this.#m=0,this.#E=e,this.#j=r=>{this.#m-=e[r],e[r]=0},this.#L=(r,n,s,i)=>{if(this.#c(n))return 0;if(!_o(s))if(i){if(typeof i!="function")throw new TypeError("sizeCalculation must be a function");if(s=i(n,r),!_o(s))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return s},this.#D=(r,n,s)=>{if(e[r]=n,this.#r){let i=this.#r-e[r];for(;this.#m>i;)this.#U(!0)}this.#m+=e[r],s&&(s.entrySize=n,s.totalCalculatedSize=this.#m)}}#j=e=>{};#D=(e,r,n)=>{};#L=(e,r,n,s)=>{if(n||s)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#N({allowStale:e=this.allowStale}={}){if(this.#i)for(let r=this.#d;!(!this.#F(r)||((e||!this.#b(r))&&(yield r),r===this.#_));)r=this.#S[r]}*#C({allowStale:e=this.allowStale}={}){if(this.#i)for(let r=this.#_;!(!this.#F(r)||((e||!this.#b(r))&&(yield r),r===this.#d));)r=this.#v[r]}#F(e){return e!==void 0&&this.#u.get(this.#o[e])===e}*entries(){for(let e of this.#N())this.#n[e]!==void 0&&this.#o[e]!==void 0&&!this.#c(this.#n[e])&&(yield[this.#o[e],this.#n[e]])}*rentries(){for(let e of this.#C())this.#n[e]!==void 0&&this.#o[e]!==void 0&&!this.#c(this.#n[e])&&(yield[this.#o[e],this.#n[e]])}*keys(){for(let e of this.#N()){let r=this.#o[e];r!==void 0&&!this.#c(this.#n[e])&&(yield r)}}*rkeys(){for(let e of this.#C()){let r=this.#o[e];r!==void 0&&!this.#c(this.#n[e])&&(yield r)}}*values(){for(let e of this.#N())this.#n[e]!==void 0&&!this.#c(this.#n[e])&&(yield this.#n[e])}*rvalues(){for(let e of this.#C())this.#n[e]!==void 0&&!this.#c(this.#n[e])&&(yield this.#n[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,r={}){for(let n of this.#N()){let s=this.#n[n],i=this.#c(s)?s.__staleWhileFetching:s;if(i!==void 0&&e(i,this.#o[n],this))return this.get(this.#o[n],r)}}forEach(e,r=this){for(let n of this.#N()){let s=this.#n[n],i=this.#c(s)?s.__staleWhileFetching:s;i!==void 0&&e.call(r,i,this.#o[n],this)}}rforEach(e,r=this){for(let n of this.#C()){let s=this.#n[n],i=this.#c(s)?s.__staleWhileFetching:s;i!==void 0&&e.call(r,i,this.#o[n],this)}}purgeStale(){let e=!1;for(let r of this.#C({allowStale:!0}))this.#b(r)&&(this.#x(this.#o[r],"expire"),e=!0);return e}info(e){let r=this.#u.get(e);if(r===void 0)return;let n=this.#n[r],s=this.#c(n)?n.__staleWhileFetching:n;if(s===void 0)return;let i={value:s};if(this.#p&&this.#T){let o=this.#p[r],a=this.#T[r];if(o&&a){let c=o-(this.#f.now()-a);i.ttl=c,i.start=Date.now()}}return this.#E&&(i.size=this.#E[r]),i}dump(){let e=[];for(let r of this.#N({allowStale:!0})){let n=this.#o[r],s=this.#n[r],i=this.#c(s)?s.__staleWhileFetching:s;if(i===void 0||n===void 0)continue;let o={value:i};if(this.#p&&this.#T){o.ttl=this.#p[r];let a=this.#f.now()-this.#T[r];o.start=Math.floor(Date.now()-a)}this.#E&&(o.size=this.#E[r]),e.unshift([n,o])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let s=Date.now()-n.start;n.start=this.#f.now()-s}this.set(r,n.value,n)}}set(e,r,n={}){if(r===void 0)return this.delete(e),this;let{ttl:s=this.ttl,start:i,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:c}=n,{noUpdateTTL:l=this.noUpdateTTL}=n,u=this.#L(e,r,n.size||0,a);if(this.maxEntrySize&&u>this.maxEntrySize)return c&&(c.set="miss",c.maxEntrySizeExceeded=!0),this.#x(e,"set"),this;let d=this.#i===0?void 0:this.#u.get(e);if(d===void 0)d=this.#i===0?this.#d:this.#P.length!==0?this.#P.pop():this.#i===this.#e?this.#U(!1):this.#i,this.#o[d]=e,this.#n[d]=r,this.#u.set(e,d),this.#v[this.#d]=d,this.#S[d]=this.#d,this.#d=d,this.#i++,this.#D(d,u,c),c&&(c.set="add"),l=!1,this.#k&&this.#l?.(r,e,"add");else{this.#M(d);let p=this.#n[d];if(r!==p){if(this.#$&&this.#c(p)){p.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:f}=p;f!==void 0&&!o&&(this.#w&&this.#s?.(f,e,"set"),this.#t&&this.#h?.push([f,e,"set"]))}else o||(this.#w&&this.#s?.(p,e,"set"),this.#t&&this.#h?.push([p,e,"set"]));if(this.#j(d),this.#D(d,u,c),this.#n[d]=r,c){c.set="replace";let f=p&&this.#c(p)?p.__staleWhileFetching:p;f!==void 0&&(c.oldValue=f)}}else c&&(c.set="update");this.#k&&this.onInsert?.(r,e,r===p?"update":"replace")}if(s!==0&&!this.#p&&this.#I(),this.#p&&(l||this.#q(d,s,i),c&&this.#A(c,d)),!o&&this.#t&&this.#h){let p=this.#h,f;for(;f=p?.shift();)this.#a?.(...f)}return this}pop(){try{for(;this.#i;){let e=this.#n[this.#_];if(this.#U(!0),this.#c(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#t&&this.#h){let e=this.#h,r;for(;r=e?.shift();)this.#a?.(...r)}}}#U(e){let r=this.#_,n=this.#o[r],s=this.#n[r];return this.#$&&this.#c(s)?s.__abortController.abort(new Error("evicted")):(this.#w||this.#t)&&(this.#w&&this.#s?.(s,n,"evict"),this.#t&&this.#h?.push([s,n,"evict"])),this.#j(r),this.#g?.[r]&&(clearTimeout(this.#g[r]),this.#g[r]=void 0),e&&(this.#o[r]=void 0,this.#n[r]=void 0,this.#P.push(r)),this.#i===1?(this.#_=this.#d=0,this.#P.length=0):this.#_=this.#v[r],this.#u.delete(n),this.#i--,r}has(e,r={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:s}=r,i=this.#u.get(e);if(i!==void 0){let o=this.#n[i];if(this.#c(o)&&o.__staleWhileFetching===void 0)return!1;if(this.#b(i))s&&(s.has="stale",this.#A(s,i));else return n&&this.#O(i),s&&(s.has="hit",this.#A(s,i)),!0}else s&&(s.has="miss");return!1}peek(e,r={}){let{allowStale:n=this.allowStale}=r,s=this.#u.get(e);if(s===void 0||!n&&this.#b(s))return;let i=this.#n[s];return this.#c(i)?i.__staleWhileFetching:i}#B(e,r,n,s){let i=r===void 0?void 0:this.#n[r];if(this.#c(i))return i;let o=new Xy,{signal:a}=n;a?.addEventListener("abort",()=>o.abort(a.reason),{signal:o.signal});let c={signal:o.signal,options:n,context:s},l=(m,y=!1)=>{let{aborted:g}=o.signal,w=n.ignoreFetchAbort&&m!==void 0;if(n.status&&(g&&!y?(n.status.fetchAborted=!0,n.status.fetchError=o.signal.reason,w&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),g&&!w&&!y)return d(o.signal.reason);let _=f,v=this.#n[r];return(v===f||w&&y&&v===void 0)&&(m===void 0?_.__staleWhileFetching!==void 0?this.#n[r]=_.__staleWhileFetching:this.#x(e,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(e,m,c.options))),m},u=m=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=m),d(m)),d=m=>{let{aborted:y}=o.signal,g=y&&n.allowStaleOnFetchAbort,w=g||n.allowStaleOnFetchRejection,_=w||n.noDeleteOnFetchRejection,v=f;if(this.#n[r]===f&&(!_||v.__staleWhileFetching===void 0?this.#x(e,"fetch"):g||(this.#n[r]=v.__staleWhileFetching)),w)return n.status&&v.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),v.__staleWhileFetching;if(v.__returned===v)throw m},p=(m,y)=>{let g=this.#R?.(e,i,c);g&&g instanceof Promise&&g.then(w=>m(w===void 0?void 0:w),y),o.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(m(void 0),n.allowStaleOnFetchAbort&&(m=w=>l(w,!0)))})};n.status&&(n.status.fetchDispatched=!0);let f=new Promise(p).then(l,u),h=Object.assign(f,{__abortController:o,__staleWhileFetching:i,__returned:void 0});return r===void 0?(this.set(e,h,{...c.options,status:void 0}),r=this.#u.get(e)):this.#n[r]=h,h}#c(e){if(!this.#$)return!1;let r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof Xy}async fetch(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:c=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:p=this.allowStaleOnFetchRejection,ignoreFetchAbort:f=this.ignoreFetchAbort,allowStaleOnFetchAbort:h=this.allowStaleOnFetchAbort,context:m,forceRefresh:y=!1,status:g,signal:w}=r;if(!this.#$)return g&&(g.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:s,noDeleteOnStaleGet:i,status:g});let _={allowStale:n,updateAgeOnGet:s,noDeleteOnStaleGet:i,ttl:o,noDisposeOnSet:a,size:c,sizeCalculation:l,noUpdateTTL:u,noDeleteOnFetchRejection:d,allowStaleOnFetchRejection:p,allowStaleOnFetchAbort:h,ignoreFetchAbort:f,status:g,signal:w},v=this.#u.get(e);if(v===void 0){g&&(g.fetch="miss");let S=this.#B(e,v,_,m);return S.__returned=S}else{let S=this.#n[v];if(this.#c(S)){let P=n&&S.__staleWhileFetching!==void 0;return g&&(g.fetch="inflight",P&&(g.returnedStale=!0)),P?S.__staleWhileFetching:S.__returned=S}let $=this.#b(v);if(!y&&!$)return g&&(g.fetch="hit"),this.#M(v),s&&this.#O(v),g&&this.#A(g,v),S;let T=this.#B(e,v,_,m),R=T.__staleWhileFetching!==void 0&&n;return g&&(g.fetch=$?"stale":"refresh",R&&$&&(g.returnedStale=!0)),R?T.__staleWhileFetching:T.__returned=T}}async forceFetch(e,r={}){let n=await this.fetch(e,r);if(n===void 0)throw new Error("fetch() returned undefined");return n}memo(e,r={}){let n=this.#y;if(!n)throw new Error("no memoMethod provided to constructor");let{context:s,forceRefresh:i,...o}=r,a=this.get(e,o);if(!i&&a!==void 0)return a;let c=n(e,a,{options:o,context:s});return this.set(e,c,o),c}get(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,status:o}=r,a=this.#u.get(e);if(a!==void 0){let c=this.#n[a],l=this.#c(c);return o&&this.#A(o,a),this.#b(a)?(o&&(o.get="stale"),l?(o&&n&&c.__staleWhileFetching!==void 0&&(o.returnedStale=!0),n?c.__staleWhileFetching:void 0):(i||this.#x(e,"expire"),o&&n&&(o.returnedStale=!0),n?c:void 0)):(o&&(o.get="hit"),l?c.__staleWhileFetching:(this.#M(a),s&&this.#O(a),c))}else o&&(o.get="miss")}#V(e,r){this.#S[r]=e,this.#v[e]=r}#M(e){e!==this.#d&&(e===this.#_?this.#_=this.#v[e]:this.#V(this.#S[e],this.#v[e]),this.#V(this.#d,e),this.#d=e)}delete(e){return this.#x(e,"delete")}#x(e,r){let n=!1;if(this.#i!==0){let s=this.#u.get(e);if(s!==void 0)if(this.#g?.[s]&&(clearTimeout(this.#g?.[s]),this.#g[s]=void 0),n=!0,this.#i===1)this.#H(r);else{this.#j(s);let i=this.#n[s];if(this.#c(i)?i.__abortController.abort(new Error("deleted")):(this.#w||this.#t)&&(this.#w&&this.#s?.(i,e,r),this.#t&&this.#h?.push([i,e,r])),this.#u.delete(e),this.#o[s]=void 0,this.#n[s]=void 0,s===this.#d)this.#d=this.#S[s];else if(s===this.#_)this.#_=this.#v[s];else{let o=this.#S[s];this.#v[o]=this.#v[s];let a=this.#v[s];this.#S[a]=this.#S[s]}this.#i--,this.#P.push(s)}}if(this.#t&&this.#h?.length){let s=this.#h,i;for(;i=s?.shift();)this.#a?.(...i)}return n}clear(){return this.#H("delete")}#H(e){for(let r of this.#C({allowStale:!0})){let n=this.#n[r];if(this.#c(n))n.__abortController.abort(new Error("deleted"));else{let s=this.#o[r];this.#w&&this.#s?.(n,s,e),this.#t&&this.#h?.push([n,s,e])}}if(this.#u.clear(),this.#n.fill(void 0),this.#o.fill(void 0),this.#p&&this.#T){this.#p.fill(0),this.#T.fill(0);for(let r of this.#g??[])r!==void 0&&clearTimeout(r);this.#g?.fill(void 0)}if(this.#E&&this.#E.fill(0),this.#_=0,this.#d=0,this.#P.length=0,this.#m=0,this.#i=0,this.#t&&this.#h){let r=this.#h,n;for(;n=r?.shift();)this.#a?.(...n)}}};Qy.LRUCache=Gd});var tO=E(Cr=>{"use strict";var URe=Cr&&Cr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Cr,"__esModule",{value:!0});Cr.Minipass=Cr.isWritable=Cr.isReadable=Cr.isStream=void 0;var QH=typeof process=="object"&&process?process:{stdout:null,stderr:null},eO=require("events"),r3=URe(require("stream")),BRe=require("string_decoder"),VRe=t=>!!t&&typeof t=="object"&&(t instanceof i0||t instanceof r3.default||(0,Cr.isReadable)(t)||(0,Cr.isWritable)(t));Cr.isStream=VRe;var zRe=t=>!!t&&typeof t=="object"&&t instanceof eO.EventEmitter&&typeof t.pipe=="function"&&t.pipe!==r3.default.Writable.prototype.pipe;Cr.isReadable=zRe;var HRe=t=>!!t&&typeof t=="object"&&t instanceof eO.EventEmitter&&typeof t.write=="function"&&typeof t.end=="function";Cr.isWritable=HRe;var vi=Symbol("EOF"),wi=Symbol("maybeEmitEnd"),vo=Symbol("emittedEnd"),Zy=Symbol("emittingEnd"),Wd=Symbol("emittedError"),e0=Symbol("closed"),ZH=Symbol("read"),t0=Symbol("flush"),e3=Symbol("flushChunk"),is=Symbol("encoding"),Dl=Symbol("decoder"),Mt=Symbol("flowing"),Kd=Symbol("paused"),Ml=Symbol("resume"),jt=Symbol("buffer"),Nr=Symbol("pipes"),qt=Symbol("bufferLength"),K1=Symbol("bufferPush"),r0=Symbol("bufferShift"),pr=Symbol("objectMode"),Tt=Symbol("destroyed"),J1=Symbol("error"),Y1=Symbol("emitData"),t3=Symbol("emitEnd"),X1=Symbol("emitEnd2"),js=Symbol("async"),Q1=Symbol("abort"),n0=Symbol("aborted"),Jd=Symbol("signal"),Aa=Symbol("dataListeners"),sn=Symbol("discarded"),Yd=t=>Promise.resolve().then(t),GRe=t=>t(),WRe=t=>t==="end"||t==="finish"||t==="prefinish",KRe=t=>t instanceof ArrayBuffer||!!t&&typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,JRe=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),s0=class{src;dest;opts;ondrain;constructor(e,r,n){this.src=e,this.dest=r,this.opts=n,this.ondrain=()=>e[Ml](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},Z1=class extends s0{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,n){super(e,r,n),this.proxyErrors=s=>r.emit("error",s),e.on("error",this.proxyErrors)}},YRe=t=>!!t.objectMode,XRe=t=>!t.objectMode&&!!t.encoding&&t.encoding!=="buffer",i0=class extends eO.EventEmitter{[Mt]=!1;[Kd]=!1;[Nr]=[];[jt]=[];[pr];[is];[js];[Dl];[vi]=!1;[vo]=!1;[Zy]=!1;[e0]=!1;[Wd]=null;[qt]=0;[Tt]=!1;[Jd];[n0]=!1;[Aa]=0;[sn]=!1;writable=!0;readable=!0;constructor(...e){let r=e[0]||{};if(super(),r.objectMode&&typeof r.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");YRe(r)?(this[pr]=!0,this[is]=null):XRe(r)?(this[is]=r.encoding,this[pr]=!1):(this[pr]=!1,this[is]=null),this[js]=!!r.async,this[Dl]=this[is]?new BRe.StringDecoder(this[is]):null,r&&r.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[jt]}),r&&r.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[Nr]});let{signal:n}=r;n&&(this[Jd]=n,n.aborted?this[Q1]():n.addEventListener("abort",()=>this[Q1]()))}get bufferLength(){return this[qt]}get encoding(){return this[is]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[pr]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[js]}set async(e){this[js]=this[js]||!!e}[Q1](){this[n0]=!0,this.emit("abort",this[Jd]?.reason),this.destroy(this[Jd]?.reason)}get aborted(){return this[n0]}set aborted(e){}write(e,r,n){if(this[n0])return!1;if(this[vi])throw new Error("write after end");if(this[Tt])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8");let s=this[js]?Yd:GRe;if(!this[pr]&&!Buffer.isBuffer(e)){if(JRe(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(KRe(e))e=Buffer.from(e);else if(typeof e!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[pr]?(this[Mt]&&this[qt]!==0&&this[t0](!0),this[Mt]?this.emit("data",e):this[K1](e),this[qt]!==0&&this.emit("readable"),n&&s(n),this[Mt]):e.length?(typeof e=="string"&&!(r===this[is]&&!this[Dl]?.lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[is]&&(e=this[Dl].write(e)),this[Mt]&&this[qt]!==0&&this[t0](!0),this[Mt]?this.emit("data",e):this[K1](e),this[qt]!==0&&this.emit("readable"),n&&s(n),this[Mt]):(this[qt]!==0&&this.emit("readable"),n&&s(n),this[Mt])}read(e){if(this[Tt])return null;if(this[sn]=!1,this[qt]===0||e===0||e&&e>this[qt])return this[wi](),null;this[pr]&&(e=null),this[jt].length>1&&!this[pr]&&(this[jt]=[this[is]?this[jt].join(""):Buffer.concat(this[jt],this[qt])]);let r=this[ZH](e||null,this[jt][0]);return this[wi](),r}[ZH](e,r){if(this[pr])this[r0]();else{let n=r;e===n.length||e===null?this[r0]():typeof n=="string"?(this[jt][0]=n.slice(e),r=n.slice(0,e),this[qt]-=e):(this[jt][0]=n.subarray(e),r=n.subarray(0,e),this[qt]-=e)}return this.emit("data",r),!this[jt].length&&!this[vi]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=void 0),typeof r=="function"&&(n=r,r="utf8"),e!==void 0&&this.write(e,r),n&&this.once("end",n),this[vi]=!0,this.writable=!1,(this[Mt]||!this[Kd])&&this[wi](),this}[Ml](){this[Tt]||(!this[Aa]&&!this[Nr].length&&(this[sn]=!0),this[Kd]=!1,this[Mt]=!0,this.emit("resume"),this[jt].length?this[t0]():this[vi]?this[wi]():this.emit("drain"))}resume(){return this[Ml]()}pause(){this[Mt]=!1,this[Kd]=!0,this[sn]=!1}get destroyed(){return this[Tt]}get flowing(){return this[Mt]}get paused(){return this[Kd]}[K1](e){this[pr]?this[qt]+=1:this[qt]+=e.length,this[jt].push(e)}[r0](){return this[pr]?this[qt]-=1:this[qt]-=this[jt][0].length,this[jt].shift()}[t0](e=!1){do;while(this[e3](this[r0]())&&this[jt].length);!e&&!this[jt].length&&!this[vi]&&this.emit("drain")}[e3](e){return this.emit("data",e),this[Mt]}pipe(e,r){if(this[Tt])return e;this[sn]=!1;let n=this[vo];return r=r||{},e===QH.stdout||e===QH.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,n?r.end&&e.end():(this[Nr].push(r.proxyErrors?new Z1(this,e,r):new s0(this,e,r)),this[js]?Yd(()=>this[Ml]()):this[Ml]()),e}unpipe(e){let r=this[Nr].find(n=>n.dest===e);r&&(this[Nr].length===1?(this[Mt]&&this[Aa]===0&&(this[Mt]=!1),this[Nr]=[]):this[Nr].splice(this[Nr].indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let n=super.on(e,r);if(e==="data")this[sn]=!1,this[Aa]++,!this[Nr].length&&!this[Mt]&&this[Ml]();else if(e==="readable"&&this[qt]!==0)super.emit("readable");else if(WRe(e)&&this[vo])super.emit(e),this.removeAllListeners(e);else if(e==="error"&&this[Wd]){let s=r;this[js]?Yd(()=>s.call(this,this[Wd])):s.call(this,this[Wd])}return n}removeListener(e,r){return this.off(e,r)}off(e,r){let n=super.off(e,r);return e==="data"&&(this[Aa]=this.listeners("data").length,this[Aa]===0&&!this[sn]&&!this[Nr].length&&(this[Mt]=!1)),n}removeAllListeners(e){let r=super.removeAllListeners(e);return(e==="data"||e===void 0)&&(this[Aa]=0,!this[sn]&&!this[Nr].length&&(this[Mt]=!1)),r}get emittedEnd(){return this[vo]}[wi](){!this[Zy]&&!this[vo]&&!this[Tt]&&this[jt].length===0&&this[vi]&&(this[Zy]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[e0]&&this.emit("close"),this[Zy]=!1)}emit(e,...r){let n=r[0];if(e!=="error"&&e!=="close"&&e!==Tt&&this[Tt])return!1;if(e==="data")return!this[pr]&&!n?!1:this[js]?(Yd(()=>this[Y1](n)),!0):this[Y1](n);if(e==="end")return this[t3]();if(e==="close"){if(this[e0]=!0,!this[vo]&&!this[Tt])return!1;let i=super.emit("close");return this.removeAllListeners("close"),i}else if(e==="error"){this[Wd]=n,super.emit(J1,n);let i=!this[Jd]||this.listeners("error").length?super.emit("error",n):!1;return this[wi](),i}else if(e==="resume"){let i=super.emit("resume");return this[wi](),i}else if(e==="finish"||e==="prefinish"){let i=super.emit(e);return this.removeAllListeners(e),i}let s=super.emit(e,...r);return this[wi](),s}[Y1](e){for(let n of this[Nr])n.dest.write(e)===!1&&this.pause();let r=this[sn]?!1:super.emit("data",e);return this[wi](),r}[t3](){return this[vo]?!1:(this[vo]=!0,this.readable=!1,this[js]?(Yd(()=>this[X1]()),!0):this[X1]())}[X1](){if(this[Dl]){let r=this[Dl].end();if(r){for(let n of this[Nr])n.dest.write(r);this[sn]||super.emit("data",r)}}for(let r of this[Nr])r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){let e=Object.assign([],{dataLength:0});this[pr]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[pr]||(e.dataLength+=n.length)}),await r,e}async concat(){if(this[pr])throw new Error("cannot concat in objectMode");let e=await this.collect();return this[is]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise((e,r)=>{this.on(Tt,()=>r(new Error("stream destroyed"))),this.on("error",n=>r(n)),this.on("end",()=>e())})}[Symbol.asyncIterator](){this[sn]=!1;let e=!1,r=async()=>(this.pause(),e=!0,{value:void 0,done:!0});return{next:()=>{if(e)return r();let s=this.read();if(s!==null)return Promise.resolve({done:!1,value:s});if(this[vi])return r();let i,o,a=d=>{this.off("data",c),this.off("end",l),this.off(Tt,u),r(),o(d)},c=d=>{this.off("error",a),this.off("end",l),this.off(Tt,u),this.pause(),i({value:d,done:!!this[vi]})},l=()=>{this.off("error",a),this.off("data",c),this.off(Tt,u),r(),i({done:!0,value:void 0})},u=()=>a(new Error("stream destroyed"));return new Promise((d,p)=>{o=p,i=d,this.once(Tt,u),this.once("error",a),this.once("end",l),this.once("data",c)})},throw:r,return:r,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[sn]=!1;let e=!1,r=()=>(this.pause(),this.off(J1,r),this.off(Tt,r),this.off("end",r),e=!0,{done:!0,value:void 0}),n=()=>{if(e)return r();let s=this.read();return s===null?r():{done:!1,value:s}};return this.once("end",r),this.once(J1,r),this.once(Tt,r),{next:n,throw:r,return:r,[Symbol.iterator](){return this}}}destroy(e){if(this[Tt])return e?this.emit("error",e):this.emit(Tt),this;this[Tt]=!0,this[sn]=!0,this[jt].length=0,this[qt]=0;let r=this;return typeof r.close=="function"&&!this[e0]&&r.close(),e?this.emit("error",e):this.emit(Tt),this}static get isStream(){return Cr.isStream}};Cr.Minipass=i0});var g3=E(Be=>{"use strict";var QRe=Be&&Be.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ZRe=Be&&Be.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),e$e=Be&&Be.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&QRe(e,t,r);return ZRe(e,t),e};Object.defineProperty(Be,"__esModule",{value:!0});Be.PathScurry=Be.Path=Be.PathScurryDarwin=Be.PathScurryPosix=Be.PathScurryWin32=Be.PathScurryBase=Be.PathPosix=Be.PathWin32=Be.PathBase=Be.ChildrenCache=Be.ResolveCache=void 0;var h0=XH(),u0=require("path"),t$e=require("url"),Qd=require("fs"),r$e=e$e(require("fs")),n$e=Qd.realpathSync.native,o0=require("fs/promises"),n3=tO(),Zd={lstatSync:Qd.lstatSync,readdir:Qd.readdir,readdirSync:Qd.readdirSync,readlinkSync:Qd.readlinkSync,realpathSync:n$e,promises:{lstat:o0.lstat,readdir:o0.readdir,readlink:o0.readlink,realpath:o0.realpath}},c3=t=>!t||t===Zd||t===r$e?Zd:{...Zd,...t,promises:{...Zd.promises,...t.promises||{}}},l3=/^\\\\\?\\([a-z]:)\\?$/i,s$e=t=>t.replace(/\//g,"\\").replace(l3,"$1\\"),i$e=/[\\\/]/,Cn=0,u3=1,f3=2,qs=4,d3=6,h3=8,ka=10,p3=12,Nn=15,Xd=~Nn,rO=16,s3=32,eh=64,os=128,a0=256,l0=512,i3=eh|os|l0,o$e=1023,nO=t=>t.isFile()?h3:t.isDirectory()?qs:t.isSymbolicLink()?ka:t.isCharacterDevice()?f3:t.isBlockDevice()?d3:t.isSocket()?p3:t.isFIFO()?u3:Cn,o3=new h0.LRUCache({max:2**12}),th=t=>{let e=o3.get(t);if(e)return e;let r=t.normalize("NFKD");return o3.set(t,r),r},a3=new h0.LRUCache({max:2**12}),c0=t=>{let e=a3.get(t);if(e)return e;let r=th(t.toLowerCase());return a3.set(t,r),r},rh=class extends h0.LRUCache{constructor(){super({max:256})}};Be.ResolveCache=rh;var f0=class extends h0.LRUCache{constructor(e=16*1024){super({maxSize:e,sizeCalculation:r=>r.length+1})}};Be.ChildrenCache=f0;var m3=Symbol("PathScurry setAsCwd"),Zt=class{name;root;roots;parent;nocase;isCWD=!1;#e;#r;get dev(){return this.#r}#s;get mode(){return this.#s}#l;get nlink(){return this.#l}#a;get uid(){return this.#a}#R;get gid(){return this.#R}#y;get rdev(){return this.#y}#f;get blksize(){return this.#f}#i;get ino(){return this.#i}#m;get size(){return this.#m}#u;get blocks(){return this.#u}#o;get atimeMs(){return this.#o}#n;get mtimeMs(){return this.#n}#v;get ctimeMs(){return this.#v}#S;get birthtimeMs(){return this.#S}#_;get atime(){return this.#_}#d;get mtime(){return this.#d}#P;get ctime(){return this.#P}#h;get birthtime(){return this.#h}#E;#T;#p;#g;#w;#$;#t;#k;#I;#O;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(e,r=Cn,n,s,i,o,a){this.name=e,this.#E=i?c0(e):th(e),this.#t=r&o$e,this.nocase=i,this.roots=s,this.root=n||this,this.#k=o,this.#p=a.fullpath,this.#w=a.relative,this.#$=a.relativePosix,this.parent=a.parent,this.parent?this.#e=this.parent.#e:this.#e=c3(a.fs)}depth(){return this.#T!==void 0?this.#T:this.parent?this.#T=this.parent.depth()+1:this.#T=0}childrenCache(){return this.#k}resolve(e){if(!e)return this;let r=this.getRootString(e),s=e.substring(r.length).split(this.splitSep);return r?this.getRoot(r).#A(s):this.#A(s)}#A(e){let r=this;for(let n of e)r=r.child(n);return r}children(){let e=this.#k.get(this);if(e)return e;let r=Object.assign([],{provisional:0});return this.#k.set(this,r),this.#t&=~rO,r}child(e,r){if(e===""||e===".")return this;if(e==="..")return this.parent||this;let n=this.children(),s=this.nocase?c0(e):th(e);for(let c of n)if(c.#E===s)return c;let i=this.parent?this.sep:"",o=this.#p?this.#p+i+e:void 0,a=this.newChild(e,Cn,{...r,parent:this,fullpath:o});return this.canReaddir()||(a.#t|=os),n.push(a),a}relative(){if(this.isCWD)return"";if(this.#w!==void 0)return this.#w;let e=this.name,r=this.parent;if(!r)return this.#w=this.name;let n=r.relative();return n+(!n||!r.parent?"":this.sep)+e}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(this.#$!==void 0)return this.#$;let e=this.name,r=this.parent;if(!r)return this.#$=this.fullpathPosix();let n=r.relativePosix();return n+(!n||!r.parent?"":"/")+e}fullpath(){if(this.#p!==void 0)return this.#p;let e=this.name,r=this.parent;if(!r)return this.#p=this.name;let s=r.fullpath()+(r.parent?this.sep:"")+e;return this.#p=s}fullpathPosix(){if(this.#g!==void 0)return this.#g;if(this.sep==="/")return this.#g=this.fullpath();if(!this.parent){let s=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(s)?this.#g=`//?/${s}`:this.#g=s}let e=this.parent,r=e.fullpathPosix(),n=r+(!r||!e.parent?"":"/")+this.name;return this.#g=n}isUnknown(){return(this.#t&Nn)===Cn}isType(e){return this[`is${e}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#t&Nn)===h3}isDirectory(){return(this.#t&Nn)===qs}isCharacterDevice(){return(this.#t&Nn)===f3}isBlockDevice(){return(this.#t&Nn)===d3}isFIFO(){return(this.#t&Nn)===u3}isSocket(){return(this.#t&Nn)===p3}isSymbolicLink(){return(this.#t&ka)===ka}lstatCached(){return this.#t&s3?this:void 0}readlinkCached(){return this.#I}realpathCached(){return this.#O}readdirCached(){let e=this.children();return e.slice(0,e.provisional)}canReadlink(){if(this.#I)return!0;if(!this.parent)return!1;let e=this.#t&Nn;return!(e!==Cn&&e!==ka||this.#t&a0||this.#t&os)}calledReaddir(){return!!(this.#t&rO)}isENOENT(){return!!(this.#t&os)}isNamed(e){return this.nocase?this.#E===c0(e):this.#E===th(e)}async readlink(){let e=this.#I;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=await this.#e.promises.readlink(this.fullpath()),n=(await this.parent.realpath())?.resolve(r);if(n)return this.#I=n}catch(r){this.#C(r.code);return}}readlinkSync(){let e=this.#I;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=this.#e.readlinkSync(this.fullpath()),n=this.parent.realpathSync()?.resolve(r);if(n)return this.#I=n}catch(r){this.#C(r.code);return}}#q(e){this.#t|=rO;for(let r=e.provisional;r<e.length;r++){let n=e[r];n&&n.#b()}}#b(){this.#t&os||(this.#t=(this.#t|os)&Xd,this.#z())}#z(){let e=this.children();e.provisional=0;for(let r of e)r.#b()}#j(){this.#t|=l0,this.#D()}#D(){if(this.#t&eh)return;let e=this.#t;(e&Nn)===qs&&(e&=Xd),this.#t=e|eh,this.#z()}#L(e=""){e==="ENOTDIR"||e==="EPERM"?this.#D():e==="ENOENT"?this.#b():this.children().provisional=0}#N(e=""){e==="ENOTDIR"?this.parent.#D():e==="ENOENT"&&this.#b()}#C(e=""){let r=this.#t;r|=a0,e==="ENOENT"&&(r|=os),(e==="EINVAL"||e==="UNKNOWN")&&(r&=Xd),this.#t=r,e==="ENOTDIR"&&this.parent&&this.parent.#D()}#F(e,r){return this.#B(e,r)||this.#U(e,r)}#U(e,r){let n=nO(e),s=this.newChild(e.name,n,{parent:this}),i=s.#t&Nn;return i!==qs&&i!==ka&&i!==Cn&&(s.#t|=eh),r.unshift(s),r.provisional++,s}#B(e,r){for(let n=r.provisional;n<r.length;n++){let s=r[n];if((this.nocase?c0(e.name):th(e.name))===s.#E)return this.#c(e,s,n,r)}}#c(e,r,n,s){let i=r.name;return r.#t=r.#t&Xd|nO(e),i!==e.name&&(r.name=e.name),n!==s.provisional&&(n===s.length-1?s.pop():s.splice(n,1),s.unshift(r)),s.provisional++,r}async lstat(){if(!(this.#t&os))try{return this.#V(await this.#e.promises.lstat(this.fullpath())),this}catch(e){this.#N(e.code)}}lstatSync(){if(!(this.#t&os))try{return this.#V(this.#e.lstatSync(this.fullpath())),this}catch(e){this.#N(e.code)}}#V(e){let{atime:r,atimeMs:n,birthtime:s,birthtimeMs:i,blksize:o,blocks:a,ctime:c,ctimeMs:l,dev:u,gid:d,ino:p,mode:f,mtime:h,mtimeMs:m,nlink:y,rdev:g,size:w,uid:_}=e;this.#_=r,this.#o=n,this.#h=s,this.#S=i,this.#f=o,this.#u=a,this.#P=c,this.#v=l,this.#r=u,this.#R=d,this.#i=p,this.#s=f,this.#d=h,this.#n=m,this.#l=y,this.#y=g,this.#m=w,this.#a=_;let v=nO(e);this.#t=this.#t&Xd|v|s3,v!==Cn&&v!==qs&&v!==ka&&(this.#t|=eh)}#M=[];#x=!1;#H(e){this.#x=!1;let r=this.#M.slice();this.#M.length=0,r.forEach(n=>n(null,e))}readdirCB(e,r=!1){if(!this.canReaddir()){r?e(null,[]):queueMicrotask(()=>e(null,[]));return}let n=this.children();if(this.calledReaddir()){let i=n.slice(0,n.provisional);r?e(null,i):queueMicrotask(()=>e(null,i));return}if(this.#M.push(e),this.#x)return;this.#x=!0;let s=this.fullpath();this.#e.readdir(s,{withFileTypes:!0},(i,o)=>{if(i)this.#L(i.code),n.provisional=0;else{for(let a of o)this.#F(a,n);this.#q(n)}this.#H(n.slice(0,n.provisional))})}#G;async readdir(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();if(this.#G)await this.#G;else{let n=()=>{};this.#G=new Promise(s=>n=s);try{for(let s of await this.#e.promises.readdir(r,{withFileTypes:!0}))this.#F(s,e);this.#q(e)}catch(s){this.#L(s.code),e.provisional=0}this.#G=void 0,n()}return e.slice(0,e.provisional)}readdirSync(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();try{for(let n of this.#e.readdirSync(r,{withFileTypes:!0}))this.#F(n,e);this.#q(e)}catch(n){this.#L(n.code),e.provisional=0}return e.slice(0,e.provisional)}canReaddir(){if(this.#t&i3)return!1;let e=Nn&this.#t;return e===Cn||e===qs||e===ka}shouldWalk(e,r){return(this.#t&qs)===qs&&!(this.#t&i3)&&!e.has(this)&&(!r||r(this))}async realpath(){if(this.#O)return this.#O;if(!((l0|a0|os)&this.#t))try{let e=await this.#e.promises.realpath(this.fullpath());return this.#O=this.resolve(e)}catch{this.#j()}}realpathSync(){if(this.#O)return this.#O;if(!((l0|a0|os)&this.#t))try{let e=this.#e.realpathSync(this.fullpath());return this.#O=this.resolve(e)}catch{this.#j()}}[m3](e){if(e===this)return;e.isCWD=!1,this.isCWD=!0;let r=new Set([]),n=[],s=this;for(;s&&s.parent;)r.add(s),s.#w=n.join(this.sep),s.#$=n.join("/"),s=s.parent,n.push("..");for(s=e;s&&s.parent&&!r.has(s);)s.#w=void 0,s.#$=void 0,s=s.parent}};Be.PathBase=Zt;var Da=class extends Zt{sep="\\";splitSep=i$e;constructor(e,r=Cn,n,s,i,o,a){super(e,r,n,s,i,o,a)}newChild(e,r=Cn,n={}){return new Da(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}getRootString(e){return u0.win32.parse(e).root}getRoot(e){if(e=s$e(e.toUpperCase()),e===this.root.name)return this.root;for(let[r,n]of Object.entries(this.roots))if(this.sameRoot(e,r))return this.roots[e]=n;return this.roots[e]=new sh(e,this).root}sameRoot(e,r=this.root.name){return e=e.toUpperCase().replace(/\//g,"\\").replace(l3,"$1\\"),e===r}};Be.PathWin32=Da;var Ma=class extends Zt{splitSep="/";sep="/";constructor(e,r=Cn,n,s,i,o,a){super(e,r,n,s,i,o,a)}getRootString(e){return e.startsWith("/")?"/":""}getRoot(e){return this.root}newChild(e,r=Cn,n={}){return new Ma(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}};Be.PathPosix=Ma;var nh=class{root;rootPath;roots;cwd;#e;#r;#s;nocase;#l;constructor(e=process.cwd(),r,n,{nocase:s,childrenCacheSize:i=16*1024,fs:o=Zd}={}){this.#l=c3(o),(e instanceof URL||e.startsWith("file://"))&&(e=(0,t$e.fileURLToPath)(e));let a=r.resolve(e);this.roots=Object.create(null),this.rootPath=this.parseRootPath(a),this.#e=new rh,this.#r=new rh,this.#s=new f0(i);let c=a.substring(this.rootPath.length).split(n);if(c.length===1&&!c[0]&&c.pop(),s===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=s,this.root=this.newRoot(this.#l),this.roots[this.rootPath]=this.root;let l=this.root,u=c.length-1,d=r.sep,p=this.rootPath,f=!1;for(let h of c){let m=u--;l=l.child(h,{relative:new Array(m).fill("..").join(d),relativePosix:new Array(m).fill("..").join("/"),fullpath:p+=(f?"":d)+h}),f=!0}this.cwd=l}depth(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.depth()}childrenCache(){return this.#s}resolve(...e){let r="";for(let i=e.length-1;i>=0;i--){let o=e[i];if(!(!o||o===".")&&(r=r?`${o}/${r}`:o,this.isAbsolute(o)))break}let n=this.#e.get(r);if(n!==void 0)return n;let s=this.cwd.resolve(r).fullpath();return this.#e.set(r,s),s}resolvePosix(...e){let r="";for(let i=e.length-1;i>=0;i--){let o=e[i];if(!(!o||o===".")&&(r=r?`${o}/${r}`:o,this.isAbsolute(o)))break}let n=this.#r.get(r);if(n!==void 0)return n;let s=this.cwd.resolve(r).fullpathPosix();return this.#r.set(r,s),s}relative(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relative()}relativePosix(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relativePosix()}basename(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.name}dirname(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),(e.parent||e).fullpath()}async readdir(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Zt||(r=e,e=this.cwd);let{withFileTypes:n}=r;if(e.canReaddir()){let s=await e.readdir();return n?s:s.map(i=>i.name)}else return[]}readdirSync(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Zt||(r=e,e=this.cwd);let{withFileTypes:n=!0}=r;return e.canReaddir()?n?e.readdirSync():e.readdirSync().map(s=>s.name):[]}async lstat(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstat()}lstatSync(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstatSync()}async readlink(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Zt||(r=e.withFileTypes,e=this.cwd);let n=await e.readlink();return r?n:n?.fullpath()}readlinkSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Zt||(r=e.withFileTypes,e=this.cwd);let n=e.readlinkSync();return r?n:n?.fullpath()}async realpath(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Zt||(r=e.withFileTypes,e=this.cwd);let n=await e.realpath();return r?n:n?.fullpath()}realpathSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Zt||(r=e.withFileTypes,e=this.cwd);let n=e.realpathSync();return r?n:n?.fullpath()}async walk(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Zt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:s=!1,filter:i,walkFilter:o}=r,a=[];(!i||i(e))&&a.push(n?e:e.fullpath());let c=new Set,l=(d,p)=>{c.add(d),d.readdirCB((f,h)=>{if(f)return p(f);let m=h.length;if(!m)return p();let y=()=>{--m===0&&p()};for(let g of h)(!i||i(g))&&a.push(n?g:g.fullpath()),s&&g.isSymbolicLink()?g.realpath().then(w=>w?.isUnknown()?w.lstat():w).then(w=>w?.shouldWalk(c,o)?l(w,y):y()):g.shouldWalk(c,o)?l(g,y):y()},!0)},u=e;return new Promise((d,p)=>{l(u,f=>{if(f)return p(f);d(a)})})}walkSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Zt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:s=!1,filter:i,walkFilter:o}=r,a=[];(!i||i(e))&&a.push(n?e:e.fullpath());let c=new Set([e]);for(let l of c){let u=l.readdirSync();for(let d of u){(!i||i(d))&&a.push(n?d:d.fullpath());let p=d;if(d.isSymbolicLink()){if(!(s&&(p=d.realpathSync())))continue;p.isUnknown()&&p.lstatSync()}p.shouldWalk(c,o)&&c.add(p)}}return a}[Symbol.asyncIterator](){return this.iterate()}iterate(e=this.cwd,r={}){return typeof e=="string"?e=this.cwd.resolve(e):e instanceof Zt||(r=e,e=this.cwd),this.stream(e,r)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Zt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:s=!1,filter:i,walkFilter:o}=r;(!i||i(e))&&(yield n?e:e.fullpath());let a=new Set([e]);for(let c of a){let l=c.readdirSync();for(let u of l){(!i||i(u))&&(yield n?u:u.fullpath());let d=u;if(u.isSymbolicLink()){if(!(s&&(d=u.realpathSync())))continue;d.isUnknown()&&d.lstatSync()}d.shouldWalk(a,o)&&a.add(d)}}}stream(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Zt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:s=!1,filter:i,walkFilter:o}=r,a=new n3.Minipass({objectMode:!0});(!i||i(e))&&a.write(n?e:e.fullpath());let c=new Set,l=[e],u=0,d=()=>{let p=!1;for(;!p;){let f=l.shift();if(!f){u===0&&a.end();return}u++,c.add(f);let h=(y,g,w=!1)=>{if(y)return a.emit("error",y);if(s&&!w){let _=[];for(let v of g)v.isSymbolicLink()&&_.push(v.realpath().then(S=>S?.isUnknown()?S.lstat():S));if(_.length){Promise.all(_).then(()=>h(null,g,!0));return}}for(let _ of g)_&&(!i||i(_))&&(a.write(n?_:_.fullpath())||(p=!0));u--;for(let _ of g){let v=_.realpathCached()||_;v.shouldWalk(c,o)&&l.push(v)}p&&!a.flowing?a.once("drain",d):m||d()},m=!0;f.readdirCB(h,!0),m=!1}};return d(),a}streamSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Zt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:s=!1,filter:i,walkFilter:o}=r,a=new n3.Minipass({objectMode:!0}),c=new Set;(!i||i(e))&&a.write(n?e:e.fullpath());let l=[e],u=0,d=()=>{let p=!1;for(;!p;){let f=l.shift();if(!f){u===0&&a.end();return}u++,c.add(f);let h=f.readdirSync();for(let m of h)(!i||i(m))&&(a.write(n?m:m.fullpath())||(p=!0));u--;for(let m of h){let y=m;if(m.isSymbolicLink()){if(!(s&&(y=m.realpathSync())))continue;y.isUnknown()&&y.lstatSync()}y.shouldWalk(c,o)&&l.push(y)}}p&&!a.flowing&&a.once("drain",d)};return d(),a}chdir(e=this.cwd){let r=this.cwd;this.cwd=typeof e=="string"?this.cwd.resolve(e):e,this.cwd[m3](r)}};Be.PathScurryBase=nh;var sh=class extends nh{sep="\\";constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,u0.win32,"\\",{...r,nocase:n}),this.nocase=n;for(let s=this.cwd;s;s=s.parent)s.nocase=this.nocase}parseRootPath(e){return u0.win32.parse(e).root.toUpperCase()}newRoot(e){return new Da(this.rootPath,qs,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")||e.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(e)}};Be.PathScurryWin32=sh;var ih=class extends nh{sep="/";constructor(e=process.cwd(),r={}){let{nocase:n=!1}=r;super(e,u0.posix,"/",{...r,nocase:n}),this.nocase=n}parseRootPath(e){return"/"}newRoot(e){return new Ma(this.rootPath,qs,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")}};Be.PathScurryPosix=ih;var d0=class extends ih{constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,{...r,nocase:n})}};Be.PathScurryDarwin=d0;Be.Path=process.platform==="win32"?Da:Ma;Be.PathScurry=process.platform==="win32"?sh:process.platform==="darwin"?d0:ih});var sO=E(p0=>{"use strict";Object.defineProperty(p0,"__esModule",{value:!0});p0.Pattern=void 0;var a$e=yo(),c$e=t=>t.length>=1,l$e=t=>t.length>=1,oh=class{#e;#r;#s;length;#l;#a;#R;#y;#f;#i;#m=!0;constructor(e,r,n,s){if(!c$e(e))throw new TypeError("empty pattern list");if(!l$e(r))throw new TypeError("empty glob list");if(r.length!==e.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=e.length,n<0||n>=this.length)throw new TypeError("index out of range");if(this.#e=e,this.#r=r,this.#s=n,this.#l=s,this.#s===0){if(this.isUNC()){let[i,o,a,c,...l]=this.#e,[u,d,p,f,...h]=this.#r;l[0]===""&&(l.shift(),h.shift());let m=[i,o,a,c,""].join("/"),y=[u,d,p,f,""].join("/");this.#e=[m,...l],this.#r=[y,...h],this.length=this.#e.length}else if(this.isDrive()||this.isAbsolute()){let[i,...o]=this.#e,[a,...c]=this.#r;o[0]===""&&(o.shift(),c.shift());let l=i+"/",u=a+"/";this.#e=[l,...o],this.#r=[u,...c],this.length=this.#e.length}}}pattern(){return this.#e[this.#s]}isString(){return typeof this.#e[this.#s]=="string"}isGlobstar(){return this.#e[this.#s]===a$e.GLOBSTAR}isRegExp(){return this.#e[this.#s]instanceof RegExp}globString(){return this.#R=this.#R||(this.#s===0?this.isAbsolute()?this.#r[0]+this.#r.slice(1).join("/"):this.#r.join("/"):this.#r.slice(this.#s).join("/"))}hasMore(){return this.length>this.#s+1}rest(){return this.#a!==void 0?this.#a:this.hasMore()?(this.#a=new oh(this.#e,this.#r,this.#s+1,this.#l),this.#a.#i=this.#i,this.#a.#f=this.#f,this.#a.#y=this.#y,this.#a):this.#a=null}isUNC(){let e=this.#e;return this.#f!==void 0?this.#f:this.#f=this.#l==="win32"&&this.#s===0&&e[0]===""&&e[1]===""&&typeof e[2]=="string"&&!!e[2]&&typeof e[3]=="string"&&!!e[3]}isDrive(){let e=this.#e;return this.#y!==void 0?this.#y:this.#y=this.#l==="win32"&&this.#s===0&&this.length>1&&typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0])}isAbsolute(){let e=this.#e;return this.#i!==void 0?this.#i:this.#i=e[0]===""&&e.length>1||this.isDrive()||this.isUNC()}root(){let e=this.#e[0];return typeof e=="string"&&this.isAbsolute()&&this.#s===0?e:""}checkFollowGlobstar(){return!(this.#s===0||!this.isGlobstar()||!this.#m)}markFollowGlobstar(){return this.#s===0||!this.isGlobstar()||!this.#m?!1:(this.#m=!1,!0)}};p0.Pattern=oh});var oO=E(m0=>{"use strict";Object.defineProperty(m0,"__esModule",{value:!0});m0.Ignore=void 0;var y3=yo(),u$e=sO(),f$e=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",iO=class{relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(e,{nobrace:r,nocase:n,noext:s,noglobstar:i,platform:o=f$e}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=o,this.mmopts={dot:!0,nobrace:r,nocase:n,noext:s,noglobstar:i,optimizationLevel:2,platform:o,nocomment:!0,nonegate:!0};for(let a of e)this.add(a)}add(e){let r=new y3.Minimatch(e,this.mmopts);for(let n=0;n<r.set.length;n++){let s=r.set[n],i=r.globParts[n];if(!s||!i)throw new Error("invalid pattern object");for(;s[0]==="."&&i[0]===".";)s.shift(),i.shift();let o=new u$e.Pattern(s,i,0,this.platform),a=new y3.Minimatch(o.globString(),this.mmopts),c=i[i.length-1]==="**",l=o.isAbsolute();l?this.absolute.push(a):this.relative.push(a),c&&(l?this.absoluteChildren.push(a):this.relativeChildren.push(a))}}ignored(e){let r=e.fullpath(),n=`${r}/`,s=e.relative()||".",i=`${s}/`;for(let o of this.relative)if(o.match(s)||o.match(i))return!0;for(let o of this.absolute)if(o.match(r)||o.match(n))return!0;return!1}childrenIgnored(e){let r=e.fullpath()+"/",n=(e.relative()||".")+"/";for(let s of this.relativeChildren)if(s.match(n))return!0;for(let s of this.absoluteChildren)if(s.match(r))return!0;return!1}};m0.Ignore=iO});var v3=E(Ls=>{"use strict";Object.defineProperty(Ls,"__esModule",{value:!0});Ls.Processor=Ls.SubWalks=Ls.MatchRecord=Ls.HasWalkedCache=void 0;var _3=yo(),jl=class{store;constructor(e=new Map){this.store=e}copy(){return new jl(new Map(this.store))}hasWalked(e,r){return this.store.get(e.fullpath())?.has(r.globString())}storeWalked(e,r){let n=e.fullpath(),s=this.store.get(n);s?s.add(r.globString()):this.store.set(n,new Set([r.globString()]))}};Ls.HasWalkedCache=jl;var g0=class{store=new Map;add(e,r,n){let s=(r?2:0)|(n?1:0),i=this.store.get(e);this.store.set(e,i===void 0?s:s&i)}entries(){return[...this.store.entries()].map(([e,r])=>[e,!!(r&2),!!(r&1)])}};Ls.MatchRecord=g0;var y0=class{store=new Map;add(e,r){if(!e.canReaddir())return;let n=this.store.get(e);n?n.find(s=>s.globString()===r.globString())||n.push(r):this.store.set(e,[r])}get(e){let r=this.store.get(e);if(!r)throw new Error("attempting to walk unknown path");return r}entries(){return this.keys().map(e=>[e,this.store.get(e)])}keys(){return[...this.store.keys()].filter(e=>e.canReaddir())}};Ls.SubWalks=y0;var ah=class{hasWalkedCache;matches=new g0;subwalks=new y0;patterns;follow;dot;opts;constructor(e,r){this.opts=e,this.follow=!!e.follow,this.dot=!!e.dot,this.hasWalkedCache=r?r.copy():new jl}processPatterns(e,r){this.patterns=r;let n=r.map(s=>[e,s]);for(let[s,i]of n){this.hasWalkedCache.storeWalked(s,i);let o=i.root(),a=i.isAbsolute()&&this.opts.absolute!==!1;if(o){s=s.resolve(o==="/"&&this.opts.root!==void 0?this.opts.root:o);let d=i.rest();if(d)i=d;else{this.matches.add(s,!0,!1);continue}}if(s.isENOENT())continue;let c,l,u=!1;for(;typeof(c=i.pattern())=="string"&&(l=i.rest());)s=s.resolve(c),i=l,u=!0;if(c=i.pattern(),l=i.rest(),u){if(this.hasWalkedCache.hasWalked(s,i))continue;this.hasWalkedCache.storeWalked(s,i)}if(typeof c=="string"){let d=c===".."||c===""||c===".";this.matches.add(s.resolve(c),a,d);continue}else if(c===_3.GLOBSTAR){(!s.isSymbolicLink()||this.follow||i.checkFollowGlobstar())&&this.subwalks.add(s,i);let d=l?.pattern(),p=l?.rest();if(!l||(d===""||d===".")&&!p)this.matches.add(s,a,d===""||d===".");else if(d===".."){let f=s.parent||s;p?this.hasWalkedCache.hasWalked(f,p)||this.subwalks.add(f,p):this.matches.add(f,a,!0)}}else c instanceof RegExp&&this.subwalks.add(s,i)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new ah(this.opts,this.hasWalkedCache)}filterEntries(e,r){let n=this.subwalks.get(e),s=this.child();for(let i of r)for(let o of n){let a=o.isAbsolute(),c=o.pattern(),l=o.rest();c===_3.GLOBSTAR?s.testGlobstar(i,o,l,a):c instanceof RegExp?s.testRegExp(i,c,l,a):s.testString(i,c,l,a)}return s}testGlobstar(e,r,n,s){if((this.dot||!e.name.startsWith("."))&&(r.hasMore()||this.matches.add(e,s,!1),e.canReaddir()&&(this.follow||!e.isSymbolicLink()?this.subwalks.add(e,r):e.isSymbolicLink()&&(n&&r.checkFollowGlobstar()?this.subwalks.add(e,n):r.markFollowGlobstar()&&this.subwalks.add(e,r)))),n){let i=n.pattern();if(typeof i=="string"&&i!==".."&&i!==""&&i!==".")this.testString(e,i,n.rest(),s);else if(i===".."){let o=e.parent||e;this.subwalks.add(o,n)}else i instanceof RegExp&&this.testRegExp(e,i,n.rest(),s)}}testRegExp(e,r,n,s){r.test(e.name)&&(n?this.subwalks.add(e,n):this.matches.add(e,s,!1))}testString(e,r,n,s){e.isNamed(r)&&(n?this.subwalks.add(e,n):this.matches.add(e,s,!1))}};Ls.Processor=ah});var E3=E(wo=>{"use strict";Object.defineProperty(wo,"__esModule",{value:!0});wo.GlobStream=wo.GlobWalker=wo.GlobUtil=void 0;var d$e=tO(),w3=oO(),b3=v3(),h$e=(t,e)=>typeof t=="string"?new w3.Ignore([t],e):Array.isArray(t)?new w3.Ignore(t,e):t,ch=class{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#e=[];#r;#s;signal;maxDepth;includeChildMatches;constructor(e,r,n){if(this.patterns=e,this.path=r,this.opts=n,this.#s=!n.posix&&n.platform==="win32"?"\\":"/",this.includeChildMatches=n.includeChildMatches!==!1,(n.ignore||!this.includeChildMatches)&&(this.#r=h$e(n.ignore??[],n),!this.includeChildMatches&&typeof this.#r.add!="function")){let s="cannot ignore child matches, ignore lacks add() method.";throw new Error(s)}this.maxDepth=n.maxDepth||1/0,n.signal&&(this.signal=n.signal,this.signal.addEventListener("abort",()=>{this.#e.length=0}))}#l(e){return this.seen.has(e)||!!this.#r?.ignored?.(e)}#a(e){return!!this.#r?.childrenIgnored?.(e)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let e;for(;!this.paused&&(e=this.#e.shift());)e()}onResume(e){this.signal?.aborted||(this.paused?this.#e.push(e):e())}async matchCheck(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||await e.realpath(),!n)return;e=n}let i=e.isUnknown()||this.opts.stat?await e.lstat():e;if(this.opts.follow&&this.opts.nodir&&i?.isSymbolicLink()){let o=await i.realpath();o&&(o.isUnknown()||this.opts.stat)&&await o.lstat()}return this.matchCheckTest(i,r)}matchCheckTest(e,r){return e&&(this.maxDepth===1/0||e.depth()<=this.maxDepth)&&(!r||e.canReaddir())&&(!this.opts.nodir||!e.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!e.isSymbolicLink()||!e.realpathCached()?.isDirectory())&&!this.#l(e)?e:void 0}matchCheckSync(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||e.realpathSync(),!n)return;e=n}let i=e.isUnknown()||this.opts.stat?e.lstatSync():e;if(this.opts.follow&&this.opts.nodir&&i?.isSymbolicLink()){let o=i.realpathSync();o&&(o?.isUnknown()||this.opts.stat)&&o.lstatSync()}return this.matchCheckTest(i,r)}matchFinish(e,r){if(this.#l(e))return;if(!this.includeChildMatches&&this.#r?.add){let i=`${e.relativePosix()}/**`;this.#r.add(i)}let n=this.opts.absolute===void 0?r:this.opts.absolute;this.seen.add(e);let s=this.opts.mark&&e.isDirectory()?this.#s:"";if(this.opts.withFileTypes)this.matchEmit(e);else if(n){let i=this.opts.posix?e.fullpathPosix():e.fullpath();this.matchEmit(i+s)}else{let i=this.opts.posix?e.relativePosix():e.relative(),o=this.opts.dotRelative&&!i.startsWith(".."+this.#s)?"."+this.#s:"";this.matchEmit(i?o+i+s:"."+s)}}async match(e,r,n){let s=await this.matchCheck(e,n);s&&this.matchFinish(s,r)}matchSync(e,r,n){let s=this.matchCheckSync(e,n);s&&this.matchFinish(s,r)}walkCB(e,r,n){this.signal?.aborted&&n(),this.walkCB2(e,r,new b3.Processor(this.opts),n)}walkCB2(e,r,n,s){if(this.#a(e))return s();if(this.signal?.aborted&&s(),this.paused){this.onResume(()=>this.walkCB2(e,r,n,s));return}n.processPatterns(e,r);let i=1,o=()=>{--i===0&&s()};for(let[a,c,l]of n.matches.entries())this.#l(a)||(i++,this.match(a,c,l).then(()=>o()));for(let a of n.subwalkTargets()){if(this.maxDepth!==1/0&&a.depth()>=this.maxDepth)continue;i++;let c=a.readdirCached();a.calledReaddir()?this.walkCB3(a,c,n,o):a.readdirCB((l,u)=>this.walkCB3(a,u,n,o),!0)}o()}walkCB3(e,r,n,s){n=n.filterEntries(e,r);let i=1,o=()=>{--i===0&&s()};for(let[a,c,l]of n.matches.entries())this.#l(a)||(i++,this.match(a,c,l).then(()=>o()));for(let[a,c]of n.subwalks.entries())i++,this.walkCB2(a,c,n.child(),o);o()}walkCBSync(e,r,n){this.signal?.aborted&&n(),this.walkCB2Sync(e,r,new b3.Processor(this.opts),n)}walkCB2Sync(e,r,n,s){if(this.#a(e))return s();if(this.signal?.aborted&&s(),this.paused){this.onResume(()=>this.walkCB2Sync(e,r,n,s));return}n.processPatterns(e,r);let i=1,o=()=>{--i===0&&s()};for(let[a,c,l]of n.matches.entries())this.#l(a)||this.matchSync(a,c,l);for(let a of n.subwalkTargets()){if(this.maxDepth!==1/0&&a.depth()>=this.maxDepth)continue;i++;let c=a.readdirSync();this.walkCB3Sync(a,c,n,o)}o()}walkCB3Sync(e,r,n,s){n=n.filterEntries(e,r);let i=1,o=()=>{--i===0&&s()};for(let[a,c,l]of n.matches.entries())this.#l(a)||this.matchSync(a,c,l);for(let[a,c]of n.subwalks.entries())i++,this.walkCB2Sync(a,c,n.child(),o);o()}};wo.GlobUtil=ch;var aO=class extends ch{matches=new Set;constructor(e,r,n){super(e,r,n)}matchEmit(e){this.matches.add(e)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((e,r)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?r(this.signal.reason):e(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}};wo.GlobWalker=aO;var cO=class extends ch{results;constructor(e,r,n){super(e,r,n),this.results=new d$e.Minipass({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(e){this.results.write(e),this.results.flowing||this.pause()}stream(){let e=this.path;return e.isUnknown()?e.lstat().then(()=>{this.walkCB(e,this.patterns,()=>this.results.end())}):this.walkCB(e,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};wo.GlobStream=cO});var uO=E(w0=>{"use strict";Object.defineProperty(w0,"__esModule",{value:!0});w0.Glob=void 0;var p$e=yo(),m$e=require("url"),_0=g3(),g$e=sO(),v0=E3(),y$e=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",lO=class{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(e,r){if(!r)throw new TypeError("glob options required");if(this.withFileTypes=!!r.withFileTypes,this.signal=r.signal,this.follow=!!r.follow,this.dot=!!r.dot,this.dotRelative=!!r.dotRelative,this.nodir=!!r.nodir,this.mark=!!r.mark,r.cwd?(r.cwd instanceof URL||r.cwd.startsWith("file://"))&&(r.cwd=(0,m$e.fileURLToPath)(r.cwd)):this.cwd="",this.cwd=r.cwd||"",this.root=r.root,this.magicalBraces=!!r.magicalBraces,this.nobrace=!!r.nobrace,this.noext=!!r.noext,this.realpath=!!r.realpath,this.absolute=r.absolute,this.includeChildMatches=r.includeChildMatches!==!1,this.noglobstar=!!r.noglobstar,this.matchBase=!!r.matchBase,this.maxDepth=typeof r.maxDepth=="number"?r.maxDepth:1/0,this.stat=!!r.stat,this.ignore=r.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof e=="string"&&(e=[e]),this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(e=e.map(c=>c.replace(/\\/g,"/"))),this.matchBase){if(r.noglobstar)throw new TypeError("base matching requires globstar");e=e.map(c=>c.includes("/")?c:`./**/${c}`)}if(this.pattern=e,this.platform=r.platform||y$e,this.opts={...r,platform:this.platform},r.scurry){if(this.scurry=r.scurry,r.nocase!==void 0&&r.nocase!==r.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let c=r.platform==="win32"?_0.PathScurryWin32:r.platform==="darwin"?_0.PathScurryDarwin:r.platform?_0.PathScurryPosix:_0.PathScurry;this.scurry=new c(this.cwd,{nocase:r.nocase,fs:r.fs})}this.nocase=this.scurry.nocase;let n=this.platform==="darwin"||this.platform==="win32",s={...r,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:n,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},i=this.pattern.map(c=>new p$e.Minimatch(c,s)),[o,a]=i.reduce((c,l)=>(c[0].push(...l.set),c[1].push(...l.globParts),c),[[],[]]);this.patterns=o.map((c,l)=>{let u=a[l];if(!u)throw new Error("invalid pattern object");return new g$e.Pattern(c,u,0,this.platform)})}async walk(){return[...await new v0.GlobWalker(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new v0.GlobWalker(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new v0.GlobStream(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new v0.GlobStream(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};w0.Glob=lO});var fO=E(b0=>{"use strict";Object.defineProperty(b0,"__esModule",{value:!0});b0.hasMagic=void 0;var _$e=yo(),v$e=(t,e={})=>{Array.isArray(t)||(t=[t]);for(let r of t)if(new _$e.Minimatch(r,e).hasMagic())return!0;return!1};b0.hasMagic=v$e});var $3=E(xe=>{"use strict";Object.defineProperty(xe,"__esModule",{value:!0});xe.glob=xe.sync=xe.iterate=xe.iterateSync=xe.stream=xe.streamSync=xe.Ignore=xe.hasMagic=xe.Glob=xe.unescape=xe.escape=void 0;xe.globStreamSync=lh;xe.globStream=dO;xe.globSync=hO;xe.globIterateSync=uh;xe.globIterate=pO;var S3=yo(),ja=uO(),w$e=fO(),R3=yo();Object.defineProperty(xe,"escape",{enumerable:!0,get:function(){return R3.escape}});Object.defineProperty(xe,"unescape",{enumerable:!0,get:function(){return R3.unescape}});var b$e=uO();Object.defineProperty(xe,"Glob",{enumerable:!0,get:function(){return b$e.Glob}});var E$e=fO();Object.defineProperty(xe,"hasMagic",{enumerable:!0,get:function(){return E$e.hasMagic}});var S$e=oO();Object.defineProperty(xe,"Ignore",{enumerable:!0,get:function(){return S$e.Ignore}});function lh(t,e={}){return new ja.Glob(t,e).streamSync()}function dO(t,e={}){return new ja.Glob(t,e).stream()}function hO(t,e={}){return new ja.Glob(t,e).walkSync()}async function T3(t,e={}){return new ja.Glob(t,e).walk()}function uh(t,e={}){return new ja.Glob(t,e).iterateSync()}function pO(t,e={}){return new ja.Glob(t,e).iterate()}xe.streamSync=lh;xe.stream=Object.assign(dO,{sync:lh});xe.iterateSync=uh;xe.iterate=Object.assign(pO,{sync:uh});xe.sync=Object.assign(hO,{stream:lh,iterate:uh});xe.glob=Object.assign(T3,{glob:T3,globSync:hO,sync:xe.sync,globStream:dO,stream:xe.stream,globStreamSync:lh,streamSync:xe.streamSync,globIterate:pO,iterate:xe.iterate,globIterateSync:uh,iterateSync:xe.iterateSync,Glob:ja.Glob,hasMagic:w$e.hasMagic,escape:S3.escape,unescape:S3.unescape});xe.glob.glob=xe.glob});var P3=E((lqe,mO)=>{"use strict";var T$e=/at\s(?:.*\.)?plugin\s.*\n\s*(.*)/,R$e=/(\w*(\.\w*)*)\..*/;mO.exports=function(e){if(e.name.length>0)return e.name;let r=Error.stackTraceLimit;Error.stackTraceLimit=10;try{throw new Error("anonymous function")}catch(n){return Error.stackTraceLimit=r,O3(n.stack)}};function O3(t){let e=t.match(T$e);return e?e[1].split(/[/\\]/).slice(-1)[0].match(R$e)[1]:"anonymous"}mO.exports.extractPluginName=O3});var N3=E((uqe,x3)=>{"use strict";x3.exports=function(e){return e[0]==="@"&&(e=e.slice(1).replace("/","-")),e.replace(/-(.)/g,function(r,n){return n.toUpperCase()})}});var yO=E((fqe,E0)=>{"use strict";var $$e=P3(),O$e=N3(),P$e=0;function gO(t,e={}){let r=!1;if(t.default!==void 0&&(t=t.default),typeof t!="function")throw new TypeError(`fastify-plugin expects a function, instead got a '${typeof t}'`);if(typeof e=="string"&&(e={fastify:e}),typeof e!="object"||Array.isArray(e)||e===null)throw new TypeError("The options object should be an object");if(e.fastify!==void 0&&typeof e.fastify!="string")throw new TypeError(`fastify-plugin expects a version string, instead got '${typeof e.fastify}'`);e.name||(r=!0,e.name=$$e(t)+"-auto-"+P$e++),t[Symbol.for("skip-override")]=e.encapsulate!==!0,t[Symbol.for("fastify.display-name")]=e.name,t[Symbol.for("plugin-meta")]=e,t.default||(t.default=t);let n=O$e(e.name);return!r&&!t[n]&&(t[n]=t),t}E0.exports=gO;E0.exports.default=gO;E0.exports.fastifyPlugin=gO});var _O=E((dqe,C3)=>{"use strict";function x$e(t){let e=t.length;return e>21&&t.indexOf("application/javascript")===0||e>14&&t.indexOf("application/json")===0||e>5&&t.indexOf("text/")===0}C3.exports.isUtf8MimeType=x$e});var A3=E((hqe,I3)=>{"use strict";function S0(){this._types=Object.create(null),this._extensions=Object.create(null);for(let t=0;t<arguments.length;t++)this.define(arguments[t]);this.define=this.define.bind(this),this.getType=this.getType.bind(this),this.getExtension=this.getExtension.bind(this)}S0.prototype.define=function(t,e){for(let r in t){let n=t[r].map(function(s){return s.toLowerCase()});r=r.toLowerCase();for(let s=0;s<n.length;s++){let i=n[s];if(i[0]!=="*"){if(!e&&i in this._types)throw new Error('Attempt to change mapping for "'+i+'" extension from "'+this._types[i]+'" to "'+r+'". Pass `force=true` to allow this, otherwise remove "'+i+'" from the list of extensions for "'+r+'".');this._types[i]=r}}if(e||!this._extensions[r]){let s=n[0];this._extensions[r]=s[0]!=="*"?s:s.substr(1)}}};S0.prototype.getType=function(t){t=String(t);let e=t.replace(/^.*[/\\]/,"").toLowerCase(),r=e.replace(/^.*\./,"").toLowerCase(),n=e.length<t.length;return(r.length<e.length-1||!n)&&this._types[r]||null};S0.prototype.getExtension=function(t){return t=/^\s*([^;\s]*)/.test(t)&&RegExp.$1,t&&this._extensions[t.toLowerCase()]||null};I3.exports=S0});var D3=E((pqe,k3)=>{k3.exports={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["es","ecma"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/express":["exp"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/trig":["trig"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avif":["avif"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/step+xml":["stpx"],"model/step+zip":["stpz"],"model/step-xml+zip":["stpxz"],"model/stl":["stl"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]}});var j3=E((mqe,M3)=>{M3.exports={"application/prs.cww":["cww"],"application/vnd.1000minds.decision-model+xml":["1km"],"application/vnd.3gpp.pic-bw-large":["plb"],"application/vnd.3gpp.pic-bw-small":["psb"],"application/vnd.3gpp.pic-bw-var":["pvb"],"application/vnd.3gpp2.tcap":["tcap"],"application/vnd.3m.post-it-notes":["pwn"],"application/vnd.accpac.simply.aso":["aso"],"application/vnd.accpac.simply.imp":["imp"],"application/vnd.acucobol":["acu"],"application/vnd.acucorp":["atc","acutc"],"application/vnd.adobe.air-application-installer-package+zip":["air"],"application/vnd.adobe.formscentral.fcdt":["fcdt"],"application/vnd.adobe.fxp":["fxp","fxpl"],"application/vnd.adobe.xdp+xml":["xdp"],"application/vnd.adobe.xfdf":["xfdf"],"application/vnd.ahead.space":["ahead"],"application/vnd.airzip.filesecure.azf":["azf"],"application/vnd.airzip.filesecure.azs":["azs"],"application/vnd.amazon.ebook":["azw"],"application/vnd.americandynamics.acc":["acc"],"application/vnd.amiga.ami":["ami"],"application/vnd.android.package-archive":["apk"],"application/vnd.anser-web-certificate-issue-initiation":["cii"],"application/vnd.anser-web-funds-transfer-initiation":["fti"],"application/vnd.antix.game-component":["atx"],"application/vnd.apple.installer+xml":["mpkg"],"application/vnd.apple.keynote":["key"],"application/vnd.apple.mpegurl":["m3u8"],"application/vnd.apple.numbers":["numbers"],"application/vnd.apple.pages":["pages"],"application/vnd.apple.pkpass":["pkpass"],"application/vnd.aristanetworks.swi":["swi"],"application/vnd.astraea-software.iota":["iota"],"application/vnd.audiograph":["aep"],"application/vnd.balsamiq.bmml+xml":["bmml"],"application/vnd.blueice.multipass":["mpm"],"application/vnd.bmi":["bmi"],"application/vnd.businessobjects":["rep"],"application/vnd.chemdraw+xml":["cdxml"],"application/vnd.chipnuts.karaoke-mmd":["mmd"],"application/vnd.cinderella":["cdy"],"application/vnd.citationstyles.style+xml":["csl"],"application/vnd.claymore":["cla"],"application/vnd.cloanto.rp9":["rp9"],"application/vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"application/vnd.cluetrust.cartomobile-config":["c11amc"],"application/vnd.cluetrust.cartomobile-config-pkg":["c11amz"],"application/vnd.commonspace":["csp"],"application/vnd.contact.cmsg":["cdbcmsg"],"application/vnd.cosmocaller":["cmc"],"application/vnd.crick.clicker":["clkx"],"application/vnd.crick.clicker.keyboard":["clkk"],"application/vnd.crick.clicker.palette":["clkp"],"application/vnd.crick.clicker.template":["clkt"],"application/vnd.crick.clicker.wordbank":["clkw"],"application/vnd.criticaltools.wbs+xml":["wbs"],"application/vnd.ctc-posml":["pml"],"application/vnd.cups-ppd":["ppd"],"application/vnd.curl.car":["car"],"application/vnd.curl.pcurl":["pcurl"],"application/vnd.dart":["dart"],"application/vnd.data-vision.rdz":["rdz"],"application/vnd.dbf":["dbf"],"application/vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"application/vnd.dece.ttml+xml":["uvt","uvvt"],"application/vnd.dece.unspecified":["uvx","uvvx"],"application/vnd.dece.zip":["uvz","uvvz"],"application/vnd.denovo.fcselayout-link":["fe_launch"],"application/vnd.dna":["dna"],"application/vnd.dolby.mlp":["mlp"],"application/vnd.dpgraph":["dpg"],"application/vnd.dreamfactory":["dfac"],"application/vnd.ds-keypoint":["kpxx"],"application/vnd.dvb.ait":["ait"],"application/vnd.dvb.service":["svc"],"application/vnd.dynageo":["geo"],"application/vnd.ecowin.chart":["mag"],"application/vnd.enliven":["nml"],"application/vnd.epson.esf":["esf"],"application/vnd.epson.msf":["msf"],"application/vnd.epson.quickanime":["qam"],"application/vnd.epson.salt":["slt"],"application/vnd.epson.ssf":["ssf"],"application/vnd.eszigno3+xml":["es3","et3"],"application/vnd.ezpix-album":["ez2"],"application/vnd.ezpix-package":["ez3"],"application/vnd.fdf":["fdf"],"application/vnd.fdsn.mseed":["mseed"],"application/vnd.fdsn.seed":["seed","dataless"],"application/vnd.flographit":["gph"],"application/vnd.fluxtime.clip":["ftc"],"application/vnd.framemaker":["fm","frame","maker","book"],"application/vnd.frogans.fnc":["fnc"],"application/vnd.frogans.ltf":["ltf"],"application/vnd.fsc.weblaunch":["fsc"],"application/vnd.fujitsu.oasys":["oas"],"application/vnd.fujitsu.oasys2":["oa2"],"application/vnd.fujitsu.oasys3":["oa3"],"application/vnd.fujitsu.oasysgp":["fg5"],"application/vnd.fujitsu.oasysprs":["bh2"],"application/vnd.fujixerox.ddd":["ddd"],"application/vnd.fujixerox.docuworks":["xdw"],"application/vnd.fujixerox.docuworks.binder":["xbd"],"application/vnd.fuzzysheet":["fzs"],"application/vnd.genomatix.tuxedo":["txd"],"application/vnd.geogebra.file":["ggb"],"application/vnd.geogebra.tool":["ggt"],"application/vnd.geometry-explorer":["gex","gre"],"application/vnd.geonext":["gxt"],"application/vnd.geoplan":["g2w"],"application/vnd.geospace":["g3w"],"application/vnd.gmx":["gmx"],"application/vnd.google-apps.document":["gdoc"],"application/vnd.google-apps.presentation":["gslides"],"application/vnd.google-apps.spreadsheet":["gsheet"],"application/vnd.google-earth.kml+xml":["kml"],"application/vnd.google-earth.kmz":["kmz"],"application/vnd.grafeq":["gqf","gqs"],"application/vnd.groove-account":["gac"],"application/vnd.groove-help":["ghf"],"application/vnd.groove-identity-message":["gim"],"application/vnd.groove-injector":["grv"],"application/vnd.groove-tool-message":["gtm"],"application/vnd.groove-tool-template":["tpl"],"application/vnd.groove-vcard":["vcg"],"application/vnd.hal+xml":["hal"],"application/vnd.handheld-entertainment+xml":["zmm"],"application/vnd.hbci":["hbci"],"application/vnd.hhe.lesson-player":["les"],"application/vnd.hp-hpgl":["hpgl"],"application/vnd.hp-hpid":["hpid"],"application/vnd.hp-hps":["hps"],"application/vnd.hp-jlyt":["jlt"],"application/vnd.hp-pcl":["pcl"],"application/vnd.hp-pclxl":["pclxl"],"application/vnd.hydrostatix.sof-data":["sfd-hdstx"],"application/vnd.ibm.minipay":["mpy"],"application/vnd.ibm.modcap":["afp","listafp","list3820"],"application/vnd.ibm.rights-management":["irm"],"application/vnd.ibm.secure-container":["sc"],"application/vnd.iccprofile":["icc","icm"],"application/vnd.igloader":["igl"],"application/vnd.immervision-ivp":["ivp"],"application/vnd.immervision-ivu":["ivu"],"application/vnd.insors.igm":["igm"],"application/vnd.intercon.formnet":["xpw","xpx"],"application/vnd.intergeo":["i2g"],"application/vnd.intu.qbo":["qbo"],"application/vnd.intu.qfx":["qfx"],"application/vnd.ipunplugged.rcprofile":["rcprofile"],"application/vnd.irepository.package+xml":["irp"],"application/vnd.is-xpr":["xpr"],"application/vnd.isac.fcs":["fcs"],"application/vnd.jam":["jam"],"application/vnd.jcp.javame.midlet-rms":["rms"],"application/vnd.jisp":["jisp"],"application/vnd.joost.joda-archive":["joda"],"application/vnd.kahootz":["ktz","ktr"],"application/vnd.kde.karbon":["karbon"],"application/vnd.kde.kchart":["chrt"],"application/vnd.kde.kformula":["kfo"],"application/vnd.kde.kivio":["flw"],"application/vnd.kde.kontour":["kon"],"application/vnd.kde.kpresenter":["kpr","kpt"],"application/vnd.kde.kspread":["ksp"],"application/vnd.kde.kword":["kwd","kwt"],"application/vnd.kenameaapp":["htke"],"application/vnd.kidspiration":["kia"],"application/vnd.kinar":["kne","knp"],"application/vnd.koan":["skp","skd","skt","skm"],"application/vnd.kodak-descriptor":["sse"],"application/vnd.las.las+xml":["lasxml"],"application/vnd.llamagraphics.life-balance.desktop":["lbd"],"application/vnd.llamagraphics.life-balance.exchange+xml":["lbe"],"application/vnd.lotus-1-2-3":["123"],"application/vnd.lotus-approach":["apr"],"application/vnd.lotus-freelance":["pre"],"application/vnd.lotus-notes":["nsf"],"application/vnd.lotus-organizer":["org"],"application/vnd.lotus-screencam":["scm"],"application/vnd.lotus-wordpro":["lwp"],"application/vnd.macports.portpkg":["portpkg"],"application/vnd.mapbox-vector-tile":["mvt"],"application/vnd.mcd":["mcd"],"application/vnd.medcalcdata":["mc1"],"application/vnd.mediastation.cdkey":["cdkey"],"application/vnd.mfer":["mwf"],"application/vnd.mfmp":["mfm"],"application/vnd.micrografx.flo":["flo"],"application/vnd.micrografx.igx":["igx"],"application/vnd.mif":["mif"],"application/vnd.mobius.daf":["daf"],"application/vnd.mobius.dis":["dis"],"application/vnd.mobius.mbk":["mbk"],"application/vnd.mobius.mqy":["mqy"],"application/vnd.mobius.msl":["msl"],"application/vnd.mobius.plc":["plc"],"application/vnd.mobius.txf":["txf"],"application/vnd.mophun.application":["mpn"],"application/vnd.mophun.certificate":["mpc"],"application/vnd.mozilla.xul+xml":["xul"],"application/vnd.ms-artgalry":["cil"],"application/vnd.ms-cab-compressed":["cab"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.addin.macroenabled.12":["xlam"],"application/vnd.ms-excel.sheet.binary.macroenabled.12":["xlsb"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.ms-excel.template.macroenabled.12":["xltm"],"application/vnd.ms-fontobject":["eot"],"application/vnd.ms-htmlhelp":["chm"],"application/vnd.ms-ims":["ims"],"application/vnd.ms-lrm":["lrm"],"application/vnd.ms-officetheme":["thmx"],"application/vnd.ms-outlook":["msg"],"application/vnd.ms-pki.seccat":["cat"],"application/vnd.ms-pki.stl":["*stl"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.ms-powerpoint.addin.macroenabled.12":["ppam"],"application/vnd.ms-powerpoint.presentation.macroenabled.12":["pptm"],"application/vnd.ms-powerpoint.slide.macroenabled.12":["sldm"],"application/vnd.ms-powerpoint.slideshow.macroenabled.12":["ppsm"],"application/vnd.ms-powerpoint.template.macroenabled.12":["potm"],"application/vnd.ms-project":["mpp","mpt"],"application/vnd.ms-word.document.macroenabled.12":["docm"],"application/vnd.ms-word.template.macroenabled.12":["dotm"],"application/vnd.ms-works":["wps","wks","wcm","wdb"],"application/vnd.ms-wpl":["wpl"],"application/vnd.ms-xpsdocument":["xps"],"application/vnd.mseq":["mseq"],"application/vnd.musician":["mus"],"application/vnd.muvee.style":["msty"],"application/vnd.mynfc":["taglet"],"application/vnd.neurolanguage.nlu":["nlu"],"application/vnd.nitf":["ntf","nitf"],"application/vnd.noblenet-directory":["nnd"],"application/vnd.noblenet-sealer":["nns"],"application/vnd.noblenet-web":["nnw"],"application/vnd.nokia.n-gage.ac+xml":["*ac"],"application/vnd.nokia.n-gage.data":["ngdat"],"application/vnd.nokia.n-gage.symbian.install":["n-gage"],"application/vnd.nokia.radio-preset":["rpst"],"application/vnd.nokia.radio-presets":["rpss"],"application/vnd.novadigm.edm":["edm"],"application/vnd.novadigm.edx":["edx"],"application/vnd.novadigm.ext":["ext"],"application/vnd.oasis.opendocument.chart":["odc"],"application/vnd.oasis.opendocument.chart-template":["otc"],"application/vnd.oasis.opendocument.database":["odb"],"application/vnd.oasis.opendocument.formula":["odf"],"application/vnd.oasis.opendocument.formula-template":["odft"],"application/vnd.oasis.opendocument.graphics":["odg"],"application/vnd.oasis.opendocument.graphics-template":["otg"],"application/vnd.oasis.opendocument.image":["odi"],"application/vnd.oasis.opendocument.image-template":["oti"],"application/vnd.oasis.opendocument.presentation":["odp"],"application/vnd.oasis.opendocument.presentation-template":["otp"],"application/vnd.oasis.opendocument.spreadsheet":["ods"],"application/vnd.oasis.opendocument.spreadsheet-template":["ots"],"application/vnd.oasis.opendocument.text":["odt"],"application/vnd.oasis.opendocument.text-master":["odm"],"application/vnd.oasis.opendocument.text-template":["ott"],"application/vnd.oasis.opendocument.text-web":["oth"],"application/vnd.olpc-sugar":["xo"],"application/vnd.oma.dd2+xml":["dd2"],"application/vnd.openblox.game+xml":["obgx"],"application/vnd.openofficeorg.extension":["oxt"],"application/vnd.openstreetmap.data+xml":["osm"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.osgeo.mapguide.package":["mgp"],"application/vnd.osgi.dp":["dp"],"application/vnd.osgi.subsystem":["esa"],"application/vnd.palm":["pdb","pqa","oprc"],"application/vnd.pawaafile":["paw"],"application/vnd.pg.format":["str"],"application/vnd.pg.osasli":["ei6"],"application/vnd.picsel":["efif"],"application/vnd.pmi.widget":["wg"],"application/vnd.pocketlearn":["plf"],"application/vnd.powerbuilder6":["pbd"],"application/vnd.previewsystems.box":["box"],"application/vnd.proteus.magazine":["mgz"],"application/vnd.publishare-delta-tree":["qps"],"application/vnd.pvi.ptid1":["ptid"],"application/vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"application/vnd.rar":["rar"],"application/vnd.realvnc.bed":["bed"],"application/vnd.recordare.musicxml":["mxl"],"application/vnd.recordare.musicxml+xml":["musicxml"],"application/vnd.rig.cryptonote":["cryptonote"],"application/vnd.rim.cod":["cod"],"application/vnd.rn-realmedia":["rm"],"application/vnd.rn-realmedia-vbr":["rmvb"],"application/vnd.route66.link66+xml":["link66"],"application/vnd.sailingtracker.track":["st"],"application/vnd.seemail":["see"],"application/vnd.sema":["sema"],"application/vnd.semd":["semd"],"application/vnd.semf":["semf"],"application/vnd.shana.informed.formdata":["ifm"],"application/vnd.shana.informed.formtemplate":["itp"],"application/vnd.shana.informed.interchange":["iif"],"application/vnd.shana.informed.package":["ipk"],"application/vnd.simtech-mindmapper":["twd","twds"],"application/vnd.smaf":["mmf"],"application/vnd.smart.teacher":["teacher"],"application/vnd.software602.filler.form+xml":["fo"],"application/vnd.solent.sdkm+xml":["sdkm","sdkd"],"application/vnd.spotfire.dxp":["dxp"],"application/vnd.spotfire.sfs":["sfs"],"application/vnd.stardivision.calc":["sdc"],"application/vnd.stardivision.draw":["sda"],"application/vnd.stardivision.impress":["sdd"],"application/vnd.stardivision.math":["smf"],"application/vnd.stardivision.writer":["sdw","vor"],"application/vnd.stardivision.writer-global":["sgl"],"application/vnd.stepmania.package":["smzip"],"application/vnd.stepmania.stepchart":["sm"],"application/vnd.sun.wadl+xml":["wadl"],"application/vnd.sun.xml.calc":["sxc"],"application/vnd.sun.xml.calc.template":["stc"],"application/vnd.sun.xml.draw":["sxd"],"application/vnd.sun.xml.draw.template":["std"],"application/vnd.sun.xml.impress":["sxi"],"application/vnd.sun.xml.impress.template":["sti"],"application/vnd.sun.xml.math":["sxm"],"application/vnd.sun.xml.writer":["sxw"],"application/vnd.sun.xml.writer.global":["sxg"],"application/vnd.sun.xml.writer.template":["stw"],"application/vnd.sus-calendar":["sus","susp"],"application/vnd.svd":["svd"],"application/vnd.symbian.install":["sis","sisx"],"application/vnd.syncml+xml":["xsm"],"application/vnd.syncml.dm+wbxml":["bdm"],"application/vnd.syncml.dm+xml":["xdm"],"application/vnd.syncml.dmddf+xml":["ddf"],"application/vnd.tao.intent-module-archive":["tao"],"application/vnd.tcpdump.pcap":["pcap","cap","dmp"],"application/vnd.tmobile-livetv":["tmo"],"application/vnd.trid.tpt":["tpt"],"application/vnd.triscape.mxs":["mxs"],"application/vnd.trueapp":["tra"],"application/vnd.ufdl":["ufd","ufdl"],"application/vnd.uiq.theme":["utz"],"application/vnd.umajin":["umj"],"application/vnd.unity":["unityweb"],"application/vnd.uoml+xml":["uoml"],"application/vnd.vcx":["vcx"],"application/vnd.visio":["vsd","vst","vss","vsw"],"application/vnd.visionary":["vis"],"application/vnd.vsf":["vsf"],"application/vnd.wap.wbxml":["wbxml"],"application/vnd.wap.wmlc":["wmlc"],"application/vnd.wap.wmlscriptc":["wmlsc"],"application/vnd.webturbo":["wtb"],"application/vnd.wolfram.player":["nbp"],"application/vnd.wordperfect":["wpd"],"application/vnd.wqd":["wqd"],"application/vnd.wt.stf":["stf"],"application/vnd.xara":["xar"],"application/vnd.xfdl":["xfdl"],"application/vnd.yamaha.hv-dic":["hvd"],"application/vnd.yamaha.hv-script":["hvs"],"application/vnd.yamaha.hv-voice":["hvp"],"application/vnd.yamaha.openscoreformat":["osf"],"application/vnd.yamaha.openscoreformat.osfpvg+xml":["osfpvg"],"application/vnd.yamaha.smaf-audio":["saf"],"application/vnd.yamaha.smaf-phrase":["spf"],"application/vnd.yellowriver-custom-menu":["cmp"],"application/vnd.zul":["zir","zirz"],"application/vnd.zzazz.deck+xml":["zaz"],"application/x-7z-compressed":["7z"],"application/x-abiword":["abw"],"application/x-ace-compressed":["ace"],"application/x-apple-diskimage":["*dmg"],"application/x-arj":["arj"],"application/x-authorware-bin":["aab","x32","u32","vox"],"application/x-authorware-map":["aam"],"application/x-authorware-seg":["aas"],"application/x-bcpio":["bcpio"],"application/x-bdoc":["*bdoc"],"application/x-bittorrent":["torrent"],"application/x-blorb":["blb","blorb"],"application/x-bzip":["bz"],"application/x-bzip2":["bz2","boz"],"application/x-cbr":["cbr","cba","cbt","cbz","cb7"],"application/x-cdlink":["vcd"],"application/x-cfs-compressed":["cfs"],"application/x-chat":["chat"],"application/x-chess-pgn":["pgn"],"application/x-chrome-extension":["crx"],"application/x-cocoa":["cco"],"application/x-conference":["nsc"],"application/x-cpio":["cpio"],"application/x-csh":["csh"],"application/x-debian-package":["*deb","udeb"],"application/x-dgc-compressed":["dgc"],"application/x-director":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],"application/x-doom":["wad"],"application/x-dtbncx+xml":["ncx"],"application/x-dtbook+xml":["dtb"],"application/x-dtbresource+xml":["res"],"application/x-dvi":["dvi"],"application/x-envoy":["evy"],"application/x-eva":["eva"],"application/x-font-bdf":["bdf"],"application/x-font-ghostscript":["gsf"],"application/x-font-linux-psf":["psf"],"application/x-font-pcf":["pcf"],"application/x-font-snf":["snf"],"application/x-font-type1":["pfa","pfb","pfm","afm"],"application/x-freearc":["arc"],"application/x-futuresplash":["spl"],"application/x-gca-compressed":["gca"],"application/x-glulx":["ulx"],"application/x-gnumeric":["gnumeric"],"application/x-gramps-xml":["gramps"],"application/x-gtar":["gtar"],"application/x-hdf":["hdf"],"application/x-httpd-php":["php"],"application/x-install-instructions":["install"],"application/x-iso9660-image":["*iso"],"application/x-iwork-keynote-sffkey":["*key"],"application/x-iwork-numbers-sffnumbers":["*numbers"],"application/x-iwork-pages-sffpages":["*pages"],"application/x-java-archive-diff":["jardiff"],"application/x-java-jnlp-file":["jnlp"],"application/x-keepass2":["kdbx"],"application/x-latex":["latex"],"application/x-lua-bytecode":["luac"],"application/x-lzh-compressed":["lzh","lha"],"application/x-makeself":["run"],"application/x-mie":["mie"],"application/x-mobipocket-ebook":["prc","mobi"],"application/x-ms-application":["application"],"application/x-ms-shortcut":["lnk"],"application/x-ms-wmd":["wmd"],"application/x-ms-wmz":["wmz"],"application/x-ms-xbap":["xbap"],"application/x-msaccess":["mdb"],"application/x-msbinder":["obd"],"application/x-mscardfile":["crd"],"application/x-msclip":["clp"],"application/x-msdos-program":["*exe"],"application/x-msdownload":["*exe","*dll","com","bat","*msi"],"application/x-msmediaview":["mvb","m13","m14"],"application/x-msmetafile":["*wmf","*wmz","*emf","emz"],"application/x-msmoney":["mny"],"application/x-mspublisher":["pub"],"application/x-msschedule":["scd"],"application/x-msterminal":["trm"],"application/x-mswrite":["wri"],"application/x-netcdf":["nc","cdf"],"application/x-ns-proxy-autoconfig":["pac"],"application/x-nzb":["nzb"],"application/x-perl":["pl","pm"],"application/x-pilot":["*prc","*pdb"],"application/x-pkcs12":["p12","pfx"],"application/x-pkcs7-certificates":["p7b","spc"],"application/x-pkcs7-certreqresp":["p7r"],"application/x-rar-compressed":["*rar"],"application/x-redhat-package-manager":["rpm"],"application/x-research-info-systems":["ris"],"application/x-sea":["sea"],"application/x-sh":["sh"],"application/x-shar":["shar"],"application/x-shockwave-flash":["swf"],"application/x-silverlight-app":["xap"],"application/x-sql":["sql"],"application/x-stuffit":["sit"],"application/x-stuffitx":["sitx"],"application/x-subrip":["srt"],"application/x-sv4cpio":["sv4cpio"],"application/x-sv4crc":["sv4crc"],"application/x-t3vm-image":["t3"],"application/x-tads":["gam"],"application/x-tar":["tar"],"application/x-tcl":["tcl","tk"],"application/x-tex":["tex"],"application/x-tex-tfm":["tfm"],"application/x-texinfo":["texinfo","texi"],"application/x-tgif":["*obj"],"application/x-ustar":["ustar"],"application/x-virtualbox-hdd":["hdd"],"application/x-virtualbox-ova":["ova"],"application/x-virtualbox-ovf":["ovf"],"application/x-virtualbox-vbox":["vbox"],"application/x-virtualbox-vbox-extpack":["vbox-extpack"],"application/x-virtualbox-vdi":["vdi"],"application/x-virtualbox-vhd":["vhd"],"application/x-virtualbox-vmdk":["vmdk"],"application/x-wais-source":["src"],"application/x-web-app-manifest+json":["webapp"],"application/x-x509-ca-cert":["der","crt","pem"],"application/x-xfig":["fig"],"application/x-xliff+xml":["*xlf"],"application/x-xpinstall":["xpi"],"application/x-xz":["xz"],"application/x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"audio/vnd.dece.audio":["uva","uvva"],"audio/vnd.digital-winds":["eol"],"audio/vnd.dra":["dra"],"audio/vnd.dts":["dts"],"audio/vnd.dts.hd":["dtshd"],"audio/vnd.lucent.voice":["lvp"],"audio/vnd.ms-playready.media.pya":["pya"],"audio/vnd.nuera.ecelp4800":["ecelp4800"],"audio/vnd.nuera.ecelp7470":["ecelp7470"],"audio/vnd.nuera.ecelp9600":["ecelp9600"],"audio/vnd.rip":["rip"],"audio/x-aac":["aac"],"audio/x-aiff":["aif","aiff","aifc"],"audio/x-caf":["caf"],"audio/x-flac":["flac"],"audio/x-m4a":["*m4a"],"audio/x-matroska":["mka"],"audio/x-mpegurl":["m3u"],"audio/x-ms-wax":["wax"],"audio/x-ms-wma":["wma"],"audio/x-pn-realaudio":["ram","ra"],"audio/x-pn-realaudio-plugin":["rmp"],"audio/x-realaudio":["*ra"],"audio/x-wav":["*wav"],"chemical/x-cdx":["cdx"],"chemical/x-cif":["cif"],"chemical/x-cmdf":["cmdf"],"chemical/x-cml":["cml"],"chemical/x-csml":["csml"],"chemical/x-xyz":["xyz"],"image/prs.btif":["btif"],"image/prs.pti":["pti"],"image/vnd.adobe.photoshop":["psd"],"image/vnd.airzip.accelerator.azv":["azv"],"image/vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"image/vnd.djvu":["djvu","djv"],"image/vnd.dvb.subtitle":["*sub"],"image/vnd.dwg":["dwg"],"image/vnd.dxf":["dxf"],"image/vnd.fastbidsheet":["fbs"],"image/vnd.fpx":["fpx"],"image/vnd.fst":["fst"],"image/vnd.fujixerox.edmics-mmr":["mmr"],"image/vnd.fujixerox.edmics-rlc":["rlc"],"image/vnd.microsoft.icon":["ico"],"image/vnd.ms-dds":["dds"],"image/vnd.ms-modi":["mdi"],"image/vnd.ms-photo":["wdp"],"image/vnd.net-fpx":["npx"],"image/vnd.pco.b16":["b16"],"image/vnd.tencent.tap":["tap"],"image/vnd.valve.source.texture":["vtf"],"image/vnd.wap.wbmp":["wbmp"],"image/vnd.xiff":["xif"],"image/vnd.zbrush.pcx":["pcx"],"image/x-3ds":["3ds"],"image/x-cmu-raster":["ras"],"image/x-cmx":["cmx"],"image/x-freehand":["fh","fhc","fh4","fh5","fh7"],"image/x-icon":["*ico"],"image/x-jng":["jng"],"image/x-mrsid-image":["sid"],"image/x-ms-bmp":["*bmp"],"image/x-pcx":["*pcx"],"image/x-pict":["pic","pct"],"image/x-portable-anymap":["pnm"],"image/x-portable-bitmap":["pbm"],"image/x-portable-graymap":["pgm"],"image/x-portable-pixmap":["ppm"],"image/x-rgb":["rgb"],"image/x-tga":["tga"],"image/x-xbitmap":["xbm"],"image/x-xpixmap":["xpm"],"image/x-xwindowdump":["xwd"],"message/vnd.wfa.wsc":["wsc"],"model/vnd.collada+xml":["dae"],"model/vnd.dwf":["dwf"],"model/vnd.gdl":["gdl"],"model/vnd.gtw":["gtw"],"model/vnd.mts":["mts"],"model/vnd.opengex":["ogex"],"model/vnd.parasolid.transmit.binary":["x_b"],"model/vnd.parasolid.transmit.text":["x_t"],"model/vnd.sap.vds":["vds"],"model/vnd.usdz+zip":["usdz"],"model/vnd.valve.source.compiled-map":["bsp"],"model/vnd.vtu":["vtu"],"text/prs.lines.tag":["dsc"],"text/vnd.curl":["curl"],"text/vnd.curl.dcurl":["dcurl"],"text/vnd.curl.mcurl":["mcurl"],"text/vnd.curl.scurl":["scurl"],"text/vnd.dvb.subtitle":["sub"],"text/vnd.fly":["fly"],"text/vnd.fmi.flexstor":["flx"],"text/vnd.graphviz":["gv"],"text/vnd.in3d.3dml":["3dml"],"text/vnd.in3d.spot":["spot"],"text/vnd.sun.j2me.app-descriptor":["jad"],"text/vnd.wap.wml":["wml"],"text/vnd.wap.wmlscript":["wmls"],"text/x-asm":["s","asm"],"text/x-c":["c","cc","cxx","cpp","h","hh","dic"],"text/x-component":["htc"],"text/x-fortran":["f","for","f77","f90"],"text/x-handlebars-template":["hbs"],"text/x-java-source":["java"],"text/x-lua":["lua"],"text/x-markdown":["mkd"],"text/x-nfo":["nfo"],"text/x-opml":["opml"],"text/x-org":["*org"],"text/x-pascal":["p","pas"],"text/x-processing":["pde"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/x-setext":["etx"],"text/x-sfv":["sfv"],"text/x-suse-ymp":["ymp"],"text/x-uuencode":["uu"],"text/x-vcalendar":["vcs"],"text/x-vcard":["vcf"],"video/vnd.dece.hd":["uvh","uvvh"],"video/vnd.dece.mobile":["uvm","uvvm"],"video/vnd.dece.pd":["uvp","uvvp"],"video/vnd.dece.sd":["uvs","uvvs"],"video/vnd.dece.video":["uvv","uvvv"],"video/vnd.dvb.file":["dvb"],"video/vnd.fvt":["fvt"],"video/vnd.mpegurl":["mxu","m4u"],"video/vnd.ms-playready.media.pyv":["pyv"],"video/vnd.uvvu.mp4":["uvu","uvvu"],"video/vnd.vivo":["viv"],"video/x-f4v":["f4v"],"video/x-fli":["fli"],"video/x-flv":["flv"],"video/x-m4v":["m4v"],"video/x-matroska":["mkv","mk3d","mks"],"video/x-mng":["mng"],"video/x-ms-asf":["asf","asx"],"video/x-ms-vob":["vob"],"video/x-ms-wm":["wm"],"video/x-ms-wmv":["wmv"],"video/x-ms-wmx":["wmx"],"video/x-ms-wvx":["wvx"],"video/x-msvideo":["avi"],"video/x-sgi-movie":["movie"],"video/x-smv":["smv"],"x-conference/x-cooltalk":["ice"]}});var vO=E((gqe,q3)=>{"use strict";var N$e=A3();q3.exports=new N$e(D3(),j3())});var F3=E((yqe,L3)=>{"use strict";var C$e=/["'&<>]/;L3.exports=I$e;function I$e(t){var e=""+t,r=C$e.exec(e);if(!r)return e;var n,s="",i=0,o=0;for(i=r.index;i<e.length;i++){switch(e.charCodeAt(i)){case 34:n="&quot;";break;case 38:n="&amp;";break;case 39:n="&#39;";break;case 60:n="&lt;";break;case 62:n="&gt;";break;default:continue}o!==i&&(s+=e.substring(o,i)),o=i+1,s+=n}return o!==i?s+e.substring(o,i):s}});var U3=E(bO=>{var A$e=/^(-?(?:\d+)?\.?\d+) *(m(?:illiseconds?|s(?:ecs?)?))?(s(?:ec(?:onds?|s)?)?)?(m(?:in(?:utes?|s)?)?)?(h(?:ours?|rs?)?)?(d(?:ays?)?)?(w(?:eeks?|ks?)?)?(y(?:ears?|rs?)?)?$/,T0=1e3,R0=T0*60,$0=R0*60,dh=$0*24,wO=dh*365.25;function k$e(t){var e,r=t.toLowerCase().match(A$e);if(r!=null&&(e=parseFloat(r[1])))return r[3]!=null?e*T0:r[4]!=null?e*R0:r[5]!=null?e*$0:r[6]!=null?e*dh:r[7]!=null?e*dh*7:r[8]!=null?e*wO:e}function fh(t,e,r,n){var s=(t|0)===t?t:~~(t+.5);return e+s+(n?" "+r+(s!=1?"s":""):r[0])}function D$e(t,e){var r=t<0?"-":"",n=t<0?-t:t;return n<T0?t+(e?" ms":"ms"):n<R0?fh(n/T0,r,"second",e):n<$0?fh(n/R0,r,"minute",e):n<dh?fh(n/$0,r,"hour",e):n<wO?fh(n/dh,r,"day",e):fh(n/wO,r,"year",e)}bO.format=D$e;bO.parse=k$e});var V3=E((vqe,B3)=>{"use strict";function M$e(t){if(t[0]!=="/"||t[1]!=="/")return t;for(let e=2,r=t.length;e<r;++e)if(t[e]!=="/")return t.slice(e-1)}B3.exports.collapseLeadingSlashes=M$e});var H3=E((wqe,z3)=>{"use strict";function j$e(t){for(let e=0,r=t.length;e<r;++e)if(t[e].length!==1&&t[e][0]===".")return!0;return!1}z3.exports.containsDotFile=j$e});var W3=E(G3=>{"use strict";function q$e(t,e,r){return t+" "+(r?r.start+"-"+r.end:"*")+"/"+e}G3.contentRange=q$e});var J3=E(K3=>{"use strict";function L$e(t,e){let r=`<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>`+t+`</title>
</head>
<body>
<pre>`+e+`</pre>
</body>
</html>
`;return[r,Buffer.byteLength(r)]}K3.createHtmlDocument=L$e});var X3=E((Sqe,Y3)=>{"use strict";function F$e(t,e){if(typeof t=="string")return[t];if(t===!1)return[];if(Array.isArray(t)){for(let r=0,n=t.length;r<n;++r)if(typeof t[r]!="string")throw new TypeError(e+" must be array of strings or false");return t}else throw new TypeError(e+" must be array of strings or false")}Y3.exports.normalizeList=F$e});var Z3=E((Tqe,Q3)=>{"use strict";function U$e(t,e){let r=e.slice(e.indexOf("=")+1),n=[],s=r.length,i=0,o=0,a=0,c,l,u=r.indexOf(","),d=r.indexOf("-"),p=-1;for(;u===-1&&(u=s),c=parseInt(r.slice(p+1,d),10),l=parseInt(r.slice(d+1,u),10),c!==c?(c=t-l,l=t-1):(l!==l||l>t-1)&&(l=t-1),c===c&&l===l&&c>-1&&c<=l&&n.push({start:c,end:l,index:a++}),u!==s;)p=u++,d=r.indexOf("-",u),u=r.indexOf(",",u);if(a<2)return n;for(n.sort(V$e),o=a,a=0,i=1;i<o;){let f=n[i++],h=n[a];f.start>h.end+1?n[++a]=f:f.end>h.end&&(h.end=f.end,h.index>f.index&&(h.index=f.index))}return n.length=a+1,n.sort(B$e),n}function B$e(t,e){return t.index-e.index}function V$e(t,e){return t.start-e.start}Q3.exports.parseBytesRange=U$e});var rG=E((Rqe,tG)=>{"use strict";var eG=String.prototype.slice;function z$e(t,e){let r=0,n=0,s;for(let i=0,o=t.length;i<o;i++)switch(t.charCodeAt(i)){case 32:n===r&&(n=r=i+1);break;case 44:if(n!==r&&(s=e(eG.call(t,n,r)),s!==void 0))return s;n=r=i+1;break;default:r=i+1;break}if(n!==r)return e(eG.call(t,n,r))}tG.exports.parseTokenList=z$e});var aG=E(($qe,oG)=>{var H$e=require("path").relative;oG.exports=Y$e;var G$e=process.cwd();function sG(t,e){for(var r=t.split(/[ ,]+/),n=String(e).toLowerCase(),s=0;s<r.length;s++){var i=r[s];if(i&&(i==="*"||i.toLowerCase()===n))return!0}return!1}function W$e(t,e,r){var n=Object.getOwnPropertyDescriptor(t,e),s=n.value;return n.get=function(){return s},n.writable&&(n.set=function(o){return s=o}),delete n.value,delete n.writable,Object.defineProperty(t,e,n),n}function K$e(t){for(var e="",r=0;r<t;r++)e+=", arg"+r;return e.substr(2)}function J$e(t){var e=this.name+": "+this.namespace;this.message&&(e+=" deprecated "+this.message);for(var r=0;r<t.length;r++)e+=`
    at `+t[r].toString();return e}function Y$e(t){if(!t)throw new TypeError("argument namespace is required");var e=P0(),r=ql(e[1]),n=r[0];function s(i){O0.call(s,i)}return s._file=n,s._ignored=Q$e(t),s._namespace=t,s._traced=Z$e(t),s._warned=Object.create(null),s.function=n1e,s.property=s1e,s}function X$e(t,e){var r=typeof t.listenerCount!="function"?t.listeners(e).length:t.listenerCount(e);return r>0}function Q$e(t){if(process.noDeprecation)return!0;var e=process.env.NO_DEPRECATION||"";return sG(e,t)}function Z$e(t){if(process.traceDeprecation)return!0;var e=process.env.TRACE_DEPRECATION||"";return sG(e,t)}function O0(t,e){var r=X$e(process,"deprecation");if(!(!r&&this._ignored)){var n,s,i,o,a=0,c=!1,l=P0(),u=this._file;for(e?(o=e,i=ql(l[1]),i.name=o.name,u=i[0]):(a=2,o=ql(l[a]),i=o);a<l.length;a++)if(n=ql(l[a]),s=n[0],s===u)c=!0;else if(s===this._file)u=this._file;else if(c)break;var d=n?o.join(":")+"__"+n.join(":"):void 0;if(!(d!==void 0&&d in this._warned)){this._warned[d]=!0;var p=t;if(p||(p=i===o||!i.name?nG(o):nG(i)),r){var f=iG(this._namespace,p,l.slice(a));process.emit("deprecation",f);return}var h=process.stderr.isTTY?t1e:e1e,m=h.call(this,p,n,l.slice(a));process.stderr.write(m+`
`,"utf8")}}}function ql(t){var e=t.getFileName()||"<anonymous>",r=t.getLineNumber(),n=t.getColumnNumber();t.isEval()&&(e=t.getEvalOrigin()+", "+e);var s=[e,r,n];return s.callSite=t,s.name=t.getFunctionName(),s}function nG(t){var e=t.callSite,r=t.name;r||(r="<anonymous@"+EO(t)+">");var n=e.getThis(),s=n&&e.getTypeName();return s==="Object"&&(s=void 0),s==="Function"&&(s=n.name||s),s&&e.getMethodName()?s+"."+r:r}function e1e(t,e,r){var n=new Date().toUTCString(),s=n+" "+this._namespace+" deprecated "+t;if(this._traced){for(var i=0;i<r.length;i++)s+=`
    at `+r[i].toString();return s}return e&&(s+=" at "+EO(e)),s}function t1e(t,e,r){var n="\x1B[36;1m"+this._namespace+"\x1B[22;39m \x1B[33;1mdeprecated\x1B[22;39m \x1B[0m"+t+"\x1B[39m";if(this._traced){for(var s=0;s<r.length;s++)n+=`
    \x1B[36mat `+r[s].toString()+"\x1B[39m";return n}return e&&(n+=" \x1B[36m"+EO(e)+"\x1B[39m"),n}function EO(t){return H$e(G$e,t[0])+":"+t[1]+":"+t[2]}function P0(){var t=Error.stackTraceLimit,e={},r=Error.prepareStackTrace;Error.prepareStackTrace=r1e,Error.stackTraceLimit=Math.max(10,t),Error.captureStackTrace(e);var n=e.stack.slice(1);return Error.prepareStackTrace=r,Error.stackTraceLimit=t,n}function r1e(t,e){return e}function n1e(t,e){if(typeof t!="function")throw new TypeError("argument fn must be a function");var r=K$e(t.length),n=P0(),s=ql(n[1]);s.name=t.name;var i=new Function("fn","log","deprecate","message","site",`"use strict"
return function (`+r+`) {log.call(deprecate, message, site)
return fn.apply(this, arguments)
}`)(t,O0,this,e,s);return i}function s1e(t,e,r){if(!t||typeof t!="object"&&typeof t!="function")throw new TypeError("argument obj must be object");var n=Object.getOwnPropertyDescriptor(t,e);if(!n)throw new TypeError("must call property on owner object");if(!n.configurable)throw new TypeError("property must be configurable");var s=this,i=P0(),o=ql(i[1]);o.name=e,"value"in n&&(n=W$e(t,e,r));var a=n.get,c=n.set;typeof a=="function"&&(n.get=function(){return O0.call(s,r,o),a.apply(this,arguments)}),typeof c=="function"&&(n.set=function(){return O0.call(s,r,o),c.apply(this,arguments)}),Object.defineProperty(t,e,n)}function iG(t,e,r){var n=new Error,s;return Object.defineProperty(n,"constructor",{value:iG}),Object.defineProperty(n,"message",{configurable:!0,enumerable:!1,value:e,writable:!0}),Object.defineProperty(n,"name",{enumerable:!1,configurable:!0,value:"DeprecationError",writable:!0}),Object.defineProperty(n,"namespace",{configurable:!0,enumerable:!1,value:t,writable:!0}),Object.defineProperty(n,"stack",{configurable:!0,enumerable:!1,get:function(){return s!==void 0?s:s=J$e.call(this,r)},set:function(o){s=o}}),n}});var lG=E((Oqe,cG)=>{"use strict";cG.exports=Object.setPrototypeOf||({__proto__:[]}instanceof Array?i1e:o1e);function i1e(t,e){return t.__proto__=e,t}function o1e(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(t,r)||(t[r]=e[r]);return t}});var uG=E((Pqe,a1e)=>{a1e.exports={"100":"Continue","101":"Switching Protocols","102":"Processing","103":"Early Hints","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I'm a Teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Too Early","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required"}});var hG=E((xqe,dG)=>{"use strict";var SO=uG();dG.exports=as;as.message=SO;as.code=c1e(SO);as.codes=l1e(SO);as.redirect={300:!0,301:!0,302:!0,303:!0,305:!0,307:!0,308:!0};as.empty={204:!0,205:!0,304:!0};as.retry={502:!0,503:!0,504:!0};function c1e(t){var e={};return Object.keys(t).forEach(function(n){var s=t[n],i=Number(n);e[s.toLowerCase()]=i}),e}function l1e(t){return Object.keys(t).map(function(r){return Number(r)})}function u1e(t){var e=t.toLowerCase();if(!Object.prototype.hasOwnProperty.call(as.code,e))throw new Error('invalid status message: "'+t+'"');return as.code[e]}function fG(t){if(!Object.prototype.hasOwnProperty.call(as.message,t))throw new Error("invalid status code: "+t);return as.message[t]}function as(t){if(typeof t=="number")return fG(t);if(typeof t!="string")throw new TypeError("code must be a number or string");var e=parseInt(t,10);return isNaN(e)?u1e(t):fG(e)}});var pG=E((Nqe,TO)=>{typeof Object.create=="function"?TO.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:TO.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}});var mG=E((Cqe,$O)=>{try{if(RO=require("util"),typeof RO.inherits!="function")throw"";$O.exports=RO.inherits}catch{$O.exports=pG()}var RO});var yG=E((Iqe,gG)=>{"use strict";gG.exports=f1e;function f1e(t){return t.split(" ").map(function(e){return e.slice(0,1).toUpperCase()+e.slice(1)}).join("").replace(/[^ _0-9a-z]/gi,"")}});var EG=E((Aqe,qa)=>{"use strict";var d1e=aG()("http-errors"),_G=lG(),Ll=hG(),OO=mG(),h1e=yG();qa.exports=x0;qa.exports.HttpError=p1e();qa.exports.isHttpError=g1e(qa.exports.HttpError);_1e(qa.exports,Ll.codes,qa.exports.HttpError);function vG(t){return Number(String(t).charAt(0)+"00")}function x0(){for(var t,e,r=500,n={},s=0;s<arguments.length;s++){var i=arguments[s],o=typeof i;if(o==="object"&&i instanceof Error)t=i,r=t.status||t.statusCode||r;else if(o==="number"&&s===0)r=i;else if(o==="string")e=i;else if(o==="object")n=i;else throw new TypeError("argument #"+(s+1)+" unsupported type "+o)}typeof r=="number"&&(r<400||r>=600)&&d1e("non-error status code; use only 4xx or 5xx status codes"),(typeof r!="number"||!Ll.message[r]&&(r<400||r>=600))&&(r=500);var a=x0[r]||x0[vG(r)];t||(t=a?new a(e):new Error(e||Ll.message[r]),Error.captureStackTrace(t,x0)),(!a||!(t instanceof a)||t.status!==r)&&(t.expose=r<500,t.status=t.statusCode=r);for(var c in n)c!=="status"&&c!=="statusCode"&&(t[c]=n[c]);return t}function p1e(){function t(){throw new TypeError("cannot construct abstract class")}return OO(t,Error),t}function m1e(t,e,r){var n=bG(e);function s(i){var o=i??Ll.message[r],a=new Error(o);return Error.captureStackTrace(a,s),_G(a,s.prototype),Object.defineProperty(a,"message",{enumerable:!0,configurable:!0,value:o,writable:!0}),Object.defineProperty(a,"name",{enumerable:!1,configurable:!0,value:n,writable:!0}),a}return OO(s,t),wG(s,n),s.prototype.status=r,s.prototype.statusCode=r,s.prototype.expose=!0,s}function g1e(t){return function(r){return!r||typeof r!="object"?!1:r instanceof t?!0:r instanceof Error&&typeof r.expose=="boolean"&&typeof r.statusCode=="number"&&r.status===r.statusCode}}function y1e(t,e,r){var n=bG(e);function s(i){var o=i??Ll.message[r],a=new Error(o);return Error.captureStackTrace(a,s),_G(a,s.prototype),Object.defineProperty(a,"message",{enumerable:!0,configurable:!0,value:o,writable:!0}),Object.defineProperty(a,"name",{enumerable:!1,configurable:!0,value:n,writable:!0}),a}return OO(s,t),wG(s,n),s.prototype.status=r,s.prototype.statusCode=r,s.prototype.expose=!1,s}function wG(t,e){var r=Object.getOwnPropertyDescriptor(t,"name");r&&r.configurable&&(r.value=e,Object.defineProperty(t,"name",r))}function _1e(t,e,r){e.forEach(function(s){var i,o=h1e(Ll.message[s]);switch(vG(s)){case 400:i=m1e(r,o,s);break;case 500:i=y1e(r,o,s);break}i&&(t[s]=i,t[o]=i)})}function bG(t){return t.slice(-5)==="Error"?t:t+"Error"}});var TG=E((kqe,SG)=>{"use strict";var PO=EG();function v1e(t,e){return e?e instanceof Error?PO(t,e,{expose:!1}):PO(t,e):PO(t)}SG.exports.createHttpError=v1e});var DG=E((Dqe,kG)=>{"use strict";var xG=require("fs"),hh=require("path"),w1e=require("stream"),mr=require("util").debuglog("send"),b1e=G$(),E1e=F3(),RG=vO(),S1e=U3(),{collapseLeadingSlashes:T1e}=V3(),{containsDotFile:R1e}=H3(),{contentRange:$G}=W3(),{createHtmlDocument:La}=J3(),{isUtf8MimeType:$1e}=_O(),{normalizeList:OG}=X3(),{parseBytesRange:O1e}=Z3(),{parseTokenList:NG}=rG(),{createHttpError:P1e}=TG(),x1e=hh.extname,CG=hh.join,xO=hh.normalize,IG=hh.resolve,N0=hh.sep,C0=w1e.Readable,N1e=/^ *bytes=/,C1e=60*60*24*365*1e3,PG=/(?:^|[\\/])\.\.(?:[\\/]|$)/,I1e={400:La("Error","Bad Request"),403:La("Error","Forbidden"),404:La("Error","Not Found"),412:La("Error","Precondition Failed"),416:La("Error","Range Not Satisfiable"),500:La("Error","Internal Server Error")},A1e=["allow","ignore","deny"];function k1e(t){let e;return typeof t=="string"?e=S1e.parse(t):e=Number(t),e!==e?0:Math.min(Math.max(0,e),C1e)}function D1e(t){t=t??{};let e=t.acceptRanges!==void 0?Boolean(t.acceptRanges):!0,r=t.cacheControl!==void 0?Boolean(t.cacheControl):!0,n=t.contentType!==void 0?Boolean(t.contentType):!0,s=t.etag!==void 0?Boolean(t.etag):!0,i=t.dotfiles!==void 0?A1e.indexOf(t.dotfiles):1;if(i===-1)throw new TypeError('dotfiles option must be "allow", "deny", or "ignore"');let o=t.extensions!==void 0?OG(t.extensions,"extensions option"):[],a=t.immutable!==void 0?Boolean(t.immutable):!1,c=t.index!==void 0?OG(t.index,"index option"):["index.html"],l=t.lastModified!==void 0?Boolean(t.lastModified):!0,u=k1e(t.maxAge??t.maxage),d=t.maxContentRangeChunkSize!==void 0?Number(t.maxContentRangeChunkSize):null,p=t.root?IG(t.root):null,f=Number.isSafeInteger(t.highWaterMark)&&t.highWaterMark>0?t.highWaterMark:null;return{acceptRanges:e,cacheControl:r,contentType:n,etag:s,dotfiles:i,extensions:o,immutable:a,index:c,lastModified:l,maxage:u,maxContentRangeChunkSize:d,root:p,highWaterMark:f,start:t.start,end:t.end}}function M1e(t,e){let r=b1e(t);if(r==null)return{statusCode:400};if(~r.indexOf("\0"))return{statusCode:400};let n;if(e!==null){if(r&&(r=xO("."+N0+r)),PG.test(r))return mr('malicious path "%s"',r),{statusCode:403};n=r.split(N0),r=xO(CG(e,r))}else{if(PG.test(r))return mr('malicious path "%s"',r),{statusCode:403};n=xO(r).split(N0),r=IG(r)}return{path:r,parts:n}}function AG(t){return t[t.length-1]==="/"}function j1e(t){return t.headers["if-match"]||t.headers["if-unmodified-since"]||t.headers["if-none-match"]||t.headers["if-modified-since"]}function q1e(t,e){if("cache-control"in t.headers&&t.headers["cache-control"].indexOf("no-cache")!==-1)return!1;if("if-none-match"in t.headers){let r=t.headers["if-none-match"];if(r==="*")return!0;let n=e.ETag;if(typeof n!="string")return!1;let s=n.length;return!!NG(r,function(o){let a=o.length;if(s===a&&o===n||s>a&&"W/"+o===n)return!0})}if("if-modified-since"in t.headers){let r=t.headers["if-modified-since"],n=e["Last-Modified"];if(!n||Date.parse(n)<=Date.parse(r))return!0}return!1}function L1e(t,e){let r=t.headers["if-match"];if(r){let n=e.ETag;if(r!=="*"&&(NG(r,function(i){if(i===n||"W/"+i===n)return!0})||!1)!==!0)return!0}if("if-unmodified-since"in t.headers){let n=t.headers["if-unmodified-since"],s=Date.parse(n);if(s===s){let i=Date.parse(e["Last-Modified"]);if(i!==i||i>s)return!0}}return!1}function F1e(t,e){if(!("if-range"in t.headers))return!0;let r=t.headers["if-range"];if(r.indexOf('"')!==-1){let i=e.ETag;return i&&r.indexOf(i)!==-1||!1}let n=Date.parse(r);if(n!==n)return!1;let s=Date.parse(e["Last-Modified"]);return s!==s||s<=n}function NO(t){return new Promise(e=>{xG.stat(t,function(n,s){e({error:n,stat:s})})})}function Fs(t,e){let r={};if(e&&e.headers)for(let s in e.headers)r[s]=e.headers[s];let n=I1e[t];return r["Content-Type"]="text/html; charset=utf-8",r["Content-Length"]=n[1],r["Content-Security-Policy"]="default-src 'none'",r["X-Content-Type-Options"]="nosniff",{statusCode:t,headers:r,stream:C0.from(n[0]),type:"error",metadata:{error:P1e(t,e)}}}function CO(t){switch(t.code){case"ENAMETOOLONG":case"ENOTDIR":case"ENOENT":return Fs(404,t);default:return Fs(500,t)}}function U1e(t,e,r){return mr("not modified"),delete t["Content-Encoding"],delete t["Content-Language"],delete t["Content-Length"],delete t["Content-Range"],delete t["Content-Type"],{statusCode:304,headers:t,stream:C0.from(""),type:"file",metadata:{path:e,stat:r}}}function IO(t,e,r,n){let s=r.size,i=n.start??0,o=200,a={};if(mr('send "%s"',e),n.acceptRanges&&(mr("accept ranges"),a["Accept-Ranges"]="bytes"),n.cacheControl){let l="public, max-age="+Math.floor(n.maxage/1e3);n.immutable&&(l+=", immutable"),mr("cache-control %s",l),a["Cache-Control"]=l}if(n.lastModified){let l=r.mtime.toUTCString();mr("modified %s",l),a["Last-Modified"]=l}if(n.etag){let l='W/"'+r.size.toString(16)+"-"+r.mtime.getTime().toString(16)+'"';mr("etag %s",l),a.ETag=l}if(n.contentType){let l=RG.getType(e)||RG.default_type;mr("content-type %s",l),l&&$1e(l)&&(l+="; charset=utf-8"),l&&(a["Content-Type"]=l)}if(j1e(t)){if(L1e(t,a))return Fs(412);if(q1e(t,a))return U1e(a,e,r)}if(s=Math.max(0,s-i),n.end!==void 0){let l=n.end-i+1;s>l&&(s=l)}if(n.acceptRanges){let l=t.headers.range;if(l!==void 0&&N1e.test(l))if(F1e(t,a)){let u=O1e(s,l);if(u.length===0)return mr("range unsatisfiable"),a["Content-Range"]=$G("bytes",s),Fs(416,{headers:{"Content-Range":a["Content-Range"]}});u.length===1&&(mr("range %j",u),o=206,n.maxContentRangeChunkSize&&(u[0].end=Math.min(u[0].end,u[0].start+n.maxContentRangeChunkSize-1)),a["Content-Range"]=$G("bytes",s,u[0]),i+=u[0].start,s=u[0].end-u[0].start+1)}else mr("range stale")}if(a["Content-Length"]=s,t.method==="HEAD")return{statusCode:o,headers:a,stream:C0.from(""),type:"file",metadata:{path:e,stat:r}};let c=xG.createReadStream(e,{highWaterMark:n.highWaterMark,start:i,end:Math.max(i,i+s-1)});return{statusCode:o,headers:a,stream:c,type:"file",metadata:{path:e,stat:r}}}function B1e(t,e){if(AG(e.path))return Fs(403);let r=encodeURI(T1e(e.path+"/")),n=La("Redirecting","Redirecting to "+E1e(r)),s={};return s["Content-Type"]="text/html; charset=utf-8",s["Content-Length"]=n[1],s["Content-Security-Policy"]="default-src 'none'",s["X-Content-Type-Options"]="nosniff",s.Location=r,{statusCode:301,headers:s,stream:C0.from(n[0]),type:"directory",metadata:{requestPath:e.path,path:t}}}async function V1e(t,e,r){let n;for(let s=0;s<r.index.length;s++){let i=r.index[s],o=CG(e,i),{error:a,stat:c}=await NO(o);if(a){n=a;continue}if(!c.isDirectory())return IO(t,o,c,r)}return n?CO(n):Fs(404)}async function z1e(t,e,r){let{error:n,stat:s}=await NO(e);if(n&&n.code==="ENOENT"&&!x1e(e)&&e[e.length-1]!==N0){let i=n;for(let o=0;o<r.extensions.length;o++){let a=r.extensions[o],c=e+"."+a,{error:l,stat:u}=await NO(c);if(l){i=l;continue}if(u.isDirectory()){i=null;continue}return IO(t,c,u,r)}return i?CO(i):Fs(404)}return n?CO(n):s.isDirectory()?B1e(e,r):IO(t,e,s,r)}async function H1e(t,e,r){let n=D1e(r);n.path=e;let s=M1e(e,n.root),{path:i,parts:o}=s;if(s.statusCode!==void 0)return Fs(s.statusCode);if((mr.enabled||n.dotfiles!==0)&&R1e(o))switch(n.dotfiles){case 0:mr('allow dotfile "%s"',i);break;case 2:return mr('deny dotfile "%s"',i),Fs(403);case 1:default:return mr('ignore dotfile "%s"',i),Fs(404)}return n.index.length&&AG(e)?V1e(t,i,n):z1e(t,i,n)}kG.exports.send=H1e});var MG=E((Mqe,Fl)=>{"use strict";var G1e=_O().isUtf8MimeType,W1e=vO(),AO=DG().send;Fl.exports=AO;Fl.exports.default=AO;Fl.exports.send=AO;Fl.exports.isUtf8MimeType=G1e;Fl.exports.mime=W1e});var jG=E((jqe,yh)=>{"use strict";function DO(t){if(!new.target)return new DO(t);let{supportedValues:e=[],cache:r}=t&&typeof t=="object"&&t||{};this.supportedValues=e,this.cache=r}DO.prototype.negotiate=function(t){return typeof t!="string"?null:this.cache?(this.cache.has(t)||this.cache.set(t,gh(t,this.supportedValues)),this.cache.get(t)):gh(t,this.supportedValues)};function gh(t,e){if(!t||!Array.isArray(e)||e.length===0)return null;if(t==="*")return e[0];let r=null,n=1/0,s=0;function i(o,a){if(a===0||s>a)return!1;let c=o==="*"&&e[0]||o,l=e.indexOf(c);return l===-1?!1:l===0&&a===1?(r=c,!0):((s<a||n>l)&&(r=c,n=l,s=a),!1)}return K1e(t,i),r}var ph=0,mh=1,I0=2,kO=3;function K1e(t,e){let r="",n,s=ph;for(let i=0,o=t.length;i<o;++i){let a=t[i];if(!(a===" "||a==="	")){if(a===";"){s===mh&&(s=I0,n="");continue}else if(a===","){if(s===mh){if(e(r,1)){s=kO;break}s=ph,r=""}else if(s===I0){if(e(r,parseFloat(n)||0)){s=kO;break}s=ph,r="",n=""}continue}else if(s===I0){if(a==="q"||a==="=")continue;if(a==="."||a==="1"||a==="0"||a==="2"||a==="3"||a==="4"||a==="5"||a==="6"||a==="7"||a==="8"||a==="9"){n+=a;continue}}else if(s===ph){s=mh,r+=a;continue}if(s===mh){let c=t[i-1];(c===" "||c==="	")&&(r=""),r+=a;continue}if(e(r,parseFloat(n)||0)){s=kO;break}s=ph,r=a,n=""}}s===mh?e(r,1):s===I0&&e(r,parseFloat(n)||0)}yh.exports=gh;yh.exports.default=gh;yh.exports.negotiate=gh;yh.exports.Negotiator=DO});var FG=E((MO,LG)=>{var A0=require("buffer"),Us=A0.Buffer;function qG(t,e){for(var r in t)e[r]=t[r]}Us.from&&Us.alloc&&Us.allocUnsafe&&Us.allocUnsafeSlow?LG.exports=A0:(qG(A0,MO),MO.Buffer=Fa);function Fa(t,e,r){return Us(t,e,r)}Fa.prototype=Object.create(Us.prototype);qG(Us,Fa);Fa.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Us(t,e,r)};Fa.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=Us(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};Fa.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Us(t)};Fa.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return A0.SlowBuffer(t)}});var GG=E((qqe,jO)=>{"use strict";jO.exports=iOe;jO.exports.parse=lOe;var UG=require("path").basename,J1e=FG().Buffer,Y1e=/[\x00-\x20"'()*,/:;<=>?@[\\\]{}\x7f]/g,X1e=/%[0-9A-Fa-f]{2}/,Q1e=/%([0-9A-Fa-f]{2})/g,VG=/[^\x20-\x7e\xa0-\xff]/g,Z1e=/\\([\u0000-\u007f])/g,eOe=/([\\"])/g,BG=/;[\x09\x20]*([!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*=[\x09\x20]*("(?:[\x20!\x23-\x5b\x5d-\x7e\x80-\xff]|\\[\x20-\x7e])*"|[!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*/g,tOe=/^[\x20-\x7e\x80-\xff]+$/,rOe=/^[!#$%&'*+.0-9A-Z^_`a-z|~-]+$/,nOe=/^([A-Za-z0-9!#$%&+\-^_`{}~]+)'(?:[A-Za-z]{2,3}(?:-[A-Za-z]{3}){0,3}|[A-Za-z]{4,8}|)'((?:%[0-9A-Fa-f]{2}|[A-Za-z0-9!#$&+.^_`|~-])+)$/,sOe=/^([!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*(?:$|;)/;function iOe(t,e){var r=e||{},n=r.type||"attachment",s=oOe(t,r.fallback);return aOe(new HG(n,s))}function oOe(t,e){if(t!==void 0){var r={};if(typeof t!="string")throw new TypeError("filename must be a string");if(e===void 0&&(e=!0),typeof e!="string"&&typeof e!="boolean")throw new TypeError("fallback must be a string or boolean");if(typeof e=="string"&&VG.test(e))throw new TypeError("fallback must be ISO-8859-1 string");var n=UG(t),s=tOe.test(n),i=typeof e!="string"?e&&zG(n):UG(e),o=typeof i=="string"&&i!==n;return(o||!s||X1e.test(n))&&(r["filename*"]=n),(s||o)&&(r.filename=o?i:n),r}}function aOe(t){var e=t.parameters,r=t.type;if(!r||typeof r!="string"||!rOe.test(r))throw new TypeError("invalid type");var n=String(r).toLowerCase();if(e&&typeof e=="object")for(var s,i=Object.keys(e).sort(),o=0;o<i.length;o++){s=i[o];var a=s.substr(-1)==="*"?hOe(e[s]):dOe(e[s]);n+="; "+s+"="+a}return n}function cOe(t){var e=nOe.exec(t);if(!e)throw new TypeError("invalid extended field value");var r=e[1].toLowerCase(),n=e[2],s,i=n.replace(Q1e,uOe);switch(r){case"iso-8859-1":s=zG(i);break;case"utf-8":s=J1e.from(i,"binary").toString("utf8");break;default:throw new TypeError("unsupported charset in extended field")}return s}function zG(t){return String(t).replace(VG,"?")}function lOe(t){if(!t||typeof t!="string")throw new TypeError("argument string is required");var e=sOe.exec(t);if(!e)throw new TypeError("invalid type format");var r=e[0].length,n=e[1].toLowerCase(),s,i=[],o={},a;for(r=BG.lastIndex=e[0].substr(-1)===";"?r-1:r;e=BG.exec(t);){if(e.index!==r)throw new TypeError("invalid parameter format");if(r+=e[0].length,s=e[1].toLowerCase(),a=e[2],i.indexOf(s)!==-1)throw new TypeError("invalid duplicate parameter");if(i.push(s),s.indexOf("*")+1===s.length){s=s.slice(0,-1),a=cOe(a),o[s]=a;continue}typeof o[s]!="string"&&(a[0]==='"'&&(a=a.substr(1,a.length-2).replace(Z1e,"$1")),o[s]=a)}if(r!==-1&&r!==t.length)throw new TypeError("invalid parameter format");return new HG(n,o)}function uOe(t,e){return String.fromCharCode(parseInt(e,16))}function fOe(t){return"%"+String(t).charCodeAt(0).toString(16).toUpperCase()}function dOe(t){var e=String(t);return'"'+e.replace(eOe,"\\$1")+'"'}function hOe(t){var e=String(t),r=encodeURIComponent(e).replace(Y1e,fOe);return"UTF-8''"+r}function HG(t,e){this.type=t,this.parameters=e}});var YG=E((Lqe,JG)=>{"use strict";var pOe=require("os"),on=require("path"),k0=require("fs/promises"),WG=j_(),KG=Math.max(1,pOe.cpus().length-1),Ua={_getExtendedInfo:async function(t,e){let r=t.split(on.sep).length,n=await k0.readdir(t),s=async o=>{let a=on.join(t,o),c;try{c=await k0.stat(a)}catch{return}c.isDirectory()?(e.totalFolderCount++,a.split(on.sep).length===r+1&&e.folderCount++,await Ua._getExtendedInfo(a,e)):(e.totalSize+=c.size,e.totalFileCount++,a.split(on.sep).length===r+1&&e.fileCount++,e.lastModified=Math.max(e.lastModified,c.mtimeMs))},i=WG.promise(s,KG);await Promise.all(n.map(o=>i.push(o)))},getExtendedInfo:async function(t){let e={totalSize:0,fileCount:0,totalFileCount:0,folderCount:0,totalFolderCount:0,lastModified:0};return await Ua._getExtendedInfo(t,e),e},list:async function(t,e,r){let n={dirs:[],files:[]},s=await k0.readdir(t);if((r==="deny"||r==="ignore")&&(s=s.filter(a=>a.charAt(0)!==".")),s.length<1)return n;let i=async a=>{let c;try{c=await k0.stat(on.join(t,a))}catch{return}let l={name:a,stats:c};c.isDirectory()?(e.extendedFolderInfo&&(l.extendedInfo=await Ua.getExtendedInfo(on.join(t,a))),n.dirs.push(l)):n.files.push(l)},o=WG.promise(i,KG);return await Promise.all(s.map(a=>o.push(a))),n.dirs.sort((a,c)=>a.name.localeCompare(c.name)),n.files.sort((a,c)=>a.name.localeCompare(c.name)),n},send:async function({reply:t,dir:e,options:r,route:n,prefix:s,dotfiles:i}){if(t.request.query.format==="html"&&typeof r.render!="function")throw new TypeError("The `list.render` option must be a function and is required with the URL parameter `format=html`");let o;try{o=await Ua.list(e,r,i)}catch{return t.callNotFound()}if((t.request.query.format||r.format)!=="html"){if(r.jsonFormat!=="extended"){let l={dirs:[],files:[]};o.dirs.forEach(u=>l.dirs.push(u.name)),o.files.forEach(u=>l.files.push(u.name)),await t.send(l)}else await t.send(o);return}let c=r.render(o.dirs.map(l=>Ua.htmlInfo(l,n,s,r)),o.files.map(l=>Ua.htmlInfo(l,n,s,r)));await t.type("text/html").send(c)},htmlInfo:function(t,e,r,n){return n.names?.includes(on.basename(e))&&(e=on.normalize(on.join(e,".."))),{href:encodeURI(on.join(r,e,t.name).replace(/\\/gu,"/")),name:t.name,stats:t.stats,extendedInfo:t.extendedInfo}},handle:function(t,e){return e.names?.includes(on.basename(t))||((e.names?.includes("/")&&t[t.length-1]==="/")??!1)},path:function(t,e){let r=e[e.length-1]==="/"?e+"none":e;return on.dirname(on.join(t,r))},validateOptions:function(t){if(t.list){if(Array.isArray(t.root))return new TypeError("multi-root with list option is not supported");if(t.list.format&&t.list.format!=="json"&&t.list.format!=="html")return new TypeError("The `list.format` option must be json or html");if(t.list.names&&!Array.isArray(t.list.names))return new TypeError("The `list.names` option must be an array");if(t.list.jsonFormat!=null&&t.list.jsonFormat!=="names"&&t.list.jsonFormat!=="extended")return new TypeError("The `list.jsonFormat` option must be name or extended");if(t.list.format==="html"&&typeof t.list.render!="function")return new TypeError("The `list.render` option must be a function and is required with html format")}}};JG.exports=Ua});var n5=E((Fqe,D0)=>{"use strict";var bi=require("path"),{fileURLToPath:XG}=require("url"),{statSync:r5}=require("fs"),{glob:mOe}=$3(),gOe=yO(),_h=MG(),yOe=jG(),_Oe=GG(),Ba=YG(),QG=/\/$/u,vOe=/\*/gu,wOe=["br","gzip","deflate"];_h.mime.default_type="application/octet-stream";var ZG={br:".br",gzip:".gz"};async function LO(t,e){(e.serve!==!1||e.root!==void 0)&&(e.root=bOe(e.root),EOe(t,e.root));let r=e.setHeaders;if(r!==void 0&&typeof r!="function")throw new TypeError("The `setHeaders` option must be a function");let n=Ba.validateOptions(e);if(n)throw n;e.dotfiles??="allow";let s={root:e.root,acceptRanges:e.acceptRanges,contentType:e.contentType,cacheControl:e.cacheControl,dotfiles:e.dotfiles,etag:e.etag,extensions:e.extensions,immutable:e.immutable,index:e.index,lastModified:e.lastModified,maxAge:e.maxAge},i=e.prefix??="/";e.prefixAvoidTrailingSlash||(i=i[i.length-1]==="/"?i:i+"/");let o={constraints:e.constraints,schema:{hide:e.schemaHide??!0},logLevel:e.logLevel,errorHandler(d,p,f){if(d?.code==="ERR_STREAM_PREMATURE_CLOSE"){f.request.raw.destroy();return}t.errorHandler(d,p,f)}};if(e.decorateReply!==!1&&(t.decorateReply("sendFile",function(d,p,f){let h=typeof p=="object"?p:f,m=typeof p=="string"?p:h?.root;return c(this.request,this,d,m||s.root,0,h),this}),t.decorateReply("download",function(d,p,f={}){let{root:h,...m}=typeof p=="object"?p:f;return p=typeof p=="string"?p:d,this.header("content-disposition",_Oe(p)),c(this.request,this,d,h,0,m),this})),e.serve!==!1){if(e.wildcard&&typeof e.wildcard!="boolean")throw new TypeError('"wildcard" option must be a boolean');if(e.wildcard===void 0||e.wildcard===!0)t.route({...o,method:["HEAD","GET"],path:i+"*",handler(d,p){c(d,p,"/"+d.params["*"],s.root)}}),e.redirect===!0&&i!==e.prefix&&t.get(e.prefix,o,(d,p)=>{p.redirect(t5(d.raw.url),301)});else{let d=new Set(e.index===void 0?["index.html"]:[].concat(e.index)),p=new Map,f=new Set,h=Array.isArray(s.root)?s.root:[s.root];for(let m of h){m=m.split(bi.win32.sep).join(bi.posix.sep),!m.endsWith("/")&&(m+="/");let y=await mOe("**/**",{cwd:m,absolute:!1,follow:!0,nodir:!0,dot:e.serveDotFiles,ignore:e.globIgnore});for(let g of y){g=g.split(bi.win32.sep).join(bi.posix.sep);let w=i+g;if(f.has(w))continue;f.add(w),l(o,w,`/${g}`,m);let _=bi.posix.basename(w);d.has(_)&&!p.has(_)&&p.set(bi.posix.dirname(w),m)}}for(let[m,y]of p.entries()){let g=m+(m.endsWith("/")?"":"/"),w="/"+g.replace(i,"");l(o,g,w,y),e.redirect===!0&&l(o,g.replace(QG,""),w.replace(QG,""),y)}}}let a=e.allowedPath;async function c(d,p,f,h,m=0,y,g){let w=f,_=Object.assign({},s,y);if(h)Array.isArray(h)?_.root=h[m]:_.root=h;else if(bi.isAbsolute(f)===!1)return p.callNotFound();if(a&&!a(f,_.root,d))return p.callNotFound();let v,S=f;if(e.preCompressed&&(g??=new Set,v=TOe(d.headers,g),v))if(f.endsWith("/")){if(f=qO(f,_.root,_.index),!f)return p.callNotFound();S=S+f+ZG[v]}else S=f+ZG[v];let{statusCode:$,headers:T,stream:O,type:R,metadata:P}=await _h(d.raw,encodeURI(S),_);switch(R){case"directory":{let A=P.path;if(e.list&&await Ba.send({reply:p,dir:A,options:e.list,route:f,prefix:i,dotfiles:e.dotfiles}).catch(N=>p.send(N)),e.redirect===!0)try{p.redirect(t5(d.raw.url),301)}catch(N){await p.send(N)}else{if(!f.endsWith("/")&&qO(f,_.root,_.index))return c(d,p,f+"/",h,void 0,void 0,g);p.callNotFound()}break}case"error":{if($===403&&(!_.index||!_.index.length)&&S[S.length-1]==="/"&&e.list){await Ba.send({reply:p,dir:Ba.path(e.root,f),options:e.list,route:f,prefix:i,dotfiles:e.dotfiles}).catch(A=>p.send(A));return}if(P.error.code==="ENOENT"){if(e.preCompressed&&v&&e.redirect!==!0&&qO(f,_.root,_.index))return c(d,p,f+"/",h,void 0,void 0,g);if(e.list&&Ba.handle(f,e.list)){await Ba.send({reply:p,dir:Ba.path(e.root,f),options:e.list,route:f,prefix:i,dotfiles:e.dotfiles}).catch(A=>p.send(A));return}return Array.isArray(h)&&m<h.length-1?c(d,p,f,h,m+1):e.preCompressed&&!g.has(v)?(g.add(v),c(d,p,w,h,m,void 0,g)):p.callNotFound()}if(P.error.status===404)return p.callNotFound();await p.send(P.error);break}case"file":{let A=p.statusCode!==200?p.statusCode:$;p.code(A),r?.(p.raw,P.path,P.stat),p.headers(T),v&&(p.header("content-type",SOe(f)),p.header("content-encoding",v)),await p.send(O);break}}}function l(d,p,f,h){let m=Object.assign({},d,{method:["HEAD","GET"],url:p,handler:u});m.config??={},m.config.file=f,m.config.rootPath=h,t.route(m)}async function u(d,p){let f=d.routeOptions?.config;return c(d,p,f.file,f.rootPath)}}function bOe(t){if(t===void 0)return t;if(t instanceof URL&&t.protocol==="file:")return XG(t);if(Array.isArray(t)){let e=[];for(let r=0,n=t.length;r<n;++r)t[r]instanceof URL&&t[r].protocol==="file:"?e.push(XG(t[r])):e.push(t[r]);return e}return t}function EOe(t,e){if(e===void 0)throw new Error('"root" option is required');if(Array.isArray(e)){if(!e.length)throw new Error('"root" option array requires one or more paths');if(new Set(e).size!==e.length)throw new Error('"root" option array contains one or more duplicate paths');e.map(r=>e5(t,r));return}if(typeof e=="string")return e5(t,e);throw new Error('"root" option must be a string or array of strings')}function e5(t,e){if(typeof e!="string")throw new TypeError('"root" option must be a string');if(bi.isAbsolute(e)===!1)throw new Error('"root" option must be an absolute path');let r;try{r=r5(e)}catch(n){if(n.code==="ENOENT"){t.log.warn(`"root" path "${e}" must exist`);return}throw n}if(r.isDirectory()===!1)throw new Error('"root" option must point to a directory')}function SOe(t){let e=_h.mime.getType(t)||_h.mime.default_type;return _h.isUtf8MimeType(e)?`${e}; charset=utf-8`:e}function qO(t,e,r=["index.html"]){return Array.isArray(r)?r.find(n=>{let s=bi.join(e,t,n);try{return!r5(s).isDirectory()}catch{return!1}}):!1}function TOe(t,e){if(!("accept-encoding"in t))return;let r=t["accept-encoding"].toLowerCase().replace(vOe,"gzip");return yOe.negotiate(r,wOe.filter(n=>!e.has(n)))}function t5(t){let e=0;for(let r=t.length;e<r&&!(t[e]!=="/"&&t[e]!=="\\");++e);t="/"+t.slice(e);try{let r=new URL(t,"http://localhost.com/"),n=r.pathname;return n+(n[n.length-1]!=="/"?"/":"")+(r.search||"")}catch{let r=new Error(`Invalid redirect URL: ${t}`);throw r.statusCode=400,r}}D0.exports=gOe(LO,{fastify:"5.x",name:"@fastify/static"});D0.exports.default=LO;D0.exports.fastifyStatic=LO});var i5=E((Uqe,vh)=>{"use strict";var{FifoMap:ROe}=_w(),$Oe=/^[!#$%&'*+\-.^\w`|~]+$/u;function OOe(t){if($Oe.test(t)===!1)throw new TypeError("Fieldname contains invalid characters.")}function s5(t){t=t.trim().toLowerCase();let e=[];if(t.length!==0)if(t.indexOf(",")===-1)e.push(t);else{let r=t.length,n=0,s=0,i;for(n;n<r;++n)i=t[n],i===" "?s=n+1:i===","&&(s!==n&&e.push(t.slice(s,n)),s=n+1);s!==n&&e.push(t.slice(s,n))}return e}function FO(t){let e=new ROe(1e3);return OOe(t),function(r){let n=r.getHeader("Vary");if(!n){r.header("Vary",t);return}if(n==="*")return;if(t==="*"){r.header("Vary","*");return}if(Array.isArray(n)&&(n=n.join(", ")),e.get(n)===void 0){let i=s5(n);i.indexOf("*")!==-1?e.set(n,"*"):i.indexOf(t.toLowerCase())===-1?e.set(n,n+", "+t):e.set(n,null)}let s=e.get(n);s!==null&&r.header("Vary",s)}}vh.exports.createAddFieldnameToVary=FO;vh.exports.addOriginToVaryHeader=FO("Origin");vh.exports.addAccessControlRequestHeadersToVaryHeader=FO("Access-Control-Request-Headers");vh.exports.parse=s5});var u5=E((Bqe,j0)=>{"use strict";var POe=yO(),{addAccessControlRequestHeadersToVaryHeader:xOe,addOriginToVaryHeader:NOe}=i5(),BO={origin:"*",methods:"GET,HEAD,POST",hook:"onRequest",preflightContinue:!1,optionsSuccessStatus:204,credentials:!1,exposedHeaders:null,allowedHeaders:null,maxAge:null,preflight:!0,strictPreflight:!0},COe=["onRequest","preParsing","preValidation","preHandler","preSerialization","onSend"],UO=["preSerialization","preParsing","onSend"];function c5(t,e){COe.indexOf(t)===-1&&e(new TypeError("@fastify/cors: Invalid hook option provided."))}function IOe(t,e,r){t.decorateRequest("corsPreflightEnabled",!1);let n=!0,s;if(typeof e=="function")o5(e,t,{hook:BO.hook},r);else if(e.delegator){let{delegator:i,...o}=e;o5(i,t,o,r)}else{let i=M0(e);c5(i.hook,r),UO.indexOf(i.hook)!==-1?t.addHook(i.hook,function(a,c,l,u){wh(t,i,a,c,u)}):t.addHook(i.hook,function(a,c,l){wh(t,i,a,c,l)})}e.logLevel!==void 0&&(s=e.logLevel),e.hideOptionsRoute!==void 0&&(n=e.hideOptionsRoute),t.options("*",{schema:{hide:n},logLevel:s},(i,o)=>{if(!i.corsPreflightEnabled){o.callNotFound();return}o.send()}),r()}function o5(t,e,r,n){let s=r?.hook||BO.hook;c5(s,n),t.length===2?UO.indexOf(s)!==-1?e.addHook(s,function(o,a,c,l){a5(t,e,o,a,l)}):e.addHook(s,function(o,a,c){a5(t,e,o,a,c)}):UO.indexOf(s)!==-1?e.addHook(s,function(o,a,c,l){let u=t(o);if(u&&typeof u.then=="function"){u.then(d=>wh(e,M0(d,!0),o,a,l)).catch(l);return}l(new Error("Invalid CORS origin option"))}):e.addHook(s,function(o,a,c){let l=t(o);if(l&&typeof l.then=="function"){l.then(u=>wh(e,M0(u,!0),o,a,c)).catch(c);return}c(new Error("Invalid CORS origin option"))})}function a5(t,e,r,n,s){t(r,(i,o)=>{i?s(i):wh(e,M0(o,!0),r,n,s)})}function M0(t,e){let r={...BO,...t};return Array.isArray(t.origin)&&t.origin.indexOf("*")!==-1&&(r.origin="*"),Number.isInteger(r.cacheControl)?r.cacheControl=`max-age=${r.cacheControl}`:typeof r.cacheControl!="string"&&(r.cacheControl=null),r.dynamic=e||!1,r}function wh(t,e,r,n,s){let i={...e,...r.routeOptions.config?.cors};(typeof i.origin!="string"&&i.origin!==!1||i.dynamic)&&NOe(n),(typeof i.origin=="function"?DOe(t,i.origin):(a,c)=>c(null,i.origin))(r,(a,c)=>{if(a!==null)return s(a);if(c===!1||r.routeOptions.config?.cors===!1)return s();if(!c)return s(new Error("Invalid CORS origin option"));if(AOe(r,n,c,i),r.raw.method==="OPTIONS"&&i.preflight===!0){if(i.strictPreflight===!0&&(!r.headers.origin||!r.headers["access-control-request-method"])){n.status(400).type("text/plain").send("Invalid Preflight Request");return}if(r.corsPreflightEnabled=!0,kOe(r,n,i),!i.preflightContinue){n.code(i.optionsSuccessStatus).header("Content-Length","0").send();return}}return s()})}function AOe(t,e,r,n){let s=MOe(t.headers.origin,r);s&&e.header("Access-Control-Allow-Origin",s),n.credentials&&e.header("Access-Control-Allow-Credentials","true"),n.exposedHeaders!==null&&e.header("Access-Control-Expose-Headers",Array.isArray(n.exposedHeaders)?n.exposedHeaders.join(", "):n.exposedHeaders)}function kOe(t,e,r){if(e.header("Access-Control-Allow-Methods",Array.isArray(r.methods)?r.methods.join(", "):r.methods),r.allowedHeaders===null){xOe(e);let n=t.headers["access-control-request-headers"];n!==void 0&&e.header("Access-Control-Allow-Headers",n)}else e.header("Access-Control-Allow-Headers",Array.isArray(r.allowedHeaders)?r.allowedHeaders.join(", "):r.allowedHeaders);r.maxAge!==null&&e.header("Access-Control-Max-Age",String(r.maxAge)),r.cacheControl&&e.header("Cache-Control",r.cacheControl)}function DOe(t,e){return function(r,n){let s=e.call(t,r.headers.origin,n);s&&typeof s.then=="function"&&s.then(i=>n(null,i),n)}}function MOe(t,e){return typeof e=="string"?e:l5(t,e)?t:!1}function l5(t,e){if(Array.isArray(e)){for(let r=0;r<e.length;++r)if(l5(t,e[r]))return!0;return!1}else return typeof e=="string"?t===e:e instanceof RegExp?(e.lastIndex=0,e.test(t)):!!e}var VO=POe(IOe,{fastify:"5.x",name:"@fastify/cors"});j0.exports=VO;j0.exports.fastifyCors=VO;j0.exports.default=VO});var _5=E((cLe,Va)=>{var jOe=function(t){return t[0]==="U"&&(t=t.slice(1)),{Float32:4,Float64:8,Int8:1,Int16:2,Int32:4,Int64:8}[t]},B0=function(t,e){return e[e.length-1]==="8"?"":t==="big"?"BE":"LE"},V0=function(t,e){typeof e<"u"&&e!==null||(e=t),Va.exports["pack"+t]=function(r,n){return b=new Buffer(jOe(t)),b["write"+e+B0(n,t)](r,0,!0),b},Va.exports["unpack"+t]=function(r,n){return r["read"+e+B0(n,t)](0)}},HO=function(t){V0("Int"+t),V0("UInt"+t)};HO(8);HO(16);HO(32);twoToThe32=Math.pow(2,32);var g5=function(t){return function(e,r){var n=B0(r,""),s=t?"U":"",i,o;return n==="LE"?(i=e.readUInt32LE(0),o=e["read"+s+"Int32LE"](4)):(i=e.readUInt32BE(4),o=e["read"+s+"Int32BE"](0)),o*twoToThe32+i}},y5=function(t){return function(e,r){var n=B0(r,""),s=t?"U":"",i=new Buffer(8),o=Math.floor(e/twoToThe32),a=Math.floor(e-o*twoToThe32);return n=="LE"?(i.writeUInt32LE(a,0,!0),i["write"+s+"Int32LE"](o,4,!0)):(i.writeUInt32BE(a,4,!0),i["write"+s+"Int32BE"](o,0,!0)),i}};Va.exports.unpackInt64=g5(!1);Va.exports.unpackUInt64=g5(!0);Va.exports.packInt64=y5(!1);Va.exports.packUInt64=y5(!0);V0("Float32","Float");V0("Float64","Double")});var v5=E(M=>{(function(){var t,e,r,n,s,i,o,a,c,l,u,d,p={}.hasOwnProperty;s=_5(),M.concat=function(f){var h,m,y,g,w,_,v,S,$,T;if(!t(f))throw new Error("concat must take an array of buffers");for(g=0,v=f.length;g<v;g++)if(h=f[g],!Buffer.isBuffer(h))throw new Error("concat must take an array of buffers");for(T=0,w=0,S=f.length;w<S;w++)h=f[w],T+=h.length;for(y=new Buffer(T),m=0,_=0,$=f.length;_<$;_++)h=f[_],h.copy(y,m),m+=h.length;return y},M.toOscString=function(f,h){var m,y,g,w;if(typeof f!="string")throw new Error("can't pack a non-string into an osc-string");if(g=f.indexOf("\0"),g!==-1&&h)throw e("Can't pack an osc-string that contains NULL characters");for(g!==-1&&(f=f.slice(0,g)),m=y=0,w=u(f);0<=w?y<w:y>w;m=0<=w?++y:--y)f+="\0";return new Buffer(f)},M.splitOscString=function(f,h){var m,y,g,w,_,v,S,$,T;if(!Buffer.isBuffer(f))throw e("Can't split something that isn't a buffer");if(w=f.toString("utf8"),g=w.indexOf("\0"),g===-1){if(h)throw new Error("All osc-strings must contain a null character");return{string:w,rest:new Buffer(0)}}if(T=w.slice(0,g),$=Buffer.byteLength(T)+u(T),h&&$>f.length)throw e("Not enough padding for osc-string");if(h){for(m=y=_=Buffer.byteLength(T),v=$;_<=v?y<v:y>v;m=_<=v?++y:--y)if(f[m]!==0)throw e("Not enough or incorrect padding for osc-string")}return S=f.slice($,f.length),{string:T,rest:S}},M.splitInteger=function(f,h){var m,y,g,w;if(h==null&&(h="Int32"),m=s["pack"+h](0).length,f.length<m)throw new Error("buffer is not big enough for integer type");return y=0,w=s["unpack"+h](f.slice(0,m),"big"),g=f.slice(m,f.length),{integer:w,rest:g}},M.splitTimetag=function(f){var h,m,y,g,w,_,v,S,$;if($="UInt32",y=s["pack"+$](0).length,f.length<y*2)throw new Error("buffer is not big enough to contain a timetag");return h=0,m=y,S=s["unpack"+$](f.slice(h,m),"big"),g=y,w=y+y,_=s["unpack"+$](f.slice(g,w),"big"),v=f.slice(w,f.length),{timetag:[S,_],rest:v}},n=2208988800,r=4294967296,M.dateToTimetag=function(f){return M.timestampToTimetag(f.getTime()/1e3)},M.timestampToTimetag=function(f){var h,m;return m=Math.floor(f),h=f-m,a(m,h)},M.timetagToTimestamp=function(f){var h;return h=f[0]+M.ntpToFractionalSeconds(f[1]),h-n},a=function(f,h){var m,y;return y=f+n,m=Math.round(r*h),[y,m]},M.timetagToDate=function(f){var h,m,y,g,w;return w=f[0],g=f[1],w=w-n,y=M.ntpToFractionalSeconds(g),h=new Date,h.setTime(w*1e3+y*1e3),m=new Date,m.setUTCFullYear(h.getUTCFullYear()),m.setUTCMonth(h.getUTCMonth()),m.setUTCDate(h.getUTCDate()),m.setUTCHours(h.getUTCHours()),m.setUTCMinutes(h.getUTCMinutes()),m.setUTCSeconds(h.getUTCSeconds()),m.setUTCMilliseconds(y*1e3),m},M.deltaTimetag=function(f,h){var m;return m=(h??new Date)/1e3,M.timestampToTimetag(m+f)},M.ntpToFractionalSeconds=function(f){return parseFloat(f)/r},M.toTimetagBuffer=function(f){var h,m,y;if(typeof f=="number")f=M.timestampToTimetag(f);else if(typeof f=="object"&&"getTime"in f)f=M.dateToTimetag(f);else if(f.length!==2)throw new Error("Invalid timetag"+f);return y="UInt32",h=s["pack"+y](f[0],"big"),m=s["pack"+y](f[1],"big"),M.concat([h,m])},M.toIntegerBuffer=function(f,h){if(h==null&&(h="Int32"),typeof f!="number")throw new Error("cannot pack a non-number into an integer buffer");return s["pack"+h](f,"big")},l={s:{representation:"string",split:function(f,h){var m;return m=M.splitOscString(f,h),{value:m.string,rest:m.rest}},toArg:function(f,h){if(typeof f!="string")throw new Error("expected string");return M.toOscString(f,h)}},i:{representation:"integer",split:function(f,h){var m;return m=M.splitInteger(f),{value:m.integer,rest:m.rest}},toArg:function(f,h){if(typeof f!="number")throw new Error("expected number");return M.toIntegerBuffer(f)}},t:{representation:"timetag",split:function(f,h){var m;return m=M.splitTimetag(f),{value:m.timetag,rest:m.rest}},toArg:function(f,h){return M.toTimetagBuffer(f)}},f:{representation:"float",split:function(f,h){return{value:s.unpackFloat32(f.slice(0,4),"big"),rest:f.slice(4,f.length)}},toArg:function(f,h){if(typeof f!="number")throw new Error("expected number");return s.packFloat32(f,"big")}},d:{representation:"double",split:function(f,h){return{value:s.unpackFloat64(f.slice(0,8),"big"),rest:f.slice(8,f.length)}},toArg:function(f,h){if(typeof f!="number")throw new Error("expected number");return s.packFloat64(f,"big")}},b:{representation:"blob",split:function(f,h){var m,y;return y=M.splitInteger(f),m=y.integer,f=y.rest,{value:f.slice(0,m),rest:f.slice(m,f.length)}},toArg:function(f,h){var m;if(!Buffer.isBuffer(f))throw new Error("expected node.js Buffer");return m=M.toIntegerBuffer(f.length),M.concat([m,f])}},T:{representation:"true",split:function(f,h){return{rest:f,value:!0}},toArg:function(f,h){if(!f&&h)throw new Error("true must be true");return new Buffer(0)}},F:{representation:"false",split:function(f,h){return{rest:f,value:!1}},toArg:function(f,h){if(f&&h)throw new Error("false must be false");return new Buffer(0)}},N:{representation:"null",split:function(f,h){return{rest:f,value:null}},toArg:function(f,h){if(f&&h)throw new Error("null must be false");return new Buffer(0)}},I:{representation:"bang",split:function(f,h){return{rest:f,value:"bang"}},toArg:function(f,h){return new Buffer(0)}}},M.oscTypeCodeToTypeString=function(f){var h;return(h=l[f])!=null?h.representation:void 0},M.typeStringToOscTypeCode=function(f){var h,m;for(h in l)if(p.call(l,h)&&(m=l[h].representation,m===f))return h;return null},M.argToTypeCode=function(f,h){var m,y;if(f?.type!=null&&typeof f.type=="string"&&(m=M.typeStringToOscTypeCode(f.type))!=null)return m;if(y=f?.value!=null?f.value:f,h&&y==null)throw new Error("Argument has no value");if(typeof y=="string")return"s";if(typeof y=="number")return"f";if(Buffer.isBuffer(y))return"b";if(typeof y=="boolean")return y?"T":"F";if(y===null)return"N";throw new Error("I don't know what type this is supposed to be.")},M.splitOscArgument=function(f,h,m){var y;if(y=M.typeStringToOscTypeCode(h),y!=null)return l[y].split(f,m);throw new Error("I don't understand how I'm supposed to unpack "+h)},M.toOscArgument=function(f,h,m){var y;if(y=M.typeStringToOscTypeCode(h),y!=null)return l[y].toArg(f,m);throw new Error("I don't know how to pack "+h)},M.fromOscMessage=function(f,h){var m,y,g,w,_,v,S,$,T,O,R,P;if($=M.splitOscString(f,h),m=$.string,f=$.rest,h&&m[0]!=="/")throw e("addresses must start with /");if(!f.length)return{address:m,args:[]};if(T=M.splitOscString(f,h),P=T.string,f=T.rest,P[0]!==","){if(h)throw e("Argument lists must begin with ,");return{address:m,args:[]}}for(P=P.slice(1,+P.length+1||9e9),g=[],w=[g],v=0,S=P.length;v<S;v++){if(O=P[v],O==="["){w.push([]);continue}if(O==="]"){if(w.length<=1){if(h)throw new e("Mismatched ']' character.")}else _=w.pop(),w[w.length-1].push({type:"array",value:_});continue}if(R=M.oscTypeCodeToTypeString(O),R==null)throw new Error("I don't understand the argument code "+O);y=M.splitOscArgument(f,R,h),y!=null&&(f=y.rest),w[w.length-1].push({type:R,value:y?.value})}if(w.length!==1&&h)throw new e("Mismatched '[' character");return{address:m,args:g,oscType:"message"}},M.fromOscBundle=function(f,h){var m,y,g,w,_;if(g=M.splitOscString(f,h),m=g.string,f=g.rest,m!=="#bundle")throw new Error("osc-bundles must begin with #bundle");return w=M.splitTimetag(f),_=w.timetag,f=w.rest,y=c(f,function(v){return M.fromOscPacket(v,h)}),{timetag:_,elements:y,oscType:"bundle"}},M.fromOscPacket=function(f,h){return o(f,h)?M.fromOscBundle(f,h):M.fromOscMessage(f,h)},i=function(f){return t(f)?f:f?.type==="array"&&t(f?.value)||f!=null&&f.type==null&&t(f.value)?f.value:null},d=function(f,h){var m,y,g,w,_,v,S,$,T,O,R;for(v="",_=[],g=0,w=f.length;g<w;g++){if(m=f[g],i(m)!=null){S=d(i(m),h),T=S[0],$=S[1],v+="["+T+"]",_=_.concat($);continue}O=M.argToTypeCode(m,h),O!=null&&(R=m?.value,R===void 0&&(R=m),y=M.toOscArgument(R,M.oscTypeCodeToTypeString(O),h),y!=null&&(_.push(y),v+=O))}return[v,_]},M.toOscMessage=function(f,h){var m,y,g,w,_,v,S,$;if(m=f?.address!=null?f.address:f,typeof m!="string")throw new Error("message must contain an address");return g=f?.args,g===void 0&&(g=[]),t(g)||(w=g,g=[],g[0]=w),_=M.toOscString(m,h),$=d(g,h),S=$[0],v=$[1],S=","+S,y=M.concat(v),S=M.toOscString(S),M.concat([_,S,y])},M.toOscBundle=function(f,h){var m,y,g,w,_,v,S,$,T,O,R,P,A,N,C;if(h&&f?.timetag==null)throw e("bundles must have timetags.");for(C=(P=f?.timetag)!=null?P:new Date,_=(A=f?.elements)!=null?A:[],t(_)||(v=_,_=[],_.push(v)),T=M.toOscString("#bundle"),R=M.toTimetagBuffer(C),O=[],S=0,$=_.length;S<$;S++){w=_[S];try{y=M.toOscPacket(w,h),N=M.toIntegerBuffer(y.length),O.push(M.concat([N,y]))}catch(V){g=V}}return m=M.concat(O),M.concat([T,R,m])},M.toOscPacket=function(f,h){return f?.oscType!=null?f.oscType==="bundle"?M.toOscBundle(f,h):M.toOscMessage(f,h):f?.timetag!=null||f?.elements!=null?M.toOscBundle(f,h):M.toOscMessage(f,h)},M.applyMessageTranformerToBundle=function(f){return function(h){var m,y,g,w,_,v,S,$,T,O,R,P,A,N;if(R=M.splitOscString(h),P=R.string,h=R.rest,P!=="#bundle")throw new Error("osc-bundles must begin with #bundle");for(m=M.toOscString(P),A=h.slice(0,8),h=h.slice(8,h.length),w=c(h,function(C){return M.applyTransform(C,f,M.applyMessageTranformerToBundle(f))}),N=m.length+A.length,_=0,S=w.length;_<S;_++)g=w[_],N+=4+g.length;for(O=new Buffer(N),m.copy(O,0),A.copy(O,m.length),y=m.length+A.length,v=0,$=w.length;v<$;v++)g=w[v],T=M.toIntegerBuffer(g.length),T.copy(O,y),y+=4,g.copy(O,y),y+=g.length;return O}},M.applyTransform=function(f,h,m){return m==null&&(m=M.applyMessageTranformerToBundle(h)),o(f)?m(f):h(f)},M.addressTransform=function(f){return function(h){var m,y,g;return m=M.splitOscString(h),g=m.string,y=m.rest,g=f(g),M.concat([M.toOscString(g),y])}},M.messageTransform=function(f){return function(h){var m;return m=M.fromOscMessage(h),M.toOscMessage(f(m))}},t=Array.isArray,e=function(f){return new Error("Strict Error: "+f)},u=function(f){var h;return h=Buffer.byteLength(f),4-h%4},o=function(f,h){var m;return m=M.splitOscString(f,h).string,m==="#bundle"},c=function(f,h){var m,y,g,w,_,v,S,$;for(g=function(){var T,O;for(O=[];f.length;){if(T=M.splitInteger(f),S=T.integer,f=T.rest,S>f.length)throw new Error("Invalid bundle list: size of element is bigger than buffer");$=f.slice(0,S),f=f.slice(S,f.length);try{O.push(h($))}catch(R){m=R,O.push(null)}}return O}(),v=[],w=0,_=g.length;w<_;w++)y=g[w],y!=null&&v.push(y);return v}}).call(M)});var GO=E(Bs=>{(function(){var t,e;t=v5(),Bs.fromBuffer=function(r,n){return r instanceof ArrayBuffer?r=new Buffer(new Uint8Array(r)):r instanceof Uint8Array&&(r=new Buffer(r)),t.fromOscPacket(r,n)},Bs.toBuffer=function(r,n,s){return typeof r=="string"?t.toOscPacket({address:r,args:n},s):t.toOscPacket(r,n)},Bs.applyAddressTransform=function(r,n){return t.applyTransform(r,t.addressTransform(n))},Bs.applyMessageTransform=function(r,n){return t.applyTransform(r,t.messageTransform(n))},Bs.timetagToDate=t.timetagToDate,Bs.dateToTimetag=t.dateToTimetag,Bs.timetagToTimestamp=t.timetagToTimestamp,Bs.timestampToTimetag=t.timestampToTimetag}).call(Bs)});var N5=E((CLe,x5)=>{var zl=1e3,Hl=zl*60,Gl=Hl*60,za=Gl*24,LOe=za*7,FOe=za*365.25;x5.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return UOe(t);if(r==="number"&&isFinite(t))return e.long?VOe(t):BOe(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function UOe(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*FOe;case"weeks":case"week":case"w":return r*LOe;case"days":case"day":case"d":return r*za;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Gl;case"minutes":case"minute":case"mins":case"min":case"m":return r*Hl;case"seconds":case"second":case"secs":case"sec":case"s":return r*zl;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function BOe(t){var e=Math.abs(t);return e>=za?Math.round(t/za)+"d":e>=Gl?Math.round(t/Gl)+"h":e>=Hl?Math.round(t/Hl)+"m":e>=zl?Math.round(t/zl)+"s":t+"ms"}function VOe(t){var e=Math.abs(t);return e>=za?Y0(t,e,za,"day"):e>=Gl?Y0(t,e,Gl,"hour"):e>=Hl?Y0(t,e,Hl,"minute"):e>=zl?Y0(t,e,zl,"second"):t+" ms"}function Y0(t,e,r,n){var s=e>=r*1.5;return Math.round(t/r)+" "+n+(s?"s":"")}});var tP=E((ILe,C5)=>{function zOe(t){r.debug=r,r.default=r,r.coerce=c,r.disable=o,r.enable=s,r.enabled=a,r.humanize=N5(),r.destroy=l,Object.keys(t).forEach(u=>{r[u]=t[u]}),r.names=[],r.skips=[],r.formatters={};function e(u){let d=0;for(let p=0;p<u.length;p++)d=(d<<5)-d+u.charCodeAt(p),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=e;function r(u){let d,p=null,f,h;function m(...y){if(!m.enabled)return;let g=m,w=Number(new Date),_=w-(d||w);g.diff=_,g.prev=d,g.curr=w,d=w,y[0]=r.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");let v=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,($,T)=>{if($==="%%")return"%";v++;let O=r.formatters[T];if(typeof O=="function"){let R=y[v];$=O.call(g,R),y.splice(v,1),v--}return $}),r.formatArgs.call(g,y),(g.log||r.log).apply(g,y)}return m.namespace=u,m.useColors=r.useColors(),m.color=r.selectColor(u),m.extend=n,m.destroy=r.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(f!==r.namespaces&&(f=r.namespaces,h=r.enabled(u)),h),set:y=>{p=y}}),typeof r.init=="function"&&r.init(m),m}function n(u,d){let p=r(this.namespace+(typeof d>"u"?":":d)+u);return p.log=this.log,p}function s(u){r.save(u),r.namespaces=u,r.names=[],r.skips=[];let d=(typeof u=="string"?u:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let p of d)p[0]==="-"?r.skips.push(p.slice(1)):r.names.push(p)}function i(u,d){let p=0,f=0,h=-1,m=0;for(;p<u.length;)if(f<d.length&&(d[f]===u[p]||d[f]==="*"))d[f]==="*"?(h=f,m=p,f++):(p++,f++);else if(h!==-1)f=h+1,m++,p=m;else return!1;for(;f<d.length&&d[f]==="*";)f++;return f===d.length}function o(){let u=[...r.names,...r.skips.map(d=>"-"+d)].join(",");return r.enable(""),u}function a(u){for(let d of r.skips)if(i(u,d))return!1;for(let d of r.names)if(i(u,d))return!0;return!1}function c(u){return u instanceof Error?u.stack||u.message:u}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}C5.exports=zOe});var I5=E((Zr,X0)=>{Zr.formatArgs=GOe;Zr.save=WOe;Zr.load=KOe;Zr.useColors=HOe;Zr.storage=JOe();Zr.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Zr.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function HOe(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function GOe(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+X0.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,s=>{s!=="%%"&&(r++,s==="%c"&&(n=r))}),t.splice(n,0,e)}Zr.log=console.debug||console.log||(()=>{});function WOe(t){try{t?Zr.storage.setItem("debug",t):Zr.storage.removeItem("debug")}catch{}}function KOe(){let t;try{t=Zr.storage.getItem("debug")||Zr.storage.getItem("DEBUG")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function JOe(){try{return localStorage}catch{}}X0.exports=tP()(Zr);var{formatters:YOe}=X0.exports;YOe.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var k5=E((ALe,A5)=>{"use strict";A5.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),s=e.indexOf("--");return n!==-1&&(s===-1||n<s)}});var j5=E((kLe,M5)=>{"use strict";var XOe=require("os"),D5=require("tty"),In=k5(),{env:Lt}=process,To;In("no-color")||In("no-colors")||In("color=false")||In("color=never")?To=0:(In("color")||In("colors")||In("color=true")||In("color=always"))&&(To=1);"FORCE_COLOR"in Lt&&(Lt.FORCE_COLOR==="true"?To=1:Lt.FORCE_COLOR==="false"?To=0:To=Lt.FORCE_COLOR.length===0?1:Math.min(parseInt(Lt.FORCE_COLOR,10),3));function rP(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function nP(t,e){if(To===0)return 0;if(In("color=16m")||In("color=full")||In("color=truecolor"))return 3;if(In("color=256"))return 2;if(t&&!e&&To===void 0)return 0;let r=To||0;if(Lt.TERM==="dumb")return r;if(process.platform==="win32"){let n=XOe.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in Lt)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in Lt)||Lt.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in Lt)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Lt.TEAMCITY_VERSION)?1:0;if(Lt.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in Lt){let n=parseInt((Lt.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Lt.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Lt.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Lt.TERM)||"COLORTERM"in Lt?1:r}function QOe(t){let e=nP(t,t&&t.isTTY);return rP(e)}M5.exports={supportsColor:QOe,stdout:rP(nP(!0,D5.isatty(1))),stderr:rP(nP(!0,D5.isatty(2)))}});var L5=E((Ft,Z0)=>{var ZOe=require("tty"),Q0=require("util");Ft.init=oPe;Ft.log=nPe;Ft.formatArgs=tPe;Ft.save=sPe;Ft.load=iPe;Ft.useColors=ePe;Ft.destroy=Q0.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Ft.colors=[6,2,3,4,5,1];try{let t=j5();t&&(t.stderr||t).level>=2&&(Ft.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Ft.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(s,i)=>i.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function ePe(){return"colors"in Ft.inspectOpts?Boolean(Ft.inspectOpts.colors):ZOe.isatty(process.stderr.fd)}function tPe(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,s="\x1B[3"+(n<8?n:"8;5;"+n),i=`  ${s};1m${e} \x1B[0m`;t[0]=i+t[0].split(`
`).join(`
`+i),t.push(s+"m+"+Z0.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=rPe()+e+" "+t[0]}function rPe(){return Ft.inspectOpts.hideDate?"":new Date().toISOString()+" "}function nPe(...t){return process.stderr.write(Q0.formatWithOptions(Ft.inspectOpts,...t)+`
`)}function sPe(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function iPe(){return process.env.DEBUG}function oPe(t){t.inspectOpts={};let e=Object.keys(Ft.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=Ft.inspectOpts[e[r]]}Z0.exports=tP()(Ft);var{formatters:q5}=Z0.exports;q5.o=function(t){return this.inspectOpts.colors=this.useColors,Q0.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};q5.O=function(t){return this.inspectOpts.colors=this.useColors,Q0.inspect(t,this.inspectOpts)}});var F5=E((DLe,sP)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?sP.exports=I5():sP.exports=L5()});var B5=E((MLe,iP)=>{"use strict";var aPe=Object.prototype.hasOwnProperty,Ir="~";function Rh(){}Object.create&&(Rh.prototype=Object.create(null),new Rh().__proto__||(Ir=!1));function cPe(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function U5(t,e,r,n,s){if(typeof r!="function")throw new TypeError("The listener must be a function");var i=new cPe(r,n||t,s),o=Ir?Ir+e:e;return t._events[o]?t._events[o].fn?t._events[o]=[t._events[o],i]:t._events[o].push(i):(t._events[o]=i,t._eventsCount++),t}function e_(t,e){--t._eventsCount===0?t._events=new Rh:delete t._events[e]}function gr(){this._events=new Rh,this._eventsCount=0}gr.prototype.eventNames=function(){var e=[],r,n;if(this._eventsCount===0)return e;for(n in r=this._events)aPe.call(r,n)&&e.push(Ir?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(r)):e};gr.prototype.listeners=function(e){var r=Ir?Ir+e:e,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var s=0,i=n.length,o=new Array(i);s<i;s++)o[s]=n[s].fn;return o};gr.prototype.listenerCount=function(e){var r=Ir?Ir+e:e,n=this._events[r];return n?n.fn?1:n.length:0};gr.prototype.emit=function(e,r,n,s,i,o){var a=Ir?Ir+e:e;if(!this._events[a])return!1;var c=this._events[a],l=arguments.length,u,d;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),l){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,r),!0;case 3:return c.fn.call(c.context,r,n),!0;case 4:return c.fn.call(c.context,r,n,s),!0;case 5:return c.fn.call(c.context,r,n,s,i),!0;case 6:return c.fn.call(c.context,r,n,s,i,o),!0}for(d=1,u=new Array(l-1);d<l;d++)u[d-1]=arguments[d];c.fn.apply(c.context,u)}else{var p=c.length,f;for(d=0;d<p;d++)switch(c[d].once&&this.removeListener(e,c[d].fn,void 0,!0),l){case 1:c[d].fn.call(c[d].context);break;case 2:c[d].fn.call(c[d].context,r);break;case 3:c[d].fn.call(c[d].context,r,n);break;case 4:c[d].fn.call(c[d].context,r,n,s);break;default:if(!u)for(f=1,u=new Array(l-1);f<l;f++)u[f-1]=arguments[f];c[d].fn.apply(c[d].context,u)}}return!0};gr.prototype.on=function(e,r,n){return U5(this,e,r,n,!1)};gr.prototype.once=function(e,r,n){return U5(this,e,r,n,!0)};gr.prototype.removeListener=function(e,r,n,s){var i=Ir?Ir+e:e;if(!this._events[i])return this;if(!r)return e_(this,i),this;var o=this._events[i];if(o.fn)o.fn===r&&(!s||o.once)&&(!n||o.context===n)&&e_(this,i);else{for(var a=0,c=[],l=o.length;a<l;a++)(o[a].fn!==r||s&&!o[a].once||n&&o[a].context!==n)&&c.push(o[a]);c.length?this._events[i]=c.length===1?c[0]:c:e_(this,i)}return this};gr.prototype.removeAllListeners=function(e){var r;return e?(r=Ir?Ir+e:e,this._events[r]&&e_(this,r)):(this._events=new Rh,this._eventsCount=0),this};gr.prototype.off=gr.prototype.removeListener;gr.prototype.addListener=gr.prototype.on;gr.prefixed=Ir;gr.EventEmitter=gr;typeof iP<"u"&&(iP.exports=gr)});var Ei=E((qLe,H5)=>{"use strict";var V5=["nodebuffer","arraybuffer","fragments"],z5=typeof Blob<"u";z5&&V5.push("blob");H5.exports={BINARY_TYPES:V5,EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",hasBlob:z5,kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}});var $h=E((LLe,r_)=>{"use strict";var{EMPTY_BUFFER:lPe}=Ei(),oP=Buffer[Symbol.species];function uPe(t,e){if(t.length===0)return lPe;if(t.length===1)return t[0];let r=Buffer.allocUnsafe(e),n=0;for(let s=0;s<t.length;s++){let i=t[s];r.set(i,n),n+=i.length}return n<e?new oP(r.buffer,r.byteOffset,n):r}function G5(t,e,r,n,s){for(let i=0;i<s;i++)r[n+i]=t[i]^e[i&3]}function W5(t,e){for(let r=0;r<t.length;r++)t[r]^=e[r&3]}function fPe(t){return t.length===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.length)}function aP(t){if(aP.readOnly=!0,Buffer.isBuffer(t))return t;let e;return t instanceof ArrayBuffer?e=new oP(t):ArrayBuffer.isView(t)?e=new oP(t.buffer,t.byteOffset,t.byteLength):(e=Buffer.from(t),aP.readOnly=!1),e}r_.exports={concat:uPe,mask:G5,toArrayBuffer:fPe,toBuffer:aP,unmask:W5};if(!process.env.WS_NO_BUFFER_UTIL)try{let t=require("bufferutil");r_.exports.mask=function(e,r,n,s,i){i<48?G5(e,r,n,s,i):t.mask(e,r,n,s,i)},r_.exports.unmask=function(e,r){e.length<32?W5(e,r):t.unmask(e,r)}}catch{}});var Y5=E((FLe,J5)=>{"use strict";var K5=Symbol("kDone"),cP=Symbol("kRun"),lP=class{constructor(e){this[K5]=()=>{this.pending--,this[cP]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[cP]()}[cP](){if(this.pending!==this.concurrency&&this.jobs.length){let e=this.jobs.shift();this.pending++,e(this[K5])}}};J5.exports=lP});var Ph=E((ULe,e6)=>{"use strict";var Oh=require("zlib"),X5=$h(),dPe=Y5(),{kStatusCode:Q5}=Ei(),hPe=Buffer[Symbol.species],pPe=Buffer.from([0,0,255,255]),s_=Symbol("permessage-deflate"),Si=Symbol("total-length"),Wl=Symbol("callback"),Ro=Symbol("buffers"),Kl=Symbol("error"),n_,uP=class{constructor(e,r,n){if(this._maxPayload=n|0,this._options=e||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!r,this._deflate=null,this._inflate=null,this.params=null,!n_){let s=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;n_=new dPe(s)}}static get extensionName(){return"permessage-deflate"}offer(){let e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:this._options.clientMaxWindowBits==null&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let e=this._deflate[Wl];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){let r=this._options,n=e.find(s=>!(r.serverNoContextTakeover===!1&&s.server_no_context_takeover||s.server_max_window_bits&&(r.serverMaxWindowBits===!1||typeof r.serverMaxWindowBits=="number"&&r.serverMaxWindowBits>s.server_max_window_bits)||typeof r.clientMaxWindowBits=="number"&&!s.client_max_window_bits));if(!n)throw new Error("None of the extension offers can be accepted");return r.serverNoContextTakeover&&(n.server_no_context_takeover=!0),r.clientNoContextTakeover&&(n.client_no_context_takeover=!0),typeof r.serverMaxWindowBits=="number"&&(n.server_max_window_bits=r.serverMaxWindowBits),typeof r.clientMaxWindowBits=="number"?n.client_max_window_bits=r.clientMaxWindowBits:(n.client_max_window_bits===!0||r.clientMaxWindowBits===!1)&&delete n.client_max_window_bits,n}acceptAsClient(e){let r=e[0];if(this._options.clientNoContextTakeover===!1&&r.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!r.client_max_window_bits)typeof this._options.clientMaxWindowBits=="number"&&(r.client_max_window_bits=this._options.clientMaxWindowBits);else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits=="number"&&r.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return r}normalizeParams(e){return e.forEach(r=>{Object.keys(r).forEach(n=>{let s=r[n];if(s.length>1)throw new Error(`Parameter "${n}" must have only a single value`);if(s=s[0],n==="client_max_window_bits"){if(s!==!0){let i=+s;if(!Number.isInteger(i)||i<8||i>15)throw new TypeError(`Invalid value for parameter "${n}": ${s}`);s=i}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${n}": ${s}`)}else if(n==="server_max_window_bits"){let i=+s;if(!Number.isInteger(i)||i<8||i>15)throw new TypeError(`Invalid value for parameter "${n}": ${s}`);s=i}else if(n==="client_no_context_takeover"||n==="server_no_context_takeover"){if(s!==!0)throw new TypeError(`Invalid value for parameter "${n}": ${s}`)}else throw new Error(`Unknown parameter "${n}"`);r[n]=s})}),e}decompress(e,r,n){n_.add(s=>{this._decompress(e,r,(i,o)=>{s(),n(i,o)})})}compress(e,r,n){n_.add(s=>{this._compress(e,r,(i,o)=>{s(),n(i,o)})})}_decompress(e,r,n){let s=this._isServer?"client":"server";if(!this._inflate){let i=`${s}_max_window_bits`,o=typeof this.params[i]!="number"?Oh.Z_DEFAULT_WINDOWBITS:this.params[i];this._inflate=Oh.createInflateRaw({...this._options.zlibInflateOptions,windowBits:o}),this._inflate[s_]=this,this._inflate[Si]=0,this._inflate[Ro]=[],this._inflate.on("error",gPe),this._inflate.on("data",Z5)}this._inflate[Wl]=n,this._inflate.write(e),r&&this._inflate.write(pPe),this._inflate.flush(()=>{let i=this._inflate[Kl];if(i){this._inflate.close(),this._inflate=null,n(i);return}let o=X5.concat(this._inflate[Ro],this._inflate[Si]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[Si]=0,this._inflate[Ro]=[],r&&this.params[`${s}_no_context_takeover`]&&this._inflate.reset()),n(null,o)})}_compress(e,r,n){let s=this._isServer?"server":"client";if(!this._deflate){let i=`${s}_max_window_bits`,o=typeof this.params[i]!="number"?Oh.Z_DEFAULT_WINDOWBITS:this.params[i];this._deflate=Oh.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:o}),this._deflate[Si]=0,this._deflate[Ro]=[],this._deflate.on("data",mPe)}this._deflate[Wl]=n,this._deflate.write(e),this._deflate.flush(Oh.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let i=X5.concat(this._deflate[Ro],this._deflate[Si]);r&&(i=new hPe(i.buffer,i.byteOffset,i.length-4)),this._deflate[Wl]=null,this._deflate[Si]=0,this._deflate[Ro]=[],r&&this.params[`${s}_no_context_takeover`]&&this._deflate.reset(),n(null,i)})}};e6.exports=uP;function mPe(t){this[Ro].push(t),this[Si]+=t.length}function Z5(t){if(this[Si]+=t.length,this[s_]._maxPayload<1||this[Si]<=this[s_]._maxPayload){this[Ro].push(t);return}this[Kl]=new RangeError("Max payload size exceeded"),this[Kl].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[Kl][Q5]=1009,this.removeListener("data",Z5),this.reset()}function gPe(t){if(this[s_]._inflate=null,this[Kl]){this[Wl](this[Kl]);return}t[Q5]=1007,this[Wl](t)}});var Jl=E((BLe,i_)=>{"use strict";var{isUtf8:t6}=require("buffer"),{hasBlob:yPe}=Ei(),_Pe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function vPe(t){return t>=1e3&&t<=1014&&t!==1004&&t!==1005&&t!==1006||t>=3e3&&t<=4999}function fP(t){let e=t.length,r=0;for(;r<e;)if(!(t[r]&128))r++;else if((t[r]&224)===192){if(r+1===e||(t[r+1]&192)!==128||(t[r]&254)===192)return!1;r+=2}else if((t[r]&240)===224){if(r+2>=e||(t[r+1]&192)!==128||(t[r+2]&192)!==128||t[r]===224&&(t[r+1]&224)===128||t[r]===237&&(t[r+1]&224)===160)return!1;r+=3}else if((t[r]&248)===240){if(r+3>=e||(t[r+1]&192)!==128||(t[r+2]&192)!==128||(t[r+3]&192)!==128||t[r]===240&&(t[r+1]&240)===128||t[r]===244&&t[r+1]>143||t[r]>244)return!1;r+=4}else return!1;return!0}function wPe(t){return yPe&&typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&(t[Symbol.toStringTag]==="Blob"||t[Symbol.toStringTag]==="File")}i_.exports={isBlob:wPe,isValidStatusCode:vPe,isValidUTF8:fP,tokenChars:_Pe};if(t6)i_.exports.isValidUTF8=function(t){return t.length<24?fP(t):t6(t)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let t=require("utf-8-validate");i_.exports.isValidUTF8=function(e){return e.length<32?fP(e):t(e)}}catch{}});var gP=E((VLe,c6)=>{"use strict";var{Writable:bPe}=require("stream"),r6=Ph(),{BINARY_TYPES:EPe,EMPTY_BUFFER:n6,kStatusCode:SPe,kWebSocket:TPe}=Ei(),{concat:dP,toArrayBuffer:RPe,unmask:$Pe}=$h(),{isValidStatusCode:OPe,isValidUTF8:s6}=Jl(),o_=Buffer[Symbol.species],An=0,i6=1,o6=2,a6=3,hP=4,pP=5,a_=6,mP=class extends bPe{constructor(e={}){super(),this._allowSynchronousEvents=e.allowSynchronousEvents!==void 0?e.allowSynchronousEvents:!0,this._binaryType=e.binaryType||EPe[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=e.maxPayload|0,this._skipUTF8Validation=!!e.skipUTF8Validation,this[TPe]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=An}_write(e,r,n){if(this._opcode===8&&this._state==An)return n();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(n)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){let n=this._buffers[0];return this._buffers[0]=new o_(n.buffer,n.byteOffset+e,n.length-e),new o_(n.buffer,n.byteOffset,e)}let r=Buffer.allocUnsafe(e);do{let n=this._buffers[0],s=r.length-e;e>=n.length?r.set(this._buffers.shift(),s):(r.set(new Uint8Array(n.buffer,n.byteOffset,e),s),this._buffers[0]=new o_(n.buffer,n.byteOffset+e,n.length-e)),e-=n.length}while(e>0);return r}startLoop(e){this._loop=!0;do switch(this._state){case An:this.getInfo(e);break;case i6:this.getPayloadLength16(e);break;case o6:this.getPayloadLength64(e);break;case a6:this.getMask();break;case hP:this.getData(e);break;case pP:case a_:this._loop=!1;return}while(this._loop);this._errored||e()}getInfo(e){if(this._bufferedBytes<2){this._loop=!1;return}let r=this.consume(2);if(r[0]&48){let s=this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");e(s);return}let n=(r[0]&64)===64;if(n&&!this._extensions[r6.extensionName]){let s=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(s);return}if(this._fin=(r[0]&128)===128,this._opcode=r[0]&15,this._payloadLength=r[1]&127,this._opcode===0){if(n){let s=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(s);return}if(!this._fragmented){let s=this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");e(s);return}this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented){let s=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");e(s);return}this._compressed=n}else if(this._opcode>7&&this._opcode<11){if(!this._fin){let s=this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");e(s);return}if(n){let s=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(s);return}if(this._payloadLength>125||this._opcode===8&&this._payloadLength===1){let s=this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");e(s);return}}else{let s=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");e(s);return}if(!this._fin&&!this._fragmented&&(this._fragmented=this._opcode),this._masked=(r[1]&128)===128,this._isServer){if(!this._masked){let s=this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK");e(s);return}}else if(this._masked){let s=this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");e(s);return}this._payloadLength===126?this._state=i6:this._payloadLength===127?this._state=o6:this.haveLength(e)}getPayloadLength16(e){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(e)}getPayloadLength64(e){if(this._bufferedBytes<8){this._loop=!1;return}let r=this.consume(8),n=r.readUInt32BE(0);if(n>Math.pow(2,53-32)-1){let s=this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH");e(s);return}this._payloadLength=n*Math.pow(2,32)+r.readUInt32BE(4),this.haveLength(e)}haveLength(e){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)){let r=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");e(r);return}this._masked?this._state=a6:this._state=hP}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=hP}getData(e){let r=n6;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}r=this.consume(this._payloadLength),this._masked&&this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3]&&$Pe(r,this._mask)}if(this._opcode>7){this.controlMessage(r,e);return}if(this._compressed){this._state=pP,this.decompress(r,e);return}r.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(r)),this.dataMessage(e)}decompress(e,r){this._extensions[r6.extensionName].decompress(e,this._fin,(s,i)=>{if(s)return r(s);if(i.length){if(this._messageLength+=i.length,this._messageLength>this._maxPayload&&this._maxPayload>0){let o=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");r(o);return}this._fragments.push(i)}this.dataMessage(r),this._state===An&&this.startLoop(r)})}dataMessage(e){if(!this._fin){this._state=An;return}let r=this._messageLength,n=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let s;this._binaryType==="nodebuffer"?s=dP(n,r):this._binaryType==="arraybuffer"?s=RPe(dP(n,r)):this._binaryType==="blob"?s=new Blob(n):s=n,this._allowSynchronousEvents?(this.emit("message",s,!0),this._state=An):(this._state=a_,setImmediate(()=>{this.emit("message",s,!0),this._state=An,this.startLoop(e)}))}else{let s=dP(n,r);if(!this._skipUTF8Validation&&!s6(s)){let i=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");e(i);return}this._state===pP||this._allowSynchronousEvents?(this.emit("message",s,!1),this._state=An):(this._state=a_,setImmediate(()=>{this.emit("message",s,!1),this._state=An,this.startLoop(e)}))}}controlMessage(e,r){if(this._opcode===8){if(e.length===0)this._loop=!1,this.emit("conclude",1005,n6),this.end();else{let n=e.readUInt16BE(0);if(!OPe(n)){let i=this.createError(RangeError,`invalid status code ${n}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");r(i);return}let s=new o_(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!s6(s)){let i=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");r(i);return}this._loop=!1,this.emit("conclude",n,s),this.end()}this._state=An;return}this._allowSynchronousEvents?(this.emit(this._opcode===9?"ping":"pong",e),this._state=An):(this._state=a_,setImmediate(()=>{this.emit(this._opcode===9?"ping":"pong",e),this._state=An,this.startLoop(r)}))}createError(e,r,n,s,i){this._loop=!1,this._errored=!0;let o=new e(n?`Invalid WebSocket frame: ${r}`:r);return Error.captureStackTrace(o,this.createError),o.code=i,o[SPe]=s,o}};c6.exports=mP});var _P=E((HLe,f6)=>{"use strict";var{Duplex:zLe}=require("stream"),{randomFillSync:PPe}=require("crypto"),l6=Ph(),{EMPTY_BUFFER:xPe,kWebSocket:NPe,NOOP:CPe}=Ei(),{isBlob:Yl,isValidStatusCode:IPe}=Jl(),{mask:u6,toBuffer:Ha}=$h(),kn=Symbol("kByteLength"),APe=Buffer.alloc(4),c_=8*1024,Ga,Xl=c_,cs=0,kPe=1,DPe=2,Vs=class{constructor(e,r,n){this._extensions=r||{},n&&(this._generateMask=n,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._queue=[],this._state=cs,this.onerror=CPe,this[NPe]=void 0}static frame(e,r){let n,s=!1,i=2,o=!1;r.mask&&(n=r.maskBuffer||APe,r.generateMask?r.generateMask(n):(Xl===c_&&(Ga===void 0&&(Ga=Buffer.alloc(c_)),PPe(Ga,0,c_),Xl=0),n[0]=Ga[Xl++],n[1]=Ga[Xl++],n[2]=Ga[Xl++],n[3]=Ga[Xl++]),o=(n[0]|n[1]|n[2]|n[3])===0,i=6);let a;typeof e=="string"?(!r.mask||o)&&r[kn]!==void 0?a=r[kn]:(e=Buffer.from(e),a=e.length):(a=e.length,s=r.mask&&r.readOnly&&!o);let c=a;a>=65536?(i+=8,c=127):a>125&&(i+=2,c=126);let l=Buffer.allocUnsafe(s?a+i:i);return l[0]=r.fin?r.opcode|128:r.opcode,r.rsv1&&(l[0]|=64),l[1]=c,c===126?l.writeUInt16BE(a,2):c===127&&(l[2]=l[3]=0,l.writeUIntBE(a,4,6)),r.mask?(l[1]|=128,l[i-4]=n[0],l[i-3]=n[1],l[i-2]=n[2],l[i-1]=n[3],o?[l,e]:s?(u6(e,n,l,i,a),[l]):(u6(e,n,e,0,a),[l,e])):[l,e]}close(e,r,n,s){let i;if(e===void 0)i=xPe;else{if(typeof e!="number"||!IPe(e))throw new TypeError("First argument must be a valid error code number");if(r===void 0||!r.length)i=Buffer.allocUnsafe(2),i.writeUInt16BE(e,0);else{let a=Buffer.byteLength(r);if(a>123)throw new RangeError("The message must not be greater than 123 bytes");i=Buffer.allocUnsafe(2+a),i.writeUInt16BE(e,0),typeof r=="string"?i.write(r,2):i.set(r,2)}}let o={[kn]:i.length,fin:!0,generateMask:this._generateMask,mask:n,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._state!==cs?this.enqueue([this.dispatch,i,!1,o,s]):this.sendFrame(Vs.frame(i,o),s)}ping(e,r,n){let s,i;if(typeof e=="string"?(s=Buffer.byteLength(e),i=!1):Yl(e)?(s=e.size,i=!1):(e=Ha(e),s=e.length,i=Ha.readOnly),s>125)throw new RangeError("The data size must not be greater than 125 bytes");let o={[kn]:s,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:9,readOnly:i,rsv1:!1};Yl(e)?this._state!==cs?this.enqueue([this.getBlobData,e,!1,o,n]):this.getBlobData(e,!1,o,n):this._state!==cs?this.enqueue([this.dispatch,e,!1,o,n]):this.sendFrame(Vs.frame(e,o),n)}pong(e,r,n){let s,i;if(typeof e=="string"?(s=Buffer.byteLength(e),i=!1):Yl(e)?(s=e.size,i=!1):(e=Ha(e),s=e.length,i=Ha.readOnly),s>125)throw new RangeError("The data size must not be greater than 125 bytes");let o={[kn]:s,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:10,readOnly:i,rsv1:!1};Yl(e)?this._state!==cs?this.enqueue([this.getBlobData,e,!1,o,n]):this.getBlobData(e,!1,o,n):this._state!==cs?this.enqueue([this.dispatch,e,!1,o,n]):this.sendFrame(Vs.frame(e,o),n)}send(e,r,n){let s=this._extensions[l6.extensionName],i=r.binary?2:1,o=r.compress,a,c;typeof e=="string"?(a=Buffer.byteLength(e),c=!1):Yl(e)?(a=e.size,c=!1):(e=Ha(e),a=e.length,c=Ha.readOnly),this._firstFragment?(this._firstFragment=!1,o&&s&&s.params[s._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(o=a>=s._threshold),this._compress=o):(o=!1,i=0),r.fin&&(this._firstFragment=!0);let l={[kn]:a,fin:r.fin,generateMask:this._generateMask,mask:r.mask,maskBuffer:this._maskBuffer,opcode:i,readOnly:c,rsv1:o};Yl(e)?this._state!==cs?this.enqueue([this.getBlobData,e,this._compress,l,n]):this.getBlobData(e,this._compress,l,n):this._state!==cs?this.enqueue([this.dispatch,e,this._compress,l,n]):this.dispatch(e,this._compress,l,n)}getBlobData(e,r,n,s){this._bufferedBytes+=n[kn],this._state=DPe,e.arrayBuffer().then(i=>{if(this._socket.destroyed){let a=new Error("The socket was closed while the blob was being read");process.nextTick(yP,this,a,s);return}this._bufferedBytes-=n[kn];let o=Ha(i);r?this.dispatch(o,r,n,s):(this._state=cs,this.sendFrame(Vs.frame(o,n),s),this.dequeue())}).catch(i=>{process.nextTick(MPe,this,i,s)})}dispatch(e,r,n,s){if(!r){this.sendFrame(Vs.frame(e,n),s);return}let i=this._extensions[l6.extensionName];this._bufferedBytes+=n[kn],this._state=kPe,i.compress(e,n.fin,(o,a)=>{if(this._socket.destroyed){let c=new Error("The socket was closed while data was being compressed");yP(this,c,s);return}this._bufferedBytes-=n[kn],this._state=cs,n.readOnly=!1,this.sendFrame(Vs.frame(a,n),s),this.dequeue()})}dequeue(){for(;this._state===cs&&this._queue.length;){let e=this._queue.shift();this._bufferedBytes-=e[3][kn],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][kn],this._queue.push(e)}sendFrame(e,r){e.length===2?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],r),this._socket.uncork()):this._socket.write(e[0],r)}};f6.exports=Vs;function yP(t,e,r){typeof r=="function"&&r(e);for(let n=0;n<t._queue.length;n++){let s=t._queue[n],i=s[s.length-1];typeof i=="function"&&i(e)}}function MPe(t,e,r){yP(t,e,r),t.onerror(e)}});var w6=E((GLe,v6)=>{"use strict";var{kForOnEventAttribute:xh,kListener:vP}=Ei(),d6=Symbol("kCode"),h6=Symbol("kData"),p6=Symbol("kError"),m6=Symbol("kMessage"),g6=Symbol("kReason"),Ql=Symbol("kTarget"),y6=Symbol("kType"),_6=Symbol("kWasClean"),Ti=class{constructor(e){this[Ql]=null,this[y6]=e}get target(){return this[Ql]}get type(){return this[y6]}};Object.defineProperty(Ti.prototype,"target",{enumerable:!0});Object.defineProperty(Ti.prototype,"type",{enumerable:!0});var Wa=class extends Ti{constructor(e,r={}){super(e),this[d6]=r.code===void 0?0:r.code,this[g6]=r.reason===void 0?"":r.reason,this[_6]=r.wasClean===void 0?!1:r.wasClean}get code(){return this[d6]}get reason(){return this[g6]}get wasClean(){return this[_6]}};Object.defineProperty(Wa.prototype,"code",{enumerable:!0});Object.defineProperty(Wa.prototype,"reason",{enumerable:!0});Object.defineProperty(Wa.prototype,"wasClean",{enumerable:!0});var Zl=class extends Ti{constructor(e,r={}){super(e),this[p6]=r.error===void 0?null:r.error,this[m6]=r.message===void 0?"":r.message}get error(){return this[p6]}get message(){return this[m6]}};Object.defineProperty(Zl.prototype,"error",{enumerable:!0});Object.defineProperty(Zl.prototype,"message",{enumerable:!0});var Nh=class extends Ti{constructor(e,r={}){super(e),this[h6]=r.data===void 0?null:r.data}get data(){return this[h6]}};Object.defineProperty(Nh.prototype,"data",{enumerable:!0});var jPe={addEventListener(t,e,r={}){for(let s of this.listeners(t))if(!r[xh]&&s[vP]===e&&!s[xh])return;let n;if(t==="message")n=function(i,o){let a=new Nh("message",{data:o?i:i.toString()});a[Ql]=this,l_(e,this,a)};else if(t==="close")n=function(i,o){let a=new Wa("close",{code:i,reason:o.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});a[Ql]=this,l_(e,this,a)};else if(t==="error")n=function(i){let o=new Zl("error",{error:i,message:i.message});o[Ql]=this,l_(e,this,o)};else if(t==="open")n=function(){let i=new Ti("open");i[Ql]=this,l_(e,this,i)};else return;n[xh]=!!r[xh],n[vP]=e,r.once?this.once(t,n):this.on(t,n)},removeEventListener(t,e){for(let r of this.listeners(t))if(r[vP]===e&&!r[xh]){this.removeListener(t,r);break}}};v6.exports={CloseEvent:Wa,ErrorEvent:Zl,Event:Ti,EventTarget:jPe,MessageEvent:Nh};function l_(t,e,r){typeof t=="object"&&t.handleEvent?t.handleEvent.call(t,r):t.call(e,r)}});var wP=E((WLe,b6)=>{"use strict";var{tokenChars:Ch}=Jl();function zs(t,e,r){t[e]===void 0?t[e]=[r]:t[e].push(r)}function qPe(t){let e=Object.create(null),r=Object.create(null),n=!1,s=!1,i=!1,o,a,c=-1,l=-1,u=-1,d=0;for(;d<t.length;d++)if(l=t.charCodeAt(d),o===void 0)if(u===-1&&Ch[l]===1)c===-1&&(c=d);else if(d!==0&&(l===32||l===9))u===-1&&c!==-1&&(u=d);else if(l===59||l===44){if(c===-1)throw new SyntaxError(`Unexpected character at index ${d}`);u===-1&&(u=d);let f=t.slice(c,u);l===44?(zs(e,f,r),r=Object.create(null)):o=f,c=u=-1}else throw new SyntaxError(`Unexpected character at index ${d}`);else if(a===void 0)if(u===-1&&Ch[l]===1)c===-1&&(c=d);else if(l===32||l===9)u===-1&&c!==-1&&(u=d);else if(l===59||l===44){if(c===-1)throw new SyntaxError(`Unexpected character at index ${d}`);u===-1&&(u=d),zs(r,t.slice(c,u),!0),l===44&&(zs(e,o,r),r=Object.create(null),o=void 0),c=u=-1}else if(l===61&&c!==-1&&u===-1)a=t.slice(c,d),c=u=-1;else throw new SyntaxError(`Unexpected character at index ${d}`);else if(s){if(Ch[l]!==1)throw new SyntaxError(`Unexpected character at index ${d}`);c===-1?c=d:n||(n=!0),s=!1}else if(i)if(Ch[l]===1)c===-1&&(c=d);else if(l===34&&c!==-1)i=!1,u=d;else if(l===92)s=!0;else throw new SyntaxError(`Unexpected character at index ${d}`);else if(l===34&&t.charCodeAt(d-1)===61)i=!0;else if(u===-1&&Ch[l]===1)c===-1&&(c=d);else if(c!==-1&&(l===32||l===9))u===-1&&(u=d);else if(l===59||l===44){if(c===-1)throw new SyntaxError(`Unexpected character at index ${d}`);u===-1&&(u=d);let f=t.slice(c,u);n&&(f=f.replace(/\\/g,""),n=!1),zs(r,a,f),l===44&&(zs(e,o,r),r=Object.create(null),o=void 0),a=void 0,c=u=-1}else throw new SyntaxError(`Unexpected character at index ${d}`);if(c===-1||i||l===32||l===9)throw new SyntaxError("Unexpected end of input");u===-1&&(u=d);let p=t.slice(c,u);return o===void 0?zs(e,p,r):(a===void 0?zs(r,p,!0):n?zs(r,a,p.replace(/\\/g,"")):zs(r,a,p),zs(e,o,r)),e}function LPe(t){return Object.keys(t).map(e=>{let r=t[e];return Array.isArray(r)||(r=[r]),r.map(n=>[e].concat(Object.keys(n).map(s=>{let i=n[s];return Array.isArray(i)||(i=[i]),i.map(o=>o===!0?s:`${s}=${o}`).join("; ")})).join("; ")).join(", ")}).join(", ")}b6.exports={format:LPe,parse:qPe}});var h_=E((YLe,A6)=>{"use strict";var FPe=require("events"),UPe=require("https"),BPe=require("http"),T6=require("net"),VPe=require("tls"),{randomBytes:zPe,createHash:HPe}=require("crypto"),{Duplex:KLe,Readable:JLe}=require("stream"),{URL:bP}=require("url"),$o=Ph(),GPe=gP(),WPe=_P(),{isBlob:KPe}=Jl(),{BINARY_TYPES:E6,EMPTY_BUFFER:u_,GUID:JPe,kForOnEventAttribute:EP,kListener:YPe,kStatusCode:XPe,kWebSocket:Ut,NOOP:R6}=Ei(),{EventTarget:{addEventListener:QPe,removeEventListener:ZPe}}=w6(),{format:exe,parse:txe}=wP(),{toBuffer:rxe}=$h(),nxe=30*1e3,$6=Symbol("kAborted"),SP=[8,13],Ri=["CONNECTING","OPEN","CLOSING","CLOSED"],sxe=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,ae=class extends FPe{constructor(e,r,n){super(),this._binaryType=E6[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=u_,this._closeTimer=null,this._errorEmitted=!1,this._extensions={},this._paused=!1,this._protocol="",this._readyState=ae.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,e!==null?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,r===void 0?r=[]:Array.isArray(r)||(typeof r=="object"&&r!==null?(n=r,r=[]):r=[r]),O6(this,e,r,n)):(this._autoPong=n.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(e){E6.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,r,n){let s=new GPe({allowSynchronousEvents:n.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:n.maxPayload,skipUTF8Validation:n.skipUTF8Validation}),i=new WPe(e,this._extensions,n.generateMask);this._receiver=s,this._sender=i,this._socket=e,s[Ut]=this,i[Ut]=this,e[Ut]=this,s.on("conclude",axe),s.on("drain",cxe),s.on("error",lxe),s.on("message",uxe),s.on("ping",fxe),s.on("pong",dxe),i.onerror=hxe,e.setTimeout&&e.setTimeout(0),e.setNoDelay&&e.setNoDelay(),r.length>0&&e.unshift(r),e.on("close",N6),e.on("data",d_),e.on("end",C6),e.on("error",I6),this._readyState=ae.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=ae.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[$o.extensionName]&&this._extensions[$o.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=ae.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,r){if(this.readyState!==ae.CLOSED){if(this.readyState===ae.CONNECTING){let n="WebSocket was closed before the connection was established";cn(this,this._req,n);return}if(this.readyState===ae.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=ae.CLOSING,this._sender.close(e,r,!this._isServer,n=>{n||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),x6(this)}}pause(){this.readyState===ae.CONNECTING||this.readyState===ae.CLOSED||(this._paused=!0,this._socket.pause())}ping(e,r,n){if(this.readyState===ae.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(n=e,e=r=void 0):typeof r=="function"&&(n=r,r=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==ae.OPEN){TP(this,e,n);return}r===void 0&&(r=!this._isServer),this._sender.ping(e||u_,r,n)}pong(e,r,n){if(this.readyState===ae.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(n=e,e=r=void 0):typeof r=="function"&&(n=r,r=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==ae.OPEN){TP(this,e,n);return}r===void 0&&(r=!this._isServer),this._sender.pong(e||u_,r,n)}resume(){this.readyState===ae.CONNECTING||this.readyState===ae.CLOSED||(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,r,n){if(this.readyState===ae.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof r=="function"&&(n=r,r={}),typeof e=="number"&&(e=e.toString()),this.readyState!==ae.OPEN){TP(this,e,n);return}let s={binary:typeof e!="string",mask:!this._isServer,compress:!0,fin:!0,...r};this._extensions[$o.extensionName]||(s.compress=!1),this._sender.send(e||u_,s,n)}terminate(){if(this.readyState!==ae.CLOSED){if(this.readyState===ae.CONNECTING){let e="WebSocket was closed before the connection was established";cn(this,this._req,e);return}this._socket&&(this._readyState=ae.CLOSING,this._socket.destroy())}}};Object.defineProperty(ae,"CONNECTING",{enumerable:!0,value:Ri.indexOf("CONNECTING")});Object.defineProperty(ae.prototype,"CONNECTING",{enumerable:!0,value:Ri.indexOf("CONNECTING")});Object.defineProperty(ae,"OPEN",{enumerable:!0,value:Ri.indexOf("OPEN")});Object.defineProperty(ae.prototype,"OPEN",{enumerable:!0,value:Ri.indexOf("OPEN")});Object.defineProperty(ae,"CLOSING",{enumerable:!0,value:Ri.indexOf("CLOSING")});Object.defineProperty(ae.prototype,"CLOSING",{enumerable:!0,value:Ri.indexOf("CLOSING")});Object.defineProperty(ae,"CLOSED",{enumerable:!0,value:Ri.indexOf("CLOSED")});Object.defineProperty(ae.prototype,"CLOSED",{enumerable:!0,value:Ri.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(t=>{Object.defineProperty(ae.prototype,t,{enumerable:!0})});["open","error","close","message"].forEach(t=>{Object.defineProperty(ae.prototype,`on${t}`,{enumerable:!0,get(){for(let e of this.listeners(t))if(e[EP])return e[YPe];return null},set(e){for(let r of this.listeners(t))if(r[EP]){this.removeListener(t,r);break}typeof e=="function"&&this.addEventListener(t,e,{[EP]:!0})}})});ae.prototype.addEventListener=QPe;ae.prototype.removeEventListener=ZPe;A6.exports=ae;function O6(t,e,r,n){let s={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:SP[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...n,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(t._autoPong=s.autoPong,!SP.includes(s.protocolVersion))throw new RangeError(`Unsupported protocol version: ${s.protocolVersion} (supported versions: ${SP.join(", ")})`);let i;if(e instanceof bP)i=e;else try{i=new bP(e)}catch{throw new SyntaxError(`Invalid URL: ${e}`)}i.protocol==="http:"?i.protocol="ws:":i.protocol==="https:"&&(i.protocol="wss:"),t._url=i.href;let o=i.protocol==="wss:",a=i.protocol==="ws+unix:",c;if(i.protocol!=="ws:"&&!o&&!a?c=`The URL's protocol must be one of "ws:", "wss:", "http:", "https:", or "ws+unix:"`:a&&!i.pathname?c="The URL's pathname is empty":i.hash&&(c="The URL contains a fragment identifier"),c){let m=new SyntaxError(c);if(t._redirects===0)throw m;f_(t,m);return}let l=o?443:80,u=zPe(16).toString("base64"),d=o?UPe.request:BPe.request,p=new Set,f;if(s.createConnection=s.createConnection||(o?oxe:ixe),s.defaultPort=s.defaultPort||l,s.port=i.port||l,s.host=i.hostname.startsWith("[")?i.hostname.slice(1,-1):i.hostname,s.headers={...s.headers,"Sec-WebSocket-Version":s.protocolVersion,"Sec-WebSocket-Key":u,Connection:"Upgrade",Upgrade:"websocket"},s.path=i.pathname+i.search,s.timeout=s.handshakeTimeout,s.perMessageDeflate&&(f=new $o(s.perMessageDeflate!==!0?s.perMessageDeflate:{},!1,s.maxPayload),s.headers["Sec-WebSocket-Extensions"]=exe({[$o.extensionName]:f.offer()})),r.length){for(let m of r){if(typeof m!="string"||!sxe.test(m)||p.has(m))throw new SyntaxError("An invalid or duplicated subprotocol was specified");p.add(m)}s.headers["Sec-WebSocket-Protocol"]=r.join(",")}if(s.origin&&(s.protocolVersion<13?s.headers["Sec-WebSocket-Origin"]=s.origin:s.headers.Origin=s.origin),(i.username||i.password)&&(s.auth=`${i.username}:${i.password}`),a){let m=s.path.split(":");s.socketPath=m[0],s.path=m[1]}let h;if(s.followRedirects){if(t._redirects===0){t._originalIpc=a,t._originalSecure=o,t._originalHostOrSocketPath=a?s.socketPath:i.host;let m=n&&n.headers;if(n={...n,headers:{}},m)for(let[y,g]of Object.entries(m))n.headers[y.toLowerCase()]=g}else if(t.listenerCount("redirect")===0){let m=a?t._originalIpc?s.socketPath===t._originalHostOrSocketPath:!1:t._originalIpc?!1:i.host===t._originalHostOrSocketPath;(!m||t._originalSecure&&!o)&&(delete s.headers.authorization,delete s.headers.cookie,m||delete s.headers.host,s.auth=void 0)}s.auth&&!n.headers.authorization&&(n.headers.authorization="Basic "+Buffer.from(s.auth).toString("base64")),h=t._req=d(s),t._redirects&&t.emit("redirect",t.url,h)}else h=t._req=d(s);s.timeout&&h.on("timeout",()=>{cn(t,h,"Opening handshake has timed out")}),h.on("error",m=>{h===null||h[$6]||(h=t._req=null,f_(t,m))}),h.on("response",m=>{let y=m.headers.location,g=m.statusCode;if(y&&s.followRedirects&&g>=300&&g<400){if(++t._redirects>s.maxRedirects){cn(t,h,"Maximum redirects exceeded");return}h.abort();let w;try{w=new bP(y,e)}catch{let v=new SyntaxError(`Invalid URL: ${y}`);f_(t,v);return}O6(t,w,r,n)}else t.emit("unexpected-response",h,m)||cn(t,h,`Unexpected server response: ${m.statusCode}`)}),h.on("upgrade",(m,y,g)=>{if(t.emit("upgrade",m),t.readyState!==ae.CONNECTING)return;h=t._req=null;let w=m.headers.upgrade;if(w===void 0||w.toLowerCase()!=="websocket"){cn(t,y,"Invalid Upgrade header");return}let _=HPe("sha1").update(u+JPe).digest("base64");if(m.headers["sec-websocket-accept"]!==_){cn(t,y,"Invalid Sec-WebSocket-Accept header");return}let v=m.headers["sec-websocket-protocol"],S;if(v!==void 0?p.size?p.has(v)||(S="Server sent an invalid subprotocol"):S="Server sent a subprotocol but none was requested":p.size&&(S="Server sent no subprotocol"),S){cn(t,y,S);return}v&&(t._protocol=v);let $=m.headers["sec-websocket-extensions"];if($!==void 0){if(!f){cn(t,y,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let T;try{T=txe($)}catch{cn(t,y,"Invalid Sec-WebSocket-Extensions header");return}let O=Object.keys(T);if(O.length!==1||O[0]!==$o.extensionName){cn(t,y,"Server indicated an extension that was not requested");return}try{f.accept(T[$o.extensionName])}catch{cn(t,y,"Invalid Sec-WebSocket-Extensions header");return}t._extensions[$o.extensionName]=f}t.setSocket(y,g,{allowSynchronousEvents:s.allowSynchronousEvents,generateMask:s.generateMask,maxPayload:s.maxPayload,skipUTF8Validation:s.skipUTF8Validation})}),s.finishRequest?s.finishRequest(h,t):h.end()}function f_(t,e){t._readyState=ae.CLOSING,t._errorEmitted=!0,t.emit("error",e),t.emitClose()}function ixe(t){return t.path=t.socketPath,T6.connect(t)}function oxe(t){return t.path=void 0,!t.servername&&t.servername!==""&&(t.servername=T6.isIP(t.host)?"":t.host),VPe.connect(t)}function cn(t,e,r){t._readyState=ae.CLOSING;let n=new Error(r);Error.captureStackTrace(n,cn),e.setHeader?(e[$6]=!0,e.abort(),e.socket&&!e.socket.destroyed&&e.socket.destroy(),process.nextTick(f_,t,n)):(e.destroy(n),e.once("error",t.emit.bind(t,"error")),e.once("close",t.emitClose.bind(t)))}function TP(t,e,r){if(e){let n=KPe(e)?e.size:rxe(e).length;t._socket?t._sender._bufferedBytes+=n:t._bufferedAmount+=n}if(r){let n=new Error(`WebSocket is not open: readyState ${t.readyState} (${Ri[t.readyState]})`);process.nextTick(r,n)}}function axe(t,e){let r=this[Ut];r._closeFrameReceived=!0,r._closeMessage=e,r._closeCode=t,r._socket[Ut]!==void 0&&(r._socket.removeListener("data",d_),process.nextTick(P6,r._socket),t===1005?r.close():r.close(t,e))}function cxe(){let t=this[Ut];t.isPaused||t._socket.resume()}function lxe(t){let e=this[Ut];e._socket[Ut]!==void 0&&(e._socket.removeListener("data",d_),process.nextTick(P6,e._socket),e.close(t[XPe])),e._errorEmitted||(e._errorEmitted=!0,e.emit("error",t))}function S6(){this[Ut].emitClose()}function uxe(t,e){this[Ut].emit("message",t,e)}function fxe(t){let e=this[Ut];e._autoPong&&e.pong(t,!this._isServer,R6),e.emit("ping",t)}function dxe(t){this[Ut].emit("pong",t)}function P6(t){t.resume()}function hxe(t){let e=this[Ut];e.readyState!==ae.CLOSED&&(e.readyState===ae.OPEN&&(e._readyState=ae.CLOSING,x6(e)),this._socket.end(),e._errorEmitted||(e._errorEmitted=!0,e.emit("error",t)))}function x6(t){t._closeTimer=setTimeout(t._socket.destroy.bind(t._socket),nxe)}function N6(){let t=this[Ut];this.removeListener("close",N6),this.removeListener("data",d_),this.removeListener("end",C6),t._readyState=ae.CLOSING;let e;!this._readableState.endEmitted&&!t._closeFrameReceived&&!t._receiver._writableState.errorEmitted&&(e=t._socket.read())!==null&&t._receiver.write(e),t._receiver.end(),this[Ut]=void 0,clearTimeout(t._closeTimer),t._receiver._writableState.finished||t._receiver._writableState.errorEmitted?t.emitClose():(t._receiver.on("error",S6),t._receiver.on("finish",S6))}function d_(t){this[Ut]._receiver.write(t)||this.pause()}function C6(){let t=this[Ut];t._readyState=ae.CLOSING,t._receiver.end(),this.end()}function I6(){let t=this[Ut];this.removeListener("error",I6),this.on("error",R6),t&&(t._readyState=ae.CLOSING,this.destroy())}});var j6=E((QLe,M6)=>{"use strict";var XLe=h_(),{Duplex:pxe}=require("stream");function k6(t){t.emit("close")}function mxe(){!this.destroyed&&this._writableState.finished&&this.destroy()}function D6(t){this.removeListener("error",D6),this.destroy(),this.listenerCount("error")===0&&this.emit("error",t)}function gxe(t,e){let r=!0,n=new pxe({...e,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return t.on("message",function(i,o){let a=!o&&n._readableState.objectMode?i.toString():i;n.push(a)||t.pause()}),t.once("error",function(i){n.destroyed||(r=!1,n.destroy(i))}),t.once("close",function(){n.destroyed||n.push(null)}),n._destroy=function(s,i){if(t.readyState===t.CLOSED){i(s),process.nextTick(k6,n);return}let o=!1;t.once("error",function(c){o=!0,i(c)}),t.once("close",function(){o||i(s),process.nextTick(k6,n)}),r&&t.terminate()},n._final=function(s){if(t.readyState===t.CONNECTING){t.once("open",function(){n._final(s)});return}t._socket!==null&&(t._socket._writableState.finished?(s(),n._readableState.endEmitted&&n.destroy()):(t._socket.once("finish",function(){s()}),t.close()))},n._read=function(){t.isPaused&&t.resume()},n._write=function(s,i,o){if(t.readyState===t.CONNECTING){t.once("open",function(){n._write(s,i,o)});return}t.send(s,o)},n.on("end",mxe),n.on("error",D6),n}M6.exports=gxe});var L6=E((ZLe,q6)=>{"use strict";var{tokenChars:yxe}=Jl();function _xe(t){let e=new Set,r=-1,n=-1,s=0;for(s;s<t.length;s++){let o=t.charCodeAt(s);if(n===-1&&yxe[o]===1)r===-1&&(r=s);else if(s!==0&&(o===32||o===9))n===-1&&r!==-1&&(n=s);else if(o===44){if(r===-1)throw new SyntaxError(`Unexpected character at index ${s}`);n===-1&&(n=s);let a=t.slice(r,n);if(e.has(a))throw new SyntaxError(`The "${a}" subprotocol is duplicated`);e.add(a),r=n=-1}else throw new SyntaxError(`Unexpected character at index ${s}`)}if(r===-1||n!==-1)throw new SyntaxError("Unexpected end of input");let i=t.slice(r,s);if(e.has(i))throw new SyntaxError(`The "${i}" subprotocol is duplicated`);return e.add(i),e}q6.exports={parse:_xe}});var G6=E((tFe,H6)=>{"use strict";var vxe=require("events"),p_=require("http"),{Duplex:eFe}=require("stream"),{createHash:wxe}=require("crypto"),F6=wP(),Ka=Ph(),bxe=L6(),Exe=h_(),{GUID:Sxe,kWebSocket:Txe}=Ei(),Rxe=/^[+/0-9A-Za-z]{22}==$/,U6=0,B6=1,z6=2,RP=class extends vxe{constructor(e,r){if(super(),e={allowSynchronousEvents:!0,autoPong:!0,maxPayload:100*1024*1024,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:Exe,...e},e.port==null&&!e.server&&!e.noServer||e.port!=null&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(e.port!=null?(this._server=p_.createServer((n,s)=>{let i=p_.STATUS_CODES[426];s.writeHead(426,{"Content-Length":i.length,"Content-Type":"text/plain"}),s.end(i)}),this._server.listen(e.port,e.host,e.backlog,r)):e.server&&(this._server=e.server),this._server){let n=this.emit.bind(this,"connection");this._removeListeners=$xe(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(s,i,o)=>{this.handleUpgrade(s,i,o,n)}})}e.perMessageDeflate===!0&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=U6}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(this._state===z6){e&&this.once("close",()=>{e(new Error("The server is not running"))}),process.nextTick(Ih,this);return}if(e&&this.once("close",e),this._state!==B6)if(this._state=B6,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients?this.clients.size?this._shouldEmitClose=!0:process.nextTick(Ih,this):process.nextTick(Ih,this);else{let r=this._server;this._removeListeners(),this._removeListeners=this._server=null,r.close(()=>{Ih(this)})}}shouldHandle(e){if(this.options.path){let r=e.url.indexOf("?");if((r!==-1?e.url.slice(0,r):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,r,n,s){r.on("error",V6);let i=e.headers["sec-websocket-key"],o=e.headers.upgrade,a=+e.headers["sec-websocket-version"];if(e.method!=="GET"){Ja(this,e,r,405,"Invalid HTTP method");return}if(o===void 0||o.toLowerCase()!=="websocket"){Ja(this,e,r,400,"Invalid Upgrade header");return}if(i===void 0||!Rxe.test(i)){Ja(this,e,r,400,"Missing or invalid Sec-WebSocket-Key header");return}if(a!==8&&a!==13){Ja(this,e,r,400,"Missing or invalid Sec-WebSocket-Version header");return}if(!this.shouldHandle(e)){Ah(r,400);return}let c=e.headers["sec-websocket-protocol"],l=new Set;if(c!==void 0)try{l=bxe.parse(c)}catch{Ja(this,e,r,400,"Invalid Sec-WebSocket-Protocol header");return}let u=e.headers["sec-websocket-extensions"],d={};if(this.options.perMessageDeflate&&u!==void 0){let p=new Ka(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let f=F6.parse(u);f[Ka.extensionName]&&(p.accept(f[Ka.extensionName]),d[Ka.extensionName]=p)}catch{Ja(this,e,r,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let p={origin:e.headers[`${a===8?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(this.options.verifyClient.length===2){this.options.verifyClient(p,(f,h,m,y)=>{if(!f)return Ah(r,h||401,m,y);this.completeUpgrade(d,i,l,e,r,n,s)});return}if(!this.options.verifyClient(p))return Ah(r,401)}this.completeUpgrade(d,i,l,e,r,n,s)}completeUpgrade(e,r,n,s,i,o,a){if(!i.readable||!i.writable)return i.destroy();if(i[Txe])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>U6)return Ah(i,503);let l=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${wxe("sha1").update(r+Sxe).digest("base64")}`],u=new this.options.WebSocket(null,void 0,this.options);if(n.size){let d=this.options.handleProtocols?this.options.handleProtocols(n,s):n.values().next().value;d&&(l.push(`Sec-WebSocket-Protocol: ${d}`),u._protocol=d)}if(e[Ka.extensionName]){let d=e[Ka.extensionName].params,p=F6.format({[Ka.extensionName]:[d]});l.push(`Sec-WebSocket-Extensions: ${p}`),u._extensions=e}this.emit("headers",l,s),i.write(l.concat(`\r
`).join(`\r
`)),i.removeListener("error",V6),u.setSocket(i,o,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(u),u.on("close",()=>{this.clients.delete(u),this._shouldEmitClose&&!this.clients.size&&process.nextTick(Ih,this)})),a(u,s)}};H6.exports=RP;function $xe(t,e){for(let r of Object.keys(e))t.on(r,e[r]);return function(){for(let n of Object.keys(e))t.removeListener(n,e[n])}}function Ih(t){t._state=z6,t.emit("close")}function V6(){this.destroy()}function Ah(t,e,r,n){r=r||p_.STATUS_CODES[e],n={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...n},t.once("finish",t.destroy),t.end(`HTTP/1.1 ${e} ${p_.STATUS_CODES[e]}\r
`+Object.keys(n).map(s=>`${s}: ${n[s]}`).join(`\r
`)+`\r
\r
`+r)}function Ja(t,e,r,n,s){if(t.listenerCount("wsClientError")){let i=new Error(s);Error.captureStackTrace(i,Ja),t.emit("wsClientError",i,r,e)}else Ah(r,n,s)}});var K6=E((rFe,W6)=>{"use strict";var $i=h_();$i.createWebSocketStream=j6();$i.Server=G6();$i.Receiver=gP();$i.Sender=_P();$i.WebSocket=$i;$i.WebSocketServer=$i.Server;W6.exports=$i});var Y6=E((nFe,J6)=>{"use strict";J6.exports=K6()});var $P=E((m_,X6)=>{(function(t,e){typeof m_=="object"?X6.exports=m_=e():typeof define=="function"&&define.amd?define([],e):t.CryptoJS=e()})(m_,function(){var t=t||function(e,r){var n;if(typeof window<"u"&&window.crypto&&(n=window.crypto),typeof self<"u"&&self.crypto&&(n=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(n=globalThis.crypto),!n&&typeof window<"u"&&window.msCrypto&&(n=window.msCrypto),!n&&typeof global<"u"&&global.crypto&&(n=global.crypto),!n&&typeof require=="function")try{n=require("crypto")}catch{}var s=function(){if(n){if(typeof n.getRandomValues=="function")try{return n.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof n.randomBytes=="function")try{return n.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},i=Object.create||function(){function g(){}return function(w){var _;return g.prototype=w,_=new g,g.prototype=null,_}}(),o={},a=o.lib={},c=a.Base=function(){return{extend:function(g){var w=i(this);return g&&w.mixIn(g),(!w.hasOwnProperty("init")||this.init===w.init)&&(w.init=function(){w.$super.init.apply(this,arguments)}),w.init.prototype=w,w.$super=this,w},create:function(){var g=this.extend();return g.init.apply(g,arguments),g},init:function(){},mixIn:function(g){for(var w in g)g.hasOwnProperty(w)&&(this[w]=g[w]);g.hasOwnProperty("toString")&&(this.toString=g.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),l=a.WordArray=c.extend({init:function(g,w){g=this.words=g||[],w!=r?this.sigBytes=w:this.sigBytes=g.length*4},toString:function(g){return(g||d).stringify(this)},concat:function(g){var w=this.words,_=g.words,v=this.sigBytes,S=g.sigBytes;if(this.clamp(),v%4)for(var $=0;$<S;$++){var T=_[$>>>2]>>>24-$%4*8&255;w[v+$>>>2]|=T<<24-(v+$)%4*8}else for(var O=0;O<S;O+=4)w[v+O>>>2]=_[O>>>2];return this.sigBytes+=S,this},clamp:function(){var g=this.words,w=this.sigBytes;g[w>>>2]&=4294967295<<32-w%4*8,g.length=e.ceil(w/4)},clone:function(){var g=c.clone.call(this);return g.words=this.words.slice(0),g},random:function(g){for(var w=[],_=0;_<g;_+=4)w.push(s());return new l.init(w,g)}}),u=o.enc={},d=u.Hex={stringify:function(g){for(var w=g.words,_=g.sigBytes,v=[],S=0;S<_;S++){var $=w[S>>>2]>>>24-S%4*8&255;v.push(($>>>4).toString(16)),v.push(($&15).toString(16))}return v.join("")},parse:function(g){for(var w=g.length,_=[],v=0;v<w;v+=2)_[v>>>3]|=parseInt(g.substr(v,2),16)<<24-v%8*4;return new l.init(_,w/2)}},p=u.Latin1={stringify:function(g){for(var w=g.words,_=g.sigBytes,v=[],S=0;S<_;S++){var $=w[S>>>2]>>>24-S%4*8&255;v.push(String.fromCharCode($))}return v.join("")},parse:function(g){for(var w=g.length,_=[],v=0;v<w;v++)_[v>>>2]|=(g.charCodeAt(v)&255)<<24-v%4*8;return new l.init(_,w)}},f=u.Utf8={stringify:function(g){try{return decodeURIComponent(escape(p.stringify(g)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(g){return p.parse(unescape(encodeURIComponent(g)))}},h=a.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(g){typeof g=="string"&&(g=f.parse(g)),this._data.concat(g),this._nDataBytes+=g.sigBytes},_process:function(g){var w,_=this._data,v=_.words,S=_.sigBytes,$=this.blockSize,T=$*4,O=S/T;g?O=e.ceil(O):O=e.max((O|0)-this._minBufferSize,0);var R=O*$,P=e.min(R*4,S);if(R){for(var A=0;A<R;A+=$)this._doProcessBlock(v,A);w=v.splice(0,R),_.sigBytes-=P}return new l.init(w,P)},clone:function(){var g=c.clone.call(this);return g._data=this._data.clone(),g},_minBufferSize:0}),m=a.Hasher=h.extend({cfg:c.extend(),init:function(g){this.cfg=this.cfg.extend(g),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(g){return this._append(g),this._process(),this},finalize:function(g){g&&this._append(g);var w=this._doFinalize();return w},blockSize:512/32,_createHelper:function(g){return function(w,_){return new g.init(_).finalize(w)}},_createHmacHelper:function(g){return function(w,_){return new y.HMAC.init(g,_).finalize(w)}}}),y=o.algo={};return o}(Math);return t})});var Z6=E((g_,Q6)=>{(function(t,e){typeof g_=="object"?Q6.exports=g_=e($P()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(g_,function(t){return function(e){var r=t,n=r.lib,s=n.WordArray,i=n.Hasher,o=r.algo,a=[],c=[];(function(){function d(m){for(var y=e.sqrt(m),g=2;g<=y;g++)if(!(m%g))return!1;return!0}function p(m){return(m-(m|0))*4294967296|0}for(var f=2,h=0;h<64;)d(f)&&(h<8&&(a[h]=p(e.pow(f,1/2))),c[h]=p(e.pow(f,1/3)),h++),f++})();var l=[],u=o.SHA256=i.extend({_doReset:function(){this._hash=new s.init(a.slice(0))},_doProcessBlock:function(d,p){for(var f=this._hash.words,h=f[0],m=f[1],y=f[2],g=f[3],w=f[4],_=f[5],v=f[6],S=f[7],$=0;$<64;$++){if($<16)l[$]=d[p+$]|0;else{var T=l[$-15],O=(T<<25|T>>>7)^(T<<14|T>>>18)^T>>>3,R=l[$-2],P=(R<<15|R>>>17)^(R<<13|R>>>19)^R>>>10;l[$]=O+l[$-7]+P+l[$-16]}var A=w&_^~w&v,N=h&m^h&y^m&y,C=(h<<30|h>>>2)^(h<<19|h>>>13)^(h<<10|h>>>22),V=(w<<26|w>>>6)^(w<<21|w>>>11)^(w<<7|w>>>25),te=S+V+A+c[$]+l[$],H=C+N;S=v,v=_,_=w,w=g+te|0,g=y,y=m,m=h,h=te+H|0}f[0]=f[0]+h|0,f[1]=f[1]+m|0,f[2]=f[2]+y|0,f[3]=f[3]+g|0,f[4]=f[4]+w|0,f[5]=f[5]+_|0,f[6]=f[6]+v|0,f[7]=f[7]+S|0},_doFinalize:function(){var d=this._data,p=d.words,f=this._nDataBytes*8,h=d.sigBytes*8;return p[h>>>5]|=128<<24-h%32,p[(h+64>>>9<<4)+14]=e.floor(f/4294967296),p[(h+64>>>9<<4)+15]=f,d.sigBytes=p.length*4,this._process(),this._hash},clone:function(){var d=i.clone.call(this);return d._hash=this._hash.clone(),d}});r.SHA256=i._createHelper(u),r.HmacSHA256=i._createHmacHelper(u)}(Math),t.SHA256})});var t8=E((y_,e8)=>{(function(t,e){typeof y_=="object"?e8.exports=y_=e($P()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(y_,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,s=e.enc,i=s.Base64={stringify:function(a){var c=a.words,l=a.sigBytes,u=this._map;a.clamp();for(var d=[],p=0;p<l;p+=3)for(var f=c[p>>>2]>>>24-p%4*8&255,h=c[p+1>>>2]>>>24-(p+1)%4*8&255,m=c[p+2>>>2]>>>24-(p+2)%4*8&255,y=f<<16|h<<8|m,g=0;g<4&&p+g*.75<l;g++)d.push(u.charAt(y>>>6*(3-g)&63));var w=u.charAt(64);if(w)for(;d.length%4;)d.push(w);return d.join("")},parse:function(a){var c=a.length,l=this._map,u=this._reverseMap;if(!u){u=this._reverseMap=[];for(var d=0;d<l.length;d++)u[l.charCodeAt(d)]=d}var p=l.charAt(64);if(p){var f=a.indexOf(p);f!==-1&&(c=f)}return o(a,c,u)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function o(a,c,l){for(var u=[],d=0,p=0;p<c;p++)if(p%4){var f=l[a.charCodeAt(p-1)]<<p%4*2,h=l[a.charCodeAt(p)]>>>6-p%4*2,m=f|h;u[d>>>2]|=m<<24-d%4*8,d++}return n.create(u,d)}}(),t.enc.Base64})});var Dh=E(Dn=>{"use strict";Object.defineProperty(Dn,"__esModule",{value:!0});Dn.getUint64=Dn.getInt64=Dn.setInt64=Dn.setUint64=Dn.UINT32_MAX=void 0;Dn.UINT32_MAX=4294967295;function Pxe(t,e,r){let n=r/4294967296,s=r;t.setUint32(e,n),t.setUint32(e+4,s)}Dn.setUint64=Pxe;function xxe(t,e,r){let n=Math.floor(r/4294967296),s=r;t.setUint32(e,n),t.setUint32(e+4,s)}Dn.setInt64=xxe;function Nxe(t,e){let r=t.getInt32(e),n=t.getUint32(e+4);return r*4294967296+n}Dn.getInt64=Nxe;function Cxe(t,e){let r=t.getUint32(e),n=t.getUint32(e+4);return r*4294967296+n}Dn.getUint64=Cxe});var v_=E(yr=>{"use strict";var NP,CP,IP;Object.defineProperty(yr,"__esModule",{value:!0});yr.utf8DecodeTD=yr.TEXT_DECODER_THRESHOLD=yr.utf8DecodeJs=yr.utf8EncodeTE=yr.TEXT_ENCODER_THRESHOLD=yr.utf8EncodeJs=yr.utf8Count=void 0;var s8=Dh(),__=(typeof process>"u"||((NP=process==null?void 0:process.env)===null||NP===void 0?void 0:NP.TEXT_ENCODING)!=="never")&&typeof TextEncoder<"u"&&typeof TextDecoder<"u";function Ixe(t){let e=t.length,r=0,n=0;for(;n<e;){let s=t.charCodeAt(n++);if(s&4294967168)if(!(s&4294965248))r+=2;else{if(s>=55296&&s<=56319&&n<e){let i=t.charCodeAt(n);(i&64512)===56320&&(++n,s=((s&1023)<<10)+(i&1023)+65536)}s&4294901760?r+=4:r+=3}else{r++;continue}}return r}yr.utf8Count=Ixe;function Axe(t,e,r){let n=t.length,s=r,i=0;for(;i<n;){let o=t.charCodeAt(i++);if(o&4294967168)if(!(o&4294965248))e[s++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&i<n){let a=t.charCodeAt(i);(a&64512)===56320&&(++i,o=((o&1023)<<10)+(a&1023)+65536)}o&4294901760?(e[s++]=o>>18&7|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128):(e[s++]=o>>12&15|224,e[s++]=o>>6&63|128)}else{e[s++]=o;continue}e[s++]=o&63|128}}yr.utf8EncodeJs=Axe;var Mh=__?new TextEncoder:void 0;yr.TEXT_ENCODER_THRESHOLD=__?typeof process<"u"&&((CP=process==null?void 0:process.env)===null||CP===void 0?void 0:CP.TEXT_ENCODING)!=="force"?200:0:s8.UINT32_MAX;function kxe(t,e,r){e.set(Mh.encode(t),r)}function Dxe(t,e,r){Mh.encodeInto(t,e.subarray(r))}yr.utf8EncodeTE=Mh?.encodeInto?Dxe:kxe;var Mxe=4096;function jxe(t,e,r){let n=e,s=n+r,i=[],o="";for(;n<s;){let a=t[n++];if(!(a&128))i.push(a);else if((a&224)===192){let c=t[n++]&63;i.push((a&31)<<6|c)}else if((a&240)===224){let c=t[n++]&63,l=t[n++]&63;i.push((a&31)<<12|c<<6|l)}else if((a&248)===240){let c=t[n++]&63,l=t[n++]&63,u=t[n++]&63,d=(a&7)<<18|c<<12|l<<6|u;d>65535&&(d-=65536,i.push(d>>>10&1023|55296),d=56320|d&1023),i.push(d)}else i.push(a);i.length>=Mxe&&(o+=String.fromCharCode(...i),i.length=0)}return i.length>0&&(o+=String.fromCharCode(...i)),o}yr.utf8DecodeJs=jxe;var qxe=__?new TextDecoder:null;yr.TEXT_DECODER_THRESHOLD=__?typeof process<"u"&&((IP=process==null?void 0:process.env)===null||IP===void 0?void 0:IP.TEXT_DECODER)!=="force"?200:0:s8.UINT32_MAX;function Lxe(t,e,r){let n=t.subarray(e,e+r);return qxe.decode(n)}yr.utf8DecodeTD=Lxe});var kP=E(w_=>{"use strict";Object.defineProperty(w_,"__esModule",{value:!0});w_.ExtData=void 0;var AP=class{constructor(e,r){this.type=e,this.data=r}};w_.ExtData=AP});var E_=E(b_=>{"use strict";Object.defineProperty(b_,"__esModule",{value:!0});b_.DecodeError=void 0;var tu=class extends Error{constructor(e){super(e);let r=Object.create(tu.prototype);Object.setPrototypeOf(this,r),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:tu.name})}};b_.DecodeError=tu});var DP=E(er=>{"use strict";Object.defineProperty(er,"__esModule",{value:!0});er.timestampExtension=er.decodeTimestampExtension=er.decodeTimestampToTimeSpec=er.encodeTimestampExtension=er.encodeDateToTimeSpec=er.encodeTimeSpecToTimestamp=er.EXT_TIMESTAMP=void 0;var Fxe=E_(),i8=Dh();er.EXT_TIMESTAMP=-1;var Uxe=4294967296-1,Bxe=17179869184-1;function o8({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=Bxe)if(e===0&&t<=Uxe){let r=new Uint8Array(4);return new DataView(r.buffer).setUint32(0,t),r}else{let r=t/4294967296,n=t&4294967295,s=new Uint8Array(8),i=new DataView(s.buffer);return i.setUint32(0,e<<2|r&3),i.setUint32(4,n),s}else{let r=new Uint8Array(12),n=new DataView(r.buffer);return n.setUint32(0,e),(0,i8.setInt64)(n,4,t),r}}er.encodeTimeSpecToTimestamp=o8;function a8(t){let e=t.getTime(),r=Math.floor(e/1e3),n=(e-r*1e3)*1e6,s=Math.floor(n/1e9);return{sec:r+s,nsec:n-s*1e9}}er.encodeDateToTimeSpec=a8;function c8(t){if(t instanceof Date){let e=a8(t);return o8(e)}else return null}er.encodeTimestampExtension=c8;function l8(t){let e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{let r=e.getUint32(0),n=e.getUint32(4),s=(r&3)*4294967296+n,i=r>>>2;return{sec:s,nsec:i}}case 12:{let r=(0,i8.getInt64)(e,4),n=e.getUint32(0);return{sec:r,nsec:n}}default:throw new Fxe.DecodeError(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}er.decodeTimestampToTimeSpec=l8;function u8(t){let e=l8(t);return new Date(e.sec*1e3+e.nsec/1e6)}er.decodeTimestampExtension=u8;er.timestampExtension={type:er.EXT_TIMESTAMP,encode:c8,decode:u8}});var R_=E(T_=>{"use strict";Object.defineProperty(T_,"__esModule",{value:!0});T_.ExtensionCodec=void 0;var S_=kP(),Vxe=DP(),jh=class{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(Vxe.timestampExtension)}register({type:e,encode:r,decode:n}){if(e>=0)this.encoders[e]=r,this.decoders[e]=n;else{let s=1+e;this.builtInEncoders[s]=r,this.builtInDecoders[s]=n}}tryToEncode(e,r){for(let n=0;n<this.builtInEncoders.length;n++){let s=this.builtInEncoders[n];if(s!=null){let i=s(e,r);if(i!=null){let o=-1-n;return new S_.ExtData(o,i)}}}for(let n=0;n<this.encoders.length;n++){let s=this.encoders[n];if(s!=null){let i=s(e,r);if(i!=null){let o=n;return new S_.ExtData(o,i)}}}return e instanceof S_.ExtData?e:null}decode(e,r,n){let s=r<0?this.builtInDecoders[-1-r]:this.decoders[r];return s?s(e,r,n):new S_.ExtData(r,e)}};T_.ExtensionCodec=jh;jh.defaultCodec=new jh});var MP=E(ru=>{"use strict";Object.defineProperty(ru,"__esModule",{value:!0});ru.createDataView=ru.ensureUint8Array=void 0;function f8(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer?new Uint8Array(t):Uint8Array.from(t)}ru.ensureUint8Array=f8;function zxe(t){if(t instanceof ArrayBuffer)return new DataView(t);let e=f8(t);return new DataView(e.buffer,e.byteOffset,e.byteLength)}ru.createDataView=zxe});var qP=E(Hs=>{"use strict";Object.defineProperty(Hs,"__esModule",{value:!0});Hs.Encoder=Hs.DEFAULT_INITIAL_BUFFER_SIZE=Hs.DEFAULT_MAX_DEPTH=void 0;var qh=v_(),Hxe=R_(),d8=Dh(),Gxe=MP();Hs.DEFAULT_MAX_DEPTH=100;Hs.DEFAULT_INITIAL_BUFFER_SIZE=2048;var jP=class{constructor(e=Hxe.ExtensionCodec.defaultCodec,r=void 0,n=Hs.DEFAULT_MAX_DEPTH,s=Hs.DEFAULT_INITIAL_BUFFER_SIZE,i=!1,o=!1,a=!1,c=!1){this.extensionCodec=e,this.context=r,this.maxDepth=n,this.initialBufferSize=s,this.sortKeys=i,this.forceFloat32=o,this.ignoreUndefined=a,this.forceIntegerToFloat=c,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}reinitializeState(){this.pos=0}encodeSharedRef(e){return this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}encode(e){return this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}doEncode(e,r){if(r>this.maxDepth)throw new Error(`Too deep objects in depth ${r}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.encodeObject(e,r)}ensureBufferSizeToWrite(e){let r=this.pos+e;this.view.byteLength<r&&this.resizeBuffer(r*2)}resizeBuffer(e){let r=new ArrayBuffer(e),n=new Uint8Array(r),s=new DataView(r);n.set(this.bytes),this.view=s,this.bytes=n}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){Number.isSafeInteger(e)&&!this.forceIntegerToFloat?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):(this.writeU8(211),this.writeI64(e)):this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){if(e.length>qh.TEXT_ENCODER_THRESHOLD){let s=(0,qh.utf8Count)(e);this.ensureBufferSizeToWrite(5+s),this.writeStringHeader(s),(0,qh.utf8EncodeTE)(e,this.bytes,this.pos),this.pos+=s}else{let s=(0,qh.utf8Count)(e);this.ensureBufferSizeToWrite(5+s),this.writeStringHeader(s),(0,qh.utf8EncodeJs)(e,this.bytes,this.pos),this.pos+=s}}encodeObject(e,r){let n=this.extensionCodec.tryToEncode(e,this.context);if(n!=null)this.encodeExtension(n);else if(Array.isArray(e))this.encodeArray(e,r);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,r);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){let r=e.byteLength;if(r<256)this.writeU8(196),this.writeU8(r);else if(r<65536)this.writeU8(197),this.writeU16(r);else if(r<4294967296)this.writeU8(198),this.writeU32(r);else throw new Error(`Too large binary: ${r}`);let n=(0,Gxe.ensureUint8Array)(e);this.writeU8a(n)}encodeArray(e,r){let n=e.length;if(n<16)this.writeU8(144+n);else if(n<65536)this.writeU8(220),this.writeU16(n);else if(n<4294967296)this.writeU8(221),this.writeU32(n);else throw new Error(`Too large array: ${n}`);for(let s of e)this.doEncode(s,r+1)}countWithoutUndefined(e,r){let n=0;for(let s of r)e[s]!==void 0&&n++;return n}encodeMap(e,r){let n=Object.keys(e);this.sortKeys&&n.sort();let s=this.ignoreUndefined?this.countWithoutUndefined(e,n):n.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else if(s<4294967296)this.writeU8(223),this.writeU32(s);else throw new Error(`Too large map object: ${s}`);for(let i of n){let o=e[i];this.ignoreUndefined&&o===void 0||(this.encodeString(i),this.doEncode(o,r+1))}}encodeExtension(e){let r=e.data.length;if(r===1)this.writeU8(212);else if(r===2)this.writeU8(213);else if(r===4)this.writeU8(214);else if(r===8)this.writeU8(215);else if(r===16)this.writeU8(216);else if(r<256)this.writeU8(199),this.writeU8(r);else if(r<65536)this.writeU8(200),this.writeU16(r);else if(r<4294967296)this.writeU8(201),this.writeU32(r);else throw new Error(`Too large extension object: ${r}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){let r=e.length;this.ensureBufferSizeToWrite(r),this.bytes.set(e,this.pos),this.pos+=r}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),(0,d8.setUint64)(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),(0,d8.setInt64)(this.view,this.pos,e),this.pos+=8}};Hs.Encoder=jP});var h8=E($_=>{"use strict";Object.defineProperty($_,"__esModule",{value:!0});$_.encode=void 0;var Wxe=qP(),Kxe={};function Jxe(t,e=Kxe){return new Wxe.Encoder(e.extensionCodec,e.context,e.maxDepth,e.initialBufferSize,e.sortKeys,e.forceFloat32,e.ignoreUndefined,e.forceIntegerToFloat).encodeSharedRef(t)}$_.encode=Jxe});var p8=E(O_=>{"use strict";Object.defineProperty(O_,"__esModule",{value:!0});O_.prettyByte=void 0;function Yxe(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}O_.prettyByte=Yxe});var m8=E(P_=>{"use strict";Object.defineProperty(P_,"__esModule",{value:!0});P_.CachedKeyDecoder=void 0;var Xxe=v_(),Qxe=16,Zxe=16,LP=class{constructor(e=Qxe,r=Zxe){this.maxKeyLength=e,this.maxLengthPerKey=r,this.hit=0,this.miss=0,this.caches=[];for(let n=0;n<this.maxKeyLength;n++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,r,n){let s=this.caches[n-1];e:for(let i of s){let o=i.bytes;for(let a=0;a<n;a++)if(o[a]!==e[r+a])continue e;return i.str}return null}store(e,r){let n=this.caches[e.length-1],s={bytes:e,str:r};n.length>=this.maxLengthPerKey?n[Math.random()*n.length|0]=s:n.push(s)}decode(e,r,n){let s=this.find(e,r,n);if(s!=null)return this.hit++,s;this.miss++;let i=(0,Xxe.utf8DecodeJs)(e,r,n),o=Uint8Array.prototype.slice.call(e,r,r+n);return this.store(o,i),i}};P_.CachedKeyDecoder=LP});var x_=E(Pi=>{"use strict";Object.defineProperty(Pi,"__esModule",{value:!0});Pi.Decoder=Pi.DataViewIndexOutOfBoundsError=void 0;var FP=p8(),eNe=R_(),Ya=Dh(),UP=v_(),BP=MP(),tNe=m8(),Oi=E_(),rNe=t=>{let e=typeof t;return e==="string"||e==="number"},Lh=-1,zP=new DataView(new ArrayBuffer(0)),nNe=new Uint8Array(zP.buffer);Pi.DataViewIndexOutOfBoundsError=(()=>{try{zP.getInt8(0)}catch(t){return t.constructor}throw new Error("never reached")})();var g8=new Pi.DataViewIndexOutOfBoundsError("Insufficient data"),sNe=new tNe.CachedKeyDecoder,VP=class{constructor(e=eNe.ExtensionCodec.defaultCodec,r=void 0,n=Ya.UINT32_MAX,s=Ya.UINT32_MAX,i=Ya.UINT32_MAX,o=Ya.UINT32_MAX,a=Ya.UINT32_MAX,c=sNe){this.extensionCodec=e,this.context=r,this.maxStrLength=n,this.maxBinLength=s,this.maxArrayLength=i,this.maxMapLength=o,this.maxExtLength=a,this.keyDecoder=c,this.totalPos=0,this.pos=0,this.view=zP,this.bytes=nNe,this.headByte=Lh,this.stack=[]}reinitializeState(){this.totalPos=0,this.headByte=Lh,this.stack.length=0}setBuffer(e){this.bytes=(0,BP.ensureUint8Array)(e),this.view=(0,BP.createDataView)(this.bytes),this.pos=0}appendBuffer(e){if(this.headByte===Lh&&!this.hasRemaining(1))this.setBuffer(e);else{let r=this.bytes.subarray(this.pos),n=(0,BP.ensureUint8Array)(e),s=new Uint8Array(r.length+n.length);s.set(r),s.set(n,r.length),this.setBuffer(s)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){let{view:r,pos:n}=this;return new RangeError(`Extra ${r.byteLength-n} of ${r.byteLength} byte(s) found at buffer[${e}]`)}decode(e){this.reinitializeState(),this.setBuffer(e);let r=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return r}*decodeMulti(e){for(this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}async decodeAsync(e){let r=!1,n;for await(let a of e){if(r)throw this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{n=this.doDecodeSync(),r=!0}catch(c){if(!(c instanceof Pi.DataViewIndexOutOfBoundsError))throw c}this.totalPos+=this.pos}if(r){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return n}let{headByte:s,pos:i,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${(0,FP.prettyByte)(s)} at ${o} (${i} in the current buffer)`)}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,r){let n=r,s=-1;for await(let i of e){if(r&&s===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(i),n&&(s=this.readArraySize(),n=!1,this.complete());try{for(;yield this.doDecodeSync(),--s!==0;);}catch(o){if(!(o instanceof Pi.DataViewIndexOutOfBoundsError))throw o}this.totalPos+=this.pos}}doDecodeSync(){e:for(;;){let e=this.readHeadByte(),r;if(e>=224)r=e-256;else if(e<192)if(e<128)r=e;else if(e<144){let s=e-128;if(s!==0){this.pushMapState(s),this.complete();continue e}else r={}}else if(e<160){let s=e-144;if(s!==0){this.pushArrayState(s),this.complete();continue e}else r=[]}else{let s=e-160;r=this.decodeUtf8String(s,0)}else if(e===192)r=null;else if(e===194)r=!1;else if(e===195)r=!0;else if(e===202)r=this.readF32();else if(e===203)r=this.readF64();else if(e===204)r=this.readU8();else if(e===205)r=this.readU16();else if(e===206)r=this.readU32();else if(e===207)r=this.readU64();else if(e===208)r=this.readI8();else if(e===209)r=this.readI16();else if(e===210)r=this.readI32();else if(e===211)r=this.readI64();else if(e===217){let s=this.lookU8();r=this.decodeUtf8String(s,1)}else if(e===218){let s=this.lookU16();r=this.decodeUtf8String(s,2)}else if(e===219){let s=this.lookU32();r=this.decodeUtf8String(s,4)}else if(e===220){let s=this.readU16();if(s!==0){this.pushArrayState(s),this.complete();continue e}else r=[]}else if(e===221){let s=this.readU32();if(s!==0){this.pushArrayState(s),this.complete();continue e}else r=[]}else if(e===222){let s=this.readU16();if(s!==0){this.pushMapState(s),this.complete();continue e}else r={}}else if(e===223){let s=this.readU32();if(s!==0){this.pushMapState(s),this.complete();continue e}else r={}}else if(e===196){let s=this.lookU8();r=this.decodeBinary(s,1)}else if(e===197){let s=this.lookU16();r=this.decodeBinary(s,2)}else if(e===198){let s=this.lookU32();r=this.decodeBinary(s,4)}else if(e===212)r=this.decodeExtension(1,0);else if(e===213)r=this.decodeExtension(2,0);else if(e===214)r=this.decodeExtension(4,0);else if(e===215)r=this.decodeExtension(8,0);else if(e===216)r=this.decodeExtension(16,0);else if(e===199){let s=this.lookU8();r=this.decodeExtension(s,1)}else if(e===200){let s=this.lookU16();r=this.decodeExtension(s,2)}else if(e===201){let s=this.lookU32();r=this.decodeExtension(s,4)}else throw new Oi.DecodeError(`Unrecognized type byte: ${(0,FP.prettyByte)(e)}`);this.complete();let n=this.stack;for(;n.length>0;){let s=n[n.length-1];if(s.type===0)if(s.array[s.position]=r,s.position++,s.position===s.size)n.pop(),r=s.array;else continue e;else if(s.type===1){if(!rNe(r))throw new Oi.DecodeError("The type of key must be string or number but "+typeof r);if(r==="__proto__")throw new Oi.DecodeError("The key __proto__ is not allowed");s.key=r,s.type=2;continue e}else if(s.map[s.key]=r,s.readCount++,s.readCount===s.size)n.pop(),r=s.map;else{s.key=null,s.type=1;continue e}}return r}}readHeadByte(){return this.headByte===Lh&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=Lh}readArraySize(){let e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new Oi.DecodeError(`Unrecognized array type byte: ${(0,FP.prettyByte)(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new Oi.DecodeError(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.push({type:1,size:e,key:null,readCount:0,map:{}})}pushArrayState(e){if(e>this.maxArrayLength)throw new Oi.DecodeError(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.push({type:0,size:e,array:new Array(e),position:0})}decodeUtf8String(e,r){var n;if(e>this.maxStrLength)throw new Oi.DecodeError(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+r+e)throw g8;let s=this.pos+r,i;return this.stateIsMapKey()&&(!((n=this.keyDecoder)===null||n===void 0)&&n.canBeCached(e))?i=this.keyDecoder.decode(this.bytes,s,e):e>UP.TEXT_DECODER_THRESHOLD?i=(0,UP.utf8DecodeTD)(this.bytes,s,e):i=(0,UP.utf8DecodeJs)(this.bytes,s,e),this.pos+=r+e,i}stateIsMapKey(){return this.stack.length>0?this.stack[this.stack.length-1].type===1:!1}decodeBinary(e,r){if(e>this.maxBinLength)throw new Oi.DecodeError(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+r))throw g8;let n=this.pos+r,s=this.bytes.subarray(n,n+e);return this.pos+=r+e,s}decodeExtension(e,r){if(e>this.maxExtLength)throw new Oi.DecodeError(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);let n=this.view.getInt8(this.pos+r),s=this.decodeBinary(e,r+1);return this.extensionCodec.decode(s,n,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){let e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){let e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){let e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){let e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){let e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){let e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){let e=(0,Ya.getUint64)(this.view,this.pos);return this.pos+=8,e}readI64(){let e=(0,Ya.getInt64)(this.view,this.pos);return this.pos+=8,e}readF32(){let e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){let e=this.view.getFloat64(this.pos);return this.pos+=8,e}};Pi.Decoder=VP});var HP=E(Gs=>{"use strict";Object.defineProperty(Gs,"__esModule",{value:!0});Gs.decodeMulti=Gs.decode=Gs.defaultDecodeOptions=void 0;var y8=x_();Gs.defaultDecodeOptions={};function iNe(t,e=Gs.defaultDecodeOptions){return new y8.Decoder(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength).decode(t)}Gs.decode=iNe;function oNe(t,e=Gs.defaultDecodeOptions){return new y8.Decoder(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength).decodeMulti(t)}Gs.decodeMulti=oNe});var w8=E(Po=>{"use strict";Object.defineProperty(Po,"__esModule",{value:!0});Po.ensureAsyncIterable=Po.asyncIterableFromStream=Po.isAsyncIterable=void 0;function _8(t){return t[Symbol.asyncIterator]!=null}Po.isAsyncIterable=_8;function aNe(t){if(t==null)throw new Error("Assertion Failure: value must not be null nor undefined")}async function*v8(t){let e=t.getReader();try{for(;;){let{done:r,value:n}=await e.read();if(r)return;aNe(n),yield n}}finally{e.releaseLock()}}Po.asyncIterableFromStream=v8;function cNe(t){return _8(t)?t:v8(t)}Po.ensureAsyncIterable=cNe});var E8=E(Ws=>{"use strict";Object.defineProperty(Ws,"__esModule",{value:!0});Ws.decodeStream=Ws.decodeMultiStream=Ws.decodeArrayStream=Ws.decodeAsync=void 0;var GP=x_(),WP=w8(),N_=HP();async function lNe(t,e=N_.defaultDecodeOptions){let r=(0,WP.ensureAsyncIterable)(t);return new GP.Decoder(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength).decodeAsync(r)}Ws.decodeAsync=lNe;function uNe(t,e=N_.defaultDecodeOptions){let r=(0,WP.ensureAsyncIterable)(t);return new GP.Decoder(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength).decodeArrayStream(r)}Ws.decodeArrayStream=uNe;function b8(t,e=N_.defaultDecodeOptions){let r=(0,WP.ensureAsyncIterable)(t);return new GP.Decoder(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength).decodeStream(r)}Ws.decodeMultiStream=b8;function fNe(t,e=N_.defaultDecodeOptions){return b8(t,e)}Ws.decodeStream=fNe});var R8=E(ge=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0});ge.decodeTimestampExtension=ge.encodeTimestampExtension=ge.decodeTimestampToTimeSpec=ge.encodeTimeSpecToTimestamp=ge.encodeDateToTimeSpec=ge.EXT_TIMESTAMP=ge.ExtData=ge.ExtensionCodec=ge.Encoder=ge.DataViewIndexOutOfBoundsError=ge.DecodeError=ge.Decoder=ge.decodeStream=ge.decodeMultiStream=ge.decodeArrayStream=ge.decodeAsync=ge.decodeMulti=ge.decode=ge.encode=void 0;var dNe=h8();Object.defineProperty(ge,"encode",{enumerable:!0,get:function(){return dNe.encode}});var S8=HP();Object.defineProperty(ge,"decode",{enumerable:!0,get:function(){return S8.decode}});Object.defineProperty(ge,"decodeMulti",{enumerable:!0,get:function(){return S8.decodeMulti}});var C_=E8();Object.defineProperty(ge,"decodeAsync",{enumerable:!0,get:function(){return C_.decodeAsync}});Object.defineProperty(ge,"decodeArrayStream",{enumerable:!0,get:function(){return C_.decodeArrayStream}});Object.defineProperty(ge,"decodeMultiStream",{enumerable:!0,get:function(){return C_.decodeMultiStream}});Object.defineProperty(ge,"decodeStream",{enumerable:!0,get:function(){return C_.decodeStream}});var T8=x_();Object.defineProperty(ge,"Decoder",{enumerable:!0,get:function(){return T8.Decoder}});Object.defineProperty(ge,"DataViewIndexOutOfBoundsError",{enumerable:!0,get:function(){return T8.DataViewIndexOutOfBoundsError}});var hNe=E_();Object.defineProperty(ge,"DecodeError",{enumerable:!0,get:function(){return hNe.DecodeError}});var pNe=qP();Object.defineProperty(ge,"Encoder",{enumerable:!0,get:function(){return pNe.Encoder}});var mNe=R_();Object.defineProperty(ge,"ExtensionCodec",{enumerable:!0,get:function(){return mNe.ExtensionCodec}});var gNe=kP();Object.defineProperty(ge,"ExtData",{enumerable:!0,get:function(){return gNe.ExtData}});var nu=DP();Object.defineProperty(ge,"EXT_TIMESTAMP",{enumerable:!0,get:function(){return nu.EXT_TIMESTAMP}});Object.defineProperty(ge,"encodeDateToTimeSpec",{enumerable:!0,get:function(){return nu.encodeDateToTimeSpec}});Object.defineProperty(ge,"encodeTimeSpecToTimestamp",{enumerable:!0,get:function(){return nu.encodeTimeSpecToTimestamp}});Object.defineProperty(ge,"decodeTimestampToTimeSpec",{enumerable:!0,get:function(){return nu.decodeTimestampToTimeSpec}});Object.defineProperty(ge,"encodeTimestampExtension",{enumerable:!0,get:function(){return nu.encodeTimestampExtension}});Object.defineProperty(ge,"decodeTimestampExtension",{enumerable:!0,get:function(){return nu.decodeTimestampExtension}})});var _Ne={};U8(_Ne,{default:()=>A_});module.exports=B8(_Ne);var _r=require("obsidian");var Te=require("obsidian");var bh=require("obsidian"),f5=Mr(SH()),d5=Mr(n5()),h5=Mr(u5()),bo=Mr(require("path")),Eo=Mr(require("fs")),Ul=class{app;server=null;port;isRunning=!1;constructor(e,r){this.app=e,this.port=r}async start(){if(this.isRunning)return;let e;if(this.app.vault.adapter instanceof bh.FileSystemAdapter)e=this.app.vault.adapter.getBasePath();else{new bh.Notice("Fastify Server: Cannot determine file system path.");return}let r=this.app.plugins.plugins["slides-studio"].manifest,n=bo.default.join(e,`${r.dir}/slides_studio`),s=bo.default.join(e,`${r.dir}/lib`);this.server=(0,f5.default)(),await this.server.register(h5.default,{origin:!0}),this.server.register(d5.default,{root:[n,s,e],prefix:"/"}),this.server.get("/api/obswss",async(i,o)=>{let a=this.app.plugins.plugins["slides-studio"].settings;return{IP:a.websocketIP_Text||"localhost",PORT:parseInt(a.websocketPort_Text)||4455,PW:a.websocketPW_Text||""}}),this.server.post("/api/file/save",async(i,o)=>{let{folder:a,filename:c,data:l}=i.body;if(!a||!c||!l)return o.code(400).send({error:"Missing folder, filename, or data"});let u=bo.default.join(e,a),d=bo.default.join(u,c.endsWith(".json")?c:`${c}.json`);if(!u.startsWith(e))return o.code(403).send({error:"Access denied: Path outside vault"});if(!Eo.default.existsSync(u))try{Eo.default.mkdirSync(u,{recursive:!0})}catch{return o.code(500).send({error:"Failed to create directory"})}try{return Eo.default.writeFileSync(d,JSON.stringify(l,null,2)),{success:!0,path:d}}catch(p){return o.code(500).send({error:p.message})}}),this.server.get("/api/file/list",async(i,o)=>{let{folder:a}=i.query;if(!a)return o.code(400).send({error:"Missing folder parameter"});let c=bo.default.join(e,a);if(!c.startsWith(e))return o.code(403).send({error:"Access denied"});if(!Eo.default.existsSync(c))return[];try{return Eo.default.readdirSync(c).filter(l=>l.endsWith(".json"))}catch(l){return o.code(500).send({error:l.message})}}),this.server.get("/api/file/get",async(i,o)=>{let{folder:a,filename:c}=i.query;if(!a||!c)return o.code(400).send({error:"Missing folder or filename"});let l=bo.default.join(e,a),u=bo.default.join(l,c);if(!u.startsWith(e))return o.code(403).send({error:"Access denied"});if(!Eo.default.existsSync(u))return o.code(404).send({error:"File not found"});try{let d=Eo.default.readFileSync(u,"utf-8");return JSON.parse(d)}catch(d){return o.code(500).send({error:d.message})}});try{await this.server.listen({port:this.port,host:"127.0.0.1"}),this.isRunning=!0,console.log(`Slides Studio Server running at http://127.0.0.1:${this.port}`),new bh.Notice(`Slides Studio Server started on port ${this.port}`)}catch(i){console.error("Failed to start Fastify server",i),this.isRunning=!1}}async stop(){this.server&&(await this.server.close(),this.server=null,this.isRunning=!1)}async restart(e){await this.stop(),this.port=e,await this.start()}getUrl(){return`http://127.0.0.1:${this.port}`}};var q0=class extends Te.PluginSettingTab{plugin;constructor(e,r){super(e,r),this.plugin=r}display(){let{containerEl:e}=this;e.empty(),new Te.Setting(e).setName("Slides Studio Server").setHeading(),new Te.Setting(e).setName("Enable Internal Server").setDesc("Start a local Fastify server to host the studio view.").addToggle(n=>n.setValue(this.plugin.settings.serverEnabled).onChange(async s=>{if(this.plugin.settings.serverEnabled=s,await this.plugin.saveSettings(),s){let i=parseInt(this.plugin.settings.serverPort)||57e3;this.plugin.serverManager||(this.plugin.serverManager=new Ul(this.plugin.app,i)),this.plugin.serverManager.start()}else this.plugin.serverManager&&(this.plugin.serverManager.stop(),this.plugin.serverManager=null);this.display()})),this.plugin.settings.serverEnabled&&new Te.Setting(e).setName("Server Port").setDesc("Port for the local Fastify server serving 'slideStudioView.html'").addText(n=>{n.setValue(this.plugin.settings.serverPort).onChange(async s=>{this.plugin.settings.serverPort=s,await this.plugin.saveSettings()})}).addButton(n=>n.setButtonText("Restart Server").onClick(()=>{let s=parseInt(this.plugin.settings.serverPort);this.plugin.serverManager&&this.plugin.serverManager.restart(s)})),new Te.Setting(e).setName("OBS WebSocket Server").setHeading(),new Te.Setting(e).setName("OBS WebSocket Server IP").setDesc("Enter the IP address or 'localhost'").addText(n=>{n.setValue(this.plugin.settings.websocketIP_Text).onChange(s=>{this.plugin.settings.websocketIP_Text=s,this.plugin.saveSettings()})}),new Te.Setting(e).setName("OBS WebSocket Server Port").addText(n=>{n.setValue(this.plugin.settings.websocketPort_Text).onChange(s=>{this.plugin.settings.websocketPort_Text=s,this.plugin.saveSettings()})}),new Te.Setting(e).setName("OBS WebSocket Server Password").addText(n=>{n.inputEl.type="password",n.setValue(this.plugin.settings.websocketPW_Text).onChange(s=>{this.plugin.settings.websocketPW_Text=s,this.plugin.saveSettings()})}),new Te.Setting(e).setName("OBS Launch Parameters").setHeading().setDesc("Open OBS with these options."),Te.Platform.isMacOS&&new Te.Setting(e).setName("Name").setDesc("Enter 'OBS' or a custom name").addText(n=>{n.setValue(this.plugin.settings.obsAppName_Text).onChange(s=>{this.plugin.settings.obsAppName_Text=s,this.plugin.saveSettings()})}),Te.Platform.isWin&&(new Te.Setting(e).setName("Name").setDesc("Enter 'obs64.exe' or a custom name").addText(n=>{n.setValue(this.plugin.settings.obsAppName_Text).onChange(s=>{this.plugin.settings.obsAppName_Text=s,this.plugin.saveSettings()})}),new Te.Setting(e).setName("Path to OBS app").addText(n=>{n.setValue(this.plugin.settings.obsAppPath_Text).onChange(s=>{this.plugin.settings.obsAppPath_Text=s,this.plugin.saveSettings()})})),new Te.Setting(e).setName("Collection").addText(n=>{n.setValue(this.plugin.settings.obsCollection_Text).onChange(s=>{this.plugin.settings.obsCollection_Text=s,this.plugin.saveSettings()})});let r=this.app.vault.adapter.basePath;if(r+=`/${this.app.plugins.plugins["slides-studio"].manifest.dir}/obs_collections/SlidesStudio.json`,r=Te.Platform.isWin?r.replace(/\//g,"\\"):r,new Te.Setting(e).setName("Slide Studio Collection").setDesc("Copy the path to the Slide Studio Collection, and Import the collection in OBS").addText(n=>{n.setValue(r).setDisabled(!0)}),new Te.Setting(e).setName("OBS Browser Source Debug Port").setDesc("Enter a Port for the Remote Debugger, or leave blank to skip this option").addText(n=>{n.setValue(this.plugin.settings.obsDebugPort_Text).onChange(s=>{this.plugin.settings.obsDebugPort_Text=s,this.plugin.saveSettings()})}),new Te.Setting(e).setName("Open OBS").addButton(n=>{n.setButtonText("Launch").onClick(()=>{this.app.commands.executeCommandById("slides-studio:open-obs")})}),new Te.Setting(e).setName("Connect to OBS WebSocket Server").addButton(n=>{let s=this.plugin.isObsConnected;n.setButtonText(s?"Connected":"Connect").onClick(()=>{this.app.commands.executeCommandById("slides-studio:connect-to-obs-websocket"),setTimeout(()=>this.display(),1e3)}),s&&(n.setCta(),n.buttonEl.style.backgroundColor="green",n.buttonEl.style.borderColor="green",n.buttonEl.style.color="white")}),this.plugin.isObsConnected)e.createEl("h2",{text:"OSC Devices"}),e.createEl("p",{text:"Add as many OSC devices as needed."}),this.plugin.settings.oscDevices.forEach((n,s)=>{let i=e.createDiv();i.style.border="1px solid var(--background-modifier-border)",i.style.padding="10px",i.style.marginBottom="10px",i.style.borderRadius="5px",new Te.Setting(i).setName(`Device ${s+1}`).setHeading(),new Te.Setting(i).setName("OSC Device Name").setDesc("Unique device name (used in OBS tags)").addText(o=>o.setValue(n.name).onChange(async a=>{this.plugin.settings.oscDevices[s].name=a,await this.plugin.saveSettings()})).addButton(o=>o.setButtonText("Connect This Device").onClick(()=>{this.plugin.oscManager?this.plugin.oscManager.connectDevice(this.plugin.settings.oscDevices[s]):new Te.Notice("Plugin not fully loaded")})),new Te.Setting(i).setName("OSC IP address").setDesc("Enter the IP address or 'localhost'").addText(o=>o.setValue(n.ip).onChange(async a=>{this.plugin.settings.oscDevices[s].ip=a,await this.plugin.saveSettings()})),new Te.Setting(i).setName("OSC Incoming Message Port").addText(o=>o.setValue(n.inPort).onChange(async a=>{this.plugin.settings.oscDevices[s].inPort=a,await this.plugin.saveSettings()})),new Te.Setting(i).setName("OSC Outgoing Message Port").addText(o=>o.setValue(n.outPort).onChange(async a=>{this.plugin.settings.oscDevices[s].outPort=a,await this.plugin.saveSettings()})),new Te.Setting(i).addButton(o=>o.setButtonText("Remove Device").setWarning().onClick(async()=>{this.plugin.oscManager&&this.plugin.oscManager.disconnectDevice(n.name),this.plugin.settings.oscDevices.splice(s,1),await this.plugin.saveSettings(),this.display()}))}),new Te.Setting(e).setName("Add New OSC Device").addButton(n=>n.setButtonText("Add Device").setCta().onClick(async()=>{this.plugin.settings.oscDevices.push({name:"NewDevice",ip:"127.0.0.1",inPort:"8000",outPort:"9000"}),await this.plugin.saveSettings(),this.display()}));else{let n=e.createDiv();n.style.padding="20px",n.style.border="1px dashed var(--text-muted)",n.style.textAlign="center",n.style.color="var(--text-muted)",n.createSpan({text:"Please connect to the OBS WebSocket Server (above) to configure OSC/MIDI devices."})}if(this.plugin.isObsConnected&&(e.createEl("h2",{text:"MIDI Devices"}),e.createEl("p",{text:"Add MIDI inputs and outputs."}),this.plugin.midiManager)){let n=this.plugin.midiManager.getInputs(),s=this.plugin.midiManager.getOutputs();this.plugin.settings.midiDevices.forEach((i,o)=>{let a=e.createDiv();a.style.border="1px solid var(--background-modifier-border)",a.style.padding="10px",a.style.marginBottom="10px",a.style.borderRadius="5px",new Te.Setting(a).setName(`MIDI Device ${o+1}`).setHeading(),new Te.Setting(a).setName("Virtual Name").setDesc("Alias used for OBS tags").addText(c=>c.setValue(i.name).onChange(async l=>{this.plugin.settings.midiDevices[o].name=l,await this.plugin.saveSettings()})).addButton(c=>c.setButtonText("Connect").onClick(()=>{this.plugin.midiManager.connectDevice(this.plugin.settings.midiDevices[o])})),new Te.Setting(a).setName("Input Device").setDesc("Select the hardware source").addDropdown(c=>{c.addOption("","Select Input"),n.forEach(l=>c.addOption(l,l)),c.setValue(i.inputName),c.onChange(async l=>{this.plugin.settings.midiDevices[o].inputName=l,await this.plugin.saveSettings()})}),new Te.Setting(a).setName("Output Device").setDesc("Select the hardware destination (for sending from OBS)").addDropdown(c=>{c.addOption("","Select Output"),s.forEach(l=>c.addOption(l,l)),c.setValue(i.outputName),c.onChange(async l=>{this.plugin.settings.midiDevices[o].outputName=l,await this.plugin.saveSettings()})}),new Te.Setting(a).addButton(c=>c.setButtonText("Remove MIDI Device").setWarning().onClick(async()=>{this.plugin.midiManager&&this.plugin.midiManager.disconnectDevice(i),this.plugin.settings.midiDevices.splice(o,1),await this.plugin.saveSettings(),this.display()}))}),new Te.Setting(e).setName("Add New MIDI Device").addButton(i=>i.setButtonText("Add Device").setCta().onClick(async()=>{this.plugin.settings.midiDevices.push({name:"MyMidiDevice",inputName:"",outputName:""}),await this.plugin.saveSettings(),this.display()}))}}};var Pt=require("obsidian"),Eh="slides-tag-view",L0=class extends Pt.ItemView{constructor(e){super(e)}getViewType(){return Eh}getDisplayText(){return"Slide tags"}getIcon(){return"aperture"}insertTag(e){let r=this.app.workspace.getMostRecentLeaf(),n=this.app.workspace.getLeafById(r?.id);n?(this.app.workspace.setActiveLeaf(n,!0,!0),r?.setEphemeralState(r?.getEphemeralState()),this.app.workspace.activeEditor?.editor?.replaceSelection(`<!-- slide ${e} -->
`)):new Pt.Notice("No active markdown editor found.")}async onOpen(){let e=this.contentEl;e.style.overflowY="auto",e.style.height="100%",e.empty(),e.createDiv("Header"),new Pt.Setting(e).setName("Open Slides Studio").setHeading().setDesc("Open the Slides Studio Page in a new view").addButton(n=>{n.setButtonText("Open").onClick(()=>{this.app.commands.executeCommandById("slides-studio:open-slide-studio-webview")}).setCta()}),new Pt.Setting(e).setName("Add Tags").setHeading().setDesc("Use the buttons below to insert tags into notes.  Tags will be inserted at the current cursor position").addButton(n=>{n.setButtonText("refresh view").onClick(async()=>{await this.addTagButtons(r)})});let r=e.createDiv("tags");this.addTagButtons(r),new Pt.Setting(e).setName("Slide Id").setHeading().setDesc("Add an Id tag").addButton(n=>{n.setButtonText("Add").onClick(()=>{let s=this.app.workspace.getMostRecentLeaf(),i=this.app.workspace.getLeafById(s?.id);this.app.workspace.setActiveLeaf(i,!0,!0),s?.setEphemeralState(s?.getEphemeralState()),this.app.workspace.activeEditor?.editor?.replaceSelection(`<!-- slide data-id="${Date.now()}" -->
`),this.app.commands.executeCommandById("slides-studio:add-slide-id")}).setCta()})}async addTagButtons(e){e.empty(),e.createEl("div",{text:"Fetching OBS Data...",attr:{style:"padding: 10px; color: var(--text-muted); text-align: center;"}});let r=this.app.plugins.plugins["slides-studio"];r&&typeof r.getObsTags=="function"?await r.getObsTags():console.warn("Slides Studio: getObsTags method not found on plugin instance."),e.empty();let n=Array.from(new Set(this.app.plugins.plugins["slides-studio"].settings.scene_tags));new Pt.Setting(e).setName("Scenes").setHeading(),n.forEach(l=>{new Pt.Setting(e).setName(l).addButton(u=>{u.setButtonText("Add").setCta().onClick(()=>{this.insertTag(`data-scene="${l}"`)})})});let s=Array.from(new Set(this.app.plugins.plugins["slides-studio"].settings.slide_tags));new Pt.Setting(e).setName("Slides Position").setHeading(),s.forEach(l=>{new Pt.Setting(e).setName(l).addButton(u=>{u.setButtonText("Add").setCta().onClick(()=>{this.insertTag(`data-slide-position="${l}"`)})})});let i=Array.from(new Set(this.app.plugins.plugins["slides-studio"].settings.camera_tags));new Pt.Setting(e).setName("Camera Position").setHeading(),i.forEach(l=>{new Pt.Setting(e).setName(l).addButton(u=>{u.setButtonText("Add").setCta().onClick(()=>{this.insertTag(`data-camera-position="${l}"`)})})});let o=Array.from(new Set(this.app.plugins.plugins["slides-studio"].settings.camera_shape_tags));new Pt.Setting(e).setName("Camera Shapes").setHeading(),o.forEach(l=>{new Pt.Setting(e).setName(l).addButton(u=>{u.setButtonText("Add").setCta().onClick(()=>{this.insertTag(`data-camera-shape="${l}"`)})})});let a=this.app.plugins.plugins["slides-studio"].settings.user_tags,c=new Set(a);new Pt.Setting(e).setName("User Tags").setHeading().setClass("slide-studio-new-user-tag").setDesc("data-user-tag={tag value}"),new Pt.Setting(e).setName("Create a new tag").addText(l=>{l.setPlaceholder("key"),l.onChange(u=>{this.app.plugins.plugins["slides-studio"].settings.newTagKey=u;let d=document.querySelector(".slide-studio-new-user-tag"),p=this.app.plugins.plugins["slides-studio"].settings.newTagValue;console.log(p),d&&(d.querySelector(".setting-item-description").innerHTML=`data-${u.replace(" ","-")} : ${p.replace(" ","-")}`)})}).addText(l=>{l.setPlaceholder("value"),l.onChange(u=>{this.app.plugins.plugins["slides-studio"].settings.newTagValue=u;let d=document.querySelector(".slide-studio-new-user-tag"),p=this.app.plugins.plugins["slides-studio"].settings.newTagKey;console.log(p),d&&(d.querySelector(".setting-item-description").innerHTML=`data-${p.replace(" ","-")} : ${u}`)})}).addButton(l=>{l.setButtonText("Create Tag").onClick(()=>{let u=`${this.app.plugins.plugins["slides-studio"].settings.newTagKey.replace(" ","-")}:${this.app.plugins.plugins["slides-studio"].settings.newTagValue}`;c.add(u),this.app.plugins.plugins["slides-studio"].settings.user_tags=Array.from(c),this.app.plugins.plugins["slides-studio"].saveSettings(),this.onOpen()})}),a.forEach(l=>{new Pt.Setting(e).setName(l).addButton(u=>{u.setButtonText("Add").setCta().onClick(()=>{let d=l.split(":");this.insertTag(`data-${d[0]}="${d[1]}"`)})}).addButton(u=>{u.setButtonText("\u{1F6AB}").onClick(()=>{c.delete(l),this.app.plugins.plugins["slides-studio"].settings.user_tags=Array.from(c),this.app.plugins.plugins["slides-studio"].saveSettings(),new Pt.Notice(`deleted user tag ${l}`),this.onOpen()})})})}async onClose(){}};var p5=require("obsidian"),U0="slides-studio-webview",F0=class extends p5.ItemView{plugin;constructor(e,r){super(e),this.plugin=r}getViewType(){return U0}getDisplayText(){return"Slides Studio Live"}getIcon(){return"presentation"}async onOpen(){let e=this.containerEl.children[1];e.empty(),e.addClass("slides-studio-webview-container");let r=e.createEl("iframe");r.setAttribute("allow","autoplay"),r.style.width="100%",r.style.height="100%",r.style.border="none";let n=this.plugin.getServerUrl();n?r.src=n:(r.src="about:blank",e.createEl("h3",{text:"Server not running. Enable it in settings."}))}async onClose(){}};var m5={s:"string",f:"float",i:"integer",b:"blob"},Bl=class{constructor(e,r){this.type=e,this.value=r}},zO=class{constructor(e,...r){this.oscType="message",this.address=e,this.args=r}append(e){let r;switch(typeof e){case"object":if(e instanceof Array)e.forEach(n=>this.append(n));else if(e.type)m5[e.type]&&(e.type=m5[e.type]),this.args.push(e);else throw new Error(`don't know how to encode object ${e}`);break;case"number":Math.floor(e)===e?r=new Bl("integer",e):r=new Bl("float",e);break;case"string":r=new Bl("string",e);break;case"boolean":r=new Bl("boolean",e);break;default:throw new Error(`don't know how to encode ${e}`)}r&&this.args.push(r)}},Vl=zO;var T5=require("dgram"),R5=require("events");var w5=Mr(GO(),1);function b5(t){let e=[];return e.push(t.address),t.args.forEach(r=>{e.push(r.value)}),e}function E5(t){return t.elements=t.elements.map(e=>{if(e.oscType==="bundle")return E5(e);if(e.oscType==="message")return b5(e)}),t}function qOe(t){let e=(0,w5.fromBuffer)(t);if(e.oscType==="bundle")return E5(e);if(e.oscType==="message")return b5(e);throw new Error("Malformed Packet")}var S5=qOe;var WO=class extends R5.EventEmitter{constructor(e,r="127.0.0.1",n){super(),typeof r=="function"&&(n=r,r="127.0.0.1"),n||(n=()=>{});let s;this.port=e,this.host=r,this._sock=(0,T5.createSocket)({type:"udp4",reuseAddr:!0}),this._sock.bind(e,r),this._sock.on("listening",()=>{this.emit("listening"),n()}),this._sock.on("message",(i,o)=>{try{s=S5(i)}catch(a){let c=new Error(`can't decode incoming message: ${a.message}`);this.emit("error",c,o);return}s.elements?this.emit("bundle",s,o):s&&(this.emit("message",s,o),this.emit(s[0],s,o))})}close(e){this._sock.close(e)}},KO=WO;var O5=require("dgram"),P5=Mr(GO(),1);var{toBuffer:$5}=P5.default,JO=class{constructor(e,r){this.host=e,this.port=r,this._sock=(0,O5.createSocket)({type:"udp4",reuseAddr:!0})}close(e){this._sock.close(e)}send(...e){let r=e[0],n;typeof e[e.length-1]=="function"?n=e.pop():n=()=>{},r instanceof Array&&(r={address:r[0],args:r.splice(1)});let s,i;try{switch(typeof r){case"object":i=$5(r),this._sock.send(i,0,i.length,this.port,this.host,n);break;case"string":s=new Vl(e[0]);for(let o=1;o<e.length;o++)s.append(e[o]);i=$5(s),this._sock.send(i,0,i.length,this.port,this.host,n);break;default:throw new TypeError("That Message Just Doesn't Seem Right")}}catch(o){if(o.code!=="ERR_SOCKET_DGRAM_NOT_RUNNING")throw o;let a=new ReferenceError("Cannot send message on closed socket.");a.code=o.code,n(a)}}},YO=JO;var z0=require("obsidian"),H0=class{activeOscDevices=new Map;onOscMessageReceived;constructor(e){this.onOscMessageReceived=e}connectDevice(e){this.disconnectDevice(e.name),new z0.Notice(`Starting OSC: ${e.name}`);try{let r=new YO(e.ip,parseInt(e.outPort)),n=new KO(parseInt(e.inPort),"0.0.0.0");n.on("listening",()=>{new z0.Notice(`OSC Server ${e.name} is listening on ${e.inPort}.`)}),n.on("message",s=>{console.log(`Message from ${e.name}: ${s}`),this.onOscMessageReceived&&this.onOscMessageReceived(e.name,s)}),this.activeOscDevices.set(e.name,{client:r,server:n})}catch(r){console.error(`Failed to start OSC device ${e.name}`,r),new z0.Notice(`Failed to start OSC: ${e.name}`)}}disconnectDevice(e){if(this.activeOscDevices.has(e)){let r=this.activeOscDevices.get(e);try{r.client.close()}catch{}try{r.server.close()}catch{}this.activeOscDevices.delete(e)}}disconnectAll(){this.activeOscDevices.forEach((e,r)=>{try{e.client.close()}catch{}try{e.server.close()}catch{}}),this.activeOscDevices.clear()}sendMessage(e,r){let n=this.activeOscDevices.get(e);n?(console.log(`Sending to ${e}`),n.client.send(r,s=>{s&&console.error(`Error sending to ${e}:`,s)})):console.warn(`OSC Device '${e}' not connected or found.`)}};var an=class{constructor(e=!1){this.eventMap={},this.eventsSuspended=e==!0}addListener(e,r,n={}){if(typeof e=="string"&&e.length<1||e instanceof String&&e.length<1||typeof e!="string"&&!(e instanceof String)&&e!==an.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(typeof r!="function")throw new TypeError("The callback must be a function.");let s=new G0(e,this,r,n);return this.eventMap[e]||(this.eventMap[e]=[]),n.prepend?this.eventMap[e].unshift(s):this.eventMap[e].push(s),s}addOneTimeListener(e,r,n={}){n.remaining=1,this.addListener(e,r,n)}static get ANY_EVENT(){return Symbol.for("Any event")}hasListener(e,r){return e===void 0?this.eventMap[an.ANY_EVENT]&&this.eventMap[an.ANY_EVENT].length>0?!0:Object.entries(this.eventMap).some(([,n])=>n.length>0):this.eventMap[e]&&this.eventMap[e].length>0?r instanceof G0?this.eventMap[e].filter(s=>s===r).length>0:typeof r=="function"?this.eventMap[e].filter(s=>s.callback===r).length>0:r==null:!1}get eventNames(){return Object.keys(this.eventMap)}getListeners(e){return this.eventMap[e]||[]}suspendEvent(e){this.getListeners(e).forEach(r=>{r.suspended=!0})}unsuspendEvent(e){this.getListeners(e).forEach(r=>{r.suspended=!1})}getListenerCount(e){return this.getListeners(e).length}emit(e,...r){if(typeof e!="string"&&!(e instanceof String))throw new TypeError("The 'event' parameter must be a string.");if(this.eventsSuspended)return;let n=[],s=this.eventMap[an.ANY_EVENT]||[];return this.eventMap[e]&&(s=s.concat(this.eventMap[e])),s.forEach(i=>{if(i.suspended)return;let o=[...r];Array.isArray(i.arguments)&&(o=o.concat(i.arguments)),i.remaining>0&&(n.push(i.callback.apply(i.context,o)),i.count++),--i.remaining<1&&i.remove()}),n}removeListener(e,r,n={}){if(e===void 0){this.eventMap={};return}else if(!this.eventMap[e])return;let s=this.eventMap[e].filter(i=>r&&i.callback!==r||n.remaining&&n.remaining!==i.remaining||n.context&&n.context!==i.context);s.length?this.eventMap[e]=s:delete this.eventMap[e]}async waitFor(e,r={}){return r.duration=parseInt(r.duration),(isNaN(r.duration)||r.duration<=0)&&(r.duration=1/0),new Promise((n,s)=>{let i,o=this.addListener(e,()=>{clearTimeout(i),n()},{remaining:1});r.duration!==1/0&&(i=setTimeout(()=>{o.remove(),s("The duration expired before the event was emitted.")},r.duration))})}get eventCount(){return Object.keys(this.eventMap).length}},G0=class{constructor(e,r,n,s={}){if(typeof e!="string"&&!(e instanceof String)&&e!==an.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(!r)throw new ReferenceError("The 'target' parameter is mandatory.");if(typeof n!="function")throw new TypeError("The 'callback' must be a function.");s.arguments!==void 0&&!Array.isArray(s.arguments)&&(s.arguments=[s.arguments]),s=Object.assign({context:r,remaining:1/0,arguments:void 0,duration:1/0},s),s.duration!==1/0&&setTimeout(()=>this.remove(),s.duration),this.arguments=s.arguments,this.callback=n,this.context=s.context,this.count=0,this.event=e,this.remaining=parseInt(s.remaining)>=1?parseInt(s.remaining):1/0,this.suspended=!1,this.target=r}remove(){this.target.removeListener(this.event,this.callback,{context:this.context,remaining:this.remaining})}};var I=class{static get MIDI_CHANNEL_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MESSAGES enum instead."),I.CHANNEL_MESSAGES}static get CHANNEL_MESSAGES(){return{noteoff:8,noteon:9,keyaftertouch:10,controlchange:11,programchange:12,channelaftertouch:13,pitchbend:14}}static get CHANNEL_NUMBERS(){return[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get MIDI_CHANNEL_NUMBERS(){return this.validation&&console.warn("The MIDI_CHANNEL_NUMBERS array has been deprecated. Use the Enumerations.CHANNEL_NUMBERS array instead."),[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get CHANNEL_MODE_MESSAGES(){return{allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MODE_MESSAGES enum instead."),I.CHANNEL_MODE_MESSAGES}static get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been deprecated. Use the Enumerations.CONTROL_CHANGE_MESSAGES array instead."),{bankselectcoarse:0,modulationwheelcoarse:1,breathcontrollercoarse:2,controller3:3,footcontrollercoarse:4,portamentotimecoarse:5,dataentrycoarse:6,volumecoarse:7,balancecoarse:8,controller9:9,pancoarse:10,expressioncoarse:11,effectcontrol1coarse:12,effectcontrol2coarse:13,controller14:14,controller15:15,generalpurposeslider1:16,generalpurposeslider2:17,generalpurposeslider3:18,generalpurposeslider4:19,controller20:20,controller21:21,controller22:22,controller23:23,controller24:24,controller25:25,controller26:26,controller27:27,controller28:28,controller29:29,controller30:30,controller31:31,bankselectfine:32,modulationwheelfine:33,breathcontrollerfine:34,controller35:35,footcontrollerfine:36,portamentotimefine:37,dataentryfine:38,volumefine:39,balancefine:40,controller41:41,panfine:42,expressionfine:43,effectcontrol1fine:44,effectcontrol2fine:45,controller46:46,controller47:47,controller48:48,controller49:49,controller50:50,controller51:51,controller52:52,controller53:53,controller54:54,controller55:55,controller56:56,controller57:57,controller58:58,controller59:59,controller60:60,controller61:61,controller62:62,controller63:63,holdpedal:64,portamento:65,sustenutopedal:66,softpedal:67,legatopedal:68,hold2pedal:69,soundvariation:70,resonance:71,soundreleasetime:72,soundattacktime:73,brightness:74,soundcontrol6:75,soundcontrol7:76,soundcontrol8:77,soundcontrol9:78,soundcontrol10:79,generalpurposebutton1:80,generalpurposebutton2:81,generalpurposebutton3:82,generalpurposebutton4:83,controller84:84,controller85:85,controller86:86,controller87:87,controller88:88,controller89:89,controller90:90,reverblevel:91,tremololevel:92,choruslevel:93,celestelevel:94,phaserlevel:95,databuttonincrement:96,databuttondecrement:97,nonregisteredparametercoarse:98,nonregisteredparameterfine:99,registeredparametercoarse:100,registeredparameterfine:101,controller102:102,controller103:103,controller104:104,controller105:105,controller106:106,controller107:107,controller108:108,controller109:109,controller110:110,controller111:111,controller112:112,controller113:113,controller114:114,controller115:115,controller116:116,controller117:117,controller118:118,controller119:119,allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get CONTROL_CHANGE_MESSAGES(){return[{number:0,name:"bankselectcoarse",description:"Bank Select (Coarse)",position:"msb"},{number:1,name:"modulationwheelcoarse",description:"Modulation Wheel (Coarse)",position:"msb"},{number:2,name:"breathcontrollercoarse",description:"Breath Controller (Coarse)",position:"msb"},{number:3,name:"controller3",description:"Undefined",position:"msb"},{number:4,name:"footcontrollercoarse",description:"Foot Controller (Coarse)",position:"msb"},{number:5,name:"portamentotimecoarse",description:"Portamento Time (Coarse)",position:"msb"},{number:6,name:"dataentrycoarse",description:"Data Entry (Coarse)",position:"msb"},{number:7,name:"volumecoarse",description:"Channel Volume (Coarse)",position:"msb"},{number:8,name:"balancecoarse",description:"Balance (Coarse)",position:"msb"},{number:9,name:"controller9",description:"Controller 9 (Coarse)",position:"msb"},{number:10,name:"pancoarse",description:"Pan (Coarse)",position:"msb"},{number:11,name:"expressioncoarse",description:"Expression Controller (Coarse)",position:"msb"},{number:12,name:"effectcontrol1coarse",description:"Effect Control 1 (Coarse)",position:"msb"},{number:13,name:"effectcontrol2coarse",description:"Effect Control 2 (Coarse)",position:"msb"},{number:14,name:"controller14",description:"Undefined",position:"msb"},{number:15,name:"controller15",description:"Undefined",position:"msb"},{number:16,name:"generalpurposecontroller1",description:"General Purpose Controller 1 (Coarse)",position:"msb"},{number:17,name:"generalpurposecontroller2",description:"General Purpose Controller 2 (Coarse)",position:"msb"},{number:18,name:"generalpurposecontroller3",description:"General Purpose Controller 3 (Coarse)",position:"msb"},{number:19,name:"generalpurposecontroller4",description:"General Purpose Controller 4 (Coarse)",position:"msb"},{number:20,name:"controller20",description:"Undefined",position:"msb"},{number:21,name:"controller21",description:"Undefined",position:"msb"},{number:22,name:"controller22",description:"Undefined",position:"msb"},{number:23,name:"controller23",description:"Undefined",position:"msb"},{number:24,name:"controller24",description:"Undefined",position:"msb"},{number:25,name:"controller25",description:"Undefined",position:"msb"},{number:26,name:"controller26",description:"Undefined",position:"msb"},{number:27,name:"controller27",description:"Undefined",position:"msb"},{number:28,name:"controller28",description:"Undefined",position:"msb"},{number:29,name:"controller29",description:"Undefined",position:"msb"},{number:30,name:"controller30",description:"Undefined",position:"msb"},{number:31,name:"controller31",description:"Undefined",position:"msb"},{number:32,name:"bankselectfine",description:"Bank Select (Fine)",position:"lsb"},{number:33,name:"modulationwheelfine",description:"Modulation Wheel (Fine)",position:"lsb"},{number:34,name:"breathcontrollerfine",description:"Breath Controller (Fine)",position:"lsb"},{number:35,name:"controller35",description:"Undefined",position:"lsb"},{number:36,name:"footcontrollerfine",description:"Foot Controller (Fine)",position:"lsb"},{number:37,name:"portamentotimefine",description:"Portamento Time (Fine)",position:"lsb"},{number:38,name:"dataentryfine",description:"Data Entry (Fine)",position:"lsb"},{number:39,name:"channelvolumefine",description:"Channel Volume (Fine)",position:"lsb"},{number:40,name:"balancefine",description:"Balance (Fine)",position:"lsb"},{number:41,name:"controller41",description:"Undefined",position:"lsb"},{number:42,name:"panfine",description:"Pan (Fine)",position:"lsb"},{number:43,name:"expressionfine",description:"Expression Controller (Fine)",position:"lsb"},{number:44,name:"effectcontrol1fine",description:"Effect control 1 (Fine)",position:"lsb"},{number:45,name:"effectcontrol2fine",description:"Effect control 2 (Fine)",position:"lsb"},{number:46,name:"controller46",description:"Undefined",position:"lsb"},{number:47,name:"controller47",description:"Undefined",position:"lsb"},{number:48,name:"controller48",description:"General Purpose Controller 1 (Fine)",position:"lsb"},{number:49,name:"controller49",description:"General Purpose Controller 2 (Fine)",position:"lsb"},{number:50,name:"controller50",description:"General Purpose Controller 3 (Fine)",position:"lsb"},{number:51,name:"controller51",description:"General Purpose Controller 4 (Fine)",position:"lsb"},{number:52,name:"controller52",description:"Undefined",position:"lsb"},{number:53,name:"controller53",description:"Undefined",position:"lsb"},{number:54,name:"controller54",description:"Undefined",position:"lsb"},{number:55,name:"controller55",description:"Undefined",position:"lsb"},{number:56,name:"controller56",description:"Undefined",position:"lsb"},{number:57,name:"controller57",description:"Undefined",position:"lsb"},{number:58,name:"controller58",description:"Undefined",position:"lsb"},{number:59,name:"controller59",description:"Undefined",position:"lsb"},{number:60,name:"controller60",description:"Undefined",position:"lsb"},{number:61,name:"controller61",description:"Undefined",position:"lsb"},{number:62,name:"controller62",description:"Undefined",position:"lsb"},{number:63,name:"controller63",description:"Undefined",position:"lsb"},{number:64,name:"damperpedal",description:"Damper Pedal On/Off"},{number:65,name:"portamento",description:"Portamento On/Off"},{number:66,name:"sostenuto",description:"Sostenuto On/Off"},{number:67,name:"softpedal",description:"Soft Pedal On/Off"},{number:68,name:"legatopedal",description:"Legato Pedal On/Off"},{number:69,name:"hold2",description:"Hold 2 On/Off"},{number:70,name:"soundvariation",description:"Sound Variation",position:"lsb"},{number:71,name:"resonance",description:"Resonance",position:"lsb"},{number:72,name:"releasetime",description:"Release Time",position:"lsb"},{number:73,name:"attacktime",description:"Attack Time",position:"lsb"},{number:74,name:"brightness",description:"Brightness",position:"lsb"},{number:75,name:"decaytime",description:"Decay Time",position:"lsb"},{number:76,name:"vibratorate",description:"Vibrato Rate",position:"lsb"},{number:77,name:"vibratodepth",description:"Vibrato Depth",position:"lsb"},{number:78,name:"vibratodelay",description:"Vibrato Delay",position:"lsb"},{number:79,name:"controller79",description:"Undefined",position:"lsb"},{number:80,name:"generalpurposecontroller5",description:"General Purpose Controller 5",position:"lsb"},{number:81,name:"generalpurposecontroller6",description:"General Purpose Controller 6",position:"lsb"},{number:82,name:"generalpurposecontroller7",description:"General Purpose Controller 7",position:"lsb"},{number:83,name:"generalpurposecontroller8",description:"General Purpose Controller 8",position:"lsb"},{number:84,name:"portamentocontrol",description:"Portamento Control",position:"lsb"},{number:85,name:"controller85",description:"Undefined"},{number:86,name:"controller86",description:"Undefined"},{number:87,name:"controller87",description:"Undefined"},{number:88,name:"highresolutionvelocityprefix",description:"High Resolution Velocity Prefix",position:"lsb"},{number:89,name:"controller89",description:"Undefined"},{number:90,name:"controller90",description:"Undefined"},{number:91,name:"effect1depth",description:"Effects 1 Depth (Reverb Send Level)"},{number:92,name:"effect2depth",description:"Effects 2 Depth"},{number:93,name:"effect3depth",description:"Effects 3 Depth (Chorus Send Level)"},{number:94,name:"effect4depth",description:"Effects 4 Depth"},{number:95,name:"effect5depth",description:"Effects 5 Depth"},{number:96,name:"dataincrement",description:"Data Increment"},{number:97,name:"datadecrement",description:"Data Decrement"},{number:98,name:"nonregisteredparameterfine",description:"Non-Registered Parameter Number (Fine)",position:"lsb"},{number:99,name:"nonregisteredparametercoarse",description:"Non-Registered Parameter Number (Coarse)",position:"msb"},{number:100,name:"registeredparameterfine",description:"Registered Parameter Number (Fine)",position:"lsb"},{number:101,name:"registeredparametercoarse",description:"Registered Parameter Number (Coarse)",position:"msb"},{number:102,name:"controller102",description:"Undefined"},{number:103,name:"controller103",description:"Undefined"},{number:104,name:"controller104",description:"Undefined"},{number:105,name:"controller105",description:"Undefined"},{number:106,name:"controller106",description:"Undefined"},{number:107,name:"controller107",description:"Undefined"},{number:108,name:"controller108",description:"Undefined"},{number:109,name:"controller109",description:"Undefined"},{number:110,name:"controller110",description:"Undefined"},{number:111,name:"controller111",description:"Undefined"},{number:112,name:"controller112",description:"Undefined"},{number:113,name:"controller113",description:"Undefined"},{number:114,name:"controller114",description:"Undefined"},{number:115,name:"controller115",description:"Undefined"},{number:116,name:"controller116",description:"Undefined"},{number:117,name:"controller117",description:"Undefined"},{number:118,name:"controller118",description:"Undefined"},{number:119,name:"controller119",description:"Undefined"},{number:120,name:"allsoundoff",description:"All Sound Off"},{number:121,name:"resetallcontrollers",description:"Reset All Controllers"},{number:122,name:"localcontrol",description:"Local Control On/Off"},{number:123,name:"allnotesoff",description:"All Notes Off"},{number:124,name:"omnimodeoff",description:"Omni Mode Off"},{number:125,name:"omnimodeon",description:"Omni Mode On"},{number:126,name:"monomodeon",description:"Mono Mode On"},{number:127,name:"polymodeon",description:"Poly Mode On"}]}static get REGISTERED_PARAMETERS(){return{pitchbendrange:[0,0],channelfinetuning:[0,1],channelcoarsetuning:[0,2],tuningprogram:[0,3],tuningbank:[0,4],modulationrange:[0,5],azimuthangle:[61,0],elevationangle:[61,1],gain:[61,2],distanceratio:[61,3],maximumdistance:[61,4],maximumdistancegain:[61,5],referencedistanceratio:[61,6],panspreadangle:[61,7],rollangle:[61,8]}}static get MIDI_REGISTERED_PARAMETERS(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETERS enum has been deprecated. Use the Enumerations.REGISTERED_PARAMETERS enum instead."),I.MIDI_REGISTERED_PARAMETERS}static get SYSTEM_MESSAGES(){return{sysex:240,timecode:241,songposition:242,songselect:243,tunerequest:246,tuningrequest:246,sysexend:247,clock:248,start:250,continue:251,stop:252,activesensing:254,reset:255,midimessage:0,unknownsystemmessage:-1}}static get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been deprecated. Use the Enumerations.SYSTEM_MESSAGES enum instead."),I.SYSTEM_MESSAGES}static get CHANNEL_EVENTS(){return["noteoff","controlchange","noteon","keyaftertouch","programchange","channelaftertouch","pitchbend","allnotesoff","allsoundoff","localcontrol","monomode","omnimode","resetallcontrollers","nrpn","nrpn-dataentrycoarse","nrpn-dataentryfine","nrpn-dataincrement","nrpn-datadecrement","rpn","rpn-dataentrycoarse","rpn-dataentryfine","rpn-dataincrement","rpn-datadecrement","nrpn-databuttonincrement","nrpn-databuttondecrement","rpn-databuttonincrement","rpn-databuttondecrement"]}};var So=class{constructor(e,r={}){this.duration=j.defaults.note.duration,this.attack=j.defaults.note.attack,this.release=j.defaults.note.release,r.duration!=null&&(this.duration=r.duration),r.attack!=null&&(this.attack=r.attack),r.rawAttack!=null&&(this.attack=U.from7bitToFloat(r.rawAttack)),r.release!=null&&(this.release=r.release),r.rawRelease!=null&&(this.release=U.from7bitToFloat(r.rawRelease)),Number.isInteger(e)?this.identifier=U.toNoteIdentifier(e):this.identifier=e}get identifier(){return this._name+(this._accidental||"")+this._octave}set identifier(e){let r=U.getNoteDetails(e);if(j.validation&&!e)throw new Error("Invalid note identifier");this._name=r.name,this._accidental=r.accidental,this._octave=r.octave}get name(){return this._name}set name(e){if(j.validation&&(e=e.toUpperCase(),!["C","D","E","F","G","A","B"].includes(e)))throw new Error("Invalid name value");this._name=e}get accidental(){return this._accidental}set accidental(e){if(j.validation&&(e=e.toLowerCase(),!["#","##","b","bb"].includes(e)))throw new Error("Invalid accidental value");this._accidental=e}get octave(){return this._octave}set octave(e){if(j.validation&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid octave value");this._octave=e}get duration(){return this._duration}set duration(e){if(j.validation&&(e=parseFloat(e),isNaN(e)||e===null||e<0))throw new RangeError("Invalid duration value.");this._duration=e}get attack(){return this._attack}set attack(e){if(j.validation&&(e=parseFloat(e),isNaN(e)||!(e>=0&&e<=1)))throw new RangeError("Invalid attack value.");this._attack=e}get release(){return this._release}set release(e){if(j.validation&&(e=parseFloat(e),isNaN(e)||!(e>=0&&e<=1)))throw new RangeError("Invalid release value.");this._release=e}get rawAttack(){return U.fromFloatTo7Bit(this._attack)}set rawAttack(e){this._attack=U.from7bitToFloat(e)}get rawRelease(){return U.fromFloatTo7Bit(this._release)}set rawRelease(e){this._release=U.from7bitToFloat(e)}get number(){return U.toNoteNumber(this.identifier)}getOffsetNumber(e=0,r=0){return j.validation&&(e=parseInt(e)||0,r=parseInt(r)||0),Math.min(Math.max(this.number+e*12+r,0),127)}};var U=class{static toNoteNumber(e,r=0){if(r=r==null?0:parseInt(r),isNaN(r))throw new RangeError("Invalid 'octaveOffset' value");typeof e!="string"&&(e="");let n=this.getNoteDetails(e);if(!n)throw new TypeError("Invalid note identifier");let s={C:0,D:2,E:4,F:5,G:7,A:9,B:11},i=(n.octave+1+r)*12;if(i+=s[n.name],n.accidental&&(n.accidental.startsWith("b")?i-=n.accidental.length:i+=n.accidental.length),i<0||i>127)throw new RangeError("Invalid octaveOffset value");return i}static getNoteDetails(e){Number.isInteger(e)&&(e=this.toNoteIdentifier(e));let r=e.match(/^([CDEFGAB])(#{0,2}|b{0,2})(-?\d+)$/i);if(!r)throw new TypeError("Invalid note identifier");let n=r[1].toUpperCase(),s=parseInt(r[3]),i=r[2].toLowerCase();return i=i===""?void 0:i,{accidental:i,identifier:n+(i||"")+s,name:n,octave:s}}static sanitizeChannels(e){let r;if(j.validation){if(e==="all")r=["all"];else if(e==="none")return[]}return Array.isArray(e)?r=e:r=[e],r.indexOf("all")>-1&&(r=I.MIDI_CHANNEL_NUMBERS),r.map(function(n){return parseInt(n)}).filter(function(n){return n>=1&&n<=16})}static toTimestamp(e){let r=!1,n=parseFloat(e);return isNaN(n)?!1:(typeof e=="string"&&e.substring(0,1)==="+"?n>=0&&(r=j.time+n):n>=0&&(r=n),r)}static guessNoteNumber(e,r){r=parseInt(r)||0;let n=!1;if(Number.isInteger(e)&&e>=0&&e<=127)n=parseInt(e);else if(parseInt(e)>=0&&parseInt(e)<=127)n=parseInt(e);else if(typeof e=="string"||e instanceof String)try{n=this.toNoteNumber(e.trim(),r)}catch{return!1}return n}static toNoteIdentifier(e,r){if(e=parseInt(e),isNaN(e)||e<0||e>127)throw new RangeError("Invalid note number");if(r=r==null?0:parseInt(r),isNaN(r))throw new RangeError("Invalid octaveOffset value");let n=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],s=Math.floor(e/12-1)+r;return n[e%12]+s.toString()}static buildNote(e,r={}){if(r.octaveOffset=parseInt(r.octaveOffset)||0,e instanceof So)return e;let n=this.guessNoteNumber(e,r.octaveOffset);if(n===!1)throw new TypeError(`The input could not be parsed as a note (${e})`);return r.octaveOffset=void 0,new So(n,r)}static buildNoteArray(e,r={}){let n=[];return Array.isArray(e)||(e=[e]),e.forEach(s=>{n.push(this.buildNote(s,r))}),n}static from7bitToFloat(e){return e===1/0&&(e=127),e=parseInt(e)||0,Math.min(Math.max(e/127,0),1)}static fromFloatTo7Bit(e){return e===1/0&&(e=1),e=parseFloat(e)||0,Math.min(Math.max(Math.round(e*127),0),127)}static fromMsbLsbToFloat(e,r=0){j.validation&&(e=Math.min(Math.max(parseInt(e)||0,0),127),r=Math.min(Math.max(parseInt(r)||0,0),127));let n=((e<<7)+r)/16383;return Math.min(Math.max(n,0),1)}static fromFloatToMsbLsb(e){j.validation&&(e=Math.min(Math.max(parseFloat(e)||0,0),1));let r=Math.round(e*16383);return{msb:r>>7,lsb:r&127}}static offsetNumber(e,r=0,n=0){if(j.validation){if(e=parseInt(e),isNaN(e))throw new Error("Invalid note number");r=parseInt(r)||0,n=parseInt(n)||0}return Math.min(Math.max(e+r*12+n,0),127)}static getPropertyByValue(e,r){return Object.keys(e).find(n=>e[n]===r)}static getCcNameByNumber(e){if(!(j.validation&&(e=parseInt(e),!(e>=0&&e<=127))))return I.CONTROL_CHANGE_MESSAGES[e].name}static getCcNumberByName(e){let r=I.CONTROL_CHANGE_MESSAGES.find(n=>n.name===e);return r?r.number:I.MIDI_CONTROL_CHANGE_MESSAGES[e]}static getChannelModeByNumber(e){if(!(e>=120&&e<=127))return!1;for(let r in I.CHANNEL_MODE_MESSAGES)if(I.CHANNEL_MODE_MESSAGES.hasOwnProperty(r)&&e===I.CHANNEL_MODE_MESSAGES[r])return r;return!1}static get isNode(){return typeof process<"u"&&process.versions!=null&&process.versions.node!=null}static get isBrowser(){return typeof window<"u"&&typeof window.document<"u"}};var XO=class extends an{constructor(e,r){super(),this._output=e,this._number=r,this._octaveOffset=0}destroy(){this._output=null,this._number=null,this._octaveOffset=0,this.removeListener()}send(e,r={time:0}){return this.output.send(e,r),this}sendKeyAftertouch(e,r,n={}){if(j.validation){if(n.useRawValue&&(n.rawValue=n.useRawValue),isNaN(parseFloat(r)))throw new RangeError("Invalid key aftertouch value.");if(n.rawValue){if(!(r>=0&&r<=127&&Number.isInteger(r)))throw new RangeError("Key aftertouch raw value must be an integer between 0 and 127.")}else if(!(r>=0&&r<=1))throw new RangeError("Key aftertouch value must be a float between 0 and 1.")}n.rawValue||(r=U.fromFloatTo7Bit(r));let s=j.octaveOffset+this.output.octaveOffset+this.octaveOffset;return Array.isArray(e)||(e=[e]),U.buildNoteArray(e).forEach(i=>{this.send([(I.CHANNEL_MESSAGES.keyaftertouch<<4)+(this.number-1),i.getOffsetNumber(s),r],{time:U.toTimestamp(n.time)})}),this}sendControlChange(e,r,n={}){if(typeof e=="string"&&(e=U.getCcNumberByName(e)),Array.isArray(r)||(r=[r]),j.validation){if(e===void 0)throw new TypeError("Control change must be identified with a valid name or an integer between 0 and 127.");if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new TypeError("Control change number must be an integer between 0 and 127.");if(r=r.map(s=>{let i=Math.min(Math.max(parseInt(s),0),127);if(isNaN(i))throw new TypeError("Values must be integers between 0 and 127");return i}),r.length===2&&e>=32)throw new TypeError("To use a value array, the controller must be between 0 and 31")}return r.forEach((s,i)=>{this.send([(I.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),e+i*32,r[i]],{time:U.toTimestamp(n.time)})}),this}_selectNonRegisteredParameter(e,r={}){return this.sendControlChange(99,e[0],r),this.sendControlChange(98,e[1],r),this}_deselectRegisteredParameter(e={}){return this.sendControlChange(101,127,e),this.sendControlChange(100,127,e),this}_deselectNonRegisteredParameter(e={}){return this.sendControlChange(101,127,e),this.sendControlChange(100,127,e),this}_selectRegisteredParameter(e,r={}){return this.sendControlChange(101,e[0],r),this.sendControlChange(100,e[1],r),this}_setCurrentParameter(e,r={}){return e=[].concat(e),this.sendControlChange(6,e[0],r),e.length<2?this:(this.sendControlChange(38,e[1],r),this)}sendRpnDecrement(e,r={}){if(Array.isArray(e)||(e=I.REGISTERED_PARAMETERS[e]),j.validation){if(e===void 0)throw new TypeError("The specified registered parameter is invalid.");let n=!1;if(Object.getOwnPropertyNames(I.REGISTERED_PARAMETERS).forEach(s=>{I.REGISTERED_PARAMETERS[s][0]===e[0]&&I.REGISTERED_PARAMETERS[s][1]===e[1]&&(n=!0)}),!n)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(e,r),this.sendControlChange(97,0,r),this._deselectRegisteredParameter(r),this}sendRpnIncrement(e,r={}){if(Array.isArray(e)||(e=I.REGISTERED_PARAMETERS[e]),j.validation){if(e===void 0)throw new TypeError("The specified registered parameter is invalid.");let n=!1;if(Object.getOwnPropertyNames(I.REGISTERED_PARAMETERS).forEach(s=>{I.REGISTERED_PARAMETERS[s][0]===e[0]&&I.REGISTERED_PARAMETERS[s][1]===e[1]&&(n=!0)}),!n)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(e,r),this.sendControlChange(96,0,r),this._deselectRegisteredParameter(r),this}playNote(e,r={}){this.sendNoteOn(e,r);let n=Array.isArray(e)?e:[e];for(let s of n)if(parseInt(s.duration)>0){let i={time:(U.toTimestamp(r.time)||j.time)+parseInt(s.duration),release:s.release,rawRelease:s.rawRelease};this.sendNoteOff(s,i)}else if(parseInt(r.duration)>0){let i={time:(U.toTimestamp(r.time)||j.time)+parseInt(r.duration),release:r.release,rawRelease:r.rawRelease};this.sendNoteOff(s,i)}return this}sendNoteOff(e,r={}){if(j.validation){if(r.rawRelease!=null&&!(r.rawRelease>=0&&r.rawRelease<=127))throw new RangeError("The 'rawRelease' option must be an integer between 0 and 127");if(r.release!=null&&!(r.release>=0&&r.release<=1))throw new RangeError("The 'release' option must be an number between 0 and 1");r.rawVelocity&&(r.rawRelease=r.velocity,console.warn("The 'rawVelocity' option is deprecated. Use 'rawRelease' instead.")),r.velocity&&(r.release=r.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let n=64;r.rawRelease!=null?n=r.rawRelease:isNaN(r.release)||(n=Math.round(r.release*127));let s=j.octaveOffset+this.output.octaveOffset+this.octaveOffset;return U.buildNoteArray(e,{rawRelease:parseInt(n)}).forEach(i=>{this.send([(I.CHANNEL_MESSAGES.noteoff<<4)+(this.number-1),i.getOffsetNumber(s),i.rawRelease],{time:U.toTimestamp(r.time)})}),this}stopNote(e,r={}){return this.sendNoteOff(e,r)}sendNoteOn(e,r={}){if(j.validation){if(r.rawAttack!=null&&!(r.rawAttack>=0&&r.rawAttack<=127))throw new RangeError("The 'rawAttack' option must be an integer between 0 and 127");if(r.attack!=null&&!(r.attack>=0&&r.attack<=1))throw new RangeError("The 'attack' option must be an number between 0 and 1");r.rawVelocity&&(r.rawAttack=r.velocity,r.rawRelease=r.release,console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' or 'rawRelease'.")),r.velocity&&(r.attack=r.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let n=64;r.rawAttack!=null?n=r.rawAttack:isNaN(r.attack)||(n=Math.round(r.attack*127));let s=j.octaveOffset+this.output.octaveOffset+this.octaveOffset;return U.buildNoteArray(e,{rawAttack:n}).forEach(i=>{this.send([(I.CHANNEL_MESSAGES.noteon<<4)+(this.number-1),i.getOffsetNumber(s),i.rawAttack],{time:U.toTimestamp(r.time)})}),this}sendChannelMode(e,r=0,n={}){if(typeof e=="string"&&(e=I.CHANNEL_MODE_MESSAGES[e]),j.validation){if(e===void 0)throw new TypeError("Invalid channel mode message name or number.");if(isNaN(e)||!(e>=120&&e<=127))throw new TypeError("Invalid channel mode message number.");if(isNaN(parseInt(r))||r<0||r>127)throw new RangeError("Value must be an integer between 0 and 127.")}return this.send([(I.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),e,r],{time:U.toTimestamp(n.time)}),this}sendOmniMode(e,r={}){return e===void 0||e?this.sendChannelMode("omnimodeon",0,r):this.sendChannelMode("omnimodeoff",0,r),this}sendChannelAftertouch(e,r={}){if(j.validation){if(isNaN(parseFloat(e)))throw new RangeError("Invalid channel aftertouch value.");if(r.rawValue){if(!(e>=0&&e<=127&&Number.isInteger(e)))throw new RangeError("Channel aftertouch raw value must be an integer between 0 and 127.")}else if(!(e>=0&&e<=1))throw new RangeError("Channel aftertouch value must be a float between 0 and 1.")}return r.rawValue||(e=U.fromFloatTo7Bit(e)),this.send([(I.CHANNEL_MESSAGES.channelaftertouch<<4)+(this.number-1),Math.round(e)],{time:U.toTimestamp(r.time)}),this}sendMasterTuning(e,r={}){if(e=parseFloat(e)||0,j.validation&&!(e>-65&&e<64))throw new RangeError("The value must be a decimal number larger than -65 and smaller than 64.");let n=Math.floor(e)+64,s=e-Math.floor(e);s=Math.round((s+1)/2*16383);let i=s>>7&127,o=s&127;return this.sendRpnValue("channelcoarsetuning",n,r),this.sendRpnValue("channelfinetuning",[i,o],r),this}sendModulationRange(e,r,n={}){if(j.validation){if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(r!=null&&(!Number.isInteger(r)||!(r>=0&&r<=127)))throw new RangeError("If specified, the cents value must be an integer between 0 and 127.")}return r>=0&&r<=127||(r=0),this.sendRpnValue("modulationrange",[e,r],n),this}sendNrpnValue(e,r,n={}){if(r=[].concat(r),j.validation){if(!Array.isArray(e)||!Number.isInteger(e[0])||!Number.isInteger(e[1]))throw new TypeError("The specified NRPN is invalid.");if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The first byte of the NRPN must be between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The second byte of the NRPN must be between 0 and 127.");r.forEach(s=>{if(!(s>=0&&s<=127))throw new RangeError("The data bytes of the NRPN must be between 0 and 127.")})}return this._selectNonRegisteredParameter(e,n),this._setCurrentParameter(r,n),this._deselectNonRegisteredParameter(n),this}sendPitchBend(e,r={}){if(j.validation)if(r.rawValue&&Array.isArray(e)){if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The pitch bend LSB must be an integer between 0 and 127.")}else if(r.rawValue&&!Array.isArray(e)){if(!(e>=0&&e<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.")}else{if(isNaN(e)||e===null)throw new RangeError("Invalid pitch bend value.");if(!(e>=-1&&e<=1))throw new RangeError("The pitch bend value must be a float between -1 and 1.")}let n=0,s=0;if(r.rawValue&&Array.isArray(e))n=e[0],s=e[1];else if(r.rawValue&&!Array.isArray(e))n=e;else{let i=U.fromFloatToMsbLsb((e+1)/2);n=i.msb,s=i.lsb}return this.send([(I.CHANNEL_MESSAGES.pitchbend<<4)+(this.number-1),s,n],{time:U.toTimestamp(r.time)}),this}sendPitchBendRange(e,r,n={}){if(j.validation){if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(!Number.isInteger(r)||!(r>=0&&r<=127))throw new RangeError("The cents value must be an integer between 0 and 127.")}return this.sendRpnValue("pitchbendrange",[e,r],n),this}sendProgramChange(e,r={}){if(e=parseInt(e)||0,j.validation&&!(e>=0&&e<=127))throw new RangeError("The program number must be between 0 and 127.");return this.send([(I.CHANNEL_MESSAGES.programchange<<4)+(this.number-1),e],{time:U.toTimestamp(r.time)}),this}sendRpnValue(e,r,n={}){if(Array.isArray(e)||(e=I.REGISTERED_PARAMETERS[e]),j.validation){if(!Number.isInteger(e[0])||!Number.isInteger(e[1]))throw new TypeError("The specified NRPN is invalid.");if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The first byte of the RPN must be between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The second byte of the RPN must be between 0 and 127.");[].concat(r).forEach(s=>{if(!(s>=0&&s<=127))throw new RangeError("The data bytes of the RPN must be between 0 and 127.")})}return this._selectRegisteredParameter(e,n),this._setCurrentParameter(r,n),this._deselectRegisteredParameter(n),this}sendTuningBank(e,r={}){if(j.validation&&(!Number.isInteger(e)||!(e>=0&&e<=127)))throw new RangeError("The tuning bank number must be between 0 and 127.");return this.sendRpnValue("tuningbank",e,r),this}sendTuningProgram(e,r={}){if(j.validation&&(!Number.isInteger(e)||!(e>=0&&e<=127)))throw new RangeError("The tuning program number must be between 0 and 127.");return this.sendRpnValue("tuningprogram",e,r),this}sendLocalControl(e,r={}){return e?this.sendChannelMode("localcontrol",127,r):this.sendChannelMode("localcontrol",0,r)}sendAllNotesOff(e={}){return this.sendChannelMode("allnotesoff",0,e)}sendAllSoundOff(e={}){return this.sendChannelMode("allsoundoff",0,e)}sendResetAllControllers(e={}){return this.sendChannelMode("resetallcontrollers",0,e)}sendPolyphonicMode(e,r={}){return e==="mono"?this.sendChannelMode("monomodeon",0,r):this.sendChannelMode("polymodeon",0,r)}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get output(){return this._output}get number(){return this._number}};var Sh=class extends an{constructor(e){super(),this._midiOutput=e,this._octaveOffset=0,this.channels=[];for(let r=1;r<=16;r++)this.channels[r]=new XO(this,r);this._midiOutput.onstatechange=this._onStateChange.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(e=>e.destroy()),this.channels=[],this._midiOutput&&(this._midiOutput.onstatechange=null),await this.close(),this._midiOutput=null}_onStateChange(e){let r={timestamp:j.time};e.port.connection==="open"?(r.type="opened",r.target=this,r.port=r.target,this.emit("opened",r)):e.port.connection==="closed"&&e.port.state==="connected"?(r.type="closed",r.target=this,r.port=r.target,this.emit("closed",r)):e.port.connection==="closed"&&e.port.state==="disconnected"?(r.type="disconnected",r.port={connection:e.port.connection,id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this.emit("disconnected",r)):e.port.connection==="pending"&&e.port.state==="disconnected"||console.warn("This statechange event was not caught:",e.port.connection,e.port.state)}async open(){try{return await this._midiOutput.open(),Promise.resolve(this)}catch(e){return Promise.reject(e)}}async close(){this._midiOutput?await this._midiOutput.close():await Promise.resolve()}send(e,r={time:0},n=0){if(e instanceof K0&&(e=U.isNode?e.data:e.rawData),e instanceof Uint8Array&&U.isNode&&(e=Array.from(e)),j.validation){if(!Array.isArray(e)&&!(e instanceof Uint8Array)&&(e=[e],Array.isArray(r)&&(e=e.concat(r)),r=isNaN(n)?{time:0}:{time:n}),!(parseInt(e[0])>=128&&parseInt(e[0])<=255))throw new RangeError("The first byte (status) must be an integer between 128 and 255.");e.slice(1).forEach(s=>{if(s=parseInt(s),!(s>=0&&s<=255))throw new RangeError("Data bytes must be integers between 0 and 255.")}),r||(r={time:0})}return this._midiOutput.send(e,U.toTimestamp(r.time)),this}sendSysex(e,r=[],n={}){if(e=[].concat(e),r instanceof Uint8Array){let s=new Uint8Array(1+e.length+r.length+1);s[0]=I.SYSTEM_MESSAGES.sysex,s.set(Uint8Array.from(e),1),s.set(r,1+e.length),s[s.length-1]=I.SYSTEM_MESSAGES.sysexend,this.send(s,{time:n.time})}else{let s=e.concat(r,I.SYSTEM_MESSAGES.sysexend);this.send([I.SYSTEM_MESSAGES.sysex].concat(s),{time:n.time})}return this}clear(){return this._midiOutput.clear?this._midiOutput.clear():j.validation&&console.warn("The 'clear()' method has not yet been implemented in your environment."),this}sendTimecodeQuarterFrame(e,r={}){if(j.validation&&(e=parseInt(e),isNaN(e)||!(e>=0&&e<=127)))throw new RangeError("The value must be an integer between 0 and 127.");return this.send([I.SYSTEM_MESSAGES.timecode,e],{time:r.time}),this}sendSongPosition(e=0,r={}){e=Math.floor(e)||0;var n=e>>7&127,s=e&127;return this.send([I.SYSTEM_MESSAGES.songposition,n,s],{time:r.time}),this}sendSongSelect(e=0,r={}){if(j.validation&&(e=parseInt(e),isNaN(e)||!(e>=0&&e<=127)))throw new RangeError("The program value must be between 0 and 127");return this.send([I.SYSTEM_MESSAGES.songselect,e],{time:r.time}),this}sendTuneRequest(e={}){return this.send([I.SYSTEM_MESSAGES.tunerequest],{time:e.time}),this}sendClock(e={}){return this.send([I.SYSTEM_MESSAGES.clock],{time:e.time}),this}sendStart(e={}){return this.send([I.SYSTEM_MESSAGES.start],{time:e.time}),this}sendContinue(e={}){return this.send([I.SYSTEM_MESSAGES.continue],{time:e.time}),this}sendStop(e={}){return this.send([I.SYSTEM_MESSAGES.stop],{time:e.time}),this}sendActiveSensing(e={}){return this.send([I.SYSTEM_MESSAGES.activesensing],{time:e.time}),this}sendReset(e={}){return this.send([I.SYSTEM_MESSAGES.reset],{time:e.time}),this}sendTuningRequest(e={}){return j.validation&&console.warn("The sendTuningRequest() method has been deprecated. Use sendTuningRequest() instead."),this.sendTuneRequest(e)}sendKeyAftertouch(e,r,n={}){return n.channels==null&&(n.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendKeyAftertouch(e,r,n)}),this}sendControlChange(e,r,n={},s={}){if(j.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){let i=n;n=s,n.channels=i,n.channels==="all"&&(n.channels=I.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendControlChange(e,r,n)}),this}sendPitchBendRange(e=0,r=0,n={}){return n.channels==null&&(n.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendPitchBendRange(e,r,n)}),this}setPitchBendRange(e=0,r=0,n="all",s={}){return j.validation&&(console.warn("The setPitchBendRange() method is deprecated. Use sendPitchBendRange() instead."),s.channels=n,s.channels==="all"&&(s.channels=I.MIDI_CHANNEL_NUMBERS)),this.sendPitchBendRange(e,r,s)}sendRpnValue(e,r,n={}){return n.channels==null&&(n.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendRpnValue(e,r,n)}),this}setRegisteredParameter(e,r=[],n="all",s={}){return j.validation&&(console.warn("The setRegisteredParameter() method is deprecated. Use sendRpnValue() instead."),s.channels=n,s.channels==="all"&&(s.channels=I.MIDI_CHANNEL_NUMBERS)),this.sendRpnValue(e,r,s)}sendChannelAftertouch(e,r={},n={}){if(j.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){let s=r;r=n,r.channels=s,r.channels==="all"&&(r.channels=I.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendChannelAftertouch(e,r)}),this}sendPitchBend(e,r={},n={}){if(j.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){let s=r;r=n,r.channels=s,r.channels==="all"&&(r.channels=I.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendPitchBend(e,r)}),this}sendProgramChange(e=0,r={},n={}){if(j.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){let s=r;r=n,r.channels=s,r.channels==="all"&&(r.channels=I.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendProgramChange(e,r)}),this}sendModulationRange(e,r,n={}){return n.channels==null&&(n.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendModulationRange(e,r,n)}),this}setModulationRange(e=0,r=0,n="all",s={}){return j.validation&&(console.warn("The setModulationRange() method is deprecated. Use sendModulationRange() instead."),s.channels=n,s.channels==="all"&&(s.channels=I.MIDI_CHANNEL_NUMBERS)),this.sendModulationRange(e,r,s)}sendMasterTuning(e,r={}){return r.channels==null&&(r.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(r.channels).forEach(n=>{this.channels[n].sendMasterTuning(e,r)}),this}setMasterTuning(e,r={},n={}){return j.validation&&(console.warn("The setMasterTuning() method is deprecated. Use sendMasterTuning() instead."),n.channels=r,n.channels==="all"&&(n.channels=I.MIDI_CHANNEL_NUMBERS)),this.sendMasterTuning(e,n)}sendTuningProgram(e,r={}){return r.channels==null&&(r.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(r.channels).forEach(n=>{this.channels[n].sendTuningProgram(e,r)}),this}setTuningProgram(e,r="all",n={}){return j.validation&&(console.warn("The setTuningProgram() method is deprecated. Use sendTuningProgram() instead."),n.channels=r,n.channels==="all"&&(n.channels=I.MIDI_CHANNEL_NUMBERS)),this.sendTuningProgram(e,n)}sendTuningBank(e=0,r={}){return r.channels==null&&(r.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(r.channels).forEach(n=>{this.channels[n].sendTuningBank(e,r)}),this}setTuningBank(e,r="all",n={}){return j.validation&&(console.warn("The setTuningBank() method is deprecated. Use sendTuningBank() instead."),n.channels=r,n.channels==="all"&&(n.channels=I.MIDI_CHANNEL_NUMBERS)),this.sendTuningBank(e,n)}sendChannelMode(e,r=0,n={},s={}){if(j.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){let i=n;n=s,n.channels=i,n.channels==="all"&&(n.channels=I.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendChannelMode(e,r,n)}),this}sendAllSoundOff(e={}){return e.channels==null&&(e.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(e.channels).forEach(r=>{this.channels[r].sendAllSoundOff(e)}),this}sendAllNotesOff(e={}){return e.channels==null&&(e.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(e.channels).forEach(r=>{this.channels[r].sendAllNotesOff(e)}),this}sendResetAllControllers(e={},r={}){if(j.validation&&(Array.isArray(e)||Number.isInteger(e)||e==="all")){let n=e;e=r,e.channels=n,e.channels==="all"&&(e.channels=I.MIDI_CHANNEL_NUMBERS)}return e.channels==null&&(e.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(e.channels).forEach(n=>{this.channels[n].sendResetAllControllers(e)}),this}sendPolyphonicMode(e,r={},n={}){if(j.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){let s=r;r=n,r.channels=s,r.channels==="all"&&(r.channels=I.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendPolyphonicMode(e,r)}),this}sendLocalControl(e,r={},n={}){if(j.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){let s=r;r=n,r.channels=s,r.channels==="all"&&(r.channels=I.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendLocalControl(e,r)}),this}sendOmniMode(e,r={},n={}){if(j.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){let s=r;r=n,r.channels=s,r.channels==="all"&&(r.channels=I.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendOmniMode(e,r)}),this}sendNrpnValue(e,r,n={}){return n.channels==null&&(n.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendNrpnValue(e,r,n)}),this}setNonRegisteredParameter(e,r=[],n="all",s={}){return j.validation&&(console.warn("The setNonRegisteredParameter() method is deprecated. Use sendNrpnValue() instead."),s.channels=n,s.channels==="all"&&(s.channels=I.MIDI_CHANNEL_NUMBERS)),this.sendNrpnValue(e,r,s)}sendRpnIncrement(e,r={}){return r.channels==null&&(r.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(r.channels).forEach(n=>{this.channels[n].sendRpnIncrement(e,r)}),this}incrementRegisteredParameter(e,r="all",n={}){return j.validation&&(console.warn("The incrementRegisteredParameter() method is deprecated. Use sendRpnIncrement() instead."),n.channels=r,n.channels==="all"&&(n.channels=I.MIDI_CHANNEL_NUMBERS)),this.sendRpnIncrement(e,n)}sendRpnDecrement(e,r={}){return r.channels==null&&(r.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(r.channels).forEach(n=>{this.channels[n].sendRpnDecrement(e,r)}),this}decrementRegisteredParameter(e,r="all",n={}){return j.validation&&(console.warn("The decrementRegisteredParameter() method is deprecated. Use sendRpnDecrement() instead."),n.channels=r,n.channels==="all"&&(n.channels=I.MIDI_CHANNEL_NUMBERS)),this.sendRpnDecrement(e,n)}sendNoteOff(e,r={},n={}){if(j.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){let s=r;r=n,r.channels=s,r.channels==="all"&&(r.channels=I.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendNoteOff(e,r)}),this}stopNote(e,r){return this.sendNoteOff(e,r)}playNote(e,r={},n={}){if(j.validation&&(r.rawVelocity&&console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' instead."),r.velocity&&console.warn("The 'velocity' option is deprecated. Use 'velocity' instead."),Array.isArray(r)||Number.isInteger(r)||r==="all")){let s=r;r=n,r.channels=s,r.channels==="all"&&(r.channels=I.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].playNote(e,r)}),this}sendNoteOn(e,r={},n={}){if(j.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){let s=r;r=n,r.channels=s,r.channels==="all"&&(r.channels=I.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendNoteOn(e,r)}),this}get name(){return this._midiOutput.name}get id(){return this._midiOutput.id}get connection(){return this._midiOutput.connection}get manufacturer(){return this._midiOutput.manufacturer}get state(){return this._midiOutput.state}get type(){return this._midiOutput.type}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}};var W0=class{constructor(e=[],r={}){this.destinations=[],this.types=[...Object.keys(I.SYSTEM_MESSAGES),...Object.keys(I.CHANNEL_MESSAGES)],this.channels=I.MIDI_CHANNEL_NUMBERS,this.suspended=!1,Array.isArray(e)||(e=[e]),r.types&&!Array.isArray(r.types)&&(r.types=[r.types]),r.channels&&!Array.isArray(r.channels)&&(r.channels=[r.channels]),j.validation&&(e.forEach(n=>{if(!(n instanceof Sh))throw new TypeError("Destinations must be of type 'Output'.")}),r.types!==void 0&&r.types.forEach(n=>{if(!I.SYSTEM_MESSAGES.hasOwnProperty(n)&&!I.CHANNEL_MESSAGES.hasOwnProperty(n))throw new TypeError("Type must be a valid message type.")}),r.channels!==void 0&&r.channels.forEach(n=>{if(!I.MIDI_CHANNEL_NUMBERS.includes(n))throw new TypeError("MIDI channel must be between 1 and 16.")})),this.destinations=e,r.types&&(this.types=r.types),r.channels&&(this.channels=r.channels)}forward(e){this.suspended||this.types.includes(e.type)&&(e.channel&&!this.channels.includes(e.channel)||this.destinations.forEach(r=>{j.validation&&!(r instanceof Sh)||r.send(e)}))}};var QO=class extends an{constructor(e,r){super(),this._input=e,this._number=r,this._octaveOffset=0,this._nrpnBuffer=[],this._rpnBuffer=[],this.parameterNumberEventsEnabled=!0,this.notesState=new Array(128).fill(!1)}destroy(){this._input=null,this._number=null,this._octaveOffset=0,this._nrpnBuffer=[],this.notesState=new Array(128).fill(!1),this.parameterNumberEventsEnabled=!1,this.removeListener()}_processMidiMessageEvent(e){let r=Object.assign({},e);r.port=this.input,r.target=this,r.type="midimessage",this.emit(r.type,r),this._parseEventForStandardMessages(r)}_parseEventForStandardMessages(e){let r=Object.assign({},e);r.type=r.message.type||"unknownmessage";let n=e.message.dataBytes[0],s=e.message.dataBytes[1];if(r.type==="noteoff"||r.type==="noteon"&&s===0)this.notesState[n]=!1,r.type="noteoff",r.note=new So(U.offsetNumber(n,this.octaveOffset+this.input.octaveOffset+j.octaveOffset),{rawAttack:0,rawRelease:s}),r.value=U.from7bitToFloat(s),r.rawValue=s,r.velocity=r.note.release,r.rawVelocity=r.note.rawRelease;else if(r.type==="noteon")this.notesState[n]=!0,r.note=new So(U.offsetNumber(n,this.octaveOffset+this.input.octaveOffset+j.octaveOffset),{rawAttack:s}),r.value=U.from7bitToFloat(s),r.rawValue=s,r.velocity=r.note.attack,r.rawVelocity=r.note.rawAttack;else if(r.type==="keyaftertouch")r.note=new So(U.offsetNumber(n,this.octaveOffset+this.input.octaveOffset+j.octaveOffset)),r.value=U.from7bitToFloat(s),r.rawValue=s,r.identifier=r.note.identifier,r.key=r.note.number,r.rawKey=n;else if(r.type==="controlchange"){r.controller={number:n,name:I.CONTROL_CHANGE_MESSAGES[n].name,description:I.CONTROL_CHANGE_MESSAGES[n].description,position:I.CONTROL_CHANGE_MESSAGES[n].position},r.subtype=r.controller.name||"controller"+n,r.value=U.from7bitToFloat(s),r.rawValue=s;let i=Object.assign({},r);i.type=`${r.type}-controller${n}`,delete i.subtype,this.emit(i.type,i);let o=Object.assign({},r);o.type=`${r.type}-`+I.CONTROL_CHANGE_MESSAGES[n].name,delete o.subtype,o.type.indexOf("controller")!==0&&this.emit(o.type,o),r.message.dataBytes[0]>=120&&this._parseChannelModeMessage(r),this.parameterNumberEventsEnabled&&this._isRpnOrNrpnController(r.message.dataBytes[0])&&this._parseEventForParameterNumber(r)}else r.type==="programchange"?(r.value=n,r.rawValue=r.value):r.type==="channelaftertouch"?(r.value=U.from7bitToFloat(n),r.rawValue=n):r.type==="pitchbend"?(r.value=((s<<7)+n-8192)/8192,r.rawValue=(s<<7)+n):r.type="unknownmessage";this.emit(r.type,r)}_parseChannelModeMessage(e){let r=Object.assign({},e);r.type=r.controller.name,r.type==="localcontrol"&&(r.value=r.message.data[2]===127,r.rawValue=r.message.data[2]),r.type==="omnimodeon"?(r.type="omnimode",r.value=!0,r.rawValue=r.message.data[2]):r.type==="omnimodeoff"&&(r.type="omnimode",r.value=!1,r.rawValue=r.message.data[2]),r.type==="monomodeon"?(r.type="monomode",r.value=!0,r.rawValue=r.message.data[2]):r.type==="polymodeon"&&(r.type="monomode",r.value=!1,r.rawValue=r.message.data[2]),this.emit(r.type,r)}_parseEventForParameterNumber(e){let r=e.message.dataBytes[0],n=e.message.dataBytes[1];r===99||r===101?(this._nrpnBuffer=[],this._rpnBuffer=[],r===99?this._nrpnBuffer=[e.message]:n!==127&&(this._rpnBuffer=[e.message])):r===98||r===100?r===98?(this._rpnBuffer=[],this._nrpnBuffer.length===1?this._nrpnBuffer.push(e.message):this._nrpnBuffer=[]):(this._nrpnBuffer=[],this._rpnBuffer.length===1&&n!==127?this._rpnBuffer.push(e.message):this._rpnBuffer=[]):(r===6||r===38||r===96||r===97)&&(this._rpnBuffer.length===2?this._dispatchParameterNumberEvent("rpn",this._rpnBuffer[0].dataBytes[1],this._rpnBuffer[1].dataBytes[1],e):this._nrpnBuffer.length===2?this._dispatchParameterNumberEvent("nrpn",this._nrpnBuffer[0].dataBytes[1],this._nrpnBuffer[1].dataBytes[1],e):(this._nrpnBuffer=[],this._rpnBuffer=[]))}_isRpnOrNrpnController(e){return e===6||e===38||e===96||e===97||e===98||e===99||e===100||e===101}_dispatchParameterNumberEvent(e,r,n,s){e=e==="nrpn"?"nrpn":"rpn";let i={target:s.target,timestamp:s.timestamp,message:s.message,parameterMsb:r,parameterLsb:n,value:U.from7bitToFloat(s.message.dataBytes[1]),rawValue:s.message.dataBytes[1]};e==="rpn"?i.parameter=Object.keys(I.REGISTERED_PARAMETERS).find(c=>I.REGISTERED_PARAMETERS[c][0]===r&&I.REGISTERED_PARAMETERS[c][1]===n):i.parameter=(r<<7)+n;let o=I.CONTROL_CHANGE_MESSAGES[s.message.dataBytes[0]].name;i.type=`${e}-${o}`,this.emit(i.type,i);let a=Object.assign({},i);a.type==="nrpn-dataincrement"?a.type="nrpn-databuttonincrement":a.type==="nrpn-datadecrement"?a.type="nrpn-databuttondecrement":a.type==="rpn-dataincrement"?a.type="rpn-databuttonincrement":a.type==="rpn-datadecrement"&&(a.type="rpn-databuttondecrement"),this.emit(a.type,a),i.type=e,i.subtype=o,this.emit(i.type,i)}getChannelModeByNumber(e){return j.validation&&(console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class."),e=Math.floor(e)),U.getChannelModeByNumber(e)}getCcNameByNumber(e){if(j.validation&&(console.warn("The 'getCcNameByNumber()' method has been moved to the 'Utilities' class."),e=parseInt(e),!(e>=0&&e<=127)))throw new RangeError("Invalid control change number.");return U.getCcNameByNumber(e)}getNoteState(e){e instanceof So&&(e=e.identifier);let r=U.guessNoteNumber(e,j.octaveOffset+this.input.octaveOffset+this.octaveOffset);return this.notesState[r]}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get input(){return this._input}get number(){return this._number}get nrpnEventsEnabled(){return this.parameterNumberEventsEnabled}set nrpnEventsEnabled(e){this.validation&&(e=!!e),this.parameterNumberEventsEnabled=e}};var K0=class{constructor(e){this.rawData=e,this.data=Array.from(this.rawData),this.statusByte=this.rawData[0],this.rawDataBytes=this.rawData.slice(1),this.dataBytes=this.data.slice(1),this.isChannelMessage=!1,this.isSystemMessage=!1,this.command=void 0,this.channel=void 0,this.manufacturerId=void 0,this.type=void 0,this.statusByte<240?(this.isChannelMessage=!0,this.command=this.statusByte>>4,this.channel=(this.statusByte&15)+1):(this.isSystemMessage=!0,this.command=this.statusByte),this.isChannelMessage?this.type=U.getPropertyByValue(I.CHANNEL_MESSAGES,this.command):this.isSystemMessage&&(this.type=U.getPropertyByValue(I.SYSTEM_MESSAGES,this.command)),this.statusByte===I.SYSTEM_MESSAGES.sysex&&(this.dataBytes[0]===0?(this.manufacturerId=this.dataBytes.slice(0,3),this.dataBytes=this.dataBytes.slice(3,this.rawDataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(3,this.rawDataBytes.length-1)):(this.manufacturerId=[this.dataBytes[0]],this.dataBytes=this.dataBytes.slice(1,this.dataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(1,this.rawDataBytes.length-1)))}};var ZO=class extends an{constructor(e){super(),this._midiInput=e,this._octaveOffset=0,this.channels=[];for(let r=1;r<=16;r++)this.channels[r]=new QO(this,r);this._forwarders=[],this._midiInput.onstatechange=this._onStateChange.bind(this),this._midiInput.onmidimessage=this._onMidiMessage.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(e=>e.destroy()),this.channels=[],this._forwarders=[],this._midiInput&&(this._midiInput.onstatechange=null,this._midiInput.onmidimessage=null),await this.close(),this._midiInput=null}_onStateChange(e){let r={timestamp:j.time,target:this,port:this};e.port.connection==="open"?(r.type="opened",this.emit("opened",r)):e.port.connection==="closed"&&e.port.state==="connected"?(r.type="closed",this.emit("closed",r)):e.port.connection==="closed"&&e.port.state==="disconnected"?(r.type="disconnected",r.port={connection:e.port.connection,id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this.emit("disconnected",r)):e.port.connection==="pending"&&e.port.state==="disconnected"||console.warn("This statechange event was not caught: ",e.port.connection,e.port.state)}_onMidiMessage(e){let r=new K0(e.data),n={port:this,target:this,message:r,timestamp:e.timeStamp,type:"midimessage",data:r.data,rawData:r.data,statusByte:r.data[0],dataBytes:r.dataBytes};this.emit("midimessage",n),r.isSystemMessage?this._parseEvent(n):r.isChannelMessage&&this.channels[r.channel]._processMidiMessageEvent(n),this._forwarders.forEach(s=>s.forward(r))}_parseEvent(e){let r=Object.assign({},e);r.type=r.message.type||"unknownmidimessage",r.type==="songselect"&&(r.song=e.data[1]+1,r.value=e.data[1],r.rawValue=r.value),this.emit(r.type,r)}async open(){try{await this._midiInput.open()}catch(e){return Promise.reject(e)}return Promise.resolve(this)}async close(){if(!this._midiInput)return Promise.resolve(this);try{await this._midiInput.close()}catch(e){return Promise.reject(e)}return Promise.resolve(this)}getChannelModeByNumber(){j.validation&&console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class.")}addListener(e,r,n={}){if(j.validation&&typeof n=="function"){let s=r!=null?[].concat(r):void 0;r=n,n={channels:s}}if(I.CHANNEL_EVENTS.includes(e)){n.channels===void 0&&(n.channels=I.MIDI_CHANNEL_NUMBERS);let s=[];return U.sanitizeChannels(n.channels).forEach(i=>{s.push(this.channels[i].addListener(e,r,n))}),s}else return super.addListener(e,r,n)}addOneTimeListener(e,r,n={}){return n.remaining=1,this.addListener(e,r,n)}on(e,r,n,s){return this.addListener(e,r,n,s)}hasListener(e,r,n={}){if(j.validation&&typeof n=="function"){let s=[].concat(r);r=n,n={channels:s}}return I.CHANNEL_EVENTS.includes(e)?(n.channels===void 0&&(n.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(n.channels).every(s=>this.channels[s].hasListener(e,r))):super.hasListener(e,r)}removeListener(e,r,n={}){if(j.validation&&typeof n=="function"){let s=[].concat(r);r=n,n={channels:s}}if(n.channels===void 0&&(n.channels=I.MIDI_CHANNEL_NUMBERS),e==null)return U.sanitizeChannels(n.channels).forEach(s=>{this.channels[s]&&this.channels[s].removeListener()}),super.removeListener();I.CHANNEL_EVENTS.includes(e)?U.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].removeListener(e,r,n)}):super.removeListener(e,r,n)}addForwarder(e,r={}){let n;return e instanceof W0?n=e:n=new W0(e,r),this._forwarders.push(n),n}removeForwarder(e){this._forwarders=this._forwarders.filter(r=>r!==e)}hasForwarder(e){return this._forwarders.includes(e)}get name(){return this._midiInput.name}get id(){return this._midiInput.id}get connection(){return this._midiInput.connection}get manufacturer(){return this._midiInput.manufacturer}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get state(){return this._midiInput.state}get type(){return this._midiInput.type}get nrpnEventsEnabled(){return j.validation&&console.warn("The 'nrpnEventsEnabled' property has been moved to the 'InputChannel' class."),!1}};var eP=class extends an{constructor(){super(),this.defaults={note:{attack:U.from7bitToFloat(64),release:U.from7bitToFloat(64),duration:1/0}},this.interface=null,this.validation=!0,this._inputs=[],this._disconnectedInputs=[],this._outputs=[],this._disconnectedOutputs=[],this._stateChangeQueue=[],this._octaveOffset=0}async enable(e={},r=!1){if(U.isNode){try{window.navigator}catch{let a=await Object.getPrototypeOf(async function(){}).constructor(`
        let jzz = await import("jzz");
        return jzz.default;
        `)();global.navigator||(global.navigator={}),Object.assign(global.navigator,a)}try{}catch{global.performance=await Object.getPrototypeOf(async function(){}).constructor(`
        let perf_hooks = await import("perf_hooks");
        return perf_hooks.performance;
        `)()}}if(this.validation=e.validation!==!1,this.validation&&(typeof e=="function"&&(e={callback:e,sysex:r}),r&&(e.sysex=!0)),this.enabled)return typeof e.callback=="function"&&e.callback(),Promise.resolve();let n={timestamp:this.time,target:this,type:"error",error:void 0},s={timestamp:this.time,target:this,type:"midiaccessgranted"},i={timestamp:this.time,target:this,type:"enabled"};try{typeof e.requestMIDIAccessFunction=="function"?this.interface=await e.requestMIDIAccessFunction({sysex:e.sysex,software:e.software}):this.interface=await navigator.requestMIDIAccess({sysex:e.sysex,software:e.software})}catch(o){return n.error=o,this.emit("error",n),typeof e.callback=="function"&&e.callback(o),Promise.reject(o)}this.emit("midiaccessgranted",s),this.interface.onstatechange=this._onInterfaceStateChange.bind(this);try{await this._updateInputsAndOutputs()}catch(o){return n.error=o,this.emit("error",n),typeof e.callback=="function"&&e.callback(o),Promise.reject(o)}return this.emit("enabled",i),typeof e.callback=="function"&&e.callback(),Promise.resolve(this)}async disable(){return this.interface&&(this.interface.onstatechange=void 0),this._destroyInputsAndOutputs().then(()=>{navigator&&typeof navigator.close=="function"&&navigator.close(),this.interface=null;let e={timestamp:this.time,target:this,type:"disabled"};this.emit("disabled",e),this.removeListener()})}getInputById(e,r={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return}if(r.disconnected){for(let n=0;n<this._disconnectedInputs.length;n++)if(this._disconnectedInputs[n]._midiInput&&this._disconnectedInputs[n].id===e.toString())return this._disconnectedInputs[n]}else for(let n=0;n<this.inputs.length;n++)if(this.inputs[n]._midiInput&&this.inputs[n].id===e.toString())return this.inputs[n]}getInputByName(e,r={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return;e=e.toString()}if(r.disconnected){for(let n=0;n<this._disconnectedInputs.length;n++)if(~this._disconnectedInputs[n].name.indexOf(e))return this._disconnectedInputs[n]}else for(let n=0;n<this.inputs.length;n++)if(~this.inputs[n].name.indexOf(e))return this.inputs[n]}getOutputByName(e,r={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return;e=e.toString()}if(r.disconnected){for(let n=0;n<this._disconnectedOutputs.length;n++)if(~this._disconnectedOutputs[n].name.indexOf(e))return this._disconnectedOutputs[n]}else for(let n=0;n<this.outputs.length;n++)if(~this.outputs[n].name.indexOf(e))return this.outputs[n]}getOutputById(e,r={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return}if(r.disconnected){for(let n=0;n<this._disconnectedOutputs.length;n++)if(this._disconnectedOutputs[n]._midiOutput&&this._disconnectedOutputs[n].id===e.toString())return this._disconnectedOutputs[n]}else for(let n=0;n<this.outputs.length;n++)if(this.outputs[n]._midiOutput&&this.outputs[n].id===e.toString())return this.outputs[n]}noteNameToNumber(e){return this.validation&&console.warn("The noteNameToNumber() method is deprecated. Use Utilities.toNoteNumber() instead."),U.toNoteNumber(e,this.octaveOffset)}getOctave(e){return this.validation&&(console.warn("The getOctave()is deprecated. Use Utilities.getNoteDetails() instead"),e=parseInt(e)),!isNaN(e)&&e>=0&&e<=127?U.getNoteDetails(U.offsetNumber(e,this.octaveOffset)).octave:!1}sanitizeChannels(e){return this.validation&&console.warn("The sanitizeChannels() method has been moved to the utilities class."),U.sanitizeChannels(e)}toMIDIChannels(e){return this.validation&&console.warn("The toMIDIChannels() method has been deprecated. Use Utilities.sanitizeChannels() instead."),U.sanitizeChannels(e)}guessNoteNumber(e){return this.validation&&console.warn("The guessNoteNumber() method has been deprecated. Use Utilities.guessNoteNumber() instead."),U.guessNoteNumber(e,this.octaveOffset)}getValidNoteArray(e,r={}){return this.validation&&console.warn("The getValidNoteArray() method has been moved to the Utilities.buildNoteArray()"),U.buildNoteArray(e,r)}convertToTimestamp(e){return this.validation&&console.warn("The convertToTimestamp() method has been moved to Utilities.toTimestamp()."),U.toTimestamp(e)}async _destroyInputsAndOutputs(){let e=[];return this.inputs.forEach(r=>e.push(r.destroy())),this.outputs.forEach(r=>e.push(r.destroy())),Promise.all(e).then(()=>{this._inputs=[],this._outputs=[]})}_onInterfaceStateChange(e){this._updateInputsAndOutputs();let r={timestamp:e.timeStamp,type:e.port.state,target:this};if(e.port.state==="connected"&&e.port.connection==="open"){e.port.type==="output"?r.port=this.getOutputById(e.port.id):e.port.type==="input"&&(r.port=this.getInputById(e.port.id)),this.emit(e.port.state,r);let n=Object.assign({},r);n.type="portschanged",this.emit(n.type,n)}else if(e.port.state==="disconnected"&&e.port.connection==="pending"){e.port.type==="input"?r.port=this.getInputById(e.port.id,{disconnected:!0}):e.port.type==="output"&&(r.port=this.getOutputById(e.port.id,{disconnected:!0})),this.emit(e.port.state,r);let n=Object.assign({},r);n.type="portschanged",this.emit(n.type,n)}}async _updateInputsAndOutputs(){return Promise.all([this._updateInputs(),this._updateOutputs()])}async _updateInputs(){if(!this.interface)return;for(let r=this._inputs.length-1;r>=0;r--){let n=this._inputs[r];Array.from(this.interface.inputs.values()).find(i=>i===n._midiInput)||(this._disconnectedInputs.push(n),this._inputs.splice(r,1))}let e=[];return this.interface.inputs.forEach(r=>{if(!this._inputs.find(n=>n._midiInput===r)){let n=this._disconnectedInputs.find(s=>s._midiInput===r);n||(n=new ZO(r)),this._inputs.push(n),e.push(n.open())}}),Promise.all(e)}async _updateOutputs(){if(!this.interface)return;for(let r=this._outputs.length-1;r>=0;r--){let n=this._outputs[r];Array.from(this.interface.outputs.values()).find(i=>i===n._midiOutput)||(this._disconnectedOutputs.push(n),this._outputs.splice(r,1))}let e=[];return this.interface.outputs.forEach(r=>{if(!this._outputs.find(n=>n._midiOutput===r)){let n=this._disconnectedOutputs.find(s=>s._midiOutput===r);n||(n=new Sh(r)),this._outputs.push(n),e.push(n.open())}}),Promise.all(e)}get enabled(){return this.interface!==null}get inputs(){return this._inputs}get isNode(){return this.validation&&console.warn("WebMidi.isNode has been deprecated. Use Utilities.isNode instead."),U.isNode}get isBrowser(){return this.validation&&console.warn("WebMidi.isBrowser has been deprecated. Use Utilities.isBrowser instead."),U.isBrowser}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get outputs(){return this._outputs}get supported(){return typeof navigator<"u"&&!!navigator.requestMIDIAccess}get sysexEnabled(){return!!(this.interface&&this.interface.sysexEnabled)}get time(){return performance.now()}get version(){return"3.1.14"}get flavour(){return"esm"}get CHANNEL_EVENTS(){return this.validation&&console.warn("The CHANNEL_EVENTS enum has been moved to Enumerations.CHANNEL_EVENTS."),I.CHANNEL_EVENTS}get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been moved to Enumerations.SYSTEM_MESSAGES."),I.SYSTEM_MESSAGES}get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been moved to Enumerations.CHANNEL_MODE_MESSAGES."),I.CHANNEL_MODE_MESSAGES}get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been replaced by the Enumerations.CONTROL_CHANGE_MESSAGES array."),I.MIDI_CONTROL_CHANGE_MESSAGES}get MIDI_REGISTERED_PARAMETER(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETER enum has been moved to Enumerations.REGISTERED_PARAMETERS."),I.REGISTERED_PARAMETERS}get NOTES(){return this.validation&&console.warn("The NOTES enum has been deprecated."),["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"]}},j=new eP;j.constructor=null;var Th=require("obsidian"),J0=class{isEnabled=!1;onMidiMessageReceived;constructor(e){this.onMidiMessageReceived=e}async enable(){if(!this.isEnabled)try{await j.enable(),this.isEnabled=!0,console.log("WebMidi enabled!"),new Th.Notice("MIDI System Enabled")}catch(e){console.error("WebMidi could not be enabled",e),new Th.Notice("Failed to enable MIDI system")}}getInputs(){return this.isEnabled?j.inputs.map(e=>e.name):[]}getOutputs(){return this.isEnabled?j.outputs.map(e=>e.name):[]}connectDevice(e){if(!this.isEnabled){new Th.Notice("MIDI not enabled. Cannot connect.");return}let r=j.getInputByName(e.inputName);r?(r.removeListener("midimessage"),console.log(`Connected to MIDI Input: ${e.inputName}`),new Th.Notice(`Listening to MIDI: ${e.name}`),r.addListener("midimessage",n=>{let s={type:n.message.type,data:n.message.dataBytes,channel:n.message.channel,command:n.message.command,note:n.message.note?n.message.note.number:null,velocity:n.message.velocity,value:n.message.value,controller:n.message.controller?n.message.controller.number:null};this.onMidiMessageReceived&&this.onMidiMessageReceived(e.name,s)})):console.warn(`MIDI Input '${e.inputName}' not found.`)}disconnectDevice(e){if(!this.isEnabled)return;let r=j.getInputByName(e.inputName);r&&(r.removeListener("midimessage"),console.log(`Disconnected MIDI Input: ${e.inputName}`))}disconnectAll(e){e.forEach(r=>this.disconnectDevice(r))}sendMidiMessage(e,r,n){if(!this.isEnabled)return;let s=r.find(c=>c.name===e);if(!s){console.warn(`MIDI Device alias '${e}' not found in settings.`);return}let i=j.getOutputByName(s.outputName);if(!i){console.warn(`MIDI Output '${s.outputName}' not found.`);return}let o=n.type||"noteon",a=n.channel||1;try{switch(o.toLowerCase()){case"noteon":i.playNote(n.note,{channels:a,attack:n.velocity||.75});break;case"noteoff":i.stopNote(n.note,{channels:a});break;case"controlchange":case"cc":i.sendControlChange(n.controller,n.value,{channels:a});break;default:console.warn("Unknown MIDI message type requested:",o)}}catch(c){console.error("Error sending MIDI message",c)}}};var P8=Mr(require("path")),x8=require("child_process"),N8=require("util");var r8=Mr(F5(),1);var t_=Mr(B5(),1);var OP=Mr(Y6(),1),PP=Mr(Z6(),1),xP=Mr(t8(),1);function Oxe(t,e,r){let n=xP.default.stringify((0,PP.default)(r+t));return xP.default.stringify((0,PP.default)(n+e))}var kh=(0,r8.default)("obs-websocket-js"),eu=class extends Error{constructor(t,e){super(e),this.code=t}},Oo,n8=(Oo=class extends t_.default{static generateMessageId(){return String(Oo.requestCounter++)}_identified=!1;internalListeners=new t_.default;socket;get identified(){return this._identified}async connect(e="ws://127.0.0.1:4455",r,n={}){this.socket&&await this.disconnect();try{let s=this.internalEventPromise("ConnectionClosed"),i=this.internalEventPromise("ConnectionError");return await Promise.race([(async()=>{let o=await this.createConnection(e);return this.emit("Hello",o),this.identify(o,r,n)})(),new Promise((o,a)=>{i.then(c=>{c.message&&a(c)}),s.then(c=>{a(c)})})])}catch(s){throw await this.disconnect(),s}}async disconnect(){if(!this.socket||this.socket.readyState===OP.default.CLOSED)return;let e=this.internalEventPromise("ConnectionClosed");this.socket.close(),await e}async reidentify(e){let r=this.internalEventPromise(`op:${2}`);return await this.message(3,e),r}async call(e,r){let n=Oo.generateMessageId(),s=this.internalEventPromise(`res:${n}`);await this.message(6,{requestId:n,requestType:e,requestData:r});let{requestStatus:i,responseData:o}=await s;if(!i.result)throw new eu(i.code,i.comment);return o}async callBatch(e,r={}){let n=Oo.generateMessageId(),s=this.internalEventPromise(`res:${n}`);await this.message(8,{requestId:n,requests:e,...r});let{results:i}=await s;return i}cleanup(){this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,this.socket=void 0,this._identified=!1,this.internalListeners.removeAllListeners())}async createConnection(e){var r;let n=this.internalEventPromise("ConnectionOpened"),s=this.internalEventPromise(`op:${0}`);this.socket=new OP.default(e,this.protocol),this.socket.onopen=this.onOpen.bind(this),this.socket.onmessage=this.onMessage.bind(this),this.socket.onerror=this.onError.bind(this),this.socket.onclose=this.onClose.bind(this),await n;let i=(r=this.socket)==null?void 0:r.protocol;if(!i)throw new eu(-1,"Server sent no subprotocol");if(i!==this.protocol)throw new eu(-1,"Server sent an invalid subprotocol");return s}async identify({authentication:e,rpcVersion:r,...n},s,i={}){let o={rpcVersion:r,...i};e&&s&&(o.authentication=Oxe(e.salt,e.challenge,s));let a=this.internalEventPromise(`op:${2}`);await this.message(1,o);let c=await a;return this._identified=!0,this.emit("Identified",c),{rpcVersion:r,...n,...c}}async message(e,r){if(!this.socket)throw new Error("Not connected");if(!this.identified&&e!==1)throw new Error("Socket not identified");let n=await this.encodeMessage({op:e,d:r});this.socket.send(n)}async internalEventPromise(e){return new Promise(r=>{this.internalListeners.once(e,r)})}onOpen(e){kh("socket.open"),this.emit("ConnectionOpened"),this.internalListeners.emit("ConnectionOpened",e)}async onMessage(e){try{let{op:r,d:n}=await this.decodeMessage(e.data);if(kh("socket.message: %d %j",r,n),r===void 0||n===void 0)return;switch(r){case 5:{let{eventType:s,eventData:i}=n;this.emit(s,i);return}case 7:case 9:{let{requestId:s}=n;this.internalListeners.emit(`res:${s}`,n);return}default:this.internalListeners.emit(`op:${r}`,n)}}catch(r){kh("error handling message: %o",r)}}onError(e){kh("socket.error: %o",e);let r=new eu(-1,e.message);this.emit("ConnectionError",r),this.internalListeners.emit("ConnectionError",r)}onClose(e){kh("socket.close: %s (%d)",e.reason,e.code);let r=new eu(e.code,e.reason);this.emit("ConnectionClosed",r),this.internalListeners.emit("ConnectionClosed",r),this.cleanup()}},Bh(Oo,"requestCounter",1),Oo);typeof exports<"u"&&Object.defineProperty(exports,"__esModule",{value:!0});var I_=Mr(R8(),1),$8=class extends n8{protocol="obswebsocket.msgpack";async encodeMessage(t){return(0,I_.encode)(t)}async decodeMessage(t){return typeof Blob<"u"&&t instanceof Blob&&(t=await t.arrayBuffer()),(0,I_.decode)(t)}};var O8=(0,N8.promisify)(x8.exec),yNe={websocketIP_Text:"localhost",websocketPort_Text:"4455",websocketPW_Text:"password",slidesPort_Text:"5000",slide_tags:[],scene_tags:[],camera_tags:[],camera_shape_tags:[],user_tags:[],newTag:"",obsAppName_Text:"OBS",obsCollection_Text:"Untitled",obsDebugPort_Text:"9222",obsAppPath_Text:"",serverPort:"57000",serverEnabled:!1,oscDevices:[],midiDevices:[]},A_=class extends _r.Plugin{settings;oscManager;midiManager;serverManager=null;obs;isObsConnected=!1;async loadSettings(){this.settings=Object.assign({},yNe,await this.loadData())}async saveSettings(){await this.saveData(this.settings),await this.saveWebsocketDetailsToFile()}async saveWebsocketDetailsToFile(){let e=this.manifest.dir;console.log(e);let r="obs_webSocket_details",n="websocketDetails.js",s=`${e}/${r}`,i=`${s}/${n}`;i=_r.Platform.isWin?i.replace(/\//g,"\\"):i;try{let o=this.app.vault.adapter;await o.exists(s)||await this.app.vault.createFolder(s);let a=parseInt(this.settings.websocketPort_Text)||4455,c=`let websocketDetails = {"IP": "${this.settings.websocketIP_Text}", "PW": "${this.settings.websocketPW_Text}", "PORT": ${a}}`;await o.write(i,c)}catch(o){console.error("Error writing websocket details file:",o)}}async onload(){if(await this.loadSettings(),this.obs=new $8,this.app.plugins.plugins["slides-studio"]&&(this.app.plugins.plugins["slides-studio"].settings.scenes=[],this.app.plugins.plugins["slides-studio"].settings.cameras=[]),this.registerView(Eh,e=>new L0(e)),this.registerView(U0,e=>new F0(e,this)),this.addRibbonIcon("aperture","open slides studio view",()=>{this.openView()}),this.addSettingTab(new q0(this.app,this)),new _r.Notice("Enabled slides studio plugin"),this.settings.serverEnabled){let e=parseInt(this.settings.serverPort)||57e3;this.serverManager=new Ul(this.app,e),this.app.workspace.onLayoutReady(()=>{this.serverManager?.start()})}this.oscManager=new H0((e,r)=>{let n={deviceName:e,message:r};this.sendToOBS(n,"osc-message")}),this.midiManager=new J0((e,r)=>{let n={deviceName:e,message:r};this.sendToOBS(n,"midi-message")}),await this.midiManager.enable(),this.addCommand({id:"connect-to-obs-websocket",name:"Connect to OBS Websocket connection",callback:()=>{new _r.Notice("Starting OBS Web Socket Server Connection");let e={IP:this.settings.websocketIP_Text,PORT:this.settings.websocketPort_Text,PW:this.settings.websocketPW_Text};this.obsWSSconnect(e)}}),this.obs.on("ConnectionOpened",()=>{console.log("Connection to OBS WebSocket successfully opened")}),this.obs.on("ConnectionClosed",()=>{console.log("Connection to OBS WebSocket closed"),this.isObsConnected=!1}),this.obs.on("ConnectionError",e=>{console.error("Connection to OBS WebSocket failed",e),this.isObsConnected=!1}),this.obs.on("Identified",async e=>{this.isObsConnected=!0,console.log("OBS WebSocket successfully identified",e);let r={IP:this.settings.websocketIP_Text,PORT:this.settings.websocketPort_Text,PW:this.settings.websocketPW_Text};await this.obs.call("CallVendorRequest",{vendorName:"obs-browser",requestType:"emit_event",requestData:{event_name:"ws-details",event_data:{wssDetails:r}}}),this.app.commands.executeCommandById("slides-studio:get-obs-scene-tags"),this.app.commands.executeCommandById("slides-studio:update-browsers-url"),this.app.commands.executeCommandById("slides-studio:set-slides-studio-obs-receiver")}),this.obs.on("ConnectionError",e=>{console.error("Socket error:",e)}),this.obs.on("CustomEvent",e=>{if(console.log("Message from OBS",e),e.event_name==="OSC-out"){let r=new Vl(e.address);Object.hasOwn(e,"arg1")&&r.append(e.arg1),Object.hasOwn(e,"arg2")&&r.append(e.arg2),Object.hasOwn(e,"arg3")&&r.append(e.arg3),Object.hasOwn(e,"arg4")&&r.append(e.arg4),Object.hasOwn(e,"arg5")&&r.append(e.arg5),Object.hasOwn(e,"arg6")&&r.append(e.arg6),Object.hasOwn(e,"arg7")&&r.append(e.arg7),console.log(`message to OSC device - ${e.osc_name}`,r),this.oscManager.sendMessage(e.osc_name,r)}if(e.event_name==="MIDI-out"){let r={type:e.arg1,channel:e.arg2,note:e.arg3,velocity:e.arg4,value:e.arg4,controller:e.arg3};console.log(`message to MIDI device - ${e.midi_name}`,r),this.midiManager.sendMidiMessage(e.midi_name,this.settings.midiDevices,r)}}),this.addCommand({id:"open-obs",name:"Open OBS",callback:async()=>{new _r.Notice("Trying to launch OBS");let e="hello";if(_r.Platform.isMacOS&&(e=`open -n -a "${this.settings.obsAppName_Text}"`,e+=` --args --collection "${this.settings.obsCollection_Text}"`,e+=` --remote-debugging-port=${this.settings.obsDebugPort_Text}`,e+=` --remote-allow-origins=http://localhost:${this.settings.obsDebugPort_Text}`,e+=` --websocket_port "${this.settings.websocketPort_Text}"`,e+=` --websocket_password "${this.settings.websocketPW_Text}"`,e+=" --multi",O8(e)),_r.Platform.isWin){let r=`${this.settings.obsAppPath_Text}${this.settings.obsAppName_Text}`,n=P8.default.dirname(r);process.chdir(n),e=`${this.settings.obsAppName_Text}`,e+=` --args --collection "${this.settings.obsCollection_Text}"`,e+=` --remote-debugging-port=${this.settings.obsDebugPort_Text}`,e+=` --remote-allow-origins=http://localhost:${this.settings.obsDebugPort_Text}`,e+=` --websocket_port "${this.settings.websocketPort_Text}"`,e+=` --websocket_password "${this.settings.websocketPW_Text}"`,e+=" --multi",O8(e)}}}),this.addCommand({id:"get-obs-scene-tags",name:"Get OBS tags",callback:async()=>{await this.getObsTags()}}),this.addCommand({id:"open-slide-studio-webview",name:"Open Slides Studio Webview",callback:async()=>{await this.openWebView()}}),this.addCommand({id:"copy-obs-browser-source-link",name:"Copy the Slides Url for OBS to the clipboard ",callback:async()=>{let r=`http://localhost:${this.settings.serverPort}/${this.manifest.dir}/slides_studio/slides_studio_OBS_browser_source.html`;try{await navigator.clipboard.writeText(r),new _r.Notice("URL copied to clipboard successfully!")}catch(n){console.error("Failed to copy: ",n)}}}),this.addCommand({id:"set-slides-studio-obs-receiver",name:"Set the Url for Slides Studio Receiver OBS Browser Sourceto the clipboard ",callback:async()=>{let r=`http://localhost:${this.settings.serverPort}/${this.manifest.dir}/slides_studio/slides_studio_OBS_browser_source.html`;try{this.obs.call("SetInputSettings",{inputName:"slides",inputSettings:{url:r}})}catch(n){console.error("Failed set slides studio receiver: ",n)}}}),this.addCommand({id:"update-browsers-url",name:"Update Slides Studio OBS browsers URL",callback:async()=>{let e=this.settings.serverPort,r=await this.obs.call("GetInputList",{inputKind:"browser_source"});for(let n=0;n<r.inputs.length;n++){let s=await this.obs.call("GetInputSettings",{inputUuid:r.inputs[n].inputUuid});console.log("settings",s);try{if(s.inputSettings.css.contains("--slides-studio-refresh")){let i=new URL(s.inputSettings.url),o=`http://localhost:${e}${i.pathname}`;this.obs.call("SetInputSettings",{inputUuid:r.inputs[n].inputUuid,inputSettings:{url:o}})}}catch(i){console.log(i)}}}}),this.addCommand({id:"refresh-obs-browsers",name:"Refresh ALL OBS browser sources",callback:async()=>{(await this.obs.call("GetInputList",{inputKind:"browser_source"})).forEach(async r=>{await this.obs.call("PressInputPropertiesButton",{inputUuid:r.inputUuid,propertyName:"refreshnocache"})})}}),this.addCommand({id:"connect-all-osc-devices",name:"Connect to ALL OSC devices",callback:async()=>{this.settings.oscDevices.forEach(e=>{e.name&&e.ip&&e.inPort&&e.outPort&&this.oscManager.connectDevice(e)})}}),this.addCommand({id:"connect-all-midi-devices",name:"Connect to ALL MIDI devices",callback:async()=>{this.settings.midiDevices.forEach(e=>{this.midiManager.connectDevice(e)})}}),this.addCommand({id:"open-visual-editor",name:"Open Visual Flow Editor",callback:async()=>{let{workspace:e}=this.app,r=e.getLeaf("tab"),s=`http://localhost:${this.settings.serverPort}/${this.manifest.dir}/slides_studio/visual_editor.html`;await r.setViewState({type:"webviewer",state:{url:s,navigate:!0},active:!0})}})}async getObsTags(){new _r.Notice("Getting OBS Tags"),this.settings.scene_tags=[],this.settings.camera_tags=[],this.settings.camera_shape_tags=[],this.settings.slide_tags=[],await this.saveData(this.settings);try{let e=await this.obs.call("GetSceneList");e.scenes.forEach(r=>{if(r.sceneName.startsWith("Scene")){let n=r.sceneName;this.settings.scene_tags.includes(n)||this.settings.scene_tags.push(n)}}),await this.saveData(this.settings),e.scenes.find(r=>r.sceneName==="Camera Position")&&(await this.obs.call("GetSceneItemList",{sceneName:"Camera Position"})).sceneItems.forEach(n=>{this.settings.camera_tags.includes(n.sourceName)||this.settings.camera_tags.push(n.sourceName)}),e.scenes.find(r=>r.sceneName==="Slide Position")&&(await this.obs.call("GetSceneItemList",{sceneName:"Slide Position"})).sceneItems.forEach(n=>{this.settings.slide_tags.includes(n.sourceName)||this.settings.slide_tags.push(n.sourceName)}),e.scenes.find(r=>r.sceneName==="Camera Shape")&&(await this.obs.call("GetSceneItemList",{sceneName:"Camera Shape"})).sceneItems.forEach(n=>{this.settings.camera_shape_tags.includes(n.sourceName)||this.settings.camera_shape_tags.push(n.sourceName)}),await this.saveData(this.settings)}catch(e){console.error("Error fetching OBS tags",e),new _r.Notice("Failed to fetch OBS Tags. Is OBS connected?")}}async obsWSSconnect(e){try{await this.disconnect();let{obsWebSocketVersion:r,negotiatedRpcVersion:n}=await this.obs.connect(`ws://${e.IP}:${e.PORT}`,e.PW,{rpcVersion:1});console.log(`Connected to server ${r} (using RPC ${n})`),new _r.Notice("Connected to OBS WebSocket Server")}catch(r){new _r.Notice("Failed to connect to OBS WebSocket Server"),console.error("Failed to connect",r.code,r.message)}}async disconnect(){try{await this.obs.disconnect(),this.isObsConnected=!1,console.log("disconnected")}catch(e){console.error("disconnect catch",e)}}sendToOBS(e,r){let n=JSON.stringify(e.message);console.log("sending to OBS",e),this.obs.call("CallVendorRequest",{vendorName:"obs-browser",requestType:"emit_event",requestData:{event_name:r,event_data:{deviceName:e.deviceName,webSocketMessage:n}}})}async openView(){let{workspace:e}=this.app,r=null,n=e.getLeavesOfType(Eh);n.length>0?r=n[0]:(r=e.getRightLeaf(!1),await r.setViewState({type:Eh,active:!0})),e.revealLeaf(r)}async openWebView(){let{workspace:e}=this.app,r=null,n=e.getLeavesOfType(U0);if(n.length>0)r=n[0];else{r=e.getLeaf("tab");let s=this.settings.serverPort;console.log(s);let i=`http://localhost:${s}/${this.manifest.dir}/slides_studio/`;console.log(i),await r.setViewState({type:"webviewer",state:{url:i,navigate:!0},active:!0})}e.revealLeaf(r)}getServerUrl(){return this.serverManager?this.serverManager.getUrl():null}onunload(){new _r.Notice("Disabled slides studio plugin"),this.serverManager&&this.serverManager.stop(),this.oscManager&&this.oscManager.disconnectAll(),this.midiManager&&this.midiManager.disconnectAll(this.settings.midiDevices),this.obs&&this.obs.disconnect()}};0&&(module.exports={});
/*! Bundled license information:

@fastify/proxy-addr/index.js:
  (*!
   * proxy-addr
   * Copyright(c) 2021 Fastify collaborators
   * Copyright(c) 2014-2016 Douglas Christopher Wilson
   * MIT Licensed
   *)

toad-cache/dist/toad-cache.cjs:
  (**
   * toad-cache
   *
   * @copyright 2024 Igor Savin <kibertoad@gmail.com>
   * @license MIT
   * @version 3.7.0
   *)

light-my-request/lib/form-data.js:
  (*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

escape-html/index.js:
  (*!
   * escape-html
   * Copyright(c) 2012-2013 TJ Holowaychuk
   * Copyright(c) 2015 Andreas Lubbe
   * Copyright(c) 2015 Tiancheng "Timothy" Gu
   * MIT Licensed
   *)

@fastify/send/lib/containsDotFile.js:
  (*!
   * send
   * Copyright(c) 2012 TJ Holowaychuk
   * Copyright(c) 2014-2022 Douglas Christopher Wilson
   * MIT Licensed
   *)

@fastify/send/lib/contentRange.js:
  (*!
   * send
   * Copyright(c) 2012 TJ Holowaychuk
   * Copyright(c) 2014-2022 Douglas Christopher Wilson
   * MIT Licensed
   *)

@fastify/send/lib/createHtmlDocument.js:
  (*!
   * send
   * Copyright(c) 2012 TJ Holowaychuk
   * Copyright(c) 2014-2022 Douglas Christopher Wilson
   * MIT Licensed
   *)

@fastify/send/lib/parseBytesRange.js:
  (*!
   * Based on range-parser
   *
   * Copyright(c) 2012-2014 TJ Holowaychuk
   * Copyright(c) 2015-2016 Douglas Christopher Wilson
   * MIT Licensed
   *)

depd/index.js:
  (*!
   * depd
   * Copyright(c) 2014-2018 Douglas Christopher Wilson
   * MIT Licensed
   *)

statuses/index.js:
  (*!
   * statuses
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2016 Douglas Christopher Wilson
   * MIT Licensed
   *)

toidentifier/index.js:
  (*!
   * toidentifier
   * Copyright(c) 2016 Douglas Christopher Wilson
   * MIT Licensed
   *)

http-errors/index.js:
  (*!
   * http-errors
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2016 Douglas Christopher Wilson
   * MIT Licensed
   *)

@fastify/send/index.js:
  (*!
   * send
   * Copyright(c) 2012 TJ Holowaychuk
   * Copyright(c) 2014-2022 Douglas Christopher Wilson
   * MIT Licensed
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

content-disposition/index.js:
  (*!
   * content-disposition
   * Copyright(c) 2014-2017 Douglas Christopher Wilson
   * MIT Licensed
   *)

webmidi/dist/esm/webmidi.esm.js:
  (**
   * The `Enumerations` class contains enumerations and arrays of elements used throughout the
   * library. All its properties are static and should be referenced using the class name. For
   * example: `Enumerations.CHANNEL_MESSAGES`.
   *
   * @license Apache-2.0
   * @since 3.0.0
   *)
  (**
   * The `Note` class represents a single musical note such as `"D3"`, `"G#4"`, `"F-1"`, `"Gb7"`, etc.
   *
   * `Note` objects can be played back on a single channel by calling
   * [`OutputChannel.playNote()`]{@link OutputChannel#playNote} or, on multiple channels of the same
   * output, by calling [`Output.playNote()`]{@link Output#playNote}.
   *
   * The note has [`attack`](#attack) and [`release`](#release) velocities set at `0.5` by default.
   * These can be changed by passing in the appropriate option. It is also possible to set a
   * system-wide default for attack and release velocities by using the
   * [`WebMidi.defaults`](WebMidi#defaults) property.
   *
   * If you prefer to work with raw MIDI values (`0` to `127`), you can use [`rawAttack`](#rawAttack) and
   * [`rawRelease`](#rawRelease) to both get and set the values.
   *
   * The note may have a [`duration`](#duration). If it does, playback will be automatically stopped
   * when the duration has elapsed by sending a `"noteoff"` event. By default, the duration is set to
   * `Infinity`. In this case, it will never stop playing unless explicitly stopped by calling a
   * method such as [`OutputChannel.stopNote()`]{@link OutputChannel#stopNote},
   * [`Output.stopNote()`]{@link Output#stopNote} or similar.
   *
   * @license Apache-2.0
   * @since 3.0.0
   *)
  (**
   * The `Utilities` class contains general-purpose utility methods. All methods are static and
   * should be called using the class name. For example: `Utilities.getNoteDetails("C4")`.
   *
   * @license Apache-2.0
   * @since 3.0.0
   *)
  (**
   * The `OutputChannel` class represents a single output MIDI channel. `OutputChannel` objects are
   * provided by an [`Output`](Output) port which, itself, is made available by a device. The
   * `OutputChannel` object is derived from the host's MIDI subsystem and should not be instantiated
   * directly.
   *
   * All 16 `OutputChannel` objects can be found inside the parent output's
   * [`channels`]{@link Output#channels} property.
   *
   * @param {Output} output The [`Output`](Output) this channel belongs to.
   * @param {number} number The MIDI channel number (`1` - `16`).
   *
   * @extends EventEmitter
   * @license Apache-2.0
   * @since 3.0.0
   *)
  (**
   * The `Output` class represents a single MIDI output port (not to be confused with a MIDI channel).
   * A port is made available by a MIDI device. A MIDI device can advertise several input and output
   * ports. Each port has 16 MIDI channels which can be accessed via the [`channels`](#channels)
   * property.
   *
   * The `Output` object is automatically instantiated by the library according to the host's MIDI
   * subsystem and should not be directly instantiated.
   *
   * You can access all available `Output` objects by referring to the
   * [`WebMidi.outputs`](WebMidi#outputs) array or by using methods such as
   * [`WebMidi.getOutputByName()`](WebMidi#getOutputByName) or
   * [`WebMidi.getOutputById()`](WebMidi#getOutputById).
   *
   * @fires Output#opened
   * @fires Output#disconnected
   * @fires Output#closed
   *
   * @extends EventEmitter
   * @license Apache-2.0
   *)
  (**
   * The `Forwarder` class allows the forwarding of MIDI messages to predetermined outputs. When you
   * call its [`forward()`](#forward) method, it will send the specified [`Message`](Message) object
   * to all the outputs listed in its [`destinations`](#destinations) property.
   *
   * If specific channels or message types have been defined in the [`channels`](#channels) or
   * [`types`](#types) properties, only messages matching the channels/types will be forwarded.
   *
   * While it can be manually instantiated, you are more likely to come across a `Forwarder` object as
   * the return value of the [`Input.addForwarder()`](Input#addForwarder) method.
   *
   * @license Apache-2.0
   * @since 3.0.0
   *)
  (**
   * The `InputChannel` class represents a single MIDI input channel (1-16) from a single input
   * device. This object is derived from the host's MIDI subsystem and should not be instantiated
   * directly.
   *
   * All 16 `InputChannel` objects can be found inside the input's [`channels`](Input#channels)
   * property.
   *
   * @fires InputChannel#midimessage
   * @fires InputChannel#unknownmessage
   *
   * @fires InputChannel#noteoff
   * @fires InputChannel#noteon
   * @fires InputChannel#keyaftertouch
   * @fires InputChannel#programchange
   * @fires InputChannel#channelaftertouch
   * @fires InputChannel#pitchbend
   *
   * @fires InputChannel#allnotesoff
   * @fires InputChannel#allsoundoff
   * @fires InputChannel#localcontrol
   * @fires InputChannel#monomode
   * @fires InputChannel#omnimode
   * @fires InputChannel#resetallcontrollers
   *
   * @fires InputChannel#event:nrpn
   * @fires InputChannel#event:nrpn-dataentrycoarse
   * @fires InputChannel#event:nrpn-dataentryfine
   * @fires InputChannel#event:nrpn-dataincrement
   * @fires InputChannel#event:nrpn-datadecrement
   * @fires InputChannel#event:rpn
   * @fires InputChannel#event:rpn-dataentrycoarse
   * @fires InputChannel#event:rpn-dataentryfine
   * @fires InputChannel#event:rpn-dataincrement
   * @fires InputChannel#event:rpn-datadecrement
   *
   * @fires InputChannel#controlchange
   * @fires InputChannel#event:controlchange-controllerxxx
   * @fires InputChannel#event:controlchange-bankselectcoarse
   * @fires InputChannel#event:controlchange-modulationwheelcoarse
   * @fires InputChannel#event:controlchange-breathcontrollercoarse
   * @fires InputChannel#event:controlchange-footcontrollercoarse
   * @fires InputChannel#event:controlchange-portamentotimecoarse
   * @fires InputChannel#event:controlchange-dataentrycoarse
   * @fires InputChannel#event:controlchange-volumecoarse
   * @fires InputChannel#event:controlchange-balancecoarse
   * @fires InputChannel#event:controlchange-pancoarse
   * @fires InputChannel#event:controlchange-expressioncoarse
   * @fires InputChannel#event:controlchange-effectcontrol1coarse
   * @fires InputChannel#event:controlchange-effectcontrol2coarse
   * @fires InputChannel#event:controlchange-generalpurposecontroller1
   * @fires InputChannel#event:controlchange-generalpurposecontroller2
   * @fires InputChannel#event:controlchange-generalpurposecontroller3
   * @fires InputChannel#event:controlchange-generalpurposecontroller4
   * @fires InputChannel#event:controlchange-bankselectfine
   * @fires InputChannel#event:controlchange-modulationwheelfine
   * @fires InputChannel#event:controlchange-breathcontrollerfine
   * @fires InputChannel#event:controlchange-footcontrollerfine
   * @fires InputChannel#event:controlchange-portamentotimefine
   * @fires InputChannel#event:controlchange-dataentryfine
   * @fires InputChannel#event:controlchange-channelvolumefine
   * @fires InputChannel#event:controlchange-balancefine
   * @fires InputChannel#event:controlchange-panfine
   * @fires InputChannel#event:controlchange-expressionfine
   * @fires InputChannel#event:controlchange-effectcontrol1fine
   * @fires InputChannel#event:controlchange-effectcontrol2fine
   * @fires InputChannel#event:controlchange-damperpedal
   * @fires InputChannel#event:controlchange-portamento
   * @fires InputChannel#event:controlchange-sostenuto
   * @fires InputChannel#event:controlchange-softpedal
   * @fires InputChannel#event:controlchange-legatopedal
   * @fires InputChannel#event:controlchange-hold2
   * @fires InputChannel#event:controlchange-soundvariation
   * @fires InputChannel#event:controlchange-resonance
   * @fires InputChannel#event:controlchange-releasetime
   * @fires InputChannel#event:controlchange-attacktime
   * @fires InputChannel#event:controlchange-brightness
   * @fires InputChannel#event:controlchange-decaytime
   * @fires InputChannel#event:controlchange-vibratorate
   * @fires InputChannel#event:controlchange-vibratodepth
   * @fires InputChannel#event:controlchange-vibratodelay
   * @fires InputChannel#event:controlchange-generalpurposecontroller5
   * @fires InputChannel#event:controlchange-generalpurposecontroller6
   * @fires InputChannel#event:controlchange-generalpurposecontroller7
   * @fires InputChannel#event:controlchange-generalpurposecontroller8
   * @fires InputChannel#event:controlchange-portamentocontrol
   * @fires InputChannel#event:controlchange-highresolutionvelocityprefix
   * @fires InputChannel#event:controlchange-effect1depth
   * @fires InputChannel#event:controlchange-effect2depth
   * @fires InputChannel#event:controlchange-effect3depth
   * @fires InputChannel#event:controlchange-effect4depth
   * @fires InputChannel#event:controlchange-effect5depth
   * @fires InputChannel#event:controlchange-dataincrement
   * @fires InputChannel#event:controlchange-datadecrement
   * @fires InputChannel#event:controlchange-nonregisteredparameterfine
   * @fires InputChannel#event:controlchange-nonregisteredparametercoarse
   * @fires InputChannel#event:controlchange-registeredparameterfine
   * @fires InputChannel#event:controlchange-registeredparametercoarse
   * @fires InputChannel#event:controlchange-allsoundoff
   * @fires InputChannel#event:controlchange-resetallcontrollers
   * @fires InputChannel#event:controlchange-localcontrol
   * @fires InputChannel#event:controlchange-allnotesoff
   * @fires InputChannel#event:controlchange-omnimodeoff
   * @fires InputChannel#event:controlchange-omnimodeon
   * @fires InputChannel#event:controlchange-monomodeon
   * @fires InputChannel#event:controlchange-polymodeon
   * @fires InputChannel#event:
   *
   * @extends EventEmitter
   * @license Apache-2.0
   * @since 3.0.0
   *)
  (**
   * The `Message` class represents a single MIDI message. It has several properties that make it
   * easy to make sense of the binary data it contains.
   *
   * @license Apache-2.0
   * @since 3.0.0
   *)
  (**
   * The `Input` class represents a single MIDI input port. This object is automatically instantiated
   * by the library according to the host's MIDI subsystem and does not need to be directly
   * instantiated. Instead, you can access all `Input` objects by referring to the
   * [`WebMidi.inputs`](WebMidi#inputs) array. You can also retrieve inputs by using methods such as
   * [`WebMidi.getInputByName()`](WebMidi#getInputByName) and
   * [`WebMidi.getInputById()`](WebMidi#getInputById).
   *
   * Note that a single MIDI device may expose several inputs and/or outputs.
   *
   * **Important**: the `Input` class does not directly fire channel-specific MIDI messages
   * (such as [`noteon`](InputChannel#event:noteon) or
   * [`controlchange`](InputChannel#event:controlchange), etc.). The [`InputChannel`](InputChannel)
   * object does that. However, you can still use the
   * [`Input.addListener()`](#addListener) method to listen to channel-specific events on multiple
   * [`InputChannel`](InputChannel) objects at once.
   *
   * @fires Input#opened
   * @fires Input#disconnected
   * @fires Input#closed
   * @fires Input#midimessage
   *
   * @fires Input#sysex
   * @fires Input#timecode
   * @fires Input#songposition
   * @fires Input#songselect
   * @fires Input#tunerequest
   * @fires Input#clock
   * @fires Input#start
   * @fires Input#continue
   * @fires Input#stop
   * @fires Input#activesensing
   * @fires Input#reset
   *
   * @fires Input#unknownmidimessage
   *
   * @extends EventEmitter
   * @license Apache-2.0
   *)
  (**
   * The `WebMidi` object makes it easier to work with the low-level Web MIDI API. Basically, it
   * simplifies sending outgoing MIDI messages and reacting to incoming MIDI messages.
   *
   * When using the WebMidi.js library, you should know that the `WebMidi` class has already been
   * instantiated. You cannot instantiate it yourself. If you use the **IIFE** version, you should
   * simply use the global object called `WebMidi`. If you use the **CJS** (CommonJS) or **ESM** (ES6
   * module) version, you get an already-instantiated object when you import the module.
   *
   * @fires WebMidi#connected
   * @fires WebMidi#disabled
   * @fires WebMidi#disconnected
   * @fires WebMidi#enabled
   * @fires WebMidi#error
   * @fires WebMidi#midiaccessgranted
   * @fires WebMidi#portschanged
   *
   * @extends EventEmitter
   * @license Apache-2.0
   *)
*/
