/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var _8=Object.create;var su=Object.defineProperty;var v8=Object.getOwnPropertyDescriptor;var w8=Object.getOwnPropertyNames;var b8=Object.getPrototypeOf,E8=Object.prototype.hasOwnProperty;var S8=(t,e,r)=>e in t?su(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var E=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),T8=(t,e)=>{for(var r in e)su(t,r,{get:e[r],enumerable:!0})},qP=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of w8(e))!E8.call(t,s)&&s!==r&&su(t,s,{get:()=>e[s],enumerable:!(n=v8(e,s))||n.enumerable});return t};var ln=(t,e,r)=>(r=t!=null?_8(b8(t)):{},qP(e||!t||!t.__esModule?su(r,"default",{value:t,enumerable:!0}):r,t)),R8=t=>qP(su({},"__esModule",{value:!0}),t);var qh=(t,e,r)=>(S8(t,typeof e!="symbol"?e+"":e,r),r),x_=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var L=(t,e,r)=>(x_(t,e,"read from private field"),r?r.call(t):e.get(t)),At=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},ut=(t,e,r,n)=>(x_(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r);var xi=(t,e,r)=>(x_(t,e,"access private method"),r);var FP=E((Hxe,LP)=>{"use strict";function $8(t){var e=new t,r=e;function n(){var i=e;return i.next?e=i.next:(e=new t,r=e),i.next=null,i}function s(i){r.next=i,r=i}return{get:n,release:s}}LP.exports=$8});var C_=E((Gxe,N_)=>{"use strict";var O8=FP();function UP(t,e,r){if(typeof t=="function"&&(r=e,e=t,t=null),!(r>=1))throw new Error("fastqueue concurrency must be equal to or greater than 1");var n=O8(P8),s=null,i=null,o=0,a=null,l={push:m,drain:cn,saturated:cn,pause:u,paused:!1,get concurrency(){return r},set concurrency(S){if(!(S>=1))throw new Error("fastqueue concurrency must be equal to or greater than 1");if(r=S,!l.paused)for(;s&&o<r;)o++,g()},running:c,resume:f,idle:h,length:d,getQueue:p,unshift:y,empty:cn,kill:w,killAndDrain:_,error:v};return l;function c(){return o}function u(){l.paused=!0}function d(){for(var S=s,$=0;S;)S=S.next,$++;return $}function p(){for(var S=s,$=[];S;)$.push(S.value),S=S.next;return $}function f(){if(l.paused){if(l.paused=!1,s===null){o++,g();return}for(;s&&o<r;)o++,g()}}function h(){return o===0&&l.length()===0}function m(S,$){var T=n.get();T.context=t,T.release=g,T.value=S,T.callback=$||cn,T.errorHandler=a,o>=r||l.paused?i?(i.next=T,i=T):(s=T,i=T,l.saturated()):(o++,e.call(t,T.value,T.worked))}function y(S,$){var T=n.get();T.context=t,T.release=g,T.value=S,T.callback=$||cn,T.errorHandler=a,o>=r||l.paused?s?(T.next=s,s=T):(s=T,i=T,l.saturated()):(o++,e.call(t,T.value,T.worked))}function g(S){S&&n.release(S);var $=s;$&&o<=r?l.paused?o--:(i===s&&(i=null),s=$.next,$.next=null,e.call(t,$.value,$.worked),i===null&&l.empty()):--o===0&&l.drain()}function w(){s=null,i=null,l.drain=cn}function _(){s=null,i=null,l.drain(),l.drain=cn}function v(S){a=S}}function cn(){}function P8(){this.value=null,this.callback=cn,this.next=null,this.release=cn,this.context=null,this.errorHandler=null;var t=this;this.worked=function(r,n){var s=t.callback,i=t.errorHandler,o=t.value;t.value=null,t.callback=cn,t.errorHandler&&i(r,o),s.call(t.context,r,n),t.release(t)}}function x8(t,e,r){typeof t=="function"&&(r=e,e=t,t=null);function n(u,d){e.call(this,u).then(function(p){d(null,p)},d)}var s=UP(t,n,r),i=s.push,o=s.unshift;return s.push=a,s.unshift=l,s.drained=c,s;function a(u){var d=new Promise(function(p,f){i(u,function(h,m){if(h){f(h);return}p(m)})});return d.catch(cn),d}function l(u){var d=new Promise(function(p,f){o(u,function(h,m){if(h){f(h);return}p(m)})});return d.catch(cn),d}function c(){var u=new Promise(function(d){process.nextTick(function(){if(s.idle())d();else{var p=s.drain;s.drain=function(){typeof p=="function"&&p(),d(),s.drain=p}}})});return u}}N_.exports=UP;N_.exports.promise=x8});var I_=E((Wxe,iu)=>{"use strict";var{format:N8}=require("util");function C8(){return`${this.name} [${this.code}]: ${this.message}`}var Lh=Symbol.for("fastify-error-generic");function Za(t,e,r=500,n=Error,s=Za.captureStackTrace){let i=t===Lh;if(i&&(t="FST_ERR"),!t)throw new Error("Fastify error code must not be empty");if(!e)throw new Error("Fastify error message must not be empty");t=t.toUpperCase(),!r&&(r=void 0);let o=Symbol.for(`fastify-error ${t}`);function a(...l){if(!new.target)return new a(...l);this.code=t,this.name="FastifyError",this.statusCode=r;let c=l.length-1;c!==-1&&l[c]&&typeof l[c]=="object"&&"cause"in l[c]&&(this.cause=l.pop().cause),this.message=N8(e,...l),Error.stackTraceLimit&&s&&Error.captureStackTrace(this,a)}return a.prototype=Object.create(n.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0},[Lh]:{value:!0,enumerable:!1,writable:!1,configurable:!1},[o]:{value:!0,enumerable:!1,writable:!1,configurable:!1}}),i?Object.defineProperty(a,Symbol.hasInstance,{value(l){return l&&l[Lh]},configurable:!1,writable:!1,enumerable:!1}):Object.defineProperty(a,Symbol.hasInstance,{value(l){return l&&l[o]},configurable:!1,writable:!1,enumerable:!1}),a.prototype[Symbol.toStringTag]="Error",a.prototype.toString=C8,a}Za.captureStackTrace=!0;var I8=Za(Lh,"Fastify Error",500,Error);iu.exports=Za;iu.exports.FastifyError=I8;iu.exports.default=Za;iu.exports.createError=Za});var Fh=E((Kxe,BP)=>{"use strict";var{createError:Ni}=I_();BP.exports={AVV_ERR_EXPOSE_ALREADY_DEFINED:Ni("AVV_ERR_EXPOSE_ALREADY_DEFINED","'%s' is already defined, specify an expose option for '%s'"),AVV_ERR_ATTRIBUTE_ALREADY_DEFINED:Ni("AVV_ERR_ATTRIBUTE_ALREADY_DEFINED","'%s' is already defined"),AVV_ERR_CALLBACK_NOT_FN:Ni("AVV_ERR_CALLBACK_NOT_FN","Callback for '%s' hook is not a function. Received: '%s'"),AVV_ERR_PLUGIN_NOT_VALID:Ni("AVV_ERR_PLUGIN_NOT_VALID","Plugin must be a function or a promise. Received: '%s'"),AVV_ERR_ROOT_PLG_BOOTED:Ni("AVV_ERR_ROOT_PLG_BOOTED","Root plugin has already booted"),AVV_ERR_PARENT_PLG_LOADED:Ni("AVV_ERR_PARENT_PLG_LOADED","Impossible to load '%s' plugin because the parent '%s' was already loaded"),AVV_ERR_READY_TIMEOUT:Ni("AVV_ERR_READY_TIMEOUT","Plugin did not start in time: '%s'. You may have forgotten to call 'done' function or to resolve a Promise"),AVV_ERR_PLUGIN_EXEC_TIMEOUT:Ni("AVV_ERR_PLUGIN_EXEC_TIMEOUT","Plugin did not start in time: '%s'. You may have forgotten to call 'done' function or to resolve a Promise")}});var el=E((Jxe,zP)=>{"use strict";var A8=Symbol("avvio.Boot"),k8=Symbol("isOnCloseHandler"),D8=Symbol("avvio.ThenifyDoNotWrap"),M8=Symbol("avvio.TimeTree.untrackNode"),j8=Symbol("avvio.TimeTree.trackNode"),q8=Symbol("avvio.TimeTree.getParent"),L8=Symbol("avvio.TimeTree.getNode"),F8=Symbol("avvio.TimeTree.addNode"),U8=Symbol.for("plugin-meta");zP.exports={kAvvio:A8,kIsOnCloseHandler:k8,kThenifyDoNotWrap:D8,kUntrackNode:M8,kTrackNode:j8,kGetParent:q8,kGetNode:L8,kAddNode:F8,kPluginMeta:U8}});var YP=E((Yxe,JP)=>{"use strict";var{kUntrackNode:VP,kTrackNode:A_,kGetParent:HP,kGetNode:GP,kAddNode:WP}=el(),k_=class{constructor(){this.root=null,this.tableId=new Map,this.tableLabel=new Map}[A_](e){this.tableId.set(e.id,e),this.tableLabel.has(e.label)?this.tableLabel.get(e.label).push(e):this.tableLabel.set(e.label,[e])}[VP](e){this.tableId.delete(e.id);let r=this.tableLabel.get(e.label);r.pop(),r.length===0&&this.tableLabel.delete(e.label)}[HP](e){if(e===null)return null;if(this.tableLabel.has(e)){let r=this.tableLabel.get(e);return r[r.length-1]}else return null}[GP](e){return this.tableId.get(e)}[WP](e,r,n){let s=this[HP](e);if(s===null)return this.root={parent:null,id:"root",label:r,nodes:[],start:n,stop:null,diff:-1},this[A_](this.root),this.root.id;let o=`${r}-${Math.random()}`,a={parent:e,id:o,label:r,nodes:[],start:n,stop:null,diff:-1};return s.nodes.push(a),this[A_](a),o}start(e,r,n=Date.now()){return this[WP](e,r,n)}stop(e,r=Date.now()){let n=this[GP](e);n&&(n.stop=r,n.diff=n.stop-n.start||0,this[VP](n))}toJSON(){return Object.assign({},this.root)}prettyPrint(){return KP(this.toJSON())}};function KP(t,e=""){let r=e,n=t.nodes.length,s=n-1;r+=`${t.label} ${t.diff} ms
`;for(let i=0;i<n;++i){let o=t.nodes[i],a=e+(i===s?"  ":"\u2502 ");r+=e,r+=i===s?"\u2514\u2500":"\u251C\u2500",r+=o.nodes.length===0?"\u2500 ":"\u252C ",r+=KP(o,a).slice(e.length+2)}return r}JP.exports={TimeTree:k_}});var Uh=E((Xxe,XP)=>{"use strict";var{debuglog:B8}=require("util"),z8=B8("avvio");XP.exports={debug:z8}});var ZP=E((Qxe,QP)=>{"use strict";function V8(){let t={resolve:null,reject:null,promise:null};return t.promise=new Promise((e,r)=>{t.resolve=e,t.reject=r}),t}QP.exports={createPromise:V8}});var tx=E((Zxe,ex)=>{"use strict";var{kPluginMeta:D_}=el();function H8(t,e){return t[D_]&&t[D_].name?t[D_].name:e&&e.name?e.name:t.name?t.name:t.toString().split(`
`).slice(0,2).map(r=>r.trim()).join(" -- ")}ex.exports={getPluginName:H8}});var Bh=E((eNe,rx)=>{"use strict";function G8(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}rx.exports={isPromiseLike:G8}});var sx=E((tNe,nx)=>{"use strict";var{EventEmitter:W8}=require("events"),{inherits:K8}=require("util"),{debug:zt}=Uh(),{createPromise:J8}=ZP(),{AVV_ERR_PLUGIN_EXEC_TIMEOUT:Y8}=Fh(),{getPluginName:X8}=tx(),{isPromiseLike:Q8}=Bh();function tl(t,e,r,n,s){this.queue=t,this.func=e,this.options=r,this.isAfter=n,this.timeout=s,this.started=!1,this.name=X8(e,r),this.queue.pause(),this._error=null,this.loaded=!1,this._promise=null,this.startTime=null}K8(tl,W8);tl.prototype.exec=function(t,e){zt("exec",this.name),this.server=t;let r=this.func,n=this.name,s=!1;this.options=typeof this.options=="function"?this.options(this.server):this.options;let i=null,o=l=>{if(s){zt("loading complete",n);return}this._error=l,zt(l?"exec errored":"exec completed",n),s=!0,i&&clearTimeout(i),e(l)};this.timeout>0&&(zt("setting up timeout",n,this.timeout),i=setTimeout(function(){zt("timed out",n),i=null;let l=new Y8(n);l.fn=r,o(l)},this.timeout)),this.started=!0,this.startTime=Date.now(),this.emit("start",this.server?this.server.name:null,this.name,Date.now());let a=r(this.server,this.options,o);Q8(a)?(zt("exec: resolving promise",n),a.then(()=>process.nextTick(o),l=>process.nextTick(o,l))):r.length<3&&o()};tl.prototype.loadedSoFar=function(){if(zt("loadedSoFar",this.name),this.loaded)return Promise.resolve();let t=()=>{this.server.after((r,n)=>{this._error=r,this.queue.pause(),this._promise&&(r?(zt("rejecting promise",this.name,r),this._promise.reject(r)):(zt("resolving promise",this.name),this._promise.resolve()),this._promise=null),process.nextTick(n,r)}),this.queue.resume()},e;return this._promise?e=Promise.resolve():(this._promise=J8(),e=this._promise.promise,this.server?t():this.on("start",t)),e};tl.prototype.enqueue=function(t,e){zt("enqueue",this.name,t.name),this.emit("enqueue",this.server?this.server.name:null,this.name,Date.now()),this.queue.push(t,e)};tl.prototype.finish=function(t,e){zt("finish",this.name,t);let r=()=>{this.loaded||(zt("loaded",this.name),this.emit("loaded",this.server?this.server.name:null,this.name,Date.now()),this.loaded=!0,e(t))};if(t){this._promise&&(this._promise.reject(t),this._promise=null),r();return}let n=()=>{if(zt("check",this.name,this.queue.length(),this.queue.running(),this._promise),this.queue.length()===0&&this.queue.running()===0)if(this._promise){let s=()=>{zt("wrap"),queueMicrotask(n)};this._promise.resolve(),this._promise.promise.then(s,s),this._promise=null}else r();else zt("delayed",this.name),this.queue.drain=()=>{zt("drain",this.name),this.queue.drain=Z8,queueMicrotask(n)}};queueMicrotask(n),this.queue.resume()};function Z8(){}nx.exports={Plugin:tl}});var ox=E((rNe,ix)=>{"use strict";var{AVV_ERR_PLUGIN_NOT_VALID:M_}=Fh();function e9(t){if(!(t&&(typeof t=="function"||typeof t.then=="function")))throw Array.isArray(t)?new M_("array"):t===null?new M_("null"):new M_(typeof t)}ix.exports={validatePlugin:e9}});var lx=E((nNe,ax)=>{"use strict";function t9(t){return t!==null&&typeof t=="object"&&typeof t.default=="function"}ax.exports={isBundledOrTypescriptPlugin:t9}});var fx=E((sNe,ux)=>{"use strict";var{debug:cx}=Uh(),{kThenifyDoNotWrap:j_}=el();function r9(){if(this.booted){cx("thenify returning undefined because we are already booted");return}if(this[j_]){this[j_]=!1;return}return cx("thenify"),(t,e)=>this._loadRegistered().then(()=>(this[j_]=!0,t(this._server)),e)}ux.exports={thenify:r9}});var hx=E((iNe,dx)=>{"use strict";var{isPromiseLike:n9}=Bh(),{kAvvio:s9}=el();function i9(t,e,r){let n=t.apply(t,e);n9(n)&&!n[s9]?n.then(()=>process.nextTick(r),s=>process.nextTick(r,s)):r&&process.nextTick(r)}dx.exports={executeWithThenable:i9}});var Ex=E((oNe,bx)=>{"use strict";var zh=C_(),o9=require("events").EventEmitter,a9=require("util").inherits,{AVV_ERR_EXPOSE_ALREADY_DEFINED:ou,AVV_ERR_CALLBACK_NOT_FN:rl,AVV_ERR_ROOT_PLG_BOOTED:l9,AVV_ERR_READY_TIMEOUT:c9,AVV_ERR_ATTRIBUTE_ALREADY_DEFINED:u9}=Fh(),{kAvvio:gx,kIsOnCloseHandler:yx}=el(),{TimeTree:f9}=YP(),{Plugin:_x}=sx(),{debug:nl}=Uh(),{validatePlugin:d9}=ox(),{isBundledOrTypescriptPlugin:h9}=lx(),{isPromiseLike:p9}=Bh(),{thenify:vx}=fx(),{executeWithThenable:px}=hx();function Rt(t,e,r){if(typeof t=="function"&&arguments.length===1&&(r=t,e={},t=null),typeof e=="function"&&(r=e,e={}),e=e||{},e.autostart=e.autostart!==!1,e.timeout=Number(e.timeout)||0,e.expose=e.expose||{},!new.target)return new Rt(t,e,r);this._server=t||this,this._opts=e,t&&this._expose(),this._current=[],this._error=null,this._lastUsed=null,this.setMaxListeners(0),r&&this.once("start",r),this.started=!1,this.booted=!1,this.pluginTree=new f9,this._readyQ=zh(this,wx,1),this._readyQ.pause(),this._readyQ.drain=()=>{this.emit("start"),this._readyQ.drain=mx},this._closeQ=zh(this,g9,1),this._closeQ.pause(),this._closeQ.drain=()=>{this.emit("close"),this._closeQ.drain=mx},this._doStart=null;let n=this;this._root=new _x(zh(this,this._loadPluginNextTick,1),function(i,o,a){n._doStart=a,o.autostart&&n.start()},e,!1,0),this._trackPluginLoading(this._root),this._loadPlugin(this._root,s=>{nl("root plugin ready");try{this.emit("preReady"),this._root=null}catch(i){s=s||this._error||i}if(s){if(this._error=s,this._readyQ.length()===0)throw s}else this.booted=!0;this._readyQ.resume()})}a9(Rt,o9);Rt.prototype.start=function(){return this.started=!0,process.nextTick(this._doStart),this};Rt.prototype.override=function(t,e,r){return t};Rt.prototype[gx]=!0;Rt.prototype.use=function(t,e){return this._lastUsed=this._addPlugin(t,e,!1),this};Rt.prototype._loadRegistered=function(){let t=this._current[0];return!this.started&&!this.booted&&process.nextTick(()=>this._root.queue.resume()),t?t.loadedSoFar():Promise.resolve()};Object.defineProperty(Rt.prototype,"then",{get:vx});Rt.prototype._addPlugin=function(t,e,r){if(h9(t)&&(t=t.default),d9(t),e=e||{},this.booted)throw new l9;let n=this._current[0],s=this._opts.timeout;if(!n.loaded&&n.timeout>0){let o=Date.now()-n.startTime;s=n.timeout-(o+3)}let i=new _x(zh(this,this._loadPluginNextTick,1),t,e,r,s);if(this._trackPluginLoading(i),n.loaded)throw new Error(i.name,n.name);return n.enqueue(i,o=>{o&&(this._error=o)}),i};Rt.prototype._expose=function(){let e=this,r=e._server,{use:n="use",after:s="after",ready:i="ready",onClose:o="onClose",close:a="close"}=this._opts.expose;if(r[n])throw new ou(n,"use");if(r[n]=function(l,c){return e.use(l,c),this},r[s])throw new ou(s,"after");if(r[s]=function(l){return typeof l!="function"?e._loadRegistered():(e.after(q_(l,this)),this)},r[i])throw new ou(i,"ready");if(r[i]=function(l){if(l&&typeof l!="function")throw new rl(i,typeof l);return e.ready(l?q_(l,this):void 0)},r[o])throw new ou(o,"onClose");if(r[o]=function(l){if(typeof l!="function")throw new rl(o,typeof l);return e.onClose(y9(l,this)),this},r[a])throw new ou(a,"close");if(r[a]=function(l){if(l&&typeof l!="function")throw new rl(a,typeof l);return l?(e.close(q_(l,this)),this):e.close()},r.then)throw new u9("then");Object.defineProperty(r,"then",{get:vx.bind(e)}),r[gx]=!0};Rt.prototype.after=function(t){if(!t)return this._loadRegistered();this._addPlugin(e.bind(this),{},!0);function e(r,n,s){wx.call(this,t,s)}return this};Rt.prototype.onClose=function(t){if(typeof t!="function")throw new rl("onClose",typeof t);return t[yx]=!0,this._closeQ.unshift(t,e=>{e&&(this._error=e)}),this};Rt.prototype.close=function(t){let e;if(t){if(typeof t!="function")throw new rl("close",typeof t)}else e=new Promise(function(r,n){t=function(s){if(s)return n(s);r()}});return this.ready(()=>{this._error=null,this._closeQ.push(t),process.nextTick(this._closeQ.resume.bind(this._closeQ))}),e};Rt.prototype.ready=function(t){if(t){if(typeof t!="function")throw new rl("ready",typeof t);this._readyQ.push(t),queueMicrotask(this.start.bind(this));return}return new Promise((e,r)=>{this._readyQ.push(s),this.start();let n=this._current[0].server;function s(i,o,a){i?r(i):e(n),process.nextTick(a)}})};Rt.prototype._trackPluginLoading=function(t){let e=this._current[0]?.name||null;t.once("start",(r,n,s)=>{let i=this.pluginTree.start(e||null,n,s);t.once("loaded",(o,a,l)=>{this.pluginTree.stop(i,l)})})};Rt.prototype.prettyPrint=function(){return this.pluginTree.prettyPrint()};Rt.prototype.toJSON=function(){return this.pluginTree.toJSON()};Rt.prototype._loadPlugin=function(t,e){let r=this;if(p9(t.func)){t.func.then(o=>{typeof o.default=="function"&&(o=o.default),t.func=o,this._loadPlugin(t,e)},e);return}let n=r._current[0];if(r._current.unshift(t),r._error&&!t.isAfter){nl("skipping loading of plugin as instance errored and it is not an after",t.name),process.nextTick(i);return}let s=n&&n.server||r._server;if(!t.isAfter)try{s=r.override(s,t.func,t.options)}catch(o){return nl("override errored",t.name),i(o)}t.exec(s,i);function i(o){t.finish(o,a=>{r._current.shift(),e(a)})}};Rt.prototype._loadPluginNextTick=function(t,e){process.nextTick(this._loadPlugin.bind(this),t,e)};function mx(){}function wx(t,e){let r=this._server,n=this._error;if(this._error=null,t.length===0)this._error=n,px(t,[],e);else if(t.length===1)px(t,[n],e);else if(this._opts.timeout===0){let s=i=>{this._error=i,e(this._error)};t.length===2?t(n,s):t(n,r,s)}else m9.call(this,t,n,r,e)}function m9(t,e,r,n){let s=t.unwrappedName??t.name;nl("setting up ready timeout",s,this._opts.timeout);let i=setTimeout(()=>{nl("timed out",s),i=null;let a=new c9(s);a.fn=t,this._error=a,n(a)},this._opts.timeout);t.length===2?t(e,o.bind(this)):t(e,r,o.bind(this));function o(a){i&&(clearTimeout(i),this._error=a,n(this._error))}}function g9(t,e){let r=this._server,n=t[yx];if(t.length===0||t.length===1){let s;n?s=t(r):s=t(this._error),s&&typeof s.then=="function"?(nl("resolving close/onClose promise"),s.then(()=>process.nextTick(e),i=>process.nextTick(e,i))):process.nextTick(e)}else t.length===2?t(n?r:this._error,e):n?t(r,e):t(this._error,r,e)}function y9(t,e){return r.bind(e);function r(n,s){let i;t.length===0?(i=t(),i&&i.then?i.then(function(){process.nextTick(s)},s):process.nextTick(s)):t.length===1?(i=t(this),i&&i.then?i.then(function(){process.nextTick(s)},s):process.nextTick(s)):t(this,s)}}function q_(t,e){let r=n.bind(e);return r.unwrappedName=t.name,r;function n(s,i){let o;t?t.length===0?(o=t(),o&&o.then?o.then(function(){process.nextTick(i,s)},i):process.nextTick(i,s)):t.length===1?(o=t(s),o&&o.then?o.then(function(){process.nextTick(i)},i):process.nextTick(i)):t.length===2?t(s,i):t(s,this,i):process.nextTick(i)}}bx.exports=Rt});var Nt=E((aNe,Sx)=>{"use strict";var _9={kAvvioBoot:Symbol("fastify.avvioBoot"),kChildren:Symbol("fastify.children"),kServerBindings:Symbol("fastify.serverBindings"),kBodyLimit:Symbol("fastify.bodyLimit"),kSupportedHTTPMethods:Symbol("fastify.acceptedHTTPMethods"),kRoutePrefix:Symbol("fastify.routePrefix"),kLogLevel:Symbol("fastify.logLevel"),kLogSerializers:Symbol("fastify.logSerializers"),kHooks:Symbol("fastify.hooks"),kContentTypeParser:Symbol("fastify.contentTypeParser"),kState:Symbol("fastify.state"),kOptions:Symbol("fastify.options"),kDisableRequestLogging:Symbol("fastify.disableRequestLogging"),kPluginNameChain:Symbol("fastify.pluginNameChain"),kRouteContext:Symbol("fastify.context"),kGenReqId:Symbol("fastify.genReqId"),kHttp2ServerSessions:Symbol("fastify.http2ServerSessions"),kSchemaController:Symbol("fastify.schemaController"),kSchemaHeaders:Symbol("headers-schema"),kSchemaParams:Symbol("params-schema"),kSchemaQuerystring:Symbol("querystring-schema"),kSchemaBody:Symbol("body-schema"),kSchemaResponse:Symbol("response-schema"),kSchemaErrorFormatter:Symbol("fastify.schemaErrorFormatter"),kSchemaVisited:Symbol("fastify.schemas.visited"),kRequest:Symbol("fastify.Request"),kRequestPayloadStream:Symbol("fastify.RequestPayloadStream"),kRequestAcceptVersion:Symbol("fastify.RequestAcceptVersion"),kRequestCacheValidateFns:Symbol("fastify.request.cache.validateFns"),kRequestOriginalUrl:Symbol("fastify.request.originalUrl"),kFourOhFour:Symbol("fastify.404"),kCanSetNotFoundHandler:Symbol("fastify.canSetNotFoundHandler"),kFourOhFourLevelInstance:Symbol("fastify.404LogLevelInstance"),kFourOhFourContext:Symbol("fastify.404ContextKey"),kDefaultJsonParse:Symbol("fastify.defaultJSONParse"),kReply:Symbol("fastify.Reply"),kReplySerializer:Symbol("fastify.reply.serializer"),kReplyIsError:Symbol("fastify.reply.isError"),kReplyHeaders:Symbol("fastify.reply.headers"),kReplyTrailers:Symbol("fastify.reply.trailers"),kReplyHasStatusCode:Symbol("fastify.reply.hasStatusCode"),kReplyHijacked:Symbol("fastify.reply.hijacked"),kReplyStartTime:Symbol("fastify.reply.startTime"),kReplyNextErrorHandler:Symbol("fastify.reply.nextErrorHandler"),kReplyEndTime:Symbol("fastify.reply.endTime"),kReplyErrorHandlerCalled:Symbol("fastify.reply.errorHandlerCalled"),kReplyIsRunningOnErrorHook:Symbol("fastify.reply.isRunningOnErrorHook"),kReplySerializerDefault:Symbol("fastify.replySerializerDefault"),kReplyCacheSerializeFns:Symbol("fastify.reply.cache.serializeFns"),kTestInternals:Symbol("fastify.testInternals"),kErrorHandler:Symbol("fastify.errorHandler"),kErrorHandlerAlreadySet:Symbol("fastify.errorHandlerAlreadySet"),kChildLoggerFactory:Symbol("fastify.childLoggerFactory"),kHasBeenDecorated:Symbol("fastify.hasBeenDecorated"),kKeepAliveConnections:Symbol("fastify.keepAliveConnections"),kRouteByFastify:Symbol("fastify.routeByFastify")};Sx.exports=_9});var Rx=E((lNe,Vh)=>{"use strict";var{format:L_}=require("util");function v9(t){return Tx({...t,name:"DeprecationWarning"})}function Tx({name:t,code:e,message:r,unlimited:n=!1}={}){if(!t)throw new Error("Warning name must not be empty");if(!e)throw new Error("Warning code must not be empty");if(!r)throw new Error("Warning message must not be empty");if(typeof n!="boolean")throw new Error("Warning opts.unlimited must be a boolean");e=e.toUpperCase();let s={[t]:function(o,a,l){i.emitted===!0&&i.unlimited!==!0||(i.emitted=!0,process.emitWarning(i.format(o,a,l),i.name,i.code))}};n&&(s={[t]:function(o,a,l){i.emitted=!0,process.emitWarning(i.format(o,a,l),i.name,i.code)}});let i=s[t];return i.emitted=!1,i.message=r,i.unlimited=n,i.code=e,i.format=function(o,a,l){let c;return o&&a&&l?c=L_(r,o,a,l):o&&a?c=L_(r,o,a):o?c=L_(r,o):c=r,c},i}var F_={createWarning:Tx,createDeprecation:v9};Vh.exports=F_;Vh.exports.default=F_;Vh.exports.processWarning=F_});var sl=E((cNe,$x)=>{"use strict";var{createWarning:au}=Rx(),w9=au({name:"FastifyWarning",code:"FSTWRN001",message:"The %s schema for %s: %s is missing. This may indicate the schema is not well specified.",unlimited:!0}),b9=au({name:"FastifyWarning",code:"FSTWRN003",message:"The %s mixes async and callback styles that may lead to unhandled rejections. Please use only one of them.",unlimited:!0}),E9=au({name:"FastifyWarning",code:"FSTWRN004",message:"It seems that you are overriding an errorHandler in the same scope, which can lead to subtle bugs.",unlimited:!0}),S9=au({name:"FastifySecurity",code:"FSTSEC001",message:'You are using /%s/ Content-Type which may be vulnerable to CORS attack. Please make sure your RegExp start with "^" or include ";?" to proper detection of the essence MIME type.',unlimited:!0}),T9=au({name:"FastifyWarning",code:"FSTDEP022",message:'The router options for %s property access is deprecated. Please use "options.routerOptions" instead for accessing router options. The router options will be removed in `fastify@6`.',unlimited:!0});$x.exports={FSTWRN001:w9,FSTWRN003:b9,FSTWRN004:E9,FSTSEC001:S9,FSTDEP022:T9}});var Vt=E((uNe,Hh)=>{"use strict";var F=I_(),Ao={FST_ERR_NOT_FOUND:F("FST_ERR_NOT_FOUND","Not Found",404),FST_ERR_OPTIONS_NOT_OBJ:F("FST_ERR_OPTIONS_NOT_OBJ","Options must be an object",500,TypeError),FST_ERR_QSP_NOT_FN:F("FST_ERR_QSP_NOT_FN","querystringParser option should be a function, instead got '%s'",500,TypeError),FST_ERR_SCHEMA_CONTROLLER_BUCKET_OPT_NOT_FN:F("FST_ERR_SCHEMA_CONTROLLER_BUCKET_OPT_NOT_FN","schemaController.bucket option should be a function, instead got '%s'",500,TypeError),FST_ERR_SCHEMA_ERROR_FORMATTER_NOT_FN:F("FST_ERR_SCHEMA_ERROR_FORMATTER_NOT_FN","schemaErrorFormatter option should be a non async function. Instead got '%s'.",500,TypeError),FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_OBJ:F("FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_OBJ","ajv.customOptions option should be an object, instead got '%s'",500,TypeError),FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_ARR:F("FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_ARR","ajv.plugins option should be an array, instead got '%s'",500,TypeError),FST_ERR_VALIDATION:F("FST_ERR_VALIDATION","%s",400),FST_ERR_LISTEN_OPTIONS_INVALID:F("FST_ERR_LISTEN_OPTIONS_INVALID","Invalid listen options: '%s'",500,TypeError),FST_ERR_ERROR_HANDLER_NOT_FN:F("FST_ERR_ERROR_HANDLER_NOT_FN","Error Handler must be a function",500,TypeError),FST_ERR_ERROR_HANDLER_ALREADY_SET:F("FST_ERR_ERROR_HANDLER_ALREADY_SET","Error Handler already set in this scope. Set 'allowErrorHandlerOverride: true' to allow overriding.",500,TypeError),FST_ERR_CTP_ALREADY_PRESENT:F("FST_ERR_CTP_ALREADY_PRESENT","Content type parser '%s' already present."),FST_ERR_CTP_INVALID_TYPE:F("FST_ERR_CTP_INVALID_TYPE","The content type should be a string or a RegExp",500,TypeError),FST_ERR_CTP_EMPTY_TYPE:F("FST_ERR_CTP_EMPTY_TYPE","The content type cannot be an empty string",500,TypeError),FST_ERR_CTP_INVALID_HANDLER:F("FST_ERR_CTP_INVALID_HANDLER","The content type handler should be a function",500,TypeError),FST_ERR_CTP_INVALID_PARSE_TYPE:F("FST_ERR_CTP_INVALID_PARSE_TYPE","The body parser can only parse your data as 'string' or 'buffer', you asked '%s' which is not supported.",500,TypeError),FST_ERR_CTP_BODY_TOO_LARGE:F("FST_ERR_CTP_BODY_TOO_LARGE","Request body is too large",413,RangeError),FST_ERR_CTP_INVALID_MEDIA_TYPE:F("FST_ERR_CTP_INVALID_MEDIA_TYPE","Unsupported Media Type: %s",415),FST_ERR_CTP_INVALID_CONTENT_LENGTH:F("FST_ERR_CTP_INVALID_CONTENT_LENGTH","Request body size did not match Content-Length",400,RangeError),FST_ERR_CTP_EMPTY_JSON_BODY:F("FST_ERR_CTP_EMPTY_JSON_BODY","Body cannot be empty when content-type is set to 'application/json'",400),FST_ERR_CTP_INVALID_JSON_BODY:F("FST_ERR_CTP_INVALID_JSON_BODY","Body is not valid JSON but content-type is set to 'application/json'",400),FST_ERR_CTP_INSTANCE_ALREADY_STARTED:F("FST_ERR_CTP_INSTANCE_ALREADY_STARTED",'Cannot call "%s" when fastify instance is already started!',400),FST_ERR_DEC_ALREADY_PRESENT:F("FST_ERR_DEC_ALREADY_PRESENT","The decorator '%s' has already been added!"),FST_ERR_DEC_DEPENDENCY_INVALID_TYPE:F("FST_ERR_DEC_DEPENDENCY_INVALID_TYPE","The dependencies of decorator '%s' must be of type Array.",500,TypeError),FST_ERR_DEC_MISSING_DEPENDENCY:F("FST_ERR_DEC_MISSING_DEPENDENCY","The decorator is missing dependency '%s'."),FST_ERR_DEC_AFTER_START:F("FST_ERR_DEC_AFTER_START","The decorator '%s' has been added after start!"),FST_ERR_DEC_REFERENCE_TYPE:F("FST_ERR_DEC_REFERENCE_TYPE","The decorator '%s' of type '%s' is a reference type. Use the { getter, setter } interface instead."),FST_ERR_DEC_UNDECLARED:F("FST_ERR_DEC_UNDECLARED","No decorator '%s' has been declared on %s."),FST_ERR_HOOK_INVALID_TYPE:F("FST_ERR_HOOK_INVALID_TYPE","The hook name must be a string",500,TypeError),FST_ERR_HOOK_INVALID_HANDLER:F("FST_ERR_HOOK_INVALID_HANDLER","%s hook should be a function, instead got %s",500,TypeError),FST_ERR_HOOK_INVALID_ASYNC_HANDLER:F("FST_ERR_HOOK_INVALID_ASYNC_HANDLER","Async function has too many arguments. Async hooks should not use the 'done' argument.",500,TypeError),FST_ERR_HOOK_NOT_SUPPORTED:F("FST_ERR_HOOK_NOT_SUPPORTED","%s hook not supported!",500,TypeError),FST_ERR_MISSING_MIDDLEWARE:F("FST_ERR_MISSING_MIDDLEWARE","You must register a plugin for handling middlewares, visit fastify.dev/docs/latest/Reference/Middleware/ for more info.",500),FST_ERR_HOOK_TIMEOUT:F("FST_ERR_HOOK_TIMEOUT","A callback for '%s' hook%s timed out. You may have forgotten to call 'done' function or to resolve a Promise"),FST_ERR_LOG_INVALID_DESTINATION:F("FST_ERR_LOG_INVALID_DESTINATION","Cannot specify both logger.stream and logger.file options"),FST_ERR_LOG_INVALID_LOGGER:F("FST_ERR_LOG_INVALID_LOGGER","Invalid logger object provided. The logger instance should have these functions(s): '%s'.",500,TypeError),FST_ERR_LOG_INVALID_LOGGER_INSTANCE:F("FST_ERR_LOG_INVALID_LOGGER_INSTANCE","loggerInstance only accepts a logger instance.",500,TypeError),FST_ERR_LOG_INVALID_LOGGER_CONFIG:F("FST_ERR_LOG_INVALID_LOGGER_CONFIG","logger options only accepts a configuration object.",500,TypeError),FST_ERR_LOG_LOGGER_AND_LOGGER_INSTANCE_PROVIDED:F("FST_ERR_LOG_LOGGER_AND_LOGGER_INSTANCE_PROVIDED","You cannot provide both logger and loggerInstance. Please provide only one.",500,TypeError),FST_ERR_REP_INVALID_PAYLOAD_TYPE:F("FST_ERR_REP_INVALID_PAYLOAD_TYPE","Attempted to send payload of invalid type '%s'. Expected a string or Buffer.",500,TypeError),FST_ERR_REP_RESPONSE_BODY_CONSUMED:F("FST_ERR_REP_RESPONSE_BODY_CONSUMED","Response.body is already consumed."),FST_ERR_REP_READABLE_STREAM_LOCKED:F("FST_ERR_REP_READABLE_STREAM_LOCKED","ReadableStream was locked. You should call releaseLock() method on reader before sending."),FST_ERR_REP_ALREADY_SENT:F("FST_ERR_REP_ALREADY_SENT",'Reply was already sent, did you forget to "return reply" in "%s" (%s)?'),FST_ERR_REP_SENT_VALUE:F("FST_ERR_REP_SENT_VALUE","The only possible value for reply.sent is true.",500,TypeError),FST_ERR_SEND_INSIDE_ONERR:F("FST_ERR_SEND_INSIDE_ONERR","You cannot use `send` inside the `onError` hook"),FST_ERR_SEND_UNDEFINED_ERR:F("FST_ERR_SEND_UNDEFINED_ERR","Undefined error has occurred"),FST_ERR_BAD_STATUS_CODE:F("FST_ERR_BAD_STATUS_CODE","Called reply with an invalid status code: %s"),FST_ERR_BAD_TRAILER_NAME:F("FST_ERR_BAD_TRAILER_NAME","Called reply.trailer with an invalid header name: %s"),FST_ERR_BAD_TRAILER_VALUE:F("FST_ERR_BAD_TRAILER_VALUE","Called reply.trailer('%s', fn) with an invalid type: %s. Expected a function."),FST_ERR_FAILED_ERROR_SERIALIZATION:F("FST_ERR_FAILED_ERROR_SERIALIZATION","Failed to serialize an error. Error: %s. Original error: %s"),FST_ERR_MISSING_SERIALIZATION_FN:F("FST_ERR_MISSING_SERIALIZATION_FN",'Missing serialization function. Key "%s"'),FST_ERR_MISSING_CONTENTTYPE_SERIALIZATION_FN:F("FST_ERR_MISSING_CONTENTTYPE_SERIALIZATION_FN",'Missing serialization function. Key "%s:%s"'),FST_ERR_REQ_INVALID_VALIDATION_INVOCATION:F("FST_ERR_REQ_INVALID_VALIDATION_INVOCATION",'Invalid validation invocation. Missing validation function for HTTP part "%s" nor schema provided.'),FST_ERR_SCH_MISSING_ID:F("FST_ERR_SCH_MISSING_ID","Missing schema $id property"),FST_ERR_SCH_ALREADY_PRESENT:F("FST_ERR_SCH_ALREADY_PRESENT","Schema with id '%s' already declared!"),FST_ERR_SCH_CONTENT_MISSING_SCHEMA:F("FST_ERR_SCH_CONTENT_MISSING_SCHEMA","Schema is missing for the content type '%s'"),FST_ERR_SCH_DUPLICATE:F("FST_ERR_SCH_DUPLICATE","Schema with '%s' already present!"),FST_ERR_SCH_VALIDATION_BUILD:F("FST_ERR_SCH_VALIDATION_BUILD","Failed building the validation schema for %s: %s, due to error %s"),FST_ERR_SCH_SERIALIZATION_BUILD:F("FST_ERR_SCH_SERIALIZATION_BUILD","Failed building the serialization schema for %s: %s, due to error %s"),FST_ERR_SCH_RESPONSE_SCHEMA_NOT_NESTED_2XX:F("FST_ERR_SCH_RESPONSE_SCHEMA_NOT_NESTED_2XX",'response schemas should be nested under a valid status code, e.g { 2xx: { type: "object" } }'),FST_ERR_INIT_OPTS_INVALID:F("FST_ERR_INIT_OPTS_INVALID","Invalid initialization options: '%s'"),FST_ERR_FORCE_CLOSE_CONNECTIONS_IDLE_NOT_AVAILABLE:F("FST_ERR_FORCE_CLOSE_CONNECTIONS_IDLE_NOT_AVAILABLE","Cannot set forceCloseConnections to 'idle' as your HTTP server does not support closeIdleConnections method"),FST_ERR_DUPLICATED_ROUTE:F("FST_ERR_DUPLICATED_ROUTE","Method '%s' already declared for route '%s'"),FST_ERR_BAD_URL:F("FST_ERR_BAD_URL","'%s' is not a valid url component",400,URIError),FST_ERR_ASYNC_CONSTRAINT:F("FST_ERR_ASYNC_CONSTRAINT","Unexpected error from async constraint",500),FST_ERR_INVALID_URL:F("FST_ERR_INVALID_URL","URL must be a string. Received '%s'",400,TypeError),FST_ERR_ROUTE_OPTIONS_NOT_OBJ:F("FST_ERR_ROUTE_OPTIONS_NOT_OBJ",'Options for "%s:%s" route must be an object',500,TypeError),FST_ERR_ROUTE_DUPLICATED_HANDLER:F("FST_ERR_ROUTE_DUPLICATED_HANDLER",'Duplicate handler for "%s:%s" route is not allowed!',500),FST_ERR_ROUTE_HANDLER_NOT_FN:F("FST_ERR_ROUTE_HANDLER_NOT_FN","Error Handler for %s:%s route, if defined, must be a function",500,TypeError),FST_ERR_ROUTE_MISSING_HANDLER:F("FST_ERR_ROUTE_MISSING_HANDLER",'Missing handler function for "%s:%s" route.',500),FST_ERR_ROUTE_METHOD_INVALID:F("FST_ERR_ROUTE_METHOD_INVALID","Provided method is invalid!",500,TypeError),FST_ERR_ROUTE_METHOD_NOT_SUPPORTED:F("FST_ERR_ROUTE_METHOD_NOT_SUPPORTED","%s method is not supported.",500),FST_ERR_ROUTE_BODY_VALIDATION_SCHEMA_NOT_SUPPORTED:F("FST_ERR_ROUTE_BODY_VALIDATION_SCHEMA_NOT_SUPPORTED","Body validation schema for %s:%s route is not supported!",500),FST_ERR_ROUTE_BODY_LIMIT_OPTION_NOT_INT:F("FST_ERR_ROUTE_BODY_LIMIT_OPTION_NOT_INT","'bodyLimit' option must be an integer > 0. Got '%s'",500,TypeError),FST_ERR_ROUTE_REWRITE_NOT_STR:F("FST_ERR_ROUTE_REWRITE_NOT_STR",'Rewrite url for "%s" needs to be of type "string" but received "%s"',500,TypeError),FST_ERR_REOPENED_CLOSE_SERVER:F("FST_ERR_REOPENED_CLOSE_SERVER","Fastify has already been closed and cannot be reopened"),FST_ERR_REOPENED_SERVER:F("FST_ERR_REOPENED_SERVER","Fastify is already listening"),FST_ERR_INSTANCE_ALREADY_LISTENING:F("FST_ERR_INSTANCE_ALREADY_LISTENING","Fastify instance is already listening. %s"),FST_ERR_PLUGIN_VERSION_MISMATCH:F("FST_ERR_PLUGIN_VERSION_MISMATCH","fastify-plugin: %s - expected '%s' fastify version, '%s' is installed"),FST_ERR_PLUGIN_NOT_PRESENT_IN_INSTANCE:F("FST_ERR_PLUGIN_NOT_PRESENT_IN_INSTANCE","The decorator '%s'%s is not present in %s"),FST_ERR_PLUGIN_INVALID_ASYNC_HANDLER:F("FST_ERR_PLUGIN_INVALID_ASYNC_HANDLER","The %s plugin being registered mixes async and callback styles. Async plugin should not mix async and callback style.",500,TypeError),FST_ERR_PLUGIN_CALLBACK_NOT_FN:F("FST_ERR_PLUGIN_CALLBACK_NOT_FN","fastify-plugin: %s",500,TypeError),FST_ERR_PLUGIN_NOT_VALID:F("FST_ERR_PLUGIN_NOT_VALID","fastify-plugin: %s"),FST_ERR_ROOT_PLG_BOOTED:F("FST_ERR_ROOT_PLG_BOOTED","fastify-plugin: %s"),FST_ERR_PARENT_PLUGIN_BOOTED:F("FST_ERR_PARENT_PLUGIN_BOOTED","fastify-plugin: %s"),FST_ERR_PLUGIN_TIMEOUT:F("FST_ERR_PLUGIN_TIMEOUT","fastify-plugin: %s")};function R9(t,e){return e.cause=t,e}Hh.exports=Ao;Hh.exports.appendStackTrace=R9;Hh.exports.AVVIO_ERRORS_MAP={AVV_ERR_CALLBACK_NOT_FN:Ao.FST_ERR_PLUGIN_CALLBACK_NOT_FN,AVV_ERR_PLUGIN_NOT_VALID:Ao.FST_ERR_PLUGIN_NOT_VALID,AVV_ERR_ROOT_PLG_BOOTED:Ao.FST_ERR_ROOT_PLG_BOOTED,AVV_ERR_PARENT_PLG_LOADED:Ao.FST_ERR_PARENT_PLUGIN_BOOTED,AVV_ERR_READY_TIMEOUT:Ao.FST_ERR_PLUGIN_TIMEOUT,AVV_ERR_PLUGIN_EXEC_TIMEOUT:Ao.FST_ERR_PLUGIN_TIMEOUT}});var Ci=E((fNe,Dx)=>{"use strict";var $9=["onRoute","onRegister","onReady","onListen","preClose","onClose"],Nx=["onTimeout","onRequest","preParsing","preValidation","preSerialization","preHandler","onSend","onResponse","onError","onRequestAbort"],O9=Nx.concat($9),{FST_ERR_HOOK_INVALID_TYPE:P9,FST_ERR_HOOK_INVALID_HANDLER:x9,FST_ERR_SEND_UNDEFINED_ERR:Gh,FST_ERR_HOOK_TIMEOUT:N9,FST_ERR_HOOK_NOT_SUPPORTED:C9,AVVIO_ERRORS_MAP:Ox,appendStackTrace:Px}=Vt(),{kChildren:lu,kHooks:Cx,kRequestPayloadStream:xx}=Nt();function cu(){this.onRequest=[],this.preParsing=[],this.preValidation=[],this.preSerialization=[],this.preHandler=[],this.onResponse=[],this.onSend=[],this.onError=[],this.onRoute=[],this.onRegister=[],this.onReady=[],this.onListen=[],this.onTimeout=[],this.onRequestAbort=[],this.preClose=[]}cu.prototype=Object.create(null);cu.prototype.validate=function(t,e){if(typeof t!="string")throw new P9;if(Array.isArray(this[t])===!1)throw new C9(t);if(typeof e!="function")throw new x9(t,Object.prototype.toString.call(e))};cu.prototype.add=function(t,e){this.validate(t,e),this[t].push(e)};function I9(t){let e=new cu;return e.onRequest=t.onRequest.slice(),e.preParsing=t.preParsing.slice(),e.preValidation=t.preValidation.slice(),e.preSerialization=t.preSerialization.slice(),e.preHandler=t.preHandler.slice(),e.onSend=t.onSend.slice(),e.onResponse=t.onResponse.slice(),e.onError=t.onError.slice(),e.onRoute=t.onRoute.slice(),e.onRegister=t.onRegister.slice(),e.onTimeout=t.onTimeout.slice(),e.onRequestAbort=t.onRequestAbort.slice(),e.onReady=[],e.onListen=[],e.preClose=[],e}function Ix(t,e,r,n){let s=r[Cx][t],i=0,o=0;l();function a(u){let d=s[i-1]?.name,p=d?` "${d}"`:"";if(u){u.code==="AVV_ERR_READY_TIMEOUT"?u=Px(u,new N9(t,p)):u=Ox[u.code]!=null?Px(u,new Ox[u.code](u.message)):u,n(u);return}n()}function l(u){if(u){a(u);return}if(i===s.length&&o===r[lu].length){i===0&&o===0?a():e(function(p,f){a(p),f(p)});return}if(i===s.length&&o<r[lu].length){let d=r[lu][o++];Ix(t,e,d,l);return}e(c(s[i++],r)),l()}function c(u,d){return function(p,f){if(p){f(p);return}if(u.length===1){try{u.call(d,f)}catch(h){f(h)}return}try{let h=u.call(d);if(h&&typeof h.then=="function"){h.then(f,f);return}}catch(h){p=h}f(p)}}}function Ax(t){let e=t[Cx].onListen,r=e.length,n=0,s=0;i();function i(a){if(a&&t.log.error(a),n===r){for(;s<t[lu].length;){let l=t[lu][s++];Ax(l)}return}o(e[n++],t,i)}async function o(a,l,c){if(a.length===1){try{a.call(l,c)}catch(u){c(u)}return}try{let u=a.call(l);if(u&&typeof u.then=="function"){u.then(c,c);return}c()}catch(u){c(u)}}}function il(t){return function(r,n,s,i){let o=0;function a(u){if(u||o===r.length){i(u,n,s);return}let d;try{d=t(r[o++],n,s,a)}catch(p){i(p,n,s);return}d&&typeof d.then=="function"&&d.then(l,c)}function l(){a()}function c(u){u||(u=new Gh),i(u,n,s)}a()}}function A9(t,e,r,n){return t(e,r,n)}var k9=il(A9),D9=il(uu),M9=il(uu),j9=il(uu),q9=il(uu);function kx(t,e,r,n,s){let i=0;function o(c,u){if(c){s(c,e,r,n);return}if(u!==void 0&&(n=u),i===t.length){s(null,e,r,n);return}let d;try{d=t[i++](e,r,n,o)}catch(p){s(p,e,r);return}d&&typeof d.then=="function"&&d.then(a,l)}function a(c){o(null,c)}function l(c){c||(c=new Gh),s(c,e,r,n)}o()}var L9=kx;function F9(t,e,r,n){let s=0;function i(l,c){if(r.sent)return;if(c!==void 0&&(e[xx]=c),l||s===t.length){n(l,e,r);return}let u;try{u=t[s++](e,r,e[xx],i)}catch(d){n(d,e,r);return}u&&typeof u.then=="function"&&u.then(o,a)}function o(l){i(null,l)}function a(l){l||(l=new Gh),n(l,e,r)}i()}function U9(t,e,r){let n=0;function s(a){if(a||n===t.length){r(a,e);return}let l;try{l=t[n++](e,s)}catch(c){r(c,e);return}l&&typeof l.then=="function"&&l.then(i,o)}function i(){s()}function o(a){a||(a=new Gh),r(a,e)}s()}function uu(t,e,r,n){if(r.sent!==!0)return t(e,r,n)}Dx.exports={Hooks:cu,buildHooks:I9,hookRunnerGenerator:il,preParsingHookRunner:F9,onResponseHookRunner:k9,onSendHookRunner:kx,preSerializationHookRunner:L9,onRequestAbortHookRunner:U9,hookIterator:uu,hookRunnerApplication:Ix,onListenHookRunner:Ax,preHandlerHookRunner:M9,preValidationHookRunner:D9,onRequestHookRunner:q9,onTimeoutHookRunner:j9,lifecycleHooks:Nx,supportedHooks:O9}});var jx=E((dNe,Mx)=>{"use strict";Mx.exports=function(){return{[Symbol.iterator]:function*(){},add(){},delete(){},has(){return!0}}}});var U_=E((hNe,Lx)=>{"use strict";var{kTestInternals:B9}=Nt();function qx(){let t,e;return{promise:new Promise((n,s)=>{t=n,e=s}),resolve:t,reject:e}}Lx.exports={withResolvers:typeof Promise.withResolvers=="function"?Promise.withResolvers.bind(Promise):qx,[B9]:{withResolvers:qx}}});var Yx=E((pNe,Jx)=>{"use strict";var z9=require("http"),V9=require("https"),Fx=require("http2"),H9=require("dns"),G9=require("os"),{kState:_t,kOptions:W9,kServerBindings:K9,kHttp2ServerSessions:ko}=Nt(),{FSTWRN003:J9}=sl(),{onListenHookRunner:Wh}=Ci(),{FST_ERR_REOPENED_CLOSE_SERVER:Bx,FST_ERR_REOPENED_SERVER:zx,FST_ERR_LISTEN_OPTIONS_INVALID:Y9,FST_ERR_FORCE_CLOSE_CONNECTIONS_IDLE_NOT_AVAILABLE:X9}=Vt(),Q9=jx(),Vx=U_();Jx.exports.createServer=Z9;function Hx(t){return`Server listening at ${t}`}function Z9(t,e){let r=Wx(t,e);function n(c={port:0,host:"localhost"},u=void 0){if(typeof u=="function"&&(u.constructor.name==="AsyncFunction"&&J9("listen method"),c.cb=u),c.signal){if(typeof c.signal.on!="function"&&typeof c.signal.addEventListener!="function")throw new Y9("Invalid options.signal");if(this[_t].aborted=c.signal.aborted,this[_t].aborted)return this.close();{let p=()=>{this[_t].aborted=!0,this.close()};c.signal.addEventListener("abort",p,{once:!0})}}let d;if(c.path==null?d=c.host??"localhost":d=c.host,(!Object.hasOwn(c,"host")||c.host==null)&&(c.host=d),d==="localhost"?c.cb=(p,f)=>{if(p){u(p,f);return}Ux.call(this,r,e,t,c,()=>{this[_t].listening=!0,u(null,f),Wh(this)})}:c.cb=(p,f)=>{if(p){u(p,f);return}this[_t].listening=!0,u(null,f),Wh(this)},u===void 0)return eW.call(this,r,c).then(f=>{let{promise:h,resolve:m}=Vx.withResolvers();return d==="localhost"?Ux.call(this,r,e,t,c,()=>{this[_t].listening=!0,m(f),Wh(this)}):(m(f),Wh(this)),h});this.ready(Gx.call(this,r,c))}let s=typeof r.closeAllConnections=="function",i=typeof r.closeIdleConnections=="function",o=typeof r.closeHttp2Sessions=="function",a=t.forceCloseConnections;if(a==="idle"&&!i)throw new X9;typeof a!="boolean"&&(a=i?"idle":!1);let l=!s&&a===!0?new Set:Q9();return{server:r,listen:n,forceCloseConnections:a,serverHasCloseAllConnections:s,serverHasCloseHttp2Sessions:o,keepAliveConnections:l}}function Ux(t,e,r,n,s){this[_t].listening=!1,H9.lookup(n.host,{all:!0},(i,o)=>{if(i||this[_t].aborted){s();return}let a=t.listening&&r.serverFactory,l=0,c=0;if(!a){let d=t.address();for(let p of o)if(p.address!==d.address){l++;let f=Object.assign({},n,{host:p.address,port:d.port,cb:y=>{c++,y||this[K9].push(h),c===l&&s()}}),h=Wx(r,e),m=()=>{h.close(()=>{}),typeof h.closeAllConnections=="function"&&r.forceCloseConnections===!0&&h.closeAllConnections(),typeof h.closeHttp2Sessions=="function"&&h.closeHttp2Sessions()};h.on("upgrade",t.emit.bind(t,"upgrade")),t.on("unref",m),t.on("close",m),t.on("error",m),this[_t].listening=!1,Gx.call(this,h,f)()}}if(l===0){s();return}let u=t.unref;t.unref=function(){u.call(t),t.emit("unref")}})}function Gx(t,e){let r=n=>{if(t.removeListener("error",r),t.removeListener("listening",r),n)this[_t].listening=!1,e.cb(n,null);else{let s=Kx.call(this,t,e.listenTextResolver||Hx);e.cb(null,s)}};return n=>{if(n!=null)return e.cb(n);if(this[_t].listening&&this[_t].closing)return e.cb(new Bx,null);if(this[_t].listening)return e.cb(new zx,null);t.once("error",r),this[_t].closing||(t.once("listening",r),t.listen(e),this[_t].listening=!0)}}function eW(t,e){return this[_t].listening&&this[_t].closing?Promise.reject(new Bx):this[_t].listening?Promise.reject(new zx):this.ready().then(()=>{if(this[_t].aborted)return;let{promise:r,resolve:n,reject:s}=Vx.withResolvers(),i=l=>{a(),this[_t].listening=!1,s(l)},o=()=>{a(),this[_t].listening=!0,n(Kx.call(this,t,e.listenTextResolver||Hx))};function a(){t.removeListener("error",i),t.removeListener("listening",o)}return t.once("error",i),t.once("listening",o),t.listen(e),r})}function Wx(t,e){if(t.serverFactory)return t.serverFactory(e,t);let r=t.https===!0?{}:t.https;if(t.http2){let s=typeof r=="object"?Fx.createSecureServer(r,e):Fx.createServer(t.http,e);return s.on("session",i=>i.setTimeout(t.http2SessionTimeout,()=>{i.close()})),t.forceCloseConnections===!0&&(s.closeHttp2Sessions=rW(s)),s.setTimeout(t.connectionTimeout),s}let n=r?V9.createServer(r,e):z9.createServer(t.http,e);return n.keepAliveTimeout=t.keepAliveTimeout,n.requestTimeout=t.requestTimeout,n.setTimeout(t.connectionTimeout),t.maxRequestsPerSocket>0&&(n.maxRequestsPerSocket=t.maxRequestsPerSocket),n}function tW(t){return t.address==="0.0.0.0"?Object.values(G9.networkInterfaces()).flatMap(e=>e.filter(r=>r.family==="IPv4")).sort(e=>e.internal?-1:1).map(e=>e.address):[t.address]}function Kx(t,e){let r;typeof t.address()=="string"?r=[t.address()]:(t.address().address.indexOf(":")===-1?r=tW(t.address()).map(s=>s+":"+t.address().port):r=["["+t.address().address+"]:"+t.address().port],r=r.map(s=>"http"+(this[W9].https?"s":"")+"://"+s));for(let s of r)this.log.info(e(s));return r[0]}function rW(t){return t[ko]=new Set,t.on("session",function(e){e.once("connect",function(){t[ko].add(e)}),e.once("close",function(){t[ko].delete(e)}),e.once("frameError",function(r,n,s){s===0&&t[ko].delete(e)}),e.once("goaway",function(){t[ko].delete(e)})}),function(){if(t[ko].size!==0)for(let r of t[ko])r.close()}}});var V_=E((mNe,Qx)=>{"use strict";var{kSchemaHeaders:Yh,kSchemaParams:B_,kSchemaQuerystring:z_,kSchemaBody:Do,kSchemaResponse:Xx}=Nt(),nW=/^[1-5](?:\d{2}|xx)$|^default$/,{FST_ERR_SCH_RESPONSE_SCHEMA_NOT_NESTED_2XX:sW}=Vt(),{FSTWRN001:Kh}=sl();function iW(t,e){if(!t.schema||!t.schema.response)return;let{method:r,url:n}=t.config||{};t[Xx]=Object.keys(t.schema.response).reduce(function(s,i){let o=t.schema.response[i];if(i=i.toLowerCase(),!nW.test(i))throw new sW;if(o.content){let a={};for(let l of Object.keys(o.content)){let c=o.content[l].schema;a[l]=e({schema:c,url:n,method:r,httpStatus:i,contentType:l})}s[i]=a}else s[i]=e({schema:o,url:n,method:r,httpStatus:i});return s},{})}function oW(t,e,r){let{schema:n}=t;if(!n)return;let{method:s,url:i}=t.config||{},o=n.headers;if(o&&(r||Object.getPrototypeOf(o)!==Object.prototype))t[Yh]=e({schema:o,method:s,url:i,httpPart:"headers"});else if(o){let a={};Object.keys(o).forEach(l=>{a[l]=o[l]}),a.required instanceof Array&&(a.required=a.required.map(l=>l.toLowerCase())),o.properties&&(a.properties={},Object.keys(o.properties).forEach(l=>{a.properties[l.toLowerCase()]=o.properties[l]})),t[Yh]=e({schema:a,method:s,url:i,httpPart:"headers"})}else Object.hasOwn(n,"headers")&&Kh("headers",s,i);if(n.body){let a=n.body.content;if(a){let l={};for(let c of Object.keys(a)){let u=a[c].schema;l[c]=e({schema:u,method:s,url:i,httpPart:"body",contentType:c})}t[Do]=l}else t[Do]=e({schema:n.body,method:s,url:i,httpPart:"body"})}else Object.hasOwn(n,"body")&&Kh("body",s,i);n.querystring?t[z_]=e({schema:n.querystring,method:s,url:i,httpPart:"querystring"}):Object.hasOwn(n,"querystring")&&Kh("querystring",s,i),n.params?t[B_]=e({schema:n.params,method:s,url:i,httpPart:"params"}):Object.hasOwn(n,"params")&&Kh("params",s,i)}function Jh(t,e,r){let n=e[r]===void 0,s;try{s=t?.(n?null:e[r])}catch(o){return o.statusCode=500,o}if(s&&typeof s.then=="function")return s.then(o=>i(o)).catch(o=>o);return i(s);function i(o){return o===!1?t.errors:o&&o.error?o.error:(o&&o.value&&(e[r]=o.value),!1)}}function Xh(t,e,r){let n=r===void 0;if(n||!r.skipParams){let i=Jh(t[B_],e,"params");if(i)return typeof i.then!="function"?Ii(i,"params",t.schemaErrorFormatter):aW(i,t,e)}if(n||!r.skipBody){let i=null;if(typeof t[Do]=="function")i=t[Do];else if(t[Do]){let a=fW(e.headers["content-type"]),l=t[Do][a];l&&(i=l)}let o=Jh(i,e,"body");if(o)return typeof o.then!="function"?Ii(o,"body",t.schemaErrorFormatter):lW(o,t,e)}if(n||!r.skipQuery){let i=Jh(t[z_],e,"query");if(i)return typeof i.then!="function"?Ii(i,"querystring",t.schemaErrorFormatter):cW(i,t,e)}let s=Jh(t[Yh],e,"headers");return s?typeof s.then!="function"?Ii(s,"headers",t.schemaErrorFormatter):uW(s,t,e):!1}function aW(t,e,r){return t.then(n=>n?Ii(n,"params",e.schemaErrorFormatter):Xh(e,r,{skipParams:!0}))}function lW(t,e,r){return t.then(n=>n?Ii(n,"body",e.schemaErrorFormatter):Xh(e,r,{skipParams:!0,skipBody:!0}))}function cW(t,e,r){return t.then(n=>n?Ii(n,"querystring",e.schemaErrorFormatter):Xh(e,r,{skipParams:!0,skipBody:!0,skipQuery:!0}))}function uW(t,e,r){return t.then(n=>n?Ii(n,"headers",e.schemaErrorFormatter):!1)}function Ii(t,e,r){if(t instanceof Error)return t.statusCode=t.statusCode||400,t.code=t.code||"FST_ERR_VALIDATION",t.validationContext=t.validationContext||e,t;let n=r(t,e);return n.statusCode=n.statusCode||400,n.code=n.code||"FST_ERR_VALIDATION",n.validation=t,n.validationContext=e,n}function fW(t){return t?t.split(/[ ;]/,1)[0].trim().toLowerCase():""}Qx.exports={symbols:{bodySchema:Do,querystringSchema:z_,responseSchema:Xx,paramsSchema:B_,headersSchema:Yh},compileSchemasForValidation:oW,compileSchemasForSerialization:iW,validate:Xh}});var H_=E((gNe,eN)=>{"use strict";var{kReplyIsError:Zx,kReplyHijacked:dW}=Nt(),hW=require("diagnostics_channel"),fu=hW.tracingChannel("fastify.request.handler");function pW(t,e,r){r&&(r.async=!0),t.then(function(n){if(e[dW]!==!0){r&&fu.asyncStart.publish(r);try{if(n!==void 0||e.sent===!1&&e.raw.headersSent===!1&&e.request.raw.aborted===!1&&e.request.socket&&!e.request.socket.destroyed)try{e.send(n)}catch(s){e[Zx]=!0,e.send(s)}}finally{r&&fu.asyncEnd.publish(r)}}},function(n){r&&(r.error=n,fu.error.publish(r),fu.asyncStart.publish(r));try{if(e.sent===!0){e.log.error({err:n},"Promise errored, but reply.sent = true was set");return}e[Zx]=!0,e.send(n)}catch(s){e.send(s)}finally{r&&fu.asyncEnd.publish(r)}})}eN.exports=pW});var J_=E((yNe,K_)=>{"use strict";var mW=require("diagnostics_channel"),{validate:gW}=V_(),{preValidationHookRunner:yW,preHandlerHookRunner:_W}=Ci(),vW=H_(),{kReplyIsError:Qh,kRouteContext:hs,kFourOhFourContext:wW,kSupportedHTTPMethods:tN}=Nt(),du=mW.tracingChannel("fastify.request.handler");function bW(t,e,r){if(r.sent===!0)return;if(t!=null){r[Qh]=!0,r.send(t);return}let n=e.method;if(this[tN].bodyless.has(n)){ol(e,r);return}if(this[tN].bodywith.has(n)){let s=e.headers,i=s["content-type"];if(i===void 0){let o=s["content-length"];if(s["transfer-encoding"]===void 0&&(o===void 0||o==="0")){ol(e,r);return}e[hs].contentTypeParser.run("",ol,e,r);return}e[hs].contentTypeParser.run(i,ol,e,r);return}ol(e,r)}function ol(t,e){try{t[hs].preValidation!==null?yW(t[hs].preValidation,t,e,G_):G_(null,t,e)}catch(r){G_(r,t,e)}}function G_(t,e,r){if(r.sent===!0)return;if(t!=null){r[Qh]=!0,r.send(t);return}let n=gW(r[hs],e);if(n&&typeof n.then=="function"||!1){let i=rN.bind(null,e,r);n.then(i,i)}else rN(e,r,n)}function rN(t,e,r){if(r){if(e[hs].attachValidation===!1){e.send(r);return}e.request.validationError=r}t[hs].preHandler!==null?_W(t[hs].preHandler,t,e,W_):W_(null,t,e)}function W_(t,e,r){if(r.sent)return;let n=e[hs];if(!du.hasSubscribers||n[wW]===null)nN(t,e,r);else{let s={request:e,reply:r,async:!1,route:{url:n.config.url,method:n.config.method}};du.start.runStores(s,nN,void 0,t,e,r,s)}}function nN(t,e,r,n){let s=e[hs];try{if(t!=null){r[Qh]=!0,r.send(t),n&&(n.error=t,du.error.publish(n));return}let i;try{i=s.handler(e,r)}catch(o){n&&(n.error=o,du.error.publish(n)),r[Qh]=!0,r.send(o);return}i!==void 0&&(i!==null&&typeof i.then=="function"?vW(i,r,n):r.send(i))}finally{n&&du.end.publish(n)}}K_.exports=bW;K_.exports[Symbol.for("internals")]={handler:ol,preHandlerCallback:W_}});var iN=E((_Ne,sN)=>{"use strict";function al(){}var EW={fatal:al,error:al,warn:al,info:al,debug:al,trace:al};Object.defineProperty(sN,"exports",{get(){return Object.create(EW)}})});var X_=E((vNe,lN)=>{"use strict";var hu=t=>t&&typeof t.message=="string",Y_=t=>{if(!t)return;let e=t.cause;if(typeof e=="function"){let r=t.cause();return hu(r)?r:void 0}else return hu(e)?e:void 0},oN=(t,e)=>{if(!hu(t))return"";let r=t.stack||"";if(e.has(t))return r+`
causes have become circular...`;let n=Y_(t);return n?(e.add(t),r+`
caused by: `+oN(n,e)):r},SW=t=>oN(t,new Set),aN=(t,e,r)=>{if(!hu(t))return"";let n=r?"":t.message||"";if(e.has(t))return n+": ...";let s=Y_(t);if(s){e.add(t);let i=typeof t.cause=="function";return n+(i?"":": ")+aN(s,e,i)}else return n},TW=t=>aN(t,new Set);lN.exports={isErrorLike:hu,getErrorCause:Y_,stackWithCauses:SW,messageWithCauses:TW}});var Q_=E((wNe,uN)=>{"use strict";var RW=Symbol("circular-ref-tag"),Zh=Symbol("pino-raw-err-ref"),cN=Object.create({},{type:{enumerable:!0,writable:!0,value:void 0},message:{enumerable:!0,writable:!0,value:void 0},stack:{enumerable:!0,writable:!0,value:void 0},aggregateErrors:{enumerable:!0,writable:!0,value:void 0},raw:{enumerable:!1,get:function(){return this[Zh]},set:function(t){this[Zh]=t}}});Object.defineProperty(cN,Zh,{writable:!0,value:{}});uN.exports={pinoErrProto:cN,pinoErrorSymbols:{seen:RW,rawSymbol:Zh}}});var hN=E((bNe,dN)=>{"use strict";dN.exports=ev;var{messageWithCauses:$W,stackWithCauses:OW,isErrorLike:fN}=X_(),{pinoErrProto:PW,pinoErrorSymbols:xW}=Q_(),{seen:Z_}=xW,{toString:NW}=Object.prototype;function ev(t){if(!fN(t))return t;t[Z_]=void 0;let e=Object.create(PW);e.type=NW.call(t.constructor)==="[object Function]"?t.constructor.name:t.name,e.message=$W(t),e.stack=OW(t),Array.isArray(t.errors)&&(e.aggregateErrors=t.errors.map(r=>ev(r)));for(let r in t)if(e[r]===void 0){let n=t[r];fN(n)?r!=="cause"&&!Object.prototype.hasOwnProperty.call(n,Z_)&&(e[r]=ev(n)):e[r]=n}return delete t[Z_],e.raw=t,e}});var mN=E((ENe,pN)=>{"use strict";pN.exports=tp;var{isErrorLike:tv}=X_(),{pinoErrProto:CW,pinoErrorSymbols:IW}=Q_(),{seen:ep}=IW,{toString:AW}=Object.prototype;function tp(t){if(!tv(t))return t;t[ep]=void 0;let e=Object.create(CW);e.type=AW.call(t.constructor)==="[object Function]"?t.constructor.name:t.name,e.message=t.message,e.stack=t.stack,Array.isArray(t.errors)&&(e.aggregateErrors=t.errors.map(r=>tp(r))),tv(t.cause)&&!Object.prototype.hasOwnProperty.call(t.cause,ep)&&(e.cause=tp(t.cause));for(let r in t)if(e[r]===void 0){let n=t[r];tv(n)?Object.prototype.hasOwnProperty.call(n,ep)||(e[r]=tp(n)):e[r]=n}return delete t[ep],e.raw=t,e}});var vN=E((SNe,_N)=>{"use strict";_N.exports={mapHttpRequest:kW,reqSerializer:yN};var rv=Symbol("pino-raw-req-ref"),gN=Object.create({},{id:{enumerable:!0,writable:!0,value:""},method:{enumerable:!0,writable:!0,value:""},url:{enumerable:!0,writable:!0,value:""},query:{enumerable:!0,writable:!0,value:""},params:{enumerable:!0,writable:!0,value:""},headers:{enumerable:!0,writable:!0,value:{}},remoteAddress:{enumerable:!0,writable:!0,value:""},remotePort:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[rv]},set:function(t){this[rv]=t}}});Object.defineProperty(gN,rv,{writable:!0,value:{}});function yN(t){let e=t.info||t.socket,r=Object.create(gN);if(r.id=typeof t.id=="function"?t.id():t.id||(t.info?t.info.id:void 0),r.method=t.method,t.originalUrl)r.url=t.originalUrl;else{let n=t.path;r.url=typeof n=="string"?n:t.url?t.url.path||t.url:void 0}return t.query&&(r.query=t.query),t.params&&(r.params=t.params),r.headers=t.headers,r.remoteAddress=e&&e.remoteAddress,r.remotePort=e&&e.remotePort,r.raw=t.raw||t,r}function kW(t){return{req:yN(t)}}});var SN=E((TNe,EN)=>{"use strict";EN.exports={mapHttpResponse:DW,resSerializer:bN};var nv=Symbol("pino-raw-res-ref"),wN=Object.create({},{statusCode:{enumerable:!0,writable:!0,value:0},headers:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[nv]},set:function(t){this[nv]=t}}});Object.defineProperty(wN,nv,{writable:!0,value:{}});function bN(t){let e=Object.create(wN);return e.statusCode=t.headersSent?t.statusCode:null,e.headers=t.getHeaders?t.getHeaders():t._headers,e.raw=t,e}function DW(t){return{res:bN(t)}}});var iv=E((RNe,TN)=>{"use strict";var sv=hN(),MW=mN(),rp=vN(),np=SN();TN.exports={err:sv,errWithCause:MW,mapHttpRequest:rp.mapHttpRequest,mapHttpResponse:np.mapHttpResponse,req:rp.reqSerializer,res:np.resSerializer,wrapErrorSerializer:function(e){return e===sv?e:function(n){return e(sv(n))}},wrapRequestSerializer:function(e){return e===rp.reqSerializer?e:function(n){return e(rp.reqSerializer(n))}},wrapResponseSerializer:function(e){return e===np.resSerializer?e:function(n){return e(np.resSerializer(n))}}}});var ov=E(($Ne,RN)=>{"use strict";function jW(t,e){return e}RN.exports=function(){let e=Error.prepareStackTrace;Error.prepareStackTrace=jW;let r=new Error().stack;if(Error.prepareStackTrace=e,!Array.isArray(r))return;let n=r.slice(2),s=[];for(let i of n)i&&s.push(i.getFileName());return s}});var CN=E((ONe,NN)=>{"use strict";function av(t){if(t===null||typeof t!="object")return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof Array){let e=[];for(let r=0;r<t.length;r++)e[r]=av(t[r]);return e}if(typeof t=="object"){let e=Object.create(Object.getPrototypeOf(t));for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=av(t[r]));return e}return t}function $N(t){let e=[],r="",n=!1,s=!1,i="";for(let o=0;o<t.length;o++){let a=t[o];!n&&a==="."?r&&(e.push(r),r=""):a==="["?(r&&(e.push(r),r=""),n=!0):a==="]"&&n?(e.push(r),r="",n=!1,s=!1):(a==='"'||a==="'")&&n?s?a===i?(s=!1,i=""):r+=a:(s=!0,i=a):r+=a}return r&&e.push(r),e}function ON(t,e,r){let n=t;for(let i=0;i<e.length-1;i++){let o=e[i];if(typeof n!="object"||n===null||!(o in n)||typeof n[o]!="object"||n[o]===null)return!1;n=n[o]}let s=e[e.length-1];if(s==="*"){if(Array.isArray(n))for(let i=0;i<n.length;i++)n[i]=r;else if(typeof n=="object"&&n!==null)for(let i in n)Object.prototype.hasOwnProperty.call(n,i)&&(n[i]=r)}else typeof n=="object"&&n!==null&&s in n&&Object.prototype.hasOwnProperty.call(n,s)&&(n[s]=r);return!0}function PN(t,e){let r=t;for(let s=0;s<e.length-1;s++){let i=e[s];if(typeof r!="object"||r===null||!(i in r)||typeof r[i]!="object"||r[i]===null)return!1;r=r[i]}let n=e[e.length-1];if(n==="*"){if(Array.isArray(r))for(let s=0;s<r.length;s++)r[s]=void 0;else if(typeof r=="object"&&r!==null)for(let s in r)Object.prototype.hasOwnProperty.call(r,s)&&delete r[s]}else typeof r=="object"&&r!==null&&n in r&&Object.prototype.hasOwnProperty.call(r,n)&&delete r[n];return!0}var sp=Symbol("PATH_NOT_FOUND");function qW(t,e){let r=t;for(let n of e){if(r==null||typeof r!="object"||r===null||!(n in r))return sp;r=r[n]}return r}function LW(t,e){let r=t;for(let n of e){if(r==null||typeof r!="object"||r===null)return;r=r[n]}return r}function FW(t,e,r,n=!1){for(let s of e){let i=$N(s);if(i.includes("*"))xN(t,i,r,s,n);else if(n)PN(t,i);else{let o=qW(t,i);if(o===sp)continue;let a=typeof r=="function"?r(o,i):r;ON(t,i,a)}}}function xN(t,e,r,n,s=!1){let i=e.indexOf("*");if(i===e.length-1){let o=e.slice(0,-1),a=t;for(let l of o){if(a==null||typeof a!="object"||a===null)return;a=a[l]}if(Array.isArray(a))if(s)for(let l=0;l<a.length;l++)a[l]=void 0;else for(let l=0;l<a.length;l++){let c=[...o,l.toString()],u=typeof r=="function"?r(a[l],c):r;a[l]=u}else if(typeof a=="object"&&a!==null)if(s){let l=[];for(let c in a)Object.prototype.hasOwnProperty.call(a,c)&&l.push(c);for(let c of l)delete a[c]}else for(let l in a){let c=[...o,l],u=typeof r=="function"?r(a[l],c):r;a[l]=u}}else UW(t,e,r,i,n,s)}function UW(t,e,r,n,s,i=!1){let o=e.slice(0,n),a=e.slice(n+1),l=[];function c(u,d){if(d===o.length){if(Array.isArray(u))for(let p=0;p<u.length;p++)l[d]=p.toString(),c(u[p],d+1);else if(typeof u=="object"&&u!==null)for(let p in u)l[d]=p,c(u[p],d+1)}else if(d<o.length){let p=o[d];u&&typeof u=="object"&&u!==null&&p in u&&(l[d]=p,c(u[p],d+1))}else if(a.includes("*"))xN(u,a,typeof r=="function"?(f,h)=>{let m=[...l.slice(0,d),...h];return r(f,m)}:r,s,i);else if(i)PN(u,a);else{let p=typeof r=="function"?r(LW(u,a),[...l.slice(0,d),...a]):r;ON(u,a,p)}}if(o.length===0)c(t,0);else{let u=t;for(let d=0;d<o.length;d++){let p=o[d];if(u==null||typeof u!="object"||u===null)return;u=u[p],l[d]=p}u!=null&&c(u,o.length)}}function BW(t){if(t.length===0)return null;let e=new Map;for(let r of t){let n=$N(r),s=e;for(let i=0;i<n.length;i++){let o=n[i];s.has(o)||s.set(o,new Map),s=s.get(o)}}return e}function zW(t,e){if(!e)return t;function r(n,s,i=0){if(!s||s.size===0||n===null||typeof n!="object")return n;if(n instanceof Date)return new Date(n.getTime());if(Array.isArray(n)){let a=[];for(let l=0;l<n.length;l++){let c=l.toString();s.has(c)||s.has("*")?a[l]=r(n[l],s.get(c)||s.get("*")):a[l]=n[l]}return a}let o=Object.create(Object.getPrototypeOf(n));for(let a in n)Object.prototype.hasOwnProperty.call(n,a)&&(s.has(a)||s.has("*")?o[a]=r(n[a],s.get(a)||s.get("*")):o[a]=n[a]);return o}return r(t,e)}function VW(t){if(typeof t!="string")throw new Error("Paths must be (non-empty) strings");if(t==="")throw new Error("Invalid redaction path ()");if(t.includes(".."))throw new Error(`Invalid redaction path (${t})`);if(t.includes(","))throw new Error(`Invalid redaction path (${t})`);let e=0,r=!1,n="";for(let s=0;s<t.length;s++){let i=t[s];if((i==='"'||i==="'")&&e>0)r?i===n&&(r=!1,n=""):(r=!0,n=i);else if(i==="["&&!r)e++;else if(i==="]"&&!r&&(e--,e<0))throw new Error(`Invalid redaction path (${t})`)}if(e!==0)throw new Error(`Invalid redaction path (${t})`)}function HW(t){if(!Array.isArray(t))throw new TypeError("paths must be an array");for(let e of t)VW(e)}function GW(t={}){let{paths:e=[],censor:r="[REDACTED]",serialize:n=JSON.stringify,strict:s=!0,remove:i=!1}=t;HW(e);let o=BW(e);return function(l){if(s&&(l===null||typeof l!="object")&&(l==null||typeof l!="object"))return n?n(l):l;let c=zW(l,o),u=l,d=r;return typeof r=="function"&&(d=r),FW(c,e,d,i),n===!1?(c.restore=function(){return av(u)},c):typeof n=="function"?n(c):JSON.stringify(c)}}NN.exports=GW});var ll=E((PNe,IN)=>{"use strict";var WW=Symbol("pino.setLevel"),KW=Symbol("pino.getLevel"),JW=Symbol("pino.levelVal"),YW=Symbol("pino.levelComp"),XW=Symbol("pino.useLevelLabels"),QW=Symbol("pino.useOnlyCustomLevels"),ZW=Symbol("pino.mixin"),e7=Symbol("pino.lsCache"),t7=Symbol("pino.chindings"),r7=Symbol("pino.asJson"),n7=Symbol("pino.write"),s7=Symbol("pino.redactFmt"),i7=Symbol("pino.time"),o7=Symbol("pino.timeSliceIndex"),a7=Symbol("pino.stream"),l7=Symbol("pino.stringify"),c7=Symbol("pino.stringifySafe"),u7=Symbol("pino.stringifiers"),f7=Symbol("pino.end"),d7=Symbol("pino.formatOpts"),h7=Symbol("pino.messageKey"),p7=Symbol("pino.errorKey"),m7=Symbol("pino.nestedKey"),g7=Symbol("pino.nestedKeyStr"),y7=Symbol("pino.mixinMergeStrategy"),_7=Symbol("pino.msgPrefix"),v7=Symbol("pino.wildcardFirst"),w7=Symbol.for("pino.serializers"),b7=Symbol.for("pino.formatters"),E7=Symbol.for("pino.hooks"),S7=Symbol.for("pino.metadata");IN.exports={setLevelSym:WW,getLevelSym:KW,levelValSym:JW,levelCompSym:YW,useLevelLabelsSym:XW,mixinSym:ZW,lsCacheSym:e7,chindingsSym:t7,asJsonSym:r7,writeSym:n7,serializersSym:w7,redactFmtSym:s7,timeSym:i7,timeSliceIndexSym:o7,streamSym:a7,stringifySym:l7,stringifySafeSym:c7,stringifiersSym:u7,endSym:f7,formatOptsSym:d7,messageKeySym:h7,errorKeySym:p7,nestedKeySym:m7,wildcardFirstSym:v7,needsMetadataGsym:S7,useOnlyCustomLevelsSym:QW,formattersSym:b7,hooksSym:E7,nestedKeyStrSym:g7,mixinMergeStrategySym:y7,msgPrefixSym:_7}});var cv=E((xNe,MN)=>{"use strict";var AN=CN(),{redactFmtSym:T7,wildcardFirstSym:ip}=ll(),lv=/[^.[\]]+|\[([^[\]]*?)\]/g,kN="[Redacted]",DN=!1;function R7(t,e){let{paths:r,censor:n,remove:s}=$7(t),i=r.reduce((l,c)=>{lv.lastIndex=0;let u=lv.exec(c),d=lv.exec(c),p=u[1]!==void 0?u[1].replace(/^(?:"|'|`)(.*)(?:"|'|`)$/,"$1"):u[0];if(p==="*"&&(p=ip),d===null)return l[p]=null,l;if(l[p]===null)return l;let{index:f}=d,h=`${c.substr(f,c.length-1)}`;return l[p]=l[p]||[],p!==ip&&l[p].length===0&&l[p].push(...l[ip]||[]),p===ip&&Object.keys(l).forEach(function(m){l[m]&&l[m].push(h)}),l[p].push(h),l},{}),o={[T7]:AN({paths:r,censor:n,serialize:e,strict:DN,remove:s})},a=(...l)=>e(typeof n=="function"?n(...l):n);return[...Object.keys(i),...Object.getOwnPropertySymbols(i)].reduce((l,c)=>{if(i[c]===null)l[c]=u=>a(u,[c]);else{let u=typeof n=="function"?(d,p)=>n(d,[c,...p]):n;l[c]=AN({paths:i[c],censor:u,serialize:e,strict:DN,remove:s})}return l},o)}function $7(t){if(Array.isArray(t))return t={paths:t,censor:kN},t;let{paths:e,censor:r=kN,remove:n}=t;if(Array.isArray(e)===!1)throw Error("pino \u2013 redact must contain an array of strings");return n===!0&&(r=void 0),{paths:e,censor:r,remove:n}}MN.exports=R7});var LN=E((NNe,qN)=>{"use strict";var O7=()=>"",P7=()=>`,"time":${Date.now()}`,x7=()=>`,"time":${Math.round(Date.now()/1e3)}`,N7=()=>`,"time":"${new Date(Date.now()).toISOString()}"`,C7=1000000n,jN=1000000000n,I7=BigInt(Date.now())*C7,A7=process.hrtime.bigint(),k7=()=>{let t=process.hrtime.bigint()-A7,e=I7+t,r=e/jN,n=e%jN,s=Number(r*1000n+n/1000000n),i=new Date(s),o=i.getUTCFullYear(),a=(i.getUTCMonth()+1).toString().padStart(2,"0"),l=i.getUTCDate().toString().padStart(2,"0"),c=i.getUTCHours().toString().padStart(2,"0"),u=i.getUTCMinutes().toString().padStart(2,"0"),d=i.getUTCSeconds().toString().padStart(2,"0");return`,"time":"${o}-${a}-${l}T${c}:${u}:${d}.${n.toString().padStart(9,"0")}Z"`};qN.exports={nullTime:O7,epochTime:P7,unixTime:x7,isoTime:N7,isoTimeNano:k7}});var UN=E((CNe,FN)=>{"use strict";function D7(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}FN.exports=M7;function M7(t,e,r){var n=r&&r.stringify||D7,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var o=new Array(i);o[0]=n(t);for(var a=1;a<i;a++)o[a]=n(e[a]);return o.join(" ")}if(typeof t!="string")return t;var l=e.length;if(l===0)return t;for(var c="",u=1-s,d=-1,p=t&&t.length||0,f=0;f<p;){if(t.charCodeAt(f)===37&&f+1<p){switch(d=d>-1?d:0,t.charCodeAt(f+1)){case 100:case 102:if(u>=l||e[u]==null)break;d<f&&(c+=t.slice(d,f)),c+=Number(e[u]),d=f+2,f++;break;case 105:if(u>=l||e[u]==null)break;d<f&&(c+=t.slice(d,f)),c+=Math.floor(Number(e[u])),d=f+2,f++;break;case 79:case 111:case 106:if(u>=l||e[u]===void 0)break;d<f&&(c+=t.slice(d,f));var h=typeof e[u];if(h==="string"){c+="'"+e[u]+"'",d=f+2,f++;break}if(h==="function"){c+=e[u].name||"<anonymous>",d=f+2,f++;break}c+=n(e[u]),d=f+2,f++;break;case 115:if(u>=l)break;d<f&&(c+=t.slice(d,f)),c+=String(e[u]),d=f+2,f++;break;case 37:d<f&&(c+=t.slice(d,f)),c+="%",d=f+2,f++,u--;break}++u}++f}return d===-1?t:(d<p&&(c+=t.slice(d)),c)}});var fv=E((INe,uv)=>{"use strict";if(typeof SharedArrayBuffer<"u"&&typeof Atomics<"u"){let e=function(r){if((r>0&&r<1/0)===!1)throw typeof r!="number"&&typeof r!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");Atomics.wait(t,0,0,Number(r))},t=new Int32Array(new SharedArrayBuffer(4));uv.exports=e}else{let t=function(e){if((e>0&&e<1/0)===!1)throw typeof e!="number"&&typeof e!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");let n=Date.now()+Number(e);for(;n>Date.now(););};uv.exports=t}});var JN=E((ANe,KN)=>{"use strict";var vt=require("fs"),j7=require("events"),q7=require("util").inherits,BN=require("path"),hv=fv(),L7=require("assert"),op=100,ap=Buffer.allocUnsafe(0),F7=16*1024,zN="buffer",VN="utf8",[U7,B7]=(process.versions.node||"0.0").split(".").map(Number),z7=U7>=22&&B7>=7;function HN(t,e){e._opening=!0,e._writing=!0,e._asyncDrainScheduled=!1;function r(i,o){if(i){e._reopening=!1,e._writing=!1,e._opening=!1,e.sync?process.nextTick(()=>{e.listenerCount("error")>0&&e.emit("error",i)}):e.emit("error",i);return}let a=e._reopening;e.fd=o,e.file=t,e._reopening=!1,e._opening=!1,e._writing=!1,e.sync?process.nextTick(()=>e.emit("ready")):e.emit("ready"),!e.destroyed&&(!e._writing&&e._len>e.minLength||e._flushPending?e._actualWrite():a&&process.nextTick(()=>e.emit("drain")))}let n=e.append?"a":"w",s=e.mode;if(e.sync)try{e.mkdir&&vt.mkdirSync(BN.dirname(t),{recursive:!0});let i=vt.openSync(t,n,s);r(null,i)}catch(i){throw r(i),i}else e.mkdir?vt.mkdir(BN.dirname(t),{recursive:!0},i=>{if(i)return r(i);vt.open(t,n,s,r)}):vt.open(t,n,s,r)}function Ln(t){if(!(this instanceof Ln))return new Ln(t);let{fd:e,dest:r,minLength:n,maxLength:s,maxWrite:i,periodicFlush:o,sync:a,append:l=!0,mkdir:c,retryEAGAIN:u,fsync:d,contentMode:p,mode:f}=t||{};e=e||r,this._len=0,this.fd=-1,this._bufs=[],this._lens=[],this._writing=!1,this._ending=!1,this._reopening=!1,this._asyncDrainScheduled=!1,this._flushPending=!1,this._hwm=Math.max(n||0,16387),this.file=null,this.destroyed=!1,this.minLength=n||0,this.maxLength=s||0,this.maxWrite=i||F7,this._periodicFlush=o||0,this._periodicFlushTimer=void 0,this.sync=a||!1,this.writable=!0,this._fsync=d||!1,this.append=l||!1,this.mode=f,this.retryEAGAIN=u||(()=>!0),this.mkdir=c||!1;let h,m;if(p===zN)this._writingBuf=ap,this.write=G7,this.flush=K7,this.flushSync=Y7,this._actualWrite=Q7,h=()=>vt.writeSync(this.fd,this._writingBuf),m=()=>vt.write(this.fd,this._writingBuf,this.release);else if(p===void 0||p===VN)this._writingBuf="",this.write=H7,this.flush=W7,this.flushSync=J7,this._actualWrite=X7,h=()=>vt.writeSync(this.fd,this._writingBuf,"utf8"),m=()=>vt.write(this.fd,this._writingBuf,"utf8",this.release);else throw new Error(`SonicBoom supports "${VN}" and "${zN}", but passed ${p}`);if(typeof e=="number")this.fd=e,process.nextTick(()=>this.emit("ready"));else if(typeof e=="string")HN(e,this);else throw new Error("SonicBoom supports only file descriptors and files");if(this.minLength>=this.maxWrite)throw new Error(`minLength should be smaller than maxWrite (${this.maxWrite})`);this.release=(y,g)=>{if(y){if((y.code==="EAGAIN"||y.code==="EBUSY")&&this.retryEAGAIN(y,this._writingBuf.length,this._len-this._writingBuf.length))if(this.sync)try{hv(op),this.release(void 0,0)}catch(v){this.release(v)}else setTimeout(m,op);else this._writing=!1,this.emit("error",y);return}this.emit("write",g);let w=dv(this._writingBuf,this._len,g);if(this._len=w.len,this._writingBuf=w.writingBuf,this._writingBuf.length){if(!this.sync){m();return}try{do{let v=h(),S=dv(this._writingBuf,this._len,v);this._len=S.len,this._writingBuf=S.writingBuf}while(this._writingBuf.length)}catch(v){this.release(v);return}}this._fsync&&vt.fsyncSync(this.fd);let _=this._len;this._reopening?(this._writing=!1,this._reopening=!1,this.reopen()):_>this.minLength?this._actualWrite():this._ending?_>0?this._actualWrite():(this._writing=!1,lp(this)):(this._writing=!1,this.sync?this._asyncDrainScheduled||(this._asyncDrainScheduled=!0,process.nextTick(V7,this)):this.emit("drain"))},this.on("newListener",function(y){y==="drain"&&(this._asyncDrainScheduled=!1)}),this._periodicFlush!==0&&(this._periodicFlushTimer=setInterval(()=>this.flush(null),this._periodicFlush),this._periodicFlushTimer.unref())}function dv(t,e,r){return typeof t=="string"&&Buffer.byteLength(t)!==r&&(r=Buffer.from(t).subarray(0,r).toString().length),e=Math.max(e-r,0),t=t.slice(r),{writingBuf:t,len:e}}function V7(t){t.listenerCount("drain")>0&&(t._asyncDrainScheduled=!1,t.emit("drain"))}q7(Ln,j7);function GN(t,e){return t.length===0?ap:t.length===1?t[0]:Buffer.concat(t,e)}function H7(t){if(this.destroyed)throw new Error("SonicBoom destroyed");let e=this._len+t.length,r=this._bufs;return this.maxLength&&e>this.maxLength?(this.emit("drop",t),this._len<this._hwm):(r.length===0||r[r.length-1].length+t.length>this.maxWrite?r.push(""+t):r[r.length-1]+=t,this._len=e,!this._writing&&this._len>=this.minLength&&this._actualWrite(),this._len<this._hwm)}function G7(t){if(this.destroyed)throw new Error("SonicBoom destroyed");let e=this._len+t.length,r=this._bufs,n=this._lens;return this.maxLength&&e>this.maxLength?(this.emit("drop",t),this._len<this._hwm):(r.length===0||n[n.length-1]+t.length>this.maxWrite?(r.push([t]),n.push(t.length)):(r[r.length-1].push(t),n[n.length-1]+=t.length),this._len=e,!this._writing&&this._len>=this.minLength&&this._actualWrite(),this._len<this._hwm)}function WN(t){this._flushPending=!0;let e=()=>{if(this._fsync)this._flushPending=!1,t();else try{vt.fsync(this.fd,n=>{this._flushPending=!1,t(n)})}catch(n){t(n)}this.off("error",r)},r=n=>{this._flushPending=!1,t(n),this.off("drain",e)};this.once("drain",e),this.once("error",r)}function W7(t){if(t!=null&&typeof t!="function")throw new Error("flush cb must be a function");if(this.destroyed){let e=new Error("SonicBoom destroyed");if(t){t(e);return}throw e}if(this.minLength<=0){t?.();return}t&&WN.call(this,t),!this._writing&&(this._bufs.length===0&&this._bufs.push(""),this._actualWrite())}function K7(t){if(t!=null&&typeof t!="function")throw new Error("flush cb must be a function");if(this.destroyed){let e=new Error("SonicBoom destroyed");if(t){t(e);return}throw e}if(this.minLength<=0){t?.();return}t&&WN.call(this,t),!this._writing&&(this._bufs.length===0&&(this._bufs.push([]),this._lens.push(0)),this._actualWrite())}Ln.prototype.reopen=function(t){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.reopen(t)});return}if(this._ending)return;if(!this.file)throw new Error("Unable to reopen a file descriptor, you must pass a file to SonicBoom");if(t&&(this.file=t),this._reopening=!0,this._writing)return;let e=this.fd;this.once("ready",()=>{e!==this.fd&&vt.close(e,r=>{if(r)return this.emit("error",r)})}),HN(this.file,this)};Ln.prototype.end=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.end()});return}this._ending||(this._ending=!0,!this._writing&&(this._len>0&&this.fd>=0?this._actualWrite():lp(this)))};function J7(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this.fd<0)throw new Error("sonic boom is not ready yet");!this._writing&&this._writingBuf.length>0&&(this._bufs.unshift(this._writingBuf),this._writingBuf="");let t="";for(;this._bufs.length||t;){t.length<=0&&(t=this._bufs[0]);try{let e=vt.writeSync(this.fd,t,"utf8"),r=dv(t,this._len,e);t=r.writingBuf,this._len=r.len,t.length<=0&&this._bufs.shift()}catch(e){if((e.code==="EAGAIN"||e.code==="EBUSY")&&!this.retryEAGAIN(e,t.length,this._len-t.length))throw e;hv(op)}}try{vt.fsyncSync(this.fd)}catch{}}function Y7(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this.fd<0)throw new Error("sonic boom is not ready yet");!this._writing&&this._writingBuf.length>0&&(this._bufs.unshift([this._writingBuf]),this._writingBuf=ap);let t=ap;for(;this._bufs.length||t.length;){t.length<=0&&(t=GN(this._bufs[0],this._lens[0]));try{let e=vt.writeSync(this.fd,t);t=t.subarray(e),this._len=Math.max(this._len-e,0),t.length<=0&&(this._bufs.shift(),this._lens.shift())}catch(e){if((e.code==="EAGAIN"||e.code==="EBUSY")&&!this.retryEAGAIN(e,t.length,this._len-t.length))throw e;hv(op)}}}Ln.prototype.destroy=function(){this.destroyed||lp(this)};function X7(){let t=this.release;if(this._writing=!0,this._writingBuf=this._writingBuf||this._bufs.shift()||"",this.sync)try{let e=vt.writeSync(this.fd,this._writingBuf,"utf8");t(null,e)}catch(e){t(e)}else vt.write(this.fd,this._writingBuf,"utf8",t)}function Q7(){let t=this.release;if(this._writing=!0,this._writingBuf=this._writingBuf.length?this._writingBuf:GN(this._bufs.shift(),this._lens.shift()),this.sync)try{let e=vt.writeSync(this.fd,this._writingBuf);t(null,e)}catch(e){t(e)}else z7&&(this._writingBuf=Buffer.from(this._writingBuf)),vt.write(this.fd,this._writingBuf,t)}function lp(t){if(t.fd===-1){t.once("ready",lp.bind(null,t));return}t._periodicFlushTimer!==void 0&&clearInterval(t._periodicFlushTimer),t.destroyed=!0,t._bufs=[],t._lens=[],L7(typeof t.fd=="number",`sonic.fd must be a number, got ${typeof t.fd}`);try{vt.fsync(t.fd,e)}catch{}function e(){t.fd!==1&&t.fd!==2?vt.close(t.fd,r):r()}function r(n){if(n){t.emit("error",n);return}t._ending&&!t._writing&&t.emit("finish"),t.emit("close")}}Ln.SonicBoom=Ln;Ln.default=Ln;KN.exports=Ln});var pv=E((kNe,eC)=>{"use strict";var Fn={exit:[],beforeExit:[]},YN={exit:tK,beforeExit:rK},cl;function Z7(){cl===void 0&&(cl=new FinalizationRegistry(nK))}function eK(t){Fn[t].length>0||process.on(t,YN[t])}function XN(t){Fn[t].length>0||(process.removeListener(t,YN[t]),Fn.exit.length===0&&Fn.beforeExit.length===0&&(cl=void 0))}function tK(){QN("exit")}function rK(){QN("beforeExit")}function QN(t){for(let e of Fn[t]){let r=e.deref(),n=e.fn;r!==void 0&&n(r,t)}Fn[t]=[]}function nK(t){for(let e of["exit","beforeExit"]){let r=Fn[e].indexOf(t);Fn[e].splice(r,r+1),XN(e)}}function ZN(t,e,r){if(e===void 0)throw new Error("the object can't be undefined");eK(t);let n=new WeakRef(e);n.fn=r,Z7(),cl.register(e,n),Fn[t].push(n)}function sK(t,e){ZN("exit",t,e)}function iK(t,e){ZN("beforeExit",t,e)}function oK(t){if(cl!==void 0){cl.unregister(t);for(let e of["exit","beforeExit"])Fn[e]=Fn[e].filter(r=>{let n=r.deref();return n&&n!==t}),XN(e)}}eC.exports={register:sK,registerBeforeExit:iK,unregister:oK}});var tC=E((DNe,aK)=>{aK.exports={name:"thread-stream",version:"3.1.0",description:"A streaming way to send data to a Node.js Worker Thread",main:"index.js",types:"index.d.ts",dependencies:{"real-require":"^0.2.0"},devDependencies:{"@types/node":"^20.1.0","@types/tap":"^15.0.0","@yao-pkg/pkg":"^5.11.5",desm:"^1.3.0",fastbench:"^1.0.1",husky:"^9.0.6","pino-elasticsearch":"^8.0.0","sonic-boom":"^4.0.1",standard:"^17.0.0",tap:"^16.2.0","ts-node":"^10.8.0",typescript:"^5.3.2","why-is-node-running":"^2.2.2"},scripts:{build:"tsc --noEmit",test:'standard && npm run build && npm run transpile && tap "test/**/*.test.*js" && tap --ts test/*.test.*ts',"test:ci":"standard && npm run transpile && npm run test:ci:js && npm run test:ci:ts","test:ci:js":'tap --no-check-coverage --timeout=120 --coverage-report=lcovonly "test/**/*.test.*js"',"test:ci:ts":'tap --ts --no-check-coverage --coverage-report=lcovonly "test/**/*.test.*ts"',"test:yarn":'npm run transpile && tap "test/**/*.test.js" --no-check-coverage',transpile:"sh ./test/ts/transpile.sh",prepare:"husky install"},standard:{ignore:["test/ts/**/*","test/syntax-error.mjs"]},repository:{type:"git",url:"git+https://github.com/mcollina/thread-stream.git"},keywords:["worker","thread","threads","stream"],author:"Matteo Collina <hello@matteocollina.com>",license:"MIT",bugs:{url:"https://github.com/mcollina/thread-stream/issues"},homepage:"https://github.com/mcollina/thread-stream#readme"}});var nC=E((MNe,rC)=>{"use strict";function lK(t,e,r,n,s){let i=Date.now()+n,o=Atomics.load(t,e);if(o===r){s(null,"ok");return}let a=o,l=c=>{Date.now()>i?s(null,"timed-out"):setTimeout(()=>{a=o,o=Atomics.load(t,e),o===a?l(c>=1e3?1e3:c*2):o===r?s(null,"ok"):s(null,"not-equal")},c)};l(1)}function cK(t,e,r,n,s){let i=Date.now()+n,o=Atomics.load(t,e);if(o!==r){s(null,"ok");return}let a=l=>{Date.now()>i?s(null,"timed-out"):setTimeout(()=>{o=Atomics.load(t,e),o!==r?s(null,"ok"):a(l>=1e3?1e3:l*2)},l)};a(1)}rC.exports={wait:lK,waitDiff:cK}});var iC=E((jNe,sC)=>{"use strict";sC.exports={WRITE_INDEX:4,READ_INDEX:8}});var uC=E((qNe,cC)=>{"use strict";var{version:uK}=tC(),{EventEmitter:fK}=require("events"),{Worker:dK}=require("worker_threads"),{join:hK}=require("path"),{pathToFileURL:pK}=require("url"),{wait:mK}=nC(),{WRITE_INDEX:Mr,READ_INDEX:ps}=iC(),gK=require("buffer"),yK=require("assert"),k=Symbol("kImpl"),_K=gK.constants.MAX_STRING_LENGTH,pu=class{constructor(e){this._value=e}deref(){return this._value}},up=class{register(){}unregister(){}},vK=process.env.NODE_V8_COVERAGE?up:global.FinalizationRegistry||up,wK=process.env.NODE_V8_COVERAGE?pu:global.WeakRef||pu,oC=new vK(t=>{t.exited||t.terminate()});function bK(t,e){let{filename:r,workerData:n}=e,i=("__bundlerPathsOverrides"in globalThis?globalThis.__bundlerPathsOverrides:{})["thread-stream-worker"]||hK(__dirname,"lib","worker.js"),o=new dK(i,{...e.workerOpts,trackUnmanagedFds:!1,workerData:{filename:r.indexOf("file://")===0?r:pK(r).href,dataBuf:t[k].dataBuf,stateBuf:t[k].stateBuf,workerData:{$context:{threadStreamVersion:uK},...n}}});return o.stream=new pu(t),o.on("message",EK),o.on("exit",lC),oC.register(t,o),o}function aC(t){yK(!t[k].sync),t[k].needDrain&&(t[k].needDrain=!1,t.emit("drain"))}function cp(t){let e=Atomics.load(t[k].state,Mr),r=t[k].data.length-e;if(r>0){if(t[k].buf.length===0){t[k].flushing=!1,t[k].ending?vv(t):t[k].needDrain&&process.nextTick(aC,t);return}let n=t[k].buf.slice(0,r),s=Buffer.byteLength(n);s<=r?(t[k].buf=t[k].buf.slice(r),fp(t,n,cp.bind(null,t))):t.flush(()=>{if(!t.destroyed){for(Atomics.store(t[k].state,ps,0),Atomics.store(t[k].state,Mr,0);s>t[k].data.length;)r=r/2,n=t[k].buf.slice(0,r),s=Buffer.byteLength(n);t[k].buf=t[k].buf.slice(r),fp(t,n,cp.bind(null,t))}})}else if(r===0){if(e===0&&t[k].buf.length===0)return;t.flush(()=>{Atomics.store(t[k].state,ps,0),Atomics.store(t[k].state,Mr,0),cp(t)})}else ms(t,new Error("overwritten"))}function EK(t){let e=this.stream.deref();if(e===void 0){this.exited=!0,this.terminate();return}switch(t.code){case"READY":this.stream=new wK(e),e.flush(()=>{e[k].ready=!0,e.emit("ready")});break;case"ERROR":ms(e,t.err);break;case"EVENT":Array.isArray(t.args)?e.emit(t.name,...t.args):e.emit(t.name,t.args);break;case"WARNING":process.emitWarning(t.err);break;default:ms(e,new Error("this should not happen: "+t.code))}}function lC(t){let e=this.stream.deref();e!==void 0&&(oC.unregister(e),e.worker.exited=!0,e.worker.off("exit",lC),ms(e,t!==0?new Error("the worker thread exited"):null))}var gv=class extends fK{constructor(e={}){if(super(),e.bufferSize<4)throw new Error("bufferSize must at least fit a 4-byte utf-8 char");this[k]={},this[k].stateBuf=new SharedArrayBuffer(128),this[k].state=new Int32Array(this[k].stateBuf),this[k].dataBuf=new SharedArrayBuffer(e.bufferSize||4*1024*1024),this[k].data=Buffer.from(this[k].dataBuf),this[k].sync=e.sync||!1,this[k].ending=!1,this[k].ended=!1,this[k].needDrain=!1,this[k].destroyed=!1,this[k].flushing=!1,this[k].ready=!1,this[k].finished=!1,this[k].errored=null,this[k].closed=!1,this[k].buf="",this.worker=bK(this,e),this.on("message",(r,n)=>{this.worker.postMessage(r,n)})}write(e){if(this[k].destroyed)return yv(this,new Error("the worker has exited")),!1;if(this[k].ending)return yv(this,new Error("the worker is ending")),!1;if(this[k].flushing&&this[k].buf.length+e.length>=_K)try{mv(this),this[k].flushing=!0}catch(r){return ms(this,r),!1}if(this[k].buf+=e,this[k].sync)try{return mv(this),!0}catch(r){return ms(this,r),!1}return this[k].flushing||(this[k].flushing=!0,setImmediate(cp,this)),this[k].needDrain=this[k].data.length-this[k].buf.length-Atomics.load(this[k].state,Mr)<=0,!this[k].needDrain}end(){this[k].destroyed||(this[k].ending=!0,vv(this))}flush(e){if(this[k].destroyed){typeof e=="function"&&process.nextTick(e,new Error("the worker has exited"));return}let r=Atomics.load(this[k].state,Mr);mK(this[k].state,ps,r,1/0,(n,s)=>{if(n){ms(this,n),process.nextTick(e,n);return}if(s==="not-equal"){this.flush(e);return}process.nextTick(e)})}flushSync(){this[k].destroyed||(mv(this),_v(this))}unref(){this.worker.unref()}ref(){this.worker.ref()}get ready(){return this[k].ready}get destroyed(){return this[k].destroyed}get closed(){return this[k].closed}get writable(){return!this[k].destroyed&&!this[k].ending}get writableEnded(){return this[k].ending}get writableFinished(){return this[k].finished}get writableNeedDrain(){return this[k].needDrain}get writableObjectMode(){return!1}get writableErrored(){return this[k].errored}};function yv(t,e){setImmediate(()=>{t.emit("error",e)})}function ms(t,e){t[k].destroyed||(t[k].destroyed=!0,e&&(t[k].errored=e,yv(t,e)),t.worker.exited?setImmediate(()=>{t[k].closed=!0,t.emit("close")}):t.worker.terminate().catch(()=>{}).then(()=>{t[k].closed=!0,t.emit("close")}))}function fp(t,e,r){let n=Atomics.load(t[k].state,Mr),s=Buffer.byteLength(e);return t[k].data.write(e,n),Atomics.store(t[k].state,Mr,n+s),Atomics.notify(t[k].state,Mr),r(),!0}function vv(t){if(!(t[k].ended||!t[k].ending||t[k].flushing)){t[k].ended=!0;try{t.flushSync();let e=Atomics.load(t[k].state,ps);Atomics.store(t[k].state,Mr,-1),Atomics.notify(t[k].state,Mr);let r=0;for(;e!==-1;){if(Atomics.wait(t[k].state,ps,e,1e3),e=Atomics.load(t[k].state,ps),e===-2){ms(t,new Error("end() failed"));return}if(++r===10){ms(t,new Error("end() took too long (10s)"));return}}process.nextTick(()=>{t[k].finished=!0,t.emit("finish")})}catch(e){ms(t,e)}}}function mv(t){let e=()=>{t[k].ending?vv(t):t[k].needDrain&&process.nextTick(aC,t)};for(t[k].flushing=!1;t[k].buf.length!==0;){let r=Atomics.load(t[k].state,Mr),n=t[k].data.length-r;if(n===0){_v(t),Atomics.store(t[k].state,ps,0),Atomics.store(t[k].state,Mr,0);continue}else if(n<0)throw new Error("overwritten");let s=t[k].buf.slice(0,n),i=Buffer.byteLength(s);if(i<=n)t[k].buf=t[k].buf.slice(n),fp(t,s,e);else{for(_v(t),Atomics.store(t[k].state,ps,0),Atomics.store(t[k].state,Mr,0);i>t[k].buf.length;)n=n/2,s=t[k].buf.slice(0,n),i=Buffer.byteLength(s);t[k].buf=t[k].buf.slice(n),fp(t,s,e)}}}function _v(t){if(t[k].flushing)throw new Error("unable to flush while flushing");let e=Atomics.load(t[k].state,Mr),r=0;for(;;){let n=Atomics.load(t[k].state,ps);if(n===-2)throw Error("_flushSync failed");if(n!==e)Atomics.wait(t[k].state,ps,n,1e3);else break;if(++r===10)throw new Error("_flushSync took too long (10s)")}}cC.exports=gv});var Ev=E((LNe,fC)=>{"use strict";var{createRequire:SK}=require("module"),TK=ov(),{join:wv,isAbsolute:RK,sep:$K}=require("path"),OK=fv(),bv=pv(),PK=uC();function xK(t){bv.register(t,CK),bv.registerBeforeExit(t,IK),t.on("close",function(){bv.unregister(t)})}function NK(t,e,r,n){let s=new PK({filename:t,workerData:e,workerOpts:r,sync:n});s.on("ready",i),s.on("close",function(){process.removeListener("exit",o)}),process.on("exit",o);function i(){process.removeListener("exit",o),s.unref(),r.autoEnd!==!1&&xK(s)}function o(){s.closed||(s.flushSync(),OK(100),s.end())}return s}function CK(t){t.ref(),t.flushSync(),t.end(),t.once("close",function(){t.unref()})}function IK(t){t.flushSync()}function AK(t){let{pipeline:e,targets:r,levels:n,dedupe:s,worker:i={},caller:o=TK(),sync:a=!1}=t,l={...t.options},c=typeof o=="string"?[o]:o,u="__bundlerPathsOverrides"in globalThis?globalThis.__bundlerPathsOverrides:{},d=t.target;if(d&&r)throw new Error("only one of target or targets can be specified");return r?(d=u["pino-worker"]||wv(__dirname,"worker.js"),l.targets=r.filter(f=>f.target).map(f=>({...f,target:p(f.target)})),l.pipelines=r.filter(f=>f.pipeline).map(f=>f.pipeline.map(h=>({...h,level:f.level,target:p(h.target)})))):e&&(d=u["pino-worker"]||wv(__dirname,"worker.js"),l.pipelines=[e.map(f=>({...f,target:p(f.target)}))]),n&&(l.levels=n),s&&(l.dedupe=s),l.pinoWillSendConfig=!0,NK(p(d),l,i,a);function p(f){if(f=u[f]||f,RK(f)||f.indexOf("file://")===0)return f;if(f==="pino/file")return wv(__dirname,"..","file.js");let h;for(let m of c)try{let y=m==="node:repl"?process.cwd()+$K:m;h=SK(y).resolve(f);break}catch{continue}if(!h)throw new Error(`unable to determine transport target for "${f}"`);return h}}fC.exports=AK});var pp=E((FNe,TC)=>{"use strict";var kK=require("diagnostics_channel"),dC=UN(),{mapHttpRequest:DK,mapHttpResponse:MK}=iv(),Tv=JN(),hC=pv(),{lsCacheSym:jK,chindingsSym:_C,writeSym:pC,serializersSym:vC,formatOptsSym:mC,endSym:qK,stringifiersSym:wC,stringifySym:bC,stringifySafeSym:Rv,wildcardFirstSym:EC,nestedKeySym:LK,formattersSym:SC,messageKeySym:FK,errorKeySym:UK,nestedKeyStrSym:BK,msgPrefixSym:dp}=ll(),{isMainThread:zK}=require("worker_threads"),VK=Ev(),gC=kK.tracingChannel("pino_asJson");function ul(){}function HK(t,e){if(!e)return r;return function(...s){e.call(this,s,r,t)};function r(n,...s){if(typeof n=="object"){let i=n;n!==null&&(n.method&&n.headers&&n.socket?n=DK(n):typeof n.setHeader=="function"&&(n=MK(n)));let o;i===null&&s.length===0?o=[null]:(i=s.shift(),o=s),typeof this[dp]=="string"&&i!==void 0&&i!==null&&(i=this[dp]+i),this[pC](n,dC(i,o,this[mC]),t)}else{let i=n===void 0?s.shift():n;typeof this[dp]=="string"&&i!==void 0&&i!==null&&(i=this[dp]+i),this[pC](null,dC(i,s,this[mC]),t)}}}function Sv(t){let e="",r=0,n=!1,s=255,i=t.length;if(i>100)return JSON.stringify(t);for(var o=0;o<i&&s>=32;o++)s=t.charCodeAt(o),(s===34||s===92)&&(e+=t.slice(r,o)+"\\",r=o,n=!0);return n?e+=t.slice(r):e=t,s<32?JSON.stringify(t):'"'+e+'"'}function GK(t,e,r,n){if(gC.hasSubscribers===!1)return yC.call(this,t,e,r,n);let s={instance:this,arguments};return gC.traceSync(yC,s,this,t,e,r,n)}function yC(t,e,r,n){let s=this[bC],i=this[Rv],o=this[wC],a=this[qK],l=this[_C],c=this[vC],u=this[SC],d=this[FK],p=this[UK],f=this[jK][r]+n;f=f+l;let h;u.log&&(t=u.log(t));let m=o[EC],y="";for(let w in t)if(h=t[w],Object.prototype.hasOwnProperty.call(t,w)&&h!==void 0){c[w]?h=c[w](h):w===p&&c.err&&(h=c.err(h));let _=o[w]||m;switch(typeof h){case"undefined":case"function":continue;case"number":Number.isFinite(h)===!1&&(h=null);case"boolean":_&&(h=_(h));break;case"string":h=(_||Sv)(h);break;default:h=(_||s)(h,i)}if(h===void 0)continue;let v=Sv(w);y+=","+v+":"+h}let g="";if(e!==void 0){h=c[d]?c[d](e):e;let w=o[d]||m;switch(typeof h){case"function":break;case"number":Number.isFinite(h)===!1&&(h=null);case"boolean":w&&(h=w(h)),g=',"'+d+'":'+h;break;case"string":h=(w||Sv)(h),g=',"'+d+'":'+h;break;default:h=(w||s)(h,i),g=',"'+d+'":'+h}}return this[LK]&&y?f+this[BK]+y.slice(1)+"}"+g+a:f+y+g+a}function WK(t,e){let r,n=t[_C],s=t[bC],i=t[Rv],o=t[wC],a=o[EC],l=t[vC],c=t[SC].bindings;e=c(e);for(let u in e)if(r=e[u],((u.length<5||u!=="level"&&u!=="serializers"&&u!=="formatters"&&u!=="customLevels")&&e.hasOwnProperty(u)&&r!==void 0)===!0){if(r=l[u]?l[u](r):r,r=(o[u]||a||s)(r,i),r===void 0)continue;n+=',"'+u+'":'+r}return n}function KK(t){return t.write!==t.constructor.prototype.write}function hp(t){let e=new Tv(t);return e.on("error",r),!t.sync&&zK&&(hC.register(e,JK),e.on("close",function(){hC.unregister(e)})),e;function r(n){if(n.code==="EPIPE"){e.write=ul,e.end=ul,e.flushSync=ul,e.destroy=ul;return}e.removeListener("error",r),e.emit("error",n)}}function JK(t,e){t.destroyed||(e==="beforeExit"?(t.flush(),t.on("drain",function(){t.end()})):t.flushSync())}function YK(t){return function(r,n,s={},i){if(typeof s=="string")i=hp({dest:s}),s={};else if(typeof i=="string"){if(s&&s.transport)throw Error("only one of option.transport or stream can be specified");i=hp({dest:i})}else if(s instanceof Tv||s.writable||s._writableState)i=s,s={};else if(s.transport){if(s.transport instanceof Tv||s.transport.writable||s.transport._writableState)throw Error("option.transport do not allow stream, please pass to option directly. e.g. pino(transport)");if(s.transport.targets&&s.transport.targets.length&&s.formatters&&typeof s.formatters.level=="function")throw Error("option.transport.targets do not allow custom level formatters");let l;s.customLevels&&(l=s.useOnlyCustomLevels?s.customLevels:Object.assign({},s.levels,s.customLevels)),i=VK({caller:n,...s.transport,levels:l})}if(s=Object.assign({},t,s),s.serializers=Object.assign({},t.serializers,s.serializers),s.formatters=Object.assign({},t.formatters,s.formatters),s.prettyPrint)throw new Error("prettyPrint option is no longer supported, see the pino-pretty package (https://github.com/pinojs/pino-pretty)");let{enabled:o,onChild:a}=s;return o===!1&&(s.level="silent"),a||(s.onChild=ul),i||(KK(process.stdout)?i=process.stdout:i=hp({fd:process.stdout.fd||1})),{opts:s,stream:i}}}function XK(t,e){try{return JSON.stringify(t)}catch{try{return(e||this[Rv])(t)}catch{return'"[unable to serialize, circular reference is too complex to analyze]"'}}}function QK(t,e,r){return{level:t,bindings:e,log:r}}function ZK(t){let e=Number(t);return typeof t=="string"&&Number.isFinite(e)?e:t===void 0?1:t}TC.exports={noop:ul,buildSafeSonicBoom:hp,asChindings:WK,asJson:GK,genLog:HK,createArgsNormalizer:YK,stringify:XK,buildFormatters:QK,normalizeDestFileDescriptor:ZK}});var mp=E((UNe,RC)=>{var eJ={trace:10,debug:20,info:30,warn:40,error:50,fatal:60},tJ={ASC:"ASC",DESC:"DESC"};RC.exports={DEFAULT_LEVELS:eJ,SORTING_ORDER:tJ}});var Pv=E((BNe,xC)=>{"use strict";var{lsCacheSym:rJ,levelValSym:$v,useOnlyCustomLevelsSym:nJ,streamSym:sJ,formattersSym:iJ,hooksSym:oJ,levelCompSym:$C}=ll(),{noop:aJ,genLog:Mo}=pp(),{DEFAULT_LEVELS:gs,SORTING_ORDER:OC}=mp(),PC={fatal:t=>{let e=Mo(gs.fatal,t);return function(...r){let n=this[sJ];if(e.call(this,...r),typeof n.flushSync=="function")try{n.flushSync()}catch{}}},error:t=>Mo(gs.error,t),warn:t=>Mo(gs.warn,t),info:t=>Mo(gs.info,t),debug:t=>Mo(gs.debug,t),trace:t=>Mo(gs.trace,t)},Ov=Object.keys(gs).reduce((t,e)=>(t[gs[e]]=e,t),{}),lJ=Object.keys(Ov).reduce((t,e)=>(t[e]='{"level":'+Number(e),t),{});function cJ(t){let e=t[iJ].level,{labels:r}=t.levels,n={};for(let s in r){let i=e(r[s],Number(s));n[s]=JSON.stringify(i).slice(0,-1)}return t[rJ]=n,t}function uJ(t,e){if(e)return!1;switch(t){case"fatal":case"error":case"warn":case"info":case"debug":case"trace":return!0;default:return!1}}function fJ(t){let{labels:e,values:r}=this.levels;if(typeof t=="number"){if(e[t]===void 0)throw Error("unknown level value"+t);t=e[t]}if(r[t]===void 0)throw Error("unknown level "+t);let n=this[$v],s=this[$v]=r[t],i=this[nJ],o=this[$C],a=this[oJ].logMethod;for(let l in r){if(o(r[l],s)===!1){this[l]=aJ;continue}this[l]=uJ(l,i)?PC[l](a):Mo(r[l],a)}this.emit("level-change",t,s,e[n],n,this)}function dJ(t){let{levels:e,levelVal:r}=this;return e&&e.labels?e.labels[r]:""}function hJ(t){let{values:e}=this.levels,r=e[t];return r!==void 0&&this[$C](r,this[$v])}function pJ(t,e,r){return t===OC.DESC?e<=r:e>=r}function mJ(t){return typeof t=="string"?pJ.bind(null,t):t}function gJ(t=null,e=!1){let r=t?Object.keys(t).reduce((i,o)=>(i[t[o]]=o,i),{}):null,n=Object.assign(Object.create(Object.prototype,{Infinity:{value:"silent"}}),e?null:Ov,r),s=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),e?null:gs,t);return{labels:n,values:s}}function yJ(t,e,r){if(typeof t=="number"){if(![].concat(Object.keys(e||{}).map(i=>e[i]),r?[]:Object.keys(Ov).map(i=>+i),1/0).includes(t))throw Error(`default level:${t} must be included in custom levels`);return}let n=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),r?null:gs,e);if(!(t in n))throw Error(`default level:${t} must be included in custom levels`)}function _J(t,e){let{labels:r,values:n}=t;for(let s in e){if(s in n)throw Error("levels cannot be overridden");if(e[s]in r)throw Error("pre-existing level values cannot be used for new levels")}}function vJ(t){if(typeof t!="function"&&!(typeof t=="string"&&Object.values(OC).includes(t)))throw new Error('Levels comparison should be one of "ASC", "DESC" or "function" type')}xC.exports={initialLsCache:lJ,genLsCache:cJ,levelMethods:PC,getLevel:dJ,setLevel:fJ,isLevelEnabled:hJ,mappings:gJ,assertNoLevelCollisions:_J,assertDefaultLevelFound:yJ,genLevelComparison:mJ,assertLevelComparison:vJ}});var xv=E((zNe,NC)=>{"use strict";NC.exports={version:"10.1.0"}});var qC=E((HNe,jC)=>{"use strict";var{EventEmitter:wJ}=require("events"),{lsCacheSym:bJ,levelValSym:EJ,setLevelSym:Cv,getLevelSym:CC,chindingsSym:yp,mixinSym:SJ,asJsonSym:AC,writeSym:TJ,mixinMergeStrategySym:RJ,timeSym:$J,timeSliceIndexSym:OJ,streamSym:kC,serializersSym:jo,formattersSym:mu,errorKeySym:PJ,messageKeySym:xJ,useOnlyCustomLevelsSym:NJ,needsMetadataGsym:CJ,redactFmtSym:IJ,stringifySym:AJ,formatOptsSym:kJ,stringifiersSym:DJ,msgPrefixSym:Iv,hooksSym:MJ}=ll(),{getLevel:jJ,setLevel:qJ,isLevelEnabled:LJ,mappings:FJ,initialLsCache:UJ,genLsCache:BJ,assertNoLevelCollisions:zJ}=Pv(),{asChindings:Av,asJson:VJ,buildFormatters:Nv,stringify:IC,noop:DC}=pp(),{version:HJ}=xv(),GJ=cv(),WJ=class{},MC={constructor:WJ,child:KJ,bindings:JJ,setBindings:YJ,flush:ZJ,isLevelEnabled:LJ,version:HJ,get level(){return this[CC]()},set level(t){this[Cv](t)},get levelVal(){return this[EJ]},set levelVal(t){throw Error("levelVal is read-only")},get msgPrefix(){return this[Iv]},get[Symbol.toStringTag](){return"Pino"},[bJ]:UJ,[TJ]:QJ,[AC]:VJ,[CC]:jJ,[Cv]:qJ};Object.setPrototypeOf(MC,wJ.prototype);jC.exports=function(){return Object.create(MC)};var gp=t=>t;function KJ(t,e){if(!t)throw Error("missing bindings for child Pino");let r=this[jo],n=this[mu],s=Object.create(this);if(e==null)return s[mu].bindings!==gp&&(s[mu]=Nv(n.level,gp,n.log)),s[yp]=Av(s,t),this.onChild!==DC&&this.onChild(s),s;if(e.hasOwnProperty("serializers")===!0){s[jo]=Object.create(null);for(let c in r)s[jo][c]=r[c];let a=Object.getOwnPropertySymbols(r);for(var i=0;i<a.length;i++){let c=a[i];s[jo][c]=r[c]}for(let c in e.serializers)s[jo][c]=e.serializers[c];let l=Object.getOwnPropertySymbols(e.serializers);for(var o=0;o<l.length;o++){let c=l[o];s[jo][c]=e.serializers[c]}}else s[jo]=r;if(e.hasOwnProperty("formatters")){let{level:a,bindings:l,log:c}=e.formatters;s[mu]=Nv(a||n.level,l||gp,c||n.log)}else s[mu]=Nv(n.level,gp,n.log);if(e.hasOwnProperty("customLevels")===!0&&(zJ(this.levels,e.customLevels),s.levels=FJ(e.customLevels,s[NJ]),BJ(s)),typeof e.redact=="object"&&e.redact!==null||Array.isArray(e.redact)){s.redact=e.redact;let a=GJ(s.redact,IC),l={stringify:a[IJ]};s[AJ]=IC,s[DJ]=a,s[kJ]=l}if(typeof e.msgPrefix=="string"&&(s[Iv]=(this[Iv]||"")+e.msgPrefix),s[yp]=Av(s,t),e.level!==void 0&&e.level!==this.level||e.hasOwnProperty("customLevels")){let a=e.level||this.level;s[Cv](a)}return this.onChild(s),s}function JJ(){let e=`{${this[yp].substr(1)}}`,r=JSON.parse(e);return delete r.pid,delete r.hostname,r}function YJ(t){let e=Av(this,t);this[yp]=e}function XJ(t,e){return Object.assign(e,t)}function QJ(t,e,r){let n=this[$J](),s=this[SJ],i=this[PJ],o=this[xJ],a=this[RJ]||XJ,l,c=this[MJ].streamWrite;t==null?l={}:t instanceof Error?(l={[i]:t},e===void 0&&(e=t.message)):(l=t,e===void 0&&t[o]===void 0&&t[i]&&(e=t[i].message)),s&&(l=a(l,s(l,r,this)));let u=this[AC](l,e,r,n),d=this[kC];d[CJ]===!0&&(d.lastLevel=r,d.lastObj=l,d.lastMsg=e,d.lastTime=n.slice(this[OJ]),d.lastLogger=this),d.write(c?c(u):u)}function ZJ(t){if(t!=null&&typeof t!="function")throw Error("callback must be a function");let e=this[kC];typeof e.flush=="function"?e.flush(t||DC):t&&t()}});var BC=E((jv,UC)=>{"use strict";var{hasOwnProperty:gu}=Object.prototype,Lo=Mv();Lo.configure=Mv;Lo.stringify=Lo;Lo.default=Lo;jv.stringify=Lo;jv.configure=Mv;UC.exports=Lo;var eY=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]/;function Ai(t){return t.length<5e3&&!eY.test(t)?`"${t}"`:JSON.stringify(t)}function kv(t,e){if(t.length>200||e)return t.sort(e);for(let r=1;r<t.length;r++){let n=t[r],s=r;for(;s!==0&&t[s-1]>n;)t[s]=t[s-1],s--;t[s]=n}return t}var tY=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function Dv(t){return tY.call(t)!==void 0&&t.length!==0}function LC(t,e,r){t.length<r&&(r=t.length);let n=e===","?"":" ",s=`"0":${n}${t[0]}`;for(let i=1;i<r;i++)s+=`${e}"${i}":${n}${t[i]}`;return s}function rY(t){if(gu.call(t,"circularValue")){let e=t.circularValue;if(typeof e=="string")return`"${e}"`;if(e==null)return e;if(e===Error||e===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}function nY(t){let e;if(gu.call(t,"deterministic")&&(e=t.deterministic,typeof e!="boolean"&&typeof e!="function"))throw new TypeError('The "deterministic" argument must be of type boolean or comparator function');return e===void 0?!0:e}function sY(t,e){let r;if(gu.call(t,e)&&(r=t[e],typeof r!="boolean"))throw new TypeError(`The "${e}" argument must be of type boolean`);return r===void 0?!0:r}function FC(t,e){let r;if(gu.call(t,e)){if(r=t[e],typeof r!="number")throw new TypeError(`The "${e}" argument must be of type number`);if(!Number.isInteger(r))throw new TypeError(`The "${e}" argument must be an integer`);if(r<1)throw new RangeError(`The "${e}" argument must be >= 1`)}return r===void 0?1/0:r}function qo(t){return t===1?"1 item":`${t} items`}function iY(t){let e=new Set;for(let r of t)(typeof r=="string"||typeof r=="number")&&e.add(String(r));return e}function oY(t){if(gu.call(t,"strict")){let e=t.strict;if(typeof e!="boolean")throw new TypeError('The "strict" argument must be of type boolean');if(e)return r=>{let n=`Object can not safely be stringified. Received type ${typeof r}`;throw typeof r!="function"&&(n+=` (${r.toString()})`),new Error(n)}}}function Mv(t){t={...t};let e=oY(t);e&&(t.bigint===void 0&&(t.bigint=!1),"circularValue"in t||(t.circularValue=Error));let r=rY(t),n=sY(t,"bigint"),s=nY(t),i=typeof s=="function"?s:void 0,o=FC(t,"maximumDepth"),a=FC(t,"maximumBreadth");function l(f,h,m,y,g,w){let _=h[f];switch(typeof _=="object"&&_!==null&&typeof _.toJSON=="function"&&(_=_.toJSON(f)),_=y.call(h,f,_),typeof _){case"string":return Ai(_);case"object":{if(_===null)return"null";if(m.indexOf(_)!==-1)return r;let v="",S=",",$=w;if(Array.isArray(_)){if(_.length===0)return"[]";if(o<m.length+1)return'"[Array]"';m.push(_),g!==""&&(w+=g,v+=`
${w}`,S=`,
${w}`);let N=Math.min(_.length,a),C=0;for(;C<N-1;C++){let te=l(String(C),_,m,y,g,w);v+=te!==void 0?te:"null",v+=S}let z=l(String(C),_,m,y,g,w);if(v+=z!==void 0?z:"null",_.length-1>a){let te=_.length-a-1;v+=`${S}"... ${qo(te)} not stringified"`}return g!==""&&(v+=`
${$}`),m.pop(),`[${v}]`}let T=Object.keys(_),O=T.length;if(O===0)return"{}";if(o<m.length+1)return'"[Object]"';let R="",P="";g!==""&&(w+=g,S=`,
${w}`,R=" ");let A=Math.min(O,a);s&&!Dv(_)&&(T=kv(T,i)),m.push(_);for(let N=0;N<A;N++){let C=T[N],z=l(C,_,m,y,g,w);z!==void 0&&(v+=`${P}${Ai(C)}:${R}${z}`,P=S)}if(O>a){let N=O-a;v+=`${P}"...":${R}"${qo(N)} not stringified"`,P=S}return g!==""&&P.length>1&&(v=`
${w}${v}
${$}`),m.pop(),`{${v}}`}case"number":return isFinite(_)?String(_):e?e(_):"null";case"boolean":return _===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(_);default:return e?e(_):void 0}}function c(f,h,m,y,g,w){switch(typeof h=="object"&&h!==null&&typeof h.toJSON=="function"&&(h=h.toJSON(f)),typeof h){case"string":return Ai(h);case"object":{if(h===null)return"null";if(m.indexOf(h)!==-1)return r;let _=w,v="",S=",";if(Array.isArray(h)){if(h.length===0)return"[]";if(o<m.length+1)return'"[Array]"';m.push(h),g!==""&&(w+=g,v+=`
${w}`,S=`,
${w}`);let O=Math.min(h.length,a),R=0;for(;R<O-1;R++){let A=c(String(R),h[R],m,y,g,w);v+=A!==void 0?A:"null",v+=S}let P=c(String(R),h[R],m,y,g,w);if(v+=P!==void 0?P:"null",h.length-1>a){let A=h.length-a-1;v+=`${S}"... ${qo(A)} not stringified"`}return g!==""&&(v+=`
${_}`),m.pop(),`[${v}]`}m.push(h);let $="";g!==""&&(w+=g,S=`,
${w}`,$=" ");let T="";for(let O of y){let R=c(O,h[O],m,y,g,w);R!==void 0&&(v+=`${T}${Ai(O)}:${$}${R}`,T=S)}return g!==""&&T.length>1&&(v=`
${w}${v}
${_}`),m.pop(),`{${v}}`}case"number":return isFinite(h)?String(h):e?e(h):"null";case"boolean":return h===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(h);default:return e?e(h):void 0}}function u(f,h,m,y,g){switch(typeof h){case"string":return Ai(h);case"object":{if(h===null)return"null";if(typeof h.toJSON=="function"){if(h=h.toJSON(f),typeof h!="object")return u(f,h,m,y,g);if(h===null)return"null"}if(m.indexOf(h)!==-1)return r;let w=g;if(Array.isArray(h)){if(h.length===0)return"[]";if(o<m.length+1)return'"[Array]"';m.push(h),g+=y;let R=`
${g}`,P=`,
${g}`,A=Math.min(h.length,a),N=0;for(;N<A-1;N++){let z=u(String(N),h[N],m,y,g);R+=z!==void 0?z:"null",R+=P}let C=u(String(N),h[N],m,y,g);if(R+=C!==void 0?C:"null",h.length-1>a){let z=h.length-a-1;R+=`${P}"... ${qo(z)} not stringified"`}return R+=`
${w}`,m.pop(),`[${R}]`}let _=Object.keys(h),v=_.length;if(v===0)return"{}";if(o<m.length+1)return'"[Object]"';g+=y;let S=`,
${g}`,$="",T="",O=Math.min(v,a);Dv(h)&&($+=LC(h,S,a),_=_.slice(h.length),O-=h.length,T=S),s&&(_=kv(_,i)),m.push(h);for(let R=0;R<O;R++){let P=_[R],A=u(P,h[P],m,y,g);A!==void 0&&($+=`${T}${Ai(P)}: ${A}`,T=S)}if(v>a){let R=v-a;$+=`${T}"...": "${qo(R)} not stringified"`,T=S}return T!==""&&($=`
${g}${$}
${w}`),m.pop(),`{${$}}`}case"number":return isFinite(h)?String(h):e?e(h):"null";case"boolean":return h===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(h);default:return e?e(h):void 0}}function d(f,h,m){switch(typeof h){case"string":return Ai(h);case"object":{if(h===null)return"null";if(typeof h.toJSON=="function"){if(h=h.toJSON(f),typeof h!="object")return d(f,h,m);if(h===null)return"null"}if(m.indexOf(h)!==-1)return r;let y="",g=h.length!==void 0;if(g&&Array.isArray(h)){if(h.length===0)return"[]";if(o<m.length+1)return'"[Array]"';m.push(h);let $=Math.min(h.length,a),T=0;for(;T<$-1;T++){let R=d(String(T),h[T],m);y+=R!==void 0?R:"null",y+=","}let O=d(String(T),h[T],m);if(y+=O!==void 0?O:"null",h.length-1>a){let R=h.length-a-1;y+=`,"... ${qo(R)} not stringified"`}return m.pop(),`[${y}]`}let w=Object.keys(h),_=w.length;if(_===0)return"{}";if(o<m.length+1)return'"[Object]"';let v="",S=Math.min(_,a);g&&Dv(h)&&(y+=LC(h,",",a),w=w.slice(h.length),S-=h.length,v=","),s&&(w=kv(w,i)),m.push(h);for(let $=0;$<S;$++){let T=w[$],O=d(T,h[T],m);O!==void 0&&(y+=`${v}${Ai(T)}:${O}`,v=",")}if(_>a){let $=_-a;y+=`${v}"...":"${qo($)} not stringified"`}return m.pop(),`{${y}}`}case"number":return isFinite(h)?String(h):e?e(h):"null";case"boolean":return h===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(h);default:return e?e(h):void 0}}function p(f,h,m){if(arguments.length>1){let y="";if(typeof m=="number"?y=" ".repeat(Math.min(m,10)):typeof m=="string"&&(y=m.slice(0,10)),h!=null){if(typeof h=="function")return l("",{"":f},[],h,y,"");if(Array.isArray(h))return c("",f,[],iY(h),y,"")}if(y.length!==0)return u("",f,[],y,"")}return d("",f,[])}return p}});var GC=E((GNe,HC)=>{"use strict";var qv=Symbol.for("pino.metadata"),{DEFAULT_LEVELS:VC}=mp(),aY=VC.info;function lY(t,e){t=t||[],e=e||{dedupe:!1};let r=Object.create(VC);r.silent=1/0,e.levels&&typeof e.levels=="object"&&Object.keys(e.levels).forEach(d=>{r[d]=e.levels[d]});let n={write:s,add:a,remove:l,emit:i,flushSync:o,end:c,minLevel:0,lastId:0,streams:[],clone:u,[qv]:!0,streamLevels:r};return Array.isArray(t)?t.forEach(a,n):a.call(n,t),t=null,n;function s(d){let p,f=this.lastLevel,{streams:h}=this,m=0,y;for(let g=cY(h.length,e.dedupe);fY(g,h.length,e.dedupe);g=uY(g,e.dedupe))if(p=h[g],p.level<=f){if(m!==0&&m!==p.level)break;if(y=p.stream,y[qv]){let{lastTime:w,lastMsg:_,lastObj:v,lastLogger:S}=this;y.lastLevel=f,y.lastTime=w,y.lastMsg=_,y.lastObj=v,y.lastLogger=S}y.write(d),e.dedupe&&(m=p.level)}else if(!e.dedupe)break}function i(...d){for(let{stream:p}of this.streams)typeof p.emit=="function"&&p.emit(...d)}function o(){for(let{stream:d}of this.streams)typeof d.flushSync=="function"&&d.flushSync()}function a(d){if(!d)return n;let p=typeof d.write=="function"||d.stream,f=d.write?d:d.stream;if(!p)throw Error("stream object needs to implement either StreamEntry or DestinationStream interface");let{streams:h,streamLevels:m}=this,y;typeof d.levelVal=="number"?y=d.levelVal:typeof d.level=="string"?y=m[d.level]:typeof d.level=="number"?y=d.level:y=aY;let g={stream:f,level:y,levelVal:void 0,id:++n.lastId};return h.unshift(g),h.sort(zC),this.minLevel=h[0].level,n}function l(d){let{streams:p}=this,f=p.findIndex(h=>h.id===d);return f>=0&&(p.splice(f,1),p.sort(zC),this.minLevel=p.length>0?p[0].level:-1),n}function c(){for(let{stream:d}of this.streams)typeof d.flushSync=="function"&&d.flushSync(),d.end()}function u(d){let p=new Array(this.streams.length);for(let f=0;f<p.length;f++)p[f]={level:d,stream:this.streams[f].stream};return{write:s,add:a,remove:l,minLevel:d,streams:p,clone:u,emit:i,flushSync:o,[qv]:!0}}}function zC(t,e){return t.level-e.level}function cY(t,e){return e?t-1:0}function uY(t,e){return e?t-1:t+1}function fY(t,e,r){return r?t>=0:t<e}HC.exports=lY});var oI=E((WNe,un)=>{"use strict";var dY=require("os"),eI=iv(),hY=ov(),pY=cv(),tI=LN(),mY=qC(),rI=ll(),{configure:gY}=BC(),{assertDefaultLevelFound:yY,mappings:nI,genLsCache:_Y,genLevelComparison:vY,assertLevelComparison:wY}=Pv(),{DEFAULT_LEVELS:sI,SORTING_ORDER:bY}=mp(),{createArgsNormalizer:EY,asChindings:SY,buildSafeSonicBoom:WC,buildFormatters:TY,stringify:Lv,normalizeDestFileDescriptor:KC,noop:RY}=pp(),{version:$Y}=xv(),{chindingsSym:JC,redactFmtSym:OY,serializersSym:YC,timeSym:PY,timeSliceIndexSym:xY,streamSym:NY,stringifySym:XC,stringifySafeSym:Fv,stringifiersSym:QC,setLevelSym:CY,endSym:IY,formatOptsSym:AY,messageKeySym:kY,errorKeySym:DY,nestedKeySym:MY,mixinSym:jY,levelCompSym:qY,useOnlyCustomLevelsSym:LY,formattersSym:ZC,hooksSym:FY,nestedKeyStrSym:UY,mixinMergeStrategySym:BY,msgPrefixSym:zY}=rI,{epochTime:iI,nullTime:VY}=tI,{pid:HY}=process,GY=dY.hostname(),WY=eI.err,KY={level:"info",levelComparison:bY.ASC,levels:sI,messageKey:"msg",errorKey:"err",nestedKey:null,enabled:!0,base:{pid:HY,hostname:GY},serializers:Object.assign(Object.create(null),{err:WY}),formatters:Object.assign(Object.create(null),{bindings(t){return t},level(t,e){return{level:e}}}),hooks:{logMethod:void 0,streamWrite:void 0},timestamp:iI,name:void 0,redact:null,customLevels:null,useOnlyCustomLevels:!1,depthLimit:5,edgeLimit:100},JY=EY(KY),YY=Object.assign(Object.create(null),eI);function Uv(...t){let e={},{opts:r,stream:n}=JY(e,hY(),...t);r.level&&typeof r.level=="string"&&sI[r.level.toLowerCase()]!==void 0&&(r.level=r.level.toLowerCase());let{redact:s,crlf:i,serializers:o,timestamp:a,messageKey:l,errorKey:c,nestedKey:u,base:d,name:p,level:f,customLevels:h,levelComparison:m,mixin:y,mixinMergeStrategy:g,useOnlyCustomLevels:w,formatters:_,hooks:v,depthLimit:S,edgeLimit:$,onChild:T,msgPrefix:O}=r,R=gY({maximumDepth:S,maximumBreadth:$}),P=TY(_.level,_.bindings,_.log),A=Lv.bind({[Fv]:R}),N=s?pY(s,A):{},C=s?{stringify:N[OY]}:{stringify:A},z="}"+(i?`\r
`:`
`),te=SY.bind(null,{[JC]:"",[YC]:o,[QC]:N,[XC]:Lv,[Fv]:R,[ZC]:P}),H="";d!==null&&(p===void 0?H=te(d):H=te(Object.assign({},d,{name:p})));let K=a instanceof Function?a:a?iI:VY,xt=K().indexOf(":")+1;if(w&&!h)throw Error("customLevels is required if useOnlyCustomLevels is set true");if(y&&typeof y!="function")throw Error(`Unknown mixin type "${typeof y}" - expected "function"`);if(O&&typeof O!="string")throw Error(`Unknown msgPrefix type "${typeof O}" - expected "string"`);yY(f,h,w);let Ar=nI(h,w);typeof n.emit=="function"&&n.emit("message",{code:"PINO_CONFIG",config:{levels:Ar,messageKey:l,errorKey:c}}),wY(m);let Y=vY(m);return Object.assign(e,{levels:Ar,[qY]:Y,[LY]:w,[NY]:n,[PY]:K,[xY]:xt,[XC]:Lv,[Fv]:R,[QC]:N,[IY]:z,[AY]:C,[kY]:l,[DY]:c,[MY]:u,[UY]:u?`,${JSON.stringify(u)}:{`:"",[YC]:o,[jY]:y,[BY]:g,[JC]:H,[ZC]:P,[FY]:v,silent:RY,onChild:T,[zY]:O}),Object.setPrototypeOf(e,mY()),_Y(e),e[CY](f),e}un.exports=Uv;un.exports.destination=(t=process.stdout.fd)=>typeof t=="object"?(t.dest=KC(t.dest||process.stdout.fd),WC(t)):WC({dest:KC(t),minLength:0});un.exports.transport=Ev();un.exports.multistream=GC();un.exports.levels=nI();un.exports.stdSerializers=YY;un.exports.stdTimeFunctions=Object.assign({},tI);un.exports.symbols=rI;un.exports.version=$Y;un.exports.default=Uv;un.exports.pino=Uv});var cI=E((KNe,lI)=>{"use strict";var _p=oI(),{serializersSym:aI}=_p.symbols,{FST_ERR_LOG_INVALID_DESTINATION:XY}=Vt();function QY(t){if(t.stream&&t.file)throw new XY;t.file&&(t.stream=_p.destination(t.file),delete t.file);let e=t.logger,r=t.genReqId,n=null;return e?(t.logger=void 0,t.genReqId=void 0,e[aI]&&(t.serializers=Object.assign({},t.serializers,e[aI])),n=e.child({},t),t.logger=e,t.genReqId=r):n=_p(t,t.stream),n}var ZY={req:function(e){return{method:e.method,url:e.url,version:e.headers&&e.headers["accept-version"],host:e.host,remoteAddress:e.ip,remotePort:e.socket?e.socket.remotePort:void 0}},err:_p.stdSerializers.err,res:function(e){return{statusCode:e.statusCode}}};lI.exports={serializers:ZY,createPinoLogger:QY}});var yu=E((JNe,fI)=>{"use strict";var{FST_ERR_LOG_LOGGER_AND_LOGGER_INSTANCE_PROVIDED:eX,FST_ERR_LOG_INVALID_LOGGER_CONFIG:tX,FST_ERR_LOG_INVALID_LOGGER_INSTANCE:rX,FST_ERR_LOG_INVALID_LOGGER:nX}=Vt();function sX(t,e,r,n,s){let i={[t.requestIdLogLabel]:n},o=t.childLoggerFactory.call(t.server,e,i,s||{},r);return t.childLoggerFactory!==uI&&vp(o,!0),o}function uI(t,e,r){return t.child(e,r)}function vp(t,e){let r=["info","error","debug","fatal","warn","trace","child"],n=t?r.filter(s=>!t[s]||typeof t[s]!="function"):r;if(n.length){if(n.length===r.length&&!e)return!1;throw nX(n.join(","))}else return!0}function iX(t){if(t.logger&&t.loggerInstance)throw new eX;if(!t.loggerInstance&&!t.logger){let o=iN();return o.child=()=>o,{logger:o,hasLogger:!1}}let{createPinoLogger:e,serializers:r}=cI();if(vp(t.loggerInstance))return{logger:e({logger:t.loggerInstance,serializers:Object.assign({},r,t.loggerInstance.serializers)}),hasLogger:!0};if(vp(t.logger))throw tX();if(t.loggerInstance)throw rX();let n={};return Object.prototype.toString.call(t.logger)==="[object Object]"&&Reflect.ownKeys(t.logger).forEach(i=>{Object.defineProperty(n,i,{value:t.logger[i],writable:!0,enumerable:!0,configurable:!0})}),n.level=n.level||"info",n.serializers=Object.assign({},r,n.serializers),t.logger=n,{logger:e(t.logger),hasLogger:!0}}function oX(){let t=process.hrtime();return t[0]*1e3+t[1]/1e6}fI.exports={createChildLogger:sX,defaultChildLoggerFactory:uI,createLogger:iX,validateLogger:vp,now:oX}});var wp=E((YNe,dI)=>{"use strict";dI.exports=aX;function fl(t){return t instanceof Buffer?Buffer.from(t):new t.constructor(t.buffer.slice(),t.byteOffset,t.length)}function aX(t){if(t=t||{},t.circles)return lX(t);let e=new Map;if(e.set(Date,o=>new Date(o)),e.set(Map,(o,a)=>new Map(n(Array.from(o),a))),e.set(Set,(o,a)=>new Set(n(Array.from(o),a))),t.constructorHandlers)for(let o of t.constructorHandlers)e.set(o[0],o[1]);let r=null;return t.proto?i:s;function n(o,a){let l=Object.keys(o),c=new Array(l.length);for(let u=0;u<l.length;u++){let d=l[u],p=o[d];typeof p!="object"||p===null?c[d]=p:p.constructor!==Object&&(r=e.get(p.constructor))?c[d]=r(p,a):ArrayBuffer.isView(p)?c[d]=fl(p):c[d]=a(p)}return c}function s(o){if(typeof o!="object"||o===null)return o;if(Array.isArray(o))return n(o,s);if(o.constructor!==Object&&(r=e.get(o.constructor)))return r(o,s);let a={};for(let l in o){if(Object.hasOwnProperty.call(o,l)===!1)continue;let c=o[l];typeof c!="object"||c===null?a[l]=c:c.constructor!==Object&&(r=e.get(c.constructor))?a[l]=r(c,s):ArrayBuffer.isView(c)?a[l]=fl(c):a[l]=s(c)}return a}function i(o){if(typeof o!="object"||o===null)return o;if(Array.isArray(o))return n(o,i);if(o.constructor!==Object&&(r=e.get(o.constructor)))return r(o,i);let a={};for(let l in o){let c=o[l];typeof c!="object"||c===null?a[l]=c:c.constructor!==Object&&(r=e.get(c.constructor))?a[l]=r(c,i):ArrayBuffer.isView(c)?a[l]=fl(c):a[l]=i(c)}return a}}function lX(t){let e=[],r=[],n=new Map;if(n.set(Date,l=>new Date(l)),n.set(Map,(l,c)=>new Map(i(Array.from(l),c))),n.set(Set,(l,c)=>new Set(i(Array.from(l),c))),t.constructorHandlers)for(let l of t.constructorHandlers)n.set(l[0],l[1]);let s=null;return t.proto?a:o;function i(l,c){let u=Object.keys(l),d=new Array(u.length);for(let p=0;p<u.length;p++){let f=u[p],h=l[f];if(typeof h!="object"||h===null)d[f]=h;else if(h.constructor!==Object&&(s=n.get(h.constructor)))d[f]=s(h,c);else if(ArrayBuffer.isView(h))d[f]=fl(h);else{let m=e.indexOf(h);m!==-1?d[f]=r[m]:d[f]=c(h)}}return d}function o(l){if(typeof l!="object"||l===null)return l;if(Array.isArray(l))return i(l,o);if(l.constructor!==Object&&(s=n.get(l.constructor)))return s(l,o);let c={};e.push(l),r.push(c);for(let u in l){if(Object.hasOwnProperty.call(l,u)===!1)continue;let d=l[u];if(typeof d!="object"||d===null)c[u]=d;else if(d.constructor!==Object&&(s=n.get(d.constructor)))c[u]=s(d,o);else if(ArrayBuffer.isView(d))c[u]=fl(d);else{let p=e.indexOf(d);p!==-1?c[u]=r[p]:c[u]=o(d)}}return e.pop(),r.pop(),c}function a(l){if(typeof l!="object"||l===null)return l;if(Array.isArray(l))return i(l,a);if(l.constructor!==Object&&(s=n.get(l.constructor)))return s(l,a);let c={};e.push(l),r.push(c);for(let u in l){let d=l[u];if(typeof d!="object"||d===null)c[u]=d;else if(d.constructor!==Object&&(s=n.get(d.constructor)))c[u]=s(d,a);else if(ArrayBuffer.isView(d))c[u]=fl(d);else{let p=e.indexOf(d);p!==-1?c[u]=r[p]:c[u]=a(d)}}return e.pop(),r.pop(),c}}});var _u=E((XNe,yI)=>{"use strict";var cX=wp()({circles:!1,proto:!0}),{kSchemaVisited:hI,kSchemaResponse:uX}=Nt(),Bv=Symbol.for("fluent-schema-object"),{FST_ERR_SCH_MISSING_ID:fX,FST_ERR_SCH_ALREADY_PRESENT:dX,FST_ERR_SCH_DUPLICATE:hX,FST_ERR_SCH_CONTENT_MISSING_SCHEMA:pI}=Vt(),gI=["params","body","querystring","query","headers"];function bp(t){this.store=t||{}}bp.prototype.add=function(t){let e=cX(t.isFluentSchema||t.isFluentJSONSchema||t[Bv]?t.valueOf():t),r=e.$id;if(!r)throw new fX;if(this.store[r])throw new dX(r);this.store[r]=e};bp.prototype.getSchemas=function(){return Object.assign({},this.store)};bp.prototype.getSchema=function(t){return this.store[t]};function mI(t){return typeof t=="object"&&Object.getPrototypeOf(t)!==Object.prototype}function pX(t,e){if(t[hI])return t;if(t.query){if(t.querystring)throw new hX("querystring");t.querystring=t.query}mX(t);for(let r of gI){let n=t[r];if(n&&!mI(n)&&r==="body"&&n.content){let s=n.content,i=Object.keys(s);for(let o=0;o<i.length;o++){let a=i[o];if(!s[a].schema)throw new pI(a)}continue}}if(t.response){let r=Object.keys(t.response);for(let n of r){if(mI(t.response[n]))continue;let s=t.response[n].content;if(s){let i=Object.keys(s);for(let o=0;o<i.length;o++){let a=i[o];if(!s[a].schema)throw new pI(a)}}}}return t[hI]=!0,t}function mX(t){for(let e of gI)t[e]&&(t[e].isFluentSchema||t[e][Bv])&&(t[e]=t[e].valueOf());if(t.response){let e=Object.keys(t.response);for(let r of e)(t.response[r].isFluentSchema||t.response[r][Bv])&&(t.response[r]=t.response[r].valueOf())}}function gX(t,e,r){let n=t[uX];if(!n)return!1;if(n[e]){if(n[e].constructor===Object&&r){let i=r.split(";",1)[0];return n[e][i]?n[e][i]:n[e]["*/*"]?n[e]["*/*"]:!1}return n[e]}let s=(e+"")[0]+"xx";if(n[s]){if(n[s].constructor===Object&&r){let i=r.split(";",1)[0];return n[s][i]?n[s][i]:n[s]["*/*"]?n[s]["*/*"]:!1}return n[s]}if(n.default){if(n.default.constructor===Object&&r){let i=r.split(";",1)[0];return n.default[i]?n.default[i]:n.default["*/*"]?n.default["*/*"]:!1}return n.default}return!1}yI.exports={buildSchemas(t){return new bp(t)},getSchemaSerializer:gX,normalizeSchema:pX}});var Ep=E((QNe,vI)=>{"use strict";var yX=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]/;vI.exports=class _I{constructor(e){switch(e&&e.rounding){case"floor":this.parseInteger=Math.floor;break;case"ceil":this.parseInteger=Math.ceil;break;case"round":this.parseInteger=Math.round;break;case"trunc":default:this.parseInteger=Math.trunc;break}this._options=e}asInteger(e){if(Number.isInteger(e))return""+e;if(typeof e=="bigint")return e.toString();let r=this.parseInteger(e);if(r===1/0||r===-1/0||r!==r)throw new Error(`The value "${e}" cannot be converted to an integer.`);return""+r}asNumber(e){let r=Number(e);if(r!==r)throw new Error(`The value "${e}" cannot be converted to a number.`);return r===1/0||r===-1/0?"null":""+r}asBoolean(e){return e&&"true"||"false"}asDateTime(e){if(e===null)return'""';if(e instanceof Date)return'"'+e.toISOString()+'"';if(typeof e=="string")return'"'+e+'"';throw new Error(`The value "${e}" cannot be converted to a date-time.`)}asDate(e){if(e===null)return'""';if(e instanceof Date)return'"'+new Date(e.getTime()-e.getTimezoneOffset()*6e4).toISOString().slice(0,10)+'"';if(typeof e=="string")return'"'+e+'"';throw new Error(`The value "${e}" cannot be converted to a date.`)}asTime(e){if(e===null)return'""';if(e instanceof Date)return'"'+new Date(e.getTime()-e.getTimezoneOffset()*6e4).toISOString().slice(11,19)+'"';if(typeof e=="string")return'"'+e+'"';throw new Error(`The value "${e}" cannot be converted to a time.`)}asString(e){let r=e.length;if(r===0)return'""';if(r<42){let n="",s=-1,i=255;for(let o=0;o<r;o++)if(i=e.charCodeAt(o),i===34||i===92)s===-1&&(s=0),n+=e.slice(s,o)+"\\",s=o;else if(i<32||i>=55296&&i<=57343)return JSON.stringify(e);return s===-1&&'"'+e+'"'||'"'+n+e.slice(s)+'"'}else return r<5e3&&yX.test(e)===!1?'"'+e+'"':JSON.stringify(e)}asUnsafeString(e){return'"'+e+'"'}getState(){return this._options}static restoreFromState(e){return new _I(e)}}});var bI=E((ZNe,wI)=>{"use strict";var _X=Ep(),vX={mode:"standalone"},wX=_X.restoreFromState(vX),bX=null;wI.exports=function(e,r){let n="{",s="}",i="[",o="]",a=",",l=":",c='"',u=n+s,d=i+o,p=c+c,f="null";function h(y){let g=y&&typeof y.toJSON=="function"?y.toJSON():y;if(g===null)return u;let w,_=n,v=!1;return w=g.statusCode,w!==void 0&&(!v&&(v=!0)||(_+=a),_+='"statusCode":',_+=r.asNumber(w)),w=g.code,w!==void 0&&(!v&&(v=!0)||(_+=a),_+='"code":',typeof w!="string"?w===null?_+=p:w instanceof Date?_+=c+w.toISOString()+c:w instanceof RegExp?_+=r.asString(w.source):_+=r.asString(w.toString()):_+=r.asString(w)),w=g.error,w!==void 0&&(!v&&(v=!0)||(_+=a),_+='"error":',typeof w!="string"?w===null?_+=p:w instanceof Date?_+=c+w.toISOString()+c:w instanceof RegExp?_+=r.asString(w.source):_+=r.asString(w.toString()):_+=r.asString(w)),w=g.message,w!==void 0&&(!v&&(v=!0)||(_+=a),_+='"message":',typeof w!="string"?w===null?_+=p:w instanceof Date?_+=c+w.toISOString()+c:w instanceof RegExp?_+=r.asString(w.source):_+=r.asString(w.toString()):_+=r.asString(w)),_+s}return h}(bX,wX)});var vu=E((eCe,RI)=>{"use strict";var EI=require("http").STATUS_CODES,EX=H_(),{kReplyHeaders:Fo,kReplyNextErrorHandler:Sp,kReplyIsRunningOnErrorHook:SX,kReplyHasStatusCode:TX,kRouteContext:TI,kDisableRequestLogging:Tp}=Nt(),{FST_ERR_REP_INVALID_PAYLOAD_TYPE:RX,FST_ERR_FAILED_ERROR_SERIALIZATION:$X}=Vt(),{getSchemaSerializer:OX}=_u(),zv=bI(),PX={func:NX,toJSON(){return this.func.name.toString()+"()"}};function xX(t,e,r){t[SX]=!1;let n=t[TI];if(t[Sp]===!1){SI(e,t,function(o,a){try{o.raw.writeHead(o.raw.statusCode,o[Fo])}catch(l){o.log[Tp]||o.log.warn({req:o.request,res:o,err:l},l?.message),o.raw.writeHead(o.raw.statusCode)}o.raw.end(a)});return}let s=t[Sp]||n.errorHandler;t[Sp]=Object.getPrototypeOf(s),delete t[Fo]["content-type"],delete t[Fo]["content-length"];let i=s.func;if(!i){t[Sp]=!1,SI(e,t,r);return}try{let o=i(e,t.request,t);o!==void 0&&(o!==null&&typeof o.then=="function"?EX(o,t):t.send(o))}catch(o){t.send(o)}}function NX(t,e,r){if(IX(t,r),!r[TX]||r.statusCode===200){let n=t&&(t.statusCode||t.status);r.code(n>=400?n:500)}r.statusCode<500?r.log[Tp]||r.log.info({res:r,err:t},t?.message):r.log[Tp]||r.log.error({req:e,res:r,err:t},t?.message),r.send(t)}function SI(t,e,r){let n=e.raw,s=e.statusCode;e[Fo]["content-type"]=e[Fo]["content-type"]??"application/json; charset=utf-8";let i;try{let o=OX(e[TI],s,e[Fo]["content-type"]);o===!1?i=zv({error:EI[s+""],code:t.code,message:t.message,statusCode:s}):i=o(Object.create(t,{error:{value:EI[s+""]},message:{value:t.message},statusCode:{value:s}}))}catch(o){e.log[Tp]||e.log.error({err:o,statusCode:n.statusCode},"The serializer for the given status code failed"),e.code(500),i=zv(new $X(o.message,t.message))}typeof i!="string"&&!Buffer.isBuffer(i)&&(i=zv(new RX(typeof i))),e[Fo]["content-length"]=""+Buffer.byteLength(i),r(e,i)}function CX(t=PX,e){if(!e)return t;let r=Object.create(t);return r.func=e,r}function IX(t,e){let r=e.raw,n=r.statusCode;n=n>=400?n:500,t!=null&&(t.headers!==void 0&&e.headers(t.headers),t.status>=400?n=t.status:t.statusCode>=400&&(n=t.statusCode)),r.statusCode=n}RI.exports={buildErrorHandler:CX,handleError:xX}});var Eu=E((tCe,xI)=>{"use strict";var{kReply:Vv,kRequest:Hv,kState:AX,kHasBeenDecorated:kX}=Nt(),{FST_ERR_DEC_ALREADY_PRESENT:$I,FST_ERR_DEC_MISSING_DEPENDENCY:DX,FST_ERR_DEC_AFTER_START:MX,FST_ERR_DEC_REFERENCE_TYPE:jX,FST_ERR_DEC_DEPENDENCY_INVALID_TYPE:qX,FST_ERR_DEC_UNDECLARED:LX}=Vt();function FX(t,e,r,n){if(Object.hasOwn(t,e))throw new $I(e);Gv(t,e,n),r&&(typeof r.getter=="function"||typeof r.setter=="function")?Object.defineProperty(t,e,{get:r.getter,set:r.setter}):t[e]=r}function UX(t){if(!wu(this,t))throw new LX(t,"instance");return typeof this[t]=="function"?this[t].bind(this):this[t]}function OI(t,e,r,n){let s=t.prototype;if(Object.hasOwn(s,e)||bu(t,e))throw new $I(e);t[kX]=!0,Gv(t,e,n),r&&(typeof r.getter=="function"||typeof r.setter=="function")?Object.defineProperty(s,e,{get:r.getter,set:r.setter}):typeof r=="function"?s[e]=r:t.props.push({key:e,value:r})}function PI(t,e){if(typeof e=="object"&&e&&!(typeof e.getter=="function"||typeof e.setter=="function"))throw new jX(t,typeof e)}function BX(t,e,r){return Wv(this,t),FX(this,t,e,r),this}function wu(t,e){return e?e in t||t.prototype&&e in t.prototype||bu(t,e):t in this}function bu(t,e){return t.props?t.props.find(({key:r})=>r===e):!1}function zX(t){return t&&bu(this[Hv],t)?!0:wu(this[Hv].prototype,t)}function VX(t){return t&&bu(this[Vv],t)?!0:wu(this[Vv].prototype,t)}function Gv(t,e,r){if(r!=null){if(!Array.isArray(r))throw new qX(e);for(let n=0;n!==r.length;++n)if(!wu(t,r[n]))throw new DX(r[n])}}function HX(t,e,r){return Wv(this,t),PI(t,e),OI(this[Vv],t,e,r),this}function GX(t,e,r){return Wv(this,t),PI(t,e),OI(this[Hv],t,e,r),this}function Wv(t,e){if(t[AX].started)throw new MX(e)}xI.exports={add:BX,exist:wu,existRequest:zX,existReply:VX,dependencies:Gv,decorateReply:HX,decorateRequest:GX,getInstanceDecorator:UX,hasKey:bu}});var Np=E((rCe,xp)=>{"use strict";var Xv=require("stream").finished,WX=require("stream").Readable,{kFourOhFourContext:NI,kReplyErrorHandlerCalled:qI,kReplyHijacked:Zv,kReplyStartTime:Su,kReplyEndTime:ew,kReplySerializer:Ks,kReplySerializerDefault:$p,kReplyIsError:Op,kReplyHeaders:Qe,kReplyTrailers:kt,kReplyHasStatusCode:tw,kReplyIsRunningOnErrorHook:rw,kReplyNextErrorHandler:KX,kDisableRequestLogging:LI,kSchemaResponse:Pp,kReplyCacheSerializeFns:ki,kSchemaController:Kv,kOptions:JX,kRouteContext:Re}=Nt(),{onSendHookRunner:FI,onResponseHookRunner:YX,preHandlerHookRunner:XX,preSerializationHookRunner:QX}=Ci(),CI=J_()[Symbol.for("internals")],ZX=yu(),Qv=ZX.now,{handleError:II}=vu(),{getSchemaSerializer:eQ}=_u(),Jv={JSON:"application/json; charset=utf-8",PLAIN:"text/plain; charset=utf-8",OCTET:"application/octet-stream"},{FST_ERR_REP_INVALID_PAYLOAD_TYPE:tQ,FST_ERR_REP_RESPONSE_BODY_CONSUMED:rQ,FST_ERR_REP_READABLE_STREAM_LOCKED:nQ,FST_ERR_REP_ALREADY_SENT:sQ,FST_ERR_SEND_INSIDE_ONERR:iQ,FST_ERR_BAD_STATUS_CODE:oQ,FST_ERR_BAD_TRAILER_NAME:aQ,FST_ERR_BAD_TRAILER_VALUE:lQ,FST_ERR_MISSING_SERIALIZATION_FN:cQ,FST_ERR_MISSING_CONTENTTYPE_SERIALIZATION_FN:uQ,FST_ERR_DEC_UNDECLARED:fQ}=Vt(),AI=Eu(),UI=Object.prototype.toString;function ze(t,e,r){this.raw=t,this[Ks]=null,this[qI]=!1,this[Op]=!1,this[rw]=!1,this.request=e,this[Qe]={},this[kt]=null,this[tw]=!1,this[Su]=void 0,this.log=r}ze.props=[];Object.defineProperties(ze.prototype,{[Re]:{get(){return this.request[Re]}},elapsedTime:{get(){return this[Su]===void 0?0:(this[ew]||Qv())-this[Su]}},server:{get(){return this.request[Re].server}},sent:{enumerable:!0,get(){return(this[Zv]||this.raw.writableEnded)===!0}},statusCode:{get(){return this.raw.statusCode},set(t){this.code(t)}},routeOptions:{get(){return this.request.routeOptions}}});ze.prototype.writeEarlyHints=function(t,e){return this.raw.writeEarlyHints(t,e),this};ze.prototype.hijack=function(){return this[Zv]=!0,this};ze.prototype.send=function(t){if(this[rw])throw new iQ;if(this.sent===!0)return this.log.warn({err:new sQ(this.request.url,this.request.method)}),this;if(this[Op]||t instanceof Error)return this[Op]=!1,Tu(this,t,Uo),this;if(t===void 0)return Uo(this,t),this;let e=this.getHeader("content-type"),r=e!==void 0;if(t!==null){if(typeof t.pipe=="function"||typeof t.getReader=="function"||UI.call(t)==="[object Response]")return Uo(this,t),this;if(t.buffer instanceof ArrayBuffer){r||(this[Qe]["content-type"]=Jv.OCTET);let n=Buffer.isBuffer(t)?t:Buffer.from(t.buffer,t.byteOffset,t.byteLength);return Uo(this,n),this}if(!r&&typeof t=="string")return this[Qe]["content-type"]=Jv.PLAIN,Uo(this,t),this}if(this[Ks]!==null){if(typeof t!="string")return kI(this,t),this;t=this[Ks](t)}else if(!r||e.indexOf("json")!==-1){if(!r)this[Qe]["content-type"]=Jv.JSON;else if(e.indexOf("charset")===-1){let n=e.trim();n.endsWith(";")?this[Qe]["content-type"]=`${n} charset=utf-8`:this[Qe]["content-type"]=`${n}; charset=utf-8`}if(typeof t!="string")return kI(this,t),this}return Uo(this,t),this};ze.prototype.getHeader=function(t){t=t.toLowerCase();let e=this[Qe][t];return e!==void 0?e:this.raw.getHeader(t)};ze.prototype.getHeaders=function(){return{...this.raw.getHeaders(),...this[Qe]}};ze.prototype.hasHeader=function(t){return t=t.toLowerCase(),this[Qe][t]!==void 0||this.raw.hasHeader(t)};ze.prototype.removeHeader=function(t){return delete this[Qe][t.toLowerCase()],this};ze.prototype.header=function(t,e=""){return t=t.toLowerCase(),this[Qe][t]&&t==="set-cookie"?(typeof this[Qe][t]=="string"&&(this[Qe][t]=[this[Qe][t]]),Array.isArray(e)?Array.prototype.push.apply(this[Qe][t],e):this[Qe][t].push(e)):this[Qe][t]=e,this};ze.prototype.headers=function(t){let e=Object.keys(t);for(let r=0;r!==e.length;++r){let n=e[r];this.header(n,t[n])}return this};var dQ=new Set(["transfer-encoding","content-length","host","cache-control","max-forwards","te","authorization","set-cookie","content-encoding","content-type","content-range","trailer"]);ze.prototype.trailer=function(t,e){if(t=t.toLowerCase(),dQ.has(t))throw new aQ(t);if(typeof e!="function")throw new lQ(t,typeof e);return this[kt]===null&&(this[kt]={}),this[kt][t]=e,this};ze.prototype.hasTrailer=function(t){return this[kt]?.[t.toLowerCase()]!==void 0};ze.prototype.removeTrailer=function(t){return this[kt]===null?this:(this[kt][t.toLowerCase()]=void 0,this)};ze.prototype.code=function(t){let e=+t;if(!(e>=100&&e<=599))throw new oQ(t||String(t));return this.raw.statusCode=e,this[tw]=!0,this};ze.prototype.status=ze.prototype.code;ze.prototype.getSerializationFunction=function(t,e){let r;return typeof t=="string"||typeof t=="number"?typeof e=="string"?r=this[Re][Pp]?.[t]?.[e]:r=this[Re][Pp]?.[t]:typeof t=="object"&&(r=this[Re][ki]?.get(t)),r};ze.prototype.compileSerializationSchema=function(t,e=null,r=null){let{request:n}=this,{method:s,url:i}=n;if(this[Re][ki]?.has(t))return this[Re][ki].get(t);let a=(this[Re].serializerCompiler||this.server[Kv].serializerCompiler||this.server[Kv].setupSerializer(this.server[JX])||this.server[Kv].serializerCompiler)({schema:t,method:s,url:i,httpStatus:e,contentType:r});return this[Re][ki]==null&&(this[Re][ki]=new WeakMap),this[Re][ki].set(t,a),a};ze.prototype.serializeInput=function(t,e,r,n){let s=r,i;if(r=typeof e=="string"||typeof e=="number"?e:r,n=r&&s!==r?s:n,r!=null){if(n!=null?i=this[Re][Pp]?.[r]?.[n]:i=this[Re][Pp]?.[r],i==null)throw n?new uQ(r,n):new cQ(r)}else this[Re][ki]?.has(e)?i=this[Re][ki].get(e):i=this.compileSerializationSchema(e,r,n);return i(t)};ze.prototype.serialize=function(t){return this[Ks]!==null?this[Ks](t):this[Re]&&this[Re][$p]?this[Re][$p](t,this.raw.statusCode):VI(this[Re],t,this.raw.statusCode)};ze.prototype.serializer=function(t){return this[Ks]=t,this};ze.prototype.type=function(t){return this[Qe]["content-type"]=t,this};ze.prototype.redirect=function(t,e){return e||(e=this[tw]?this.raw.statusCode:302),this.header("location",t).code(e).send()};ze.prototype.callNotFound=function(){return vQ(this),this};ze.prototype.then=function(t,e){if(this.sent){t();return}Xv(this.raw,r=>{r&&r.code!=="ERR_STREAM_PREMATURE_CLOSE"?e?e(r):this.log&&this.log.warn("unhandled rejection on reply.then"):t()})};ze.prototype.getDecorator=function(t){if(!AI.hasKey(this,t)&&!AI.exist(this,t))throw new fQ(t,"reply");let e=this[t];return typeof e=="function"?e.bind(this):e};function kI(t,e){t[Re].preSerialization!==null?QX(t[Re].preSerialization,t.request,t,e,DI):DI(null,void 0,t,e)}function DI(t,e,r,n){if(t!=null){Tu(r,t);return}try{r[Ks]!==null?n=r[Ks](n):r[Re]&&r[Re][$p]?n=r[Re][$p](n,r.raw.statusCode):n=VI(r[Re],n,r.raw.statusCode,r[Qe]["content-type"])}catch(s){hQ(s,r),Tu(r,s);return}Uo(r,n)}function hQ(t,e){t.serialization=e[Re].config}function Uo(t,e){t[Re].onSend!==null?FI(t[Re].onSend,t.request,t,e,pQ):BI(t,e)}function pQ(t,e,r,n){t!=null?Tu(r,t):BI(r,n)}function Yv(t,e){let r=t.raw;try{r.writeHead(e,t[Qe])}catch(n){throw n.code==="ERR_HTTP_HEADERS_SENT"&&t.log.warn(`Reply was already sent, did you forget to "return reply" in the "${t.request.raw.url}" (${t.request.raw.method}) route?`),n}}function BI(t,e){let r=t.raw,n=t.request;if(t[kt]!==null){let i=Object.keys(t[kt]),o="";for(let a of i)typeof t[kt][a]=="function"&&(o+=" ",o+=a);t.header("Transfer-Encoding","chunked"),t.header("Trailer",o.trim())}if(UI.call(e)==="[object Response]"){if(typeof e.status=="number"&&t.code(e.status),typeof e.headers=="object"&&typeof e.headers.forEach=="function")for(let[i,o]of e.headers)t.header(i,o);if(e.body!==null&&e.bodyUsed)throw new rQ;e=e.body}let s=r.statusCode;if(e==null){s>=200&&s!==204&&s!==304&&n.method!=="HEAD"&&t[kt]===null&&(t[Qe]["content-length"]="0"),Yv(t,s),Rp(e,r,t);return}if(s>=100&&s<200||s===204){t.removeHeader("content-type"),t.removeHeader("content-length"),Yv(t,s),Rp(void 0,r,t),typeof e.resume=="function"&&(e.on("error",HI),e.resume());return}if(typeof e.pipe=="function"){zI(e,r,t);return}if(typeof e.getReader=="function"){mQ(e,r,t);return}if(typeof e!="string"&&!Buffer.isBuffer(e))throw new tQ(typeof e);if(t[kt]===null){let i=t[Qe]["content-length"];(!i||n.raw.method!=="HEAD"&&Number(i)!==Buffer.byteLength(e))&&(t[Qe]["content-length"]=""+Buffer.byteLength(e))}Yv(t,s),r.write(e),Rp(e,r,t)}function MI(t,e,r){e.code==="ERR_STREAM_PREMATURE_CLOSE"?t[LI]||t.info({res:r},"stream closed prematurely"):t.warn({err:e},"response terminated with an error with headers already sent")}function mQ(t,e,r){if(t.locked)throw new nQ;let n=WX.fromWeb(t);zI(n,e,r)}function zI(t,e,r){let n=!0,s=!1;if(gQ(t,e,r),Xv(t,{readable:!0,writable:!1},function(i){n=!1,i!=null&&(e.headersSent||r.request.raw.aborted===!0?(s||(s=!0,MI(r.log,i,r)),e.destroy()):Tu(r,i))}),Xv(e,function(i){n&&(i!=null&&e.headersSent&&!s&&(s=!0,MI(r.log,i,e)),typeof t.destroy=="function"?t.destroy():typeof t.close=="function"?t.close(HI):typeof t.abort=="function"?t.abort():r.log.warn("stream payload does not end properly"))}),e.headersSent)r.log.warn("response will send, but you shouldn't use res.writeHead in stream mode");else for(let i in r[Qe])e.setHeader(i,r[Qe][i]);t.pipe(e)}function Rp(t,e,r){if(r[kt]===null){e.end(null,null,null);return}let n=Object.keys(r[kt]),s={},i=0,o=!0;function a(){i===0&&(e.addTrailers(s),e.end(null,null,null))}for(let l of n){let c=function(d,p){i++,d?r.log.debug(d):s[l]=p,process.nextTick(a)};if(typeof r[kt][l]!="function")continue;o=!1,i--;let u=r[kt][l](r,t,c);typeof u=="object"&&typeof u.then=="function"&&u.then(d=>c(null,d),c)}o&&e.end(null,null,null)}function gQ(t,e,r){r[kt]!==null&&t.on("end",()=>Rp(null,e,r))}function Tu(t,e,r){t[Re].onError!==null&&!t[KX]?(t[rw]=!0,FI(t[Re].onError,t.request,t,e,()=>II(t,e,r))):II(t,e,r)}function yQ(t){t[Su]=Qv();let e=r=>{t[ew]=Qv(),t.raw.removeListener("finish",e),t.raw.removeListener("error",e);let n=t[Re];n&&n.onResponse!==null?YX(n.onResponse,t.request,t,jI):jI(r,t.request,t)};t.raw.on("finish",e),t.raw.on("error",e)}function jI(t,e,r){if(r.log[LI])return;let n=r.elapsedTime;if(t!=null){r.log.error({res:r,err:t,responseTime:n},"request errored");return}r.log.info({res:r,responseTime:n},"request completed")}function _Q(t){let e=t.props.slice();function r(n,s,i){this.raw=n,this[Op]=!1,this[qI]=!1,this[Zv]=!1,this[Ks]=null,this.request=s,this[Qe]={},this[kt]=null,this[Su]=void 0,this[ew]=void 0,this.log=i;let o;for(let a=0;a<e.length;a++)o=e[a],this[o.key]=o.value}return Object.setPrototypeOf(r.prototype,t.prototype),Object.setPrototypeOf(r,t),r.parent=t,r.props=e,r}function vQ(t){if(t[Re][NI]===null){t.log.warn("Trying to send a NotFound error inside a 404 handler. Sending basic 404 response."),t.code(404).send("404 Not Found");return}t.request[Re]=t[Re][NI],t[Re].preHandler!==null?XX(t[Re].preHandler,t.request,t,CI.preHandlerCallback):CI.preHandlerCallback(null,t.request,t)}function VI(t,e,r,n){let s=eQ(t,r,n);return s?s(e):JSON.stringify(e)}function HI(){}xp.exports=ze;xp.exports.buildReply=_Q;xp.exports.setupResponseListeners=yQ});var GI=E((nCe,Cp)=>{"use strict";function nw(t){if(!t)throw new TypeError("argument req is required");let e=t.headers["x-forwarded-for"],r=t.socket.remoteAddress;if(!e||typeof e!="string")return[r];if(e.indexOf(",")===-1){let n=e.trim();return n.length?[r,n]:[r]}else return wQ(e,r)}function wQ(t,e){let r=[e],n=t.length,s=n,i,o;for(o=n-1;o>=0;--o)i=t[o],i===" "?s===n&&(s=n=o):i===","?(s!==n&&r.push(t.slice(s,n)),s=n=o):s=o;return s!==n&&r.push(t.substring(s,n)),r}Cp.exports=nw;Cp.exports.default=nw;Cp.exports.forwarded=nw});var KI=E((WI,Ip)=>{(function(t){"use strict";let e="(0?\\d+|0x[a-f0-9]+)",r={fourOctet:new RegExp(`^${e}\\.${e}\\.${e}\\.${e}$`,"i"),threeOctet:new RegExp(`^${e}\\.${e}\\.${e}$`,"i"),twoOctet:new RegExp(`^${e}\\.${e}$`,"i"),longValue:new RegExp(`^${e}$`,"i")},n=new RegExp("^0[0-7]+$","i"),s=new RegExp("^0x[a-f0-9]+$","i"),i="%[0-9a-z]{1,}",o="(?:[0-9a-f]+::?)+",a={zoneIndex:new RegExp(i,"i"),native:new RegExp(`^(::)?(${o})?([0-9a-f]+)?(::)?(${i})?$`,"i"),deprecatedTransitional:new RegExp(`^(?:::)(${e}\\.${e}\\.${e}\\.${e}(${i})?)$`,"i"),transitional:new RegExp(`^((?:${o})|(?:::)(?:${o})?)${e}\\.${e}\\.${e}\\.${e}(${i})?$`,"i")};function l(f,h){if(f.indexOf("::")!==f.lastIndexOf("::"))return null;let m=0,y=-1,g=(f.match(a.zoneIndex)||[])[0],w,_;for(g&&(g=g.substring(1),f=f.replace(/%.+$/,""));(y=f.indexOf(":",y+1))>=0;)m++;if(f.substr(0,2)==="::"&&m--,f.substr(-2,2)==="::"&&m--,m>h)return null;for(_=h-m,w=":";_--;)w+="0:";return f=f.replace("::",w),f[0]===":"&&(f=f.slice(1)),f[f.length-1]===":"&&(f=f.slice(0,-1)),h=function(){let v=f.split(":"),S=[];for(let $=0;$<v.length;$++)S.push(parseInt(v[$],16));return S}(),{parts:h,zoneId:g}}function c(f,h,m,y){if(f.length!==h.length)throw new Error("ipaddr: cannot match CIDR for objects with different lengths");let g=0,w;for(;y>0;){if(w=m-y,w<0&&(w=0),f[g]>>w!==h[g]>>w)return!1;y-=m,g+=1}return!0}function u(f){if(s.test(f))return parseInt(f,16);if(f[0]==="0"&&!isNaN(parseInt(f[1],10))){if(n.test(f))return parseInt(f,8);throw new Error(`ipaddr: cannot parse ${f} as octal`)}return parseInt(f,10)}function d(f,h){for(;f.length<h;)f=`0${f}`;return f}let p={};p.IPv4=function(){function f(h){if(h.length!==4)throw new Error("ipaddr: ipv4 octet count should be 4");let m,y;for(m=0;m<h.length;m++)if(y=h[m],!(0<=y&&y<=255))throw new Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=h}return f.prototype.SpecialRanges={unspecified:[[new f([0,0,0,0]),8]],broadcast:[[new f([255,255,255,255]),32]],multicast:[[new f([224,0,0,0]),4]],linkLocal:[[new f([169,254,0,0]),16]],loopback:[[new f([127,0,0,0]),8]],carrierGradeNat:[[new f([100,64,0,0]),10]],private:[[new f([10,0,0,0]),8],[new f([172,16,0,0]),12],[new f([192,168,0,0]),16]],reserved:[[new f([192,0,0,0]),24],[new f([192,0,2,0]),24],[new f([192,88,99,0]),24],[new f([198,18,0,0]),15],[new f([198,51,100,0]),24],[new f([203,0,113,0]),24],[new f([240,0,0,0]),4]],as112:[[new f([192,175,48,0]),24],[new f([192,31,196,0]),24]],amt:[[new f([192,52,193,0]),24]]},f.prototype.kind=function(){return"ipv4"},f.prototype.match=function(h,m){let y;if(m===void 0&&(y=h,h=y[0],m=y[1]),h.kind()!=="ipv4")throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return c(this.octets,h.octets,8,m)},f.prototype.prefixLengthFromSubnetMask=function(){let h=0,m=!1,y={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0},g,w,_;for(g=3;g>=0;g-=1)if(w=this.octets[g],w in y){if(_=y[w],m&&_!==0)return null;_!==8&&(m=!0),h+=_}else return null;return 32-h},f.prototype.range=function(){return p.subnetMatch(this,this.SpecialRanges)},f.prototype.toByteArray=function(){return this.octets.slice(0)},f.prototype.toIPv4MappedAddress=function(){return p.IPv6.parse(`::ffff:${this.toString()}`)},f.prototype.toNormalizedString=function(){return this.toString()},f.prototype.toString=function(){return this.octets.join(".")},f}(),p.IPv4.broadcastAddressFromCIDR=function(f){try{let h=this.parseCIDR(f),m=h[0].toByteArray(),y=this.subnetMaskFromPrefixLength(h[1]).toByteArray(),g=[],w=0;for(;w<4;)g.push(parseInt(m[w],10)|parseInt(y[w],10)^255),w++;return new this(g)}catch{throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},p.IPv4.isIPv4=function(f){return this.parser(f)!==null},p.IPv4.isValid=function(f){try{return new this(this.parser(f)),!0}catch{return!1}},p.IPv4.isValidCIDR=function(f){try{return this.parseCIDR(f),!0}catch{return!1}},p.IPv4.isValidFourPartDecimal=function(f){return!!(p.IPv4.isValid(f)&&f.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},p.IPv4.isValidCIDRFourPartDecimal=function(f){let h=f.match(/^(.+)\/(\d+)$/);return!p.IPv4.isValidCIDR(f)||!h?!1:p.IPv4.isValidFourPartDecimal(h[1])},p.IPv4.networkAddressFromCIDR=function(f){let h,m,y,g,w;try{for(h=this.parseCIDR(f),y=h[0].toByteArray(),w=this.subnetMaskFromPrefixLength(h[1]).toByteArray(),g=[],m=0;m<4;)g.push(parseInt(y[m],10)&parseInt(w[m],10)),m++;return new this(g)}catch{throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},p.IPv4.parse=function(f){let h=this.parser(f);if(h===null)throw new Error("ipaddr: string is not formatted like an IPv4 Address");return new this(h)},p.IPv4.parseCIDR=function(f){let h;if(h=f.match(/^(.+)\/(\d+)$/)){let m=parseInt(h[2]);if(m>=0&&m<=32){let y=[this.parse(h[1]),m];return Object.defineProperty(y,"toString",{value:function(){return this.join("/")}}),y}}throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")},p.IPv4.parser=function(f){let h,m,y;if(h=f.match(r.fourOctet))return function(){let g=h.slice(1,6),w=[];for(let _=0;_<g.length;_++)m=g[_],w.push(u(m));return w}();if(h=f.match(r.longValue)){if(y=u(h[1]),y>4294967295||y<0)throw new Error("ipaddr: address outside defined range");return function(){let g=[],w;for(w=0;w<=24;w+=8)g.push(y>>w&255);return g}().reverse()}else return(h=f.match(r.twoOctet))?function(){let g=h.slice(1,4),w=[];if(y=u(g[1]),y>16777215||y<0)throw new Error("ipaddr: address outside defined range");return w.push(u(g[0])),w.push(y>>16&255),w.push(y>>8&255),w.push(y&255),w}():(h=f.match(r.threeOctet))?function(){let g=h.slice(1,5),w=[];if(y=u(g[2]),y>65535||y<0)throw new Error("ipaddr: address outside defined range");return w.push(u(g[0])),w.push(u(g[1])),w.push(y>>8&255),w.push(y&255),w}():null},p.IPv4.subnetMaskFromPrefixLength=function(f){if(f=parseInt(f),f<0||f>32)throw new Error("ipaddr: invalid IPv4 prefix length");let h=[0,0,0,0],m=0,y=Math.floor(f/8);for(;m<y;)h[m]=255,m++;return y<4&&(h[y]=Math.pow(2,f%8)-1<<8-f%8),new this(h)},p.IPv6=function(){function f(h,m){let y,g;if(h.length===16)for(this.parts=[],y=0;y<=14;y+=2)this.parts.push(h[y]<<8|h[y+1]);else if(h.length===8)this.parts=h;else throw new Error("ipaddr: ipv6 part count should be 8 or 16");for(y=0;y<this.parts.length;y++)if(g=this.parts[y],!(0<=g&&g<=65535))throw new Error("ipaddr: ipv6 part should fit in 16 bits");m&&(this.zoneId=m)}return f.prototype.SpecialRanges={unspecified:[new f([0,0,0,0,0,0,0,0]),128],linkLocal:[new f([65152,0,0,0,0,0,0,0]),10],multicast:[new f([65280,0,0,0,0,0,0,0]),8],loopback:[new f([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new f([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new f([0,0,0,0,0,65535,0,0]),96],discard:[new f([256,0,0,0,0,0,0,0]),64],rfc6145:[new f([0,0,0,0,65535,0,0,0]),96],rfc6052:[new f([100,65435,0,0,0,0,0,0]),96],"6to4":[new f([8194,0,0,0,0,0,0,0]),16],teredo:[new f([8193,0,0,0,0,0,0,0]),32],benchmarking:[new f([8193,2,0,0,0,0,0,0]),48],amt:[new f([8193,3,0,0,0,0,0,0]),32],as112v6:[[new f([8193,4,274,0,0,0,0,0]),48],[new f([9760,79,32768,0,0,0,0,0]),48]],deprecated:[new f([8193,16,0,0,0,0,0,0]),28],orchid2:[new f([8193,32,0,0,0,0,0,0]),28],droneRemoteIdProtocolEntityTags:[new f([8193,48,0,0,0,0,0,0]),28],reserved:[[new f([8193,0,0,0,0,0,0,0]),23],[new f([8193,3512,0,0,0,0,0,0]),32]]},f.prototype.isIPv4MappedAddress=function(){return this.range()==="ipv4Mapped"},f.prototype.kind=function(){return"ipv6"},f.prototype.match=function(h,m){let y;if(m===void 0&&(y=h,h=y[0],m=y[1]),h.kind()!=="ipv6")throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return c(this.parts,h.parts,16,m)},f.prototype.prefixLengthFromSubnetMask=function(){let h=0,m=!1,y={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0},g,w;for(let _=7;_>=0;_-=1)if(g=this.parts[_],g in y){if(w=y[g],m&&w!==0)return null;w!==16&&(m=!0),h+=w}else return null;return 128-h},f.prototype.range=function(){return p.subnetMatch(this,this.SpecialRanges)},f.prototype.toByteArray=function(){let h,m=[],y=this.parts;for(let g=0;g<y.length;g++)h=y[g],m.push(h>>8),m.push(h&255);return m},f.prototype.toFixedLengthString=function(){let h=function(){let y=[];for(let g=0;g<this.parts.length;g++)y.push(d(this.parts[g].toString(16),4));return y}.call(this).join(":"),m="";return this.zoneId&&(m=`%${this.zoneId}`),h+m},f.prototype.toIPv4Address=function(){if(!this.isIPv4MappedAddress())throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");let h=this.parts.slice(-2),m=h[0],y=h[1];return new p.IPv4([m>>8,m&255,y>>8,y&255])},f.prototype.toNormalizedString=function(){let h=function(){let y=[];for(let g=0;g<this.parts.length;g++)y.push(this.parts[g].toString(16));return y}.call(this).join(":"),m="";return this.zoneId&&(m=`%${this.zoneId}`),h+m},f.prototype.toRFC5952String=function(){let h=/((^|:)(0(:|$)){2,})/g,m=this.toNormalizedString(),y=0,g=-1,w;for(;w=h.exec(m);)w[0].length>g&&(y=w.index,g=w[0].length);return g<0?m:`${m.substring(0,y)}::${m.substring(y+g)}`},f.prototype.toString=function(){return this.toRFC5952String()},f}(),p.IPv6.broadcastAddressFromCIDR=function(f){try{let h=this.parseCIDR(f),m=h[0].toByteArray(),y=this.subnetMaskFromPrefixLength(h[1]).toByteArray(),g=[],w=0;for(;w<16;)g.push(parseInt(m[w],10)|parseInt(y[w],10)^255),w++;return new this(g)}catch(h){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${h})`)}},p.IPv6.isIPv6=function(f){return this.parser(f)!==null},p.IPv6.isValid=function(f){if(typeof f=="string"&&f.indexOf(":")===-1)return!1;try{let h=this.parser(f);return new this(h.parts,h.zoneId),!0}catch{return!1}},p.IPv6.isValidCIDR=function(f){if(typeof f=="string"&&f.indexOf(":")===-1)return!1;try{return this.parseCIDR(f),!0}catch{return!1}},p.IPv6.networkAddressFromCIDR=function(f){let h,m,y,g,w;try{for(h=this.parseCIDR(f),y=h[0].toByteArray(),w=this.subnetMaskFromPrefixLength(h[1]).toByteArray(),g=[],m=0;m<16;)g.push(parseInt(y[m],10)&parseInt(w[m],10)),m++;return new this(g)}catch(_){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${_})`)}},p.IPv6.parse=function(f){let h=this.parser(f);if(h.parts===null)throw new Error("ipaddr: string is not formatted like an IPv6 Address");return new this(h.parts,h.zoneId)},p.IPv6.parseCIDR=function(f){let h,m,y;if((m=f.match(/^(.+)\/(\d+)$/))&&(h=parseInt(m[2]),h>=0&&h<=128))return y=[this.parse(m[1]),h],Object.defineProperty(y,"toString",{value:function(){return this.join("/")}}),y;throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")},p.IPv6.parser=function(f){let h,m,y,g,w,_;if(y=f.match(a.deprecatedTransitional))return this.parser(`::ffff:${y[1]}`);if(a.native.test(f))return l(f,8);if((y=f.match(a.transitional))&&(_=y[6]||"",h=y[1],y[1].endsWith("::")||(h=h.slice(0,-1)),h=l(h+_,6),h.parts)){for(w=[parseInt(y[2]),parseInt(y[3]),parseInt(y[4]),parseInt(y[5])],m=0;m<w.length;m++)if(g=w[m],!(0<=g&&g<=255))return null;return h.parts.push(w[0]<<8|w[1]),h.parts.push(w[2]<<8|w[3]),{parts:h.parts,zoneId:h.zoneId}}return null},p.IPv6.subnetMaskFromPrefixLength=function(f){if(f=parseInt(f),f<0||f>128)throw new Error("ipaddr: invalid IPv6 prefix length");let h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],m=0,y=Math.floor(f/8);for(;m<y;)h[m]=255,m++;return y<16&&(h[y]=Math.pow(2,f%8)-1<<8-f%8),new this(h)},p.fromByteArray=function(f){let h=f.length;if(h===4)return new p.IPv4(f);if(h===16)return new p.IPv6(f);throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},p.isValid=function(f){return p.IPv6.isValid(f)||p.IPv4.isValid(f)},p.isValidCIDR=function(f){return p.IPv6.isValidCIDR(f)||p.IPv4.isValidCIDR(f)},p.parse=function(f){if(p.IPv6.isValid(f))return p.IPv6.parse(f);if(p.IPv4.isValid(f))return p.IPv4.parse(f);throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")},p.parseCIDR=function(f){try{return p.IPv6.parseCIDR(f)}catch{try{return p.IPv4.parseCIDR(f)}catch{throw new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},p.process=function(f){let h=this.parse(f);return h.kind()==="ipv6"&&h.isIPv4MappedAddress()?h.toIPv4Address():h},p.subnetMatch=function(f,h,m){let y,g,w,_;m==null&&(m="unicast");for(g in h)if(Object.prototype.hasOwnProperty.call(h,g)){for(w=h[g],w[0]&&!(w[0]instanceof Array)&&(w=[w]),y=0;y<w.length;y++)if(_=w[y],f.kind()===_[0].kind()&&f.match.apply(f,_))return g}return m},typeof Ip<"u"&&Ip.exports?Ip.exports=p:t.ipaddr=p})(WI)});var ZI=E((sCe,dl)=>{"use strict";dl.exports=sw;dl.exports.default=sw;dl.exports.proxyaddr=sw;dl.exports.all=XI;dl.exports.compile=QI;var bQ=GI(),YI=KI(),EQ=/^\d+$/u,Ap=YI.isValid,kp=YI.parse,JI={linklocal:["169.254.0.0/16","fe80::/10"],loopback:["127.0.0.1/8","::1/128"],uniquelocal:["10.0.0.0/8","172.16.0.0/12","192.168.0.0/16","fc00::/7"]};function XI(t,e){let r=bQ(t);if(!e)return r;typeof e!="function"&&(e=QI(e));for(let n=0;n<r.length-1;n++)e(r[n],n)||(r.length=n+1);return r}function QI(t){if(!t)throw new TypeError("argument is required");let e;if(typeof t=="string")e=[t];else if(Array.isArray(t))e=t.slice();else throw new TypeError("unsupported trust argument");for(let r=0;r<e.length;r++)t=e[r],Object.hasOwn(JI,t)&&(t=JI[t],e.splice.apply(e,[r,1].concat(t)),r+=t.length-1);return TQ(SQ(e))}function SQ(t){let e=new Array(t.length);for(let r=0;r<t.length;r++)e[r]=RQ(t[r]);return e}function TQ(t){let e=t.length;return e===0?OQ:e===1?xQ(t[0]):PQ(t)}function RQ(t){let e=t.lastIndexOf("/"),r=e!==-1?t.substring(0,e):t;if(!Ap(r))throw new TypeError("invalid IP address: "+r);let n=kp(r);e===-1&&n.kind()==="ipv6"&&n.isIPv4MappedAddress()&&(n=n.toIPv4Address());let s=n.kind()==="ipv6"?128:32,i=e!==-1?t.substring(e+1,t.length):null;if(i===null?i=s:EQ.test(i)?i=parseInt(i,10):n.kind()==="ipv4"&&Ap(i)?i=$Q(i):i=null,i<=0||i>s)throw new TypeError("invalid range on address: "+t);return[n,i]}function $Q(t){let e=kp(t);return e.kind()==="ipv4"?e.prefixLengthFromSubnetMask():null}function sw(t,e){if(!t)throw new TypeError("req argument is required");if(!e)throw new TypeError("trust argument is required");let r=XI(t,e);return r[r.length-1]}function OQ(){return!1}function PQ(t){return function(r){if(!Ap(r))return!1;let n=kp(r),s,i=n.kind();for(let o=0;o<t.length;o++){let a=t[o],l=a[0],c=l.kind(),u=a[1],d=n;if(i!==c){let p=c==="ipv4";if(p&&!n.isIPv4MappedAddress())continue;s||(s=p?n.toIPv4Address():n.toIPv4MappedAddress()),d=s}if(d.match(l,u))return!0}return!1}}function xQ(t){let e=t[0],r=e.kind(),n=r==="ipv4",s=t[1];return function(o){if(!Ap(o))return!1;let a=kp(o);if(a.kind()!==r){if(n&&!a.isIPv4MappedAddress())return!1;a=n?a.toIPv4Address():a.toIPv4MappedAddress()}return a.match(e,s)}}});var Mp=E((iCe,lw)=>{"use strict";var Dp=ZI(),{kHasBeenDecorated:NQ,kSchemaBody:CQ,kSchemaHeaders:IQ,kSchemaParams:AQ,kSchemaQuerystring:eA,kSchemaController:iw,kOptions:kQ,kRequestCacheValidateFns:Di,kRouteContext:tr,kRequestOriginalUrl:ow}=Nt(),{FST_ERR_REQ_INVALID_VALIDATION_INVOCATION:DQ,FST_ERR_DEC_UNDECLARED:MQ}=Vt(),tA=Eu(),rA={body:CQ,headers:IQ,params:AQ,querystring:eA,query:eA};function aw(t,e,r,n,s,i){this.id=t,this[tr]=i,this.params=e,this.raw=r,this.query=n,this.log=s,this.body=void 0}aw.props=[];function jQ(t){if(typeof t=="function")return t;if(t===!0)return null;if(typeof t=="number")return function(e,r){return r<t};if(typeof t=="string"){let e=t.split(",").map(r=>r.trim());return Dp.compile(e)}return Dp.compile(t)}function qQ(t,e){return e?LQ(t,e):iA(t)}function iA(t){let e=t.props.slice();function r(n,s,i,o,a,l){this.id=n,this[tr]=l,this.params=s,this.raw=i,this.query=o,this.log=a,this.body=void 0;let c;for(let u=0;u<e.length;u++)c=e[u],this[c.key]=c.value}return Object.setPrototypeOf(r.prototype,t.prototype),Object.setPrototypeOf(r,t),r.props=e,r.parent=t,r}function nA(t){let e=t.lastIndexOf(",");return e===-1?t.trim():t.slice(e+1).trim()}function LQ(t,e){let r=iA(t),n=jQ(e);return r[NQ]=!0,Object.defineProperties(r.prototype,{ip:{get(){let s=Dp.all(this.raw,n);return s[s.length-1]}},ips:{get(){return Dp.all(this.raw,n)}},host:{get(){return this.ip!==void 0&&this.headers["x-forwarded-host"]?nA(this.headers["x-forwarded-host"]):this.headers.host??this.headers[":authority"]??""}},protocol:{get(){if(this.headers["x-forwarded-proto"])return nA(this.headers["x-forwarded-proto"]);if(this.socket)return this.socket.encrypted?"https":"http"}}}),r}function sA(t,e){if(!tA.hasKey(t,e)&&!tA.exist(t,e))throw new MQ(e,"request")}Object.defineProperties(aw.prototype,{server:{get(){return this[tr].server}},url:{get(){return this.raw.url}},originalUrl:{get(){return this[ow]||(this[ow]=this.raw.originalUrl||this.raw.url),this[ow]}},method:{get(){return this.raw.method}},routeOptions:{get(){let t=this[tr],e=t._parserOptions.limit,r=t.server.initialConfig.bodyLimit,n=t.server.hasConstraintStrategy("version")?this.raw.headers["accept-version"]:void 0;return{method:t.config?.method,url:t.config?.url,bodyLimit:e||r,attachValidation:t.attachValidation,logLevel:t.logLevel,exposeHeadRoute:t.exposeHeadRoute,prefixTrailingSlash:t.prefixTrailingSlash,handler:t.handler,config:t.config,schema:t.schema,version:n}}},is404:{get(){return this[tr].config?.url===void 0}},socket:{get(){return this.raw.socket}},ip:{get(){if(this.socket)return this.socket.remoteAddress}},host:{get(){return this.raw.headers.host??this.raw.headers[":authority"]??""}},hostname:{get(){return this.host[0]==="["?this.host.slice(0,this.host.indexOf("]")+1):this.host.split(":",1)[0]}},port:{get(){let t=parseInt(this.host.split(":").slice(-1)[0]);if(!isNaN(t))return t;let e=this.headers.host??this.headers[":authority"]??"",r=parseInt(e.split(":").slice(-1)[0]);return isNaN(r)?null:r}},protocol:{get(){if(this.socket)return this.socket.encrypted?"https":"http"}},headers:{get(){return this.additionalHeaders?Object.assign({},this.raw.headers,this.additionalHeaders):this.raw.headers},set(t){this.additionalHeaders=t}},getValidationFunction:{value:function(t){if(typeof t=="string"){let e=rA[t];return this[tr][e]}else if(typeof t=="object")return this[tr][Di]?.get(t)}},compileValidationSchema:{value:function(t,e=null){let{method:r,url:n}=this;if(this[tr][Di]?.has(t))return this[tr][Di].get(t);let i=(this[tr].validatorCompiler||this.server[iw].validatorCompiler||this.server[iw].setupValidator(this.server[kQ])||this.server[iw].validatorCompiler)({schema:t,method:r,url:n,httpPart:e});return this[tr][Di]==null&&(this[tr][Di]=new WeakMap),this[tr][Di].set(t,i),i}},validateInput:{value:function(t,e,r){r=typeof e=="string"?e:r;let n=r!=null&&typeof r=="string"&&rA[r],s;if(n&&(s=this[tr][n]),s==null&&(e==null||typeof e!="object"||Array.isArray(e)))throw new DQ(r);return s==null&&(this[tr][Di]?.has(e)?s=this[tr][Di].get(e):s=this.compileValidationSchema(e,r)),s(t)}},getDecorator:{value:function(t){sA(this,t);let e=this[t];return typeof e=="function"?e.bind(this):e}},setDecorator:{value:function(t,e){sA(this,t),this[t]=e}}});lw.exports=aw;lw.exports.buildRequest=qQ});var jp=E((oCe,oA)=>{"use strict";var{kFourOhFourContext:FQ,kReplySerializerDefault:UQ,kSchemaErrorFormatter:BQ,kErrorHandler:zQ,kChildLoggerFactory:VQ,kOptions:HQ,kReply:GQ,kRequest:WQ,kBodyLimit:KQ,kLogLevel:JQ,kContentTypeParser:YQ,kRouteByFastify:XQ,kRequestCacheValidateFns:QQ,kReplyCacheSerializeFns:ZQ}=Nt();function eZ({schema:t,handler:e,config:r,requestIdLogLabel:n,childLoggerFactory:s,errorHandler:i,bodyLimit:o,logLevel:a,logSerializers:l,attachValidation:c,validatorCompiler:u,serializerCompiler:d,replySerializer:p,schemaErrorFormatter:f,exposeHeadRoute:h,prefixTrailingSlash:m,server:y,isFastify:g}){this.schema=t,this.handler=e,this.Reply=y[GQ],this.Request=y[WQ],this.contentTypeParser=y[YQ],this.onRequest=null,this.onSend=null,this.onError=null,this.onTimeout=null,this.preHandler=null,this.onResponse=null,this.preSerialization=null,this.onRequestAbort=null,this.config=r,this.errorHandler=i||y[zQ],this.requestIdLogLabel=n||y[HQ].requestIdLogLabel,this.childLoggerFactory=s||y[VQ],this._middie=null,this._parserOptions={limit:o||y[KQ]},this.exposeHeadRoute=h,this.prefixTrailingSlash=m,this.logLevel=a||y[JQ],this.logSerializers=l,this[FQ]=null,this.attachValidation=c,this[UQ]=p,this.schemaErrorFormatter=f||y[BQ]||tZ,this[XQ]=g,this[QQ]=null,this[ZQ]=null,this.validatorCompiler=u||null,this.serializerCompiler=d||null,this.server=y}function tZ(t,e){let r="",n=", ";for(let s=0;s!==t.length;++s){let i=t[s];r+=e+(i.instancePath||"")+" "+i.message+n}return new Error(r.slice(0,-n.length))}oA.exports=eZ});var lA=E(ys=>{"use strict";var cw=class{constructor(e=1e3,r=0){if(isNaN(e)||e<0)throw new Error("Invalid max value");if(isNaN(r)||r<0)throw new Error("Invalid ttl value");this.first=null,this.items=new Map,this.last=null,this.max=e,this.ttl=r}get size(){return this.items.size}clear(){this.items=new Map,this.first=null,this.last=null}delete(e){if(this.items.has(e)){let r=this.items.get(e);this.items.delete(e),r.prev!==null&&(r.prev.next=r.next),r.next!==null&&(r.next.prev=r.prev),this.first===r&&(this.first=r.next),this.last===r&&(this.last=r.prev)}}deleteMany(e){for(var r=0;r<e.length;r++)this.delete(e[r])}evict(){if(this.size>0){let e=this.first;this.items.delete(e.key),this.size===0?(this.first=null,this.last=null):(this.first=e.next,this.first.prev=null)}}expiresAt(e){if(this.items.has(e))return this.items.get(e).expiry}get(e){if(this.items.has(e)){let r=this.items.get(e);if(this.ttl>0&&r.expiry<=Date.now()){this.delete(e);return}return r.value}}getMany(e){let r=[];for(var n=0;n<e.length;n++)r.push(this.get(e[n]));return r}keys(){return this.items.keys()}set(e,r){if(this.items.has(e)){let s=this.items.get(e);s.value=r,s.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl;return}this.max>0&&this.size===this.max&&this.evict();let n={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:r};this.items.set(e,n),this.size===1?this.first=n:this.last.next=n,this.last=n}},uw=class{constructor(e=1e3,r=0){if(isNaN(e)||e<0)throw new Error("Invalid max value");if(isNaN(r)||r<0)throw new Error("Invalid ttl value");this.first=null,this.items=new Map,this.last=null,this.max=e,this.ttl=r}get size(){return this.items.size}bumpLru(e){if(this.last===e)return;let r=this.last,n=e.next,s=e.prev;this.first===e&&(this.first=n),e.next=null,e.prev=r,r.next=e,s!==null&&(s.next=n),n!==null&&(n.prev=s),this.last=e}clear(){this.items=new Map,this.first=null,this.last=null}delete(e){if(this.items.has(e)){let r=this.items.get(e);this.items.delete(e),r.prev!==null&&(r.prev.next=r.next),r.next!==null&&(r.next.prev=r.prev),this.first===r&&(this.first=r.next),this.last===r&&(this.last=r.prev)}}deleteMany(e){for(var r=0;r<e.length;r++)this.delete(e[r])}evict(){if(this.size>0){let e=this.first;this.items.delete(e.key),this.size===0?(this.first=null,this.last=null):(this.first=e.next,this.first.prev=null)}}expiresAt(e){if(this.items.has(e))return this.items.get(e).expiry}get(e){if(this.items.has(e)){let r=this.items.get(e);if(this.ttl>0&&r.expiry<=Date.now()){this.delete(e);return}return this.bumpLru(r),r.value}}getMany(e){let r=[];for(var n=0;n<e.length;n++)r.push(this.get(e[n]));return r}keys(){return this.items.keys()}set(e,r){if(this.items.has(e)){let s=this.items.get(e);s.value=r,s.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl,this.last!==s&&this.bumpLru(s);return}this.max>0&&this.size===this.max&&this.evict();let n={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:r};this.items.set(e,n),this.size===1?this.first=n:this.last.next=n,this.last=n}},Ru=class{constructor(e=1e3,r=0){if(isNaN(e)||e<0)throw new Error("Invalid max value");if(isNaN(r)||r<0)throw new Error("Invalid ttl value");this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this.max=e,this.ttl=r}bumpLru(e){if(this.last===e)return;let r=this.last,n=e.next,s=e.prev;this.first===e&&(this.first=n),e.next=null,e.prev=r,r.next=e,s!==null&&(s.next=n),n!==null&&(n.prev=s),this.last=e}clear(){this.items=Object.create(null),this.first=null,this.last=null,this.size=0}delete(e){if(Object.prototype.hasOwnProperty.call(this.items,e)){let r=this.items[e];delete this.items[e],this.size--,r.prev!==null&&(r.prev.next=r.next),r.next!==null&&(r.next.prev=r.prev),this.first===r&&(this.first=r.next),this.last===r&&(this.last=r.prev)}}deleteMany(e){for(var r=0;r<e.length;r++)this.delete(e[r])}evict(){if(this.size>0){let e=this.first;delete this.items[e.key],--this.size===0?(this.first=null,this.last=null):(this.first=e.next,this.first.prev=null)}}expiresAt(e){if(Object.prototype.hasOwnProperty.call(this.items,e))return this.items[e].expiry}get(e){if(Object.prototype.hasOwnProperty.call(this.items,e)){let r=this.items[e];if(this.ttl>0&&r.expiry<=Date.now()){this.delete(e);return}return this.bumpLru(r),r.value}}getMany(e){let r=[];for(var n=0;n<e.length;n++)r.push(this.get(e[n]));return r}keys(){return Object.keys(this.items)}set(e,r){if(Object.prototype.hasOwnProperty.call(this.items,e)){let s=this.items[e];s.value=r,s.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl,this.last!==s&&this.bumpLru(s);return}this.max>0&&this.size===this.max&&this.evict();let n={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:r};this.items[e]=n,++this.size===1?this.first=n:this.last.next=n,this.last=n}},qp=class{constructor(){this.records={}}initForCache(e,r){this.records[e]={[r]:{cacheSize:0,hits:0,falsyHits:0,emptyHits:0,misses:0,expirations:0,evictions:0,invalidateOne:0,invalidateAll:0,sets:0}}}resetForCache(e){for(let r of Object.keys(this.records[e]))this.records[e][r]={cacheSize:0,hits:0,falsyHits:0,emptyHits:0,misses:0,expirations:0,evictions:0,invalidateOne:0,invalidateAll:0,sets:0}}getStatistics(){return this.records}};function aA(t){return`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")}`}var fw=class{constructor(e,r,n){this.cacheId=e,this.statisticTtlInHours=r,this.collectionStart=new Date,this.currentTimeStamp=aA(this.collectionStart),this.records=n||new qp,this.records.initForCache(this.cacheId,this.currentTimeStamp)}get currentRecord(){return this.records.records[this.cacheId][this.currentTimeStamp]||(this.records.records[this.cacheId][this.currentTimeStamp]={cacheSize:0,hits:0,falsyHits:0,emptyHits:0,misses:0,expirations:0,evictions:0,sets:0,invalidateOne:0,invalidateAll:0}),this.records.records[this.cacheId][this.currentTimeStamp]}hoursPassed(){return(Date.now()-this.collectionStart)/1e3/60/60}addHit(){this.archiveIfNeeded(),this.currentRecord.hits++}addFalsyHit(){this.archiveIfNeeded(),this.currentRecord.falsyHits++}addEmptyHit(){this.archiveIfNeeded(),this.currentRecord.emptyHits++}addMiss(){this.archiveIfNeeded(),this.currentRecord.misses++}addEviction(){this.archiveIfNeeded(),this.currentRecord.evictions++}setCacheSize(e){this.archiveIfNeeded(),this.currentRecord.cacheSize=e}addExpiration(){this.archiveIfNeeded(),this.currentRecord.expirations++}addSet(){this.archiveIfNeeded(),this.currentRecord.sets++}addInvalidateOne(){this.archiveIfNeeded(),this.currentRecord.invalidateOne++}addInvalidateAll(){this.archiveIfNeeded(),this.currentRecord.invalidateAll++}getStatistics(){return this.records.getStatistics()}archiveIfNeeded(){this.hoursPassed()>=this.statisticTtlInHours&&(this.collectionStart=new Date,this.currentTimeStamp=aA(this.collectionStart),this.records.initForCache(this.cacheId,this.currentTimeStamp))}},Lp=class extends Ru{constructor(e,r,n,s,i){if(super(e||1e3,r||0),!n)throw new Error("Cache id is mandatory");this.hitStatistics=new fw(n,i!==void 0?i:24,s)}getStatistics(){return this.hitStatistics.getStatistics()}set(e,r){super.set(e,r),this.hitStatistics.addSet(),this.hitStatistics.setCacheSize(this.size)}evict(){super.evict(),this.hitStatistics.addEviction(),this.hitStatistics.setCacheSize(this.size)}delete(e,r=!1){super.delete(e),r||this.hitStatistics.addInvalidateOne(),this.hitStatistics.setCacheSize(this.size)}clear(){super.clear(),this.hitStatistics.addInvalidateAll(),this.hitStatistics.setCacheSize(this.size)}get(e){if(Object.prototype.hasOwnProperty.call(this.items,e)){let r=this.items[e];if(this.ttl>0&&r.expiry<=Date.now()){this.delete(e,!0),this.hitStatistics.addExpiration();return}return this.bumpLru(r),r.value||this.hitStatistics.addFalsyHit(),(r.value===void 0||r.value===null||r.value==="")&&this.hitStatistics.addEmptyHit(),this.hitStatistics.addHit(),r.value}this.hitStatistics.addMiss()}},Fp=class{constructor(e=1e3,r=0){if(isNaN(e)||e<0)throw new Error("Invalid max value");if(isNaN(r)||r<0)throw new Error("Invalid ttl value");this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this.max=e,this.ttl=r}clear(){this.items=Object.create(null),this.first=null,this.last=null,this.size=0}delete(e){if(Object.prototype.hasOwnProperty.call(this.items,e)){let r=this.items[e];delete this.items[e],this.size--,r.prev!==null&&(r.prev.next=r.next),r.next!==null&&(r.next.prev=r.prev),this.first===r&&(this.first=r.next),this.last===r&&(this.last=r.prev)}}deleteMany(e){for(var r=0;r<e.length;r++)this.delete(e[r])}evict(){if(this.size>0){let e=this.first;delete this.items[e.key],--this.size===0?(this.first=null,this.last=null):(this.first=e.next,this.first.prev=null)}}expiresAt(e){if(Object.prototype.hasOwnProperty.call(this.items,e))return this.items[e].expiry}get(e){if(Object.prototype.hasOwnProperty.call(this.items,e)){let r=this.items[e];if(this.ttl>0&&r.expiry<=Date.now()){this.delete(e);return}return r.value}}getMany(e){let r=[];for(var n=0;n<e.length;n++)r.push(this.get(e[n]));return r}keys(){return Object.keys(this.items)}set(e,r){if(Object.prototype.hasOwnProperty.call(this.items,e)){let s=this.items[e];s.value=r,s.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl;return}this.max>0&&this.size===this.max&&this.evict();let n={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:r};this.items[e]=n,++this.size===1?this.first=n:this.last.next=n,this.last=n}};ys.Fifo=Fp;ys.FifoMap=cw;ys.FifoObject=Fp;ys.HitStatisticsRecord=qp;ys.Lru=Ru;ys.LruHitStatistics=Lp;ys.LruMap=uw;ys.LruObject=Ru;ys.LruObjectHitStatistics=Lp});var hA=E((lCe,hl)=>{"use strict";var rZ=typeof Buffer<"u",cA=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,uA=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function fA(t,e,r){r==null&&e!==null&&typeof e=="object"&&(r=e,e=void 0),rZ&&Buffer.isBuffer(t)&&(t=t.toString()),t&&t.charCodeAt(0)===65279&&(t=t.slice(1));let n=JSON.parse(t,e);if(n===null||typeof n!="object")return n;let s=r&&r.protoAction||"error",i=r&&r.constructorAction||"error";if(s==="ignore"&&i==="ignore")return n;if(s!=="ignore"&&i!=="ignore"){if(cA.test(t)===!1&&uA.test(t)===!1)return n}else if(s!=="ignore"&&i==="ignore"){if(cA.test(t)===!1)return n}else if(uA.test(t)===!1)return n;return dA(n,{protoAction:s,constructorAction:i,safe:r&&r.safe})}function dA(t,{protoAction:e="error",constructorAction:r="error",safe:n}={}){let s=[t];for(;s.length;){let i=s;s=[];for(let o of i){if(e!=="ignore"&&Object.prototype.hasOwnProperty.call(o,"__proto__")){if(n===!0)return null;if(e==="error")throw new SyntaxError("Object contains forbidden prototype property");delete o.__proto__}if(r!=="ignore"&&Object.prototype.hasOwnProperty.call(o,"constructor")&&o.constructor!==null&&typeof o.constructor=="object"&&Object.prototype.hasOwnProperty.call(o.constructor,"prototype")){if(n===!0)return null;if(r==="error")throw new SyntaxError("Object contains forbidden prototype property");delete o.constructor}for(let a in o){let l=o[a];l&&typeof l=="object"&&s.push(l)}}}return t}function dw(t,e,r){let{stackTraceLimit:n}=Error;Error.stackTraceLimit=0;try{return fA(t,e,r)}finally{Error.stackTraceLimit=n}}function nZ(t,e){let{stackTraceLimit:r}=Error;Error.stackTraceLimit=0;try{return fA(t,e,{safe:!0})}catch{return}finally{Error.stackTraceLimit=r}}hl.exports=dw;hl.exports.default=dw;hl.exports.parse=dw;hl.exports.safeParse=nZ;hl.exports.scan=dA});var _w=E((cCe,Ou)=>{"use strict";var{AsyncResource:sZ}=require("async_hooks"),{FifoMap:gA}=lA(),{parse:iZ}=hA(),{kDefaultJsonParse:$u,kContentTypeParser:pl,kBodyLimit:oZ,kRequestPayloadStream:yA,kState:pw,kTestInternals:aZ,kReplyIsError:pA,kRouteContext:lZ}=Nt(),{FST_ERR_CTP_INVALID_TYPE:mw,FST_ERR_CTP_EMPTY_TYPE:cZ,FST_ERR_CTP_ALREADY_PRESENT:uZ,FST_ERR_CTP_INVALID_HANDLER:fZ,FST_ERR_CTP_INVALID_PARSE_TYPE:dZ,FST_ERR_CTP_BODY_TOO_LARGE:mA,FST_ERR_CTP_INVALID_MEDIA_TYPE:hZ,FST_ERR_CTP_INVALID_CONTENT_LENGTH:pZ,FST_ERR_CTP_EMPTY_JSON_BODY:mZ,FST_ERR_CTP_INSTANCE_ALREADY_STARTED:gw,FST_ERR_CTP_INVALID_JSON_BODY:gZ}=Vt(),{FSTSEC001:yZ}=sl();function Js(t,e,r){this[$u]=vA(e,r),this.customParsers=new Map,this.customParsers.set("application/json",new hw(!0,!1,t,this[$u])),this.customParsers.set("text/plain",new hw(!0,!1,t,yw)),this.parserList=["application/json","text/plain"],this.parserRegExpList=[],this.cache=new gA(100)}Js.prototype.add=function(t,e,r){let n=typeof t=="string";if(n){if(t=t.trim().toLowerCase(),t.length===0)throw new cZ}else if(!(t instanceof RegExp))throw new mw;if(typeof r!="function")throw new fZ;if(this.existingParser(t))throw new uZ(t);if(e.parseAs!==void 0&&e.parseAs!=="string"&&e.parseAs!=="buffer")throw new dZ(e.parseAs);let s=new hw(e.parseAs==="string",e.parseAs==="buffer",e.bodyLimit,r);t==="*"?this.customParsers.set("",s):n?(this.parserList.unshift(t),this.customParsers.set(t,s)):(SZ(t),this.parserRegExpList.unshift(t),this.customParsers.set(t.toString(),s))};Js.prototype.hasParser=function(t){if(typeof t=="string")t=t.trim().toLowerCase();else{if(!(t instanceof RegExp))throw new mw;t=t.toString()}return this.customParsers.has(t)};Js.prototype.existingParser=function(t){return t==="application/json"&&this.customParsers.has(t)?this.customParsers.get(t).fn!==this[$u]:t==="text/plain"&&this.customParsers.has(t)?this.customParsers.get(t).fn!==yw:this.hasParser(t)};Js.prototype.getParser=function(t){let e=this.customParsers.get(t);if(e!==void 0||(e=this.cache.get(t),e!==void 0))return e;let r=t.toLowerCase();for(let n=0;n!==this.parserList.length;++n){let s=this.parserList[n];if(r.slice(0,s.length)===s&&(r.length===s.length||r.charCodeAt(s.length)===59||r.charCodeAt(s.length)===32||r.charCodeAt(s.length)===9))return e=this.customParsers.get(s),this.cache.set(t,e),e}for(let n=0;n!==this.parserRegExpList.length;++n){let s=this.parserRegExpList[n];if(s.test(t))return e=this.customParsers.get(s.toString()),this.cache.set(t,e),e}return this.customParsers.get("")};Js.prototype.removeAll=function(){this.customParsers=new Map,this.parserRegExpList=[],this.parserList=[],this.cache=new gA(100)};Js.prototype.remove=function(t){let e;if(typeof t=="string")t=t.trim().toLowerCase(),e=this.parserList;else{if(!(t instanceof RegExp))throw new mw;t=t.toString(),e=this.parserRegExpList}let r=this.customParsers.delete(t),n=e.findIndex(s=>s.toString()===t);return n>-1&&e.splice(n,1),r||n>-1};Js.prototype.run=function(t,e,r,n){let s=this.getParser(t);if(s===void 0){if(r.is404===!0){e(r,n);return}n[pA]=!0,n.send(new hZ(t||void 0));return}let i=new sZ("content-type-parser:run",r),o=i.bind(l);if(s.asString===!0||s.asBuffer===!0){_A(r,n,n[lZ]._parserOptions,s,o);return}let a=s.fn(r,r[yA],o);a&&typeof a.then=="function"&&a.then(c=>{o(null,c)},o);function l(c,u){if(i.emitDestroy(),c!=null){n.header("connection","close"),n[pA]=!0,n.send(c);return}r.body=u,e(r,n)}};function _A(t,e,r,n,s){let i=n.asString===!0,o=r.limit===null?n.bodyLimit:r.limit,a=Number(t.headers["content-length"]);if(a>o){s(new mA,void 0);return}let l=0,c=i?"":[],u=t[yA]||t.raw;i&&u.setEncoding("utf8"),u.on("data",d),u.on("end",p),u.on("error",p),u.resume();function d(f){l+=i?Buffer.byteLength(f):f.length;let{receivedEncodedLength:h=0}=u;if(l>o||h>o){u.removeListener("data",d),u.removeListener("end",p),u.removeListener("error",p),s(new mA,void 0);return}i?c+=f:c.push(f)}function p(f){if(u.removeListener("data",d),u.removeListener("end",p),u.removeListener("error",p),f!=null){typeof f.statusCode=="number"&&f.statusCode>=400||(f.statusCode=400),s(f,void 0);return}if(!Number.isNaN(a)&&(u.receivedEncodedLength||l)!==a){s(new pZ,void 0);return}i||(c=Buffer.concat(c));let h=n.fn(t,c,s);h&&typeof h.then=="function"&&h.then(m=>{s(null,m)},s)}}function vA(t,e){let r={protoAction:t,constructorAction:e};return n;function n(s,i,o){if(i.length===0){o(new mZ,void 0);return}try{o(null,iZ(i,r))}catch{o(new gZ,void 0)}}}function yw(t,e,r){r(null,e)}function hw(t,e,r,n){this.asString=t,this.asBuffer=e,this.bodyLimit=r,this.fn=n}function _Z(t){let e=new Js;return e[$u]=t[$u],e.customParsers=new Map(t.customParsers.entries()),e.parserList=t.parserList.slice(),e.parserRegExpList=t.parserRegExpList.slice(),e}function vZ(t,e,r){if(this[pw].started)throw new gw("addContentTypeParser");return typeof e=="function"&&(r=e,e={}),e||(e={}),e.bodyLimit||(e.bodyLimit=this[oZ]),Array.isArray(t)?t.forEach(n=>this[pl].add(n,e,r)):this[pl].add(t,e,r),this}function wZ(t){return this[pl].hasParser(t)}function bZ(t){if(this[pw].started)throw new gw("removeContentTypeParser");if(Array.isArray(t))for(let e of t)this[pl].remove(e);else this[pl].remove(t)}function EZ(){if(this[pw].started)throw new gw("removeAllContentTypeParsers");this[pl].removeAll()}function SZ(t){t.source[0]!=="^"&&t.source.includes(";?")===!1&&yZ(t.source)}Ou.exports=Js;Ou.exports.helpers={buildContentTypeParser:_Z,addContentTypeParser:vZ,hasContentTypeParser:wZ,removeContentTypeParser:bZ,removeAllContentTypeParsers:EZ};Ou.exports.defaultParsers={getDefaultJsonParser:vA,defaultTextParser:yw};Ou.exports[aZ]={rawBody:_A}});var Up=E(EA=>{var wA=Object.prototype.hasOwnProperty;function bA(t,e,r){for(r of t.keys())if(Pu(r,e))return r}function Pu(t,e){var r,n,s;if(t===e)return!0;if(t&&e&&(r=t.constructor)===e.constructor){if(r===Date)return t.getTime()===e.getTime();if(r===RegExp)return t.toString()===e.toString();if(r===Array){if((n=t.length)===e.length)for(;n--&&Pu(t[n],e[n]););return n===-1}if(r===Set){if(t.size!==e.size)return!1;for(n of t)if(s=n,s&&typeof s=="object"&&(s=bA(e,s),!s)||!e.has(s))return!1;return!0}if(r===Map){if(t.size!==e.size)return!1;for(n of t)if(s=n[0],s&&typeof s=="object"&&(s=bA(e,s),!s)||!Pu(n[1],e.get(s)))return!1;return!0}if(r===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(r===DataView){if((n=t.byteLength)===e.byteLength)for(;n--&&t.getInt8(n)===e.getInt8(n););return n===-1}if(ArrayBuffer.isView(t)){if((n=t.byteLength)===e.byteLength)for(;n--&&t[n]===e[n];);return n===-1}if(!r||typeof t=="object"){n=0;for(r in t)if(wA.call(t,r)&&++n&&!wA.call(e,r)||!(r in e)||!Pu(t[r],e[r]))return!1;return Object.keys(e).length===n}}return t!==t&&e!==e}EA.dequal=Pu});var $A=E((fCe,RA)=>{"use strict";var{dequal:SA}=Up(),TZ=Symbol.for("json-schema-ref"),vw=class{#e;#r;#s;#c;#a;constructor(e={}){this.#e={},this.#r={},this.#s=e.insertRefSymbol??!1,this.#c=e.allowEqualDuplicates??!0,this.#a=e.cloneSchemaWithoutRefs??!1}addSchema(e,r,n=!0){n&&(e.$id!==void 0&&e.$id.charAt(0)!=="#"?r=e.$id:this.#i(e,r));let s=e.$id;s!==void 0&&typeof s=="string"&&(s.charAt(0)==="#"?this.#m(e,r,s):(this.#i(e,s),r=s));let i=e.$ref;if(i!==void 0&&typeof i=="string"){let{refSchemaId:o,refJsonPointer:a}=this.#R(i,r);this.#e[r].refs.push({schemaId:o,jsonPointer:a})}for(let o in e)typeof e[o]=="object"&&e[o]!==null&&this.addSchema(e[o],r,!1)}getSchema(e,r="#"){let n=this.#e[e];if(n===void 0)throw new Error(`Cannot resolve ref "${e}${r}". Schema with id "${e}" is not found.`);return n.anchors[r]!==void 0?n.anchors[r]:TA(n.schema,r)}hasSchema(e){return this.#e[e]!==void 0}getSchemaRefs(e){let r=this.#e[e];if(r===void 0)throw new Error(`Schema with id "${e}" is not found.`);return r.refs}getSchemaDependencies(e,r={}){let n=this.#e[e];for(let s of n.refs){let i=s.schemaId;i===e||r[i]!==void 0||(r[i]=this.getSchema(i),this.getSchemaDependencies(i,r))}return r}derefSchema(e){if(this.#r[e]!==void 0)return;let r=this.#e[e];if(r===void 0)throw new Error(`Schema with id "${e}" is not found.`);!this.#a&&r.refs.length===0&&(this.#r[e]={schema:r.schema,anchors:r.anchors});let n=[];this.#y(r.schema,e,!0,n);let s=this.getSchemaDependencies(e);for(let i in s){let o=s[i];this.#y(o,i,!0,n)}for(let i of n){let{refSchemaId:o,refJsonPointer:a}=this.#R(i.ref,i.sourceSchemaId),l=this.getDerefSchema(o,a);if(l===null)throw new Error(`Cannot resolve ref "${i.ref}". Ref "${a}" is not found in schema "${o}".`);i.targetSchema=l,i.targetSchemaId=o}for(let i of n)this.#f(i,n)}getDerefSchema(e,r="#"){let n=this.#r[e];return n===void 0&&(this.derefSchema(e),n=this.#r[e]),n.anchors[r]!==void 0?n.anchors[r]:TA(n.schema,r)}#R(e,r){let n=e.indexOf("#");return n===-1?{refSchemaId:e,refJsonPointer:"#"}:n===0?{refSchemaId:r,refJsonPointer:e}:{refSchemaId:e.slice(0,n),refJsonPointer:e.slice(n)}}#y(e,r,n,s=[]){let i=Array.isArray(e)?[...e]:{...e};n&&(e.$id!==void 0&&e.$id.charAt(0)!=="#"?r=e.$id:this.#u(i,r));let o=i.$id;o!==void 0&&typeof o=="string"&&(o.charAt(0)==="#"?this.#o(i,r,o):(this.#u(i,o),r=o)),i.$ref!==void 0&&s.push({ref:i.$ref,sourceSchemaId:r,sourceSchema:i});for(let a in i){let l=i[a];typeof l=="object"&&l!==null&&(i[a]=this.#y(l,r,!1,s))}return i}#f(e,r){let{sourceSchema:n,targetSchema:s}=e;if(n.$ref){if(this.#s&&(n[TZ]=n.$ref),delete n.$ref,s.$ref){let i=r.find(o=>o.sourceSchema===s);this.#f(i,r)}for(let i in s)if(i!=="$id"){if(n[i]!==void 0){if(SA(n[i],s[i]))continue;throw new Error(`Cannot resolve ref "${e.ref}". Property "${i}" already exists in schema "${e.sourceSchemaId}".`)}n[i]=s[i]}e.isResolved=!0}}#i(e,r){let n=this.#e[r];if(n!==void 0){if(this.#c&&SA(e,n.schema))return;throw new Error(`There is already another schema with id "${r}".`)}this.#e[r]={schema:e,anchors:{},refs:[]}}#m(e,r,n){let{anchors:s}=this.#e[r];if(s[n]!==void 0)throw new Error(`There is already another anchor "${n}" in schema "${r}".`);s[n]=e}#u(e,r){this.#r[r]===void 0&&(this.#r[r]={schema:e,anchors:{}})}#o(e,r,n){let{anchors:s}=this.#r[r];s[n]=e}};function TA(t,e){let r=e.split("/"),n=t;for(let s of r)if(!(s===""||s==="#")){if(typeof n!="object"||n===null)return null;n=n[s]}return n??null}RA.exports={RefResolver:vw}});var Cu=E(Me=>{"use strict";Object.defineProperty(Me,"__esModule",{value:!0});Me.regexpCode=Me.getEsmExportName=Me.getProperty=Me.safeStringify=Me.stringify=Me.strConcat=Me.addCodeArg=Me.str=Me._=Me.nil=Me._Code=Me.Name=Me.IDENTIFIER=Me._CodeOrName=void 0;var xu=class{};Me._CodeOrName=xu;Me.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var Bo=class extends xu{constructor(e){if(super(),!Me.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};Me.Name=Bo;var fn=class extends xu{constructor(e){super(),this._items=typeof e=="string"?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return e===""||e==='""'}get str(){var e;return(e=this._str)!==null&&e!==void 0?e:this._str=this._items.reduce((r,n)=>`${r}${n}`,"")}get names(){var e;return(e=this._names)!==null&&e!==void 0?e:this._names=this._items.reduce((r,n)=>(n instanceof Bo&&(r[n.str]=(r[n.str]||0)+1),r),{})}};Me._Code=fn;Me.nil=new fn("");function OA(t,...e){let r=[t[0]],n=0;for(;n<e.length;)bw(r,e[n]),r.push(t[++n]);return new fn(r)}Me._=OA;var ww=new fn("+");function PA(t,...e){let r=[Nu(t[0])],n=0;for(;n<e.length;)r.push(ww),bw(r,e[n]),r.push(ww,Nu(t[++n]));return RZ(r),new fn(r)}Me.str=PA;function bw(t,e){e instanceof fn?t.push(...e._items):e instanceof Bo?t.push(e):t.push(PZ(e))}Me.addCodeArg=bw;function RZ(t){let e=1;for(;e<t.length-1;){if(t[e]===ww){let r=$Z(t[e-1],t[e+1]);if(r!==void 0){t.splice(e-1,3,r);continue}t[e++]="+"}e++}}function $Z(t,e){if(e==='""')return t;if(t==='""')return e;if(typeof t=="string")return e instanceof Bo||t[t.length-1]!=='"'?void 0:typeof e!="string"?`${t.slice(0,-1)}${e}"`:e[0]==='"'?t.slice(0,-1)+e.slice(1):void 0;if(typeof e=="string"&&e[0]==='"'&&!(t instanceof Bo))return`"${t}${e.slice(1)}`}function OZ(t,e){return e.emptyStr()?t:t.emptyStr()?e:PA`${t}${e}`}Me.strConcat=OZ;function PZ(t){return typeof t=="number"||typeof t=="boolean"||t===null?t:Nu(Array.isArray(t)?t.join(","):t)}function xZ(t){return new fn(Nu(t))}Me.stringify=xZ;function Nu(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}Me.safeStringify=Nu;function NZ(t){return typeof t=="string"&&Me.IDENTIFIER.test(t)?new fn(`.${t}`):OA`[${t}]`}Me.getProperty=NZ;function CZ(t){if(typeof t=="string"&&Me.IDENTIFIER.test(t))return new fn(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)}Me.getEsmExportName=CZ;function IZ(t){return new fn(t.toString())}Me.regexpCode=IZ});var Tw=E(qr=>{"use strict";Object.defineProperty(qr,"__esModule",{value:!0});qr.ValueScope=qr.ValueScopeName=qr.Scope=qr.varKinds=qr.UsedValueState=void 0;var jr=Cu(),Ew=class extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}},Bp;(function(t){t[t.Started=0]="Started",t[t.Completed=1]="Completed"})(Bp||(qr.UsedValueState=Bp={}));qr.varKinds={const:new jr.Name("const"),let:new jr.Name("let"),var:new jr.Name("var")};var zp=class{constructor({prefixes:e,parent:r}={}){this._names={},this._prefixes=e,this._parent=r}toName(e){return e instanceof jr.Name?e:this.name(e)}name(e){return new jr.Name(this._newName(e))}_newName(e){let r=this._names[e]||this._nameGroup(e);return`${e}${r.index++}`}_nameGroup(e){var r,n;if(!((n=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||n===void 0)&&n.has(e)||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}};qr.Scope=zp;var Vp=class extends jr.Name{constructor(e,r){super(r),this.prefix=e}setValue(e,{property:r,itemIndex:n}){this.value=e,this.scopePath=(0,jr._)`.${new jr.Name(r)}[${n}]`}};qr.ValueScopeName=Vp;var AZ=(0,jr._)`\n`,Sw=class extends zp{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?AZ:jr.nil}}get(){return this._scope}name(e){return new Vp(e,this._newName(e))}value(e,r){var n;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let s=this.toName(e),{prefix:i}=s,o=(n=r.key)!==null&&n!==void 0?n:r.ref,a=this._values[i];if(a){let u=a.get(o);if(u)return u}else a=this._values[i]=new Map;a.set(o,s);let l=this._scope[i]||(this._scope[i]=[]),c=l.length;return l[c]=r.ref,s.setValue(r,{property:i,itemIndex:c}),s}getValue(e,r){let n=this._values[e];if(n)return n.get(r)}scopeRefs(e,r=this._values){return this._reduceValues(r,n=>{if(n.scopePath===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return(0,jr._)`${e}${n.scopePath}`})}scopeCode(e=this._values,r,n){return this._reduceValues(e,s=>{if(s.value===void 0)throw new Error(`CodeGen: name "${s}" has no value`);return s.value.code},r,n)}_reduceValues(e,r,n={},s){let i=jr.nil;for(let o in e){let a=e[o];if(!a)continue;let l=n[o]=n[o]||new Map;a.forEach(c=>{if(l.has(c))return;l.set(c,Bp.Started);let u=r(c);if(u){let d=this.opts.es5?qr.varKinds.var:qr.varKinds.const;i=(0,jr._)`${i}${d} ${c} = ${u};${this.opts._n}`}else if(u=s?.(c))i=(0,jr._)`${i}${u}${this.opts._n}`;else throw new Ew(c);l.set(c,Bp.Completed)})}return i}};qr.ValueScope=Sw});var we=E(ye=>{"use strict";Object.defineProperty(ye,"__esModule",{value:!0});ye.or=ye.and=ye.not=ye.CodeGen=ye.operators=ye.varKinds=ye.ValueScopeName=ye.ValueScope=ye.Scope=ye.Name=ye.regexpCode=ye.stringify=ye.getProperty=ye.nil=ye.strConcat=ye.str=ye._=void 0;var Ne=Cu(),Un=Tw(),Mi=Cu();Object.defineProperty(ye,"_",{enumerable:!0,get:function(){return Mi._}});Object.defineProperty(ye,"str",{enumerable:!0,get:function(){return Mi.str}});Object.defineProperty(ye,"strConcat",{enumerable:!0,get:function(){return Mi.strConcat}});Object.defineProperty(ye,"nil",{enumerable:!0,get:function(){return Mi.nil}});Object.defineProperty(ye,"getProperty",{enumerable:!0,get:function(){return Mi.getProperty}});Object.defineProperty(ye,"stringify",{enumerable:!0,get:function(){return Mi.stringify}});Object.defineProperty(ye,"regexpCode",{enumerable:!0,get:function(){return Mi.regexpCode}});Object.defineProperty(ye,"Name",{enumerable:!0,get:function(){return Mi.Name}});var Kp=Tw();Object.defineProperty(ye,"Scope",{enumerable:!0,get:function(){return Kp.Scope}});Object.defineProperty(ye,"ValueScope",{enumerable:!0,get:function(){return Kp.ValueScope}});Object.defineProperty(ye,"ValueScopeName",{enumerable:!0,get:function(){return Kp.ValueScopeName}});Object.defineProperty(ye,"varKinds",{enumerable:!0,get:function(){return Kp.varKinds}});ye.operators={GT:new Ne._Code(">"),GTE:new Ne._Code(">="),LT:new Ne._Code("<"),LTE:new Ne._Code("<="),EQ:new Ne._Code("==="),NEQ:new Ne._Code("!=="),NOT:new Ne._Code("!"),OR:new Ne._Code("||"),AND:new Ne._Code("&&"),ADD:new Ne._Code("+")};var Ys=class{optimizeNodes(){return this}optimizeNames(e,r){return this}},Rw=class extends Ys{constructor(e,r,n){super(),this.varKind=e,this.name=r,this.rhs=n}render({es5:e,_n:r}){let n=e?Un.varKinds.var:this.varKind,s=this.rhs===void 0?"":` = ${this.rhs}`;return`${n} ${this.name}${s};`+r}optimizeNames(e,r){if(e[this.name.str])return this.rhs&&(this.rhs=gl(this.rhs,e,r)),this}get names(){return this.rhs instanceof Ne._CodeOrName?this.rhs.names:{}}},Hp=class extends Ys{constructor(e,r,n){super(),this.lhs=e,this.rhs=r,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof Ne.Name&&!e[this.lhs.str]&&!this.sideEffects))return this.rhs=gl(this.rhs,e,r),this}get names(){let e=this.lhs instanceof Ne.Name?{}:{...this.lhs.names};return Wp(e,this.rhs)}},$w=class extends Hp{constructor(e,r,n,s){super(e,n,s),this.op=r}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}},Ow=class extends Ys{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}},Pw=class extends Ys{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}},xw=class extends Ys{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}},Nw=class extends Ys{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,r){return this.code=gl(this.code,e,r),this}get names(){return this.code instanceof Ne._CodeOrName?this.code.names:{}}},Iu=class extends Ys{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((r,n)=>r+n.render(e),"")}optimizeNodes(){let{nodes:e}=this,r=e.length;for(;r--;){let n=e[r].optimizeNodes();Array.isArray(n)?e.splice(r,1,...n):n?e[r]=n:e.splice(r,1)}return e.length>0?this:void 0}optimizeNames(e,r){let{nodes:n}=this,s=n.length;for(;s--;){let i=n[s];i.optimizeNames(e,r)||(kZ(e,i.names),n.splice(s,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((e,r)=>Vo(e,r.names),{})}},Xs=class extends Iu{render(e){return"{"+e._n+super.render(e)+"}"+e._n}},Cw=class extends Iu{},ml=class extends Xs{};ml.kind="else";var Bn=class extends Xs{constructor(e,r){super(r),this.condition=e}render(e){let r=`if(${this.condition})`+super.render(e);return this.else&&(r+="else "+this.else.render(e)),r}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(e===!0)return this.nodes;let r=this.else;if(r){let n=r.optimizeNodes();r=this.else=Array.isArray(n)?new ml(n):n}if(r)return e===!1?r instanceof Bn?r:r.nodes:this.nodes.length?this:new Bn(xA(e),r instanceof Bn?[r]:r.nodes);if(!(e===!1||!this.nodes.length))return this}optimizeNames(e,r){var n;if(this.else=(n=this.else)===null||n===void 0?void 0:n.optimizeNames(e,r),!!(super.optimizeNames(e,r)||this.else))return this.condition=gl(this.condition,e,r),this}get names(){let e=super.names;return Wp(e,this.condition),this.else&&Vo(e,this.else.names),e}};Bn.kind="if";var zo=class extends Xs{};zo.kind="for";var Iw=class extends zo{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iteration=gl(this.iteration,e,r),this}get names(){return Vo(super.names,this.iteration.names)}},Aw=class extends zo{constructor(e,r,n,s){super(),this.varKind=e,this.name=r,this.from=n,this.to=s}render(e){let r=e.es5?Un.varKinds.var:this.varKind,{name:n,from:s,to:i}=this;return`for(${r} ${n}=${s}; ${n}<${i}; ${n}++)`+super.render(e)}get names(){let e=Wp(super.names,this.from);return Wp(e,this.to)}},Gp=class extends zo{constructor(e,r,n,s){super(),this.loop=e,this.varKind=r,this.name=n,this.iterable=s}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iterable=gl(this.iterable,e,r),this}get names(){return Vo(super.names,this.iterable.names)}},Au=class extends Xs{constructor(e,r,n){super(),this.name=e,this.args=r,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}};Au.kind="func";var ku=class extends Iu{render(e){return"return "+super.render(e)}};ku.kind="return";var kw=class extends Xs{render(e){let r="try"+super.render(e);return this.catch&&(r+=this.catch.render(e)),this.finally&&(r+=this.finally.render(e)),r}optimizeNodes(){var e,r;return super.optimizeNodes(),(e=this.catch)===null||e===void 0||e.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(e,r){var n,s;return super.optimizeNames(e,r),(n=this.catch)===null||n===void 0||n.optimizeNames(e,r),(s=this.finally)===null||s===void 0||s.optimizeNames(e,r),this}get names(){let e=super.names;return this.catch&&Vo(e,this.catch.names),this.finally&&Vo(e,this.finally.names),e}},Du=class extends Xs{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}};Du.kind="catch";var Mu=class extends Xs{render(e){return"finally"+super.render(e)}};Mu.kind="finally";var Dw=class{constructor(e,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=e,this._scope=new Un.Scope({parent:e}),this._nodes=[new Cw]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,r){let n=this._extScope.value(e,r);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,r){return this._extScope.getValue(e,r)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,r,n,s){let i=this._scope.toName(r);return n!==void 0&&s&&(this._constants[i.str]=n),this._leafNode(new Rw(e,i,n)),i}const(e,r,n){return this._def(Un.varKinds.const,e,r,n)}let(e,r,n){return this._def(Un.varKinds.let,e,r,n)}var(e,r,n){return this._def(Un.varKinds.var,e,r,n)}assign(e,r,n){return this._leafNode(new Hp(e,r,n))}add(e,r){return this._leafNode(new $w(e,ye.operators.ADD,r))}code(e){return typeof e=="function"?e():e!==Ne.nil&&this._leafNode(new Nw(e)),this}object(...e){let r=["{"];for(let[n,s]of e)r.length>1&&r.push(","),r.push(n),(n!==s||this.opts.es5)&&(r.push(":"),(0,Ne.addCodeArg)(r,s));return r.push("}"),new Ne._Code(r)}if(e,r,n){if(this._blockNode(new Bn(e)),r&&n)this.code(r).else().code(n).endIf();else if(r)this.code(r).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new Bn(e))}else(){return this._elseNode(new ml)}endIf(){return this._endBlockNode(Bn,ml)}_for(e,r){return this._blockNode(e),r&&this.code(r).endFor(),this}for(e,r){return this._for(new Iw(e),r)}forRange(e,r,n,s,i=this.opts.es5?Un.varKinds.var:Un.varKinds.let){let o=this._scope.toName(e);return this._for(new Aw(i,o,r,n),()=>s(o))}forOf(e,r,n,s=Un.varKinds.const){let i=this._scope.toName(e);if(this.opts.es5){let o=r instanceof Ne.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,Ne._)`${o}.length`,a=>{this.var(i,(0,Ne._)`${o}[${a}]`),n(i)})}return this._for(new Gp("of",s,i,r),()=>n(i))}forIn(e,r,n,s=this.opts.es5?Un.varKinds.var:Un.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,Ne._)`Object.keys(${r})`,n);let i=this._scope.toName(e);return this._for(new Gp("in",s,i,r),()=>n(i))}endFor(){return this._endBlockNode(zo)}label(e){return this._leafNode(new Ow(e))}break(e){return this._leafNode(new Pw(e))}return(e){let r=new ku;if(this._blockNode(r),this.code(e),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(ku)}try(e,r,n){if(!r&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');let s=new kw;if(this._blockNode(s),this.code(e),r){let i=this.name("e");this._currNode=s.catch=new Du(i),r(i)}return n&&(this._currNode=s.finally=new Mu,this.code(n)),this._endBlockNode(Du,Mu)}throw(e){return this._leafNode(new xw(e))}block(e,r){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(r),this}endBlock(e){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let n=this._nodes.length-r;if(n<0||e!==void 0&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=r,this}func(e,r=Ne.nil,n,s){return this._blockNode(new Au(e,r,n)),s&&this.code(s).endFunc(),this}endFunc(){return this._endBlockNode(Au)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,r){let n=this._currNode;if(n instanceof e||r&&n instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${e.kind}/${r.kind}`:e.kind}"`)}_elseNode(e){let r=this._currNode;if(!(r instanceof Bn))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let r=this._nodes;r[r.length-1]=e}};ye.CodeGen=Dw;function Vo(t,e){for(let r in e)t[r]=(t[r]||0)+(e[r]||0);return t}function Wp(t,e){return e instanceof Ne._CodeOrName?Vo(t,e.names):t}function gl(t,e,r){if(t instanceof Ne.Name)return n(t);if(!s(t))return t;return new Ne._Code(t._items.reduce((i,o)=>(o instanceof Ne.Name&&(o=n(o)),o instanceof Ne._Code?i.push(...o._items):i.push(o),i),[]));function n(i){let o=r[i.str];return o===void 0||e[i.str]!==1?i:(delete e[i.str],o)}function s(i){return i instanceof Ne._Code&&i._items.some(o=>o instanceof Ne.Name&&e[o.str]===1&&r[o.str]!==void 0)}}function kZ(t,e){for(let r in e)t[r]=(t[r]||0)-(e[r]||0)}function xA(t){return typeof t=="boolean"||typeof t=="number"||t===null?!t:(0,Ne._)`!${Mw(t)}`}ye.not=xA;var DZ=NA(ye.operators.AND);function MZ(...t){return t.reduce(DZ)}ye.and=MZ;var jZ=NA(ye.operators.OR);function qZ(...t){return t.reduce(jZ)}ye.or=qZ;function NA(t){return(e,r)=>e===Ne.nil?r:r===Ne.nil?e:(0,Ne._)`${Mw(e)} ${t} ${Mw(r)}`}function Mw(t){return t instanceof Ne.Name?t:(0,Ne._)`(${t})`}});var je=E(be=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});be.checkStrictMode=be.getErrorPath=be.Type=be.useFunc=be.setEvaluated=be.evaluatedPropsToName=be.mergeEvaluated=be.eachItem=be.unescapeJsonPointer=be.escapeJsonPointer=be.escapeFragment=be.unescapeFragment=be.schemaRefOrVal=be.schemaHasRulesButRef=be.schemaHasRules=be.checkUnknownRules=be.alwaysValidSchema=be.toHash=void 0;var We=we(),LZ=Cu();function FZ(t){let e={};for(let r of t)e[r]=!0;return e}be.toHash=FZ;function UZ(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(AA(t,e),!kA(e,t.self.RULES.all))}be.alwaysValidSchema=UZ;function AA(t,e=t.schema){let{opts:r,self:n}=t;if(!r.strictSchema||typeof e=="boolean")return;let s=n.RULES.keywords;for(let i in e)s[i]||jA(t,`unknown keyword: "${i}"`)}be.checkUnknownRules=AA;function kA(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(e[r])return!0;return!1}be.schemaHasRules=kA;function BZ(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}be.schemaHasRulesButRef=BZ;function zZ({topSchemaRef:t,schemaPath:e},r,n,s){if(!s){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,We._)`${r}`}return(0,We._)`${t}${e}${(0,We.getProperty)(n)}`}be.schemaRefOrVal=zZ;function VZ(t){return DA(decodeURIComponent(t))}be.unescapeFragment=VZ;function HZ(t){return encodeURIComponent(qw(t))}be.escapeFragment=HZ;function qw(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}be.escapeJsonPointer=qw;function DA(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}be.unescapeJsonPointer=DA;function GZ(t,e){if(Array.isArray(t))for(let r of t)e(r);else e(t)}be.eachItem=GZ;function CA({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:n}){return(s,i,o,a)=>{let l=o===void 0?i:o instanceof We.Name?(i instanceof We.Name?t(s,i,o):e(s,i,o),o):i instanceof We.Name?(e(s,o,i),i):r(i,o);return a===We.Name&&!(l instanceof We.Name)?n(s,l):l}}be.mergeEvaluated={props:CA({mergeNames:(t,e,r)=>t.if((0,We._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,We._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,We._)`${r} || {}`).code((0,We._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,We._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,We._)`${r} || {}`),Lw(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:MA}),items:CA({mergeNames:(t,e,r)=>t.if((0,We._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,We._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,We._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,We._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function MA(t,e){if(e===!0)return t.var("props",!0);let r=t.var("props",(0,We._)`{}`);return e!==void 0&&Lw(t,r,e),r}be.evaluatedPropsToName=MA;function Lw(t,e,r){Object.keys(r).forEach(n=>t.assign((0,We._)`${e}${(0,We.getProperty)(n)}`,!0))}be.setEvaluated=Lw;var IA={};function WZ(t,e){return t.scopeValue("func",{ref:e,code:IA[e.code]||(IA[e.code]=new LZ._Code(e.code))})}be.useFunc=WZ;var jw;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(jw||(be.Type=jw={}));function KZ(t,e,r){if(t instanceof We.Name){let n=e===jw.Num;return r?n?(0,We._)`"[" + ${t} + "]"`:(0,We._)`"['" + ${t} + "']"`:n?(0,We._)`"/" + ${t}`:(0,We._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,We.getProperty)(t).toString():"/"+qw(t)}be.getErrorPath=KZ;function jA(t,e,r=t.opts.strictSchema){if(r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}be.checkStrictMode=jA});var Qs=E(Fw=>{"use strict";Object.defineProperty(Fw,"__esModule",{value:!0});var rr=we(),JZ={data:new rr.Name("data"),valCxt:new rr.Name("valCxt"),instancePath:new rr.Name("instancePath"),parentData:new rr.Name("parentData"),parentDataProperty:new rr.Name("parentDataProperty"),rootData:new rr.Name("rootData"),dynamicAnchors:new rr.Name("dynamicAnchors"),vErrors:new rr.Name("vErrors"),errors:new rr.Name("errors"),this:new rr.Name("this"),self:new rr.Name("self"),scope:new rr.Name("scope"),json:new rr.Name("json"),jsonPos:new rr.Name("jsonPos"),jsonLen:new rr.Name("jsonLen"),jsonPart:new rr.Name("jsonPart")};Fw.default=JZ});var ju=E(nr=>{"use strict";Object.defineProperty(nr,"__esModule",{value:!0});nr.extendErrors=nr.resetErrorsCount=nr.reportExtraError=nr.reportError=nr.keyword$DataError=nr.keywordError=void 0;var Ae=we(),Jp=je(),br=Qs();nr.keywordError={message:({keyword:t})=>(0,Ae.str)`must pass "${t}" keyword validation`};nr.keyword$DataError={message:({keyword:t,schemaType:e})=>e?(0,Ae.str)`"${t}" keyword must be ${e} ($data)`:(0,Ae.str)`"${t}" keyword is invalid ($data)`};function YZ(t,e=nr.keywordError,r,n){let{it:s}=t,{gen:i,compositeRule:o,allErrors:a}=s,l=FA(t,e,r);n??(o||a)?qA(i,l):LA(s,(0,Ae._)`[${l}]`)}nr.reportError=YZ;function XZ(t,e=nr.keywordError,r){let{it:n}=t,{gen:s,compositeRule:i,allErrors:o}=n,a=FA(t,e,r);qA(s,a),i||o||LA(n,br.default.vErrors)}nr.reportExtraError=XZ;function QZ(t,e){t.assign(br.default.errors,e),t.if((0,Ae._)`${br.default.vErrors} !== null`,()=>t.if(e,()=>t.assign((0,Ae._)`${br.default.vErrors}.length`,e),()=>t.assign(br.default.vErrors,null)))}nr.resetErrorsCount=QZ;function ZZ({gen:t,keyword:e,schemaValue:r,data:n,errsCount:s,it:i}){if(s===void 0)throw new Error("ajv implementation error");let o=t.name("err");t.forRange("i",s,br.default.errors,a=>{t.const(o,(0,Ae._)`${br.default.vErrors}[${a}]`),t.if((0,Ae._)`${o}.instancePath === undefined`,()=>t.assign((0,Ae._)`${o}.instancePath`,(0,Ae.strConcat)(br.default.instancePath,i.errorPath))),t.assign((0,Ae._)`${o}.schemaPath`,(0,Ae.str)`${i.errSchemaPath}/${e}`),i.opts.verbose&&(t.assign((0,Ae._)`${o}.schema`,r),t.assign((0,Ae._)`${o}.data`,n))})}nr.extendErrors=ZZ;function qA(t,e){let r=t.const("err",e);t.if((0,Ae._)`${br.default.vErrors} === null`,()=>t.assign(br.default.vErrors,(0,Ae._)`[${r}]`),(0,Ae._)`${br.default.vErrors}.push(${r})`),t.code((0,Ae._)`${br.default.errors}++`)}function LA(t,e){let{gen:r,validateName:n,schemaEnv:s}=t;s.$async?r.throw((0,Ae._)`new ${t.ValidationError}(${e})`):(r.assign((0,Ae._)`${n}.errors`,e),r.return(!1))}var Ho={keyword:new Ae.Name("keyword"),schemaPath:new Ae.Name("schemaPath"),params:new Ae.Name("params"),propertyName:new Ae.Name("propertyName"),message:new Ae.Name("message"),schema:new Ae.Name("schema"),parentSchema:new Ae.Name("parentSchema")};function FA(t,e,r){let{createErrors:n}=t.it;return n===!1?(0,Ae._)`{}`:eee(t,e,r)}function eee(t,e,r={}){let{gen:n,it:s}=t,i=[tee(s,r),ree(t,r)];return nee(t,e,i),n.object(...i)}function tee({errorPath:t},{instancePath:e}){let r=e?(0,Ae.str)`${t}${(0,Jp.getErrorPath)(e,Jp.Type.Str)}`:t;return[br.default.instancePath,(0,Ae.strConcat)(br.default.instancePath,r)]}function ree({keyword:t,it:{errSchemaPath:e}},{schemaPath:r,parentSchema:n}){let s=n?e:(0,Ae.str)`${e}/${t}`;return r&&(s=(0,Ae.str)`${s}${(0,Jp.getErrorPath)(r,Jp.Type.Str)}`),[Ho.schemaPath,s]}function nee(t,{params:e,message:r},n){let{keyword:s,data:i,schemaValue:o,it:a}=t,{opts:l,propertyName:c,topSchemaRef:u,schemaPath:d}=a;n.push([Ho.keyword,s],[Ho.params,typeof e=="function"?e(t):e||(0,Ae._)`{}`]),l.messages&&n.push([Ho.message,typeof r=="function"?r(t):r]),l.verbose&&n.push([Ho.schema,o],[Ho.parentSchema,(0,Ae._)`${u}${d}`],[br.default.data,i]),c&&n.push([Ho.propertyName,c])}});var BA=E(yl=>{"use strict";Object.defineProperty(yl,"__esModule",{value:!0});yl.boolOrEmptySchema=yl.topBoolOrEmptySchema=void 0;var see=ju(),iee=we(),oee=Qs(),aee={message:"boolean schema is false"};function lee(t){let{gen:e,schema:r,validateName:n}=t;r===!1?UA(t,!1):typeof r=="object"&&r.$async===!0?e.return(oee.default.data):(e.assign((0,iee._)`${n}.errors`,null),e.return(!0))}yl.topBoolOrEmptySchema=lee;function cee(t,e){let{gen:r,schema:n}=t;n===!1?(r.var(e,!1),UA(t)):r.var(e,!0)}yl.boolOrEmptySchema=cee;function UA(t,e){let{gen:r,data:n}=t,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,see.reportError)(s,aee,void 0,e)}});var Uw=E(_l=>{"use strict";Object.defineProperty(_l,"__esModule",{value:!0});_l.getRules=_l.isJSONType=void 0;var uee=["string","number","integer","boolean","null","object","array"],fee=new Set(uee);function dee(t){return typeof t=="string"&&fee.has(t)}_l.isJSONType=dee;function hee(){let t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}_l.getRules=hee});var Bw=E(ji=>{"use strict";Object.defineProperty(ji,"__esModule",{value:!0});ji.shouldUseRule=ji.shouldUseGroup=ji.schemaHasRulesForType=void 0;function pee({schema:t,self:e},r){let n=e.RULES.types[r];return n&&n!==!0&&zA(t,n)}ji.schemaHasRulesForType=pee;function zA(t,e){return e.rules.some(r=>VA(t,r))}ji.shouldUseGroup=zA;function VA(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(n=>t[n]!==void 0))}ji.shouldUseRule=VA});var qu=E(sr=>{"use strict";Object.defineProperty(sr,"__esModule",{value:!0});sr.reportTypeError=sr.checkDataTypes=sr.checkDataType=sr.coerceAndCheckDataType=sr.getJSONTypes=sr.getSchemaTypes=sr.DataType=void 0;var mee=Uw(),gee=Bw(),yee=ju(),fe=we(),HA=je(),vl;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(vl||(sr.DataType=vl={}));function _ee(t){let e=GA(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}sr.getSchemaTypes=_ee;function GA(t){let e=Array.isArray(t)?t:t?[t]:[];if(e.every(mee.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}sr.getJSONTypes=GA;function vee(t,e){let{gen:r,data:n,opts:s}=t,i=wee(e,s.coerceTypes),o=e.length>0&&!(i.length===0&&e.length===1&&(0,gee.schemaHasRulesForType)(t,e[0]));if(o){let a=Vw(e,n,s.strictNumbers,vl.Wrong);r.if(a,()=>{i.length?bee(t,e,i):Hw(t)})}return o}sr.coerceAndCheckDataType=vee;var WA=new Set(["string","number","integer","boolean","null"]);function wee(t,e){return e?t.filter(r=>WA.has(r)||e==="array"&&r==="array"):[]}function bee(t,e,r){let{gen:n,data:s,opts:i}=t,o=n.let("dataType",(0,fe._)`typeof ${s}`),a=n.let("coerced",(0,fe._)`undefined`);i.coerceTypes==="array"&&n.if((0,fe._)`${o} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>n.assign(s,(0,fe._)`${s}[0]`).assign(o,(0,fe._)`typeof ${s}`).if(Vw(e,s,i.strictNumbers),()=>n.assign(a,s))),n.if((0,fe._)`${a} !== undefined`);for(let c of r)(WA.has(c)||c==="array"&&i.coerceTypes==="array")&&l(c);n.else(),Hw(t),n.endIf(),n.if((0,fe._)`${a} !== undefined`,()=>{n.assign(s,a),Eee(t,a)});function l(c){switch(c){case"string":n.elseIf((0,fe._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,fe._)`"" + ${s}`).elseIf((0,fe._)`${s} === null`).assign(a,(0,fe._)`""`);return;case"number":n.elseIf((0,fe._)`${o} == "boolean" || ${s} === null
              || (${o} == "string" && ${s} && ${s} == +${s})`).assign(a,(0,fe._)`+${s}`);return;case"integer":n.elseIf((0,fe._)`${o} === "boolean" || ${s} === null
              || (${o} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(a,(0,fe._)`+${s}`);return;case"boolean":n.elseIf((0,fe._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(a,!1).elseIf((0,fe._)`${s} === "true" || ${s} === 1`).assign(a,!0);return;case"null":n.elseIf((0,fe._)`${s} === "" || ${s} === 0 || ${s} === false`),n.assign(a,null);return;case"array":n.elseIf((0,fe._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${s} === null`).assign(a,(0,fe._)`[${s}]`)}}}function Eee({gen:t,parentData:e,parentDataProperty:r},n){t.if((0,fe._)`${e} !== undefined`,()=>t.assign((0,fe._)`${e}[${r}]`,n))}function zw(t,e,r,n=vl.Correct){let s=n===vl.Correct?fe.operators.EQ:fe.operators.NEQ,i;switch(t){case"null":return(0,fe._)`${e} ${s} null`;case"array":i=(0,fe._)`Array.isArray(${e})`;break;case"object":i=(0,fe._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":i=o((0,fe._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":i=o();break;default:return(0,fe._)`typeof ${e} ${s} ${t}`}return n===vl.Correct?i:(0,fe.not)(i);function o(a=fe.nil){return(0,fe.and)((0,fe._)`typeof ${e} == "number"`,a,r?(0,fe._)`isFinite(${e})`:fe.nil)}}sr.checkDataType=zw;function Vw(t,e,r,n){if(t.length===1)return zw(t[0],e,r,n);let s,i=(0,HA.toHash)(t);if(i.array&&i.object){let o=(0,fe._)`typeof ${e} != "object"`;s=i.null?o:(0,fe._)`!${e} || ${o}`,delete i.null,delete i.array,delete i.object}else s=fe.nil;i.number&&delete i.integer;for(let o in i)s=(0,fe.and)(s,zw(o,e,r,n));return s}sr.checkDataTypes=Vw;var See={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,fe._)`{type: ${t}}`:(0,fe._)`{type: ${e}}`};function Hw(t){let e=Tee(t);(0,yee.reportError)(e,See)}sr.reportTypeError=Hw;function Tee(t){let{gen:e,data:r,schema:n}=t,s=(0,HA.schemaRefOrVal)(t,n,"type");return{gen:e,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:t}}});var JA=E(Yp=>{"use strict";Object.defineProperty(Yp,"__esModule",{value:!0});Yp.assignDefaults=void 0;var wl=we(),Ree=je();function $ee(t,e){let{properties:r,items:n}=t.schema;if(e==="object"&&r)for(let s in r)KA(t,s,r[s].default);else e==="array"&&Array.isArray(n)&&n.forEach((s,i)=>KA(t,i,s.default))}Yp.assignDefaults=$ee;function KA(t,e,r){let{gen:n,compositeRule:s,data:i,opts:o}=t;if(r===void 0)return;let a=(0,wl._)`${i}${(0,wl.getProperty)(e)}`;if(s){(0,Ree.checkStrictMode)(t,`default is ignored for: ${a}`);return}let l=(0,wl._)`${a} === undefined`;o.useDefaults==="empty"&&(l=(0,wl._)`${l} || ${a} === null || ${a} === ""`),n.if(l,(0,wl._)`${a} = ${(0,wl.stringify)(r)}`)}});var dn=E(Ve=>{"use strict";Object.defineProperty(Ve,"__esModule",{value:!0});Ve.validateUnion=Ve.validateArray=Ve.usePattern=Ve.callValidateCode=Ve.schemaProperties=Ve.allSchemaProperties=Ve.noPropertyInData=Ve.propertyInData=Ve.isOwnProperty=Ve.hasPropFunc=Ve.reportMissingProp=Ve.checkMissingProp=Ve.checkReportMissingProp=void 0;var et=we(),Gw=je(),qi=Qs(),Oee=je();function Pee(t,e){let{gen:r,data:n,it:s}=t;r.if(Kw(r,n,e,s.opts.ownProperties),()=>{t.setParams({missingProperty:(0,et._)`${e}`},!0),t.error()})}Ve.checkReportMissingProp=Pee;function xee({gen:t,data:e,it:{opts:r}},n,s){return(0,et.or)(...n.map(i=>(0,et.and)(Kw(t,e,i,r.ownProperties),(0,et._)`${s} = ${i}`)))}Ve.checkMissingProp=xee;function Nee(t,e){t.setParams({missingProperty:e},!0),t.error()}Ve.reportMissingProp=Nee;function YA(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,et._)`Object.prototype.hasOwnProperty`})}Ve.hasPropFunc=YA;function Ww(t,e,r){return(0,et._)`${YA(t)}.call(${e}, ${r})`}Ve.isOwnProperty=Ww;function Cee(t,e,r,n){let s=(0,et._)`${e}${(0,et.getProperty)(r)} !== undefined`;return n?(0,et._)`${s} && ${Ww(t,e,r)}`:s}Ve.propertyInData=Cee;function Kw(t,e,r,n){let s=(0,et._)`${e}${(0,et.getProperty)(r)} === undefined`;return n?(0,et.or)(s,(0,et.not)(Ww(t,e,r))):s}Ve.noPropertyInData=Kw;function XA(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}Ve.allSchemaProperties=XA;function Iee(t,e){return XA(e).filter(r=>!(0,Gw.alwaysValidSchema)(t,e[r]))}Ve.schemaProperties=Iee;function Aee({schemaCode:t,data:e,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:i},it:o},a,l,c){let u=c?(0,et._)`${t}, ${e}, ${n}${s}`:e,d=[[qi.default.instancePath,(0,et.strConcat)(qi.default.instancePath,i)],[qi.default.parentData,o.parentData],[qi.default.parentDataProperty,o.parentDataProperty],[qi.default.rootData,qi.default.rootData]];o.opts.dynamicRef&&d.push([qi.default.dynamicAnchors,qi.default.dynamicAnchors]);let p=(0,et._)`${u}, ${r.object(...d)}`;return l!==et.nil?(0,et._)`${a}.call(${l}, ${p})`:(0,et._)`${a}(${p})`}Ve.callValidateCode=Aee;var kee=(0,et._)`new RegExp`;function Dee({gen:t,it:{opts:e}},r){let n=e.unicodeRegExp?"u":"",{regExp:s}=e.code,i=s(r,n);return t.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,et._)`${s.code==="new RegExp"?kee:(0,Oee.useFunc)(t,s)}(${r}, ${n})`})}Ve.usePattern=Dee;function Mee(t){let{gen:e,data:r,keyword:n,it:s}=t,i=e.name("valid");if(s.allErrors){let a=e.let("valid",!0);return o(()=>e.assign(a,!1)),a}return e.var(i,!0),o(()=>e.break()),i;function o(a){let l=e.const("len",(0,et._)`${r}.length`);e.forRange("i",0,l,c=>{t.subschema({keyword:n,dataProp:c,dataPropType:Gw.Type.Num},i),e.if((0,et.not)(i),a)})}}Ve.validateArray=Mee;function jee(t){let{gen:e,schema:r,keyword:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(l=>(0,Gw.alwaysValidSchema)(s,l))&&!s.opts.unevaluated)return;let o=e.let("valid",!1),a=e.name("_valid");e.block(()=>r.forEach((l,c)=>{let u=t.subschema({keyword:n,schemaProp:c,compositeRule:!0},a);e.assign(o,(0,et._)`${o} || ${a}`),t.mergeValidEvaluated(u,a)||e.if((0,et.not)(o))})),t.result(o,()=>t.reset(),()=>t.error(!0))}Ve.validateUnion=jee});var ek=E(_s=>{"use strict";Object.defineProperty(_s,"__esModule",{value:!0});_s.validateKeywordUsage=_s.validSchemaType=_s.funcKeywordCode=_s.macroKeywordCode=void 0;var Er=we(),Go=Qs(),qee=dn(),Lee=ju();function Fee(t,e){let{gen:r,keyword:n,schema:s,parentSchema:i,it:o}=t,a=e.macro.call(o.self,s,i,o),l=ZA(r,n,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);let c=r.name("valid");t.subschema({schema:a,schemaPath:Er.nil,errSchemaPath:`${o.errSchemaPath}/${n}`,topSchemaRef:l,compositeRule:!0},c),t.pass(c,()=>t.error(!0))}_s.macroKeywordCode=Fee;function Uee(t,e){var r;let{gen:n,keyword:s,schema:i,parentSchema:o,$data:a,it:l}=t;zee(l,e);let c=!a&&e.compile?e.compile.call(l.self,i,o,l):e.validate,u=ZA(n,s,c),d=n.let("valid");t.block$data(d,p),t.ok((r=e.valid)!==null&&r!==void 0?r:d);function p(){if(e.errors===!1)m(),e.modifying&&QA(t),y(()=>t.error());else{let g=e.async?f():h();e.modifying&&QA(t),y(()=>Bee(t,g))}}function f(){let g=n.let("ruleErrs",null);return n.try(()=>m((0,Er._)`await `),w=>n.assign(d,!1).if((0,Er._)`${w} instanceof ${l.ValidationError}`,()=>n.assign(g,(0,Er._)`${w}.errors`),()=>n.throw(w))),g}function h(){let g=(0,Er._)`${u}.errors`;return n.assign(g,null),m(Er.nil),g}function m(g=e.async?(0,Er._)`await `:Er.nil){let w=l.opts.passContext?Go.default.this:Go.default.self,_=!("compile"in e&&!a||e.schema===!1);n.assign(d,(0,Er._)`${g}${(0,qee.callValidateCode)(t,u,w,_)}`,e.modifying)}function y(g){var w;n.if((0,Er.not)((w=e.valid)!==null&&w!==void 0?w:d),g)}}_s.funcKeywordCode=Uee;function QA(t){let{gen:e,data:r,it:n}=t;e.if(n.parentData,()=>e.assign(r,(0,Er._)`${n.parentData}[${n.parentDataProperty}]`))}function Bee(t,e){let{gen:r}=t;r.if((0,Er._)`Array.isArray(${e})`,()=>{r.assign(Go.default.vErrors,(0,Er._)`${Go.default.vErrors} === null ? ${e} : ${Go.default.vErrors}.concat(${e})`).assign(Go.default.errors,(0,Er._)`${Go.default.vErrors}.length`),(0,Lee.extendErrors)(t)},()=>t.error())}function zee({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function ZA(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,Er.stringify)(r)})}function Vee(t,e,r=!1){return!e.length||e.some(n=>n==="array"?Array.isArray(t):n==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==n||r&&typeof t>"u")}_s.validSchemaType=Vee;function Hee({schema:t,opts:e,self:r,errSchemaPath:n},s,i){if(Array.isArray(s.keyword)?!s.keyword.includes(i):s.keyword!==i)throw new Error("ajv implementation error");let o=s.dependencies;if(o?.some(a=>!Object.prototype.hasOwnProperty.call(t,a)))throw new Error(`parent schema must have dependencies of ${i}: ${o.join(",")}`);if(s.validateSchema&&!s.validateSchema(t[i])){let l=`keyword "${i}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(l);else throw new Error(l)}}_s.validateKeywordUsage=Hee});var rk=E(Li=>{"use strict";Object.defineProperty(Li,"__esModule",{value:!0});Li.extendSubschemaMode=Li.extendSubschemaData=Li.getSubschema=void 0;var vs=we(),tk=je();function Gee(t,{keyword:e,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:i,topSchemaRef:o}){if(e!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){let a=t.schema[e];return r===void 0?{schema:a,schemaPath:(0,vs._)`${t.schemaPath}${(0,vs.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:a[r],schemaPath:(0,vs._)`${t.schemaPath}${(0,vs.getProperty)(e)}${(0,vs.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,tk.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||i===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:o,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}Li.getSubschema=Gee;function Wee(t,e,{dataProp:r,dataPropType:n,data:s,dataTypes:i,propertyName:o}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:a}=e;if(r!==void 0){let{errorPath:c,dataPathArr:u,opts:d}=e,p=a.let("data",(0,vs._)`${e.data}${(0,vs.getProperty)(r)}`,!0);l(p),t.errorPath=(0,vs.str)`${c}${(0,tk.getErrorPath)(r,n,d.jsPropertySyntax)}`,t.parentDataProperty=(0,vs._)`${r}`,t.dataPathArr=[...u,t.parentDataProperty]}if(s!==void 0){let c=s instanceof vs.Name?s:a.let("data",s,!0);l(c),o!==void 0&&(t.propertyName=o)}i&&(t.dataTypes=i);function l(c){t.data=c,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,c]}}Li.extendSubschemaData=Wee;function Kee(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:i}){n!==void 0&&(t.compositeRule=n),s!==void 0&&(t.createErrors=s),i!==void 0&&(t.allErrors=i),t.jtdDiscriminator=e,t.jtdMetadata=r}Li.extendSubschemaMode=Kee});var Zs=E(($Ce,nk)=>{"use strict";nk.exports=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,s,i;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!t(e[s],r[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[s]))return!1;for(s=n;s--!==0;){var o=i[s];if(!t(e[o],r[o]))return!1}return!0}return e!==e&&r!==r}});var ik=E((OCe,sk)=>{"use strict";var Fi=sk.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};Xp(e,n,s,t,"",t)};Fi.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Fi.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Fi.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Fi.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Xp(t,e,r,n,s,i,o,a,l,c){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,s,i,o,a,l,c);for(var u in n){var d=n[u];if(Array.isArray(d)){if(u in Fi.arrayKeywords)for(var p=0;p<d.length;p++)Xp(t,e,r,d[p],s+"/"+u+"/"+p,i,s,u,n,p)}else if(u in Fi.propsKeywords){if(d&&typeof d=="object")for(var f in d)Xp(t,e,r,d[f],s+"/"+u+"/"+Jee(f),i,s,u,n,f)}else(u in Fi.keywords||t.allKeys&&!(u in Fi.skipKeywords))&&Xp(t,e,r,d,s+"/"+u,i,s,u,n)}r(n,s,i,o,a,l,c)}}function Jee(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}});var Lu=E(Lr=>{"use strict";Object.defineProperty(Lr,"__esModule",{value:!0});Lr.getSchemaRefs=Lr.resolveUrl=Lr.normalizeId=Lr._getFullPath=Lr.getFullPath=Lr.inlineRef=void 0;var Yee=je(),Xee=Zs(),Qee=ik(),Zee=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function ete(t,e=!0){return typeof t=="boolean"?!0:e===!0?!Jw(t):e?ok(t)<=e:!1}Lr.inlineRef=ete;var tte=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function Jw(t){for(let e in t){if(tte.has(e))return!0;let r=t[e];if(Array.isArray(r)&&r.some(Jw)||typeof r=="object"&&Jw(r))return!0}return!1}function ok(t){let e=0;for(let r in t){if(r==="$ref")return 1/0;if(e++,!Zee.has(r)&&(typeof t[r]=="object"&&(0,Yee.eachItem)(t[r],n=>e+=ok(n)),e===1/0))return 1/0}return e}function ak(t,e="",r){r!==!1&&(e=bl(e));let n=t.parse(e);return lk(t,n)}Lr.getFullPath=ak;function lk(t,e){return t.serialize(e).split("#")[0]+"#"}Lr._getFullPath=lk;var rte=/#\/?$/;function bl(t){return t?t.replace(rte,""):""}Lr.normalizeId=bl;function nte(t,e,r){return r=bl(r),t.resolve(e,r)}Lr.resolveUrl=nte;var ste=/^[a-z_][-a-z0-9._]*$/i;function ite(t,e){if(typeof t=="boolean")return{};let{schemaId:r,uriResolver:n}=this.opts,s=bl(t[r]||e),i={"":s},o=ak(n,s,!1),a={},l=new Set;return Qee(t,{allKeys:!0},(d,p,f,h)=>{if(h===void 0)return;let m=o+p,y=i[h];typeof d[r]=="string"&&(y=g.call(this,d[r])),w.call(this,d.$anchor),w.call(this,d.$dynamicAnchor),i[p]=y;function g(_){let v=this.opts.uriResolver.resolve;if(_=bl(y?v(y,_):_),l.has(_))throw u(_);l.add(_);let S=this.refs[_];return typeof S=="string"&&(S=this.refs[S]),typeof S=="object"?c(d,S.schema,_):_!==bl(m)&&(_[0]==="#"?(c(d,a[_],_),a[_]=d):this.refs[_]=m),_}function w(_){if(typeof _=="string"){if(!ste.test(_))throw new Error(`invalid anchor "${_}"`);g.call(this,`#${_}`)}}}),a;function c(d,p,f){if(p!==void 0&&!Xee(d,p))throw u(f)}function u(d){return new Error(`reference "${d}" resolves to more than one schema`)}}Lr.getSchemaRefs=ite});var Bu=E(Ui=>{"use strict";Object.defineProperty(Ui,"__esModule",{value:!0});Ui.getData=Ui.KeywordCxt=Ui.validateFunctionCode=void 0;var hk=BA(),ck=qu(),Xw=Bw(),Qp=qu(),ote=JA(),Uu=ek(),Yw=rk(),X=we(),se=Qs(),ate=Lu(),ei=je(),Fu=ju();function lte(t){if(gk(t)&&(yk(t),mk(t))){fte(t);return}pk(t,()=>(0,hk.topBoolOrEmptySchema)(t))}Ui.validateFunctionCode=lte;function pk({gen:t,validateName:e,schema:r,schemaEnv:n,opts:s},i){s.code.es5?t.func(e,(0,X._)`${se.default.data}, ${se.default.valCxt}`,n.$async,()=>{t.code((0,X._)`"use strict"; ${uk(r,s)}`),ute(t,s),t.code(i)}):t.func(e,(0,X._)`${se.default.data}, ${cte(s)}`,n.$async,()=>t.code(uk(r,s)).code(i))}function cte(t){return(0,X._)`{${se.default.instancePath}="", ${se.default.parentData}, ${se.default.parentDataProperty}, ${se.default.rootData}=${se.default.data}${t.dynamicRef?(0,X._)`, ${se.default.dynamicAnchors}={}`:X.nil}}={}`}function ute(t,e){t.if(se.default.valCxt,()=>{t.var(se.default.instancePath,(0,X._)`${se.default.valCxt}.${se.default.instancePath}`),t.var(se.default.parentData,(0,X._)`${se.default.valCxt}.${se.default.parentData}`),t.var(se.default.parentDataProperty,(0,X._)`${se.default.valCxt}.${se.default.parentDataProperty}`),t.var(se.default.rootData,(0,X._)`${se.default.valCxt}.${se.default.rootData}`),e.dynamicRef&&t.var(se.default.dynamicAnchors,(0,X._)`${se.default.valCxt}.${se.default.dynamicAnchors}`)},()=>{t.var(se.default.instancePath,(0,X._)`""`),t.var(se.default.parentData,(0,X._)`undefined`),t.var(se.default.parentDataProperty,(0,X._)`undefined`),t.var(se.default.rootData,se.default.data),e.dynamicRef&&t.var(se.default.dynamicAnchors,(0,X._)`{}`)})}function fte(t){let{schema:e,opts:r,gen:n}=t;pk(t,()=>{r.$comment&&e.$comment&&vk(t),gte(t),n.let(se.default.vErrors,null),n.let(se.default.errors,0),r.unevaluated&&dte(t),_k(t),vte(t)})}function dte(t){let{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,X._)`${r}.evaluated`),e.if((0,X._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,X._)`${t.evaluated}.props`,(0,X._)`undefined`)),e.if((0,X._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,X._)`${t.evaluated}.items`,(0,X._)`undefined`))}function uk(t,e){let r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,X._)`/*# sourceURL=${r} */`:X.nil}function hte(t,e){if(gk(t)&&(yk(t),mk(t))){pte(t,e);return}(0,hk.boolOrEmptySchema)(t,e)}function mk({schema:t,self:e}){if(typeof t=="boolean")return!t;for(let r in t)if(e.RULES.all[r])return!0;return!1}function gk(t){return typeof t.schema!="boolean"}function pte(t,e){let{schema:r,gen:n,opts:s}=t;s.$comment&&r.$comment&&vk(t),yte(t),_te(t);let i=n.const("_errs",se.default.errors);_k(t,i),n.var(e,(0,X._)`${i} === ${se.default.errors}`)}function yk(t){(0,ei.checkUnknownRules)(t),mte(t)}function _k(t,e){if(t.opts.jtd)return fk(t,[],!1,e);let r=(0,ck.getSchemaTypes)(t.schema),n=(0,ck.coerceAndCheckDataType)(t,r);fk(t,r,!n,e)}function mte(t){let{schema:e,errSchemaPath:r,opts:n,self:s}=t;e.$ref&&n.ignoreKeywordsWithRef&&(0,ei.schemaHasRulesButRef)(e,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function gte(t){let{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,ei.checkStrictMode)(t,"default is ignored in the schema root")}function yte(t){let e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,ate.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function _te(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function vk({gen:t,schemaEnv:e,schema:r,errSchemaPath:n,opts:s}){let i=r.$comment;if(s.$comment===!0)t.code((0,X._)`${se.default.self}.logger.log(${i})`);else if(typeof s.$comment=="function"){let o=(0,X.str)`${n}/$comment`,a=t.scopeValue("root",{ref:e.root});t.code((0,X._)`${se.default.self}.opts.$comment(${i}, ${o}, ${a}.schema)`)}}function vte(t){let{gen:e,schemaEnv:r,validateName:n,ValidationError:s,opts:i}=t;r.$async?e.if((0,X._)`${se.default.errors} === 0`,()=>e.return(se.default.data),()=>e.throw((0,X._)`new ${s}(${se.default.vErrors})`)):(e.assign((0,X._)`${n}.errors`,se.default.vErrors),i.unevaluated&&wte(t),e.return((0,X._)`${se.default.errors} === 0`))}function wte({gen:t,evaluated:e,props:r,items:n}){r instanceof X.Name&&t.assign((0,X._)`${e}.props`,r),n instanceof X.Name&&t.assign((0,X._)`${e}.items`,n)}function fk(t,e,r,n){let{gen:s,schema:i,data:o,allErrors:a,opts:l,self:c}=t,{RULES:u}=c;if(i.$ref&&(l.ignoreKeywordsWithRef||!(0,ei.schemaHasRulesButRef)(i,u))){s.block(()=>bk(t,"$ref",u.all.$ref.definition));return}l.jtd||bte(t,e),s.block(()=>{for(let p of u.rules)d(p);d(u.post)});function d(p){(0,Xw.shouldUseGroup)(i,p)&&(p.type?(s.if((0,Qp.checkDataType)(p.type,o,l.strictNumbers)),dk(t,p),e.length===1&&e[0]===p.type&&r&&(s.else(),(0,Qp.reportTypeError)(t)),s.endIf()):dk(t,p),a||s.if((0,X._)`${se.default.errors} === ${n||0}`))}}function dk(t,e){let{gen:r,schema:n,opts:{useDefaults:s}}=t;s&&(0,ote.assignDefaults)(t,e.type),r.block(()=>{for(let i of e.rules)(0,Xw.shouldUseRule)(n,i)&&bk(t,i.keyword,i.definition,e.type)})}function bte(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(Ete(t,e),t.opts.allowUnionTypes||Ste(t,e),Tte(t,t.dataTypes))}function Ete(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{wk(t.dataTypes,r)||Qw(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),$te(t,e)}}function Ste(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&Qw(t,"use allowUnionTypes to allow union type keyword")}function Tte(t,e){let r=t.self.RULES.all;for(let n in r){let s=r[n];if(typeof s=="object"&&(0,Xw.shouldUseRule)(t.schema,s)){let{type:i}=s.definition;i.length&&!i.some(o=>Rte(e,o))&&Qw(t,`missing type "${i.join(",")}" for keyword "${n}"`)}}}function Rte(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function wk(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function $te(t,e){let r=[];for(let n of t.dataTypes)wk(e,n)?r.push(n):e.includes("integer")&&n==="number"&&r.push("integer");t.dataTypes=r}function Qw(t,e){let r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,ei.checkStrictMode)(t,e,t.opts.strictTypes)}var Zp=class{constructor(e,r,n){if((0,Uu.validateKeywordUsage)(e,r,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,ei.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",Ek(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,Uu.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",se.default.errors))}result(e,r,n){this.failResult((0,X.not)(e),r,n)}failResult(e,r,n){this.gen.if(e),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,X.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:r}=this;this.fail((0,X._)`${r} !== undefined && (${(0,X.or)(this.invalid$data(),e)})`)}error(e,r,n){if(r){this.setParams(r),this._error(e,n),this.setParams({});return}this._error(e,n)}_error(e,r){(e?Fu.reportExtraError:Fu.reportError)(this,this.def.error,r)}$dataError(){(0,Fu.reportError)(this,this.def.$dataError||Fu.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,Fu.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,n=X.nil){this.gen.block(()=>{this.check$data(e,n),r()})}check$data(e=X.nil,r=X.nil){if(!this.$data)return;let{gen:n,schemaCode:s,schemaType:i,def:o}=this;n.if((0,X.or)((0,X._)`${s} === undefined`,r)),e!==X.nil&&n.assign(e,!0),(i.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==X.nil&&n.assign(e,!1)),n.else()}invalid$data(){let{gen:e,schemaCode:r,schemaType:n,def:s,it:i}=this;return(0,X.or)(o(),a());function o(){if(n.length){if(!(r instanceof X.Name))throw new Error("ajv implementation error");let l=Array.isArray(n)?n:[n];return(0,X._)`${(0,Qp.checkDataTypes)(l,r,i.opts.strictNumbers,Qp.DataType.Wrong)}`}return X.nil}function a(){if(s.validateSchema){let l=e.scopeValue("validate$data",{ref:s.validateSchema});return(0,X._)`!${l}(${r})`}return X.nil}}subschema(e,r){let n=(0,Yw.getSubschema)(this.it,e);(0,Yw.extendSubschemaData)(n,this.it,e),(0,Yw.extendSubschemaMode)(n,e);let s={...this.it,...n,items:void 0,props:void 0};return hte(s,r),s}mergeEvaluated(e,r){let{it:n,gen:s}=this;n.opts.unevaluated&&(n.props!==!0&&e.props!==void 0&&(n.props=ei.mergeEvaluated.props(s,e.props,n.props,r)),n.items!==!0&&e.items!==void 0&&(n.items=ei.mergeEvaluated.items(s,e.items,n.items,r)))}mergeValidEvaluated(e,r){let{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(e,X.Name)),!0}};Ui.KeywordCxt=Zp;function bk(t,e,r,n){let s=new Zp(t,r,e);"code"in r?r.code(s,n):s.$data&&r.validate?(0,Uu.funcKeywordCode)(s,r):"macro"in r?(0,Uu.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,Uu.funcKeywordCode)(s,r)}var Ote=/^\/(?:[^~]|~0|~1)*$/,Pte=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Ek(t,{dataLevel:e,dataNames:r,dataPathArr:n}){let s,i;if(t==="")return se.default.rootData;if(t[0]==="/"){if(!Ote.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);s=t,i=se.default.rootData}else{let c=Pte.exec(t);if(!c)throw new Error(`Invalid JSON-pointer: ${t}`);let u=+c[1];if(s=c[2],s==="#"){if(u>=e)throw new Error(l("property/index",u));return n[e-u]}if(u>e)throw new Error(l("data",u));if(i=r[e-u],!s)return i}let o=i,a=s.split("/");for(let c of a)c&&(i=(0,X._)`${i}${(0,X.getProperty)((0,ei.unescapeJsonPointer)(c))}`,o=(0,X._)`${o} && ${i}`);return o;function l(c,u){return`Cannot access ${c} ${u} levels up, current level is ${e}`}}Ui.getData=Ek});var em=E(eb=>{"use strict";Object.defineProperty(eb,"__esModule",{value:!0});var Zw=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};eb.default=Zw});var zu=E(nb=>{"use strict";Object.defineProperty(nb,"__esModule",{value:!0});var tb=Lu(),rb=class extends Error{constructor(e,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,tb.resolveUrl)(e,r,n),this.missingSchema=(0,tb.normalizeId)((0,tb.getFullPath)(e,this.missingRef))}};nb.default=rb});var rm=E(hn=>{"use strict";Object.defineProperty(hn,"__esModule",{value:!0});hn.resolveSchema=hn.getCompilingSchema=hn.resolveRef=hn.compileSchema=hn.SchemaEnv=void 0;var zn=we(),xte=em(),Wo=Qs(),Vn=Lu(),Sk=je(),Nte=Bu(),El=class{constructor(e){var r;this.refs={},this.dynamicAnchors={};let n;typeof e.schema=="object"&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,Vn.normalizeId)(n?.[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=n?.$async,this.refs={}}};hn.SchemaEnv=El;function ib(t){let e=Tk.call(this,t);if(e)return e;let r=(0,Vn.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new zn.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i}),a;t.$async&&(a=o.scopeValue("Error",{ref:xte.default,code:(0,zn._)`require("ajv/dist/runtime/validation_error").default`}));let l=o.scopeName("validate");t.validateName=l;let c={gen:o,allErrors:this.opts.allErrors,data:Wo.default.data,parentData:Wo.default.parentData,parentDataProperty:Wo.default.parentDataProperty,dataNames:[Wo.default.data],dataPathArr:[zn.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,zn.stringify)(t.schema)}:{ref:t.schema}),validateName:l,ValidationError:a,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:zn.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,zn._)`""`,opts:this.opts,self:this},u;try{this._compilations.add(t),(0,Nte.validateFunctionCode)(c),o.optimize(this.opts.code.optimize);let d=o.toString();u=`${o.scopeRefs(Wo.default.scope)}return ${d}`,this.opts.code.process&&(u=this.opts.code.process(u,t));let f=new Function(`${Wo.default.self}`,`${Wo.default.scope}`,u)(this,this.scope.get());if(this.scope.value(l,{ref:f}),f.errors=null,f.schema=t.schema,f.schemaEnv=t,t.$async&&(f.$async=!0),this.opts.code.source===!0&&(f.source={validateName:l,validateCode:d,scopeValues:o._values}),this.opts.unevaluated){let{props:h,items:m}=c;f.evaluated={props:h instanceof zn.Name?void 0:h,items:m instanceof zn.Name?void 0:m,dynamicProps:h instanceof zn.Name,dynamicItems:m instanceof zn.Name},f.source&&(f.source.evaluated=(0,zn.stringify)(f.evaluated))}return t.validate=f,t}catch(d){throw delete t.validate,delete t.validateName,u&&this.logger.error("Error compiling schema, function code:",u),d}finally{this._compilations.delete(t)}}hn.compileSchema=ib;function Cte(t,e,r){var n;r=(0,Vn.resolveUrl)(this.opts.uriResolver,e,r);let s=t.refs[r];if(s)return s;let i=kte.call(this,t,r);if(i===void 0){let o=(n=t.localRefs)===null||n===void 0?void 0:n[r],{schemaId:a}=this.opts;o&&(i=new El({schema:o,schemaId:a,root:t,baseId:e}))}if(i!==void 0)return t.refs[r]=Ite.call(this,i)}hn.resolveRef=Cte;function Ite(t){return(0,Vn.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:ib.call(this,t)}function Tk(t){for(let e of this._compilations)if(Ate(e,t))return e}hn.getCompilingSchema=Tk;function Ate(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function kte(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||tm.call(this,t,e)}function tm(t,e){let r=this.opts.uriResolver.parse(e),n=(0,Vn._getFullPath)(this.opts.uriResolver,r),s=(0,Vn.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&n===s)return sb.call(this,r,t);let i=(0,Vn.normalizeId)(n),o=this.refs[i]||this.schemas[i];if(typeof o=="string"){let a=tm.call(this,t,o);return typeof a?.schema!="object"?void 0:sb.call(this,r,a)}if(typeof o?.schema=="object"){if(o.validate||ib.call(this,o),i===(0,Vn.normalizeId)(e)){let{schema:a}=o,{schemaId:l}=this.opts,c=a[l];return c&&(s=(0,Vn.resolveUrl)(this.opts.uriResolver,s,c)),new El({schema:a,schemaId:l,root:t,baseId:s})}return sb.call(this,r,o)}}hn.resolveSchema=tm;var Dte=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function sb(t,{baseId:e,schema:r,root:n}){var s;if(((s=t.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(let a of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let l=r[(0,Sk.unescapeFragment)(a)];if(l===void 0)return;r=l;let c=typeof r=="object"&&r[this.opts.schemaId];!Dte.has(a)&&c&&(e=(0,Vn.resolveUrl)(this.opts.uriResolver,e,c))}let i;if(typeof r!="boolean"&&r.$ref&&!(0,Sk.schemaHasRulesButRef)(r,this.RULES)){let a=(0,Vn.resolveUrl)(this.opts.uriResolver,e,r.$ref);i=tm.call(this,n,a)}let{schemaId:o}=this.opts;if(i=i||new El({schema:r,schemaId:o,root:n,baseId:e}),i.schema!==i.root.schema)return i}});var Rk=E((ACe,Mte)=>{Mte.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var ab=E((kCe,xk)=>{"use strict";var jte=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),Ok=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function ob(t){let e="",r=0,n=0;for(n=0;n<t.length;n++)if(r=t[n].charCodeAt(0),r!==48){if(!(r>=48&&r<=57||r>=65&&r<=70||r>=97&&r<=102))return"";e+=t[n];break}for(n+=1;n<t.length;n++){if(r=t[n].charCodeAt(0),!(r>=48&&r<=57||r>=65&&r<=70||r>=97&&r<=102))return"";e+=t[n]}return e}var qte=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function $k(t){return t.length=0,!0}function Lte(t,e,r){if(t.length){let n=ob(t);if(n!=="")e.push(n);else return r.error=!0,!1;t.length=0}return!0}function Fte(t){let e=0,r={error:!1,address:"",zone:""},n=[],s=[],i=!1,o=!1,a=Lte;for(let l=0;l<t.length;l++){let c=t[l];if(!(c==="["||c==="]"))if(c===":"){if(i===!0&&(o=!0),!a(s,n,r))break;if(++e>7){r.error=!0;break}l>0&&t[l-1]===":"&&(i=!0),n.push(":");continue}else if(c==="%"){if(!a(s,n,r))break;a=$k}else{s.push(c);continue}}return s.length&&(a===$k?r.zone=s.join(""):o?n.push(s.join("")):n.push(ob(s))),r.address=n.join(""),r}function Pk(t){if(Ute(t,":")<2)return{host:t,isIPV6:!1};let e=Fte(t);if(e.error)return{host:t,isIPV6:!1};{let r=e.address,n=e.address;return e.zone&&(r+="%"+e.zone,n+="%25"+e.zone),{host:r,isIPV6:!0,escapedHost:n}}}function Ute(t,e){let r=0;for(let n=0;n<t.length;n++)t[n]===e&&r++;return r}function Bte(t){let e=t,r=[],n=-1,s=0;for(;s=e.length;){if(s===1){if(e===".")break;if(e==="/"){r.push("/");break}else{r.push(e);break}}else if(s===2){if(e[0]==="."){if(e[1]===".")break;if(e[1]==="/"){e=e.slice(2);continue}}else if(e[0]==="/"&&(e[1]==="."||e[1]==="/")){r.push("/");break}}else if(s===3&&e==="/.."){r.length!==0&&r.pop(),r.push("/");break}if(e[0]==="."){if(e[1]==="."){if(e[2]==="/"){e=e.slice(3);continue}}else if(e[1]==="/"){e=e.slice(2);continue}}else if(e[0]==="/"&&e[1]==="."){if(e[2]==="/"){e=e.slice(2);continue}else if(e[2]==="."&&e[3]==="/"){e=e.slice(3),r.length!==0&&r.pop();continue}}if((n=e.indexOf("/",1))===-1){r.push(e);break}else r.push(e.slice(0,n)),e=e.slice(n)}return r.join("")}function zte(t,e){let r=e!==!0?escape:unescape;return t.scheme!==void 0&&(t.scheme=r(t.scheme)),t.userinfo!==void 0&&(t.userinfo=r(t.userinfo)),t.host!==void 0&&(t.host=r(t.host)),t.path!==void 0&&(t.path=r(t.path)),t.query!==void 0&&(t.query=r(t.query)),t.fragment!==void 0&&(t.fragment=r(t.fragment)),t}function Vte(t){let e=[];if(t.userinfo!==void 0&&(e.push(t.userinfo),e.push("@")),t.host!==void 0){let r=unescape(t.host);if(!Ok(r)){let n=Pk(r);n.isIPV6===!0?r=`[${n.escapedHost}]`:r=t.host}e.push(r)}return(typeof t.port=="number"||typeof t.port=="string")&&(e.push(":"),e.push(String(t.port))),e.length?e.join(""):void 0}xk.exports={nonSimpleDomain:qte,recomposeAuthority:Vte,normalizeComponentEncoding:zte,removeDotSegments:Bte,isIPv4:Ok,isUUID:jte,normalizeIPv6:Pk,stringArrayToHexStripped:ob}});var kk=E((DCe,Ak)=>{"use strict";var{isUUID:Hte}=ab(),Gte=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,Wte=["http","https","ws","wss","urn","urn:uuid"];function Kte(t){return Wte.indexOf(t)!==-1}function lb(t){return t.secure===!0?!0:t.secure===!1?!1:t.scheme?t.scheme.length===3&&(t.scheme[0]==="w"||t.scheme[0]==="W")&&(t.scheme[1]==="s"||t.scheme[1]==="S")&&(t.scheme[2]==="s"||t.scheme[2]==="S"):!1}function Nk(t){return t.host||(t.error=t.error||"HTTP URIs must have a host."),t}function Ck(t){let e=String(t.scheme).toLowerCase()==="https";return(t.port===(e?443:80)||t.port==="")&&(t.port=void 0),t.path||(t.path="/"),t}function Jte(t){return t.secure=lb(t),t.resourceName=(t.path||"/")+(t.query?"?"+t.query:""),t.path=void 0,t.query=void 0,t}function Yte(t){if((t.port===(lb(t)?443:80)||t.port==="")&&(t.port=void 0),typeof t.secure=="boolean"&&(t.scheme=t.secure?"wss":"ws",t.secure=void 0),t.resourceName){let[e,r]=t.resourceName.split("?");t.path=e&&e!=="/"?e:void 0,t.query=r,t.resourceName=void 0}return t.fragment=void 0,t}function Xte(t,e){if(!t.path)return t.error="URN can not be parsed",t;let r=t.path.match(Gte);if(r){let n=e.scheme||t.scheme||"urn";t.nid=r[1].toLowerCase(),t.nss=r[2];let s=`${n}:${e.nid||t.nid}`,i=cb(s);t.path=void 0,i&&(t=i.parse(t,e))}else t.error=t.error||"URN can not be parsed.";return t}function Qte(t,e){if(t.nid===void 0)throw new Error("URN without nid cannot be serialized");let r=e.scheme||t.scheme||"urn",n=t.nid.toLowerCase(),s=`${r}:${e.nid||n}`,i=cb(s);i&&(t=i.serialize(t,e));let o=t,a=t.nss;return o.path=`${n||e.nid}:${a}`,e.skipEscape=!0,o}function Zte(t,e){let r=t;return r.uuid=r.nss,r.nss=void 0,!e.tolerant&&(!r.uuid||!Hte(r.uuid))&&(r.error=r.error||"UUID is not valid."),r}function ere(t){let e=t;return e.nss=(t.uuid||"").toLowerCase(),e}var Ik={scheme:"http",domainHost:!0,parse:Nk,serialize:Ck},tre={scheme:"https",domainHost:Ik.domainHost,parse:Nk,serialize:Ck},nm={scheme:"ws",domainHost:!0,parse:Jte,serialize:Yte},rre={scheme:"wss",domainHost:nm.domainHost,parse:nm.parse,serialize:nm.serialize},nre={scheme:"urn",parse:Xte,serialize:Qte,skipNormalize:!0},sre={scheme:"urn:uuid",parse:Zte,serialize:ere,skipNormalize:!0},sm={http:Ik,https:tre,ws:nm,wss:rre,urn:nre,"urn:uuid":sre};Object.setPrototypeOf(sm,null);function cb(t){return t&&(sm[t]||sm[t.toLowerCase()])||void 0}Ak.exports={wsIsSecure:lb,SCHEMES:sm,isValidSchemeName:Kte,getSchemeHandler:cb}});var Sl=E((MCe,om)=>{"use strict";var{normalizeIPv6:ire,removeDotSegments:Vu,recomposeAuthority:ore,normalizeComponentEncoding:im,isIPv4:are,nonSimpleDomain:lre}=ab(),{SCHEMES:cre,getSchemeHandler:Dk}=kk();function ure(t,e){return typeof t=="string"?t=ws(ti(t,e),e):typeof t=="object"&&(t=ti(ws(t,e),e)),t}function fre(t,e,r){let n=r?Object.assign({scheme:"null"},r):{scheme:"null"},s=Mk(ti(t,n),ti(e,n),n,!0);return n.skipEscape=!0,ws(s,n)}function Mk(t,e,r,n){let s={};return n||(t=ti(ws(t,r),r),e=ti(ws(e,r),r)),r=r||{},!r.tolerant&&e.scheme?(s.scheme=e.scheme,s.userinfo=e.userinfo,s.host=e.host,s.port=e.port,s.path=Vu(e.path||""),s.query=e.query):(e.userinfo!==void 0||e.host!==void 0||e.port!==void 0?(s.userinfo=e.userinfo,s.host=e.host,s.port=e.port,s.path=Vu(e.path||""),s.query=e.query):(e.path?(e.path[0]==="/"?s.path=Vu(e.path):((t.userinfo!==void 0||t.host!==void 0||t.port!==void 0)&&!t.path?s.path="/"+e.path:t.path?s.path=t.path.slice(0,t.path.lastIndexOf("/")+1)+e.path:s.path=e.path,s.path=Vu(s.path)),s.query=e.query):(s.path=t.path,e.query!==void 0?s.query=e.query:s.query=t.query),s.userinfo=t.userinfo,s.host=t.host,s.port=t.port),s.scheme=t.scheme),s.fragment=e.fragment,s}function dre(t,e,r){return typeof t=="string"?(t=unescape(t),t=ws(im(ti(t,r),!0),{...r,skipEscape:!0})):typeof t=="object"&&(t=ws(im(t,!0),{...r,skipEscape:!0})),typeof e=="string"?(e=unescape(e),e=ws(im(ti(e,r),!0),{...r,skipEscape:!0})):typeof e=="object"&&(e=ws(im(e,!0),{...r,skipEscape:!0})),t.toLowerCase()===e.toLowerCase()}function ws(t,e){let r={host:t.host,scheme:t.scheme,userinfo:t.userinfo,port:t.port,path:t.path,query:t.query,nid:t.nid,nss:t.nss,uuid:t.uuid,fragment:t.fragment,reference:t.reference,resourceName:t.resourceName,secure:t.secure,error:""},n=Object.assign({},e),s=[],i=Dk(n.scheme||r.scheme);i&&i.serialize&&i.serialize(r,n),r.path!==void 0&&(n.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),r.scheme!==void 0&&(r.path=r.path.split("%3A").join(":")))),n.reference!=="suffix"&&r.scheme&&s.push(r.scheme,":");let o=ore(r);if(o!==void 0&&(n.reference!=="suffix"&&s.push("//"),s.push(o),r.path&&r.path[0]!=="/"&&s.push("/")),r.path!==void 0){let a=r.path;!n.absolutePath&&(!i||!i.absolutePath)&&(a=Vu(a)),o===void 0&&a[0]==="/"&&a[1]==="/"&&(a="/%2F"+a.slice(2)),s.push(a)}return r.query!==void 0&&s.push("?",r.query),r.fragment!==void 0&&s.push("#",r.fragment),s.join("")}var hre=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function ti(t,e){let r=Object.assign({},e),n={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},s=!1;r.reference==="suffix"&&(r.scheme?t=r.scheme+":"+t:t="//"+t);let i=t.match(hre);if(i){if(n.scheme=i[1],n.userinfo=i[3],n.host=i[4],n.port=parseInt(i[5],10),n.path=i[6]||"",n.query=i[7],n.fragment=i[8],isNaN(n.port)&&(n.port=i[5]),n.host)if(are(n.host)===!1){let l=ire(n.host);n.host=l.host.toLowerCase(),s=l.isIPV6}else s=!0;n.scheme===void 0&&n.userinfo===void 0&&n.host===void 0&&n.port===void 0&&n.query===void 0&&!n.path?n.reference="same-document":n.scheme===void 0?n.reference="relative":n.fragment===void 0?n.reference="absolute":n.reference="uri",r.reference&&r.reference!=="suffix"&&r.reference!==n.reference&&(n.error=n.error||"URI is not a "+r.reference+" reference.");let o=Dk(r.scheme||n.scheme);if(!r.unicodeSupport&&(!o||!o.unicodeSupport)&&n.host&&(r.domainHost||o&&o.domainHost)&&s===!1&&lre(n.host))try{n.host=URL.domainToASCII(n.host.toLowerCase())}catch(a){n.error=n.error||"Host's domain name can not be converted to ASCII: "+a}(!o||o&&!o.skipNormalize)&&(t.indexOf("%")!==-1&&(n.scheme!==void 0&&(n.scheme=unescape(n.scheme)),n.host!==void 0&&(n.host=unescape(n.host))),n.path&&(n.path=escape(unescape(n.path))),n.fragment&&(n.fragment=encodeURI(decodeURIComponent(n.fragment)))),o&&o.parse&&o.parse(n,r)}else n.error=n.error||"URI can not be parsed.";return n}var ub={SCHEMES:cre,normalize:ure,resolve:fre,resolveComponent:Mk,equal:dre,serialize:ws,parse:ti};om.exports=ub;om.exports.default=ub;om.exports.fastUri=ub});var qk=E(fb=>{"use strict";Object.defineProperty(fb,"__esModule",{value:!0});var jk=Sl();jk.code='require("ajv/dist/runtime/uri").default';fb.default=jk});var Gk=E(Ht=>{"use strict";Object.defineProperty(Ht,"__esModule",{value:!0});Ht.CodeGen=Ht.Name=Ht.nil=Ht.stringify=Ht.str=Ht._=Ht.KeywordCxt=void 0;var pre=Bu();Object.defineProperty(Ht,"KeywordCxt",{enumerable:!0,get:function(){return pre.KeywordCxt}});var Tl=we();Object.defineProperty(Ht,"_",{enumerable:!0,get:function(){return Tl._}});Object.defineProperty(Ht,"str",{enumerable:!0,get:function(){return Tl.str}});Object.defineProperty(Ht,"stringify",{enumerable:!0,get:function(){return Tl.stringify}});Object.defineProperty(Ht,"nil",{enumerable:!0,get:function(){return Tl.nil}});Object.defineProperty(Ht,"Name",{enumerable:!0,get:function(){return Tl.Name}});Object.defineProperty(Ht,"CodeGen",{enumerable:!0,get:function(){return Tl.CodeGen}});var mre=em(),zk=zu(),gre=Uw(),Hu=rm(),yre=we(),Gu=Lu(),am=qu(),hb=je(),Lk=Rk(),_re=qk(),Vk=(t,e)=>new RegExp(t,e);Vk.code="new RegExp";var vre=["removeAdditional","useDefaults","coerceTypes"],wre=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),bre={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},Ere={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},Fk=200;function Sre(t){var e,r,n,s,i,o,a,l,c,u,d,p,f,h,m,y,g,w,_,v,S,$,T,O,R;let P=t.strict,A=(e=t.code)===null||e===void 0?void 0:e.optimize,N=A===!0||A===void 0?1:A||0,C=(n=(r=t.code)===null||r===void 0?void 0:r.regExp)!==null&&n!==void 0?n:Vk,z=(s=t.uriResolver)!==null&&s!==void 0?s:_re.default;return{strictSchema:(o=(i=t.strictSchema)!==null&&i!==void 0?i:P)!==null&&o!==void 0?o:!0,strictNumbers:(l=(a=t.strictNumbers)!==null&&a!==void 0?a:P)!==null&&l!==void 0?l:!0,strictTypes:(u=(c=t.strictTypes)!==null&&c!==void 0?c:P)!==null&&u!==void 0?u:"log",strictTuples:(p=(d=t.strictTuples)!==null&&d!==void 0?d:P)!==null&&p!==void 0?p:"log",strictRequired:(h=(f=t.strictRequired)!==null&&f!==void 0?f:P)!==null&&h!==void 0?h:!1,code:t.code?{...t.code,optimize:N,regExp:C}:{optimize:N,regExp:C},loopRequired:(m=t.loopRequired)!==null&&m!==void 0?m:Fk,loopEnum:(y=t.loopEnum)!==null&&y!==void 0?y:Fk,meta:(g=t.meta)!==null&&g!==void 0?g:!0,messages:(w=t.messages)!==null&&w!==void 0?w:!0,inlineRefs:(_=t.inlineRefs)!==null&&_!==void 0?_:!0,schemaId:(v=t.schemaId)!==null&&v!==void 0?v:"$id",addUsedSchema:(S=t.addUsedSchema)!==null&&S!==void 0?S:!0,validateSchema:($=t.validateSchema)!==null&&$!==void 0?$:!0,validateFormats:(T=t.validateFormats)!==null&&T!==void 0?T:!0,unicodeRegExp:(O=t.unicodeRegExp)!==null&&O!==void 0?O:!0,int32range:(R=t.int32range)!==null&&R!==void 0?R:!0,uriResolver:z}}var Wu=class{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...Sre(e)};let{es5:r,lines:n}=this.opts.code;this.scope=new yre.ValueScope({scope:{},prefixes:wre,es5:r,lines:n}),this.logger=xre(e.logger);let s=e.validateFormats;e.validateFormats=!1,this.RULES=(0,gre.getRules)(),Uk.call(this,bre,e,"NOT SUPPORTED"),Uk.call(this,Ere,e,"DEPRECATED","warn"),this._metaOpts=Ore.call(this),e.formats&&Rre.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&$re.call(this,e.keywords),typeof e.meta=="object"&&this.addMetaSchema(e.meta),Tre.call(this),e.validateFormats=s}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:r,schemaId:n}=this.opts,s=Lk;n==="id"&&(s={...Lk},s.id=s.$id,delete s.$id),r&&e&&this.addMetaSchema(s,s[n],!1)}defaultMeta(){let{meta:e,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof e=="object"?e[r]||e:void 0}validate(e,r){let n;if(typeof e=="string"){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);let s=n(r);return"$async"in n||(this.errors=n.errors),s}compile(e,r){let n=this._addSchema(e,r);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:n}=this.opts;return s.call(this,e,r);async function s(u,d){await i.call(this,u.$schema);let p=this._addSchema(u,d);return p.validate||o.call(this,p)}async function i(u){u&&!this.getSchema(u)&&await s.call(this,{$ref:u},!0)}async function o(u){try{return this._compileSchemaEnv(u)}catch(d){if(!(d instanceof zk.default))throw d;return a.call(this,d),await l.call(this,d.missingSchema),o.call(this,u)}}function a({missingSchema:u,missingRef:d}){if(this.refs[u])throw new Error(`AnySchema ${u} is loaded but ${d} cannot be resolved`)}async function l(u){let d=await c.call(this,u);this.refs[u]||await i.call(this,d.$schema),this.refs[u]||this.addSchema(d,u,r)}async function c(u){let d=this._loading[u];if(d)return d;try{return await(this._loading[u]=n(u))}finally{delete this._loading[u]}}}addSchema(e,r,n,s=this.opts.validateSchema){if(Array.isArray(e)){for(let o of e)this.addSchema(o,void 0,n,s);return this}let i;if(typeof e=="object"){let{schemaId:o}=this.opts;if(i=e[o],i!==void 0&&typeof i!="string")throw new Error(`schema ${o} must be string`)}return r=(0,Gu.normalizeId)(r||i),this._checkUnique(r),this.schemas[r]=this._addSchema(e,n,r,s,!0),this}addMetaSchema(e,r,n=this.opts.validateSchema){return this.addSchema(e,r,!0,n),this}validateSchema(e,r){if(typeof e=="boolean")return!0;let n;if(n=e.$schema,n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let s=this.validate(n,e);if(!s&&r){let i="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(i);else throw new Error(i)}return s}getSchema(e){let r;for(;typeof(r=Bk.call(this,e))=="string";)e=r;if(r===void 0){let{schemaId:n}=this.opts,s=new Hu.SchemaEnv({schema:{},schemaId:n});if(r=Hu.resolveSchema.call(this,s,e),!r)return;this.refs[e]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=Bk.call(this,e);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{let r=e;this._cache.delete(r);let n=e[this.opts.schemaId];return n&&(n=(0,Gu.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let r of e)this.addKeyword(r);return this}addKeyword(e,r){let n;if(typeof e=="string")n=e,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=n);else if(typeof e=="object"&&r===void 0){if(r=e,n=r.keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(Cre.call(this,n,r),!r)return(0,hb.eachItem)(n,i=>db.call(this,i)),this;Are.call(this,r);let s={...r,type:(0,am.getJSONTypes)(r.type),schemaType:(0,am.getJSONTypes)(r.schemaType)};return(0,hb.eachItem)(n,s.type.length===0?i=>db.call(this,i,s):i=>s.type.forEach(o=>db.call(this,i,s,o))),this}getKeyword(e){let r=this.RULES.all[e];return typeof r=="object"?r.definition:!!r}removeKeyword(e){let{RULES:r}=this;delete r.keywords[e],delete r.all[e];for(let n of r.rules){let s=n.rules.findIndex(i=>i.keyword===e);s>=0&&n.rules.splice(s,1)}return this}addFormat(e,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[e]=r,this}errorsText(e=this.errors,{separator:r=", ",dataVar:n="data"}={}){return!e||e.length===0?"No errors":e.map(s=>`${n}${s.instancePath} ${s.message}`).reduce((s,i)=>s+r+i)}$dataMetaSchema(e,r){let n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(let s of r){let i=s.split("/").slice(1),o=e;for(let a of i)o=o[a];for(let a in n){let l=n[a];if(typeof l!="object")continue;let{$data:c}=l.definition,u=o[a];c&&u&&(o[a]=Hk(u))}}return e}_removeAllSchemas(e,r){for(let n in e){let s=e[n];(!r||r.test(n))&&(typeof s=="string"?delete e[n]:s&&!s.meta&&(this._cache.delete(s.schema),delete e[n]))}}_addSchema(e,r,n,s=this.opts.validateSchema,i=this.opts.addUsedSchema){let o,{schemaId:a}=this.opts;if(typeof e=="object")o=e[a];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof e!="boolean")throw new Error("schema must be object or boolean")}let l=this._cache.get(e);if(l!==void 0)return l;n=(0,Gu.normalizeId)(o||n);let c=Gu.getSchemaRefs.call(this,e,n);return l=new Hu.SchemaEnv({schema:e,schemaId:a,meta:r,baseId:n,localRefs:c}),this._cache.set(l.schema,l),i&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=l),s&&this.validateSchema(e,!0),l}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):Hu.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let r=this.opts;this.opts=this._metaOpts;try{Hu.compileSchema.call(this,e)}finally{this.opts=r}}};Wu.ValidationError=mre.default;Wu.MissingRefError=zk.default;Ht.default=Wu;function Uk(t,e,r,n="error"){for(let s in t){let i=s;i in e&&this.logger[n](`${r}: option ${s}. ${t[i]}`)}}function Bk(t){return t=(0,Gu.normalizeId)(t),this.schemas[t]||this.refs[t]}function Tre(){let t=this.opts.schemas;if(t)if(Array.isArray(t))this.addSchema(t);else for(let e in t)this.addSchema(t[e],e)}function Rre(){for(let t in this.opts.formats){let e=this.opts.formats[t];e&&this.addFormat(t,e)}}function $re(t){if(Array.isArray(t)){this.addVocabulary(t);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let e in t){let r=t[e];r.keyword||(r.keyword=e),this.addKeyword(r)}}function Ore(){let t={...this.opts};for(let e of vre)delete t[e];return t}var Pre={log(){},warn(){},error(){}};function xre(t){if(t===!1)return Pre;if(t===void 0)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}var Nre=/^[a-z_$][a-z0-9_$:-]*$/i;function Cre(t,e){let{RULES:r}=this;if((0,hb.eachItem)(t,n=>{if(r.keywords[n])throw new Error(`Keyword ${n} is already defined`);if(!Nre.test(n))throw new Error(`Keyword ${n} has invalid name`)}),!!e&&e.$data&&!("code"in e||"validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function db(t,e,r){var n;let s=e?.post;if(r&&s)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:i}=this,o=s?i.post:i.rules.find(({type:l})=>l===r);if(o||(o={type:r,rules:[]},i.rules.push(o)),i.keywords[t]=!0,!e)return;let a={keyword:t,definition:{...e,type:(0,am.getJSONTypes)(e.type),schemaType:(0,am.getJSONTypes)(e.schemaType)}};e.before?Ire.call(this,o,a,e.before):o.rules.push(a),i.all[t]=a,(n=e.implements)===null||n===void 0||n.forEach(l=>this.addKeyword(l))}function Ire(t,e,r){let n=t.rules.findIndex(s=>s.keyword===r);n>=0?t.rules.splice(n,0,e):(t.rules.push(e),this.logger.warn(`rule ${r} is not defined`))}function Are(t){let{metaSchema:e}=t;e!==void 0&&(t.$data&&this.opts.$data&&(e=Hk(e)),t.validateSchema=this.compile(e,!0))}var kre={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Hk(t){return{anyOf:[t,kre]}}});var Wk=E(pb=>{"use strict";Object.defineProperty(pb,"__esModule",{value:!0});var Dre={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};pb.default=Dre});var Xk=E(Ko=>{"use strict";Object.defineProperty(Ko,"__esModule",{value:!0});Ko.callRef=Ko.getValidate=void 0;var Mre=zu(),Kk=dn(),Fr=we(),Rl=Qs(),Jk=rm(),lm=je(),jre={keyword:"$ref",schemaType:"string",code(t){let{gen:e,schema:r,it:n}=t,{baseId:s,schemaEnv:i,validateName:o,opts:a,self:l}=n,{root:c}=i;if((r==="#"||r==="#/")&&s===c.baseId)return d();let u=Jk.resolveRef.call(l,c,s,r);if(u===void 0)throw new Mre.default(n.opts.uriResolver,s,r);if(u instanceof Jk.SchemaEnv)return p(u);return f(u);function d(){if(i===c)return cm(t,o,i,i.$async);let h=e.scopeValue("root",{ref:c});return cm(t,(0,Fr._)`${h}.validate`,c,c.$async)}function p(h){let m=Yk(t,h);cm(t,m,h,h.$async)}function f(h){let m=e.scopeValue("schema",a.code.source===!0?{ref:h,code:(0,Fr.stringify)(h)}:{ref:h}),y=e.name("valid"),g=t.subschema({schema:h,dataTypes:[],schemaPath:Fr.nil,topSchemaRef:m,errSchemaPath:r},y);t.mergeEvaluated(g),t.ok(y)}}};function Yk(t,e){let{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,Fr._)`${r.scopeValue("wrapper",{ref:e})}.validate`}Ko.getValidate=Yk;function cm(t,e,r,n){let{gen:s,it:i}=t,{allErrors:o,schemaEnv:a,opts:l}=i,c=l.passContext?Rl.default.this:Fr.nil;n?u():d();function u(){if(!a.$async)throw new Error("async schema referenced by sync schema");let h=s.let("valid");s.try(()=>{s.code((0,Fr._)`await ${(0,Kk.callValidateCode)(t,e,c)}`),f(e),o||s.assign(h,!0)},m=>{s.if((0,Fr._)`!(${m} instanceof ${i.ValidationError})`,()=>s.throw(m)),p(m),o||s.assign(h,!1)}),t.ok(h)}function d(){t.result((0,Kk.callValidateCode)(t,e,c),()=>f(e),()=>p(e))}function p(h){let m=(0,Fr._)`${h}.errors`;s.assign(Rl.default.vErrors,(0,Fr._)`${Rl.default.vErrors} === null ? ${m} : ${Rl.default.vErrors}.concat(${m})`),s.assign(Rl.default.errors,(0,Fr._)`${Rl.default.vErrors}.length`)}function f(h){var m;if(!i.opts.unevaluated)return;let y=(m=r?.validate)===null||m===void 0?void 0:m.evaluated;if(i.props!==!0)if(y&&!y.dynamicProps)y.props!==void 0&&(i.props=lm.mergeEvaluated.props(s,y.props,i.props));else{let g=s.var("props",(0,Fr._)`${h}.evaluated.props`);i.props=lm.mergeEvaluated.props(s,g,i.props,Fr.Name)}if(i.items!==!0)if(y&&!y.dynamicItems)y.items!==void 0&&(i.items=lm.mergeEvaluated.items(s,y.items,i.items));else{let g=s.var("items",(0,Fr._)`${h}.evaluated.items`);i.items=lm.mergeEvaluated.items(s,g,i.items,Fr.Name)}}}Ko.callRef=cm;Ko.default=jre});var Qk=E(mb=>{"use strict";Object.defineProperty(mb,"__esModule",{value:!0});var qre=Wk(),Lre=Xk(),Fre=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",qre.default,Lre.default];mb.default=Fre});var Zk=E(gb=>{"use strict";Object.defineProperty(gb,"__esModule",{value:!0});var um=we(),Bi=um.operators,fm={maximum:{okStr:"<=",ok:Bi.LTE,fail:Bi.GT},minimum:{okStr:">=",ok:Bi.GTE,fail:Bi.LT},exclusiveMaximum:{okStr:"<",ok:Bi.LT,fail:Bi.GTE},exclusiveMinimum:{okStr:">",ok:Bi.GT,fail:Bi.LTE}},Ure={message:({keyword:t,schemaCode:e})=>(0,um.str)`must be ${fm[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,um._)`{comparison: ${fm[t].okStr}, limit: ${e}}`},Bre={keyword:Object.keys(fm),type:"number",schemaType:"number",$data:!0,error:Ure,code(t){let{keyword:e,data:r,schemaCode:n}=t;t.fail$data((0,um._)`${r} ${fm[e].fail} ${n} || isNaN(${r})`)}};gb.default=Bre});var eD=E(yb=>{"use strict";Object.defineProperty(yb,"__esModule",{value:!0});var Ku=we(),zre={message:({schemaCode:t})=>(0,Ku.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,Ku._)`{multipleOf: ${t}}`},Vre={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:zre,code(t){let{gen:e,data:r,schemaCode:n,it:s}=t,i=s.opts.multipleOfPrecision,o=e.let("res"),a=i?(0,Ku._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${i}`:(0,Ku._)`${o} !== parseInt(${o})`;t.fail$data((0,Ku._)`(${n} === 0 || (${o} = ${r}/${n}, ${a}))`)}};yb.default=Vre});var rD=E(_b=>{"use strict";Object.defineProperty(_b,"__esModule",{value:!0});function tD(t){let e=t.length,r=0,n=0,s;for(;n<e;)r++,s=t.charCodeAt(n++),s>=55296&&s<=56319&&n<e&&(s=t.charCodeAt(n),(s&64512)===56320&&n++);return r}_b.default=tD;tD.code='require("ajv/dist/runtime/ucs2length").default'});var nD=E(vb=>{"use strict";Object.defineProperty(vb,"__esModule",{value:!0});var Jo=we(),Hre=je(),Gre=rD(),Wre={message({keyword:t,schemaCode:e}){let r=t==="maxLength"?"more":"fewer";return(0,Jo.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,Jo._)`{limit: ${t}}`},Kre={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Wre,code(t){let{keyword:e,data:r,schemaCode:n,it:s}=t,i=e==="maxLength"?Jo.operators.GT:Jo.operators.LT,o=s.opts.unicode===!1?(0,Jo._)`${r}.length`:(0,Jo._)`${(0,Hre.useFunc)(t.gen,Gre.default)}(${r})`;t.fail$data((0,Jo._)`${o} ${i} ${n}`)}};vb.default=Kre});var sD=E(wb=>{"use strict";Object.defineProperty(wb,"__esModule",{value:!0});var Jre=dn(),dm=we(),Yre={message:({schemaCode:t})=>(0,dm.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,dm._)`{pattern: ${t}}`},Xre={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Yre,code(t){let{data:e,$data:r,schema:n,schemaCode:s,it:i}=t,o=i.opts.unicodeRegExp?"u":"",a=r?(0,dm._)`(new RegExp(${s}, ${o}))`:(0,Jre.usePattern)(t,n);t.fail$data((0,dm._)`!${a}.test(${e})`)}};wb.default=Xre});var iD=E(bb=>{"use strict";Object.defineProperty(bb,"__esModule",{value:!0});var Ju=we(),Qre={message({keyword:t,schemaCode:e}){let r=t==="maxProperties"?"more":"fewer";return(0,Ju.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,Ju._)`{limit: ${t}}`},Zre={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Qre,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxProperties"?Ju.operators.GT:Ju.operators.LT;t.fail$data((0,Ju._)`Object.keys(${r}).length ${s} ${n}`)}};bb.default=Zre});var oD=E(Eb=>{"use strict";Object.defineProperty(Eb,"__esModule",{value:!0});var Yu=dn(),Xu=we(),ene=je(),tne={message:({params:{missingProperty:t}})=>(0,Xu.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,Xu._)`{missingProperty: ${t}}`},rne={keyword:"required",type:"object",schemaType:"array",$data:!0,error:tne,code(t){let{gen:e,schema:r,schemaCode:n,data:s,$data:i,it:o}=t,{opts:a}=o;if(!i&&r.length===0)return;let l=r.length>=a.loopRequired;if(o.allErrors?c():u(),a.strictRequired){let f=t.parentSchema.properties,{definedProperties:h}=t.it;for(let m of r)if(f?.[m]===void 0&&!h.has(m)){let y=o.schemaEnv.baseId+o.errSchemaPath,g=`required property "${m}" is not defined at "${y}" (strictRequired)`;(0,ene.checkStrictMode)(o,g,o.opts.strictRequired)}}function c(){if(l||i)t.block$data(Xu.nil,d);else for(let f of r)(0,Yu.checkReportMissingProp)(t,f)}function u(){let f=e.let("missing");if(l||i){let h=e.let("valid",!0);t.block$data(h,()=>p(f,h)),t.ok(h)}else e.if((0,Yu.checkMissingProp)(t,r,f)),(0,Yu.reportMissingProp)(t,f),e.else()}function d(){e.forOf("prop",n,f=>{t.setParams({missingProperty:f}),e.if((0,Yu.noPropertyInData)(e,s,f,a.ownProperties),()=>t.error())})}function p(f,h){t.setParams({missingProperty:f}),e.forOf(f,n,()=>{e.assign(h,(0,Yu.propertyInData)(e,s,f,a.ownProperties)),e.if((0,Xu.not)(h),()=>{t.error(),e.break()})},Xu.nil)}}};Eb.default=rne});var aD=E(Sb=>{"use strict";Object.defineProperty(Sb,"__esModule",{value:!0});var Qu=we(),nne={message({keyword:t,schemaCode:e}){let r=t==="maxItems"?"more":"fewer";return(0,Qu.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,Qu._)`{limit: ${t}}`},sne={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:nne,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxItems"?Qu.operators.GT:Qu.operators.LT;t.fail$data((0,Qu._)`${r}.length ${s} ${n}`)}};Sb.default=sne});var Zu=E(Tb=>{"use strict";Object.defineProperty(Tb,"__esModule",{value:!0});var lD=Zs();lD.code='require("ajv/dist/runtime/equal").default';Tb.default=lD});var cD=E($b=>{"use strict";Object.defineProperty($b,"__esModule",{value:!0});var Rb=qu(),Gt=we(),ine=je(),one=Zu(),ane={message:({params:{i:t,j:e}})=>(0,Gt.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,Gt._)`{i: ${t}, j: ${e}}`},lne={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:ane,code(t){let{gen:e,data:r,$data:n,schema:s,parentSchema:i,schemaCode:o,it:a}=t;if(!n&&!s)return;let l=e.let("valid"),c=i.items?(0,Rb.getSchemaTypes)(i.items):[];t.block$data(l,u,(0,Gt._)`${o} === false`),t.ok(l);function u(){let h=e.let("i",(0,Gt._)`${r}.length`),m=e.let("j");t.setParams({i:h,j:m}),e.assign(l,!0),e.if((0,Gt._)`${h} > 1`,()=>(d()?p:f)(h,m))}function d(){return c.length>0&&!c.some(h=>h==="object"||h==="array")}function p(h,m){let y=e.name("item"),g=(0,Rb.checkDataTypes)(c,y,a.opts.strictNumbers,Rb.DataType.Wrong),w=e.const("indices",(0,Gt._)`{}`);e.for((0,Gt._)`;${h}--;`,()=>{e.let(y,(0,Gt._)`${r}[${h}]`),e.if(g,(0,Gt._)`continue`),c.length>1&&e.if((0,Gt._)`typeof ${y} == "string"`,(0,Gt._)`${y} += "_"`),e.if((0,Gt._)`typeof ${w}[${y}] == "number"`,()=>{e.assign(m,(0,Gt._)`${w}[${y}]`),t.error(),e.assign(l,!1).break()}).code((0,Gt._)`${w}[${y}] = ${h}`)})}function f(h,m){let y=(0,ine.useFunc)(e,one.default),g=e.name("outer");e.label(g).for((0,Gt._)`;${h}--;`,()=>e.for((0,Gt._)`${m} = ${h}; ${m}--;`,()=>e.if((0,Gt._)`${y}(${r}[${h}], ${r}[${m}])`,()=>{t.error(),e.assign(l,!1).break(g)})))}}};$b.default=lne});var uD=E(Pb=>{"use strict";Object.defineProperty(Pb,"__esModule",{value:!0});var Ob=we(),cne=je(),une=Zu(),fne={message:"must be equal to constant",params:({schemaCode:t})=>(0,Ob._)`{allowedValue: ${t}}`},dne={keyword:"const",$data:!0,error:fne,code(t){let{gen:e,data:r,$data:n,schemaCode:s,schema:i}=t;n||i&&typeof i=="object"?t.fail$data((0,Ob._)`!${(0,cne.useFunc)(e,une.default)}(${r}, ${s})`):t.fail((0,Ob._)`${i} !== ${r}`)}};Pb.default=dne});var fD=E(xb=>{"use strict";Object.defineProperty(xb,"__esModule",{value:!0});var ef=we(),hne=je(),pne=Zu(),mne={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,ef._)`{allowedValues: ${t}}`},gne={keyword:"enum",schemaType:"array",$data:!0,error:mne,code(t){let{gen:e,data:r,$data:n,schema:s,schemaCode:i,it:o}=t;if(!n&&s.length===0)throw new Error("enum must have non-empty array");let a=s.length>=o.opts.loopEnum,l,c=()=>l??(l=(0,hne.useFunc)(e,pne.default)),u;if(a||n)u=e.let("valid"),t.block$data(u,d);else{if(!Array.isArray(s))throw new Error("ajv implementation error");let f=e.const("vSchema",i);u=(0,ef.or)(...s.map((h,m)=>p(f,m)))}t.pass(u);function d(){e.assign(u,!1),e.forOf("v",i,f=>e.if((0,ef._)`${c()}(${r}, ${f})`,()=>e.assign(u,!0).break()))}function p(f,h){let m=s[h];return typeof m=="object"&&m!==null?(0,ef._)`${c()}(${r}, ${f}[${h}])`:(0,ef._)`${r} === ${m}`}}};xb.default=gne});var dD=E(Nb=>{"use strict";Object.defineProperty(Nb,"__esModule",{value:!0});var yne=Zk(),_ne=eD(),vne=nD(),wne=sD(),bne=iD(),Ene=oD(),Sne=aD(),Tne=cD(),Rne=uD(),$ne=fD(),One=[yne.default,_ne.default,vne.default,wne.default,bne.default,Ene.default,Sne.default,Tne.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},Rne.default,$ne.default];Nb.default=One});var Ib=E(tf=>{"use strict";Object.defineProperty(tf,"__esModule",{value:!0});tf.validateAdditionalItems=void 0;var Yo=we(),Cb=je(),Pne={message:({params:{len:t}})=>(0,Yo.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,Yo._)`{limit: ${t}}`},xne={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:Pne,code(t){let{parentSchema:e,it:r}=t,{items:n}=e;if(!Array.isArray(n)){(0,Cb.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}hD(t,n)}};function hD(t,e){let{gen:r,schema:n,data:s,keyword:i,it:o}=t;o.items=!0;let a=r.const("len",(0,Yo._)`${s}.length`);if(n===!1)t.setParams({len:e.length}),t.pass((0,Yo._)`${a} <= ${e.length}`);else if(typeof n=="object"&&!(0,Cb.alwaysValidSchema)(o,n)){let c=r.var("valid",(0,Yo._)`${a} <= ${e.length}`);r.if((0,Yo.not)(c),()=>l(c)),t.ok(c)}function l(c){r.forRange("i",e.length,a,u=>{t.subschema({keyword:i,dataProp:u,dataPropType:Cb.Type.Num},c),o.allErrors||r.if((0,Yo.not)(c),()=>r.break())})}}tf.validateAdditionalItems=hD;tf.default=xne});var Ab=E(rf=>{"use strict";Object.defineProperty(rf,"__esModule",{value:!0});rf.validateTuple=void 0;var pD=we(),hm=je(),Nne=dn(),Cne={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){let{schema:e,it:r}=t;if(Array.isArray(e))return mD(t,"additionalItems",e);r.items=!0,!(0,hm.alwaysValidSchema)(r,e)&&t.ok((0,Nne.validateArray)(t))}};function mD(t,e,r=t.schema){let{gen:n,parentSchema:s,data:i,keyword:o,it:a}=t;u(s),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=hm.mergeEvaluated.items(n,r.length,a.items));let l=n.name("valid"),c=n.const("len",(0,pD._)`${i}.length`);r.forEach((d,p)=>{(0,hm.alwaysValidSchema)(a,d)||(n.if((0,pD._)`${c} > ${p}`,()=>t.subschema({keyword:o,schemaProp:p,dataProp:p},l)),t.ok(l))});function u(d){let{opts:p,errSchemaPath:f}=a,h=r.length,m=h===d.minItems&&(h===d.maxItems||d[e]===!1);if(p.strictTuples&&!m){let y=`"${o}" is ${h}-tuple, but minItems or maxItems/${e} are not specified or different at path "${f}"`;(0,hm.checkStrictMode)(a,y,p.strictTuples)}}}rf.validateTuple=mD;rf.default=Cne});var gD=E(kb=>{"use strict";Object.defineProperty(kb,"__esModule",{value:!0});var Ine=Ab(),Ane={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,Ine.validateTuple)(t,"items")};kb.default=Ane});var _D=E(Db=>{"use strict";Object.defineProperty(Db,"__esModule",{value:!0});var yD=we(),kne=je(),Dne=dn(),Mne=Ib(),jne={message:({params:{len:t}})=>(0,yD.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,yD._)`{limit: ${t}}`},qne={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:jne,code(t){let{schema:e,parentSchema:r,it:n}=t,{prefixItems:s}=r;n.items=!0,!(0,kne.alwaysValidSchema)(n,e)&&(s?(0,Mne.validateAdditionalItems)(t,s):t.ok((0,Dne.validateArray)(t)))}};Db.default=qne});var vD=E(Mb=>{"use strict";Object.defineProperty(Mb,"__esModule",{value:!0});var pn=we(),pm=je(),Lne={message:({params:{min:t,max:e}})=>e===void 0?(0,pn.str)`must contain at least ${t} valid item(s)`:(0,pn.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,pn._)`{minContains: ${t}}`:(0,pn._)`{minContains: ${t}, maxContains: ${e}}`},Fne={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Lne,code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:i}=t,o,a,{minContains:l,maxContains:c}=n;i.opts.next?(o=l===void 0?1:l,a=c):o=1;let u=e.const("len",(0,pn._)`${s}.length`);if(t.setParams({min:o,max:a}),a===void 0&&o===0){(0,pm.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,pm.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,pm.alwaysValidSchema)(i,r)){let m=(0,pn._)`${u} >= ${o}`;a!==void 0&&(m=(0,pn._)`${m} && ${u} <= ${a}`),t.pass(m);return}i.items=!0;let d=e.name("valid");a===void 0&&o===1?f(d,()=>e.if(d,()=>e.break())):o===0?(e.let(d,!0),a!==void 0&&e.if((0,pn._)`${s}.length > 0`,p)):(e.let(d,!1),p()),t.result(d,()=>t.reset());function p(){let m=e.name("_valid"),y=e.let("count",0);f(m,()=>e.if(m,()=>h(y)))}function f(m,y){e.forRange("i",0,u,g=>{t.subschema({keyword:"contains",dataProp:g,dataPropType:pm.Type.Num,compositeRule:!0},m),y()})}function h(m){e.code((0,pn._)`${m}++`),a===void 0?e.if((0,pn._)`${m} >= ${o}`,()=>e.assign(d,!0).break()):(e.if((0,pn._)`${m} > ${a}`,()=>e.assign(d,!1).break()),o===1?e.assign(d,!0):e.if((0,pn._)`${m} >= ${o}`,()=>e.assign(d,!0)))}}};Mb.default=Fne});var ED=E(bs=>{"use strict";Object.defineProperty(bs,"__esModule",{value:!0});bs.validateSchemaDeps=bs.validatePropertyDeps=bs.error=void 0;var jb=we(),Une=je(),nf=dn();bs.error={message:({params:{property:t,depsCount:e,deps:r}})=>{let n=e===1?"property":"properties";return(0,jb.str)`must have ${n} ${r} when property ${t} is present`},params:({params:{property:t,depsCount:e,deps:r,missingProperty:n}})=>(0,jb._)`{property: ${t},
    missingProperty: ${n},
    depsCount: ${e},
    deps: ${r}}`};var Bne={keyword:"dependencies",type:"object",schemaType:"object",error:bs.error,code(t){let[e,r]=zne(t);wD(t,e),bD(t,r)}};function zne({schema:t}){let e={},r={};for(let n in t){if(n==="__proto__")continue;let s=Array.isArray(t[n])?e:r;s[n]=t[n]}return[e,r]}function wD(t,e=t.schema){let{gen:r,data:n,it:s}=t;if(Object.keys(e).length===0)return;let i=r.let("missing");for(let o in e){let a=e[o];if(a.length===0)continue;let l=(0,nf.propertyInData)(r,n,o,s.opts.ownProperties);t.setParams({property:o,depsCount:a.length,deps:a.join(", ")}),s.allErrors?r.if(l,()=>{for(let c of a)(0,nf.checkReportMissingProp)(t,c)}):(r.if((0,jb._)`${l} && (${(0,nf.checkMissingProp)(t,a,i)})`),(0,nf.reportMissingProp)(t,i),r.else())}}bs.validatePropertyDeps=wD;function bD(t,e=t.schema){let{gen:r,data:n,keyword:s,it:i}=t,o=r.name("valid");for(let a in e)(0,Une.alwaysValidSchema)(i,e[a])||(r.if((0,nf.propertyInData)(r,n,a,i.opts.ownProperties),()=>{let l=t.subschema({keyword:s,schemaProp:a},o);t.mergeValidEvaluated(l,o)},()=>r.var(o,!0)),t.ok(o))}bs.validateSchemaDeps=bD;bs.default=Bne});var TD=E(qb=>{"use strict";Object.defineProperty(qb,"__esModule",{value:!0});var SD=we(),Vne=je(),Hne={message:"property name must be valid",params:({params:t})=>(0,SD._)`{propertyName: ${t.propertyName}}`},Gne={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Hne,code(t){let{gen:e,schema:r,data:n,it:s}=t;if((0,Vne.alwaysValidSchema)(s,r))return;let i=e.name("valid");e.forIn("key",n,o=>{t.setParams({propertyName:o}),t.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},i),e.if((0,SD.not)(i),()=>{t.error(!0),s.allErrors||e.break()})}),t.ok(i)}};qb.default=Gne});var Fb=E(Lb=>{"use strict";Object.defineProperty(Lb,"__esModule",{value:!0});var mm=dn(),Hn=we(),Wne=Qs(),gm=je(),Kne={message:"must NOT have additional properties",params:({params:t})=>(0,Hn._)`{additionalProperty: ${t.additionalProperty}}`},Jne={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Kne,code(t){let{gen:e,schema:r,parentSchema:n,data:s,errsCount:i,it:o}=t;if(!i)throw new Error("ajv implementation error");let{allErrors:a,opts:l}=o;if(o.props=!0,l.removeAdditional!=="all"&&(0,gm.alwaysValidSchema)(o,r))return;let c=(0,mm.allSchemaProperties)(n.properties),u=(0,mm.allSchemaProperties)(n.patternProperties);d(),t.ok((0,Hn._)`${i} === ${Wne.default.errors}`);function d(){e.forIn("key",s,y=>{!c.length&&!u.length?h(y):e.if(p(y),()=>h(y))})}function p(y){let g;if(c.length>8){let w=(0,gm.schemaRefOrVal)(o,n.properties,"properties");g=(0,mm.isOwnProperty)(e,w,y)}else c.length?g=(0,Hn.or)(...c.map(w=>(0,Hn._)`${y} === ${w}`)):g=Hn.nil;return u.length&&(g=(0,Hn.or)(g,...u.map(w=>(0,Hn._)`${(0,mm.usePattern)(t,w)}.test(${y})`))),(0,Hn.not)(g)}function f(y){e.code((0,Hn._)`delete ${s}[${y}]`)}function h(y){if(l.removeAdditional==="all"||l.removeAdditional&&r===!1){f(y);return}if(r===!1){t.setParams({additionalProperty:y}),t.error(),a||e.break();return}if(typeof r=="object"&&!(0,gm.alwaysValidSchema)(o,r)){let g=e.name("valid");l.removeAdditional==="failing"?(m(y,g,!1),e.if((0,Hn.not)(g),()=>{t.reset(),f(y)})):(m(y,g),a||e.if((0,Hn.not)(g),()=>e.break()))}}function m(y,g,w){let _={keyword:"additionalProperties",dataProp:y,dataPropType:gm.Type.Str};w===!1&&Object.assign(_,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(_,g)}}};Lb.default=Jne});var OD=E(Bb=>{"use strict";Object.defineProperty(Bb,"__esModule",{value:!0});var Yne=Bu(),RD=dn(),Ub=je(),$D=Fb(),Xne={keyword:"properties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:i}=t;i.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&$D.default.code(new Yne.KeywordCxt(i,$D.default,"additionalProperties"));let o=(0,RD.allSchemaProperties)(r);for(let d of o)i.definedProperties.add(d);i.opts.unevaluated&&o.length&&i.props!==!0&&(i.props=Ub.mergeEvaluated.props(e,(0,Ub.toHash)(o),i.props));let a=o.filter(d=>!(0,Ub.alwaysValidSchema)(i,r[d]));if(a.length===0)return;let l=e.name("valid");for(let d of a)c(d)?u(d):(e.if((0,RD.propertyInData)(e,s,d,i.opts.ownProperties)),u(d),i.allErrors||e.else().var(l,!0),e.endIf()),t.it.definedProperties.add(d),t.ok(l);function c(d){return i.opts.useDefaults&&!i.compositeRule&&r[d].default!==void 0}function u(d){t.subschema({keyword:"properties",schemaProp:d,dataProp:d},l)}}};Bb.default=Xne});var CD=E(zb=>{"use strict";Object.defineProperty(zb,"__esModule",{value:!0});var PD=dn(),ym=we(),xD=je(),ND=je(),Qne={keyword:"patternProperties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,data:n,parentSchema:s,it:i}=t,{opts:o}=i,a=(0,PD.allSchemaProperties)(r),l=a.filter(m=>(0,xD.alwaysValidSchema)(i,r[m]));if(a.length===0||l.length===a.length&&(!i.opts.unevaluated||i.props===!0))return;let c=o.strictSchema&&!o.allowMatchingProperties&&s.properties,u=e.name("valid");i.props!==!0&&!(i.props instanceof ym.Name)&&(i.props=(0,ND.evaluatedPropsToName)(e,i.props));let{props:d}=i;p();function p(){for(let m of a)c&&f(m),i.allErrors?h(m):(e.var(u,!0),h(m),e.if(u))}function f(m){for(let y in c)new RegExp(m).test(y)&&(0,xD.checkStrictMode)(i,`property ${y} matches pattern ${m} (use allowMatchingProperties)`)}function h(m){e.forIn("key",n,y=>{e.if((0,ym._)`${(0,PD.usePattern)(t,m)}.test(${y})`,()=>{let g=l.includes(m);g||t.subschema({keyword:"patternProperties",schemaProp:m,dataProp:y,dataPropType:ND.Type.Str},u),i.opts.unevaluated&&d!==!0?e.assign((0,ym._)`${d}[${y}]`,!0):!g&&!i.allErrors&&e.if((0,ym.not)(u),()=>e.break())})})}}};zb.default=Qne});var ID=E(Vb=>{"use strict";Object.defineProperty(Vb,"__esModule",{value:!0});var Zne=je(),ese={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){let{gen:e,schema:r,it:n}=t;if((0,Zne.alwaysValidSchema)(n,r)){t.fail();return}let s=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),t.failResult(s,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};Vb.default=ese});var AD=E(Hb=>{"use strict";Object.defineProperty(Hb,"__esModule",{value:!0});var tse=dn(),rse={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:tse.validateUnion,error:{message:"must match a schema in anyOf"}};Hb.default=rse});var kD=E(Gb=>{"use strict";Object.defineProperty(Gb,"__esModule",{value:!0});var _m=we(),nse=je(),sse={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,_m._)`{passingSchemas: ${t.passing}}`},ise={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:sse,code(t){let{gen:e,schema:r,parentSchema:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&n.discriminator)return;let i=r,o=e.let("valid",!1),a=e.let("passing",null),l=e.name("_valid");t.setParams({passing:a}),e.block(c),t.result(o,()=>t.reset(),()=>t.error(!0));function c(){i.forEach((u,d)=>{let p;(0,nse.alwaysValidSchema)(s,u)?e.var(l,!0):p=t.subschema({keyword:"oneOf",schemaProp:d,compositeRule:!0},l),d>0&&e.if((0,_m._)`${l} && ${o}`).assign(o,!1).assign(a,(0,_m._)`[${a}, ${d}]`).else(),e.if(l,()=>{e.assign(o,!0),e.assign(a,d),p&&t.mergeEvaluated(p,_m.Name)})})}}};Gb.default=ise});var DD=E(Wb=>{"use strict";Object.defineProperty(Wb,"__esModule",{value:!0});var ose=je(),ase={keyword:"allOf",schemaType:"array",code(t){let{gen:e,schema:r,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");let s=e.name("valid");r.forEach((i,o)=>{if((0,ose.alwaysValidSchema)(n,i))return;let a=t.subschema({keyword:"allOf",schemaProp:o},s);t.ok(s),t.mergeEvaluated(a)})}};Wb.default=ase});var qD=E(Kb=>{"use strict";Object.defineProperty(Kb,"__esModule",{value:!0});var vm=we(),jD=je(),lse={message:({params:t})=>(0,vm.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,vm._)`{failingKeyword: ${t.ifClause}}`},cse={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:lse,code(t){let{gen:e,parentSchema:r,it:n}=t;r.then===void 0&&r.else===void 0&&(0,jD.checkStrictMode)(n,'"if" without "then" and "else" is ignored');let s=MD(n,"then"),i=MD(n,"else");if(!s&&!i)return;let o=e.let("valid",!0),a=e.name("_valid");if(l(),t.reset(),s&&i){let u=e.let("ifClause");t.setParams({ifClause:u}),e.if(a,c("then",u),c("else",u))}else s?e.if(a,c("then")):e.if((0,vm.not)(a),c("else"));t.pass(o,()=>t.error(!0));function l(){let u=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);t.mergeEvaluated(u)}function c(u,d){return()=>{let p=t.subschema({keyword:u},a);e.assign(o,a),t.mergeValidEvaluated(p,o),d?e.assign(d,(0,vm._)`${u}`):t.setParams({ifClause:u})}}}};function MD(t,e){let r=t.schema[e];return r!==void 0&&!(0,jD.alwaysValidSchema)(t,r)}Kb.default=cse});var LD=E(Jb=>{"use strict";Object.defineProperty(Jb,"__esModule",{value:!0});var use=je(),fse={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,use.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};Jb.default=fse});var FD=E(Yb=>{"use strict";Object.defineProperty(Yb,"__esModule",{value:!0});var dse=Ib(),hse=gD(),pse=Ab(),mse=_D(),gse=vD(),yse=ED(),_se=TD(),vse=Fb(),wse=OD(),bse=CD(),Ese=ID(),Sse=AD(),Tse=kD(),Rse=DD(),$se=qD(),Ose=LD();function Pse(t=!1){let e=[Ese.default,Sse.default,Tse.default,Rse.default,$se.default,Ose.default,_se.default,vse.default,yse.default,wse.default,bse.default];return t?e.push(hse.default,mse.default):e.push(dse.default,pse.default),e.push(gse.default),e}Yb.default=Pse});var UD=E(Xb=>{"use strict";Object.defineProperty(Xb,"__esModule",{value:!0});var wt=we(),xse={message:({schemaCode:t})=>(0,wt.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,wt._)`{format: ${t}}`},Nse={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:xse,code(t,e){let{gen:r,data:n,$data:s,schema:i,schemaCode:o,it:a}=t,{opts:l,errSchemaPath:c,schemaEnv:u,self:d}=a;if(!l.validateFormats)return;s?p():f();function p(){let h=r.scopeValue("formats",{ref:d.formats,code:l.code.formats}),m=r.const("fDef",(0,wt._)`${h}[${o}]`),y=r.let("fType"),g=r.let("format");r.if((0,wt._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>r.assign(y,(0,wt._)`${m}.type || "string"`).assign(g,(0,wt._)`${m}.validate`),()=>r.assign(y,(0,wt._)`"string"`).assign(g,m)),t.fail$data((0,wt.or)(w(),_()));function w(){return l.strictSchema===!1?wt.nil:(0,wt._)`${o} && !${g}`}function _(){let v=u.$async?(0,wt._)`(${m}.async ? await ${g}(${n}) : ${g}(${n}))`:(0,wt._)`${g}(${n})`,S=(0,wt._)`(typeof ${g} == "function" ? ${v} : ${g}.test(${n}))`;return(0,wt._)`${g} && ${g} !== true && ${y} === ${e} && !${S}`}}function f(){let h=d.formats[i];if(!h){w();return}if(h===!0)return;let[m,y,g]=_(h);m===e&&t.pass(v());function w(){if(l.strictSchema===!1){d.logger.warn(S());return}throw new Error(S());function S(){return`unknown format "${i}" ignored in schema at path "${c}"`}}function _(S){let $=S instanceof RegExp?(0,wt.regexpCode)(S):l.code.formats?(0,wt._)`${l.code.formats}${(0,wt.getProperty)(i)}`:void 0,T=r.scopeValue("formats",{key:i,ref:S,code:$});return typeof S=="object"&&!(S instanceof RegExp)?[S.type||"string",S.validate,(0,wt._)`${T}.validate`]:["string",S,T]}function v(){if(typeof h=="object"&&!(h instanceof RegExp)&&h.async){if(!u.$async)throw new Error("async format in sync schema");return(0,wt._)`await ${g}(${n})`}return typeof y=="function"?(0,wt._)`${g}(${n})`:(0,wt._)`${g}.test(${n})`}}}};Xb.default=Nse});var BD=E(Qb=>{"use strict";Object.defineProperty(Qb,"__esModule",{value:!0});var Cse=UD(),Ise=[Cse.default];Qb.default=Ise});var zD=E($l=>{"use strict";Object.defineProperty($l,"__esModule",{value:!0});$l.contentVocabulary=$l.metadataVocabulary=void 0;$l.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];$l.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var HD=E(Zb=>{"use strict";Object.defineProperty(Zb,"__esModule",{value:!0});var Ase=Qk(),kse=dD(),Dse=FD(),Mse=BD(),VD=zD(),jse=[Ase.default,kse.default,(0,Dse.default)(),Mse.default,VD.metadataVocabulary,VD.contentVocabulary];Zb.default=jse});var WD=E(wm=>{"use strict";Object.defineProperty(wm,"__esModule",{value:!0});wm.DiscrError=void 0;var GD;(function(t){t.Tag="tag",t.Mapping="mapping"})(GD||(wm.DiscrError=GD={}))});var JD=E(tE=>{"use strict";Object.defineProperty(tE,"__esModule",{value:!0});var Ol=we(),eE=WD(),KD=rm(),qse=zu(),Lse=je(),Fse={message:({params:{discrError:t,tagName:e}})=>t===eE.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,Ol._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},Use={keyword:"discriminator",type:"object",schemaType:"object",error:Fse,code(t){let{gen:e,data:r,schema:n,parentSchema:s,it:i}=t,{oneOf:o}=s;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");let a=n.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");let l=e.let("valid",!1),c=e.const("tag",(0,Ol._)`${r}${(0,Ol.getProperty)(a)}`);e.if((0,Ol._)`typeof ${c} == "string"`,()=>u(),()=>t.error(!1,{discrError:eE.DiscrError.Tag,tag:c,tagName:a})),t.ok(l);function u(){let f=p();e.if(!1);for(let h in f)e.elseIf((0,Ol._)`${c} === ${h}`),e.assign(l,d(f[h]));e.else(),t.error(!1,{discrError:eE.DiscrError.Mapping,tag:c,tagName:a}),e.endIf()}function d(f){let h=e.name("valid"),m=t.subschema({keyword:"oneOf",schemaProp:f},h);return t.mergeEvaluated(m,Ol.Name),h}function p(){var f;let h={},m=g(s),y=!0;for(let v=0;v<o.length;v++){let S=o[v];if(S?.$ref&&!(0,Lse.schemaHasRulesButRef)(S,i.self.RULES)){let T=S.$ref;if(S=KD.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,T),S instanceof KD.SchemaEnv&&(S=S.schema),S===void 0)throw new qse.default(i.opts.uriResolver,i.baseId,T)}let $=(f=S?.properties)===null||f===void 0?void 0:f[a];if(typeof $!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);y=y&&(m||g(S)),w($,v)}if(!y)throw new Error(`discriminator: "${a}" must be required`);return h;function g({required:v}){return Array.isArray(v)&&v.includes(a)}function w(v,S){if(v.const)_(v.const,S);else if(v.enum)for(let $ of v.enum)_($,S);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function _(v,S){if(typeof v!="string"||v in h)throw new Error(`discriminator: "${a}" values must be unique strings`);h[v]=S}}}};tE.default=Use});var YD=E((TIe,Bse)=>{Bse.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var QD=E((tt,rE)=>{"use strict";Object.defineProperty(tt,"__esModule",{value:!0});tt.MissingRefError=tt.ValidationError=tt.CodeGen=tt.Name=tt.nil=tt.stringify=tt.str=tt._=tt.KeywordCxt=tt.Ajv=void 0;var zse=Gk(),Vse=HD(),Hse=JD(),XD=YD(),Gse=["/properties"],bm="http://json-schema.org/draft-07/schema",Pl=class extends zse.default{_addVocabularies(){super._addVocabularies(),Vse.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(Hse.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let e=this.opts.$data?this.$dataMetaSchema(XD,Gse):XD;this.addMetaSchema(e,bm,!1),this.refs["http://json-schema.org/schema"]=bm}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(bm)?bm:void 0)}};tt.Ajv=Pl;rE.exports=tt=Pl;rE.exports.Ajv=Pl;Object.defineProperty(tt,"__esModule",{value:!0});tt.default=Pl;var Wse=Bu();Object.defineProperty(tt,"KeywordCxt",{enumerable:!0,get:function(){return Wse.KeywordCxt}});var xl=we();Object.defineProperty(tt,"_",{enumerable:!0,get:function(){return xl._}});Object.defineProperty(tt,"str",{enumerable:!0,get:function(){return xl.str}});Object.defineProperty(tt,"stringify",{enumerable:!0,get:function(){return xl.stringify}});Object.defineProperty(tt,"nil",{enumerable:!0,get:function(){return xl.nil}});Object.defineProperty(tt,"Name",{enumerable:!0,get:function(){return xl.Name}});Object.defineProperty(tt,"CodeGen",{enumerable:!0,get:function(){return xl.CodeGen}});var Kse=em();Object.defineProperty(tt,"ValidationError",{enumerable:!0,get:function(){return Kse.default}});var Jse=zu();Object.defineProperty(tt,"MissingRefError",{enumerable:!0,get:function(){return Jse.default}})});var Em=E(Ss=>{"use strict";Object.defineProperty(Ss,"__esModule",{value:!0});Ss.formatNames=Ss.fastFormats=Ss.fullFormats=void 0;function Es(t,e){return{validate:t,compare:e}}Ss.fullFormats={date:Es(rM,oE),time:Es(sE(!0),aE),"date-time":Es(ZD(!0),sM),"iso-time":Es(sE(),nM),"iso-date-time":Es(ZD(),iM),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:tie,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:lie,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:rie,int32:{type:"number",validate:iie},int64:{type:"number",validate:oie},float:{type:"number",validate:tM},double:{type:"number",validate:tM},password:!0,binary:!0};Ss.fastFormats={...Ss.fullFormats,date:Es(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,oE),time:Es(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,aE),"date-time":Es(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,sM),"iso-time":Es(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,nM),"iso-date-time":Es(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,iM),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i};Ss.formatNames=Object.keys(Ss.fullFormats);function Yse(t){return t%4===0&&(t%100!==0||t%400===0)}var Xse=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,Qse=[0,31,28,31,30,31,30,31,31,30,31,30,31];function rM(t){let e=Xse.exec(t);if(!e)return!1;let r=+e[1],n=+e[2],s=+e[3];return n>=1&&n<=12&&s>=1&&s<=(n===2&&Yse(r)?29:Qse[n])}function oE(t,e){if(t&&e)return t>e?1:t<e?-1:0}var nE=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function sE(t){return function(r){let n=nE.exec(r);if(!n)return!1;let s=+n[1],i=+n[2],o=+n[3],a=n[4],l=n[5]==="-"?-1:1,c=+(n[6]||0),u=+(n[7]||0);if(c>23||u>59||t&&!a)return!1;if(s<=23&&i<=59&&o<60)return!0;let d=i-u*l,p=s-c*l-(d<0?1:0);return(p===23||p===-1)&&(d===59||d===-1)&&o<61}}function aE(t,e){if(!(t&&e))return;let r=new Date("2020-01-01T"+t).valueOf(),n=new Date("2020-01-01T"+e).valueOf();if(r&&n)return r-n}function nM(t,e){if(!(t&&e))return;let r=nE.exec(t),n=nE.exec(e);if(r&&n)return t=r[1]+r[2]+r[3],e=n[1]+n[2]+n[3],t>e?1:t<e?-1:0}var iE=/t|\s/i;function ZD(t){let e=sE(t);return function(n){let s=n.split(iE);return s.length===2&&rM(s[0])&&e(s[1])}}function sM(t,e){if(!(t&&e))return;let r=new Date(t).valueOf(),n=new Date(e).valueOf();if(r&&n)return r-n}function iM(t,e){if(!(t&&e))return;let[r,n]=t.split(iE),[s,i]=e.split(iE),o=oE(r,s);if(o!==void 0)return o||aE(n,i)}var Zse=/\/|:/,eie=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function tie(t){return Zse.test(t)&&eie.test(t)}var eM=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function rie(t){return eM.lastIndex=0,eM.test(t)}var nie=-(2**31),sie=2**31-1;function iie(t){return Number.isInteger(t)&&t<=sie&&t>=nie}function oie(t){return Number.isInteger(t)}function tM(){return!0}var aie=/[^\\]\\Z/;function lie(t){if(aie.test(t))return!1;try{return new RegExp(t),!0}catch{return!1}}});var af=E(qe=>{"use strict";Object.defineProperty(qe,"__esModule",{value:!0});qe.regexpCode=qe.getEsmExportName=qe.getProperty=qe.safeStringify=qe.stringify=qe.strConcat=qe.addCodeArg=qe.str=qe._=qe.nil=qe._Code=qe.Name=qe.IDENTIFIER=qe._CodeOrName=void 0;var sf=class{};qe._CodeOrName=sf;qe.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var Xo=class extends sf{constructor(e){if(super(),!qe.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};qe.Name=Xo;var mn=class extends sf{constructor(e){super(),this._items=typeof e=="string"?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return e===""||e==='""'}get str(){var e;return(e=this._str)!==null&&e!==void 0?e:this._str=this._items.reduce((r,n)=>`${r}${n}`,"")}get names(){var e;return(e=this._names)!==null&&e!==void 0?e:this._names=this._items.reduce((r,n)=>(n instanceof Xo&&(r[n.str]=(r[n.str]||0)+1),r),{})}};qe._Code=mn;qe.nil=new mn("");function oM(t,...e){let r=[t[0]],n=0;for(;n<e.length;)cE(r,e[n]),r.push(t[++n]);return new mn(r)}qe._=oM;var lE=new mn("+");function aM(t,...e){let r=[of(t[0])],n=0;for(;n<e.length;)r.push(lE),cE(r,e[n]),r.push(lE,of(t[++n]));return cie(r),new mn(r)}qe.str=aM;function cE(t,e){e instanceof mn?t.push(...e._items):e instanceof Xo?t.push(e):t.push(die(e))}qe.addCodeArg=cE;function cie(t){let e=1;for(;e<t.length-1;){if(t[e]===lE){let r=uie(t[e-1],t[e+1]);if(r!==void 0){t.splice(e-1,3,r);continue}t[e++]="+"}e++}}function uie(t,e){if(e==='""')return t;if(t==='""')return e;if(typeof t=="string")return e instanceof Xo||t[t.length-1]!=='"'?void 0:typeof e!="string"?`${t.slice(0,-1)}${e}"`:e[0]==='"'?t.slice(0,-1)+e.slice(1):void 0;if(typeof e=="string"&&e[0]==='"'&&!(t instanceof Xo))return`"${t}${e.slice(1)}`}function fie(t,e){return e.emptyStr()?t:t.emptyStr()?e:aM`${t}${e}`}qe.strConcat=fie;function die(t){return typeof t=="number"||typeof t=="boolean"||t===null?t:of(Array.isArray(t)?t.join(","):t)}function hie(t){return new mn(of(t))}qe.stringify=hie;function of(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}qe.safeStringify=of;function pie(t){return typeof t=="string"&&qe.IDENTIFIER.test(t)?new mn(`.${t}`):oM`[${t}]`}qe.getProperty=pie;function mie(t){if(typeof t=="string"&&qe.IDENTIFIER.test(t))return new mn(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)}qe.getEsmExportName=mie;function gie(t){return new mn(t.toString())}qe.regexpCode=gie});var dE=E(Br=>{"use strict";Object.defineProperty(Br,"__esModule",{value:!0});Br.ValueScope=Br.ValueScopeName=Br.Scope=Br.varKinds=Br.UsedValueState=void 0;var Ur=af(),uE=class extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}},Sm;(function(t){t[t.Started=0]="Started",t[t.Completed=1]="Completed"})(Sm||(Br.UsedValueState=Sm={}));Br.varKinds={const:new Ur.Name("const"),let:new Ur.Name("let"),var:new Ur.Name("var")};var Tm=class{constructor({prefixes:e,parent:r}={}){this._names={},this._prefixes=e,this._parent=r}toName(e){return e instanceof Ur.Name?e:this.name(e)}name(e){return new Ur.Name(this._newName(e))}_newName(e){let r=this._names[e]||this._nameGroup(e);return`${e}${r.index++}`}_nameGroup(e){var r,n;if(!((n=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||n===void 0)&&n.has(e)||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}};Br.Scope=Tm;var Rm=class extends Ur.Name{constructor(e,r){super(r),this.prefix=e}setValue(e,{property:r,itemIndex:n}){this.value=e,this.scopePath=(0,Ur._)`.${new Ur.Name(r)}[${n}]`}};Br.ValueScopeName=Rm;var yie=(0,Ur._)`\n`,fE=class extends Tm{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?yie:Ur.nil}}get(){return this._scope}name(e){return new Rm(e,this._newName(e))}value(e,r){var n;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let s=this.toName(e),{prefix:i}=s,o=(n=r.key)!==null&&n!==void 0?n:r.ref,a=this._values[i];if(a){let u=a.get(o);if(u)return u}else a=this._values[i]=new Map;a.set(o,s);let l=this._scope[i]||(this._scope[i]=[]),c=l.length;return l[c]=r.ref,s.setValue(r,{property:i,itemIndex:c}),s}getValue(e,r){let n=this._values[e];if(n)return n.get(r)}scopeRefs(e,r=this._values){return this._reduceValues(r,n=>{if(n.scopePath===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return(0,Ur._)`${e}${n.scopePath}`})}scopeCode(e=this._values,r,n){return this._reduceValues(e,s=>{if(s.value===void 0)throw new Error(`CodeGen: name "${s}" has no value`);return s.value.code},r,n)}_reduceValues(e,r,n={},s){let i=Ur.nil;for(let o in e){let a=e[o];if(!a)continue;let l=n[o]=n[o]||new Map;a.forEach(c=>{if(l.has(c))return;l.set(c,Sm.Started);let u=r(c);if(u){let d=this.opts.es5?Br.varKinds.var:Br.varKinds.const;i=(0,Ur._)`${i}${d} ${c} = ${u};${this.opts._n}`}else if(u=s?.(c))i=(0,Ur._)`${i}${u}${this.opts._n}`;else throw new uE(c);l.set(c,Sm.Completed)})}return i}};Br.ValueScope=fE});var pe=E(_e=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0});_e.or=_e.and=_e.not=_e.CodeGen=_e.operators=_e.varKinds=_e.ValueScopeName=_e.ValueScope=_e.Scope=_e.Name=_e.regexpCode=_e.stringify=_e.getProperty=_e.nil=_e.strConcat=_e.str=_e._=void 0;var Ce=af(),Gn=dE(),zi=af();Object.defineProperty(_e,"_",{enumerable:!0,get:function(){return zi._}});Object.defineProperty(_e,"str",{enumerable:!0,get:function(){return zi.str}});Object.defineProperty(_e,"strConcat",{enumerable:!0,get:function(){return zi.strConcat}});Object.defineProperty(_e,"nil",{enumerable:!0,get:function(){return zi.nil}});Object.defineProperty(_e,"getProperty",{enumerable:!0,get:function(){return zi.getProperty}});Object.defineProperty(_e,"stringify",{enumerable:!0,get:function(){return zi.stringify}});Object.defineProperty(_e,"regexpCode",{enumerable:!0,get:function(){return zi.regexpCode}});Object.defineProperty(_e,"Name",{enumerable:!0,get:function(){return zi.Name}});var xm=dE();Object.defineProperty(_e,"Scope",{enumerable:!0,get:function(){return xm.Scope}});Object.defineProperty(_e,"ValueScope",{enumerable:!0,get:function(){return xm.ValueScope}});Object.defineProperty(_e,"ValueScopeName",{enumerable:!0,get:function(){return xm.ValueScopeName}});Object.defineProperty(_e,"varKinds",{enumerable:!0,get:function(){return xm.varKinds}});_e.operators={GT:new Ce._Code(">"),GTE:new Ce._Code(">="),LT:new Ce._Code("<"),LTE:new Ce._Code("<="),EQ:new Ce._Code("==="),NEQ:new Ce._Code("!=="),NOT:new Ce._Code("!"),OR:new Ce._Code("||"),AND:new Ce._Code("&&"),ADD:new Ce._Code("+")};var ri=class{optimizeNodes(){return this}optimizeNames(e,r){return this}},hE=class extends ri{constructor(e,r,n){super(),this.varKind=e,this.name=r,this.rhs=n}render({es5:e,_n:r}){let n=e?Gn.varKinds.var:this.varKind,s=this.rhs===void 0?"":` = ${this.rhs}`;return`${n} ${this.name}${s};`+r}optimizeNames(e,r){if(e[this.name.str])return this.rhs&&(this.rhs=Cl(this.rhs,e,r)),this}get names(){return this.rhs instanceof Ce._CodeOrName?this.rhs.names:{}}},$m=class extends ri{constructor(e,r,n){super(),this.lhs=e,this.rhs=r,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof Ce.Name&&!e[this.lhs.str]&&!this.sideEffects))return this.rhs=Cl(this.rhs,e,r),this}get names(){let e=this.lhs instanceof Ce.Name?{}:{...this.lhs.names};return Pm(e,this.rhs)}},pE=class extends $m{constructor(e,r,n,s){super(e,n,s),this.op=r}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}},mE=class extends ri{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}},gE=class extends ri{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}},yE=class extends ri{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}},_E=class extends ri{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,r){return this.code=Cl(this.code,e,r),this}get names(){return this.code instanceof Ce._CodeOrName?this.code.names:{}}},lf=class extends ri{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((r,n)=>r+n.render(e),"")}optimizeNodes(){let{nodes:e}=this,r=e.length;for(;r--;){let n=e[r].optimizeNodes();Array.isArray(n)?e.splice(r,1,...n):n?e[r]=n:e.splice(r,1)}return e.length>0?this:void 0}optimizeNames(e,r){let{nodes:n}=this,s=n.length;for(;s--;){let i=n[s];i.optimizeNames(e,r)||(_ie(e,i.names),n.splice(s,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((e,r)=>Zo(e,r.names),{})}},ni=class extends lf{render(e){return"{"+e._n+super.render(e)+"}"+e._n}},vE=class extends lf{},Nl=class extends ni{};Nl.kind="else";var Wn=class extends ni{constructor(e,r){super(r),this.condition=e}render(e){let r=`if(${this.condition})`+super.render(e);return this.else&&(r+="else "+this.else.render(e)),r}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(e===!0)return this.nodes;let r=this.else;if(r){let n=r.optimizeNodes();r=this.else=Array.isArray(n)?new Nl(n):n}if(r)return e===!1?r instanceof Wn?r:r.nodes:this.nodes.length?this:new Wn(lM(e),r instanceof Wn?[r]:r.nodes);if(!(e===!1||!this.nodes.length))return this}optimizeNames(e,r){var n;if(this.else=(n=this.else)===null||n===void 0?void 0:n.optimizeNames(e,r),!!(super.optimizeNames(e,r)||this.else))return this.condition=Cl(this.condition,e,r),this}get names(){let e=super.names;return Pm(e,this.condition),this.else&&Zo(e,this.else.names),e}};Wn.kind="if";var Qo=class extends ni{};Qo.kind="for";var wE=class extends Qo{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iteration=Cl(this.iteration,e,r),this}get names(){return Zo(super.names,this.iteration.names)}},bE=class extends Qo{constructor(e,r,n,s){super(),this.varKind=e,this.name=r,this.from=n,this.to=s}render(e){let r=e.es5?Gn.varKinds.var:this.varKind,{name:n,from:s,to:i}=this;return`for(${r} ${n}=${s}; ${n}<${i}; ${n}++)`+super.render(e)}get names(){let e=Pm(super.names,this.from);return Pm(e,this.to)}},Om=class extends Qo{constructor(e,r,n,s){super(),this.loop=e,this.varKind=r,this.name=n,this.iterable=s}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iterable=Cl(this.iterable,e,r),this}get names(){return Zo(super.names,this.iterable.names)}},cf=class extends ni{constructor(e,r,n){super(),this.name=e,this.args=r,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}};cf.kind="func";var uf=class extends lf{render(e){return"return "+super.render(e)}};uf.kind="return";var EE=class extends ni{render(e){let r="try"+super.render(e);return this.catch&&(r+=this.catch.render(e)),this.finally&&(r+=this.finally.render(e)),r}optimizeNodes(){var e,r;return super.optimizeNodes(),(e=this.catch)===null||e===void 0||e.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(e,r){var n,s;return super.optimizeNames(e,r),(n=this.catch)===null||n===void 0||n.optimizeNames(e,r),(s=this.finally)===null||s===void 0||s.optimizeNames(e,r),this}get names(){let e=super.names;return this.catch&&Zo(e,this.catch.names),this.finally&&Zo(e,this.finally.names),e}},ff=class extends ni{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}};ff.kind="catch";var df=class extends ni{render(e){return"finally"+super.render(e)}};df.kind="finally";var SE=class{constructor(e,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=e,this._scope=new Gn.Scope({parent:e}),this._nodes=[new vE]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,r){let n=this._extScope.value(e,r);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,r){return this._extScope.getValue(e,r)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,r,n,s){let i=this._scope.toName(r);return n!==void 0&&s&&(this._constants[i.str]=n),this._leafNode(new hE(e,i,n)),i}const(e,r,n){return this._def(Gn.varKinds.const,e,r,n)}let(e,r,n){return this._def(Gn.varKinds.let,e,r,n)}var(e,r,n){return this._def(Gn.varKinds.var,e,r,n)}assign(e,r,n){return this._leafNode(new $m(e,r,n))}add(e,r){return this._leafNode(new pE(e,_e.operators.ADD,r))}code(e){return typeof e=="function"?e():e!==Ce.nil&&this._leafNode(new _E(e)),this}object(...e){let r=["{"];for(let[n,s]of e)r.length>1&&r.push(","),r.push(n),(n!==s||this.opts.es5)&&(r.push(":"),(0,Ce.addCodeArg)(r,s));return r.push("}"),new Ce._Code(r)}if(e,r,n){if(this._blockNode(new Wn(e)),r&&n)this.code(r).else().code(n).endIf();else if(r)this.code(r).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new Wn(e))}else(){return this._elseNode(new Nl)}endIf(){return this._endBlockNode(Wn,Nl)}_for(e,r){return this._blockNode(e),r&&this.code(r).endFor(),this}for(e,r){return this._for(new wE(e),r)}forRange(e,r,n,s,i=this.opts.es5?Gn.varKinds.var:Gn.varKinds.let){let o=this._scope.toName(e);return this._for(new bE(i,o,r,n),()=>s(o))}forOf(e,r,n,s=Gn.varKinds.const){let i=this._scope.toName(e);if(this.opts.es5){let o=r instanceof Ce.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,Ce._)`${o}.length`,a=>{this.var(i,(0,Ce._)`${o}[${a}]`),n(i)})}return this._for(new Om("of",s,i,r),()=>n(i))}forIn(e,r,n,s=this.opts.es5?Gn.varKinds.var:Gn.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,Ce._)`Object.keys(${r})`,n);let i=this._scope.toName(e);return this._for(new Om("in",s,i,r),()=>n(i))}endFor(){return this._endBlockNode(Qo)}label(e){return this._leafNode(new mE(e))}break(e){return this._leafNode(new gE(e))}return(e){let r=new uf;if(this._blockNode(r),this.code(e),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(uf)}try(e,r,n){if(!r&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');let s=new EE;if(this._blockNode(s),this.code(e),r){let i=this.name("e");this._currNode=s.catch=new ff(i),r(i)}return n&&(this._currNode=s.finally=new df,this.code(n)),this._endBlockNode(ff,df)}throw(e){return this._leafNode(new yE(e))}block(e,r){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(r),this}endBlock(e){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let n=this._nodes.length-r;if(n<0||e!==void 0&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=r,this}func(e,r=Ce.nil,n,s){return this._blockNode(new cf(e,r,n)),s&&this.code(s).endFunc(),this}endFunc(){return this._endBlockNode(cf)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,r){let n=this._currNode;if(n instanceof e||r&&n instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${e.kind}/${r.kind}`:e.kind}"`)}_elseNode(e){let r=this._currNode;if(!(r instanceof Wn))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let r=this._nodes;r[r.length-1]=e}};_e.CodeGen=SE;function Zo(t,e){for(let r in e)t[r]=(t[r]||0)+(e[r]||0);return t}function Pm(t,e){return e instanceof Ce._CodeOrName?Zo(t,e.names):t}function Cl(t,e,r){if(t instanceof Ce.Name)return n(t);if(!s(t))return t;return new Ce._Code(t._items.reduce((i,o)=>(o instanceof Ce.Name&&(o=n(o)),o instanceof Ce._Code?i.push(...o._items):i.push(o),i),[]));function n(i){let o=r[i.str];return o===void 0||e[i.str]!==1?i:(delete e[i.str],o)}function s(i){return i instanceof Ce._Code&&i._items.some(o=>o instanceof Ce.Name&&e[o.str]===1&&r[o.str]!==void 0)}}function _ie(t,e){for(let r in e)t[r]=(t[r]||0)-(e[r]||0)}function lM(t){return typeof t=="boolean"||typeof t=="number"||t===null?!t:(0,Ce._)`!${TE(t)}`}_e.not=lM;var vie=cM(_e.operators.AND);function wie(...t){return t.reduce(vie)}_e.and=wie;var bie=cM(_e.operators.OR);function Eie(...t){return t.reduce(bie)}_e.or=Eie;function cM(t){return(e,r)=>e===Ce.nil?r:r===Ce.nil?e:(0,Ce._)`${TE(e)} ${t} ${TE(r)}`}function TE(t){return t instanceof Ce.Name?t:(0,Ce._)`(${t})`}});var Le=E(Ee=>{"use strict";Object.defineProperty(Ee,"__esModule",{value:!0});Ee.checkStrictMode=Ee.getErrorPath=Ee.Type=Ee.useFunc=Ee.setEvaluated=Ee.evaluatedPropsToName=Ee.mergeEvaluated=Ee.eachItem=Ee.unescapeJsonPointer=Ee.escapeJsonPointer=Ee.escapeFragment=Ee.unescapeFragment=Ee.schemaRefOrVal=Ee.schemaHasRulesButRef=Ee.schemaHasRules=Ee.checkUnknownRules=Ee.alwaysValidSchema=Ee.toHash=void 0;var Ke=pe(),Sie=af();function Tie(t){let e={};for(let r of t)e[r]=!0;return e}Ee.toHash=Tie;function Rie(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(dM(t,e),!hM(e,t.self.RULES.all))}Ee.alwaysValidSchema=Rie;function dM(t,e=t.schema){let{opts:r,self:n}=t;if(!r.strictSchema||typeof e=="boolean")return;let s=n.RULES.keywords;for(let i in e)s[i]||gM(t,`unknown keyword: "${i}"`)}Ee.checkUnknownRules=dM;function hM(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(e[r])return!0;return!1}Ee.schemaHasRules=hM;function $ie(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}Ee.schemaHasRulesButRef=$ie;function Oie({topSchemaRef:t,schemaPath:e},r,n,s){if(!s){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,Ke._)`${r}`}return(0,Ke._)`${t}${e}${(0,Ke.getProperty)(n)}`}Ee.schemaRefOrVal=Oie;function Pie(t){return pM(decodeURIComponent(t))}Ee.unescapeFragment=Pie;function xie(t){return encodeURIComponent($E(t))}Ee.escapeFragment=xie;function $E(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}Ee.escapeJsonPointer=$E;function pM(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}Ee.unescapeJsonPointer=pM;function Nie(t,e){if(Array.isArray(t))for(let r of t)e(r);else e(t)}Ee.eachItem=Nie;function uM({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:n}){return(s,i,o,a)=>{let l=o===void 0?i:o instanceof Ke.Name?(i instanceof Ke.Name?t(s,i,o):e(s,i,o),o):i instanceof Ke.Name?(e(s,o,i),i):r(i,o);return a===Ke.Name&&!(l instanceof Ke.Name)?n(s,l):l}}Ee.mergeEvaluated={props:uM({mergeNames:(t,e,r)=>t.if((0,Ke._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,Ke._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,Ke._)`${r} || {}`).code((0,Ke._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,Ke._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,Ke._)`${r} || {}`),OE(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:mM}),items:uM({mergeNames:(t,e,r)=>t.if((0,Ke._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,Ke._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,Ke._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,Ke._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function mM(t,e){if(e===!0)return t.var("props",!0);let r=t.var("props",(0,Ke._)`{}`);return e!==void 0&&OE(t,r,e),r}Ee.evaluatedPropsToName=mM;function OE(t,e,r){Object.keys(r).forEach(n=>t.assign((0,Ke._)`${e}${(0,Ke.getProperty)(n)}`,!0))}Ee.setEvaluated=OE;var fM={};function Cie(t,e){return t.scopeValue("func",{ref:e,code:fM[e.code]||(fM[e.code]=new Sie._Code(e.code))})}Ee.useFunc=Cie;var RE;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(RE||(Ee.Type=RE={}));function Iie(t,e,r){if(t instanceof Ke.Name){let n=e===RE.Num;return r?n?(0,Ke._)`"[" + ${t} + "]"`:(0,Ke._)`"['" + ${t} + "']"`:n?(0,Ke._)`"/" + ${t}`:(0,Ke._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,Ke.getProperty)(t).toString():"/"+$E(t)}Ee.getErrorPath=Iie;function gM(t,e,r=t.opts.strictSchema){if(r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}Ee.checkStrictMode=gM});var si=E(PE=>{"use strict";Object.defineProperty(PE,"__esModule",{value:!0});var ir=pe(),Aie={data:new ir.Name("data"),valCxt:new ir.Name("valCxt"),instancePath:new ir.Name("instancePath"),parentData:new ir.Name("parentData"),parentDataProperty:new ir.Name("parentDataProperty"),rootData:new ir.Name("rootData"),dynamicAnchors:new ir.Name("dynamicAnchors"),vErrors:new ir.Name("vErrors"),errors:new ir.Name("errors"),this:new ir.Name("this"),self:new ir.Name("self"),scope:new ir.Name("scope"),json:new ir.Name("json"),jsonPos:new ir.Name("jsonPos"),jsonLen:new ir.Name("jsonLen"),jsonPart:new ir.Name("jsonPart")};PE.default=Aie});var hf=E(or=>{"use strict";Object.defineProperty(or,"__esModule",{value:!0});or.extendErrors=or.resetErrorsCount=or.reportExtraError=or.reportError=or.keyword$DataError=or.keywordError=void 0;var ke=pe(),Nm=Le(),Sr=si();or.keywordError={message:({keyword:t})=>(0,ke.str)`must pass "${t}" keyword validation`};or.keyword$DataError={message:({keyword:t,schemaType:e})=>e?(0,ke.str)`"${t}" keyword must be ${e} ($data)`:(0,ke.str)`"${t}" keyword is invalid ($data)`};function kie(t,e=or.keywordError,r,n){let{it:s}=t,{gen:i,compositeRule:o,allErrors:a}=s,l=vM(t,e,r);n??(o||a)?yM(i,l):_M(s,(0,ke._)`[${l}]`)}or.reportError=kie;function Die(t,e=or.keywordError,r){let{it:n}=t,{gen:s,compositeRule:i,allErrors:o}=n,a=vM(t,e,r);yM(s,a),i||o||_M(n,Sr.default.vErrors)}or.reportExtraError=Die;function Mie(t,e){t.assign(Sr.default.errors,e),t.if((0,ke._)`${Sr.default.vErrors} !== null`,()=>t.if(e,()=>t.assign((0,ke._)`${Sr.default.vErrors}.length`,e),()=>t.assign(Sr.default.vErrors,null)))}or.resetErrorsCount=Mie;function jie({gen:t,keyword:e,schemaValue:r,data:n,errsCount:s,it:i}){if(s===void 0)throw new Error("ajv implementation error");let o=t.name("err");t.forRange("i",s,Sr.default.errors,a=>{t.const(o,(0,ke._)`${Sr.default.vErrors}[${a}]`),t.if((0,ke._)`${o}.instancePath === undefined`,()=>t.assign((0,ke._)`${o}.instancePath`,(0,ke.strConcat)(Sr.default.instancePath,i.errorPath))),t.assign((0,ke._)`${o}.schemaPath`,(0,ke.str)`${i.errSchemaPath}/${e}`),i.opts.verbose&&(t.assign((0,ke._)`${o}.schema`,r),t.assign((0,ke._)`${o}.data`,n))})}or.extendErrors=jie;function yM(t,e){let r=t.const("err",e);t.if((0,ke._)`${Sr.default.vErrors} === null`,()=>t.assign(Sr.default.vErrors,(0,ke._)`[${r}]`),(0,ke._)`${Sr.default.vErrors}.push(${r})`),t.code((0,ke._)`${Sr.default.errors}++`)}function _M(t,e){let{gen:r,validateName:n,schemaEnv:s}=t;s.$async?r.throw((0,ke._)`new ${t.ValidationError}(${e})`):(r.assign((0,ke._)`${n}.errors`,e),r.return(!1))}var ea={keyword:new ke.Name("keyword"),schemaPath:new ke.Name("schemaPath"),params:new ke.Name("params"),propertyName:new ke.Name("propertyName"),message:new ke.Name("message"),schema:new ke.Name("schema"),parentSchema:new ke.Name("parentSchema")};function vM(t,e,r){let{createErrors:n}=t.it;return n===!1?(0,ke._)`{}`:qie(t,e,r)}function qie(t,e,r={}){let{gen:n,it:s}=t,i=[Lie(s,r),Fie(t,r)];return Uie(t,e,i),n.object(...i)}function Lie({errorPath:t},{instancePath:e}){let r=e?(0,ke.str)`${t}${(0,Nm.getErrorPath)(e,Nm.Type.Str)}`:t;return[Sr.default.instancePath,(0,ke.strConcat)(Sr.default.instancePath,r)]}function Fie({keyword:t,it:{errSchemaPath:e}},{schemaPath:r,parentSchema:n}){let s=n?e:(0,ke.str)`${e}/${t}`;return r&&(s=(0,ke.str)`${s}${(0,Nm.getErrorPath)(r,Nm.Type.Str)}`),[ea.schemaPath,s]}function Uie(t,{params:e,message:r},n){let{keyword:s,data:i,schemaValue:o,it:a}=t,{opts:l,propertyName:c,topSchemaRef:u,schemaPath:d}=a;n.push([ea.keyword,s],[ea.params,typeof e=="function"?e(t):e||(0,ke._)`{}`]),l.messages&&n.push([ea.message,typeof r=="function"?r(t):r]),l.verbose&&n.push([ea.schema,o],[ea.parentSchema,(0,ke._)`${u}${d}`],[Sr.default.data,i]),c&&n.push([ea.propertyName,c])}});var bM=E(Il=>{"use strict";Object.defineProperty(Il,"__esModule",{value:!0});Il.boolOrEmptySchema=Il.topBoolOrEmptySchema=void 0;var Bie=hf(),zie=pe(),Vie=si(),Hie={message:"boolean schema is false"};function Gie(t){let{gen:e,schema:r,validateName:n}=t;r===!1?wM(t,!1):typeof r=="object"&&r.$async===!0?e.return(Vie.default.data):(e.assign((0,zie._)`${n}.errors`,null),e.return(!0))}Il.topBoolOrEmptySchema=Gie;function Wie(t,e){let{gen:r,schema:n}=t;n===!1?(r.var(e,!1),wM(t)):r.var(e,!0)}Il.boolOrEmptySchema=Wie;function wM(t,e){let{gen:r,data:n}=t,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,Bie.reportError)(s,Hie,void 0,e)}});var xE=E(Al=>{"use strict";Object.defineProperty(Al,"__esModule",{value:!0});Al.getRules=Al.isJSONType=void 0;var Kie=["string","number","integer","boolean","null","object","array"],Jie=new Set(Kie);function Yie(t){return typeof t=="string"&&Jie.has(t)}Al.isJSONType=Yie;function Xie(){let t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}Al.getRules=Xie});var NE=E(Vi=>{"use strict";Object.defineProperty(Vi,"__esModule",{value:!0});Vi.shouldUseRule=Vi.shouldUseGroup=Vi.schemaHasRulesForType=void 0;function Qie({schema:t,self:e},r){let n=e.RULES.types[r];return n&&n!==!0&&EM(t,n)}Vi.schemaHasRulesForType=Qie;function EM(t,e){return e.rules.some(r=>SM(t,r))}Vi.shouldUseGroup=EM;function SM(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(n=>t[n]!==void 0))}Vi.shouldUseRule=SM});var pf=E(ar=>{"use strict";Object.defineProperty(ar,"__esModule",{value:!0});ar.reportTypeError=ar.checkDataTypes=ar.checkDataType=ar.coerceAndCheckDataType=ar.getJSONTypes=ar.getSchemaTypes=ar.DataType=void 0;var Zie=xE(),eoe=NE(),toe=hf(),de=pe(),TM=Le(),kl;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(kl||(ar.DataType=kl={}));function roe(t){let e=RM(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}ar.getSchemaTypes=roe;function RM(t){let e=Array.isArray(t)?t:t?[t]:[];if(e.every(Zie.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}ar.getJSONTypes=RM;function noe(t,e){let{gen:r,data:n,opts:s}=t,i=soe(e,s.coerceTypes),o=e.length>0&&!(i.length===0&&e.length===1&&(0,eoe.schemaHasRulesForType)(t,e[0]));if(o){let a=IE(e,n,s.strictNumbers,kl.Wrong);r.if(a,()=>{i.length?ioe(t,e,i):AE(t)})}return o}ar.coerceAndCheckDataType=noe;var $M=new Set(["string","number","integer","boolean","null"]);function soe(t,e){return e?t.filter(r=>$M.has(r)||e==="array"&&r==="array"):[]}function ioe(t,e,r){let{gen:n,data:s,opts:i}=t,o=n.let("dataType",(0,de._)`typeof ${s}`),a=n.let("coerced",(0,de._)`undefined`);i.coerceTypes==="array"&&n.if((0,de._)`${o} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>n.assign(s,(0,de._)`${s}[0]`).assign(o,(0,de._)`typeof ${s}`).if(IE(e,s,i.strictNumbers),()=>n.assign(a,s))),n.if((0,de._)`${a} !== undefined`);for(let c of r)($M.has(c)||c==="array"&&i.coerceTypes==="array")&&l(c);n.else(),AE(t),n.endIf(),n.if((0,de._)`${a} !== undefined`,()=>{n.assign(s,a),ooe(t,a)});function l(c){switch(c){case"string":n.elseIf((0,de._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,de._)`"" + ${s}`).elseIf((0,de._)`${s} === null`).assign(a,(0,de._)`""`);return;case"number":n.elseIf((0,de._)`${o} == "boolean" || ${s} === null
              || (${o} == "string" && ${s} && ${s} == +${s})`).assign(a,(0,de._)`+${s}`);return;case"integer":n.elseIf((0,de._)`${o} === "boolean" || ${s} === null
              || (${o} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(a,(0,de._)`+${s}`);return;case"boolean":n.elseIf((0,de._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(a,!1).elseIf((0,de._)`${s} === "true" || ${s} === 1`).assign(a,!0);return;case"null":n.elseIf((0,de._)`${s} === "" || ${s} === 0 || ${s} === false`),n.assign(a,null);return;case"array":n.elseIf((0,de._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${s} === null`).assign(a,(0,de._)`[${s}]`)}}}function ooe({gen:t,parentData:e,parentDataProperty:r},n){t.if((0,de._)`${e} !== undefined`,()=>t.assign((0,de._)`${e}[${r}]`,n))}function CE(t,e,r,n=kl.Correct){let s=n===kl.Correct?de.operators.EQ:de.operators.NEQ,i;switch(t){case"null":return(0,de._)`${e} ${s} null`;case"array":i=(0,de._)`Array.isArray(${e})`;break;case"object":i=(0,de._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":i=o((0,de._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":i=o();break;default:return(0,de._)`typeof ${e} ${s} ${t}`}return n===kl.Correct?i:(0,de.not)(i);function o(a=de.nil){return(0,de.and)((0,de._)`typeof ${e} == "number"`,a,r?(0,de._)`isFinite(${e})`:de.nil)}}ar.checkDataType=CE;function IE(t,e,r,n){if(t.length===1)return CE(t[0],e,r,n);let s,i=(0,TM.toHash)(t);if(i.array&&i.object){let o=(0,de._)`typeof ${e} != "object"`;s=i.null?o:(0,de._)`!${e} || ${o}`,delete i.null,delete i.array,delete i.object}else s=de.nil;i.number&&delete i.integer;for(let o in i)s=(0,de.and)(s,CE(o,e,r,n));return s}ar.checkDataTypes=IE;var aoe={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,de._)`{type: ${t}}`:(0,de._)`{type: ${e}}`};function AE(t){let e=loe(t);(0,toe.reportError)(e,aoe)}ar.reportTypeError=AE;function loe(t){let{gen:e,data:r,schema:n}=t,s=(0,TM.schemaRefOrVal)(t,n,"type");return{gen:e,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:t}}});var PM=E(Cm=>{"use strict";Object.defineProperty(Cm,"__esModule",{value:!0});Cm.assignDefaults=void 0;var Dl=pe(),coe=Le();function uoe(t,e){let{properties:r,items:n}=t.schema;if(e==="object"&&r)for(let s in r)OM(t,s,r[s].default);else e==="array"&&Array.isArray(n)&&n.forEach((s,i)=>OM(t,i,s.default))}Cm.assignDefaults=uoe;function OM(t,e,r){let{gen:n,compositeRule:s,data:i,opts:o}=t;if(r===void 0)return;let a=(0,Dl._)`${i}${(0,Dl.getProperty)(e)}`;if(s){(0,coe.checkStrictMode)(t,`default is ignored for: ${a}`);return}let l=(0,Dl._)`${a} === undefined`;o.useDefaults==="empty"&&(l=(0,Dl._)`${l} || ${a} === null || ${a} === ""`),n.if(l,(0,Dl._)`${a} = ${(0,Dl.stringify)(r)}`)}});var gn=E(He=>{"use strict";Object.defineProperty(He,"__esModule",{value:!0});He.validateUnion=He.validateArray=He.usePattern=He.callValidateCode=He.schemaProperties=He.allSchemaProperties=He.noPropertyInData=He.propertyInData=He.isOwnProperty=He.hasPropFunc=He.reportMissingProp=He.checkMissingProp=He.checkReportMissingProp=void 0;var rt=pe(),kE=Le(),Hi=si(),foe=Le();function doe(t,e){let{gen:r,data:n,it:s}=t;r.if(ME(r,n,e,s.opts.ownProperties),()=>{t.setParams({missingProperty:(0,rt._)`${e}`},!0),t.error()})}He.checkReportMissingProp=doe;function hoe({gen:t,data:e,it:{opts:r}},n,s){return(0,rt.or)(...n.map(i=>(0,rt.and)(ME(t,e,i,r.ownProperties),(0,rt._)`${s} = ${i}`)))}He.checkMissingProp=hoe;function poe(t,e){t.setParams({missingProperty:e},!0),t.error()}He.reportMissingProp=poe;function xM(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,rt._)`Object.prototype.hasOwnProperty`})}He.hasPropFunc=xM;function DE(t,e,r){return(0,rt._)`${xM(t)}.call(${e}, ${r})`}He.isOwnProperty=DE;function moe(t,e,r,n){let s=(0,rt._)`${e}${(0,rt.getProperty)(r)} !== undefined`;return n?(0,rt._)`${s} && ${DE(t,e,r)}`:s}He.propertyInData=moe;function ME(t,e,r,n){let s=(0,rt._)`${e}${(0,rt.getProperty)(r)} === undefined`;return n?(0,rt.or)(s,(0,rt.not)(DE(t,e,r))):s}He.noPropertyInData=ME;function NM(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}He.allSchemaProperties=NM;function goe(t,e){return NM(e).filter(r=>!(0,kE.alwaysValidSchema)(t,e[r]))}He.schemaProperties=goe;function yoe({schemaCode:t,data:e,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:i},it:o},a,l,c){let u=c?(0,rt._)`${t}, ${e}, ${n}${s}`:e,d=[[Hi.default.instancePath,(0,rt.strConcat)(Hi.default.instancePath,i)],[Hi.default.parentData,o.parentData],[Hi.default.parentDataProperty,o.parentDataProperty],[Hi.default.rootData,Hi.default.rootData]];o.opts.dynamicRef&&d.push([Hi.default.dynamicAnchors,Hi.default.dynamicAnchors]);let p=(0,rt._)`${u}, ${r.object(...d)}`;return l!==rt.nil?(0,rt._)`${a}.call(${l}, ${p})`:(0,rt._)`${a}(${p})`}He.callValidateCode=yoe;var _oe=(0,rt._)`new RegExp`;function voe({gen:t,it:{opts:e}},r){let n=e.unicodeRegExp?"u":"",{regExp:s}=e.code,i=s(r,n);return t.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,rt._)`${s.code==="new RegExp"?_oe:(0,foe.useFunc)(t,s)}(${r}, ${n})`})}He.usePattern=voe;function woe(t){let{gen:e,data:r,keyword:n,it:s}=t,i=e.name("valid");if(s.allErrors){let a=e.let("valid",!0);return o(()=>e.assign(a,!1)),a}return e.var(i,!0),o(()=>e.break()),i;function o(a){let l=e.const("len",(0,rt._)`${r}.length`);e.forRange("i",0,l,c=>{t.subschema({keyword:n,dataProp:c,dataPropType:kE.Type.Num},i),e.if((0,rt.not)(i),a)})}}He.validateArray=woe;function boe(t){let{gen:e,schema:r,keyword:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(l=>(0,kE.alwaysValidSchema)(s,l))&&!s.opts.unevaluated)return;let o=e.let("valid",!1),a=e.name("_valid");e.block(()=>r.forEach((l,c)=>{let u=t.subschema({keyword:n,schemaProp:c,compositeRule:!0},a);e.assign(o,(0,rt._)`${o} || ${a}`),t.mergeValidEvaluated(u,a)||e.if((0,rt.not)(o))})),t.result(o,()=>t.reset(),()=>t.error(!0))}He.validateUnion=boe});var AM=E(Ts=>{"use strict";Object.defineProperty(Ts,"__esModule",{value:!0});Ts.validateKeywordUsage=Ts.validSchemaType=Ts.funcKeywordCode=Ts.macroKeywordCode=void 0;var Tr=pe(),ta=si(),Eoe=gn(),Soe=hf();function Toe(t,e){let{gen:r,keyword:n,schema:s,parentSchema:i,it:o}=t,a=e.macro.call(o.self,s,i,o),l=IM(r,n,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);let c=r.name("valid");t.subschema({schema:a,schemaPath:Tr.nil,errSchemaPath:`${o.errSchemaPath}/${n}`,topSchemaRef:l,compositeRule:!0},c),t.pass(c,()=>t.error(!0))}Ts.macroKeywordCode=Toe;function Roe(t,e){var r;let{gen:n,keyword:s,schema:i,parentSchema:o,$data:a,it:l}=t;Ooe(l,e);let c=!a&&e.compile?e.compile.call(l.self,i,o,l):e.validate,u=IM(n,s,c),d=n.let("valid");t.block$data(d,p),t.ok((r=e.valid)!==null&&r!==void 0?r:d);function p(){if(e.errors===!1)m(),e.modifying&&CM(t),y(()=>t.error());else{let g=e.async?f():h();e.modifying&&CM(t),y(()=>$oe(t,g))}}function f(){let g=n.let("ruleErrs",null);return n.try(()=>m((0,Tr._)`await `),w=>n.assign(d,!1).if((0,Tr._)`${w} instanceof ${l.ValidationError}`,()=>n.assign(g,(0,Tr._)`${w}.errors`),()=>n.throw(w))),g}function h(){let g=(0,Tr._)`${u}.errors`;return n.assign(g,null),m(Tr.nil),g}function m(g=e.async?(0,Tr._)`await `:Tr.nil){let w=l.opts.passContext?ta.default.this:ta.default.self,_=!("compile"in e&&!a||e.schema===!1);n.assign(d,(0,Tr._)`${g}${(0,Eoe.callValidateCode)(t,u,w,_)}`,e.modifying)}function y(g){var w;n.if((0,Tr.not)((w=e.valid)!==null&&w!==void 0?w:d),g)}}Ts.funcKeywordCode=Roe;function CM(t){let{gen:e,data:r,it:n}=t;e.if(n.parentData,()=>e.assign(r,(0,Tr._)`${n.parentData}[${n.parentDataProperty}]`))}function $oe(t,e){let{gen:r}=t;r.if((0,Tr._)`Array.isArray(${e})`,()=>{r.assign(ta.default.vErrors,(0,Tr._)`${ta.default.vErrors} === null ? ${e} : ${ta.default.vErrors}.concat(${e})`).assign(ta.default.errors,(0,Tr._)`${ta.default.vErrors}.length`),(0,Soe.extendErrors)(t)},()=>t.error())}function Ooe({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function IM(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,Tr.stringify)(r)})}function Poe(t,e,r=!1){return!e.length||e.some(n=>n==="array"?Array.isArray(t):n==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==n||r&&typeof t>"u")}Ts.validSchemaType=Poe;function xoe({schema:t,opts:e,self:r,errSchemaPath:n},s,i){if(Array.isArray(s.keyword)?!s.keyword.includes(i):s.keyword!==i)throw new Error("ajv implementation error");let o=s.dependencies;if(o?.some(a=>!Object.prototype.hasOwnProperty.call(t,a)))throw new Error(`parent schema must have dependencies of ${i}: ${o.join(",")}`);if(s.validateSchema&&!s.validateSchema(t[i])){let l=`keyword "${i}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(l);else throw new Error(l)}}Ts.validateKeywordUsage=xoe});var DM=E(Gi=>{"use strict";Object.defineProperty(Gi,"__esModule",{value:!0});Gi.extendSubschemaMode=Gi.extendSubschemaData=Gi.getSubschema=void 0;var Rs=pe(),kM=Le();function Noe(t,{keyword:e,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:i,topSchemaRef:o}){if(e!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){let a=t.schema[e];return r===void 0?{schema:a,schemaPath:(0,Rs._)`${t.schemaPath}${(0,Rs.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:a[r],schemaPath:(0,Rs._)`${t.schemaPath}${(0,Rs.getProperty)(e)}${(0,Rs.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,kM.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||i===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:o,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}Gi.getSubschema=Noe;function Coe(t,e,{dataProp:r,dataPropType:n,data:s,dataTypes:i,propertyName:o}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:a}=e;if(r!==void 0){let{errorPath:c,dataPathArr:u,opts:d}=e,p=a.let("data",(0,Rs._)`${e.data}${(0,Rs.getProperty)(r)}`,!0);l(p),t.errorPath=(0,Rs.str)`${c}${(0,kM.getErrorPath)(r,n,d.jsPropertySyntax)}`,t.parentDataProperty=(0,Rs._)`${r}`,t.dataPathArr=[...u,t.parentDataProperty]}if(s!==void 0){let c=s instanceof Rs.Name?s:a.let("data",s,!0);l(c),o!==void 0&&(t.propertyName=o)}i&&(t.dataTypes=i);function l(c){t.data=c,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,c]}}Gi.extendSubschemaData=Coe;function Ioe(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:i}){n!==void 0&&(t.compositeRule=n),s!==void 0&&(t.createErrors=s),i!==void 0&&(t.allErrors=i),t.jtdDiscriminator=e,t.jtdMetadata=r}Gi.extendSubschemaMode=Ioe});var jM=E((FIe,MM)=>{"use strict";var Wi=MM.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};Im(e,n,s,t,"",t)};Wi.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Wi.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Wi.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Wi.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Im(t,e,r,n,s,i,o,a,l,c){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,s,i,o,a,l,c);for(var u in n){var d=n[u];if(Array.isArray(d)){if(u in Wi.arrayKeywords)for(var p=0;p<d.length;p++)Im(t,e,r,d[p],s+"/"+u+"/"+p,i,s,u,n,p)}else if(u in Wi.propsKeywords){if(d&&typeof d=="object")for(var f in d)Im(t,e,r,d[f],s+"/"+u+"/"+Aoe(f),i,s,u,n,f)}else(u in Wi.keywords||t.allKeys&&!(u in Wi.skipKeywords))&&Im(t,e,r,d,s+"/"+u,i,s,u,n)}r(n,s,i,o,a,l,c)}}function Aoe(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}});var mf=E(zr=>{"use strict";Object.defineProperty(zr,"__esModule",{value:!0});zr.getSchemaRefs=zr.resolveUrl=zr.normalizeId=zr._getFullPath=zr.getFullPath=zr.inlineRef=void 0;var koe=Le(),Doe=Zs(),Moe=jM(),joe=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function qoe(t,e=!0){return typeof t=="boolean"?!0:e===!0?!jE(t):e?qM(t)<=e:!1}zr.inlineRef=qoe;var Loe=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function jE(t){for(let e in t){if(Loe.has(e))return!0;let r=t[e];if(Array.isArray(r)&&r.some(jE)||typeof r=="object"&&jE(r))return!0}return!1}function qM(t){let e=0;for(let r in t){if(r==="$ref")return 1/0;if(e++,!joe.has(r)&&(typeof t[r]=="object"&&(0,koe.eachItem)(t[r],n=>e+=qM(n)),e===1/0))return 1/0}return e}function LM(t,e="",r){r!==!1&&(e=Ml(e));let n=t.parse(e);return FM(t,n)}zr.getFullPath=LM;function FM(t,e){return t.serialize(e).split("#")[0]+"#"}zr._getFullPath=FM;var Foe=/#\/?$/;function Ml(t){return t?t.replace(Foe,""):""}zr.normalizeId=Ml;function Uoe(t,e,r){return r=Ml(r),t.resolve(e,r)}zr.resolveUrl=Uoe;var Boe=/^[a-z_][-a-z0-9._]*$/i;function zoe(t,e){if(typeof t=="boolean")return{};let{schemaId:r,uriResolver:n}=this.opts,s=Ml(t[r]||e),i={"":s},o=LM(n,s,!1),a={},l=new Set;return Moe(t,{allKeys:!0},(d,p,f,h)=>{if(h===void 0)return;let m=o+p,y=i[h];typeof d[r]=="string"&&(y=g.call(this,d[r])),w.call(this,d.$anchor),w.call(this,d.$dynamicAnchor),i[p]=y;function g(_){let v=this.opts.uriResolver.resolve;if(_=Ml(y?v(y,_):_),l.has(_))throw u(_);l.add(_);let S=this.refs[_];return typeof S=="string"&&(S=this.refs[S]),typeof S=="object"?c(d,S.schema,_):_!==Ml(m)&&(_[0]==="#"?(c(d,a[_],_),a[_]=d):this.refs[_]=m),_}function w(_){if(typeof _=="string"){if(!Boe.test(_))throw new Error(`invalid anchor "${_}"`);g.call(this,`#${_}`)}}}),a;function c(d,p,f){if(p!==void 0&&!Doe(d,p))throw u(f)}function u(d){return new Error(`reference "${d}" resolves to more than one schema`)}}zr.getSchemaRefs=zoe});var _f=E(Ki=>{"use strict";Object.defineProperty(Ki,"__esModule",{value:!0});Ki.getData=Ki.KeywordCxt=Ki.validateFunctionCode=void 0;var HM=bM(),UM=pf(),LE=NE(),Am=pf(),Voe=PM(),yf=AM(),qE=DM(),Q=pe(),ie=si(),Hoe=mf(),ii=Le(),gf=hf();function Goe(t){if(KM(t)&&(JM(t),WM(t))){Joe(t);return}GM(t,()=>(0,HM.topBoolOrEmptySchema)(t))}Ki.validateFunctionCode=Goe;function GM({gen:t,validateName:e,schema:r,schemaEnv:n,opts:s},i){s.code.es5?t.func(e,(0,Q._)`${ie.default.data}, ${ie.default.valCxt}`,n.$async,()=>{t.code((0,Q._)`"use strict"; ${BM(r,s)}`),Koe(t,s),t.code(i)}):t.func(e,(0,Q._)`${ie.default.data}, ${Woe(s)}`,n.$async,()=>t.code(BM(r,s)).code(i))}function Woe(t){return(0,Q._)`{${ie.default.instancePath}="", ${ie.default.parentData}, ${ie.default.parentDataProperty}, ${ie.default.rootData}=${ie.default.data}${t.dynamicRef?(0,Q._)`, ${ie.default.dynamicAnchors}={}`:Q.nil}}={}`}function Koe(t,e){t.if(ie.default.valCxt,()=>{t.var(ie.default.instancePath,(0,Q._)`${ie.default.valCxt}.${ie.default.instancePath}`),t.var(ie.default.parentData,(0,Q._)`${ie.default.valCxt}.${ie.default.parentData}`),t.var(ie.default.parentDataProperty,(0,Q._)`${ie.default.valCxt}.${ie.default.parentDataProperty}`),t.var(ie.default.rootData,(0,Q._)`${ie.default.valCxt}.${ie.default.rootData}`),e.dynamicRef&&t.var(ie.default.dynamicAnchors,(0,Q._)`${ie.default.valCxt}.${ie.default.dynamicAnchors}`)},()=>{t.var(ie.default.instancePath,(0,Q._)`""`),t.var(ie.default.parentData,(0,Q._)`undefined`),t.var(ie.default.parentDataProperty,(0,Q._)`undefined`),t.var(ie.default.rootData,ie.default.data),e.dynamicRef&&t.var(ie.default.dynamicAnchors,(0,Q._)`{}`)})}function Joe(t){let{schema:e,opts:r,gen:n}=t;GM(t,()=>{r.$comment&&e.$comment&&XM(t),eae(t),n.let(ie.default.vErrors,null),n.let(ie.default.errors,0),r.unevaluated&&Yoe(t),YM(t),nae(t)})}function Yoe(t){let{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,Q._)`${r}.evaluated`),e.if((0,Q._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,Q._)`${t.evaluated}.props`,(0,Q._)`undefined`)),e.if((0,Q._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,Q._)`${t.evaluated}.items`,(0,Q._)`undefined`))}function BM(t,e){let r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,Q._)`/*# sourceURL=${r} */`:Q.nil}function Xoe(t,e){if(KM(t)&&(JM(t),WM(t))){Qoe(t,e);return}(0,HM.boolOrEmptySchema)(t,e)}function WM({schema:t,self:e}){if(typeof t=="boolean")return!t;for(let r in t)if(e.RULES.all[r])return!0;return!1}function KM(t){return typeof t.schema!="boolean"}function Qoe(t,e){let{schema:r,gen:n,opts:s}=t;s.$comment&&r.$comment&&XM(t),tae(t),rae(t);let i=n.const("_errs",ie.default.errors);YM(t,i),n.var(e,(0,Q._)`${i} === ${ie.default.errors}`)}function JM(t){(0,ii.checkUnknownRules)(t),Zoe(t)}function YM(t,e){if(t.opts.jtd)return zM(t,[],!1,e);let r=(0,UM.getSchemaTypes)(t.schema),n=(0,UM.coerceAndCheckDataType)(t,r);zM(t,r,!n,e)}function Zoe(t){let{schema:e,errSchemaPath:r,opts:n,self:s}=t;e.$ref&&n.ignoreKeywordsWithRef&&(0,ii.schemaHasRulesButRef)(e,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function eae(t){let{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,ii.checkStrictMode)(t,"default is ignored in the schema root")}function tae(t){let e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,Hoe.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function rae(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function XM({gen:t,schemaEnv:e,schema:r,errSchemaPath:n,opts:s}){let i=r.$comment;if(s.$comment===!0)t.code((0,Q._)`${ie.default.self}.logger.log(${i})`);else if(typeof s.$comment=="function"){let o=(0,Q.str)`${n}/$comment`,a=t.scopeValue("root",{ref:e.root});t.code((0,Q._)`${ie.default.self}.opts.$comment(${i}, ${o}, ${a}.schema)`)}}function nae(t){let{gen:e,schemaEnv:r,validateName:n,ValidationError:s,opts:i}=t;r.$async?e.if((0,Q._)`${ie.default.errors} === 0`,()=>e.return(ie.default.data),()=>e.throw((0,Q._)`new ${s}(${ie.default.vErrors})`)):(e.assign((0,Q._)`${n}.errors`,ie.default.vErrors),i.unevaluated&&sae(t),e.return((0,Q._)`${ie.default.errors} === 0`))}function sae({gen:t,evaluated:e,props:r,items:n}){r instanceof Q.Name&&t.assign((0,Q._)`${e}.props`,r),n instanceof Q.Name&&t.assign((0,Q._)`${e}.items`,n)}function zM(t,e,r,n){let{gen:s,schema:i,data:o,allErrors:a,opts:l,self:c}=t,{RULES:u}=c;if(i.$ref&&(l.ignoreKeywordsWithRef||!(0,ii.schemaHasRulesButRef)(i,u))){s.block(()=>ZM(t,"$ref",u.all.$ref.definition));return}l.jtd||iae(t,e),s.block(()=>{for(let p of u.rules)d(p);d(u.post)});function d(p){(0,LE.shouldUseGroup)(i,p)&&(p.type?(s.if((0,Am.checkDataType)(p.type,o,l.strictNumbers)),VM(t,p),e.length===1&&e[0]===p.type&&r&&(s.else(),(0,Am.reportTypeError)(t)),s.endIf()):VM(t,p),a||s.if((0,Q._)`${ie.default.errors} === ${n||0}`))}}function VM(t,e){let{gen:r,schema:n,opts:{useDefaults:s}}=t;s&&(0,Voe.assignDefaults)(t,e.type),r.block(()=>{for(let i of e.rules)(0,LE.shouldUseRule)(n,i)&&ZM(t,i.keyword,i.definition,e.type)})}function iae(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(oae(t,e),t.opts.allowUnionTypes||aae(t,e),lae(t,t.dataTypes))}function oae(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{QM(t.dataTypes,r)||FE(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),uae(t,e)}}function aae(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&FE(t,"use allowUnionTypes to allow union type keyword")}function lae(t,e){let r=t.self.RULES.all;for(let n in r){let s=r[n];if(typeof s=="object"&&(0,LE.shouldUseRule)(t.schema,s)){let{type:i}=s.definition;i.length&&!i.some(o=>cae(e,o))&&FE(t,`missing type "${i.join(",")}" for keyword "${n}"`)}}}function cae(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function QM(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function uae(t,e){let r=[];for(let n of t.dataTypes)QM(e,n)?r.push(n):e.includes("integer")&&n==="number"&&r.push("integer");t.dataTypes=r}function FE(t,e){let r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,ii.checkStrictMode)(t,e,t.opts.strictTypes)}var km=class{constructor(e,r,n){if((0,yf.validateKeywordUsage)(e,r,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,ii.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",ej(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,yf.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",ie.default.errors))}result(e,r,n){this.failResult((0,Q.not)(e),r,n)}failResult(e,r,n){this.gen.if(e),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,Q.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:r}=this;this.fail((0,Q._)`${r} !== undefined && (${(0,Q.or)(this.invalid$data(),e)})`)}error(e,r,n){if(r){this.setParams(r),this._error(e,n),this.setParams({});return}this._error(e,n)}_error(e,r){(e?gf.reportExtraError:gf.reportError)(this,this.def.error,r)}$dataError(){(0,gf.reportError)(this,this.def.$dataError||gf.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,gf.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,n=Q.nil){this.gen.block(()=>{this.check$data(e,n),r()})}check$data(e=Q.nil,r=Q.nil){if(!this.$data)return;let{gen:n,schemaCode:s,schemaType:i,def:o}=this;n.if((0,Q.or)((0,Q._)`${s} === undefined`,r)),e!==Q.nil&&n.assign(e,!0),(i.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==Q.nil&&n.assign(e,!1)),n.else()}invalid$data(){let{gen:e,schemaCode:r,schemaType:n,def:s,it:i}=this;return(0,Q.or)(o(),a());function o(){if(n.length){if(!(r instanceof Q.Name))throw new Error("ajv implementation error");let l=Array.isArray(n)?n:[n];return(0,Q._)`${(0,Am.checkDataTypes)(l,r,i.opts.strictNumbers,Am.DataType.Wrong)}`}return Q.nil}function a(){if(s.validateSchema){let l=e.scopeValue("validate$data",{ref:s.validateSchema});return(0,Q._)`!${l}(${r})`}return Q.nil}}subschema(e,r){let n=(0,qE.getSubschema)(this.it,e);(0,qE.extendSubschemaData)(n,this.it,e),(0,qE.extendSubschemaMode)(n,e);let s={...this.it,...n,items:void 0,props:void 0};return Xoe(s,r),s}mergeEvaluated(e,r){let{it:n,gen:s}=this;n.opts.unevaluated&&(n.props!==!0&&e.props!==void 0&&(n.props=ii.mergeEvaluated.props(s,e.props,n.props,r)),n.items!==!0&&e.items!==void 0&&(n.items=ii.mergeEvaluated.items(s,e.items,n.items,r)))}mergeValidEvaluated(e,r){let{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(e,Q.Name)),!0}};Ki.KeywordCxt=km;function ZM(t,e,r,n){let s=new km(t,r,e);"code"in r?r.code(s,n):s.$data&&r.validate?(0,yf.funcKeywordCode)(s,r):"macro"in r?(0,yf.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,yf.funcKeywordCode)(s,r)}var fae=/^\/(?:[^~]|~0|~1)*$/,dae=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function ej(t,{dataLevel:e,dataNames:r,dataPathArr:n}){let s,i;if(t==="")return ie.default.rootData;if(t[0]==="/"){if(!fae.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);s=t,i=ie.default.rootData}else{let c=dae.exec(t);if(!c)throw new Error(`Invalid JSON-pointer: ${t}`);let u=+c[1];if(s=c[2],s==="#"){if(u>=e)throw new Error(l("property/index",u));return n[e-u]}if(u>e)throw new Error(l("data",u));if(i=r[e-u],!s)return i}let o=i,a=s.split("/");for(let c of a)c&&(i=(0,Q._)`${i}${(0,Q.getProperty)((0,ii.unescapeJsonPointer)(c))}`,o=(0,Q._)`${o} && ${i}`);return o;function l(c,u){return`Cannot access ${c} ${u} levels up, current level is ${e}`}}Ki.getData=ej});var Dm=E(BE=>{"use strict";Object.defineProperty(BE,"__esModule",{value:!0});var UE=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};BE.default=UE});var vf=E(HE=>{"use strict";Object.defineProperty(HE,"__esModule",{value:!0});var zE=mf(),VE=class extends Error{constructor(e,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,zE.resolveUrl)(e,r,n),this.missingSchema=(0,zE.normalizeId)((0,zE.getFullPath)(e,this.missingRef))}};HE.default=VE});var jm=E(yn=>{"use strict";Object.defineProperty(yn,"__esModule",{value:!0});yn.resolveSchema=yn.getCompilingSchema=yn.resolveRef=yn.compileSchema=yn.SchemaEnv=void 0;var Kn=pe(),hae=Dm(),ra=si(),Jn=mf(),tj=Le(),pae=_f(),jl=class{constructor(e){var r;this.refs={},this.dynamicAnchors={};let n;typeof e.schema=="object"&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,Jn.normalizeId)(n?.[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=n?.$async,this.refs={}}};yn.SchemaEnv=jl;function WE(t){let e=rj.call(this,t);if(e)return e;let r=(0,Jn.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new Kn.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i}),a;t.$async&&(a=o.scopeValue("Error",{ref:hae.default,code:(0,Kn._)`require("ajv/dist/runtime/validation_error").default`}));let l=o.scopeName("validate");t.validateName=l;let c={gen:o,allErrors:this.opts.allErrors,data:ra.default.data,parentData:ra.default.parentData,parentDataProperty:ra.default.parentDataProperty,dataNames:[ra.default.data],dataPathArr:[Kn.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,Kn.stringify)(t.schema)}:{ref:t.schema}),validateName:l,ValidationError:a,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:Kn.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Kn._)`""`,opts:this.opts,self:this},u;try{this._compilations.add(t),(0,pae.validateFunctionCode)(c),o.optimize(this.opts.code.optimize);let d=o.toString();u=`${o.scopeRefs(ra.default.scope)}return ${d}`,this.opts.code.process&&(u=this.opts.code.process(u,t));let f=new Function(`${ra.default.self}`,`${ra.default.scope}`,u)(this,this.scope.get());if(this.scope.value(l,{ref:f}),f.errors=null,f.schema=t.schema,f.schemaEnv=t,t.$async&&(f.$async=!0),this.opts.code.source===!0&&(f.source={validateName:l,validateCode:d,scopeValues:o._values}),this.opts.unevaluated){let{props:h,items:m}=c;f.evaluated={props:h instanceof Kn.Name?void 0:h,items:m instanceof Kn.Name?void 0:m,dynamicProps:h instanceof Kn.Name,dynamicItems:m instanceof Kn.Name},f.source&&(f.source.evaluated=(0,Kn.stringify)(f.evaluated))}return t.validate=f,t}catch(d){throw delete t.validate,delete t.validateName,u&&this.logger.error("Error compiling schema, function code:",u),d}finally{this._compilations.delete(t)}}yn.compileSchema=WE;function mae(t,e,r){var n;r=(0,Jn.resolveUrl)(this.opts.uriResolver,e,r);let s=t.refs[r];if(s)return s;let i=_ae.call(this,t,r);if(i===void 0){let o=(n=t.localRefs)===null||n===void 0?void 0:n[r],{schemaId:a}=this.opts;o&&(i=new jl({schema:o,schemaId:a,root:t,baseId:e}))}if(i!==void 0)return t.refs[r]=gae.call(this,i)}yn.resolveRef=mae;function gae(t){return(0,Jn.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:WE.call(this,t)}function rj(t){for(let e of this._compilations)if(yae(e,t))return e}yn.getCompilingSchema=rj;function yae(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function _ae(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||Mm.call(this,t,e)}function Mm(t,e){let r=this.opts.uriResolver.parse(e),n=(0,Jn._getFullPath)(this.opts.uriResolver,r),s=(0,Jn.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&n===s)return GE.call(this,r,t);let i=(0,Jn.normalizeId)(n),o=this.refs[i]||this.schemas[i];if(typeof o=="string"){let a=Mm.call(this,t,o);return typeof a?.schema!="object"?void 0:GE.call(this,r,a)}if(typeof o?.schema=="object"){if(o.validate||WE.call(this,o),i===(0,Jn.normalizeId)(e)){let{schema:a}=o,{schemaId:l}=this.opts,c=a[l];return c&&(s=(0,Jn.resolveUrl)(this.opts.uriResolver,s,c)),new jl({schema:a,schemaId:l,root:t,baseId:s})}return GE.call(this,r,o)}}yn.resolveSchema=Mm;var vae=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function GE(t,{baseId:e,schema:r,root:n}){var s;if(((s=t.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(let a of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let l=r[(0,tj.unescapeFragment)(a)];if(l===void 0)return;r=l;let c=typeof r=="object"&&r[this.opts.schemaId];!vae.has(a)&&c&&(e=(0,Jn.resolveUrl)(this.opts.uriResolver,e,c))}let i;if(typeof r!="boolean"&&r.$ref&&!(0,tj.schemaHasRulesButRef)(r,this.RULES)){let a=(0,Jn.resolveUrl)(this.opts.uriResolver,e,r.$ref);i=Mm.call(this,n,a)}let{schemaId:o}=this.opts;if(i=i||new jl({schema:r,schemaId:o,root:n,baseId:e}),i.schema!==i.root.schema)return i}});var nj=E((GIe,wae)=>{wae.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var ij=E(KE=>{"use strict";Object.defineProperty(KE,"__esModule",{value:!0});var sj=Sl();sj.code='require("ajv/dist/runtime/uri").default';KE.default=sj});var hj=E(Wt=>{"use strict";Object.defineProperty(Wt,"__esModule",{value:!0});Wt.CodeGen=Wt.Name=Wt.nil=Wt.stringify=Wt.str=Wt._=Wt.KeywordCxt=void 0;var bae=_f();Object.defineProperty(Wt,"KeywordCxt",{enumerable:!0,get:function(){return bae.KeywordCxt}});var ql=pe();Object.defineProperty(Wt,"_",{enumerable:!0,get:function(){return ql._}});Object.defineProperty(Wt,"str",{enumerable:!0,get:function(){return ql.str}});Object.defineProperty(Wt,"stringify",{enumerable:!0,get:function(){return ql.stringify}});Object.defineProperty(Wt,"nil",{enumerable:!0,get:function(){return ql.nil}});Object.defineProperty(Wt,"Name",{enumerable:!0,get:function(){return ql.Name}});Object.defineProperty(Wt,"CodeGen",{enumerable:!0,get:function(){return ql.CodeGen}});var Eae=Dm(),uj=vf(),Sae=xE(),wf=jm(),Tae=pe(),bf=mf(),qm=pf(),YE=Le(),oj=nj(),Rae=ij(),fj=(t,e)=>new RegExp(t,e);fj.code="new RegExp";var $ae=["removeAdditional","useDefaults","coerceTypes"],Oae=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),Pae={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},xae={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},aj=200;function Nae(t){var e,r,n,s,i,o,a,l,c,u,d,p,f,h,m,y,g,w,_,v,S,$,T,O,R;let P=t.strict,A=(e=t.code)===null||e===void 0?void 0:e.optimize,N=A===!0||A===void 0?1:A||0,C=(n=(r=t.code)===null||r===void 0?void 0:r.regExp)!==null&&n!==void 0?n:fj,z=(s=t.uriResolver)!==null&&s!==void 0?s:Rae.default;return{strictSchema:(o=(i=t.strictSchema)!==null&&i!==void 0?i:P)!==null&&o!==void 0?o:!0,strictNumbers:(l=(a=t.strictNumbers)!==null&&a!==void 0?a:P)!==null&&l!==void 0?l:!0,strictTypes:(u=(c=t.strictTypes)!==null&&c!==void 0?c:P)!==null&&u!==void 0?u:"log",strictTuples:(p=(d=t.strictTuples)!==null&&d!==void 0?d:P)!==null&&p!==void 0?p:"log",strictRequired:(h=(f=t.strictRequired)!==null&&f!==void 0?f:P)!==null&&h!==void 0?h:!1,code:t.code?{...t.code,optimize:N,regExp:C}:{optimize:N,regExp:C},loopRequired:(m=t.loopRequired)!==null&&m!==void 0?m:aj,loopEnum:(y=t.loopEnum)!==null&&y!==void 0?y:aj,meta:(g=t.meta)!==null&&g!==void 0?g:!0,messages:(w=t.messages)!==null&&w!==void 0?w:!0,inlineRefs:(_=t.inlineRefs)!==null&&_!==void 0?_:!0,schemaId:(v=t.schemaId)!==null&&v!==void 0?v:"$id",addUsedSchema:(S=t.addUsedSchema)!==null&&S!==void 0?S:!0,validateSchema:($=t.validateSchema)!==null&&$!==void 0?$:!0,validateFormats:(T=t.validateFormats)!==null&&T!==void 0?T:!0,unicodeRegExp:(O=t.unicodeRegExp)!==null&&O!==void 0?O:!0,int32range:(R=t.int32range)!==null&&R!==void 0?R:!0,uriResolver:z}}var Ef=class{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...Nae(e)};let{es5:r,lines:n}=this.opts.code;this.scope=new Tae.ValueScope({scope:{},prefixes:Oae,es5:r,lines:n}),this.logger=Mae(e.logger);let s=e.validateFormats;e.validateFormats=!1,this.RULES=(0,Sae.getRules)(),lj.call(this,Pae,e,"NOT SUPPORTED"),lj.call(this,xae,e,"DEPRECATED","warn"),this._metaOpts=kae.call(this),e.formats&&Iae.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&Aae.call(this,e.keywords),typeof e.meta=="object"&&this.addMetaSchema(e.meta),Cae.call(this),e.validateFormats=s}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:r,schemaId:n}=this.opts,s=oj;n==="id"&&(s={...oj},s.id=s.$id,delete s.$id),r&&e&&this.addMetaSchema(s,s[n],!1)}defaultMeta(){let{meta:e,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof e=="object"?e[r]||e:void 0}validate(e,r){let n;if(typeof e=="string"){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);let s=n(r);return"$async"in n||(this.errors=n.errors),s}compile(e,r){let n=this._addSchema(e,r);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:n}=this.opts;return s.call(this,e,r);async function s(u,d){await i.call(this,u.$schema);let p=this._addSchema(u,d);return p.validate||o.call(this,p)}async function i(u){u&&!this.getSchema(u)&&await s.call(this,{$ref:u},!0)}async function o(u){try{return this._compileSchemaEnv(u)}catch(d){if(!(d instanceof uj.default))throw d;return a.call(this,d),await l.call(this,d.missingSchema),o.call(this,u)}}function a({missingSchema:u,missingRef:d}){if(this.refs[u])throw new Error(`AnySchema ${u} is loaded but ${d} cannot be resolved`)}async function l(u){let d=await c.call(this,u);this.refs[u]||await i.call(this,d.$schema),this.refs[u]||this.addSchema(d,u,r)}async function c(u){let d=this._loading[u];if(d)return d;try{return await(this._loading[u]=n(u))}finally{delete this._loading[u]}}}addSchema(e,r,n,s=this.opts.validateSchema){if(Array.isArray(e)){for(let o of e)this.addSchema(o,void 0,n,s);return this}let i;if(typeof e=="object"){let{schemaId:o}=this.opts;if(i=e[o],i!==void 0&&typeof i!="string")throw new Error(`schema ${o} must be string`)}return r=(0,bf.normalizeId)(r||i),this._checkUnique(r),this.schemas[r]=this._addSchema(e,n,r,s,!0),this}addMetaSchema(e,r,n=this.opts.validateSchema){return this.addSchema(e,r,!0,n),this}validateSchema(e,r){if(typeof e=="boolean")return!0;let n;if(n=e.$schema,n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let s=this.validate(n,e);if(!s&&r){let i="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(i);else throw new Error(i)}return s}getSchema(e){let r;for(;typeof(r=cj.call(this,e))=="string";)e=r;if(r===void 0){let{schemaId:n}=this.opts,s=new wf.SchemaEnv({schema:{},schemaId:n});if(r=wf.resolveSchema.call(this,s,e),!r)return;this.refs[e]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=cj.call(this,e);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{let r=e;this._cache.delete(r);let n=e[this.opts.schemaId];return n&&(n=(0,bf.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let r of e)this.addKeyword(r);return this}addKeyword(e,r){let n;if(typeof e=="string")n=e,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=n);else if(typeof e=="object"&&r===void 0){if(r=e,n=r.keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(qae.call(this,n,r),!r)return(0,YE.eachItem)(n,i=>JE.call(this,i)),this;Fae.call(this,r);let s={...r,type:(0,qm.getJSONTypes)(r.type),schemaType:(0,qm.getJSONTypes)(r.schemaType)};return(0,YE.eachItem)(n,s.type.length===0?i=>JE.call(this,i,s):i=>s.type.forEach(o=>JE.call(this,i,s,o))),this}getKeyword(e){let r=this.RULES.all[e];return typeof r=="object"?r.definition:!!r}removeKeyword(e){let{RULES:r}=this;delete r.keywords[e],delete r.all[e];for(let n of r.rules){let s=n.rules.findIndex(i=>i.keyword===e);s>=0&&n.rules.splice(s,1)}return this}addFormat(e,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[e]=r,this}errorsText(e=this.errors,{separator:r=", ",dataVar:n="data"}={}){return!e||e.length===0?"No errors":e.map(s=>`${n}${s.instancePath} ${s.message}`).reduce((s,i)=>s+r+i)}$dataMetaSchema(e,r){let n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(let s of r){let i=s.split("/").slice(1),o=e;for(let a of i)o=o[a];for(let a in n){let l=n[a];if(typeof l!="object")continue;let{$data:c}=l.definition,u=o[a];c&&u&&(o[a]=dj(u))}}return e}_removeAllSchemas(e,r){for(let n in e){let s=e[n];(!r||r.test(n))&&(typeof s=="string"?delete e[n]:s&&!s.meta&&(this._cache.delete(s.schema),delete e[n]))}}_addSchema(e,r,n,s=this.opts.validateSchema,i=this.opts.addUsedSchema){let o,{schemaId:a}=this.opts;if(typeof e=="object")o=e[a];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof e!="boolean")throw new Error("schema must be object or boolean")}let l=this._cache.get(e);if(l!==void 0)return l;n=(0,bf.normalizeId)(o||n);let c=bf.getSchemaRefs.call(this,e,n);return l=new wf.SchemaEnv({schema:e,schemaId:a,meta:r,baseId:n,localRefs:c}),this._cache.set(l.schema,l),i&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=l),s&&this.validateSchema(e,!0),l}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):wf.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let r=this.opts;this.opts=this._metaOpts;try{wf.compileSchema.call(this,e)}finally{this.opts=r}}};Ef.ValidationError=Eae.default;Ef.MissingRefError=uj.default;Wt.default=Ef;function lj(t,e,r,n="error"){for(let s in t){let i=s;i in e&&this.logger[n](`${r}: option ${s}. ${t[i]}`)}}function cj(t){return t=(0,bf.normalizeId)(t),this.schemas[t]||this.refs[t]}function Cae(){let t=this.opts.schemas;if(t)if(Array.isArray(t))this.addSchema(t);else for(let e in t)this.addSchema(t[e],e)}function Iae(){for(let t in this.opts.formats){let e=this.opts.formats[t];e&&this.addFormat(t,e)}}function Aae(t){if(Array.isArray(t)){this.addVocabulary(t);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let e in t){let r=t[e];r.keyword||(r.keyword=e),this.addKeyword(r)}}function kae(){let t={...this.opts};for(let e of $ae)delete t[e];return t}var Dae={log(){},warn(){},error(){}};function Mae(t){if(t===!1)return Dae;if(t===void 0)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}var jae=/^[a-z_$][a-z0-9_$:-]*$/i;function qae(t,e){let{RULES:r}=this;if((0,YE.eachItem)(t,n=>{if(r.keywords[n])throw new Error(`Keyword ${n} is already defined`);if(!jae.test(n))throw new Error(`Keyword ${n} has invalid name`)}),!!e&&e.$data&&!("code"in e||"validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function JE(t,e,r){var n;let s=e?.post;if(r&&s)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:i}=this,o=s?i.post:i.rules.find(({type:l})=>l===r);if(o||(o={type:r,rules:[]},i.rules.push(o)),i.keywords[t]=!0,!e)return;let a={keyword:t,definition:{...e,type:(0,qm.getJSONTypes)(e.type),schemaType:(0,qm.getJSONTypes)(e.schemaType)}};e.before?Lae.call(this,o,a,e.before):o.rules.push(a),i.all[t]=a,(n=e.implements)===null||n===void 0||n.forEach(l=>this.addKeyword(l))}function Lae(t,e,r){let n=t.rules.findIndex(s=>s.keyword===r);n>=0?t.rules.splice(n,0,e):(t.rules.push(e),this.logger.warn(`rule ${r} is not defined`))}function Fae(t){let{metaSchema:e}=t;e!==void 0&&(t.$data&&this.opts.$data&&(e=dj(e)),t.validateSchema=this.compile(e,!0))}var Uae={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function dj(t){return{anyOf:[t,Uae]}}});var pj=E(XE=>{"use strict";Object.defineProperty(XE,"__esModule",{value:!0});var Bae={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};XE.default=Bae});var _j=E(na=>{"use strict";Object.defineProperty(na,"__esModule",{value:!0});na.callRef=na.getValidate=void 0;var zae=vf(),mj=gn(),Vr=pe(),Ll=si(),gj=jm(),Lm=Le(),Vae={keyword:"$ref",schemaType:"string",code(t){let{gen:e,schema:r,it:n}=t,{baseId:s,schemaEnv:i,validateName:o,opts:a,self:l}=n,{root:c}=i;if((r==="#"||r==="#/")&&s===c.baseId)return d();let u=gj.resolveRef.call(l,c,s,r);if(u===void 0)throw new zae.default(n.opts.uriResolver,s,r);if(u instanceof gj.SchemaEnv)return p(u);return f(u);function d(){if(i===c)return Fm(t,o,i,i.$async);let h=e.scopeValue("root",{ref:c});return Fm(t,(0,Vr._)`${h}.validate`,c,c.$async)}function p(h){let m=yj(t,h);Fm(t,m,h,h.$async)}function f(h){let m=e.scopeValue("schema",a.code.source===!0?{ref:h,code:(0,Vr.stringify)(h)}:{ref:h}),y=e.name("valid"),g=t.subschema({schema:h,dataTypes:[],schemaPath:Vr.nil,topSchemaRef:m,errSchemaPath:r},y);t.mergeEvaluated(g),t.ok(y)}}};function yj(t,e){let{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,Vr._)`${r.scopeValue("wrapper",{ref:e})}.validate`}na.getValidate=yj;function Fm(t,e,r,n){let{gen:s,it:i}=t,{allErrors:o,schemaEnv:a,opts:l}=i,c=l.passContext?Ll.default.this:Vr.nil;n?u():d();function u(){if(!a.$async)throw new Error("async schema referenced by sync schema");let h=s.let("valid");s.try(()=>{s.code((0,Vr._)`await ${(0,mj.callValidateCode)(t,e,c)}`),f(e),o||s.assign(h,!0)},m=>{s.if((0,Vr._)`!(${m} instanceof ${i.ValidationError})`,()=>s.throw(m)),p(m),o||s.assign(h,!1)}),t.ok(h)}function d(){t.result((0,mj.callValidateCode)(t,e,c),()=>f(e),()=>p(e))}function p(h){let m=(0,Vr._)`${h}.errors`;s.assign(Ll.default.vErrors,(0,Vr._)`${Ll.default.vErrors} === null ? ${m} : ${Ll.default.vErrors}.concat(${m})`),s.assign(Ll.default.errors,(0,Vr._)`${Ll.default.vErrors}.length`)}function f(h){var m;if(!i.opts.unevaluated)return;let y=(m=r?.validate)===null||m===void 0?void 0:m.evaluated;if(i.props!==!0)if(y&&!y.dynamicProps)y.props!==void 0&&(i.props=Lm.mergeEvaluated.props(s,y.props,i.props));else{let g=s.var("props",(0,Vr._)`${h}.evaluated.props`);i.props=Lm.mergeEvaluated.props(s,g,i.props,Vr.Name)}if(i.items!==!0)if(y&&!y.dynamicItems)y.items!==void 0&&(i.items=Lm.mergeEvaluated.items(s,y.items,i.items));else{let g=s.var("items",(0,Vr._)`${h}.evaluated.items`);i.items=Lm.mergeEvaluated.items(s,g,i.items,Vr.Name)}}}na.callRef=Fm;na.default=Vae});var vj=E(QE=>{"use strict";Object.defineProperty(QE,"__esModule",{value:!0});var Hae=pj(),Gae=_j(),Wae=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Hae.default,Gae.default];QE.default=Wae});var wj=E(ZE=>{"use strict";Object.defineProperty(ZE,"__esModule",{value:!0});var Um=pe(),Ji=Um.operators,Bm={maximum:{okStr:"<=",ok:Ji.LTE,fail:Ji.GT},minimum:{okStr:">=",ok:Ji.GTE,fail:Ji.LT},exclusiveMaximum:{okStr:"<",ok:Ji.LT,fail:Ji.GTE},exclusiveMinimum:{okStr:">",ok:Ji.GT,fail:Ji.LTE}},Kae={message:({keyword:t,schemaCode:e})=>(0,Um.str)`must be ${Bm[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,Um._)`{comparison: ${Bm[t].okStr}, limit: ${e}}`},Jae={keyword:Object.keys(Bm),type:"number",schemaType:"number",$data:!0,error:Kae,code(t){let{keyword:e,data:r,schemaCode:n}=t;t.fail$data((0,Um._)`${r} ${Bm[e].fail} ${n} || isNaN(${r})`)}};ZE.default=Jae});var bj=E(eS=>{"use strict";Object.defineProperty(eS,"__esModule",{value:!0});var Sf=pe(),Yae={message:({schemaCode:t})=>(0,Sf.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,Sf._)`{multipleOf: ${t}}`},Xae={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Yae,code(t){let{gen:e,data:r,schemaCode:n,it:s}=t,i=s.opts.multipleOfPrecision,o=e.let("res"),a=i?(0,Sf._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${i}`:(0,Sf._)`${o} !== parseInt(${o})`;t.fail$data((0,Sf._)`(${n} === 0 || (${o} = ${r}/${n}, ${a}))`)}};eS.default=Xae});var Sj=E(tS=>{"use strict";Object.defineProperty(tS,"__esModule",{value:!0});function Ej(t){let e=t.length,r=0,n=0,s;for(;n<e;)r++,s=t.charCodeAt(n++),s>=55296&&s<=56319&&n<e&&(s=t.charCodeAt(n),(s&64512)===56320&&n++);return r}tS.default=Ej;Ej.code='require("ajv/dist/runtime/ucs2length").default'});var Tj=E(rS=>{"use strict";Object.defineProperty(rS,"__esModule",{value:!0});var sa=pe(),Qae=Le(),Zae=Sj(),ele={message({keyword:t,schemaCode:e}){let r=t==="maxLength"?"more":"fewer";return(0,sa.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,sa._)`{limit: ${t}}`},tle={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:ele,code(t){let{keyword:e,data:r,schemaCode:n,it:s}=t,i=e==="maxLength"?sa.operators.GT:sa.operators.LT,o=s.opts.unicode===!1?(0,sa._)`${r}.length`:(0,sa._)`${(0,Qae.useFunc)(t.gen,Zae.default)}(${r})`;t.fail$data((0,sa._)`${o} ${i} ${n}`)}};rS.default=tle});var Rj=E(nS=>{"use strict";Object.defineProperty(nS,"__esModule",{value:!0});var rle=gn(),zm=pe(),nle={message:({schemaCode:t})=>(0,zm.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,zm._)`{pattern: ${t}}`},sle={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:nle,code(t){let{data:e,$data:r,schema:n,schemaCode:s,it:i}=t,o=i.opts.unicodeRegExp?"u":"",a=r?(0,zm._)`(new RegExp(${s}, ${o}))`:(0,rle.usePattern)(t,n);t.fail$data((0,zm._)`!${a}.test(${e})`)}};nS.default=sle});var $j=E(sS=>{"use strict";Object.defineProperty(sS,"__esModule",{value:!0});var Tf=pe(),ile={message({keyword:t,schemaCode:e}){let r=t==="maxProperties"?"more":"fewer";return(0,Tf.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,Tf._)`{limit: ${t}}`},ole={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:ile,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxProperties"?Tf.operators.GT:Tf.operators.LT;t.fail$data((0,Tf._)`Object.keys(${r}).length ${s} ${n}`)}};sS.default=ole});var Oj=E(iS=>{"use strict";Object.defineProperty(iS,"__esModule",{value:!0});var Rf=gn(),$f=pe(),ale=Le(),lle={message:({params:{missingProperty:t}})=>(0,$f.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,$f._)`{missingProperty: ${t}}`},cle={keyword:"required",type:"object",schemaType:"array",$data:!0,error:lle,code(t){let{gen:e,schema:r,schemaCode:n,data:s,$data:i,it:o}=t,{opts:a}=o;if(!i&&r.length===0)return;let l=r.length>=a.loopRequired;if(o.allErrors?c():u(),a.strictRequired){let f=t.parentSchema.properties,{definedProperties:h}=t.it;for(let m of r)if(f?.[m]===void 0&&!h.has(m)){let y=o.schemaEnv.baseId+o.errSchemaPath,g=`required property "${m}" is not defined at "${y}" (strictRequired)`;(0,ale.checkStrictMode)(o,g,o.opts.strictRequired)}}function c(){if(l||i)t.block$data($f.nil,d);else for(let f of r)(0,Rf.checkReportMissingProp)(t,f)}function u(){let f=e.let("missing");if(l||i){let h=e.let("valid",!0);t.block$data(h,()=>p(f,h)),t.ok(h)}else e.if((0,Rf.checkMissingProp)(t,r,f)),(0,Rf.reportMissingProp)(t,f),e.else()}function d(){e.forOf("prop",n,f=>{t.setParams({missingProperty:f}),e.if((0,Rf.noPropertyInData)(e,s,f,a.ownProperties),()=>t.error())})}function p(f,h){t.setParams({missingProperty:f}),e.forOf(f,n,()=>{e.assign(h,(0,Rf.propertyInData)(e,s,f,a.ownProperties)),e.if((0,$f.not)(h),()=>{t.error(),e.break()})},$f.nil)}}};iS.default=cle});var Pj=E(oS=>{"use strict";Object.defineProperty(oS,"__esModule",{value:!0});var Of=pe(),ule={message({keyword:t,schemaCode:e}){let r=t==="maxItems"?"more":"fewer";return(0,Of.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,Of._)`{limit: ${t}}`},fle={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:ule,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxItems"?Of.operators.GT:Of.operators.LT;t.fail$data((0,Of._)`${r}.length ${s} ${n}`)}};oS.default=fle});var Vm=E(aS=>{"use strict";Object.defineProperty(aS,"__esModule",{value:!0});var xj=Zs();xj.code='require("ajv/dist/runtime/equal").default';aS.default=xj});var Nj=E(cS=>{"use strict";Object.defineProperty(cS,"__esModule",{value:!0});var lS=pf(),Kt=pe(),dle=Le(),hle=Vm(),ple={message:({params:{i:t,j:e}})=>(0,Kt.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,Kt._)`{i: ${t}, j: ${e}}`},mle={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:ple,code(t){let{gen:e,data:r,$data:n,schema:s,parentSchema:i,schemaCode:o,it:a}=t;if(!n&&!s)return;let l=e.let("valid"),c=i.items?(0,lS.getSchemaTypes)(i.items):[];t.block$data(l,u,(0,Kt._)`${o} === false`),t.ok(l);function u(){let h=e.let("i",(0,Kt._)`${r}.length`),m=e.let("j");t.setParams({i:h,j:m}),e.assign(l,!0),e.if((0,Kt._)`${h} > 1`,()=>(d()?p:f)(h,m))}function d(){return c.length>0&&!c.some(h=>h==="object"||h==="array")}function p(h,m){let y=e.name("item"),g=(0,lS.checkDataTypes)(c,y,a.opts.strictNumbers,lS.DataType.Wrong),w=e.const("indices",(0,Kt._)`{}`);e.for((0,Kt._)`;${h}--;`,()=>{e.let(y,(0,Kt._)`${r}[${h}]`),e.if(g,(0,Kt._)`continue`),c.length>1&&e.if((0,Kt._)`typeof ${y} == "string"`,(0,Kt._)`${y} += "_"`),e.if((0,Kt._)`typeof ${w}[${y}] == "number"`,()=>{e.assign(m,(0,Kt._)`${w}[${y}]`),t.error(),e.assign(l,!1).break()}).code((0,Kt._)`${w}[${y}] = ${h}`)})}function f(h,m){let y=(0,dle.useFunc)(e,hle.default),g=e.name("outer");e.label(g).for((0,Kt._)`;${h}--;`,()=>e.for((0,Kt._)`${m} = ${h}; ${m}--;`,()=>e.if((0,Kt._)`${y}(${r}[${h}], ${r}[${m}])`,()=>{t.error(),e.assign(l,!1).break(g)})))}}};cS.default=mle});var Cj=E(fS=>{"use strict";Object.defineProperty(fS,"__esModule",{value:!0});var uS=pe(),gle=Le(),yle=Vm(),_le={message:"must be equal to constant",params:({schemaCode:t})=>(0,uS._)`{allowedValue: ${t}}`},vle={keyword:"const",$data:!0,error:_le,code(t){let{gen:e,data:r,$data:n,schemaCode:s,schema:i}=t;n||i&&typeof i=="object"?t.fail$data((0,uS._)`!${(0,gle.useFunc)(e,yle.default)}(${r}, ${s})`):t.fail((0,uS._)`${i} !== ${r}`)}};fS.default=vle});var Ij=E(dS=>{"use strict";Object.defineProperty(dS,"__esModule",{value:!0});var Pf=pe(),wle=Le(),ble=Vm(),Ele={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,Pf._)`{allowedValues: ${t}}`},Sle={keyword:"enum",schemaType:"array",$data:!0,error:Ele,code(t){let{gen:e,data:r,$data:n,schema:s,schemaCode:i,it:o}=t;if(!n&&s.length===0)throw new Error("enum must have non-empty array");let a=s.length>=o.opts.loopEnum,l,c=()=>l??(l=(0,wle.useFunc)(e,ble.default)),u;if(a||n)u=e.let("valid"),t.block$data(u,d);else{if(!Array.isArray(s))throw new Error("ajv implementation error");let f=e.const("vSchema",i);u=(0,Pf.or)(...s.map((h,m)=>p(f,m)))}t.pass(u);function d(){e.assign(u,!1),e.forOf("v",i,f=>e.if((0,Pf._)`${c()}(${r}, ${f})`,()=>e.assign(u,!0).break()))}function p(f,h){let m=s[h];return typeof m=="object"&&m!==null?(0,Pf._)`${c()}(${r}, ${f}[${h}])`:(0,Pf._)`${r} === ${m}`}}};dS.default=Sle});var Aj=E(hS=>{"use strict";Object.defineProperty(hS,"__esModule",{value:!0});var Tle=wj(),Rle=bj(),$le=Tj(),Ole=Rj(),Ple=$j(),xle=Oj(),Nle=Pj(),Cle=Nj(),Ile=Cj(),Ale=Ij(),kle=[Tle.default,Rle.default,$le.default,Ole.default,Ple.default,xle.default,Nle.default,Cle.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},Ile.default,Ale.default];hS.default=kle});var mS=E(xf=>{"use strict";Object.defineProperty(xf,"__esModule",{value:!0});xf.validateAdditionalItems=void 0;var ia=pe(),pS=Le(),Dle={message:({params:{len:t}})=>(0,ia.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,ia._)`{limit: ${t}}`},Mle={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:Dle,code(t){let{parentSchema:e,it:r}=t,{items:n}=e;if(!Array.isArray(n)){(0,pS.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}kj(t,n)}};function kj(t,e){let{gen:r,schema:n,data:s,keyword:i,it:o}=t;o.items=!0;let a=r.const("len",(0,ia._)`${s}.length`);if(n===!1)t.setParams({len:e.length}),t.pass((0,ia._)`${a} <= ${e.length}`);else if(typeof n=="object"&&!(0,pS.alwaysValidSchema)(o,n)){let c=r.var("valid",(0,ia._)`${a} <= ${e.length}`);r.if((0,ia.not)(c),()=>l(c)),t.ok(c)}function l(c){r.forRange("i",e.length,a,u=>{t.subschema({keyword:i,dataProp:u,dataPropType:pS.Type.Num},c),o.allErrors||r.if((0,ia.not)(c),()=>r.break())})}}xf.validateAdditionalItems=kj;xf.default=Mle});var gS=E(Nf=>{"use strict";Object.defineProperty(Nf,"__esModule",{value:!0});Nf.validateTuple=void 0;var Dj=pe(),Hm=Le(),jle=gn(),qle={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){let{schema:e,it:r}=t;if(Array.isArray(e))return Mj(t,"additionalItems",e);r.items=!0,!(0,Hm.alwaysValidSchema)(r,e)&&t.ok((0,jle.validateArray)(t))}};function Mj(t,e,r=t.schema){let{gen:n,parentSchema:s,data:i,keyword:o,it:a}=t;u(s),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=Hm.mergeEvaluated.items(n,r.length,a.items));let l=n.name("valid"),c=n.const("len",(0,Dj._)`${i}.length`);r.forEach((d,p)=>{(0,Hm.alwaysValidSchema)(a,d)||(n.if((0,Dj._)`${c} > ${p}`,()=>t.subschema({keyword:o,schemaProp:p,dataProp:p},l)),t.ok(l))});function u(d){let{opts:p,errSchemaPath:f}=a,h=r.length,m=h===d.minItems&&(h===d.maxItems||d[e]===!1);if(p.strictTuples&&!m){let y=`"${o}" is ${h}-tuple, but minItems or maxItems/${e} are not specified or different at path "${f}"`;(0,Hm.checkStrictMode)(a,y,p.strictTuples)}}}Nf.validateTuple=Mj;Nf.default=qle});var jj=E(yS=>{"use strict";Object.defineProperty(yS,"__esModule",{value:!0});var Lle=gS(),Fle={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,Lle.validateTuple)(t,"items")};yS.default=Fle});var Lj=E(_S=>{"use strict";Object.defineProperty(_S,"__esModule",{value:!0});var qj=pe(),Ule=Le(),Ble=gn(),zle=mS(),Vle={message:({params:{len:t}})=>(0,qj.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,qj._)`{limit: ${t}}`},Hle={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Vle,code(t){let{schema:e,parentSchema:r,it:n}=t,{prefixItems:s}=r;n.items=!0,!(0,Ule.alwaysValidSchema)(n,e)&&(s?(0,zle.validateAdditionalItems)(t,s):t.ok((0,Ble.validateArray)(t)))}};_S.default=Hle});var Fj=E(vS=>{"use strict";Object.defineProperty(vS,"__esModule",{value:!0});var _n=pe(),Gm=Le(),Gle={message:({params:{min:t,max:e}})=>e===void 0?(0,_n.str)`must contain at least ${t} valid item(s)`:(0,_n.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,_n._)`{minContains: ${t}}`:(0,_n._)`{minContains: ${t}, maxContains: ${e}}`},Wle={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Gle,code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:i}=t,o,a,{minContains:l,maxContains:c}=n;i.opts.next?(o=l===void 0?1:l,a=c):o=1;let u=e.const("len",(0,_n._)`${s}.length`);if(t.setParams({min:o,max:a}),a===void 0&&o===0){(0,Gm.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,Gm.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,Gm.alwaysValidSchema)(i,r)){let m=(0,_n._)`${u} >= ${o}`;a!==void 0&&(m=(0,_n._)`${m} && ${u} <= ${a}`),t.pass(m);return}i.items=!0;let d=e.name("valid");a===void 0&&o===1?f(d,()=>e.if(d,()=>e.break())):o===0?(e.let(d,!0),a!==void 0&&e.if((0,_n._)`${s}.length > 0`,p)):(e.let(d,!1),p()),t.result(d,()=>t.reset());function p(){let m=e.name("_valid"),y=e.let("count",0);f(m,()=>e.if(m,()=>h(y)))}function f(m,y){e.forRange("i",0,u,g=>{t.subschema({keyword:"contains",dataProp:g,dataPropType:Gm.Type.Num,compositeRule:!0},m),y()})}function h(m){e.code((0,_n._)`${m}++`),a===void 0?e.if((0,_n._)`${m} >= ${o}`,()=>e.assign(d,!0).break()):(e.if((0,_n._)`${m} > ${a}`,()=>e.assign(d,!1).break()),o===1?e.assign(d,!0):e.if((0,_n._)`${m} >= ${o}`,()=>e.assign(d,!0)))}}};vS.default=Wle});var zj=E($s=>{"use strict";Object.defineProperty($s,"__esModule",{value:!0});$s.validateSchemaDeps=$s.validatePropertyDeps=$s.error=void 0;var wS=pe(),Kle=Le(),Cf=gn();$s.error={message:({params:{property:t,depsCount:e,deps:r}})=>{let n=e===1?"property":"properties";return(0,wS.str)`must have ${n} ${r} when property ${t} is present`},params:({params:{property:t,depsCount:e,deps:r,missingProperty:n}})=>(0,wS._)`{property: ${t},
    missingProperty: ${n},
    depsCount: ${e},
    deps: ${r}}`};var Jle={keyword:"dependencies",type:"object",schemaType:"object",error:$s.error,code(t){let[e,r]=Yle(t);Uj(t,e),Bj(t,r)}};function Yle({schema:t}){let e={},r={};for(let n in t){if(n==="__proto__")continue;let s=Array.isArray(t[n])?e:r;s[n]=t[n]}return[e,r]}function Uj(t,e=t.schema){let{gen:r,data:n,it:s}=t;if(Object.keys(e).length===0)return;let i=r.let("missing");for(let o in e){let a=e[o];if(a.length===0)continue;let l=(0,Cf.propertyInData)(r,n,o,s.opts.ownProperties);t.setParams({property:o,depsCount:a.length,deps:a.join(", ")}),s.allErrors?r.if(l,()=>{for(let c of a)(0,Cf.checkReportMissingProp)(t,c)}):(r.if((0,wS._)`${l} && (${(0,Cf.checkMissingProp)(t,a,i)})`),(0,Cf.reportMissingProp)(t,i),r.else())}}$s.validatePropertyDeps=Uj;function Bj(t,e=t.schema){let{gen:r,data:n,keyword:s,it:i}=t,o=r.name("valid");for(let a in e)(0,Kle.alwaysValidSchema)(i,e[a])||(r.if((0,Cf.propertyInData)(r,n,a,i.opts.ownProperties),()=>{let l=t.subschema({keyword:s,schemaProp:a},o);t.mergeValidEvaluated(l,o)},()=>r.var(o,!0)),t.ok(o))}$s.validateSchemaDeps=Bj;$s.default=Jle});var Hj=E(bS=>{"use strict";Object.defineProperty(bS,"__esModule",{value:!0});var Vj=pe(),Xle=Le(),Qle={message:"property name must be valid",params:({params:t})=>(0,Vj._)`{propertyName: ${t.propertyName}}`},Zle={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Qle,code(t){let{gen:e,schema:r,data:n,it:s}=t;if((0,Xle.alwaysValidSchema)(s,r))return;let i=e.name("valid");e.forIn("key",n,o=>{t.setParams({propertyName:o}),t.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},i),e.if((0,Vj.not)(i),()=>{t.error(!0),s.allErrors||e.break()})}),t.ok(i)}};bS.default=Zle});var SS=E(ES=>{"use strict";Object.defineProperty(ES,"__esModule",{value:!0});var Wm=gn(),Yn=pe(),ece=si(),Km=Le(),tce={message:"must NOT have additional properties",params:({params:t})=>(0,Yn._)`{additionalProperty: ${t.additionalProperty}}`},rce={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:tce,code(t){let{gen:e,schema:r,parentSchema:n,data:s,errsCount:i,it:o}=t;if(!i)throw new Error("ajv implementation error");let{allErrors:a,opts:l}=o;if(o.props=!0,l.removeAdditional!=="all"&&(0,Km.alwaysValidSchema)(o,r))return;let c=(0,Wm.allSchemaProperties)(n.properties),u=(0,Wm.allSchemaProperties)(n.patternProperties);d(),t.ok((0,Yn._)`${i} === ${ece.default.errors}`);function d(){e.forIn("key",s,y=>{!c.length&&!u.length?h(y):e.if(p(y),()=>h(y))})}function p(y){let g;if(c.length>8){let w=(0,Km.schemaRefOrVal)(o,n.properties,"properties");g=(0,Wm.isOwnProperty)(e,w,y)}else c.length?g=(0,Yn.or)(...c.map(w=>(0,Yn._)`${y} === ${w}`)):g=Yn.nil;return u.length&&(g=(0,Yn.or)(g,...u.map(w=>(0,Yn._)`${(0,Wm.usePattern)(t,w)}.test(${y})`))),(0,Yn.not)(g)}function f(y){e.code((0,Yn._)`delete ${s}[${y}]`)}function h(y){if(l.removeAdditional==="all"||l.removeAdditional&&r===!1){f(y);return}if(r===!1){t.setParams({additionalProperty:y}),t.error(),a||e.break();return}if(typeof r=="object"&&!(0,Km.alwaysValidSchema)(o,r)){let g=e.name("valid");l.removeAdditional==="failing"?(m(y,g,!1),e.if((0,Yn.not)(g),()=>{t.reset(),f(y)})):(m(y,g),a||e.if((0,Yn.not)(g),()=>e.break()))}}function m(y,g,w){let _={keyword:"additionalProperties",dataProp:y,dataPropType:Km.Type.Str};w===!1&&Object.assign(_,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(_,g)}}};ES.default=rce});var Kj=E(RS=>{"use strict";Object.defineProperty(RS,"__esModule",{value:!0});var nce=_f(),Gj=gn(),TS=Le(),Wj=SS(),sce={keyword:"properties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:i}=t;i.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&Wj.default.code(new nce.KeywordCxt(i,Wj.default,"additionalProperties"));let o=(0,Gj.allSchemaProperties)(r);for(let d of o)i.definedProperties.add(d);i.opts.unevaluated&&o.length&&i.props!==!0&&(i.props=TS.mergeEvaluated.props(e,(0,TS.toHash)(o),i.props));let a=o.filter(d=>!(0,TS.alwaysValidSchema)(i,r[d]));if(a.length===0)return;let l=e.name("valid");for(let d of a)c(d)?u(d):(e.if((0,Gj.propertyInData)(e,s,d,i.opts.ownProperties)),u(d),i.allErrors||e.else().var(l,!0),e.endIf()),t.it.definedProperties.add(d),t.ok(l);function c(d){return i.opts.useDefaults&&!i.compositeRule&&r[d].default!==void 0}function u(d){t.subschema({keyword:"properties",schemaProp:d,dataProp:d},l)}}};RS.default=sce});var Qj=E($S=>{"use strict";Object.defineProperty($S,"__esModule",{value:!0});var Jj=gn(),Jm=pe(),Yj=Le(),Xj=Le(),ice={keyword:"patternProperties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,data:n,parentSchema:s,it:i}=t,{opts:o}=i,a=(0,Jj.allSchemaProperties)(r),l=a.filter(m=>(0,Yj.alwaysValidSchema)(i,r[m]));if(a.length===0||l.length===a.length&&(!i.opts.unevaluated||i.props===!0))return;let c=o.strictSchema&&!o.allowMatchingProperties&&s.properties,u=e.name("valid");i.props!==!0&&!(i.props instanceof Jm.Name)&&(i.props=(0,Xj.evaluatedPropsToName)(e,i.props));let{props:d}=i;p();function p(){for(let m of a)c&&f(m),i.allErrors?h(m):(e.var(u,!0),h(m),e.if(u))}function f(m){for(let y in c)new RegExp(m).test(y)&&(0,Yj.checkStrictMode)(i,`property ${y} matches pattern ${m} (use allowMatchingProperties)`)}function h(m){e.forIn("key",n,y=>{e.if((0,Jm._)`${(0,Jj.usePattern)(t,m)}.test(${y})`,()=>{let g=l.includes(m);g||t.subschema({keyword:"patternProperties",schemaProp:m,dataProp:y,dataPropType:Xj.Type.Str},u),i.opts.unevaluated&&d!==!0?e.assign((0,Jm._)`${d}[${y}]`,!0):!g&&!i.allErrors&&e.if((0,Jm.not)(u),()=>e.break())})})}}};$S.default=ice});var Zj=E(OS=>{"use strict";Object.defineProperty(OS,"__esModule",{value:!0});var oce=Le(),ace={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){let{gen:e,schema:r,it:n}=t;if((0,oce.alwaysValidSchema)(n,r)){t.fail();return}let s=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),t.failResult(s,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};OS.default=ace});var eq=E(PS=>{"use strict";Object.defineProperty(PS,"__esModule",{value:!0});var lce=gn(),cce={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:lce.validateUnion,error:{message:"must match a schema in anyOf"}};PS.default=cce});var tq=E(xS=>{"use strict";Object.defineProperty(xS,"__esModule",{value:!0});var Ym=pe(),uce=Le(),fce={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,Ym._)`{passingSchemas: ${t.passing}}`},dce={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:fce,code(t){let{gen:e,schema:r,parentSchema:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&n.discriminator)return;let i=r,o=e.let("valid",!1),a=e.let("passing",null),l=e.name("_valid");t.setParams({passing:a}),e.block(c),t.result(o,()=>t.reset(),()=>t.error(!0));function c(){i.forEach((u,d)=>{let p;(0,uce.alwaysValidSchema)(s,u)?e.var(l,!0):p=t.subschema({keyword:"oneOf",schemaProp:d,compositeRule:!0},l),d>0&&e.if((0,Ym._)`${l} && ${o}`).assign(o,!1).assign(a,(0,Ym._)`[${a}, ${d}]`).else(),e.if(l,()=>{e.assign(o,!0),e.assign(a,d),p&&t.mergeEvaluated(p,Ym.Name)})})}}};xS.default=dce});var rq=E(NS=>{"use strict";Object.defineProperty(NS,"__esModule",{value:!0});var hce=Le(),pce={keyword:"allOf",schemaType:"array",code(t){let{gen:e,schema:r,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");let s=e.name("valid");r.forEach((i,o)=>{if((0,hce.alwaysValidSchema)(n,i))return;let a=t.subschema({keyword:"allOf",schemaProp:o},s);t.ok(s),t.mergeEvaluated(a)})}};NS.default=pce});var iq=E(CS=>{"use strict";Object.defineProperty(CS,"__esModule",{value:!0});var Xm=pe(),sq=Le(),mce={message:({params:t})=>(0,Xm.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,Xm._)`{failingKeyword: ${t.ifClause}}`},gce={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:mce,code(t){let{gen:e,parentSchema:r,it:n}=t;r.then===void 0&&r.else===void 0&&(0,sq.checkStrictMode)(n,'"if" without "then" and "else" is ignored');let s=nq(n,"then"),i=nq(n,"else");if(!s&&!i)return;let o=e.let("valid",!0),a=e.name("_valid");if(l(),t.reset(),s&&i){let u=e.let("ifClause");t.setParams({ifClause:u}),e.if(a,c("then",u),c("else",u))}else s?e.if(a,c("then")):e.if((0,Xm.not)(a),c("else"));t.pass(o,()=>t.error(!0));function l(){let u=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);t.mergeEvaluated(u)}function c(u,d){return()=>{let p=t.subschema({keyword:u},a);e.assign(o,a),t.mergeValidEvaluated(p,o),d?e.assign(d,(0,Xm._)`${u}`):t.setParams({ifClause:u})}}}};function nq(t,e){let r=t.schema[e];return r!==void 0&&!(0,sq.alwaysValidSchema)(t,r)}CS.default=gce});var oq=E(IS=>{"use strict";Object.defineProperty(IS,"__esModule",{value:!0});var yce=Le(),_ce={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,yce.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};IS.default=_ce});var aq=E(AS=>{"use strict";Object.defineProperty(AS,"__esModule",{value:!0});var vce=mS(),wce=jj(),bce=gS(),Ece=Lj(),Sce=Fj(),Tce=zj(),Rce=Hj(),$ce=SS(),Oce=Kj(),Pce=Qj(),xce=Zj(),Nce=eq(),Cce=tq(),Ice=rq(),Ace=iq(),kce=oq();function Dce(t=!1){let e=[xce.default,Nce.default,Cce.default,Ice.default,Ace.default,kce.default,Rce.default,$ce.default,Tce.default,Oce.default,Pce.default];return t?e.push(wce.default,Ece.default):e.push(vce.default,bce.default),e.push(Sce.default),e}AS.default=Dce});var lq=E(kS=>{"use strict";Object.defineProperty(kS,"__esModule",{value:!0});var bt=pe(),Mce={message:({schemaCode:t})=>(0,bt.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,bt._)`{format: ${t}}`},jce={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:Mce,code(t,e){let{gen:r,data:n,$data:s,schema:i,schemaCode:o,it:a}=t,{opts:l,errSchemaPath:c,schemaEnv:u,self:d}=a;if(!l.validateFormats)return;s?p():f();function p(){let h=r.scopeValue("formats",{ref:d.formats,code:l.code.formats}),m=r.const("fDef",(0,bt._)`${h}[${o}]`),y=r.let("fType"),g=r.let("format");r.if((0,bt._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>r.assign(y,(0,bt._)`${m}.type || "string"`).assign(g,(0,bt._)`${m}.validate`),()=>r.assign(y,(0,bt._)`"string"`).assign(g,m)),t.fail$data((0,bt.or)(w(),_()));function w(){return l.strictSchema===!1?bt.nil:(0,bt._)`${o} && !${g}`}function _(){let v=u.$async?(0,bt._)`(${m}.async ? await ${g}(${n}) : ${g}(${n}))`:(0,bt._)`${g}(${n})`,S=(0,bt._)`(typeof ${g} == "function" ? ${v} : ${g}.test(${n}))`;return(0,bt._)`${g} && ${g} !== true && ${y} === ${e} && !${S}`}}function f(){let h=d.formats[i];if(!h){w();return}if(h===!0)return;let[m,y,g]=_(h);m===e&&t.pass(v());function w(){if(l.strictSchema===!1){d.logger.warn(S());return}throw new Error(S());function S(){return`unknown format "${i}" ignored in schema at path "${c}"`}}function _(S){let $=S instanceof RegExp?(0,bt.regexpCode)(S):l.code.formats?(0,bt._)`${l.code.formats}${(0,bt.getProperty)(i)}`:void 0,T=r.scopeValue("formats",{key:i,ref:S,code:$});return typeof S=="object"&&!(S instanceof RegExp)?[S.type||"string",S.validate,(0,bt._)`${T}.validate`]:["string",S,T]}function v(){if(typeof h=="object"&&!(h instanceof RegExp)&&h.async){if(!u.$async)throw new Error("async format in sync schema");return(0,bt._)`await ${g}(${n})`}return typeof y=="function"?(0,bt._)`${g}(${n})`:(0,bt._)`${g}.test(${n})`}}}};kS.default=jce});var cq=E(DS=>{"use strict";Object.defineProperty(DS,"__esModule",{value:!0});var qce=lq(),Lce=[qce.default];DS.default=Lce});var uq=E(Fl=>{"use strict";Object.defineProperty(Fl,"__esModule",{value:!0});Fl.contentVocabulary=Fl.metadataVocabulary=void 0;Fl.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Fl.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var dq=E(MS=>{"use strict";Object.defineProperty(MS,"__esModule",{value:!0});var Fce=vj(),Uce=Aj(),Bce=aq(),zce=cq(),fq=uq(),Vce=[Fce.default,Uce.default,(0,Bce.default)(),zce.default,fq.metadataVocabulary,fq.contentVocabulary];MS.default=Vce});var pq=E(Qm=>{"use strict";Object.defineProperty(Qm,"__esModule",{value:!0});Qm.DiscrError=void 0;var hq;(function(t){t.Tag="tag",t.Mapping="mapping"})(hq||(Qm.DiscrError=hq={}))});var gq=E(qS=>{"use strict";Object.defineProperty(qS,"__esModule",{value:!0});var Ul=pe(),jS=pq(),mq=jm(),Hce=vf(),Gce=Le(),Wce={message:({params:{discrError:t,tagName:e}})=>t===jS.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,Ul._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},Kce={keyword:"discriminator",type:"object",schemaType:"object",error:Wce,code(t){let{gen:e,data:r,schema:n,parentSchema:s,it:i}=t,{oneOf:o}=s;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");let a=n.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");let l=e.let("valid",!1),c=e.const("tag",(0,Ul._)`${r}${(0,Ul.getProperty)(a)}`);e.if((0,Ul._)`typeof ${c} == "string"`,()=>u(),()=>t.error(!1,{discrError:jS.DiscrError.Tag,tag:c,tagName:a})),t.ok(l);function u(){let f=p();e.if(!1);for(let h in f)e.elseIf((0,Ul._)`${c} === ${h}`),e.assign(l,d(f[h]));e.else(),t.error(!1,{discrError:jS.DiscrError.Mapping,tag:c,tagName:a}),e.endIf()}function d(f){let h=e.name("valid"),m=t.subschema({keyword:"oneOf",schemaProp:f},h);return t.mergeEvaluated(m,Ul.Name),h}function p(){var f;let h={},m=g(s),y=!0;for(let v=0;v<o.length;v++){let S=o[v];if(S?.$ref&&!(0,Gce.schemaHasRulesButRef)(S,i.self.RULES)){let T=S.$ref;if(S=mq.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,T),S instanceof mq.SchemaEnv&&(S=S.schema),S===void 0)throw new Hce.default(i.opts.uriResolver,i.baseId,T)}let $=(f=S?.properties)===null||f===void 0?void 0:f[a];if(typeof $!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);y=y&&(m||g(S)),w($,v)}if(!y)throw new Error(`discriminator: "${a}" must be required`);return h;function g({required:v}){return Array.isArray(v)&&v.includes(a)}function w(v,S){if(v.const)_(v.const,S);else if(v.enum)for(let $ of v.enum)_($,S);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function _(v,S){if(typeof v!="string"||v in h)throw new Error(`discriminator: "${a}" values must be unique strings`);h[v]=S}}}};qS.default=Kce});var yq=E((kAe,Jce)=>{Jce.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var vq=E((nt,LS)=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});nt.MissingRefError=nt.ValidationError=nt.CodeGen=nt.Name=nt.nil=nt.stringify=nt.str=nt._=nt.KeywordCxt=nt.Ajv=void 0;var Yce=hj(),Xce=dq(),Qce=gq(),_q=yq(),Zce=["/properties"],Zm="http://json-schema.org/draft-07/schema",Bl=class extends Yce.default{_addVocabularies(){super._addVocabularies(),Xce.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(Qce.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let e=this.opts.$data?this.$dataMetaSchema(_q,Zce):_q;this.addMetaSchema(e,Zm,!1),this.refs["http://json-schema.org/schema"]=Zm}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(Zm)?Zm:void 0)}};nt.Ajv=Bl;LS.exports=nt=Bl;LS.exports.Ajv=Bl;Object.defineProperty(nt,"__esModule",{value:!0});nt.default=Bl;var eue=_f();Object.defineProperty(nt,"KeywordCxt",{enumerable:!0,get:function(){return eue.KeywordCxt}});var zl=pe();Object.defineProperty(nt,"_",{enumerable:!0,get:function(){return zl._}});Object.defineProperty(nt,"str",{enumerable:!0,get:function(){return zl.str}});Object.defineProperty(nt,"stringify",{enumerable:!0,get:function(){return zl.stringify}});Object.defineProperty(nt,"nil",{enumerable:!0,get:function(){return zl.nil}});Object.defineProperty(nt,"Name",{enumerable:!0,get:function(){return zl.Name}});Object.defineProperty(nt,"CodeGen",{enumerable:!0,get:function(){return zl.CodeGen}});var tue=Dm();Object.defineProperty(nt,"ValidationError",{enumerable:!0,get:function(){return tue.default}});var rue=vf();Object.defineProperty(nt,"MissingRefError",{enumerable:!0,get:function(){return rue.default}})});var wq=E(Vl=>{"use strict";Object.defineProperty(Vl,"__esModule",{value:!0});Vl.formatLimitDefinition=void 0;var nue=vq(),Xn=pe(),Yi=Xn.operators,eg={formatMaximum:{okStr:"<=",ok:Yi.LTE,fail:Yi.GT},formatMinimum:{okStr:">=",ok:Yi.GTE,fail:Yi.LT},formatExclusiveMaximum:{okStr:"<",ok:Yi.LT,fail:Yi.GTE},formatExclusiveMinimum:{okStr:">",ok:Yi.GT,fail:Yi.LTE}},sue={message:({keyword:t,schemaCode:e})=>(0,Xn.str)`should be ${eg[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,Xn._)`{comparison: ${eg[t].okStr}, limit: ${e}}`};Vl.formatLimitDefinition={keyword:Object.keys(eg),type:"string",schemaType:"string",$data:!0,error:sue,code(t){let{gen:e,data:r,schemaCode:n,keyword:s,it:i}=t,{opts:o,self:a}=i;if(!o.validateFormats)return;let l=new nue.KeywordCxt(i,a.RULES.all.format.definition,"format");l.$data?c():u();function c(){let p=e.scopeValue("formats",{ref:a.formats,code:o.code.formats}),f=e.const("fmt",(0,Xn._)`${p}[${l.schemaCode}]`);t.fail$data((0,Xn.or)((0,Xn._)`typeof ${f} != "object"`,(0,Xn._)`${f} instanceof RegExp`,(0,Xn._)`typeof ${f}.compare != "function"`,d(f)))}function u(){let p=l.schema,f=a.formats[p];if(!f||f===!0)return;if(typeof f!="object"||f instanceof RegExp||typeof f.compare!="function")throw new Error(`"${s}": format "${p}" does not define "compare" function`);let h=e.scopeValue("formats",{key:p,ref:f,code:o.code.formats?(0,Xn._)`${o.code.formats}${(0,Xn.getProperty)(p)}`:void 0});t.fail$data(d(h))}function d(p){return(0,Xn._)`${p}.compare(${r}, ${n}) ${eg[s].fail} 0`}},dependencies:["format"]};var iue=t=>(t.addKeyword(Vl.formatLimitDefinition),t);Vl.default=iue});var BS=E((If,Sq)=>{"use strict";Object.defineProperty(If,"__esModule",{value:!0});var Hl=Em(),oue=wq(),FS=pe(),bq=new FS.Name("fullFormats"),aue=new FS.Name("fastFormats"),US=(t,e={keywords:!0})=>{if(Array.isArray(e))return Eq(t,e,Hl.fullFormats,bq),t;let[r,n]=e.mode==="fast"?[Hl.fastFormats,aue]:[Hl.fullFormats,bq],s=e.formats||Hl.formatNames;return Eq(t,s,r,n),e.keywords&&(0,oue.default)(t),t};US.get=(t,e="full")=>{let n=(e==="fast"?Hl.fastFormats:Hl.fullFormats)[t];if(!n)throw new Error(`Unknown format "${t}"`);return n};function Eq(t,e,r,n){var s,i;(s=(i=t.opts.code).formats)!==null&&s!==void 0||(i.formats=(0,FS._)`require("ajv-formats/dist/formats").${n}`);for(let o of e)t.addFormat(o,r[o])}Sq.exports=If=US;Object.defineProperty(If,"__esModule",{value:!0});If.default=US});var zS=E((MAe,Tq)=>{"use strict";var lue=QD(),cue=Sl(),uue=BS(),fue=wp()({proto:!0}),Af=class{constructor(e){this.ajv=new lue({...e,strictSchema:!1,validateSchema:!1,allowUnionTypes:!0,uriResolver:cue}),uue(this.ajv),this.ajv.addKeyword({keyword:"fjs_type",type:"object",errors:!1,validate:(r,n)=>n instanceof Date}),this._ajvSchemas={},this._ajvOptions=e||{}}addSchema(e,r){let n=e.$id||r;if(e.$id!==void 0&&e.$id[0]==="#"&&(n=r+e.$id),this.ajv.refs[n]===void 0&&this.ajv.schemas[n]===void 0){let s=fue(e);this.convertSchemaToAjvFormat(s),this.ajv.addSchema(s,n),this._ajvSchemas[n]=e}}validate(e,r){return this.ajv.validate(e,r)}convertSchemaToAjvFormat(e){if(e!==null){e.type==="string"?(e.fjs_type="string",e.type=["string","object"]):Array.isArray(e.type)&&e.type.includes("string")&&!e.type.includes("object")&&(e.fjs_type="string",e.type.push("object"));for(let r in e)typeof e[r]=="object"&&this.convertSchemaToAjvFormat(e[r])}}getState(){return{ajvOptions:this._ajvOptions,ajvSchemas:this._ajvSchemas}}static restoreFromState(e){let r=new Af(e.ajvOptions);for(let[n,s]of Object.entries(e.ajvSchemas))r.ajv.addSchema(s,n);return r}};Tq.exports=Af});var $q=E((jAe,Rq)=>{"use strict";var kf=class{constructor(e,r,n="#"){this.schema=e,this.schemaId=r,this.jsonPointer=n}getPropertyLocation(e){return new kf(this.schema[e],this.schemaId,this.jsonPointer+"/"+e)}getSchemaRef(){return this.schemaId+this.jsonPointer}};Rq.exports=kf});var Cq=E((qAe,HS)=>{"use strict";HS.exports=q;HS.exports.default=q;var due={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0},Oq={enum:["array","boolean","integer","null","number","object","string"]},Pq=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,hue=Em().fullFormats.uri,xq=Em().fullFormats.regex;function vn(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0,a=o;return typeof t=="number"&&!(t%1)&&!isNaN(t)&&isFinite(t)?o===a&&typeof t=="number"&&isFinite(t)&&(t<0||isNaN(t))?(vn.errors=[{instancePath:e,schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1):(vn.errors=i,o===0):(vn.errors=[{instancePath:e,schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1)}var VS={validate:q};function Rr(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(o===0)if(Array.isArray(t)){if(t.length<1)return Rr.errors=[{instancePath:e,schemaPath:"#/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var a=!0;let l=t.length;for(let c=0;c<l;c++){let u=o;VS.validate(t[c],{instancePath:e+"/"+c,parentData:t,parentDataProperty:c,rootData:s})||(i=i===null?VS.validate.errors:i.concat(VS.validate.errors),o=i.length);var a=u===o;if(!a)break}}}else return Rr.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;return Rr.errors=i,o===0}var Nq=Zu().default;function q(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t&&typeof t=="object"&&!Array.isArray(t))&&typeof t!="boolean")return q.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:due.type},message:"must be object,boolean"}],!1;if(o===0&&t&&typeof t=="object"&&!Array.isArray(t)){if(t.$id!==void 0){let _=t.$id,v=o;if(o===v&&o===v)if(typeof _=="string"){if(!Pq.test(_))return q.errors=[{instancePath:e+"/$id",schemaPath:"#/properties/%24id/format",keyword:"format",params:{format:"uri-reference"},message:'must match format "uri-reference"'}],!1}else return q.errors=[{instancePath:e+"/$id",schemaPath:"#/properties/%24id/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=v===o}else var a=!0;if(a){if(t.$schema!==void 0){let _=t.$schema,v=o;if(o===v&&o===v)if(typeof _=="string"){if(!hue(_))return q.errors=[{instancePath:e+"/$schema",schemaPath:"#/properties/%24schema/format",keyword:"format",params:{format:"uri"},message:'must match format "uri"'}],!1}else return q.errors=[{instancePath:e+"/$schema",schemaPath:"#/properties/%24schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=v===o}else var a=!0;if(a){if(t.$ref!==void 0){let _=t.$ref,v=o;if(o===v&&o===v)if(typeof _=="string"){if(!Pq.test(_))return q.errors=[{instancePath:e+"/$ref",schemaPath:"#/properties/%24ref/format",keyword:"format",params:{format:"uri-reference"},message:'must match format "uri-reference"'}],!1}else return q.errors=[{instancePath:e+"/$ref",schemaPath:"#/properties/%24ref/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=v===o}else var a=!0;if(a){if(t.$comment!==void 0){let _=o;if(typeof t.$comment!="string")return q.errors=[{instancePath:e+"/$comment",schemaPath:"#/properties/%24comment/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=_===o}else var a=!0;if(a){if(t.title!==void 0){let _=o;if(typeof t.title!="string")return q.errors=[{instancePath:e+"/title",schemaPath:"#/properties/title/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=_===o}else var a=!0;if(a){if(t.description!==void 0){let _=o;if(typeof t.description!="string")return q.errors=[{instancePath:e+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=_===o}else var a=!0;if(a){if(t.readOnly!==void 0){let _=o;if(typeof t.readOnly!="boolean")return q.errors=[{instancePath:e+"/readOnly",schemaPath:"#/properties/readOnly/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var a=_===o}else var a=!0;if(a){if(t.examples!==void 0){let _=o;if(o===_&&!Array.isArray(t.examples))return q.errors=[{instancePath:e+"/examples",schemaPath:"#/properties/examples/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=_===o}else var a=!0;if(a){if(t.multipleOf!==void 0){let _=t.multipleOf,v=o;if(o===v)if(typeof _=="number"&&isFinite(_)){if(_<=0||isNaN(_))return q.errors=[{instancePath:e+"/multipleOf",schemaPath:"#/properties/multipleOf/exclusiveMinimum",keyword:"exclusiveMinimum",params:{comparison:">",limit:0},message:"must be > 0"}],!1}else return q.errors=[{instancePath:e+"/multipleOf",schemaPath:"#/properties/multipleOf/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=v===o}else var a=!0;if(a){if(t.maximum!==void 0){let _=t.maximum,v=o;if(!(typeof _=="number"&&isFinite(_)))return q.errors=[{instancePath:e+"/maximum",schemaPath:"#/properties/maximum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=v===o}else var a=!0;if(a){if(t.exclusiveMaximum!==void 0){let _=t.exclusiveMaximum,v=o;if(!(typeof _=="number"&&isFinite(_)))return q.errors=[{instancePath:e+"/exclusiveMaximum",schemaPath:"#/properties/exclusiveMaximum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=v===o}else var a=!0;if(a){if(t.minimum!==void 0){let _=t.minimum,v=o;if(!(typeof _=="number"&&isFinite(_)))return q.errors=[{instancePath:e+"/minimum",schemaPath:"#/properties/minimum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=v===o}else var a=!0;if(a){if(t.exclusiveMinimum!==void 0){let _=t.exclusiveMinimum,v=o;if(!(typeof _=="number"&&isFinite(_)))return q.errors=[{instancePath:e+"/exclusiveMinimum",schemaPath:"#/properties/exclusiveMinimum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=v===o}else var a=!0;if(a){if(t.maxLength!==void 0){let _=t.maxLength,v=o,S=o;if(!(typeof _=="number"&&!(_%1)&&!isNaN(_)&&isFinite(_)))return q.errors=[{instancePath:e+"/maxLength",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===S&&typeof _=="number"&&isFinite(_)&&(_<0||isNaN(_)))return q.errors=[{instancePath:e+"/maxLength",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=v===o}else var a=!0;if(a){if(t.minLength!==void 0){let _=o;vn(t.minLength,{instancePath:e+"/minLength",parentData:t,parentDataProperty:"minLength",rootData:s})||(i=i===null?vn.errors:i.concat(vn.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.pattern!==void 0){let _=t.pattern,v=o;if(o===v&&o===v)if(typeof _=="string"){if(!xq(_))return q.errors=[{instancePath:e+"/pattern",schemaPath:"#/properties/pattern/format",keyword:"format",params:{format:"regex"},message:'must match format "regex"'}],!1}else return q.errors=[{instancePath:e+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=v===o}else var a=!0;if(a){if(t.additionalItems!==void 0){let _=o;q(t.additionalItems,{instancePath:e+"/additionalItems",parentData:t,parentDataProperty:"additionalItems",rootData:s})||(i=i===null?q.errors:i.concat(q.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.items!==void 0){let _=t.items,v=o,S=o,$=!1,T=o;q(_,{instancePath:e+"/items",parentData:t,parentDataProperty:"items",rootData:s})||(i=i===null?q.errors:i.concat(q.errors),o=i.length);var l=T===o;if($=$||l,!$){let R=o;Rr(_,{instancePath:e+"/items",parentData:t,parentDataProperty:"items",rootData:s})||(i=i===null?Rr.errors:i.concat(Rr.errors),o=i.length);var l=R===o;$=$||l}if($)o=S,i!==null&&(S?i.length=S:i=null);else{let R={instancePath:e+"/items",schemaPath:"#/properties/items/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[R]:i.push(R),o++,q.errors=i,!1}var a=v===o}else var a=!0;if(a){if(t.maxItems!==void 0){let _=t.maxItems,v=o,S=o;if(!(typeof _=="number"&&!(_%1)&&!isNaN(_)&&isFinite(_)))return q.errors=[{instancePath:e+"/maxItems",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===S&&typeof _=="number"&&isFinite(_)&&(_<0||isNaN(_)))return q.errors=[{instancePath:e+"/maxItems",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=v===o}else var a=!0;if(a){if(t.minItems!==void 0){let _=o;vn(t.minItems,{instancePath:e+"/minItems",parentData:t,parentDataProperty:"minItems",rootData:s})||(i=i===null?vn.errors:i.concat(vn.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.uniqueItems!==void 0){let _=o;if(typeof t.uniqueItems!="boolean")return q.errors=[{instancePath:e+"/uniqueItems",schemaPath:"#/properties/uniqueItems/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var a=_===o}else var a=!0;if(a){if(t.contains!==void 0){let _=o;q(t.contains,{instancePath:e+"/contains",parentData:t,parentDataProperty:"contains",rootData:s})||(i=i===null?q.errors:i.concat(q.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.maxProperties!==void 0){let _=t.maxProperties,v=o,S=o;if(!(typeof _=="number"&&!(_%1)&&!isNaN(_)&&isFinite(_)))return q.errors=[{instancePath:e+"/maxProperties",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===S&&typeof _=="number"&&isFinite(_)&&(_<0||isNaN(_)))return q.errors=[{instancePath:e+"/maxProperties",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=v===o}else var a=!0;if(a){if(t.minProperties!==void 0){let _=o;vn(t.minProperties,{instancePath:e+"/minProperties",parentData:t,parentDataProperty:"minProperties",rootData:s})||(i=i===null?vn.errors:i.concat(vn.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.required!==void 0){let _=t.required,v=o;if(o===o)if(Array.isArray(_)){var c=!0;let T=_.length;for(let O=0;O<T;O++){let R=o;if(typeof _[O]!="string")return q.errors=[{instancePath:e+"/required/"+O,schemaPath:"#/definitions/stringArray/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=R===o;if(!c)break}if(c){let O=_.length,R;if(O>1){let P={};for(;O--;){let A=_[O];if(typeof A=="string"){if(typeof P[A]=="number"){return R=P[A],q.errors=[{instancePath:e+"/required",schemaPath:"#/definitions/stringArray/uniqueItems",keyword:"uniqueItems",params:{i:O,j:R},message:"must NOT have duplicate items (items ## "+R+" and "+O+" are identical)"}],!1;break}P[A]=O}}}}}else return q.errors=[{instancePath:e+"/required",schemaPath:"#/definitions/stringArray/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=v===o}else var a=!0;if(a){if(t.additionalProperties!==void 0){let _=o;q(t.additionalProperties,{instancePath:e+"/additionalProperties",parentData:t,parentDataProperty:"additionalProperties",rootData:s})||(i=i===null?q.errors:i.concat(q.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.definitions!==void 0){let _=t.definitions,v=o;if(o===v)if(_&&typeof _=="object"&&!Array.isArray(_))for(let $ in _){let T=o;q(_[$],{instancePath:e+"/definitions/"+$.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:_,parentDataProperty:$,rootData:s})||(i=i===null?q.errors:i.concat(q.errors),o=i.length);var u=T===o;if(!u)break}else return q.errors=[{instancePath:e+"/definitions",schemaPath:"#/properties/definitions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=v===o}else var a=!0;if(a){if(t.properties!==void 0){let _=t.properties,v=o;if(o===v)if(_&&typeof _=="object"&&!Array.isArray(_))for(let $ in _){let T=o;q(_[$],{instancePath:e+"/properties/"+$.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:_,parentDataProperty:$,rootData:s})||(i=i===null?q.errors:i.concat(q.errors),o=i.length);var d=T===o;if(!d)break}else return q.errors=[{instancePath:e+"/properties",schemaPath:"#/properties/properties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=v===o}else var a=!0;if(a){if(t.patternProperties!==void 0){let _=t.patternProperties,v=o;if(o===v)if(_&&typeof _=="object"&&!Array.isArray(_)){for(let $ in _){let T=o;if(o===T&&typeof $=="string"&&!xq($)){let O={instancePath:e+"/patternProperties",schemaPath:"#/properties/patternProperties/propertyNames/format",keyword:"format",params:{format:"regex"},message:'must match format "regex"',propertyName:$};i===null?i=[O]:i.push(O),o++}var p=T===o;if(!p){let O={instancePath:e+"/patternProperties",schemaPath:"#/properties/patternProperties/propertyNames",keyword:"propertyNames",params:{propertyName:$},message:"property name must be valid"};return i===null?i=[O]:i.push(O),o++,q.errors=i,!1;break}}if(p)for(let $ in _){let T=o;q(_[$],{instancePath:e+"/patternProperties/"+$.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:_,parentDataProperty:$,rootData:s})||(i=i===null?q.errors:i.concat(q.errors),o=i.length);var f=T===o;if(!f)break}}else return q.errors=[{instancePath:e+"/patternProperties",schemaPath:"#/properties/patternProperties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=v===o}else var a=!0;if(a){if(t.dependencies!==void 0){let _=t.dependencies,v=o;if(o===v)if(_&&typeof _=="object"&&!Array.isArray(_))for(let $ in _){let T=_[$],O=o,R=o,P=!1,A=o;q(T,{instancePath:e+"/dependencies/"+$.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:_,parentDataProperty:$,rootData:s})||(i=i===null?q.errors:i.concat(q.errors),o=i.length);var h=A===o;if(P=P||h,!P){let N=o;if(o===o)if(Array.isArray(T)){var m=!0;let te=T.length;for(let H=0;H<te;H++){let K=o;if(typeof T[H]!="string"){let Ar={instancePath:e+"/dependencies/"+$.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+H,schemaPath:"#/definitions/stringArray/items/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[Ar]:i.push(Ar),o++}var m=K===o;if(!m)break}if(m){let H=T.length,K;if(H>1){let xt={};for(;H--;){let Ar=T[H];if(typeof Ar=="string"){if(typeof xt[Ar]=="number"){K=xt[Ar];let Y={instancePath:e+"/dependencies/"+$.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/stringArray/uniqueItems",keyword:"uniqueItems",params:{i:H,j:K},message:"must NOT have duplicate items (items ## "+K+" and "+H+" are identical)"};i===null?i=[Y]:i.push(Y),o++;break}xt[Ar]=H}}}}}else{let te={instancePath:e+"/dependencies/"+$.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/stringArray/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[te]:i.push(te),o++}var h=N===o;P=P||h}if(P)o=R,i!==null&&(R?i.length=R:i=null);else{let N={instancePath:e+"/dependencies/"+$.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/dependencies/additionalProperties/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[N]:i.push(N),o++,q.errors=i,!1}var y=O===o;if(!y)break}else return q.errors=[{instancePath:e+"/dependencies",schemaPath:"#/properties/dependencies/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=v===o}else var a=!0;if(a){if(t.propertyNames!==void 0){let _=o;q(t.propertyNames,{instancePath:e+"/propertyNames",parentData:t,parentDataProperty:"propertyNames",rootData:s})||(i=i===null?q.errors:i.concat(q.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.enum!==void 0){let _=t.enum,v=o;if(o===v)if(Array.isArray(_)){if(_.length<1)return q.errors=[{instancePath:e+"/enum",schemaPath:"#/properties/enum/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{let $=_.length,T;if($>1){e:for(;$--;)for(T=$;T--;)if(Nq(_[$],_[T])){return q.errors=[{instancePath:e+"/enum",schemaPath:"#/properties/enum/uniqueItems",keyword:"uniqueItems",params:{i:$,j:T},message:"must NOT have duplicate items (items ## "+T+" and "+$+" are identical)"}],!1;break e}}}}else return q.errors=[{instancePath:e+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=v===o}else var a=!0;if(a){if(t.type!==void 0){let _=t.type,v=o,S=o,$=!1,T=o;if(!(_==="array"||_==="boolean"||_==="integer"||_==="null"||_==="number"||_==="object"||_==="string")){let R={instancePath:e+"/type",schemaPath:"#/definitions/simpleTypes/enum",keyword:"enum",params:{allowedValues:Oq.enum},message:"must be equal to one of the allowed values"};i===null?i=[R]:i.push(R),o++}var g=T===o;if($=$||g,!$){let R=o;if(o===R)if(Array.isArray(_))if(_.length<1){let A={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"};i===null?i=[A]:i.push(A),o++}else{var w=!0;let A=_.length;for(let N=0;N<A;N++){let C=_[N],z=o;if(!(C==="array"||C==="boolean"||C==="integer"||C==="null"||C==="number"||C==="object"||C==="string")){let H={instancePath:e+"/type/"+N,schemaPath:"#/definitions/simpleTypes/enum",keyword:"enum",params:{allowedValues:Oq.enum},message:"must be equal to one of the allowed values"};i===null?i=[H]:i.push(H),o++}var w=z===o;if(!w)break}if(w){let N=_.length,C;if(N>1){e:for(;N--;)for(C=N;C--;)if(Nq(_[N],_[C])){let z={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/uniqueItems",keyword:"uniqueItems",params:{i:N,j:C},message:"must NOT have duplicate items (items ## "+C+" and "+N+" are identical)"};i===null?i=[z]:i.push(z),o++;break e}}}}else{let A={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[A]:i.push(A),o++}var g=R===o;$=$||g}if($)o=S,i!==null&&(S?i.length=S:i=null);else{let R={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[R]:i.push(R),o++,q.errors=i,!1}var a=v===o}else var a=!0;if(a){if(t.format!==void 0){let _=o;if(typeof t.format!="string")return q.errors=[{instancePath:e+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=_===o}else var a=!0;if(a){if(t.contentMediaType!==void 0){let _=o;if(typeof t.contentMediaType!="string")return q.errors=[{instancePath:e+"/contentMediaType",schemaPath:"#/properties/contentMediaType/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=_===o}else var a=!0;if(a){if(t.contentEncoding!==void 0){let _=o;if(typeof t.contentEncoding!="string")return q.errors=[{instancePath:e+"/contentEncoding",schemaPath:"#/properties/contentEncoding/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=_===o}else var a=!0;if(a){if(t.if!==void 0){let _=o;q(t.if,{instancePath:e+"/if",parentData:t,parentDataProperty:"if",rootData:s})||(i=i===null?q.errors:i.concat(q.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.then!==void 0){let _=o;q(t.then,{instancePath:e+"/then",parentData:t,parentDataProperty:"then",rootData:s})||(i=i===null?q.errors:i.concat(q.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.else!==void 0){let _=o;q(t.else,{instancePath:e+"/else",parentData:t,parentDataProperty:"else",rootData:s})||(i=i===null?q.errors:i.concat(q.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.allOf!==void 0){let _=o;Rr(t.allOf,{instancePath:e+"/allOf",parentData:t,parentDataProperty:"allOf",rootData:s})||(i=i===null?Rr.errors:i.concat(Rr.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.anyOf!==void 0){let _=o;Rr(t.anyOf,{instancePath:e+"/anyOf",parentData:t,parentDataProperty:"anyOf",rootData:s})||(i=i===null?Rr.errors:i.concat(Rr.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.oneOf!==void 0){let _=o;Rr(t.oneOf,{instancePath:e+"/oneOf",parentData:t,parentDataProperty:"oneOf",rootData:s})||(i=i===null?Rr.errors:i.concat(Rr.errors),o=i.length);var a=_===o}else var a=!0;if(a)if(t.not!==void 0){let _=o;q(t.not,{instancePath:e+"/not",parentData:t,parentDataProperty:"not",rootData:s})||(i=i===null?q.errors:i.concat(q.errors),o=i.length);var a=_===o}else var a=!0}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}return q.errors=i,o===0}});var JS=E((LAe,Iq)=>{"use strict";var GS=class extends Error{constructor(e,r){super(),this.name="JsonSchemaMergeError",this.code="JSON_SCHEMA_MERGE_ERROR",this.message=`Failed to merge "${e}" keyword schemas.`,this.schemas=r}},WS=class extends Error{constructor(e,r){super(),this.name="JsonSchemaMergeError",this.code="JSON_SCHEMA_MERGE_ERROR",this.message=`Resolver for "${e}" keyword not found.`,this.schemas=r}},KS=class extends Error{constructor(e){super(),this.name="JsonSchemaMergeError",this.code="JSON_SCHEMA_MERGE_ERROR",this.message=`Invalid "onConflict" option: "${e}".`}};Iq.exports={MergeError:GS,ResolverNotFoundError:WS,InvalidOnConflictOptionError:KS}});var Dq=E((FAe,kq)=>{"use strict";var{dequal:pue}=Up(),{MergeError:YS}=JS();function Aq(t){let e=t[0];for(let r=1;r<t.length;r++)e=e.filter(n=>t[r].includes(n));return e}function mue(t,e,r){let n=Aq(e);if(n.length===0)throw new YS(t,e);r[t]=n}function gue(t,e,r){for(let s=0;s<e.length;s++)Array.isArray(e[s])||(e[s]=[e[s]]);let n=Aq(e);if(n.length===0)throw new YS(t,e);n.length===1?r[t]=n[0]:r[t]=n}function yue(t,e,r){let n=[];for(let s of e)for(let i of s)n.includes(i)||n.push(i);r[t]=n}function _ue(t,e,r){r[t]=Math.min(...e)}function vue(t,e,r){r[t]=Math.max(...e)}function wue(t,e,r){let n=(a,l)=>l?n(l,a%l):a,s=(a,l)=>a*l/n(a,l),i=1;for(let a of e)for(;a*i%1!==0;)i*=10;let o=e[0]*i;for(let a of e)o=s(o,a*i);r[t]=o/i}function bue(t,e,r){let n=e[0];for(let s=1;s<e.length;s++)if(!pue(e[s],n))throw new YS(t,e);r[t]=n}function Eue(){}function Sue(t,e,r){for(let n of e)if(n===!1){r[t]=!1;return}r[t]=!0}function Tue(t,e,r){for(let n of e)if(n===!0){r[t]=!0;return}r[t]=!1}kq.exports={arraysIntersection:mue,hybridArraysIntersection:gue,arraysUnion:yue,minNumber:_ue,maxNumber:vue,commonMultiple:wue,allEqual:bue,booleanAnd:Sue,booleanOr:Tue,skip:Eue}});var Uq=E((UAe,Fq)=>{"use strict";var{dequal:Rue}=Up(),dt=Dq(),ng=JS(),qq={$id:dt.skip,type:dt.hybridArraysIntersection,enum:dt.arraysIntersection,minLength:dt.maxNumber,maxLength:dt.minNumber,minimum:dt.maxNumber,maximum:dt.minNumber,multipleOf:dt.commonMultiple,exclusiveMinimum:dt.maxNumber,exclusiveMaximum:dt.minNumber,minItems:dt.maxNumber,maxItems:dt.minNumber,maxProperties:dt.minNumber,minProperties:dt.maxNumber,const:dt.allEqual,default:dt.allEqual,format:dt.allEqual,required:dt.arraysUnion,properties:Cue,patternProperties:rg,additionalProperties:tg,items:Pue,additionalItems:xue,definitions:rg,$defs:rg,nullable:dt.booleanAnd,oneOf:Mq,anyOf:Mq,allOf:dt.arraysUnion,not:tg,if:Iue,then:dt.skip,else:dt.skip,dependencies:jq,dependentRequired:jq,dependentSchemas:rg,propertyNames:tg,uniqueItems:dt.booleanOr,contains:tg};function tg(t,e,r,n,s){r[t]=Qn(e,s)}function $ue(t){let e=[[]];for(let r of t){let n=[];for(let s of e)for(let i of r)n.push([...s,i]);e=n}return e}function Mq(t,e,r,n,s){if(e.length===1){r[t]=e[0];return}let i=$ue(e),o=[];for(let a of i)try{let l=Qn(a,s);l!==void 0&&o.push(l)}catch(l){if(l instanceof ng.MergeError)continue;throw l}r[t]=o}function Oue(t,e){let{items:r,additionalItems:n}=t;return Array.isArray(r)?e<r.length?r[e]:n:r!==void 0?r:n}function Pue(t,e,r,n,s){let i=0;for(let a of e)Array.isArray(a)&&(i=Math.max(i,a.length));if(i===0){r[t]=Qn(e,s);return}let o=[];for(let a=0;a<i;a++){let l=[];for(let c of n){let u=Oue(c,a);u!==void 0&&l.push(u)}o[a]=Qn(l,s)}r[t]=o}function xue(t,e,r,n,s){let i=!1;for(let a of n)if(Array.isArray(a.items)){i=!0;break}if(!i){r[t]=Qn(e,s);return}let o=[];for(let a of n){let l=a.additionalItems;l===void 0&&!Array.isArray(a.items)&&(l=a.items),l!==void 0&&o.push(l)}r[t]=Qn(o,s)}function Nue(t,e){let{properties:r,patternProperties:n,additionalProperties:s}=t;if(r?.[e]!==void 0)return r[e];for(let i of Object.keys(n??{}))if(new RegExp(i).test(e))return n[i];return s}function Cue(t,e,r,n,s){let i={};for(let a of n){let l=a.properties??{};for(let c of Object.keys(l)){if(i[c]!==void 0)continue;let u=l[c];i[c]=[u];for(let d of n){if(a===d)continue;let p=Nue(d,c);p!==void 0&&i[c].push(p)}}}let o={};for(let a of Object.keys(i)){let l=i[a];o[a]=Qn(l,s)}r[t]=o}function rg(t,e,r,n,s){let i={};for(let a of e)for(let l of Object.keys(a))i[l]===void 0&&(i[l]=[]),i[l].push(a[l]);let o={};for(let a of Object.keys(i)){let l=i[a],c=Qn(l,s);o[a]=c}r[t]=o}function Iue(t,e,r,n,s){for(let i=0;i<n.length;i++){let o={if:n[i].if,then:n[i].then,else:n[i].else};if(o.if!==void 0){if(r.if===void 0){r.if=o.if,o.then!==void 0&&(r.then=o.then),o.else!==void 0&&(r.else=o.else);continue}r.then!==void 0&&(r.then=Qn([r.then,o],s)),r.else!==void 0&&(r.else=Qn([r.else,o],s))}}}function jq(t,e,r){let n={};for(let s of e)for(let i of Object.keys(s)){n[i]===void 0&&(n[i]=[]);let o=n[i];for(let a of s[i])o.includes(a)||o.push(a)}r[t]=n}function Qn(t,e){if(t.length===0)return{};if(t.length===1)return t[0];let r={},n={},s=!0;for(let i of t){if(i===!1)return!1;if(i!==!0){s=!1;for(let o of Object.keys(i))n[o]===void 0&&(n[o]=[]),n[o].push(i[o])}}if(s)return!0;for(let i of Object.keys(n)){let o=n[i];(e.resolvers[i]??e.defaultResolver)(i,o,r,t,e)}return r}function Lq(t,e,r,n,s){let i=s.onConflict??"throw";if(e.length===1||i==="first"){r[t]=e[0];return}let o=!0;for(let a=1;a<e.length;a++)if(!Rue(e[a],e[0])){o=!1;break}if(o){r[t]=e[0];return}if(i==="throw")throw new ng.ResolverNotFoundError(t,e);if(i!=="skip")throw new ng.InvalidOnConflictOptionError(i)}function Aue(t,e={}){return e.defaultResolver===void 0&&(e.defaultResolver=Lq),e.resolvers={...qq,...e.resolvers},Qn(t,e)}Fq.exports={mergeSchemas:Aue,keywordsResolvers:qq,defaultResolver:Lq,...ng}});var zq=E((BAe,Bq)=>{"use strict";var{mergeSchemas:kue}=Uq();function Due(t){return kue(t,{onConflict:"skip"})}Bq.exports=Due});var Vq=E((zAe,XS)=>{"use strict";function Mue(t,e,r,n){let s="";e.validatorSchemasIds.size>0?(s+=`const Validator = require('fast-json-stringify/lib/validator')
`,s+=`const validatorState = ${JSON.stringify(n.getState())}
`,s+=`const validator = Validator.restoreFromState(validatorState)
`):s+=`const validator = null
`;let{schema:i,...o}=r.getState();return`
  'use strict'

  const Serializer = require('fast-json-stringify/lib/serializer')
  const serializerState = ${JSON.stringify(o)}
  const serializer = Serializer.restoreFromState(serializerState)

  ${s}

  module.exports = ${t.toString()}(validator, serializer)`}XS.exports=Mue;XS.exports.dependencies={Serializer:Ep(),Validator:zS()}});var Zq=E((VAe,Gl)=>{"use strict";var{RefResolver:jue}=$A(),que=Ep(),Lue=zS(),oa=$q(),Hq=Cq(),Fue=zq(),Uue=/'/g,sg=2e4,Wq="default",Bue=`
const {
  asString,
  asNumber,
  asBoolean,
  asDateTime,
  asDate,
  asTime,
  asUnsafeString
} = serializer

const asInteger = serializer.asInteger.bind(serializer)

`,zue=["floor","ceil","round","trunc"],Kq=["default","json-stringify"],Df=0;function QS(t,e){if(!Hq(t)){e?e=`"${e}" `:e="";let r=Hq.errors[0],n=new Error(`${e}schema is invalid: data${r.instancePath} ${r.message}`);throw n.errors=QS.errors,n}}function Mf(t,e){let r=e.schema.$ref,n=r.indexOf("#");n===-1&&(n=r.length);let s=r.slice(0,n)||e.schemaId,i=r.slice(n)||"#",o=t.refResolver.getSchema(s,i);if(o===null)throw new Error(`Cannot find reference "${r}"`);let a=new oa(o,s,i);return o.$ref!==void 0?Mf(t,a):a}function ig(t,e){let r=t.refResolver.getSchema(e,"#");return new oa(r,e,"#")}function Gq(t,e){return t.$id&&t.$id.charAt(0)!=="#"?t.$id:e}function ZS(t,e){QS(t),e=e||{};let r={functions:[],functionsCounter:0,functionsNamesBySchema:new Map,options:e,refResolver:new jue,rootSchemaId:t.$id||`__fjs_root_${Df++}`,validatorSchemasIds:new Set,mergedSchemasIds:new Map},n=Gq(t,r.rootSchemaId);if(r.refResolver.hasSchema(n)||r.refResolver.addSchema(t,r.rootSchemaId),e.schema)for(let u in e.schema){let d=e.schema[u],p=Gq(d,u);r.refResolver.hasSchema(p)||(QS(d,u),r.refResolver.addSchema(d,u))}if(e.rounding&&!zue.includes(e.rounding))throw new Error(`Unsupported integer rounding method ${e.rounding}`);if(e.largeArrayMechanism)if(Kq.includes(e.largeArrayMechanism))Wq=e.largeArrayMechanism;else throw new Error(`Unsupported large array mechanism ${e.largeArrayMechanism}`);if(e.largeArraySize)if(typeof e.largeArraySize=="string"&&Number.isFinite(Number.parseInt(e.largeArraySize,10)))sg=Number.parseInt(e.largeArraySize,10);else if(typeof e.largeArraySize=="number"&&Number.isInteger(e.largeArraySize))sg=e.largeArraySize;else if(typeof e.largeArraySize=="bigint")sg=Number(e.largeArraySize);else throw new Error(`Unsupported large array size. Expected integer-like, got ${typeof e.largeArraySize} with value ${e.largeArraySize}`);let s=new oa(t,r.rootSchemaId),i=en(r,s,"input"),o=`
    ${Bue}
    const JSON_STR_BEGIN_OBJECT = '{'
    const JSON_STR_END_OBJECT = '}'
    const JSON_STR_BEGIN_ARRAY = '['
    const JSON_STR_END_ARRAY = ']'
    const JSON_STR_COMMA = ','
    const JSON_STR_COLONS = ':'
    const JSON_STR_QUOTE = '"'
    const JSON_STR_EMPTY_OBJECT = JSON_STR_BEGIN_OBJECT + JSON_STR_END_OBJECT
    const JSON_STR_EMPTY_ARRAY = JSON_STR_BEGIN_ARRAY + JSON_STR_END_ARRAY
    const JSON_STR_EMPTY_STRING = JSON_STR_QUOTE + JSON_STR_QUOTE
    const JSON_STR_NULL = 'null'
  `;i==="json += anonymous0(input)"?o+=`
    ${r.functions.join(`
`)}
    const main = anonymous0
    return main
    `:o+=`
    function main (input) {
      let json = ''
      ${i}
      return json
    }
    ${r.functions.join(`
`)}
    return main
    `;let a=new que(e),l=new Lue(e.ajv);for(let u of r.validatorSchemasIds){let d=r.refResolver.getSchema(u);l.addSchema(d,u);let p=r.refResolver.getSchemaDependencies(u);for(let[f,h]of Object.entries(p))l.addSchema(h,f)}if(e.debugMode&&(e.mode="debug"),e.mode==="debug")return{validator:l,serializer:a,code:`validator
serializer
${o}`,ajv:l.ajv};let c=new Function("validator","serializer",o);return e.mode==="standalone"?Vq()(c,r,a,l):c(l,a)}var Vue=["properties","required","additionalProperties","patternProperties","maxProperties","minProperties","dependencies"],Hue=["items","additionalItems","maxItems","minItems","uniqueItems","contains"],Gue=["maxLength","minLength","pattern"],Wue=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum"];function Kue(t){for(let e of Vue)if(e in t)return"object";for(let e of Hue)if(e in t)return"array";for(let e of Gue)if(e in t)return"string";for(let e of Wue)if(e in t)return"number";return t.type}function Jue(t,e,r){let n=e.schema,s=Object.keys(n.properties||{}),i=`
    const propertiesKeys = ${JSON.stringify(s)}
    for (const [key, value] of Object.entries(obj)) {
      if (
        propertiesKeys.includes(key) ||
        value === undefined ||
        typeof value === 'function' ||
        typeof value === 'symbol'
      ) continue
  `,o=e.getPropertyLocation("patternProperties"),a=o.schema;if(a!==void 0)for(let u in a){let d=o.getPropertyLocation(u);i+=`
        if (/${u.replace(/\\*\//g,"\\/")}/.test(key)) {
          ${r}
          json += asString(key) + JSON_STR_COLONS
          ${en(t,d,"value")}
          continue
        }
      `}let c=e.getPropertyLocation("additionalProperties").schema;if(c!==void 0)if(c===!0)i+=`
        ${r}
        json += asString(key) + JSON_STR_COLONS + JSON.stringify(value)
      `;else{let u=e.getPropertyLocation("additionalProperties");i+=`
        ${r}
        json += asString(key) + JSON_STR_COLONS
        ${en(t,u,"value")}
      `}return i+=`
    }
  `,i}function Yue(t,e){let r=e.schema,n=e.getPropertyLocation("properties"),s=r.required||[],i=Object.keys(r.properties||{}).sort((c,u)=>{let d=s.includes(c),p=s.includes(u);return d===p?0:d?-1:1}),o=s.includes(i[0]),a=`let value
`;for(let c of s)if(!i.includes(c)){let u=JSON.stringify(c);a+=`if (obj[${u}] === undefined) throw new Error('${u.replace(/'/g,"\\'")} is required!')
`}a+=`let json = JSON_STR_BEGIN_OBJECT
`;let l="";o||(a+=`let addComma = false
`,l="!addComma && (addComma = true) || (json += JSON_STR_COMMA)");for(let c of i){let u=n.getPropertyLocation(c);u.schema.$ref&&(u=Mf(t,u));let d=JSON.stringify(c),p=u.schema.default,f=s.includes(c);a+=`
      value = obj[${d}]
      if (value !== undefined) {
        ${l}
        json += ${JSON.stringify(d+":")}
        ${en(t,u,"value")}
      }`,p!==void 0?a+=` else {
        ${l}
        json += ${JSON.stringify(d+":"+JSON.stringify(p))}
      }
      `:f?a+=` else {
        throw new Error('${d.replace(/'/g,"\\'")} is required!')
      }
      `:a+=`
`,o&&(l="json += ','")}return(r.patternProperties||r.additionalProperties)&&(a+=Jue(t,e,l)),a+=`
    return json + JSON_STR_END_OBJECT
  `,a}function og(t,e,r){for(let o=0;o<r.length;o++){let a=r[o];a.schema.$ref&&(r[o]=Mf(t,a))}let n=[];for(let o of r){let a=Jq(t,o.schema,o.schemaId);delete a.$id,n.push(a)}let s=Fue(n),i=new oa(s,e);return t.refResolver.addSchema(s,e),i}function Jq(t,e,r){let n=Array.isArray(e)?[]:{};e.$id!==void 0&&e.$id.charAt(0)!=="#"&&(r=e.$id);let s=t.mergedSchemasIds.get(e);s&&t.mergedSchemasIds.set(n,s);for(let i in e){let o=e[i];i==="$ref"&&typeof o=="string"&&o.charAt(0)==="#"&&(o=r+o),typeof o=="object"&&o!==null&&(o=Jq(t,o,r)),n[i]=o}return n}function Xue(t){return`(${t} && typeof ${t}.toJSON === 'function')
    ? ${t}.toJSON()
    : ${t}
  `}function Que(t,e){let r=e.schema;if(t.functionsNamesBySchema.has(r))return t.functionsNamesBySchema.get(r);let n=Xq(t);t.functionsNamesBySchema.set(r,n);let s=e.getSchemaRef();s.startsWith(t.rootSchemaId)&&(s=s.replace(t.rootSchemaId,""));let i=`
  `,o=r.nullable===!0;return i+=`
    // ${s}
    function ${n} (input) {
      const obj = ${Xue("input")}
      ${o?"":"if (obj === null) return JSON_STR_EMPTY_OBJECT"}

      ${Yue(t,e)}
    }
  `,t.functions.push(i),n}function Zue(t,e){let r=e.schema,n=e.getPropertyLocation("items");n.schema=n.schema||{},n.schema.$ref&&(n=Mf(t,n));let s=n.schema;if(t.functionsNamesBySchema.has(r))return t.functionsNamesBySchema.get(r);let i=Xq(t);t.functionsNamesBySchema.set(r,i);let o=e.getSchemaRef();o.startsWith(t.rootSchemaId)&&(o=o.replace(t.rootSchemaId,""));let a=`
    function ${i} (obj) {
      // ${o}
  `,l=r.nullable===!0;if(a+=`
    ${l?"":"if (obj === null) return JSON_STR_EMPTY_ARRAY"}
    if (!Array.isArray(obj)) {
      throw new TypeError(\`The value of '${o}' does not match schema definition.\`)
    }
    const arrayLength = obj.length
  `,!r.additionalItems&&Array.isArray(s)&&(a+=`
      if (arrayLength > ${s.length}) {
        throw new Error(\`Item at ${s.length} does not match schema definition.\`)
      }
    `),Wq==="json-stringify"&&(a+=`if (arrayLength >= ${sg}) return JSON.stringify(obj)
`),a+=`
    const arrayEnd = arrayLength - 1
    let value
    let json = ''
  `,Array.isArray(s)){for(let c=0;c<s.length;c++){let u=s[c];a+=`value = obj[${c}]`;let d=en(t,n.getPropertyLocation(c),"value");a+=`
        if (${c} < arrayLength) {
          if (${Yq(u.type,"value")}) {
            ${d}
            if (${c} < arrayEnd) {
              json += JSON_STR_COMMA
            }
          } else {
            throw new Error(\`Item at ${c} does not match schema definition.\`)
          }
        }
        `}r.additionalItems&&(a+=`
        for (let i = ${s.length}; i < arrayLength; i++) {
          value = obj[i]
          json += JSON.stringify(value)
          if (i < arrayEnd) {
            json += JSON_STR_COMMA
          }
        }`)}else{let c=en(t,n,"value");a+=`
      for (let i = 0; i < arrayLength; i++) {
        value = obj[i]
        ${c}
        if (i < arrayEnd) {
          json += JSON_STR_COMMA
        }
      }`}return a+=`
    return JSON_STR_BEGIN_ARRAY + json + JSON_STR_END_ARRAY
  }`,t.functions.push(a),i}function Yq(t,e){let r;switch(t){case"null":r="value === null";break;case"string":r=`typeof value === 'string' ||
      value === null ||
      value instanceof Date ||
      value instanceof RegExp ||
      (
        typeof value === "object" &&
        typeof value.toString === "function" &&
        value.toString !== Object.prototype.toString
      )`;break;case"integer":r="Number.isInteger(value)";break;case"number":r="Number.isFinite(value)";break;case"boolean":r="typeof value === 'boolean'";break;case"object":r="value && typeof value === 'object' && value.constructor === Object";break;case"array":r="Array.isArray(value)";break;default:Array.isArray(t)&&(r=`(${t.map(s=>Yq(s,e)).join(" || ")})`)}return r}function Xq(t){return"anonymous"+t.functionsCounter++}function efe(t,e,r){let s=e.schema.type.sort(a=>a==="null"?-1:1),i="";s.forEach((a,l)=>{e.schema={...e.schema,type:a};let c=Qq(t,e,r),u=l===0?"if":"else if";switch(a){case"null":i+=`
          ${u} (${r} === null)
            ${c}
          `;break;case"string":{i+=`
          ${u}(
            typeof ${r} === "string" ||
            ${r} === null ||
            ${r} instanceof Date ||
            ${r} instanceof RegExp ||
            (
              typeof ${r} === "object" &&
              typeof ${r}.toString === "function" &&
              ${r}.toString !== Object.prototype.toString
            )
          )
            ${c}
        `;break}case"array":{i+=`
          ${u}(Array.isArray(${r}))
            ${c}
        `;break}case"integer":{i+=`
          ${u}(Number.isInteger(${r}) || ${r} === null)
            ${c}
        `;break}default:{i+=`
          ${u}(typeof ${r} === "${a}" || ${r} === null)
            ${c}
        `;break}}});let o=e.getSchemaRef();return o.startsWith(t.rootSchemaId)&&(o=o.replace(t.rootSchemaId,"")),i+=`
    else throw new TypeError(\`The value of '${o}' does not match schema definition.\`)
  `,i}function Qq(t,e,r){let n=e.schema;switch(n.type){case"null":return"json += JSON_STR_NULL";case"string":return n.format==="date-time"?`json += asDateTime(${r})`:n.format==="date"?`json += asDate(${r})`:n.format==="time"?`json += asTime(${r})`:n.format==="unsafe"?`json += asUnsafeString(${r})`:`
        if (typeof ${r} !== 'string') {
          if (${r} === null) {
            json += JSON_STR_EMPTY_STRING
          } else if (${r} instanceof Date) {
            json += JSON_STR_QUOTE + ${r}.toISOString() + JSON_STR_QUOTE
          } else if (${r} instanceof RegExp) {
            json += asString(${r}.source)
          } else {
            json += asString(${r}.toString())
          }
        } else {
          json += asString(${r})
        }
        `;case"integer":return`json += asInteger(${r})`;case"number":return`json += asNumber(${r})`;case"boolean":return`json += asBoolean(${r})`;case"object":return`json += ${Que(t,e)}(${r})`;case"array":return`json += ${Zue(t,e)}(${r})`;case void 0:return`json += JSON.stringify(${r})`;default:throw new Error(`${n.type} unsupported`)}}function tfe(t,e){let r=t.schema,n=r.type,s=Array.isArray(n)&&n.includes("null"),i="";return s&&(i+=`
      if (${e} === null) {
        json += JSON_STR_NULL
      } else {
    `),i+=`json += '${JSON.stringify(r.const).replace(Uue,"\\'")}'`,s&&(i+=`
      }
    `),i}function rfe(t,e,r){let n=e.schema,s=t.mergedSchemasIds.get(n);if(s){let u=ig(t,s);return en(t,u,r)}s=`__fjs_merged_${Df++}`,t.mergedSchemasIds.set(n,s);let{allOf:i,...o}=e.schema,a=[new oa(o,e.schemaId,e.jsonPointer)],l=e.getPropertyLocation("allOf");for(let u=0;u<i.length;u++)a.push(l.getPropertyLocation(u));let c=og(t,s,a);return en(t,c,r)}function nfe(t,e,r){t.validatorSchemasIds.add(e.schemaId);let s=e.schema.anyOf?"anyOf":"oneOf",{[s]:i,...o}=e.schema,a=new oa(o,e.schemaId,e.jsonPointer),l=e.getPropertyLocation(s),c="";for(let d=0;d<i.length;d++){let p=l.getPropertyLocation(d),f=p.schema,h=t.mergedSchemasIds.get(f),m=null;h?m=ig(t,h):(h=`__fjs_merged_${Df++}`,t.mergedSchemasIds.set(f,h),m=og(t,h,[a,p]));let y=en(t,m,r),g=p.getSchemaRef();c+=`
      ${d===0?"if":"else if"}(validator.validate("${g}", ${r}))
        ${y}
    `}let u=e.getSchemaRef();return u.startsWith(t.rootSchemaId)&&(u=u.replace(t.rootSchemaId,"")),c+=`
    else throw new TypeError(\`The value of '${u}' does not match schema definition.\`)
  `,c}function sfe(t,e,r){t.validatorSchemasIds.add(e.schemaId);let{if:n,then:s,else:i,...o}=e.schema,a=new oa(o,e.schemaId,e.jsonPointer),c=e.getPropertyLocation("if").getSchemaRef(),u=e.getPropertyLocation("then"),d=t.mergedSchemasIds.get(s),p=null;if(d?p=ig(t,d):(d=`__fjs_merged_${Df++}`,t.mergedSchemasIds.set(s,d),p=og(t,d,[a,u])),!i)return`
      if (validator.validate("${c}", ${r})) {
        ${en(t,p,r)}
      } else {
        ${en(t,a,r)}
      }
    `;let f=e.getPropertyLocation("else"),h=t.mergedSchemasIds.get(i),m=null;return h?m=ig(t,h):(h=`__fjs_merged_${Df++}`,t.mergedSchemasIds.set(i,h),m=og(t,h,[a,f])),`
    if (validator.validate("${c}", ${r})) {
      ${en(t,p,r)}
    } else {
      ${en(t,m,r)}
    }
  `}function en(t,e,r){let n=e.schema;if(typeof n=="boolean")return`json += JSON.stringify(${r})`;if(n.$ref&&(e=Mf(t,e),n=e.schema),n.allOf)return rfe(t,e,r);if(n.anyOf||n.oneOf)return nfe(t,e,r);if(n.if&&n.then)return sfe(t,e,r);if(n.type===void 0){let a=Kue(n);a&&(n.type=a)}let s="",i=n.type,o=n.nullable===!0;return o&&(s+=`
      if (${r} === null) {
        json += JSON_STR_NULL
      } else {
    `),n.const!==void 0?s+=tfe(e,r):Array.isArray(i)?s+=efe(t,e,r):s+=Qq(t,e,r),o&&(s+=`
      }
    `),s}Gl.exports=ZS;Gl.exports.default=ZS;Gl.exports.build=ZS;Gl.exports.validLargeArrayMechanisms=Kq;Gl.exports.restore=function({code:t,validator:e,serializer:r}){return Function.apply(null,["validator","serializer",t]).apply(null,[e,r])}});var rL=E((HAe,ag)=>{"use strict";var ife=Zq();function eL(){return function(e,r){let n=Object.assign({},r,{schema:e});return ofe.bind(null,n)}}function ofe(t,{schema:e}){return t.schema&&e.$id&&t.schema[e.$id]&&(t.schema={...t.schema},delete t.schema[e.$id]),ife(e,t)}function tL(t={readMode:!0}){if(t.readMode===!0&&typeof t.restoreFunction!="function")throw new Error("You must provide a function for the restoreFunction-option when readMode ON");if(t.readMode!==!0&&typeof t.storeFunction!="function")throw new Error("You must provide a function for the storeFunction-option when readMode OFF");if(t.readMode===!0)return function(){return function(n){return t.restoreFunction(n)}};let e=eL();return function(n,s={}){s.mode="standalone";let i=e(n,s);return function(o){let a=i(o);return t.storeFunction(o,a),new Function(a)}}}ag.exports.SerializerSelector=eL;ag.exports.StandaloneSerializer=tL;ag.exports.default=tL});var nL=E((GAe,jf)=>{"use strict";var{SerializerSelector:eT,StandaloneSerializer:afe}=rL();jf.exports=eT;jf.exports.default=eT;jf.exports.SerializerSelector=eT;jf.exports.StandaloneSerializer=afe});var Wl=E(Fe=>{"use strict";Object.defineProperty(Fe,"__esModule",{value:!0});Fe.regexpCode=Fe.getEsmExportName=Fe.getProperty=Fe.safeStringify=Fe.stringify=Fe.strConcat=Fe.addCodeArg=Fe.str=Fe._=Fe.nil=Fe._Code=Fe.Name=Fe.IDENTIFIER=Fe._CodeOrName=void 0;var qf=class{};Fe._CodeOrName=qf;Fe.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var aa=class extends qf{constructor(e){if(super(),!Fe.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};Fe.Name=aa;var wn=class extends qf{constructor(e){super(),this._items=typeof e=="string"?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return e===""||e==='""'}get str(){var e;return(e=this._str)!==null&&e!==void 0?e:this._str=this._items.reduce((r,n)=>`${r}${n}`,"")}get names(){var e;return(e=this._names)!==null&&e!==void 0?e:this._names=this._items.reduce((r,n)=>(n instanceof aa&&(r[n.str]=(r[n.str]||0)+1),r),{})}};Fe._Code=wn;Fe.nil=new wn("");function sL(t,...e){let r=[t[0]],n=0;for(;n<e.length;)rT(r,e[n]),r.push(t[++n]);return new wn(r)}Fe._=sL;var tT=new wn("+");function iL(t,...e){let r=[Lf(t[0])],n=0;for(;n<e.length;)r.push(tT),rT(r,e[n]),r.push(tT,Lf(t[++n]));return lfe(r),new wn(r)}Fe.str=iL;function rT(t,e){e instanceof wn?t.push(...e._items):e instanceof aa?t.push(e):t.push(ffe(e))}Fe.addCodeArg=rT;function lfe(t){let e=1;for(;e<t.length-1;){if(t[e]===tT){let r=cfe(t[e-1],t[e+1]);if(r!==void 0){t.splice(e-1,3,r);continue}t[e++]="+"}e++}}function cfe(t,e){if(e==='""')return t;if(t==='""')return e;if(typeof t=="string")return e instanceof aa||t[t.length-1]!=='"'?void 0:typeof e!="string"?`${t.slice(0,-1)}${e}"`:e[0]==='"'?t.slice(0,-1)+e.slice(1):void 0;if(typeof e=="string"&&e[0]==='"'&&!(t instanceof aa))return`"${t}${e.slice(1)}`}function ufe(t,e){return e.emptyStr()?t:t.emptyStr()?e:iL`${t}${e}`}Fe.strConcat=ufe;function ffe(t){return typeof t=="number"||typeof t=="boolean"||t===null?t:Lf(Array.isArray(t)?t.join(","):t)}function dfe(t){return new wn(Lf(t))}Fe.stringify=dfe;function Lf(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}Fe.safeStringify=Lf;function hfe(t){return typeof t=="string"&&Fe.IDENTIFIER.test(t)?new wn(`.${t}`):sL`[${t}]`}Fe.getProperty=hfe;function pfe(t){if(typeof t=="string"&&Fe.IDENTIFIER.test(t))return new wn(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)}Fe.getEsmExportName=pfe;function mfe(t){return new wn(t.toString())}Fe.regexpCode=mfe});var fg=E(Gr=>{"use strict";Object.defineProperty(Gr,"__esModule",{value:!0});Gr.ValueScope=Gr.ValueScopeName=Gr.Scope=Gr.varKinds=Gr.UsedValueState=void 0;var Hr=Wl(),nT=class extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}},lg;(function(t){t[t.Started=0]="Started",t[t.Completed=1]="Completed"})(lg||(Gr.UsedValueState=lg={}));Gr.varKinds={const:new Hr.Name("const"),let:new Hr.Name("let"),var:new Hr.Name("var")};var cg=class{constructor({prefixes:e,parent:r}={}){this._names={},this._prefixes=e,this._parent=r}toName(e){return e instanceof Hr.Name?e:this.name(e)}name(e){return new Hr.Name(this._newName(e))}_newName(e){let r=this._names[e]||this._nameGroup(e);return`${e}${r.index++}`}_nameGroup(e){var r,n;if(!((n=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||n===void 0)&&n.has(e)||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}};Gr.Scope=cg;var ug=class extends Hr.Name{constructor(e,r){super(r),this.prefix=e}setValue(e,{property:r,itemIndex:n}){this.value=e,this.scopePath=(0,Hr._)`.${new Hr.Name(r)}[${n}]`}};Gr.ValueScopeName=ug;var gfe=(0,Hr._)`\n`,sT=class extends cg{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?gfe:Hr.nil}}get(){return this._scope}name(e){return new ug(e,this._newName(e))}value(e,r){var n;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let s=this.toName(e),{prefix:i}=s,o=(n=r.key)!==null&&n!==void 0?n:r.ref,a=this._values[i];if(a){let u=a.get(o);if(u)return u}else a=this._values[i]=new Map;a.set(o,s);let l=this._scope[i]||(this._scope[i]=[]),c=l.length;return l[c]=r.ref,s.setValue(r,{property:i,itemIndex:c}),s}getValue(e,r){let n=this._values[e];if(n)return n.get(r)}scopeRefs(e,r=this._values){return this._reduceValues(r,n=>{if(n.scopePath===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return(0,Hr._)`${e}${n.scopePath}`})}scopeCode(e=this._values,r,n){return this._reduceValues(e,s=>{if(s.value===void 0)throw new Error(`CodeGen: name "${s}" has no value`);return s.value.code},r,n)}_reduceValues(e,r,n={},s){let i=Hr.nil;for(let o in e){let a=e[o];if(!a)continue;let l=n[o]=n[o]||new Map;a.forEach(c=>{if(l.has(c))return;l.set(c,lg.Started);let u=r(c);if(u){let d=this.opts.es5?Gr.varKinds.var:Gr.varKinds.const;i=(0,Hr._)`${i}${d} ${c} = ${u};${this.opts._n}`}else if(u=s?.(c))i=(0,Hr._)`${i}${u}${this.opts._n}`;else throw new nT(c);l.set(c,lg.Completed)})}return i}};Gr.ValueScope=sT});var ne=E(ve=>{"use strict";Object.defineProperty(ve,"__esModule",{value:!0});ve.or=ve.and=ve.not=ve.CodeGen=ve.operators=ve.varKinds=ve.ValueScopeName=ve.ValueScope=ve.Scope=ve.Name=ve.regexpCode=ve.stringify=ve.getProperty=ve.nil=ve.strConcat=ve.str=ve._=void 0;var Ie=Wl(),Zn=fg(),Xi=Wl();Object.defineProperty(ve,"_",{enumerable:!0,get:function(){return Xi._}});Object.defineProperty(ve,"str",{enumerable:!0,get:function(){return Xi.str}});Object.defineProperty(ve,"strConcat",{enumerable:!0,get:function(){return Xi.strConcat}});Object.defineProperty(ve,"nil",{enumerable:!0,get:function(){return Xi.nil}});Object.defineProperty(ve,"getProperty",{enumerable:!0,get:function(){return Xi.getProperty}});Object.defineProperty(ve,"stringify",{enumerable:!0,get:function(){return Xi.stringify}});Object.defineProperty(ve,"regexpCode",{enumerable:!0,get:function(){return Xi.regexpCode}});Object.defineProperty(ve,"Name",{enumerable:!0,get:function(){return Xi.Name}});var mg=fg();Object.defineProperty(ve,"Scope",{enumerable:!0,get:function(){return mg.Scope}});Object.defineProperty(ve,"ValueScope",{enumerable:!0,get:function(){return mg.ValueScope}});Object.defineProperty(ve,"ValueScopeName",{enumerable:!0,get:function(){return mg.ValueScopeName}});Object.defineProperty(ve,"varKinds",{enumerable:!0,get:function(){return mg.varKinds}});ve.operators={GT:new Ie._Code(">"),GTE:new Ie._Code(">="),LT:new Ie._Code("<"),LTE:new Ie._Code("<="),EQ:new Ie._Code("==="),NEQ:new Ie._Code("!=="),NOT:new Ie._Code("!"),OR:new Ie._Code("||"),AND:new Ie._Code("&&"),ADD:new Ie._Code("+")};var oi=class{optimizeNodes(){return this}optimizeNames(e,r){return this}},iT=class extends oi{constructor(e,r,n){super(),this.varKind=e,this.name=r,this.rhs=n}render({es5:e,_n:r}){let n=e?Zn.varKinds.var:this.varKind,s=this.rhs===void 0?"":` = ${this.rhs}`;return`${n} ${this.name}${s};`+r}optimizeNames(e,r){if(e[this.name.str])return this.rhs&&(this.rhs=Jl(this.rhs,e,r)),this}get names(){return this.rhs instanceof Ie._CodeOrName?this.rhs.names:{}}},dg=class extends oi{constructor(e,r,n){super(),this.lhs=e,this.rhs=r,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof Ie.Name&&!e[this.lhs.str]&&!this.sideEffects))return this.rhs=Jl(this.rhs,e,r),this}get names(){let e=this.lhs instanceof Ie.Name?{}:{...this.lhs.names};return pg(e,this.rhs)}},oT=class extends dg{constructor(e,r,n,s){super(e,n,s),this.op=r}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}},aT=class extends oi{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}},lT=class extends oi{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}},cT=class extends oi{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}},uT=class extends oi{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,r){return this.code=Jl(this.code,e,r),this}get names(){return this.code instanceof Ie._CodeOrName?this.code.names:{}}},Ff=class extends oi{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((r,n)=>r+n.render(e),"")}optimizeNodes(){let{nodes:e}=this,r=e.length;for(;r--;){let n=e[r].optimizeNodes();Array.isArray(n)?e.splice(r,1,...n):n?e[r]=n:e.splice(r,1)}return e.length>0?this:void 0}optimizeNames(e,r){let{nodes:n}=this,s=n.length;for(;s--;){let i=n[s];i.optimizeNames(e,r)||(yfe(e,i.names),n.splice(s,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((e,r)=>ca(e,r.names),{})}},ai=class extends Ff{render(e){return"{"+e._n+super.render(e)+"}"+e._n}},fT=class extends Ff{},Kl=class extends ai{};Kl.kind="else";var es=class extends ai{constructor(e,r){super(r),this.condition=e}render(e){let r=`if(${this.condition})`+super.render(e);return this.else&&(r+="else "+this.else.render(e)),r}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(e===!0)return this.nodes;let r=this.else;if(r){let n=r.optimizeNodes();r=this.else=Array.isArray(n)?new Kl(n):n}if(r)return e===!1?r instanceof es?r:r.nodes:this.nodes.length?this:new es(oL(e),r instanceof es?[r]:r.nodes);if(!(e===!1||!this.nodes.length))return this}optimizeNames(e,r){var n;if(this.else=(n=this.else)===null||n===void 0?void 0:n.optimizeNames(e,r),!!(super.optimizeNames(e,r)||this.else))return this.condition=Jl(this.condition,e,r),this}get names(){let e=super.names;return pg(e,this.condition),this.else&&ca(e,this.else.names),e}};es.kind="if";var la=class extends ai{};la.kind="for";var dT=class extends la{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iteration=Jl(this.iteration,e,r),this}get names(){return ca(super.names,this.iteration.names)}},hT=class extends la{constructor(e,r,n,s){super(),this.varKind=e,this.name=r,this.from=n,this.to=s}render(e){let r=e.es5?Zn.varKinds.var:this.varKind,{name:n,from:s,to:i}=this;return`for(${r} ${n}=${s}; ${n}<${i}; ${n}++)`+super.render(e)}get names(){let e=pg(super.names,this.from);return pg(e,this.to)}},hg=class extends la{constructor(e,r,n,s){super(),this.loop=e,this.varKind=r,this.name=n,this.iterable=s}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iterable=Jl(this.iterable,e,r),this}get names(){return ca(super.names,this.iterable.names)}},Uf=class extends ai{constructor(e,r,n){super(),this.name=e,this.args=r,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}};Uf.kind="func";var Bf=class extends Ff{render(e){return"return "+super.render(e)}};Bf.kind="return";var pT=class extends ai{render(e){let r="try"+super.render(e);return this.catch&&(r+=this.catch.render(e)),this.finally&&(r+=this.finally.render(e)),r}optimizeNodes(){var e,r;return super.optimizeNodes(),(e=this.catch)===null||e===void 0||e.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(e,r){var n,s;return super.optimizeNames(e,r),(n=this.catch)===null||n===void 0||n.optimizeNames(e,r),(s=this.finally)===null||s===void 0||s.optimizeNames(e,r),this}get names(){let e=super.names;return this.catch&&ca(e,this.catch.names),this.finally&&ca(e,this.finally.names),e}},zf=class extends ai{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}};zf.kind="catch";var Vf=class extends ai{render(e){return"finally"+super.render(e)}};Vf.kind="finally";var mT=class{constructor(e,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=e,this._scope=new Zn.Scope({parent:e}),this._nodes=[new fT]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,r){let n=this._extScope.value(e,r);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,r){return this._extScope.getValue(e,r)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,r,n,s){let i=this._scope.toName(r);return n!==void 0&&s&&(this._constants[i.str]=n),this._leafNode(new iT(e,i,n)),i}const(e,r,n){return this._def(Zn.varKinds.const,e,r,n)}let(e,r,n){return this._def(Zn.varKinds.let,e,r,n)}var(e,r,n){return this._def(Zn.varKinds.var,e,r,n)}assign(e,r,n){return this._leafNode(new dg(e,r,n))}add(e,r){return this._leafNode(new oT(e,ve.operators.ADD,r))}code(e){return typeof e=="function"?e():e!==Ie.nil&&this._leafNode(new uT(e)),this}object(...e){let r=["{"];for(let[n,s]of e)r.length>1&&r.push(","),r.push(n),(n!==s||this.opts.es5)&&(r.push(":"),(0,Ie.addCodeArg)(r,s));return r.push("}"),new Ie._Code(r)}if(e,r,n){if(this._blockNode(new es(e)),r&&n)this.code(r).else().code(n).endIf();else if(r)this.code(r).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new es(e))}else(){return this._elseNode(new Kl)}endIf(){return this._endBlockNode(es,Kl)}_for(e,r){return this._blockNode(e),r&&this.code(r).endFor(),this}for(e,r){return this._for(new dT(e),r)}forRange(e,r,n,s,i=this.opts.es5?Zn.varKinds.var:Zn.varKinds.let){let o=this._scope.toName(e);return this._for(new hT(i,o,r,n),()=>s(o))}forOf(e,r,n,s=Zn.varKinds.const){let i=this._scope.toName(e);if(this.opts.es5){let o=r instanceof Ie.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,Ie._)`${o}.length`,a=>{this.var(i,(0,Ie._)`${o}[${a}]`),n(i)})}return this._for(new hg("of",s,i,r),()=>n(i))}forIn(e,r,n,s=this.opts.es5?Zn.varKinds.var:Zn.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,Ie._)`Object.keys(${r})`,n);let i=this._scope.toName(e);return this._for(new hg("in",s,i,r),()=>n(i))}endFor(){return this._endBlockNode(la)}label(e){return this._leafNode(new aT(e))}break(e){return this._leafNode(new lT(e))}return(e){let r=new Bf;if(this._blockNode(r),this.code(e),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(Bf)}try(e,r,n){if(!r&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');let s=new pT;if(this._blockNode(s),this.code(e),r){let i=this.name("e");this._currNode=s.catch=new zf(i),r(i)}return n&&(this._currNode=s.finally=new Vf,this.code(n)),this._endBlockNode(zf,Vf)}throw(e){return this._leafNode(new cT(e))}block(e,r){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(r),this}endBlock(e){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let n=this._nodes.length-r;if(n<0||e!==void 0&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=r,this}func(e,r=Ie.nil,n,s){return this._blockNode(new Uf(e,r,n)),s&&this.code(s).endFunc(),this}endFunc(){return this._endBlockNode(Uf)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,r){let n=this._currNode;if(n instanceof e||r&&n instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${e.kind}/${r.kind}`:e.kind}"`)}_elseNode(e){let r=this._currNode;if(!(r instanceof es))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let r=this._nodes;r[r.length-1]=e}};ve.CodeGen=mT;function ca(t,e){for(let r in e)t[r]=(t[r]||0)+(e[r]||0);return t}function pg(t,e){return e instanceof Ie._CodeOrName?ca(t,e.names):t}function Jl(t,e,r){if(t instanceof Ie.Name)return n(t);if(!s(t))return t;return new Ie._Code(t._items.reduce((i,o)=>(o instanceof Ie.Name&&(o=n(o)),o instanceof Ie._Code?i.push(...o._items):i.push(o),i),[]));function n(i){let o=r[i.str];return o===void 0||e[i.str]!==1?i:(delete e[i.str],o)}function s(i){return i instanceof Ie._Code&&i._items.some(o=>o instanceof Ie.Name&&e[o.str]===1&&r[o.str]!==void 0)}}function yfe(t,e){for(let r in e)t[r]=(t[r]||0)-(e[r]||0)}function oL(t){return typeof t=="boolean"||typeof t=="number"||t===null?!t:(0,Ie._)`!${gT(t)}`}ve.not=oL;var _fe=aL(ve.operators.AND);function vfe(...t){return t.reduce(_fe)}ve.and=vfe;var wfe=aL(ve.operators.OR);function bfe(...t){return t.reduce(wfe)}ve.or=bfe;function aL(t){return(e,r)=>e===Ie.nil?r:r===Ie.nil?e:(0,Ie._)`${gT(e)} ${t} ${gT(r)}`}function gT(t){return t instanceof Ie.Name?t:(0,Ie._)`(${t})`}});var me=E(Se=>{"use strict";Object.defineProperty(Se,"__esModule",{value:!0});Se.checkStrictMode=Se.getErrorPath=Se.Type=Se.useFunc=Se.setEvaluated=Se.evaluatedPropsToName=Se.mergeEvaluated=Se.eachItem=Se.unescapeJsonPointer=Se.escapeJsonPointer=Se.escapeFragment=Se.unescapeFragment=Se.schemaRefOrVal=Se.schemaHasRulesButRef=Se.schemaHasRules=Se.checkUnknownRules=Se.alwaysValidSchema=Se.toHash=void 0;var Je=ne(),Efe=Wl();function Sfe(t){let e={};for(let r of t)e[r]=!0;return e}Se.toHash=Sfe;function Tfe(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(uL(t,e),!fL(e,t.self.RULES.all))}Se.alwaysValidSchema=Tfe;function uL(t,e=t.schema){let{opts:r,self:n}=t;if(!r.strictSchema||typeof e=="boolean")return;let s=n.RULES.keywords;for(let i in e)s[i]||pL(t,`unknown keyword: "${i}"`)}Se.checkUnknownRules=uL;function fL(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(e[r])return!0;return!1}Se.schemaHasRules=fL;function Rfe(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}Se.schemaHasRulesButRef=Rfe;function $fe({topSchemaRef:t,schemaPath:e},r,n,s){if(!s){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,Je._)`${r}`}return(0,Je._)`${t}${e}${(0,Je.getProperty)(n)}`}Se.schemaRefOrVal=$fe;function Ofe(t){return dL(decodeURIComponent(t))}Se.unescapeFragment=Ofe;function Pfe(t){return encodeURIComponent(_T(t))}Se.escapeFragment=Pfe;function _T(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}Se.escapeJsonPointer=_T;function dL(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}Se.unescapeJsonPointer=dL;function xfe(t,e){if(Array.isArray(t))for(let r of t)e(r);else e(t)}Se.eachItem=xfe;function lL({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:n}){return(s,i,o,a)=>{let l=o===void 0?i:o instanceof Je.Name?(i instanceof Je.Name?t(s,i,o):e(s,i,o),o):i instanceof Je.Name?(e(s,o,i),i):r(i,o);return a===Je.Name&&!(l instanceof Je.Name)?n(s,l):l}}Se.mergeEvaluated={props:lL({mergeNames:(t,e,r)=>t.if((0,Je._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,Je._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,Je._)`${r} || {}`).code((0,Je._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,Je._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,Je._)`${r} || {}`),vT(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:hL}),items:lL({mergeNames:(t,e,r)=>t.if((0,Je._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,Je._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,Je._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,Je._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function hL(t,e){if(e===!0)return t.var("props",!0);let r=t.var("props",(0,Je._)`{}`);return e!==void 0&&vT(t,r,e),r}Se.evaluatedPropsToName=hL;function vT(t,e,r){Object.keys(r).forEach(n=>t.assign((0,Je._)`${e}${(0,Je.getProperty)(n)}`,!0))}Se.setEvaluated=vT;var cL={};function Nfe(t,e){return t.scopeValue("func",{ref:e,code:cL[e.code]||(cL[e.code]=new Efe._Code(e.code))})}Se.useFunc=Nfe;var yT;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(yT||(Se.Type=yT={}));function Cfe(t,e,r){if(t instanceof Je.Name){let n=e===yT.Num;return r?n?(0,Je._)`"[" + ${t} + "]"`:(0,Je._)`"['" + ${t} + "']"`:n?(0,Je._)`"/" + ${t}`:(0,Je._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,Je.getProperty)(t).toString():"/"+_T(t)}Se.getErrorPath=Cfe;function pL(t,e,r=t.opts.strictSchema){if(r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}Se.checkStrictMode=pL});var bn=E(wT=>{"use strict";Object.defineProperty(wT,"__esModule",{value:!0});var lr=ne(),Ife={data:new lr.Name("data"),valCxt:new lr.Name("valCxt"),instancePath:new lr.Name("instancePath"),parentData:new lr.Name("parentData"),parentDataProperty:new lr.Name("parentDataProperty"),rootData:new lr.Name("rootData"),dynamicAnchors:new lr.Name("dynamicAnchors"),vErrors:new lr.Name("vErrors"),errors:new lr.Name("errors"),this:new lr.Name("this"),self:new lr.Name("self"),scope:new lr.Name("scope"),json:new lr.Name("json"),jsonPos:new lr.Name("jsonPos"),jsonLen:new lr.Name("jsonLen"),jsonPart:new lr.Name("jsonPart")};wT.default=Ife});var Hf=E(cr=>{"use strict";Object.defineProperty(cr,"__esModule",{value:!0});cr.extendErrors=cr.resetErrorsCount=cr.reportExtraError=cr.reportError=cr.keyword$DataError=cr.keywordError=void 0;var De=ne(),gg=me(),$r=bn();cr.keywordError={message:({keyword:t})=>(0,De.str)`must pass "${t}" keyword validation`};cr.keyword$DataError={message:({keyword:t,schemaType:e})=>e?(0,De.str)`"${t}" keyword must be ${e} ($data)`:(0,De.str)`"${t}" keyword is invalid ($data)`};function Afe(t,e=cr.keywordError,r,n){let{it:s}=t,{gen:i,compositeRule:o,allErrors:a}=s,l=yL(t,e,r);n??(o||a)?mL(i,l):gL(s,(0,De._)`[${l}]`)}cr.reportError=Afe;function kfe(t,e=cr.keywordError,r){let{it:n}=t,{gen:s,compositeRule:i,allErrors:o}=n,a=yL(t,e,r);mL(s,a),i||o||gL(n,$r.default.vErrors)}cr.reportExtraError=kfe;function Dfe(t,e){t.assign($r.default.errors,e),t.if((0,De._)`${$r.default.vErrors} !== null`,()=>t.if(e,()=>t.assign((0,De._)`${$r.default.vErrors}.length`,e),()=>t.assign($r.default.vErrors,null)))}cr.resetErrorsCount=Dfe;function Mfe({gen:t,keyword:e,schemaValue:r,data:n,errsCount:s,it:i}){if(s===void 0)throw new Error("ajv implementation error");let o=t.name("err");t.forRange("i",s,$r.default.errors,a=>{t.const(o,(0,De._)`${$r.default.vErrors}[${a}]`),t.if((0,De._)`${o}.instancePath === undefined`,()=>t.assign((0,De._)`${o}.instancePath`,(0,De.strConcat)($r.default.instancePath,i.errorPath))),t.assign((0,De._)`${o}.schemaPath`,(0,De.str)`${i.errSchemaPath}/${e}`),i.opts.verbose&&(t.assign((0,De._)`${o}.schema`,r),t.assign((0,De._)`${o}.data`,n))})}cr.extendErrors=Mfe;function mL(t,e){let r=t.const("err",e);t.if((0,De._)`${$r.default.vErrors} === null`,()=>t.assign($r.default.vErrors,(0,De._)`[${r}]`),(0,De._)`${$r.default.vErrors}.push(${r})`),t.code((0,De._)`${$r.default.errors}++`)}function gL(t,e){let{gen:r,validateName:n,schemaEnv:s}=t;s.$async?r.throw((0,De._)`new ${t.ValidationError}(${e})`):(r.assign((0,De._)`${n}.errors`,e),r.return(!1))}var ua={keyword:new De.Name("keyword"),schemaPath:new De.Name("schemaPath"),params:new De.Name("params"),propertyName:new De.Name("propertyName"),message:new De.Name("message"),schema:new De.Name("schema"),parentSchema:new De.Name("parentSchema")};function yL(t,e,r){let{createErrors:n}=t.it;return n===!1?(0,De._)`{}`:jfe(t,e,r)}function jfe(t,e,r={}){let{gen:n,it:s}=t,i=[qfe(s,r),Lfe(t,r)];return Ffe(t,e,i),n.object(...i)}function qfe({errorPath:t},{instancePath:e}){let r=e?(0,De.str)`${t}${(0,gg.getErrorPath)(e,gg.Type.Str)}`:t;return[$r.default.instancePath,(0,De.strConcat)($r.default.instancePath,r)]}function Lfe({keyword:t,it:{errSchemaPath:e}},{schemaPath:r,parentSchema:n}){let s=n?e:(0,De.str)`${e}/${t}`;return r&&(s=(0,De.str)`${s}${(0,gg.getErrorPath)(r,gg.Type.Str)}`),[ua.schemaPath,s]}function Ffe(t,{params:e,message:r},n){let{keyword:s,data:i,schemaValue:o,it:a}=t,{opts:l,propertyName:c,topSchemaRef:u,schemaPath:d}=a;n.push([ua.keyword,s],[ua.params,typeof e=="function"?e(t):e||(0,De._)`{}`]),l.messages&&n.push([ua.message,typeof r=="function"?r(t):r]),l.verbose&&n.push([ua.schema,o],[ua.parentSchema,(0,De._)`${u}${d}`],[$r.default.data,i]),c&&n.push([ua.propertyName,c])}});var vL=E(Yl=>{"use strict";Object.defineProperty(Yl,"__esModule",{value:!0});Yl.boolOrEmptySchema=Yl.topBoolOrEmptySchema=void 0;var Ufe=Hf(),Bfe=ne(),zfe=bn(),Vfe={message:"boolean schema is false"};function Hfe(t){let{gen:e,schema:r,validateName:n}=t;r===!1?_L(t,!1):typeof r=="object"&&r.$async===!0?e.return(zfe.default.data):(e.assign((0,Bfe._)`${n}.errors`,null),e.return(!0))}Yl.topBoolOrEmptySchema=Hfe;function Gfe(t,e){let{gen:r,schema:n}=t;n===!1?(r.var(e,!1),_L(t)):r.var(e,!0)}Yl.boolOrEmptySchema=Gfe;function _L(t,e){let{gen:r,data:n}=t,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,Ufe.reportError)(s,Vfe,void 0,e)}});var bT=E(Xl=>{"use strict";Object.defineProperty(Xl,"__esModule",{value:!0});Xl.getRules=Xl.isJSONType=void 0;var Wfe=["string","number","integer","boolean","null","object","array"],Kfe=new Set(Wfe);function Jfe(t){return typeof t=="string"&&Kfe.has(t)}Xl.isJSONType=Jfe;function Yfe(){let t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}Xl.getRules=Yfe});var ET=E(Qi=>{"use strict";Object.defineProperty(Qi,"__esModule",{value:!0});Qi.shouldUseRule=Qi.shouldUseGroup=Qi.schemaHasRulesForType=void 0;function Xfe({schema:t,self:e},r){let n=e.RULES.types[r];return n&&n!==!0&&wL(t,n)}Qi.schemaHasRulesForType=Xfe;function wL(t,e){return e.rules.some(r=>bL(t,r))}Qi.shouldUseGroup=wL;function bL(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(n=>t[n]!==void 0))}Qi.shouldUseRule=bL});var Gf=E(ur=>{"use strict";Object.defineProperty(ur,"__esModule",{value:!0});ur.reportTypeError=ur.checkDataTypes=ur.checkDataType=ur.coerceAndCheckDataType=ur.getJSONTypes=ur.getSchemaTypes=ur.DataType=void 0;var Qfe=bT(),Zfe=ET(),ede=Hf(),he=ne(),EL=me(),Ql;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(Ql||(ur.DataType=Ql={}));function tde(t){let e=SL(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}ur.getSchemaTypes=tde;function SL(t){let e=Array.isArray(t)?t:t?[t]:[];if(e.every(Qfe.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}ur.getJSONTypes=SL;function rde(t,e){let{gen:r,data:n,opts:s}=t,i=nde(e,s.coerceTypes),o=e.length>0&&!(i.length===0&&e.length===1&&(0,Zfe.schemaHasRulesForType)(t,e[0]));if(o){let a=TT(e,n,s.strictNumbers,Ql.Wrong);r.if(a,()=>{i.length?sde(t,e,i):RT(t)})}return o}ur.coerceAndCheckDataType=rde;var TL=new Set(["string","number","integer","boolean","null"]);function nde(t,e){return e?t.filter(r=>TL.has(r)||e==="array"&&r==="array"):[]}function sde(t,e,r){let{gen:n,data:s,opts:i}=t,o=n.let("dataType",(0,he._)`typeof ${s}`),a=n.let("coerced",(0,he._)`undefined`);i.coerceTypes==="array"&&n.if((0,he._)`${o} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>n.assign(s,(0,he._)`${s}[0]`).assign(o,(0,he._)`typeof ${s}`).if(TT(e,s,i.strictNumbers),()=>n.assign(a,s))),n.if((0,he._)`${a} !== undefined`);for(let c of r)(TL.has(c)||c==="array"&&i.coerceTypes==="array")&&l(c);n.else(),RT(t),n.endIf(),n.if((0,he._)`${a} !== undefined`,()=>{n.assign(s,a),ide(t,a)});function l(c){switch(c){case"string":n.elseIf((0,he._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,he._)`"" + ${s}`).elseIf((0,he._)`${s} === null`).assign(a,(0,he._)`""`);return;case"number":n.elseIf((0,he._)`${o} == "boolean" || ${s} === null
              || (${o} == "string" && ${s} && ${s} == +${s})`).assign(a,(0,he._)`+${s}`);return;case"integer":n.elseIf((0,he._)`${o} === "boolean" || ${s} === null
              || (${o} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(a,(0,he._)`+${s}`);return;case"boolean":n.elseIf((0,he._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(a,!1).elseIf((0,he._)`${s} === "true" || ${s} === 1`).assign(a,!0);return;case"null":n.elseIf((0,he._)`${s} === "" || ${s} === 0 || ${s} === false`),n.assign(a,null);return;case"array":n.elseIf((0,he._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${s} === null`).assign(a,(0,he._)`[${s}]`)}}}function ide({gen:t,parentData:e,parentDataProperty:r},n){t.if((0,he._)`${e} !== undefined`,()=>t.assign((0,he._)`${e}[${r}]`,n))}function ST(t,e,r,n=Ql.Correct){let s=n===Ql.Correct?he.operators.EQ:he.operators.NEQ,i;switch(t){case"null":return(0,he._)`${e} ${s} null`;case"array":i=(0,he._)`Array.isArray(${e})`;break;case"object":i=(0,he._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":i=o((0,he._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":i=o();break;default:return(0,he._)`typeof ${e} ${s} ${t}`}return n===Ql.Correct?i:(0,he.not)(i);function o(a=he.nil){return(0,he.and)((0,he._)`typeof ${e} == "number"`,a,r?(0,he._)`isFinite(${e})`:he.nil)}}ur.checkDataType=ST;function TT(t,e,r,n){if(t.length===1)return ST(t[0],e,r,n);let s,i=(0,EL.toHash)(t);if(i.array&&i.object){let o=(0,he._)`typeof ${e} != "object"`;s=i.null?o:(0,he._)`!${e} || ${o}`,delete i.null,delete i.array,delete i.object}else s=he.nil;i.number&&delete i.integer;for(let o in i)s=(0,he.and)(s,ST(o,e,r,n));return s}ur.checkDataTypes=TT;var ode={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,he._)`{type: ${t}}`:(0,he._)`{type: ${e}}`};function RT(t){let e=ade(t);(0,ede.reportError)(e,ode)}ur.reportTypeError=RT;function ade(t){let{gen:e,data:r,schema:n}=t,s=(0,EL.schemaRefOrVal)(t,n,"type");return{gen:e,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:t}}});var $L=E(yg=>{"use strict";Object.defineProperty(yg,"__esModule",{value:!0});yg.assignDefaults=void 0;var Zl=ne(),lde=me();function cde(t,e){let{properties:r,items:n}=t.schema;if(e==="object"&&r)for(let s in r)RL(t,s,r[s].default);else e==="array"&&Array.isArray(n)&&n.forEach((s,i)=>RL(t,i,s.default))}yg.assignDefaults=cde;function RL(t,e,r){let{gen:n,compositeRule:s,data:i,opts:o}=t;if(r===void 0)return;let a=(0,Zl._)`${i}${(0,Zl.getProperty)(e)}`;if(s){(0,lde.checkStrictMode)(t,`default is ignored for: ${a}`);return}let l=(0,Zl._)`${a} === undefined`;o.useDefaults==="empty"&&(l=(0,Zl._)`${l} || ${a} === null || ${a} === ""`),n.if(l,(0,Zl._)`${a} = ${(0,Zl.stringify)(r)}`)}});var Jt=E(Ge=>{"use strict";Object.defineProperty(Ge,"__esModule",{value:!0});Ge.validateUnion=Ge.validateArray=Ge.usePattern=Ge.callValidateCode=Ge.schemaProperties=Ge.allSchemaProperties=Ge.noPropertyInData=Ge.propertyInData=Ge.isOwnProperty=Ge.hasPropFunc=Ge.reportMissingProp=Ge.checkMissingProp=Ge.checkReportMissingProp=void 0;var st=ne(),$T=me(),Zi=bn(),ude=me();function fde(t,e){let{gen:r,data:n,it:s}=t;r.if(PT(r,n,e,s.opts.ownProperties),()=>{t.setParams({missingProperty:(0,st._)`${e}`},!0),t.error()})}Ge.checkReportMissingProp=fde;function dde({gen:t,data:e,it:{opts:r}},n,s){return(0,st.or)(...n.map(i=>(0,st.and)(PT(t,e,i,r.ownProperties),(0,st._)`${s} = ${i}`)))}Ge.checkMissingProp=dde;function hde(t,e){t.setParams({missingProperty:e},!0),t.error()}Ge.reportMissingProp=hde;function OL(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,st._)`Object.prototype.hasOwnProperty`})}Ge.hasPropFunc=OL;function OT(t,e,r){return(0,st._)`${OL(t)}.call(${e}, ${r})`}Ge.isOwnProperty=OT;function pde(t,e,r,n){let s=(0,st._)`${e}${(0,st.getProperty)(r)} !== undefined`;return n?(0,st._)`${s} && ${OT(t,e,r)}`:s}Ge.propertyInData=pde;function PT(t,e,r,n){let s=(0,st._)`${e}${(0,st.getProperty)(r)} === undefined`;return n?(0,st.or)(s,(0,st.not)(OT(t,e,r))):s}Ge.noPropertyInData=PT;function PL(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}Ge.allSchemaProperties=PL;function mde(t,e){return PL(e).filter(r=>!(0,$T.alwaysValidSchema)(t,e[r]))}Ge.schemaProperties=mde;function gde({schemaCode:t,data:e,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:i},it:o},a,l,c){let u=c?(0,st._)`${t}, ${e}, ${n}${s}`:e,d=[[Zi.default.instancePath,(0,st.strConcat)(Zi.default.instancePath,i)],[Zi.default.parentData,o.parentData],[Zi.default.parentDataProperty,o.parentDataProperty],[Zi.default.rootData,Zi.default.rootData]];o.opts.dynamicRef&&d.push([Zi.default.dynamicAnchors,Zi.default.dynamicAnchors]);let p=(0,st._)`${u}, ${r.object(...d)}`;return l!==st.nil?(0,st._)`${a}.call(${l}, ${p})`:(0,st._)`${a}(${p})`}Ge.callValidateCode=gde;var yde=(0,st._)`new RegExp`;function _de({gen:t,it:{opts:e}},r){let n=e.unicodeRegExp?"u":"",{regExp:s}=e.code,i=s(r,n);return t.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,st._)`${s.code==="new RegExp"?yde:(0,ude.useFunc)(t,s)}(${r}, ${n})`})}Ge.usePattern=_de;function vde(t){let{gen:e,data:r,keyword:n,it:s}=t,i=e.name("valid");if(s.allErrors){let a=e.let("valid",!0);return o(()=>e.assign(a,!1)),a}return e.var(i,!0),o(()=>e.break()),i;function o(a){let l=e.const("len",(0,st._)`${r}.length`);e.forRange("i",0,l,c=>{t.subschema({keyword:n,dataProp:c,dataPropType:$T.Type.Num},i),e.if((0,st.not)(i),a)})}}Ge.validateArray=vde;function wde(t){let{gen:e,schema:r,keyword:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(l=>(0,$T.alwaysValidSchema)(s,l))&&!s.opts.unevaluated)return;let o=e.let("valid",!1),a=e.name("_valid");e.block(()=>r.forEach((l,c)=>{let u=t.subschema({keyword:n,schemaProp:c,compositeRule:!0},a);e.assign(o,(0,st._)`${o} || ${a}`),t.mergeValidEvaluated(u,a)||e.if((0,st.not)(o))})),t.result(o,()=>t.reset(),()=>t.error(!0))}Ge.validateUnion=wde});var CL=E(Os=>{"use strict";Object.defineProperty(Os,"__esModule",{value:!0});Os.validateKeywordUsage=Os.validSchemaType=Os.funcKeywordCode=Os.macroKeywordCode=void 0;var Or=ne(),fa=bn(),bde=Jt(),Ede=Hf();function Sde(t,e){let{gen:r,keyword:n,schema:s,parentSchema:i,it:o}=t,a=e.macro.call(o.self,s,i,o),l=NL(r,n,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);let c=r.name("valid");t.subschema({schema:a,schemaPath:Or.nil,errSchemaPath:`${o.errSchemaPath}/${n}`,topSchemaRef:l,compositeRule:!0},c),t.pass(c,()=>t.error(!0))}Os.macroKeywordCode=Sde;function Tde(t,e){var r;let{gen:n,keyword:s,schema:i,parentSchema:o,$data:a,it:l}=t;$de(l,e);let c=!a&&e.compile?e.compile.call(l.self,i,o,l):e.validate,u=NL(n,s,c),d=n.let("valid");t.block$data(d,p),t.ok((r=e.valid)!==null&&r!==void 0?r:d);function p(){if(e.errors===!1)m(),e.modifying&&xL(t),y(()=>t.error());else{let g=e.async?f():h();e.modifying&&xL(t),y(()=>Rde(t,g))}}function f(){let g=n.let("ruleErrs",null);return n.try(()=>m((0,Or._)`await `),w=>n.assign(d,!1).if((0,Or._)`${w} instanceof ${l.ValidationError}`,()=>n.assign(g,(0,Or._)`${w}.errors`),()=>n.throw(w))),g}function h(){let g=(0,Or._)`${u}.errors`;return n.assign(g,null),m(Or.nil),g}function m(g=e.async?(0,Or._)`await `:Or.nil){let w=l.opts.passContext?fa.default.this:fa.default.self,_=!("compile"in e&&!a||e.schema===!1);n.assign(d,(0,Or._)`${g}${(0,bde.callValidateCode)(t,u,w,_)}`,e.modifying)}function y(g){var w;n.if((0,Or.not)((w=e.valid)!==null&&w!==void 0?w:d),g)}}Os.funcKeywordCode=Tde;function xL(t){let{gen:e,data:r,it:n}=t;e.if(n.parentData,()=>e.assign(r,(0,Or._)`${n.parentData}[${n.parentDataProperty}]`))}function Rde(t,e){let{gen:r}=t;r.if((0,Or._)`Array.isArray(${e})`,()=>{r.assign(fa.default.vErrors,(0,Or._)`${fa.default.vErrors} === null ? ${e} : ${fa.default.vErrors}.concat(${e})`).assign(fa.default.errors,(0,Or._)`${fa.default.vErrors}.length`),(0,Ede.extendErrors)(t)},()=>t.error())}function $de({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function NL(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,Or.stringify)(r)})}function Ode(t,e,r=!1){return!e.length||e.some(n=>n==="array"?Array.isArray(t):n==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==n||r&&typeof t>"u")}Os.validSchemaType=Ode;function Pde({schema:t,opts:e,self:r,errSchemaPath:n},s,i){if(Array.isArray(s.keyword)?!s.keyword.includes(i):s.keyword!==i)throw new Error("ajv implementation error");let o=s.dependencies;if(o?.some(a=>!Object.prototype.hasOwnProperty.call(t,a)))throw new Error(`parent schema must have dependencies of ${i}: ${o.join(",")}`);if(s.validateSchema&&!s.validateSchema(t[i])){let l=`keyword "${i}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(l);else throw new Error(l)}}Os.validateKeywordUsage=Pde});var AL=E(eo=>{"use strict";Object.defineProperty(eo,"__esModule",{value:!0});eo.extendSubschemaMode=eo.extendSubschemaData=eo.getSubschema=void 0;var Ps=ne(),IL=me();function xde(t,{keyword:e,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:i,topSchemaRef:o}){if(e!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){let a=t.schema[e];return r===void 0?{schema:a,schemaPath:(0,Ps._)`${t.schemaPath}${(0,Ps.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:a[r],schemaPath:(0,Ps._)`${t.schemaPath}${(0,Ps.getProperty)(e)}${(0,Ps.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,IL.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||i===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:o,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}eo.getSubschema=xde;function Nde(t,e,{dataProp:r,dataPropType:n,data:s,dataTypes:i,propertyName:o}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:a}=e;if(r!==void 0){let{errorPath:c,dataPathArr:u,opts:d}=e,p=a.let("data",(0,Ps._)`${e.data}${(0,Ps.getProperty)(r)}`,!0);l(p),t.errorPath=(0,Ps.str)`${c}${(0,IL.getErrorPath)(r,n,d.jsPropertySyntax)}`,t.parentDataProperty=(0,Ps._)`${r}`,t.dataPathArr=[...u,t.parentDataProperty]}if(s!==void 0){let c=s instanceof Ps.Name?s:a.let("data",s,!0);l(c),o!==void 0&&(t.propertyName=o)}i&&(t.dataTypes=i);function l(c){t.data=c,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,c]}}eo.extendSubschemaData=Nde;function Cde(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:i}){n!==void 0&&(t.compositeRule=n),s!==void 0&&(t.createErrors=s),i!==void 0&&(t.allErrors=i),t.jtdDiscriminator=e,t.jtdMetadata=r}eo.extendSubschemaMode=Cde});var DL=E((ake,kL)=>{"use strict";var to=kL.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};_g(e,n,s,t,"",t)};to.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};to.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};to.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};to.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function _g(t,e,r,n,s,i,o,a,l,c){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,s,i,o,a,l,c);for(var u in n){var d=n[u];if(Array.isArray(d)){if(u in to.arrayKeywords)for(var p=0;p<d.length;p++)_g(t,e,r,d[p],s+"/"+u+"/"+p,i,s,u,n,p)}else if(u in to.propsKeywords){if(d&&typeof d=="object")for(var f in d)_g(t,e,r,d[f],s+"/"+u+"/"+Ide(f),i,s,u,n,f)}else(u in to.keywords||t.allKeys&&!(u in to.skipKeywords))&&_g(t,e,r,d,s+"/"+u,i,s,u,n)}r(n,s,i,o,a,l,c)}}function Ide(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}});var Wf=E(Wr=>{"use strict";Object.defineProperty(Wr,"__esModule",{value:!0});Wr.getSchemaRefs=Wr.resolveUrl=Wr.normalizeId=Wr._getFullPath=Wr.getFullPath=Wr.inlineRef=void 0;var Ade=me(),kde=Zs(),Dde=DL(),Mde=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function jde(t,e=!0){return typeof t=="boolean"?!0:e===!0?!xT(t):e?ML(t)<=e:!1}Wr.inlineRef=jde;var qde=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function xT(t){for(let e in t){if(qde.has(e))return!0;let r=t[e];if(Array.isArray(r)&&r.some(xT)||typeof r=="object"&&xT(r))return!0}return!1}function ML(t){let e=0;for(let r in t){if(r==="$ref")return 1/0;if(e++,!Mde.has(r)&&(typeof t[r]=="object"&&(0,Ade.eachItem)(t[r],n=>e+=ML(n)),e===1/0))return 1/0}return e}function jL(t,e="",r){r!==!1&&(e=ec(e));let n=t.parse(e);return qL(t,n)}Wr.getFullPath=jL;function qL(t,e){return t.serialize(e).split("#")[0]+"#"}Wr._getFullPath=qL;var Lde=/#\/?$/;function ec(t){return t?t.replace(Lde,""):""}Wr.normalizeId=ec;function Fde(t,e,r){return r=ec(r),t.resolve(e,r)}Wr.resolveUrl=Fde;var Ude=/^[a-z_][-a-z0-9._]*$/i;function Bde(t,e){if(typeof t=="boolean")return{};let{schemaId:r,uriResolver:n}=this.opts,s=ec(t[r]||e),i={"":s},o=jL(n,s,!1),a={},l=new Set;return Dde(t,{allKeys:!0},(d,p,f,h)=>{if(h===void 0)return;let m=o+p,y=i[h];typeof d[r]=="string"&&(y=g.call(this,d[r])),w.call(this,d.$anchor),w.call(this,d.$dynamicAnchor),i[p]=y;function g(_){let v=this.opts.uriResolver.resolve;if(_=ec(y?v(y,_):_),l.has(_))throw u(_);l.add(_);let S=this.refs[_];return typeof S=="string"&&(S=this.refs[S]),typeof S=="object"?c(d,S.schema,_):_!==ec(m)&&(_[0]==="#"?(c(d,a[_],_),a[_]=d):this.refs[_]=m),_}function w(_){if(typeof _=="string"){if(!Ude.test(_))throw new Error(`invalid anchor "${_}"`);g.call(this,`#${_}`)}}}),a;function c(d,p,f){if(p!==void 0&&!kde(d,p))throw u(f)}function u(d){return new Error(`reference "${d}" resolves to more than one schema`)}}Wr.getSchemaRefs=Bde});var tc=E(ro=>{"use strict";Object.defineProperty(ro,"__esModule",{value:!0});ro.getData=ro.KeywordCxt=ro.validateFunctionCode=void 0;var zL=vL(),LL=Gf(),CT=ET(),vg=Gf(),zde=$L(),Jf=CL(),NT=AL(),Z=ne(),oe=bn(),Vde=Wf(),li=me(),Kf=Hf();function Hde(t){if(GL(t)&&(WL(t),HL(t))){Kde(t);return}VL(t,()=>(0,zL.topBoolOrEmptySchema)(t))}ro.validateFunctionCode=Hde;function VL({gen:t,validateName:e,schema:r,schemaEnv:n,opts:s},i){s.code.es5?t.func(e,(0,Z._)`${oe.default.data}, ${oe.default.valCxt}`,n.$async,()=>{t.code((0,Z._)`"use strict"; ${FL(r,s)}`),Wde(t,s),t.code(i)}):t.func(e,(0,Z._)`${oe.default.data}, ${Gde(s)}`,n.$async,()=>t.code(FL(r,s)).code(i))}function Gde(t){return(0,Z._)`{${oe.default.instancePath}="", ${oe.default.parentData}, ${oe.default.parentDataProperty}, ${oe.default.rootData}=${oe.default.data}${t.dynamicRef?(0,Z._)`, ${oe.default.dynamicAnchors}={}`:Z.nil}}={}`}function Wde(t,e){t.if(oe.default.valCxt,()=>{t.var(oe.default.instancePath,(0,Z._)`${oe.default.valCxt}.${oe.default.instancePath}`),t.var(oe.default.parentData,(0,Z._)`${oe.default.valCxt}.${oe.default.parentData}`),t.var(oe.default.parentDataProperty,(0,Z._)`${oe.default.valCxt}.${oe.default.parentDataProperty}`),t.var(oe.default.rootData,(0,Z._)`${oe.default.valCxt}.${oe.default.rootData}`),e.dynamicRef&&t.var(oe.default.dynamicAnchors,(0,Z._)`${oe.default.valCxt}.${oe.default.dynamicAnchors}`)},()=>{t.var(oe.default.instancePath,(0,Z._)`""`),t.var(oe.default.parentData,(0,Z._)`undefined`),t.var(oe.default.parentDataProperty,(0,Z._)`undefined`),t.var(oe.default.rootData,oe.default.data),e.dynamicRef&&t.var(oe.default.dynamicAnchors,(0,Z._)`{}`)})}function Kde(t){let{schema:e,opts:r,gen:n}=t;VL(t,()=>{r.$comment&&e.$comment&&JL(t),Zde(t),n.let(oe.default.vErrors,null),n.let(oe.default.errors,0),r.unevaluated&&Jde(t),KL(t),rhe(t)})}function Jde(t){let{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,Z._)`${r}.evaluated`),e.if((0,Z._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,Z._)`${t.evaluated}.props`,(0,Z._)`undefined`)),e.if((0,Z._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,Z._)`${t.evaluated}.items`,(0,Z._)`undefined`))}function FL(t,e){let r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,Z._)`/*# sourceURL=${r} */`:Z.nil}function Yde(t,e){if(GL(t)&&(WL(t),HL(t))){Xde(t,e);return}(0,zL.boolOrEmptySchema)(t,e)}function HL({schema:t,self:e}){if(typeof t=="boolean")return!t;for(let r in t)if(e.RULES.all[r])return!0;return!1}function GL(t){return typeof t.schema!="boolean"}function Xde(t,e){let{schema:r,gen:n,opts:s}=t;s.$comment&&r.$comment&&JL(t),ehe(t),the(t);let i=n.const("_errs",oe.default.errors);KL(t,i),n.var(e,(0,Z._)`${i} === ${oe.default.errors}`)}function WL(t){(0,li.checkUnknownRules)(t),Qde(t)}function KL(t,e){if(t.opts.jtd)return UL(t,[],!1,e);let r=(0,LL.getSchemaTypes)(t.schema),n=(0,LL.coerceAndCheckDataType)(t,r);UL(t,r,!n,e)}function Qde(t){let{schema:e,errSchemaPath:r,opts:n,self:s}=t;e.$ref&&n.ignoreKeywordsWithRef&&(0,li.schemaHasRulesButRef)(e,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function Zde(t){let{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,li.checkStrictMode)(t,"default is ignored in the schema root")}function ehe(t){let e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,Vde.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function the(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function JL({gen:t,schemaEnv:e,schema:r,errSchemaPath:n,opts:s}){let i=r.$comment;if(s.$comment===!0)t.code((0,Z._)`${oe.default.self}.logger.log(${i})`);else if(typeof s.$comment=="function"){let o=(0,Z.str)`${n}/$comment`,a=t.scopeValue("root",{ref:e.root});t.code((0,Z._)`${oe.default.self}.opts.$comment(${i}, ${o}, ${a}.schema)`)}}function rhe(t){let{gen:e,schemaEnv:r,validateName:n,ValidationError:s,opts:i}=t;r.$async?e.if((0,Z._)`${oe.default.errors} === 0`,()=>e.return(oe.default.data),()=>e.throw((0,Z._)`new ${s}(${oe.default.vErrors})`)):(e.assign((0,Z._)`${n}.errors`,oe.default.vErrors),i.unevaluated&&nhe(t),e.return((0,Z._)`${oe.default.errors} === 0`))}function nhe({gen:t,evaluated:e,props:r,items:n}){r instanceof Z.Name&&t.assign((0,Z._)`${e}.props`,r),n instanceof Z.Name&&t.assign((0,Z._)`${e}.items`,n)}function UL(t,e,r,n){let{gen:s,schema:i,data:o,allErrors:a,opts:l,self:c}=t,{RULES:u}=c;if(i.$ref&&(l.ignoreKeywordsWithRef||!(0,li.schemaHasRulesButRef)(i,u))){s.block(()=>XL(t,"$ref",u.all.$ref.definition));return}l.jtd||she(t,e),s.block(()=>{for(let p of u.rules)d(p);d(u.post)});function d(p){(0,CT.shouldUseGroup)(i,p)&&(p.type?(s.if((0,vg.checkDataType)(p.type,o,l.strictNumbers)),BL(t,p),e.length===1&&e[0]===p.type&&r&&(s.else(),(0,vg.reportTypeError)(t)),s.endIf()):BL(t,p),a||s.if((0,Z._)`${oe.default.errors} === ${n||0}`))}}function BL(t,e){let{gen:r,schema:n,opts:{useDefaults:s}}=t;s&&(0,zde.assignDefaults)(t,e.type),r.block(()=>{for(let i of e.rules)(0,CT.shouldUseRule)(n,i)&&XL(t,i.keyword,i.definition,e.type)})}function she(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(ihe(t,e),t.opts.allowUnionTypes||ohe(t,e),ahe(t,t.dataTypes))}function ihe(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{YL(t.dataTypes,r)||IT(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),che(t,e)}}function ohe(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&IT(t,"use allowUnionTypes to allow union type keyword")}function ahe(t,e){let r=t.self.RULES.all;for(let n in r){let s=r[n];if(typeof s=="object"&&(0,CT.shouldUseRule)(t.schema,s)){let{type:i}=s.definition;i.length&&!i.some(o=>lhe(e,o))&&IT(t,`missing type "${i.join(",")}" for keyword "${n}"`)}}}function lhe(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function YL(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function che(t,e){let r=[];for(let n of t.dataTypes)YL(e,n)?r.push(n):e.includes("integer")&&n==="number"&&r.push("integer");t.dataTypes=r}function IT(t,e){let r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,li.checkStrictMode)(t,e,t.opts.strictTypes)}var wg=class{constructor(e,r,n){if((0,Jf.validateKeywordUsage)(e,r,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,li.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",QL(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,Jf.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",oe.default.errors))}result(e,r,n){this.failResult((0,Z.not)(e),r,n)}failResult(e,r,n){this.gen.if(e),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,Z.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:r}=this;this.fail((0,Z._)`${r} !== undefined && (${(0,Z.or)(this.invalid$data(),e)})`)}error(e,r,n){if(r){this.setParams(r),this._error(e,n),this.setParams({});return}this._error(e,n)}_error(e,r){(e?Kf.reportExtraError:Kf.reportError)(this,this.def.error,r)}$dataError(){(0,Kf.reportError)(this,this.def.$dataError||Kf.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,Kf.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,n=Z.nil){this.gen.block(()=>{this.check$data(e,n),r()})}check$data(e=Z.nil,r=Z.nil){if(!this.$data)return;let{gen:n,schemaCode:s,schemaType:i,def:o}=this;n.if((0,Z.or)((0,Z._)`${s} === undefined`,r)),e!==Z.nil&&n.assign(e,!0),(i.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==Z.nil&&n.assign(e,!1)),n.else()}invalid$data(){let{gen:e,schemaCode:r,schemaType:n,def:s,it:i}=this;return(0,Z.or)(o(),a());function o(){if(n.length){if(!(r instanceof Z.Name))throw new Error("ajv implementation error");let l=Array.isArray(n)?n:[n];return(0,Z._)`${(0,vg.checkDataTypes)(l,r,i.opts.strictNumbers,vg.DataType.Wrong)}`}return Z.nil}function a(){if(s.validateSchema){let l=e.scopeValue("validate$data",{ref:s.validateSchema});return(0,Z._)`!${l}(${r})`}return Z.nil}}subschema(e,r){let n=(0,NT.getSubschema)(this.it,e);(0,NT.extendSubschemaData)(n,this.it,e),(0,NT.extendSubschemaMode)(n,e);let s={...this.it,...n,items:void 0,props:void 0};return Yde(s,r),s}mergeEvaluated(e,r){let{it:n,gen:s}=this;n.opts.unevaluated&&(n.props!==!0&&e.props!==void 0&&(n.props=li.mergeEvaluated.props(s,e.props,n.props,r)),n.items!==!0&&e.items!==void 0&&(n.items=li.mergeEvaluated.items(s,e.items,n.items,r)))}mergeValidEvaluated(e,r){let{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(e,Z.Name)),!0}};ro.KeywordCxt=wg;function XL(t,e,r,n){let s=new wg(t,r,e);"code"in r?r.code(s,n):s.$data&&r.validate?(0,Jf.funcKeywordCode)(s,r):"macro"in r?(0,Jf.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,Jf.funcKeywordCode)(s,r)}var uhe=/^\/(?:[^~]|~0|~1)*$/,fhe=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function QL(t,{dataLevel:e,dataNames:r,dataPathArr:n}){let s,i;if(t==="")return oe.default.rootData;if(t[0]==="/"){if(!uhe.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);s=t,i=oe.default.rootData}else{let c=fhe.exec(t);if(!c)throw new Error(`Invalid JSON-pointer: ${t}`);let u=+c[1];if(s=c[2],s==="#"){if(u>=e)throw new Error(l("property/index",u));return n[e-u]}if(u>e)throw new Error(l("data",u));if(i=r[e-u],!s)return i}let o=i,a=s.split("/");for(let c of a)c&&(i=(0,Z._)`${i}${(0,Z.getProperty)((0,li.unescapeJsonPointer)(c))}`,o=(0,Z._)`${o} && ${i}`);return o;function l(c,u){return`Cannot access ${c} ${u} levels up, current level is ${e}`}}ro.getData=QL});var Yf=E(kT=>{"use strict";Object.defineProperty(kT,"__esModule",{value:!0});var AT=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};kT.default=AT});var ci=E(jT=>{"use strict";Object.defineProperty(jT,"__esModule",{value:!0});var DT=Wf(),MT=class extends Error{constructor(e,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,DT.resolveUrl)(e,r,n),this.missingSchema=(0,DT.normalizeId)((0,DT.getFullPath)(e,this.missingRef))}};jT.default=MT});var ha=E(En=>{"use strict";Object.defineProperty(En,"__esModule",{value:!0});En.resolveSchema=En.getCompilingSchema=En.resolveRef=En.compileSchema=En.SchemaEnv=void 0;var ts=ne(),dhe=Yf(),da=bn(),rs=Wf(),ZL=me(),hhe=tc(),rc=class{constructor(e){var r;this.refs={},this.dynamicAnchors={};let n;typeof e.schema=="object"&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,rs.normalizeId)(n?.[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=n?.$async,this.refs={}}};En.SchemaEnv=rc;function LT(t){let e=eF.call(this,t);if(e)return e;let r=(0,rs.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new ts.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i}),a;t.$async&&(a=o.scopeValue("Error",{ref:dhe.default,code:(0,ts._)`require("ajv/dist/runtime/validation_error").default`}));let l=o.scopeName("validate");t.validateName=l;let c={gen:o,allErrors:this.opts.allErrors,data:da.default.data,parentData:da.default.parentData,parentDataProperty:da.default.parentDataProperty,dataNames:[da.default.data],dataPathArr:[ts.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,ts.stringify)(t.schema)}:{ref:t.schema}),validateName:l,ValidationError:a,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:ts.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,ts._)`""`,opts:this.opts,self:this},u;try{this._compilations.add(t),(0,hhe.validateFunctionCode)(c),o.optimize(this.opts.code.optimize);let d=o.toString();u=`${o.scopeRefs(da.default.scope)}return ${d}`,this.opts.code.process&&(u=this.opts.code.process(u,t));let f=new Function(`${da.default.self}`,`${da.default.scope}`,u)(this,this.scope.get());if(this.scope.value(l,{ref:f}),f.errors=null,f.schema=t.schema,f.schemaEnv=t,t.$async&&(f.$async=!0),this.opts.code.source===!0&&(f.source={validateName:l,validateCode:d,scopeValues:o._values}),this.opts.unevaluated){let{props:h,items:m}=c;f.evaluated={props:h instanceof ts.Name?void 0:h,items:m instanceof ts.Name?void 0:m,dynamicProps:h instanceof ts.Name,dynamicItems:m instanceof ts.Name},f.source&&(f.source.evaluated=(0,ts.stringify)(f.evaluated))}return t.validate=f,t}catch(d){throw delete t.validate,delete t.validateName,u&&this.logger.error("Error compiling schema, function code:",u),d}finally{this._compilations.delete(t)}}En.compileSchema=LT;function phe(t,e,r){var n;r=(0,rs.resolveUrl)(this.opts.uriResolver,e,r);let s=t.refs[r];if(s)return s;let i=yhe.call(this,t,r);if(i===void 0){let o=(n=t.localRefs)===null||n===void 0?void 0:n[r],{schemaId:a}=this.opts;o&&(i=new rc({schema:o,schemaId:a,root:t,baseId:e}))}if(i!==void 0)return t.refs[r]=mhe.call(this,i)}En.resolveRef=phe;function mhe(t){return(0,rs.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:LT.call(this,t)}function eF(t){for(let e of this._compilations)if(ghe(e,t))return e}En.getCompilingSchema=eF;function ghe(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function yhe(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||bg.call(this,t,e)}function bg(t,e){let r=this.opts.uriResolver.parse(e),n=(0,rs._getFullPath)(this.opts.uriResolver,r),s=(0,rs.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&n===s)return qT.call(this,r,t);let i=(0,rs.normalizeId)(n),o=this.refs[i]||this.schemas[i];if(typeof o=="string"){let a=bg.call(this,t,o);return typeof a?.schema!="object"?void 0:qT.call(this,r,a)}if(typeof o?.schema=="object"){if(o.validate||LT.call(this,o),i===(0,rs.normalizeId)(e)){let{schema:a}=o,{schemaId:l}=this.opts,c=a[l];return c&&(s=(0,rs.resolveUrl)(this.opts.uriResolver,s,c)),new rc({schema:a,schemaId:l,root:t,baseId:s})}return qT.call(this,r,o)}}En.resolveSchema=bg;var _he=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function qT(t,{baseId:e,schema:r,root:n}){var s;if(((s=t.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(let a of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let l=r[(0,ZL.unescapeFragment)(a)];if(l===void 0)return;r=l;let c=typeof r=="object"&&r[this.opts.schemaId];!_he.has(a)&&c&&(e=(0,rs.resolveUrl)(this.opts.uriResolver,e,c))}let i;if(typeof r!="boolean"&&r.$ref&&!(0,ZL.schemaHasRulesButRef)(r,this.RULES)){let a=(0,rs.resolveUrl)(this.opts.uriResolver,e,r.$ref);i=bg.call(this,n,a)}let{schemaId:o}=this.opts;if(i=i||new rc({schema:r,schemaId:o,root:n,baseId:e}),i.schema!==i.root.schema)return i}});var tF=E((hke,vhe)=>{vhe.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var nF=E(FT=>{"use strict";Object.defineProperty(FT,"__esModule",{value:!0});var rF=Sl();rF.code='require("ajv/dist/runtime/uri").default';FT.default=rF});var zT=E(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0});Yt.CodeGen=Yt.Name=Yt.nil=Yt.stringify=Yt.str=Yt._=Yt.KeywordCxt=void 0;var whe=tc();Object.defineProperty(Yt,"KeywordCxt",{enumerable:!0,get:function(){return whe.KeywordCxt}});var nc=ne();Object.defineProperty(Yt,"_",{enumerable:!0,get:function(){return nc._}});Object.defineProperty(Yt,"str",{enumerable:!0,get:function(){return nc.str}});Object.defineProperty(Yt,"stringify",{enumerable:!0,get:function(){return nc.stringify}});Object.defineProperty(Yt,"nil",{enumerable:!0,get:function(){return nc.nil}});Object.defineProperty(Yt,"Name",{enumerable:!0,get:function(){return nc.Name}});Object.defineProperty(Yt,"CodeGen",{enumerable:!0,get:function(){return nc.CodeGen}});var bhe=Yf(),lF=ci(),Ehe=bT(),Xf=ha(),She=ne(),Qf=Wf(),Eg=Gf(),BT=me(),sF=tF(),The=nF(),cF=(t,e)=>new RegExp(t,e);cF.code="new RegExp";var Rhe=["removeAdditional","useDefaults","coerceTypes"],$he=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),Ohe={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},Phe={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},iF=200;function xhe(t){var e,r,n,s,i,o,a,l,c,u,d,p,f,h,m,y,g,w,_,v,S,$,T,O,R;let P=t.strict,A=(e=t.code)===null||e===void 0?void 0:e.optimize,N=A===!0||A===void 0?1:A||0,C=(n=(r=t.code)===null||r===void 0?void 0:r.regExp)!==null&&n!==void 0?n:cF,z=(s=t.uriResolver)!==null&&s!==void 0?s:The.default;return{strictSchema:(o=(i=t.strictSchema)!==null&&i!==void 0?i:P)!==null&&o!==void 0?o:!0,strictNumbers:(l=(a=t.strictNumbers)!==null&&a!==void 0?a:P)!==null&&l!==void 0?l:!0,strictTypes:(u=(c=t.strictTypes)!==null&&c!==void 0?c:P)!==null&&u!==void 0?u:"log",strictTuples:(p=(d=t.strictTuples)!==null&&d!==void 0?d:P)!==null&&p!==void 0?p:"log",strictRequired:(h=(f=t.strictRequired)!==null&&f!==void 0?f:P)!==null&&h!==void 0?h:!1,code:t.code?{...t.code,optimize:N,regExp:C}:{optimize:N,regExp:C},loopRequired:(m=t.loopRequired)!==null&&m!==void 0?m:iF,loopEnum:(y=t.loopEnum)!==null&&y!==void 0?y:iF,meta:(g=t.meta)!==null&&g!==void 0?g:!0,messages:(w=t.messages)!==null&&w!==void 0?w:!0,inlineRefs:(_=t.inlineRefs)!==null&&_!==void 0?_:!0,schemaId:(v=t.schemaId)!==null&&v!==void 0?v:"$id",addUsedSchema:(S=t.addUsedSchema)!==null&&S!==void 0?S:!0,validateSchema:($=t.validateSchema)!==null&&$!==void 0?$:!0,validateFormats:(T=t.validateFormats)!==null&&T!==void 0?T:!0,unicodeRegExp:(O=t.unicodeRegExp)!==null&&O!==void 0?O:!0,int32range:(R=t.int32range)!==null&&R!==void 0?R:!0,uriResolver:z}}var Zf=class{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...xhe(e)};let{es5:r,lines:n}=this.opts.code;this.scope=new She.ValueScope({scope:{},prefixes:$he,es5:r,lines:n}),this.logger=Dhe(e.logger);let s=e.validateFormats;e.validateFormats=!1,this.RULES=(0,Ehe.getRules)(),oF.call(this,Ohe,e,"NOT SUPPORTED"),oF.call(this,Phe,e,"DEPRECATED","warn"),this._metaOpts=Ahe.call(this),e.formats&&Che.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&Ihe.call(this,e.keywords),typeof e.meta=="object"&&this.addMetaSchema(e.meta),Nhe.call(this),e.validateFormats=s}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:r,schemaId:n}=this.opts,s=sF;n==="id"&&(s={...sF},s.id=s.$id,delete s.$id),r&&e&&this.addMetaSchema(s,s[n],!1)}defaultMeta(){let{meta:e,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof e=="object"?e[r]||e:void 0}validate(e,r){let n;if(typeof e=="string"){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);let s=n(r);return"$async"in n||(this.errors=n.errors),s}compile(e,r){let n=this._addSchema(e,r);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:n}=this.opts;return s.call(this,e,r);async function s(u,d){await i.call(this,u.$schema);let p=this._addSchema(u,d);return p.validate||o.call(this,p)}async function i(u){u&&!this.getSchema(u)&&await s.call(this,{$ref:u},!0)}async function o(u){try{return this._compileSchemaEnv(u)}catch(d){if(!(d instanceof lF.default))throw d;return a.call(this,d),await l.call(this,d.missingSchema),o.call(this,u)}}function a({missingSchema:u,missingRef:d}){if(this.refs[u])throw new Error(`AnySchema ${u} is loaded but ${d} cannot be resolved`)}async function l(u){let d=await c.call(this,u);this.refs[u]||await i.call(this,d.$schema),this.refs[u]||this.addSchema(d,u,r)}async function c(u){let d=this._loading[u];if(d)return d;try{return await(this._loading[u]=n(u))}finally{delete this._loading[u]}}}addSchema(e,r,n,s=this.opts.validateSchema){if(Array.isArray(e)){for(let o of e)this.addSchema(o,void 0,n,s);return this}let i;if(typeof e=="object"){let{schemaId:o}=this.opts;if(i=e[o],i!==void 0&&typeof i!="string")throw new Error(`schema ${o} must be string`)}return r=(0,Qf.normalizeId)(r||i),this._checkUnique(r),this.schemas[r]=this._addSchema(e,n,r,s,!0),this}addMetaSchema(e,r,n=this.opts.validateSchema){return this.addSchema(e,r,!0,n),this}validateSchema(e,r){if(typeof e=="boolean")return!0;let n;if(n=e.$schema,n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let s=this.validate(n,e);if(!s&&r){let i="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(i);else throw new Error(i)}return s}getSchema(e){let r;for(;typeof(r=aF.call(this,e))=="string";)e=r;if(r===void 0){let{schemaId:n}=this.opts,s=new Xf.SchemaEnv({schema:{},schemaId:n});if(r=Xf.resolveSchema.call(this,s,e),!r)return;this.refs[e]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=aF.call(this,e);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{let r=e;this._cache.delete(r);let n=e[this.opts.schemaId];return n&&(n=(0,Qf.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let r of e)this.addKeyword(r);return this}addKeyword(e,r){let n;if(typeof e=="string")n=e,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=n);else if(typeof e=="object"&&r===void 0){if(r=e,n=r.keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(jhe.call(this,n,r),!r)return(0,BT.eachItem)(n,i=>UT.call(this,i)),this;Lhe.call(this,r);let s={...r,type:(0,Eg.getJSONTypes)(r.type),schemaType:(0,Eg.getJSONTypes)(r.schemaType)};return(0,BT.eachItem)(n,s.type.length===0?i=>UT.call(this,i,s):i=>s.type.forEach(o=>UT.call(this,i,s,o))),this}getKeyword(e){let r=this.RULES.all[e];return typeof r=="object"?r.definition:!!r}removeKeyword(e){let{RULES:r}=this;delete r.keywords[e],delete r.all[e];for(let n of r.rules){let s=n.rules.findIndex(i=>i.keyword===e);s>=0&&n.rules.splice(s,1)}return this}addFormat(e,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[e]=r,this}errorsText(e=this.errors,{separator:r=", ",dataVar:n="data"}={}){return!e||e.length===0?"No errors":e.map(s=>`${n}${s.instancePath} ${s.message}`).reduce((s,i)=>s+r+i)}$dataMetaSchema(e,r){let n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(let s of r){let i=s.split("/").slice(1),o=e;for(let a of i)o=o[a];for(let a in n){let l=n[a];if(typeof l!="object")continue;let{$data:c}=l.definition,u=o[a];c&&u&&(o[a]=uF(u))}}return e}_removeAllSchemas(e,r){for(let n in e){let s=e[n];(!r||r.test(n))&&(typeof s=="string"?delete e[n]:s&&!s.meta&&(this._cache.delete(s.schema),delete e[n]))}}_addSchema(e,r,n,s=this.opts.validateSchema,i=this.opts.addUsedSchema){let o,{schemaId:a}=this.opts;if(typeof e=="object")o=e[a];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof e!="boolean")throw new Error("schema must be object or boolean")}let l=this._cache.get(e);if(l!==void 0)return l;n=(0,Qf.normalizeId)(o||n);let c=Qf.getSchemaRefs.call(this,e,n);return l=new Xf.SchemaEnv({schema:e,schemaId:a,meta:r,baseId:n,localRefs:c}),this._cache.set(l.schema,l),i&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=l),s&&this.validateSchema(e,!0),l}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):Xf.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let r=this.opts;this.opts=this._metaOpts;try{Xf.compileSchema.call(this,e)}finally{this.opts=r}}};Zf.ValidationError=bhe.default;Zf.MissingRefError=lF.default;Yt.default=Zf;function oF(t,e,r,n="error"){for(let s in t){let i=s;i in e&&this.logger[n](`${r}: option ${s}. ${t[i]}`)}}function aF(t){return t=(0,Qf.normalizeId)(t),this.schemas[t]||this.refs[t]}function Nhe(){let t=this.opts.schemas;if(t)if(Array.isArray(t))this.addSchema(t);else for(let e in t)this.addSchema(t[e],e)}function Che(){for(let t in this.opts.formats){let e=this.opts.formats[t];e&&this.addFormat(t,e)}}function Ihe(t){if(Array.isArray(t)){this.addVocabulary(t);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let e in t){let r=t[e];r.keyword||(r.keyword=e),this.addKeyword(r)}}function Ahe(){let t={...this.opts};for(let e of Rhe)delete t[e];return t}var khe={log(){},warn(){},error(){}};function Dhe(t){if(t===!1)return khe;if(t===void 0)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}var Mhe=/^[a-z_$][a-z0-9_$:-]*$/i;function jhe(t,e){let{RULES:r}=this;if((0,BT.eachItem)(t,n=>{if(r.keywords[n])throw new Error(`Keyword ${n} is already defined`);if(!Mhe.test(n))throw new Error(`Keyword ${n} has invalid name`)}),!!e&&e.$data&&!("code"in e||"validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function UT(t,e,r){var n;let s=e?.post;if(r&&s)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:i}=this,o=s?i.post:i.rules.find(({type:l})=>l===r);if(o||(o={type:r,rules:[]},i.rules.push(o)),i.keywords[t]=!0,!e)return;let a={keyword:t,definition:{...e,type:(0,Eg.getJSONTypes)(e.type),schemaType:(0,Eg.getJSONTypes)(e.schemaType)}};e.before?qhe.call(this,o,a,e.before):o.rules.push(a),i.all[t]=a,(n=e.implements)===null||n===void 0||n.forEach(l=>this.addKeyword(l))}function qhe(t,e,r){let n=t.rules.findIndex(s=>s.keyword===r);n>=0?t.rules.splice(n,0,e):(t.rules.push(e),this.logger.warn(`rule ${r} is not defined`))}function Lhe(t){let{metaSchema:e}=t;e!==void 0&&(t.$data&&this.opts.$data&&(e=uF(e)),t.validateSchema=this.compile(e,!0))}var Fhe={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function uF(t){return{anyOf:[t,Fhe]}}});var fF=E(VT=>{"use strict";Object.defineProperty(VT,"__esModule",{value:!0});var Uhe={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};VT.default=Uhe});var HT=E(pa=>{"use strict";Object.defineProperty(pa,"__esModule",{value:!0});pa.callRef=pa.getValidate=void 0;var Bhe=ci(),dF=Jt(),Kr=ne(),sc=bn(),hF=ha(),Sg=me(),zhe={keyword:"$ref",schemaType:"string",code(t){let{gen:e,schema:r,it:n}=t,{baseId:s,schemaEnv:i,validateName:o,opts:a,self:l}=n,{root:c}=i;if((r==="#"||r==="#/")&&s===c.baseId)return d();let u=hF.resolveRef.call(l,c,s,r);if(u===void 0)throw new Bhe.default(n.opts.uriResolver,s,r);if(u instanceof hF.SchemaEnv)return p(u);return f(u);function d(){if(i===c)return Tg(t,o,i,i.$async);let h=e.scopeValue("root",{ref:c});return Tg(t,(0,Kr._)`${h}.validate`,c,c.$async)}function p(h){let m=pF(t,h);Tg(t,m,h,h.$async)}function f(h){let m=e.scopeValue("schema",a.code.source===!0?{ref:h,code:(0,Kr.stringify)(h)}:{ref:h}),y=e.name("valid"),g=t.subschema({schema:h,dataTypes:[],schemaPath:Kr.nil,topSchemaRef:m,errSchemaPath:r},y);t.mergeEvaluated(g),t.ok(y)}}};function pF(t,e){let{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,Kr._)`${r.scopeValue("wrapper",{ref:e})}.validate`}pa.getValidate=pF;function Tg(t,e,r,n){let{gen:s,it:i}=t,{allErrors:o,schemaEnv:a,opts:l}=i,c=l.passContext?sc.default.this:Kr.nil;n?u():d();function u(){if(!a.$async)throw new Error("async schema referenced by sync schema");let h=s.let("valid");s.try(()=>{s.code((0,Kr._)`await ${(0,dF.callValidateCode)(t,e,c)}`),f(e),o||s.assign(h,!0)},m=>{s.if((0,Kr._)`!(${m} instanceof ${i.ValidationError})`,()=>s.throw(m)),p(m),o||s.assign(h,!1)}),t.ok(h)}function d(){t.result((0,dF.callValidateCode)(t,e,c),()=>f(e),()=>p(e))}function p(h){let m=(0,Kr._)`${h}.errors`;s.assign(sc.default.vErrors,(0,Kr._)`${sc.default.vErrors} === null ? ${m} : ${sc.default.vErrors}.concat(${m})`),s.assign(sc.default.errors,(0,Kr._)`${sc.default.vErrors}.length`)}function f(h){var m;if(!i.opts.unevaluated)return;let y=(m=r?.validate)===null||m===void 0?void 0:m.evaluated;if(i.props!==!0)if(y&&!y.dynamicProps)y.props!==void 0&&(i.props=Sg.mergeEvaluated.props(s,y.props,i.props));else{let g=s.var("props",(0,Kr._)`${h}.evaluated.props`);i.props=Sg.mergeEvaluated.props(s,g,i.props,Kr.Name)}if(i.items!==!0)if(y&&!y.dynamicItems)y.items!==void 0&&(i.items=Sg.mergeEvaluated.items(s,y.items,i.items));else{let g=s.var("items",(0,Kr._)`${h}.evaluated.items`);i.items=Sg.mergeEvaluated.items(s,g,i.items,Kr.Name)}}}pa.callRef=Tg;pa.default=zhe});var mF=E(GT=>{"use strict";Object.defineProperty(GT,"__esModule",{value:!0});var Vhe=fF(),Hhe=HT(),Ghe=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Vhe.default,Hhe.default];GT.default=Ghe});var gF=E(WT=>{"use strict";Object.defineProperty(WT,"__esModule",{value:!0});var Rg=ne(),no=Rg.operators,$g={maximum:{okStr:"<=",ok:no.LTE,fail:no.GT},minimum:{okStr:">=",ok:no.GTE,fail:no.LT},exclusiveMaximum:{okStr:"<",ok:no.LT,fail:no.GTE},exclusiveMinimum:{okStr:">",ok:no.GT,fail:no.LTE}},Whe={message:({keyword:t,schemaCode:e})=>(0,Rg.str)`must be ${$g[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,Rg._)`{comparison: ${$g[t].okStr}, limit: ${e}}`},Khe={keyword:Object.keys($g),type:"number",schemaType:"number",$data:!0,error:Whe,code(t){let{keyword:e,data:r,schemaCode:n}=t;t.fail$data((0,Rg._)`${r} ${$g[e].fail} ${n} || isNaN(${r})`)}};WT.default=Khe});var yF=E(KT=>{"use strict";Object.defineProperty(KT,"__esModule",{value:!0});var ed=ne(),Jhe={message:({schemaCode:t})=>(0,ed.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,ed._)`{multipleOf: ${t}}`},Yhe={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Jhe,code(t){let{gen:e,data:r,schemaCode:n,it:s}=t,i=s.opts.multipleOfPrecision,o=e.let("res"),a=i?(0,ed._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${i}`:(0,ed._)`${o} !== parseInt(${o})`;t.fail$data((0,ed._)`(${n} === 0 || (${o} = ${r}/${n}, ${a}))`)}};KT.default=Yhe});var vF=E(JT=>{"use strict";Object.defineProperty(JT,"__esModule",{value:!0});function _F(t){let e=t.length,r=0,n=0,s;for(;n<e;)r++,s=t.charCodeAt(n++),s>=55296&&s<=56319&&n<e&&(s=t.charCodeAt(n),(s&64512)===56320&&n++);return r}JT.default=_F;_F.code='require("ajv/dist/runtime/ucs2length").default'});var wF=E(YT=>{"use strict";Object.defineProperty(YT,"__esModule",{value:!0});var ma=ne(),Xhe=me(),Qhe=vF(),Zhe={message({keyword:t,schemaCode:e}){let r=t==="maxLength"?"more":"fewer";return(0,ma.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,ma._)`{limit: ${t}}`},epe={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Zhe,code(t){let{keyword:e,data:r,schemaCode:n,it:s}=t,i=e==="maxLength"?ma.operators.GT:ma.operators.LT,o=s.opts.unicode===!1?(0,ma._)`${r}.length`:(0,ma._)`${(0,Xhe.useFunc)(t.gen,Qhe.default)}(${r})`;t.fail$data((0,ma._)`${o} ${i} ${n}`)}};YT.default=epe});var bF=E(XT=>{"use strict";Object.defineProperty(XT,"__esModule",{value:!0});var tpe=Jt(),Og=ne(),rpe={message:({schemaCode:t})=>(0,Og.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,Og._)`{pattern: ${t}}`},npe={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:rpe,code(t){let{data:e,$data:r,schema:n,schemaCode:s,it:i}=t,o=i.opts.unicodeRegExp?"u":"",a=r?(0,Og._)`(new RegExp(${s}, ${o}))`:(0,tpe.usePattern)(t,n);t.fail$data((0,Og._)`!${a}.test(${e})`)}};XT.default=npe});var EF=E(QT=>{"use strict";Object.defineProperty(QT,"__esModule",{value:!0});var td=ne(),spe={message({keyword:t,schemaCode:e}){let r=t==="maxProperties"?"more":"fewer";return(0,td.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,td._)`{limit: ${t}}`},ipe={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:spe,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxProperties"?td.operators.GT:td.operators.LT;t.fail$data((0,td._)`Object.keys(${r}).length ${s} ${n}`)}};QT.default=ipe});var SF=E(ZT=>{"use strict";Object.defineProperty(ZT,"__esModule",{value:!0});var rd=Jt(),nd=ne(),ope=me(),ape={message:({params:{missingProperty:t}})=>(0,nd.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,nd._)`{missingProperty: ${t}}`},lpe={keyword:"required",type:"object",schemaType:"array",$data:!0,error:ape,code(t){let{gen:e,schema:r,schemaCode:n,data:s,$data:i,it:o}=t,{opts:a}=o;if(!i&&r.length===0)return;let l=r.length>=a.loopRequired;if(o.allErrors?c():u(),a.strictRequired){let f=t.parentSchema.properties,{definedProperties:h}=t.it;for(let m of r)if(f?.[m]===void 0&&!h.has(m)){let y=o.schemaEnv.baseId+o.errSchemaPath,g=`required property "${m}" is not defined at "${y}" (strictRequired)`;(0,ope.checkStrictMode)(o,g,o.opts.strictRequired)}}function c(){if(l||i)t.block$data(nd.nil,d);else for(let f of r)(0,rd.checkReportMissingProp)(t,f)}function u(){let f=e.let("missing");if(l||i){let h=e.let("valid",!0);t.block$data(h,()=>p(f,h)),t.ok(h)}else e.if((0,rd.checkMissingProp)(t,r,f)),(0,rd.reportMissingProp)(t,f),e.else()}function d(){e.forOf("prop",n,f=>{t.setParams({missingProperty:f}),e.if((0,rd.noPropertyInData)(e,s,f,a.ownProperties),()=>t.error())})}function p(f,h){t.setParams({missingProperty:f}),e.forOf(f,n,()=>{e.assign(h,(0,rd.propertyInData)(e,s,f,a.ownProperties)),e.if((0,nd.not)(h),()=>{t.error(),e.break()})},nd.nil)}}};ZT.default=lpe});var TF=E(eR=>{"use strict";Object.defineProperty(eR,"__esModule",{value:!0});var sd=ne(),cpe={message({keyword:t,schemaCode:e}){let r=t==="maxItems"?"more":"fewer";return(0,sd.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,sd._)`{limit: ${t}}`},upe={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:cpe,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxItems"?sd.operators.GT:sd.operators.LT;t.fail$data((0,sd._)`${r}.length ${s} ${n}`)}};eR.default=upe});var Pg=E(tR=>{"use strict";Object.defineProperty(tR,"__esModule",{value:!0});var RF=Zs();RF.code='require("ajv/dist/runtime/equal").default';tR.default=RF});var $F=E(nR=>{"use strict";Object.defineProperty(nR,"__esModule",{value:!0});var rR=Gf(),Xt=ne(),fpe=me(),dpe=Pg(),hpe={message:({params:{i:t,j:e}})=>(0,Xt.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,Xt._)`{i: ${t}, j: ${e}}`},ppe={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:hpe,code(t){let{gen:e,data:r,$data:n,schema:s,parentSchema:i,schemaCode:o,it:a}=t;if(!n&&!s)return;let l=e.let("valid"),c=i.items?(0,rR.getSchemaTypes)(i.items):[];t.block$data(l,u,(0,Xt._)`${o} === false`),t.ok(l);function u(){let h=e.let("i",(0,Xt._)`${r}.length`),m=e.let("j");t.setParams({i:h,j:m}),e.assign(l,!0),e.if((0,Xt._)`${h} > 1`,()=>(d()?p:f)(h,m))}function d(){return c.length>0&&!c.some(h=>h==="object"||h==="array")}function p(h,m){let y=e.name("item"),g=(0,rR.checkDataTypes)(c,y,a.opts.strictNumbers,rR.DataType.Wrong),w=e.const("indices",(0,Xt._)`{}`);e.for((0,Xt._)`;${h}--;`,()=>{e.let(y,(0,Xt._)`${r}[${h}]`),e.if(g,(0,Xt._)`continue`),c.length>1&&e.if((0,Xt._)`typeof ${y} == "string"`,(0,Xt._)`${y} += "_"`),e.if((0,Xt._)`typeof ${w}[${y}] == "number"`,()=>{e.assign(m,(0,Xt._)`${w}[${y}]`),t.error(),e.assign(l,!1).break()}).code((0,Xt._)`${w}[${y}] = ${h}`)})}function f(h,m){let y=(0,fpe.useFunc)(e,dpe.default),g=e.name("outer");e.label(g).for((0,Xt._)`;${h}--;`,()=>e.for((0,Xt._)`${m} = ${h}; ${m}--;`,()=>e.if((0,Xt._)`${y}(${r}[${h}], ${r}[${m}])`,()=>{t.error(),e.assign(l,!1).break(g)})))}}};nR.default=ppe});var OF=E(iR=>{"use strict";Object.defineProperty(iR,"__esModule",{value:!0});var sR=ne(),mpe=me(),gpe=Pg(),ype={message:"must be equal to constant",params:({schemaCode:t})=>(0,sR._)`{allowedValue: ${t}}`},_pe={keyword:"const",$data:!0,error:ype,code(t){let{gen:e,data:r,$data:n,schemaCode:s,schema:i}=t;n||i&&typeof i=="object"?t.fail$data((0,sR._)`!${(0,mpe.useFunc)(e,gpe.default)}(${r}, ${s})`):t.fail((0,sR._)`${i} !== ${r}`)}};iR.default=_pe});var PF=E(oR=>{"use strict";Object.defineProperty(oR,"__esModule",{value:!0});var id=ne(),vpe=me(),wpe=Pg(),bpe={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,id._)`{allowedValues: ${t}}`},Epe={keyword:"enum",schemaType:"array",$data:!0,error:bpe,code(t){let{gen:e,data:r,$data:n,schema:s,schemaCode:i,it:o}=t;if(!n&&s.length===0)throw new Error("enum must have non-empty array");let a=s.length>=o.opts.loopEnum,l,c=()=>l??(l=(0,vpe.useFunc)(e,wpe.default)),u;if(a||n)u=e.let("valid"),t.block$data(u,d);else{if(!Array.isArray(s))throw new Error("ajv implementation error");let f=e.const("vSchema",i);u=(0,id.or)(...s.map((h,m)=>p(f,m)))}t.pass(u);function d(){e.assign(u,!1),e.forOf("v",i,f=>e.if((0,id._)`${c()}(${r}, ${f})`,()=>e.assign(u,!0).break()))}function p(f,h){let m=s[h];return typeof m=="object"&&m!==null?(0,id._)`${c()}(${r}, ${f}[${h}])`:(0,id._)`${r} === ${m}`}}};oR.default=Epe});var xF=E(aR=>{"use strict";Object.defineProperty(aR,"__esModule",{value:!0});var Spe=gF(),Tpe=yF(),Rpe=wF(),$pe=bF(),Ope=EF(),Ppe=SF(),xpe=TF(),Npe=$F(),Cpe=OF(),Ipe=PF(),Ape=[Spe.default,Tpe.default,Rpe.default,$pe.default,Ope.default,Ppe.default,xpe.default,Npe.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},Cpe.default,Ipe.default];aR.default=Ape});var cR=E(od=>{"use strict";Object.defineProperty(od,"__esModule",{value:!0});od.validateAdditionalItems=void 0;var ga=ne(),lR=me(),kpe={message:({params:{len:t}})=>(0,ga.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,ga._)`{limit: ${t}}`},Dpe={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:kpe,code(t){let{parentSchema:e,it:r}=t,{items:n}=e;if(!Array.isArray(n)){(0,lR.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}NF(t,n)}};function NF(t,e){let{gen:r,schema:n,data:s,keyword:i,it:o}=t;o.items=!0;let a=r.const("len",(0,ga._)`${s}.length`);if(n===!1)t.setParams({len:e.length}),t.pass((0,ga._)`${a} <= ${e.length}`);else if(typeof n=="object"&&!(0,lR.alwaysValidSchema)(o,n)){let c=r.var("valid",(0,ga._)`${a} <= ${e.length}`);r.if((0,ga.not)(c),()=>l(c)),t.ok(c)}function l(c){r.forRange("i",e.length,a,u=>{t.subschema({keyword:i,dataProp:u,dataPropType:lR.Type.Num},c),o.allErrors||r.if((0,ga.not)(c),()=>r.break())})}}od.validateAdditionalItems=NF;od.default=Dpe});var uR=E(ad=>{"use strict";Object.defineProperty(ad,"__esModule",{value:!0});ad.validateTuple=void 0;var CF=ne(),xg=me(),Mpe=Jt(),jpe={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){let{schema:e,it:r}=t;if(Array.isArray(e))return IF(t,"additionalItems",e);r.items=!0,!(0,xg.alwaysValidSchema)(r,e)&&t.ok((0,Mpe.validateArray)(t))}};function IF(t,e,r=t.schema){let{gen:n,parentSchema:s,data:i,keyword:o,it:a}=t;u(s),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=xg.mergeEvaluated.items(n,r.length,a.items));let l=n.name("valid"),c=n.const("len",(0,CF._)`${i}.length`);r.forEach((d,p)=>{(0,xg.alwaysValidSchema)(a,d)||(n.if((0,CF._)`${c} > ${p}`,()=>t.subschema({keyword:o,schemaProp:p,dataProp:p},l)),t.ok(l))});function u(d){let{opts:p,errSchemaPath:f}=a,h=r.length,m=h===d.minItems&&(h===d.maxItems||d[e]===!1);if(p.strictTuples&&!m){let y=`"${o}" is ${h}-tuple, but minItems or maxItems/${e} are not specified or different at path "${f}"`;(0,xg.checkStrictMode)(a,y,p.strictTuples)}}}ad.validateTuple=IF;ad.default=jpe});var AF=E(fR=>{"use strict";Object.defineProperty(fR,"__esModule",{value:!0});var qpe=uR(),Lpe={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,qpe.validateTuple)(t,"items")};fR.default=Lpe});var DF=E(dR=>{"use strict";Object.defineProperty(dR,"__esModule",{value:!0});var kF=ne(),Fpe=me(),Upe=Jt(),Bpe=cR(),zpe={message:({params:{len:t}})=>(0,kF.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,kF._)`{limit: ${t}}`},Vpe={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:zpe,code(t){let{schema:e,parentSchema:r,it:n}=t,{prefixItems:s}=r;n.items=!0,!(0,Fpe.alwaysValidSchema)(n,e)&&(s?(0,Bpe.validateAdditionalItems)(t,s):t.ok((0,Upe.validateArray)(t)))}};dR.default=Vpe});var MF=E(hR=>{"use strict";Object.defineProperty(hR,"__esModule",{value:!0});var Sn=ne(),Ng=me(),Hpe={message:({params:{min:t,max:e}})=>e===void 0?(0,Sn.str)`must contain at least ${t} valid item(s)`:(0,Sn.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,Sn._)`{minContains: ${t}}`:(0,Sn._)`{minContains: ${t}, maxContains: ${e}}`},Gpe={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Hpe,code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:i}=t,o,a,{minContains:l,maxContains:c}=n;i.opts.next?(o=l===void 0?1:l,a=c):o=1;let u=e.const("len",(0,Sn._)`${s}.length`);if(t.setParams({min:o,max:a}),a===void 0&&o===0){(0,Ng.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,Ng.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,Ng.alwaysValidSchema)(i,r)){let m=(0,Sn._)`${u} >= ${o}`;a!==void 0&&(m=(0,Sn._)`${m} && ${u} <= ${a}`),t.pass(m);return}i.items=!0;let d=e.name("valid");a===void 0&&o===1?f(d,()=>e.if(d,()=>e.break())):o===0?(e.let(d,!0),a!==void 0&&e.if((0,Sn._)`${s}.length > 0`,p)):(e.let(d,!1),p()),t.result(d,()=>t.reset());function p(){let m=e.name("_valid"),y=e.let("count",0);f(m,()=>e.if(m,()=>h(y)))}function f(m,y){e.forRange("i",0,u,g=>{t.subschema({keyword:"contains",dataProp:g,dataPropType:Ng.Type.Num,compositeRule:!0},m),y()})}function h(m){e.code((0,Sn._)`${m}++`),a===void 0?e.if((0,Sn._)`${m} >= ${o}`,()=>e.assign(d,!0).break()):(e.if((0,Sn._)`${m} > ${a}`,()=>e.assign(d,!1).break()),o===1?e.assign(d,!0):e.if((0,Sn._)`${m} >= ${o}`,()=>e.assign(d,!0)))}}};hR.default=Gpe});var LF=E(xs=>{"use strict";Object.defineProperty(xs,"__esModule",{value:!0});xs.validateSchemaDeps=xs.validatePropertyDeps=xs.error=void 0;var pR=ne(),Wpe=me(),ld=Jt();xs.error={message:({params:{property:t,depsCount:e,deps:r}})=>{let n=e===1?"property":"properties";return(0,pR.str)`must have ${n} ${r} when property ${t} is present`},params:({params:{property:t,depsCount:e,deps:r,missingProperty:n}})=>(0,pR._)`{property: ${t},
    missingProperty: ${n},
    depsCount: ${e},
    deps: ${r}}`};var Kpe={keyword:"dependencies",type:"object",schemaType:"object",error:xs.error,code(t){let[e,r]=Jpe(t);jF(t,e),qF(t,r)}};function Jpe({schema:t}){let e={},r={};for(let n in t){if(n==="__proto__")continue;let s=Array.isArray(t[n])?e:r;s[n]=t[n]}return[e,r]}function jF(t,e=t.schema){let{gen:r,data:n,it:s}=t;if(Object.keys(e).length===0)return;let i=r.let("missing");for(let o in e){let a=e[o];if(a.length===0)continue;let l=(0,ld.propertyInData)(r,n,o,s.opts.ownProperties);t.setParams({property:o,depsCount:a.length,deps:a.join(", ")}),s.allErrors?r.if(l,()=>{for(let c of a)(0,ld.checkReportMissingProp)(t,c)}):(r.if((0,pR._)`${l} && (${(0,ld.checkMissingProp)(t,a,i)})`),(0,ld.reportMissingProp)(t,i),r.else())}}xs.validatePropertyDeps=jF;function qF(t,e=t.schema){let{gen:r,data:n,keyword:s,it:i}=t,o=r.name("valid");for(let a in e)(0,Wpe.alwaysValidSchema)(i,e[a])||(r.if((0,ld.propertyInData)(r,n,a,i.opts.ownProperties),()=>{let l=t.subschema({keyword:s,schemaProp:a},o);t.mergeValidEvaluated(l,o)},()=>r.var(o,!0)),t.ok(o))}xs.validateSchemaDeps=qF;xs.default=Kpe});var UF=E(mR=>{"use strict";Object.defineProperty(mR,"__esModule",{value:!0});var FF=ne(),Ype=me(),Xpe={message:"property name must be valid",params:({params:t})=>(0,FF._)`{propertyName: ${t.propertyName}}`},Qpe={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Xpe,code(t){let{gen:e,schema:r,data:n,it:s}=t;if((0,Ype.alwaysValidSchema)(s,r))return;let i=e.name("valid");e.forIn("key",n,o=>{t.setParams({propertyName:o}),t.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},i),e.if((0,FF.not)(i),()=>{t.error(!0),s.allErrors||e.break()})}),t.ok(i)}};mR.default=Qpe});var yR=E(gR=>{"use strict";Object.defineProperty(gR,"__esModule",{value:!0});var Cg=Jt(),ns=ne(),Zpe=bn(),Ig=me(),eme={message:"must NOT have additional properties",params:({params:t})=>(0,ns._)`{additionalProperty: ${t.additionalProperty}}`},tme={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:eme,code(t){let{gen:e,schema:r,parentSchema:n,data:s,errsCount:i,it:o}=t;if(!i)throw new Error("ajv implementation error");let{allErrors:a,opts:l}=o;if(o.props=!0,l.removeAdditional!=="all"&&(0,Ig.alwaysValidSchema)(o,r))return;let c=(0,Cg.allSchemaProperties)(n.properties),u=(0,Cg.allSchemaProperties)(n.patternProperties);d(),t.ok((0,ns._)`${i} === ${Zpe.default.errors}`);function d(){e.forIn("key",s,y=>{!c.length&&!u.length?h(y):e.if(p(y),()=>h(y))})}function p(y){let g;if(c.length>8){let w=(0,Ig.schemaRefOrVal)(o,n.properties,"properties");g=(0,Cg.isOwnProperty)(e,w,y)}else c.length?g=(0,ns.or)(...c.map(w=>(0,ns._)`${y} === ${w}`)):g=ns.nil;return u.length&&(g=(0,ns.or)(g,...u.map(w=>(0,ns._)`${(0,Cg.usePattern)(t,w)}.test(${y})`))),(0,ns.not)(g)}function f(y){e.code((0,ns._)`delete ${s}[${y}]`)}function h(y){if(l.removeAdditional==="all"||l.removeAdditional&&r===!1){f(y);return}if(r===!1){t.setParams({additionalProperty:y}),t.error(),a||e.break();return}if(typeof r=="object"&&!(0,Ig.alwaysValidSchema)(o,r)){let g=e.name("valid");l.removeAdditional==="failing"?(m(y,g,!1),e.if((0,ns.not)(g),()=>{t.reset(),f(y)})):(m(y,g),a||e.if((0,ns.not)(g),()=>e.break()))}}function m(y,g,w){let _={keyword:"additionalProperties",dataProp:y,dataPropType:Ig.Type.Str};w===!1&&Object.assign(_,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(_,g)}}};gR.default=tme});var VF=E(vR=>{"use strict";Object.defineProperty(vR,"__esModule",{value:!0});var rme=tc(),BF=Jt(),_R=me(),zF=yR(),nme={keyword:"properties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:i}=t;i.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&zF.default.code(new rme.KeywordCxt(i,zF.default,"additionalProperties"));let o=(0,BF.allSchemaProperties)(r);for(let d of o)i.definedProperties.add(d);i.opts.unevaluated&&o.length&&i.props!==!0&&(i.props=_R.mergeEvaluated.props(e,(0,_R.toHash)(o),i.props));let a=o.filter(d=>!(0,_R.alwaysValidSchema)(i,r[d]));if(a.length===0)return;let l=e.name("valid");for(let d of a)c(d)?u(d):(e.if((0,BF.propertyInData)(e,s,d,i.opts.ownProperties)),u(d),i.allErrors||e.else().var(l,!0),e.endIf()),t.it.definedProperties.add(d),t.ok(l);function c(d){return i.opts.useDefaults&&!i.compositeRule&&r[d].default!==void 0}function u(d){t.subschema({keyword:"properties",schemaProp:d,dataProp:d},l)}}};vR.default=nme});var KF=E(wR=>{"use strict";Object.defineProperty(wR,"__esModule",{value:!0});var HF=Jt(),Ag=ne(),GF=me(),WF=me(),sme={keyword:"patternProperties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,data:n,parentSchema:s,it:i}=t,{opts:o}=i,a=(0,HF.allSchemaProperties)(r),l=a.filter(m=>(0,GF.alwaysValidSchema)(i,r[m]));if(a.length===0||l.length===a.length&&(!i.opts.unevaluated||i.props===!0))return;let c=o.strictSchema&&!o.allowMatchingProperties&&s.properties,u=e.name("valid");i.props!==!0&&!(i.props instanceof Ag.Name)&&(i.props=(0,WF.evaluatedPropsToName)(e,i.props));let{props:d}=i;p();function p(){for(let m of a)c&&f(m),i.allErrors?h(m):(e.var(u,!0),h(m),e.if(u))}function f(m){for(let y in c)new RegExp(m).test(y)&&(0,GF.checkStrictMode)(i,`property ${y} matches pattern ${m} (use allowMatchingProperties)`)}function h(m){e.forIn("key",n,y=>{e.if((0,Ag._)`${(0,HF.usePattern)(t,m)}.test(${y})`,()=>{let g=l.includes(m);g||t.subschema({keyword:"patternProperties",schemaProp:m,dataProp:y,dataPropType:WF.Type.Str},u),i.opts.unevaluated&&d!==!0?e.assign((0,Ag._)`${d}[${y}]`,!0):!g&&!i.allErrors&&e.if((0,Ag.not)(u),()=>e.break())})})}}};wR.default=sme});var JF=E(bR=>{"use strict";Object.defineProperty(bR,"__esModule",{value:!0});var ime=me(),ome={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){let{gen:e,schema:r,it:n}=t;if((0,ime.alwaysValidSchema)(n,r)){t.fail();return}let s=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),t.failResult(s,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};bR.default=ome});var YF=E(ER=>{"use strict";Object.defineProperty(ER,"__esModule",{value:!0});var ame=Jt(),lme={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:ame.validateUnion,error:{message:"must match a schema in anyOf"}};ER.default=lme});var XF=E(SR=>{"use strict";Object.defineProperty(SR,"__esModule",{value:!0});var kg=ne(),cme=me(),ume={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,kg._)`{passingSchemas: ${t.passing}}`},fme={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:ume,code(t){let{gen:e,schema:r,parentSchema:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&n.discriminator)return;let i=r,o=e.let("valid",!1),a=e.let("passing",null),l=e.name("_valid");t.setParams({passing:a}),e.block(c),t.result(o,()=>t.reset(),()=>t.error(!0));function c(){i.forEach((u,d)=>{let p;(0,cme.alwaysValidSchema)(s,u)?e.var(l,!0):p=t.subschema({keyword:"oneOf",schemaProp:d,compositeRule:!0},l),d>0&&e.if((0,kg._)`${l} && ${o}`).assign(o,!1).assign(a,(0,kg._)`[${a}, ${d}]`).else(),e.if(l,()=>{e.assign(o,!0),e.assign(a,d),p&&t.mergeEvaluated(p,kg.Name)})})}}};SR.default=fme});var QF=E(TR=>{"use strict";Object.defineProperty(TR,"__esModule",{value:!0});var dme=me(),hme={keyword:"allOf",schemaType:"array",code(t){let{gen:e,schema:r,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");let s=e.name("valid");r.forEach((i,o)=>{if((0,dme.alwaysValidSchema)(n,i))return;let a=t.subschema({keyword:"allOf",schemaProp:o},s);t.ok(s),t.mergeEvaluated(a)})}};TR.default=hme});var t2=E(RR=>{"use strict";Object.defineProperty(RR,"__esModule",{value:!0});var Dg=ne(),e2=me(),pme={message:({params:t})=>(0,Dg.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,Dg._)`{failingKeyword: ${t.ifClause}}`},mme={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:pme,code(t){let{gen:e,parentSchema:r,it:n}=t;r.then===void 0&&r.else===void 0&&(0,e2.checkStrictMode)(n,'"if" without "then" and "else" is ignored');let s=ZF(n,"then"),i=ZF(n,"else");if(!s&&!i)return;let o=e.let("valid",!0),a=e.name("_valid");if(l(),t.reset(),s&&i){let u=e.let("ifClause");t.setParams({ifClause:u}),e.if(a,c("then",u),c("else",u))}else s?e.if(a,c("then")):e.if((0,Dg.not)(a),c("else"));t.pass(o,()=>t.error(!0));function l(){let u=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);t.mergeEvaluated(u)}function c(u,d){return()=>{let p=t.subschema({keyword:u},a);e.assign(o,a),t.mergeValidEvaluated(p,o),d?e.assign(d,(0,Dg._)`${u}`):t.setParams({ifClause:u})}}}};function ZF(t,e){let r=t.schema[e];return r!==void 0&&!(0,e2.alwaysValidSchema)(t,r)}RR.default=mme});var r2=E($R=>{"use strict";Object.defineProperty($R,"__esModule",{value:!0});var gme=me(),yme={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,gme.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};$R.default=yme});var n2=E(OR=>{"use strict";Object.defineProperty(OR,"__esModule",{value:!0});var _me=cR(),vme=AF(),wme=uR(),bme=DF(),Eme=MF(),Sme=LF(),Tme=UF(),Rme=yR(),$me=VF(),Ome=KF(),Pme=JF(),xme=YF(),Nme=XF(),Cme=QF(),Ime=t2(),Ame=r2();function kme(t=!1){let e=[Pme.default,xme.default,Nme.default,Cme.default,Ime.default,Ame.default,Tme.default,Rme.default,Sme.default,$me.default,Ome.default];return t?e.push(vme.default,bme.default):e.push(_me.default,wme.default),e.push(Eme.default),e}OR.default=kme});var s2=E(PR=>{"use strict";Object.defineProperty(PR,"__esModule",{value:!0});var Et=ne(),Dme={message:({schemaCode:t})=>(0,Et.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,Et._)`{format: ${t}}`},Mme={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:Dme,code(t,e){let{gen:r,data:n,$data:s,schema:i,schemaCode:o,it:a}=t,{opts:l,errSchemaPath:c,schemaEnv:u,self:d}=a;if(!l.validateFormats)return;s?p():f();function p(){let h=r.scopeValue("formats",{ref:d.formats,code:l.code.formats}),m=r.const("fDef",(0,Et._)`${h}[${o}]`),y=r.let("fType"),g=r.let("format");r.if((0,Et._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>r.assign(y,(0,Et._)`${m}.type || "string"`).assign(g,(0,Et._)`${m}.validate`),()=>r.assign(y,(0,Et._)`"string"`).assign(g,m)),t.fail$data((0,Et.or)(w(),_()));function w(){return l.strictSchema===!1?Et.nil:(0,Et._)`${o} && !${g}`}function _(){let v=u.$async?(0,Et._)`(${m}.async ? await ${g}(${n}) : ${g}(${n}))`:(0,Et._)`${g}(${n})`,S=(0,Et._)`(typeof ${g} == "function" ? ${v} : ${g}.test(${n}))`;return(0,Et._)`${g} && ${g} !== true && ${y} === ${e} && !${S}`}}function f(){let h=d.formats[i];if(!h){w();return}if(h===!0)return;let[m,y,g]=_(h);m===e&&t.pass(v());function w(){if(l.strictSchema===!1){d.logger.warn(S());return}throw new Error(S());function S(){return`unknown format "${i}" ignored in schema at path "${c}"`}}function _(S){let $=S instanceof RegExp?(0,Et.regexpCode)(S):l.code.formats?(0,Et._)`${l.code.formats}${(0,Et.getProperty)(i)}`:void 0,T=r.scopeValue("formats",{key:i,ref:S,code:$});return typeof S=="object"&&!(S instanceof RegExp)?[S.type||"string",S.validate,(0,Et._)`${T}.validate`]:["string",S,T]}function v(){if(typeof h=="object"&&!(h instanceof RegExp)&&h.async){if(!u.$async)throw new Error("async format in sync schema");return(0,Et._)`await ${g}(${n})`}return typeof y=="function"?(0,Et._)`${g}(${n})`:(0,Et._)`${g}.test(${n})`}}}};PR.default=Mme});var i2=E(xR=>{"use strict";Object.defineProperty(xR,"__esModule",{value:!0});var jme=s2(),qme=[jme.default];xR.default=qme});var o2=E(ic=>{"use strict";Object.defineProperty(ic,"__esModule",{value:!0});ic.contentVocabulary=ic.metadataVocabulary=void 0;ic.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];ic.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var l2=E(NR=>{"use strict";Object.defineProperty(NR,"__esModule",{value:!0});var Lme=mF(),Fme=xF(),Ume=n2(),Bme=i2(),a2=o2(),zme=[Lme.default,Fme.default,(0,Ume.default)(),Bme.default,a2.metadataVocabulary,a2.contentVocabulary];NR.default=zme});var CR=E(Mg=>{"use strict";Object.defineProperty(Mg,"__esModule",{value:!0});Mg.DiscrError=void 0;var c2;(function(t){t.Tag="tag",t.Mapping="mapping"})(c2||(Mg.DiscrError=c2={}))});var f2=E(AR=>{"use strict";Object.defineProperty(AR,"__esModule",{value:!0});var oc=ne(),IR=CR(),u2=ha(),Vme=ci(),Hme=me(),Gme={message:({params:{discrError:t,tagName:e}})=>t===IR.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,oc._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},Wme={keyword:"discriminator",type:"object",schemaType:"object",error:Gme,code(t){let{gen:e,data:r,schema:n,parentSchema:s,it:i}=t,{oneOf:o}=s;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");let a=n.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");let l=e.let("valid",!1),c=e.const("tag",(0,oc._)`${r}${(0,oc.getProperty)(a)}`);e.if((0,oc._)`typeof ${c} == "string"`,()=>u(),()=>t.error(!1,{discrError:IR.DiscrError.Tag,tag:c,tagName:a})),t.ok(l);function u(){let f=p();e.if(!1);for(let h in f)e.elseIf((0,oc._)`${c} === ${h}`),e.assign(l,d(f[h]));e.else(),t.error(!1,{discrError:IR.DiscrError.Mapping,tag:c,tagName:a}),e.endIf()}function d(f){let h=e.name("valid"),m=t.subschema({keyword:"oneOf",schemaProp:f},h);return t.mergeEvaluated(m,oc.Name),h}function p(){var f;let h={},m=g(s),y=!0;for(let v=0;v<o.length;v++){let S=o[v];if(S?.$ref&&!(0,Hme.schemaHasRulesButRef)(S,i.self.RULES)){let T=S.$ref;if(S=u2.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,T),S instanceof u2.SchemaEnv&&(S=S.schema),S===void 0)throw new Vme.default(i.opts.uriResolver,i.baseId,T)}let $=(f=S?.properties)===null||f===void 0?void 0:f[a];if(typeof $!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);y=y&&(m||g(S)),w($,v)}if(!y)throw new Error(`discriminator: "${a}" must be required`);return h;function g({required:v}){return Array.isArray(v)&&v.includes(a)}function w(v,S){if(v.const)_(v.const,S);else if(v.enum)for(let $ of v.enum)_($,S);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function _(v,S){if(typeof v!="string"||v in h)throw new Error(`discriminator: "${a}" values must be unique strings`);h[v]=S}}}};AR.default=Wme});var d2=E((tDe,Kme)=>{Kme.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var p2=E((it,kR)=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0});it.MissingRefError=it.ValidationError=it.CodeGen=it.Name=it.nil=it.stringify=it.str=it._=it.KeywordCxt=it.Ajv=void 0;var Jme=zT(),Yme=l2(),Xme=f2(),h2=d2(),Qme=["/properties"],jg="http://json-schema.org/draft-07/schema",ac=class extends Jme.default{_addVocabularies(){super._addVocabularies(),Yme.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(Xme.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let e=this.opts.$data?this.$dataMetaSchema(h2,Qme):h2;this.addMetaSchema(e,jg,!1),this.refs["http://json-schema.org/schema"]=jg}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(jg)?jg:void 0)}};it.Ajv=ac;kR.exports=it=ac;kR.exports.Ajv=ac;Object.defineProperty(it,"__esModule",{value:!0});it.default=ac;var Zme=tc();Object.defineProperty(it,"KeywordCxt",{enumerable:!0,get:function(){return Zme.KeywordCxt}});var lc=ne();Object.defineProperty(it,"_",{enumerable:!0,get:function(){return lc._}});Object.defineProperty(it,"str",{enumerable:!0,get:function(){return lc.str}});Object.defineProperty(it,"stringify",{enumerable:!0,get:function(){return lc.stringify}});Object.defineProperty(it,"nil",{enumerable:!0,get:function(){return lc.nil}});Object.defineProperty(it,"Name",{enumerable:!0,get:function(){return lc.Name}});Object.defineProperty(it,"CodeGen",{enumerable:!0,get:function(){return lc.CodeGen}});var ege=Yf();Object.defineProperty(it,"ValidationError",{enumerable:!0,get:function(){return ege.default}});var tge=ci();Object.defineProperty(it,"MissingRefError",{enumerable:!0,get:function(){return tge.default}})});var ui=E(cd=>{"use strict";Object.defineProperty(cd,"__esModule",{value:!0});cd.checkMetadata=void 0;var rge=me(),nge={keyword:"metadata",schemaType:"object",code(t){m2(t);let{gen:e,schema:r,it:n}=t;if((0,rge.alwaysValidSchema)(n,r))return;let s=e.name("valid");t.subschema({keyword:"metadata",jtdMetadata:!0},s),t.ok(s)}};function m2({it:t,keyword:e},r){if(t.jtdMetadata!==r)throw new Error(`JTD: "${e}" cannot be used in this schema location`)}cd.checkMetadata=m2;cd.default=nge});var qg=E(fd=>{"use strict";Object.defineProperty(fd,"__esModule",{value:!0});fd.hasRef=void 0;var g2=ha(),ud=ne(),sge=ci(),y2=bn(),_2=HT(),ige=ui(),oge={keyword:"ref",schemaType:"string",code(t){(0,ige.checkMetadata)(t);let{gen:e,data:r,schema:n,parentSchema:s,it:i}=t,{schemaEnv:{root:o}}=i,a=e.name("valid");s.nullable?(e.var(a,(0,ud._)`${r} === null`),e.if((0,ud.not)(a),l)):(e.var(a,!1),l()),t.ok(a);function l(){var d;let p=(d=o.schema.definitions)===null||d===void 0?void 0:d[n];if(!p)throw new sge.default(i.opts.uriResolver,"",n,`No definition ${n}`);DR(p)||!i.opts.inlineRefs?c(p):u(p)}function c(d){let p=g2.compileSchema.call(i.self,new g2.SchemaEnv({schema:d,root:o,schemaPath:`/definitions/${n}`})),f=(0,_2.getValidate)(t,p),h=e.const("_errs",y2.default.errors);(0,_2.callRef)(t,f,p,p.$async),e.assign(a,(0,ud._)`${h} === ${y2.default.errors}`)}function u(d){let p=e.scopeValue("schema",i.opts.code.source===!0?{ref:d,code:(0,ud.stringify)(d)}:{ref:d});t.subschema({schema:d,dataTypes:[],schemaPath:ud.nil,topSchemaRef:p,errSchemaPath:`/definitions/${n}`},a)}}};function DR(t){for(let e in t){let r;if(e==="ref"||typeof(r=t[e])=="object"&&DR(r))return!0}return!1}fd.hasRef=DR;fd.default=oge});var jR=E(MR=>{"use strict";Object.defineProperty(MR,"__esModule",{value:!0});var age=/t|\s/i,lge=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,cge=/^(\d\d):(\d\d):(\d\d)(?:\.\d+)?(?:z|([+-]\d\d)(?::?(\d\d))?)$/i,uge=[0,31,28,31,30,31,30,31,31,30,31,30,31];function w2(t,e){let r=t.split(age);return r.length===2&&v2(r[0])&&fge(r[1])||e&&r.length===1&&v2(r[0])}MR.default=w2;function v2(t){let e=lge.exec(t);if(!e)return!1;let r=+e[1],n=+e[2],s=+e[3];return n>=1&&n<=12&&s>=1&&(s<=uge[n]||n===2&&s===29&&(r%100===0?r%400===0:r%4===0))}function fge(t){let e=cge.exec(t);if(!e)return!1;let r=+e[1],n=+e[2],s=+e[3],i=+(e[4]||0),o=+(e[5]||0);return r<=23&&n<=59&&s<=59||r-i===23&&n-o===59&&s===60}w2.code='require("ajv/dist/runtime/timestamp").default'});var cc=E(so=>{"use strict";Object.defineProperty(so,"__esModule",{value:!0});so.typeErrorParams=so.typeErrorMessage=so.typeError=void 0;var dge=ne();function hge(t){return{message:e=>b2(e,t),params:e=>E2(e,t)}}so.typeError=hge;function b2({parentSchema:t},e){return t?.nullable?`must be ${e} or null`:`must be ${e}`}so.typeErrorMessage=b2;function E2({parentSchema:t},e){return(0,dge._)`{type: ${e}, nullable: ${!!t?.nullable}}`}so.typeErrorParams=E2});var qR=E(uc=>{"use strict";Object.defineProperty(uc,"__esModule",{value:!0});uc.intRange=void 0;var tn=ne(),pge=jR(),mge=me(),gge=ui(),S2=cc();uc.intRange={int8:[-128,127,3],uint8:[0,255,3],int16:[-32768,32767,5],uint16:[0,65535,5],int32:[-2147483648,2147483647,10],uint32:[0,4294967295,10]};var yge={message:t=>(0,S2.typeErrorMessage)(t,t.schema),params:t=>(0,S2.typeErrorParams)(t,t.schema)};function _ge(t){let{gen:e,data:r,it:n}=t,{timestamp:s,allowDate:i}=n.opts;if(s==="date")return(0,tn._)`${r} instanceof Date `;let o=(0,mge.useFunc)(e,pge.default),a=i?(0,tn._)`, true`:tn.nil,l=(0,tn._)`typeof ${r} == "string" && ${o}(${r}${a})`;return s==="string"?l:(0,tn.or)((0,tn._)`${r} instanceof Date`,l)}var vge={keyword:"type",schemaType:"string",error:yge,code(t){(0,gge.checkMetadata)(t);let{data:e,schema:r,parentSchema:n,it:s}=t,i;switch(r){case"boolean":case"string":i=(0,tn._)`typeof ${e} == ${r}`;break;case"timestamp":{i=_ge(t);break}case"float32":case"float64":i=(0,tn._)`typeof ${e} == "number"`;break;default:{let o=r;if(i=(0,tn._)`typeof ${e} == "number" && isFinite(${e}) && !(${e} % 1)`,!s.opts.int32range&&(o==="int32"||o==="uint32"))o==="uint32"&&(i=(0,tn._)`${i} && ${e} >= 0`);else{let[a,l]=uc.intRange[o];i=(0,tn._)`${i} && ${e} >= ${a} && ${e} <= ${l}`}}}t.pass(n.nullable?(0,tn.or)((0,tn._)`${e} === null`,i):i)}};uc.default=vge});var dc=E(fc=>{"use strict";Object.defineProperty(fc,"__esModule",{value:!0});fc.checkNullableObject=fc.checkNullable=void 0;var Lg=ne();function T2({gen:t,data:e,parentSchema:r},n=Lg.nil){let s=t.name("valid");return r.nullable?(t.let(s,(0,Lg._)`${e} === null`),n=(0,Lg.not)(s)):t.let(s,!1),[s,n]}fc.checkNullable=T2;function wge(t,e){let[r,n]=T2(t,e);return[r,(0,Lg._)`${n} && typeof ${t.data} == "object" && !Array.isArray(${t.data})`]}fc.checkNullableObject=wge});var R2=E(LR=>{"use strict";Object.defineProperty(LR,"__esModule",{value:!0});var io=ne(),bge=ui(),Ege=dc(),Sge={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,io._)`{allowedValues: ${t}}`},Tge={keyword:"enum",schemaType:"array",error:Sge,code(t){(0,bge.checkMetadata)(t);let{gen:e,data:r,schema:n,schemaValue:s,parentSchema:i,it:o}=t;if(n.length===0)throw new Error("enum must have non-empty array");if(n.length!==new Set(n).size)throw new Error("enum items must be unique");let a,l=(0,io._)`typeof ${r} == "string"`;if(n.length>=o.opts.loopEnum){let u;[a,u]=(0,Ege.checkNullable)(t,l),e.if(u,c)}else{if(!Array.isArray(n))throw new Error("ajv implementation error");a=(0,io.and)(l,(0,io.or)(...n.map(u=>(0,io._)`${r} === ${u}`))),i.nullable&&(a=(0,io.or)((0,io._)`${r} === null`,a))}t.pass(a);function c(){e.forOf("v",s,u=>e.if((0,io._)`${a} = ${r} === ${u}`,()=>e.break()))}}};LR.default=Tge});var O2=E(FR=>{"use strict";Object.defineProperty(FR,"__esModule",{value:!0});var Rge=me(),$ge=Jt(),$2=ne(),Oge=ui(),Pge=dc(),xge=cc(),Nge={keyword:"elements",schemaType:"object",error:(0,xge.typeError)("array"),code(t){(0,Oge.checkMetadata)(t);let{gen:e,data:r,schema:n,it:s}=t;if((0,Rge.alwaysValidSchema)(s,n))return;let[i]=(0,Pge.checkNullable)(t);e.if((0,$2.not)(i),()=>e.if((0,$2._)`Array.isArray(${r})`,()=>e.assign(i,(0,$ge.validateArray)(t)),()=>t.error())),t.ok(i)}};FR.default=Nge});var BR=E(oo=>{"use strict";Object.defineProperty(oo,"__esModule",{value:!0});oo.validateProperties=oo.error=void 0;var UR=Jt(),P2=me(),fi=ne(),Cge=ui(),Ige=dc(),x2=cc(),hc;(function(t){t.Additional="additional",t.Missing="missing"})(hc||(hc={}));oo.error={message:t=>{let{params:e}=t;return e.propError?e.propError===hc.Additional?"must NOT have additional properties":`must have property '${e.missingProperty}'`:(0,x2.typeErrorMessage)(t,"object")},params:t=>{let{params:e}=t;return e.propError?e.propError===hc.Additional?(0,fi._)`{error: ${e.propError}, additionalProperty: ${e.additionalProperty}}`:(0,fi._)`{error: ${e.propError}, missingProperty: ${e.missingProperty}}`:(0,x2.typeErrorParams)(t,"object")}};var Age={keyword:"properties",schemaType:"object",error:oo.error,code:N2};function N2(t){(0,Cge.checkMetadata)(t);let{gen:e,data:r,parentSchema:n,it:s}=t,{additionalProperties:i,nullable:o}=n;if(s.jtdDiscriminator&&o)throw new Error("JTD: nullable inside discriminator mapping");if(f())throw new Error("JTD: properties and optionalProperties have common members");let[a,l]=h("properties"),[c,u]=h("optionalProperties");if(l.length===0&&u.length===0&&i)return;let[d,p]=s.jtdDiscriminator===void 0?(0,Ige.checkNullableObject)(t,r):[e.let("valid",!1),!0];e.if(p,()=>e.assign(d,!0).block(()=>{m(l,"properties",!0),m(u,"optionalProperties"),i||g()})),t.pass(d);function f(){let _=n.properties,v=n.optionalProperties;if(!(_&&v))return!1;for(let S in _)if(Object.prototype.hasOwnProperty.call(v,S))return!0;return!1}function h(_){let v=n[_],S=v?(0,UR.allSchemaProperties)(v):[];if(s.jtdDiscriminator&&S.some(T=>T===s.jtdDiscriminator))throw new Error(`JTD: discriminator tag used in ${_}`);let $=S.filter(T=>!(0,P2.alwaysValidSchema)(s,v[T]));return[S,$]}function m(_,v,S){let $=e.var("valid");for(let O of _)e.if((0,UR.propertyInData)(e,r,O,s.opts.ownProperties),()=>y(O,v,$),()=>T(O)),t.ok($);function T(O){S?(e.assign($,!1),t.error(!1,{propError:hc.Missing,missingProperty:O},{schemaPath:O})):e.assign($,!0)}}function y(_,v,S){t.subschema({keyword:v,schemaProp:_,dataProp:_},S)}function g(){e.forIn("key",r,_=>{let v=w(_,a,"properties",s.jtdDiscriminator),S=w(_,c,"optionalProperties"),$=v===!0?S:S===!0?v:(0,fi.and)(v,S);e.if($,()=>{s.opts.removeAdditional?e.code((0,fi._)`delete ${r}[${_}]`):(t.error(!1,{propError:hc.Additional,additionalProperty:_},{instancePath:_,parentSchema:!0}),s.opts.allErrors||e.break())})})}function w(_,v,S,$){let T;if(v.length>8){let O=(0,P2.schemaRefOrVal)(s,n[S],S);T=(0,fi.not)((0,UR.isOwnProperty)(e,O,_)),$!==void 0&&(T=(0,fi.and)(T,(0,fi._)`${_} !== ${$}`))}else if(v.length||$!==void 0){let O=$===void 0?v:[$].concat(v);T=(0,fi.and)(...O.map(R=>(0,fi._)`${_} !== ${R}`))}else T=!0;return T}}oo.validateProperties=N2;oo.default=Age});var I2=E(zR=>{"use strict";Object.defineProperty(zR,"__esModule",{value:!0});var C2=BR(),kge={keyword:"optionalProperties",schemaType:"object",error:C2.error,code(t){t.parentSchema.properties||(0,C2.validateProperties)(t)}};zR.default=kge});var k2=E(VR=>{"use strict";Object.defineProperty(VR,"__esModule",{value:!0});var ya=ne(),Dge=ui(),Mge=dc(),A2=cc(),Fg=CR(),jge={message:t=>{let{schema:e,params:r}=t;return r.discrError?r.discrError===Fg.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in mapping`:(0,A2.typeErrorMessage)(t,"object")},params:t=>{let{schema:e,params:r}=t;return r.discrError?(0,ya._)`{error: ${r.discrError}, tag: ${e}, tagValue: ${r.tag}}`:(0,A2.typeErrorParams)(t,"object")}},qge={keyword:"discriminator",schemaType:"string",implements:["mapping"],error:jge,code(t){(0,Dge.checkMetadata)(t);let{gen:e,data:r,schema:n,parentSchema:s}=t,[i,o]=(0,Mge.checkNullableObject)(t,r);e.if(o),a(),e.elseIf((0,ya.not)(i)),t.error(),e.endIf(),t.ok(i);function a(){let u=e.const("tag",(0,ya._)`${r}${(0,ya.getProperty)(n)}`);e.if((0,ya._)`${u} === undefined`),t.error(!1,{discrError:Fg.DiscrError.Tag,tag:u}),e.elseIf((0,ya._)`typeof ${u} == "string"`),l(u),e.else(),t.error(!1,{discrError:Fg.DiscrError.Tag,tag:u},{instancePath:n}),e.endIf()}function l(u){e.if(!1);for(let d in s.mapping)e.elseIf((0,ya._)`${u} === ${d}`),e.assign(i,c(d));e.else(),t.error(!1,{discrError:Fg.DiscrError.Mapping,tag:u},{instancePath:n,schemaPath:"mapping",parentSchema:!0}),e.endIf()}function c(u){let d=e.name("valid");return t.subschema({keyword:"mapping",schemaProp:u,jtdDiscriminator:n},d),d}}};VR.default=qge});var M2=E(HR=>{"use strict";Object.defineProperty(HR,"__esModule",{value:!0});var D2=me(),Ug=ne(),Lge=ui(),Fge=dc(),Uge=cc(),Bge={keyword:"values",schemaType:"object",error:(0,Uge.typeError)("object"),code(t){(0,Lge.checkMetadata)(t);let{gen:e,data:r,schema:n,it:s}=t,[i,o]=(0,Fge.checkNullableObject)(t,r);(0,D2.alwaysValidSchema)(s,n)?e.if((0,Ug.not)((0,Ug.or)(o,i)),()=>t.error()):(e.if(o),e.assign(i,a()),e.elseIf((0,Ug.not)(i)),t.error(),e.endIf()),t.ok(i);function a(){let l=e.name("valid");if(s.allErrors){let u=e.let("valid",!0);return c(()=>e.assign(u,!1)),u}return e.var(l,!0),c(()=>e.break()),l;function c(u){e.forIn("key",r,d=>{t.subschema({keyword:"values",dataProp:d,dataPropType:D2.Type.Str},l),e.if((0,Ug.not)(l),u)})}}}};HR.default=Bge});var j2=E(GR=>{"use strict";Object.defineProperty(GR,"__esModule",{value:!0});var zge=Jt(),Vge={keyword:"union",schemaType:"array",trackErrors:!0,code:zge.validateUnion,error:{message:"must match a schema in union"}};GR.default=Vge});var q2=E(WR=>{"use strict";Object.defineProperty(WR,"__esModule",{value:!0});var Hge=qg(),Gge=qR(),Wge=R2(),Kge=O2(),Jge=BR(),Yge=I2(),Xge=k2(),Qge=M2(),Zge=j2(),eye=ui(),tye=["definitions",Hge.default,Gge.default,Wge.default,Kge.default,Jge.default,Yge.default,Xge.default,Qge.default,Zge.default,eye.default,{keyword:"additionalProperties",schemaType:"boolean"},{keyword:"nullable",schemaType:"boolean"}];WR.default=tye});var B2=E(KR=>{"use strict";Object.defineProperty(KR,"__esModule",{value:!0});var di=t=>{let e={nullable:{type:"boolean"},metadata:{optionalProperties:{union:{elements:{ref:"schema"}}},additionalProperties:!0}};return t&&(e.definitions={values:{ref:"schema"}}),e},rye=t=>({optionalProperties:di(t)}),nye=t=>({properties:{ref:{type:"string"}},optionalProperties:di(t)}),sye=t=>({properties:{type:{enum:["boolean","timestamp","string","float32","float64","int8","uint8","int16","uint16","int32","uint32"]}},optionalProperties:di(t)}),iye=t=>({properties:{enum:{elements:{type:"string"}}},optionalProperties:di(t)}),oye=t=>({properties:{elements:{ref:"schema"}},optionalProperties:di(t)}),F2=t=>({properties:{properties:{values:{ref:"schema"}}},optionalProperties:{optionalProperties:{values:{ref:"schema"}},additionalProperties:{type:"boolean"},...di(t)}}),U2=t=>({properties:{optionalProperties:{values:{ref:"schema"}}},optionalProperties:{additionalProperties:{type:"boolean"},...di(t)}}),aye=t=>({properties:{discriminator:{type:"string"},mapping:{values:{metadata:{union:[F2(!1),U2(!1)]}}}},optionalProperties:di(t)}),lye=t=>({properties:{values:{ref:"schema"}},optionalProperties:di(t)}),L2=t=>({metadata:{union:[rye,nye,sye,iye,oye,F2,U2,aye,lye].map(e=>e(t))}}),cye={definitions:{schema:L2(!1)},...L2(!0)};KR.default=cye});var JR=E(Bg=>{"use strict";Object.defineProperty(Bg,"__esModule",{value:!0});Bg.jtdForms=void 0;Bg.jtdForms=["elements","values","discriminator","properties","optionalProperties","enum","type","ref"]});var V2=E(XR=>{"use strict";Object.defineProperty(XR,"__esModule",{value:!0});var YR=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,uye={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function z2(t){return YR.lastIndex=0,'"'+(YR.test(t)?t.replace(YR,e=>{let r=uye[e];return typeof r=="string"?r:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}):t)+'"'}XR.default=z2;z2.code='require("ajv/dist/runtime/quote").default'});var Y2=E(ZR=>{"use strict";Object.defineProperty(ZR,"__esModule",{value:!0});var fye=JR(),G2=ha(),Oe=ne(),dye=ci(),Ze=bn(),hye=Jt(),pye=qg(),mye=me(),gye=V2(),yye={elements:vye,values:wye,discriminator:bye,properties:H2,optionalProperties:H2,enum:dd,type:Eye,ref:Tye};function W2(t,e){let r=G2.getCompilingSchema.call(this,t);if(r)return r;let{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new Oe.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i}),a=o.scopeName("serialize"),l={self:this,gen:o,schema:t.schema,schemaEnv:t,definitions:e,data:Ze.default.data},c;try{this._compilations.add(t),t.serializeName=a,o.func(a,Ze.default.data,!1,()=>{o.let(Ze.default.json,(0,Oe.str)``),hd(l),o.return(Ze.default.json)}),o.optimize(this.opts.code.optimize);let u=o.toString();c=`${o.scopeRefs(Ze.default.scope)}return ${u}`;let p=new Function(`${Ze.default.scope}`,c)(this.scope.get());this.scope.value(a,{ref:p}),t.serialize=p}catch(u){throw c&&this.logger.error("Error compiling serializer, function code:",c),delete t.serialize,delete t.serializeName,u}finally{this._compilations.delete(t)}return t}ZR.default=W2;function hd(t){let e;for(let r of fye.jtdForms)if(r in t.schema){e=r;break}_ye(t,e?yye[e]:$ye)}function _ye(t,e){let{gen:r,schema:n,data:s}=t;if(!n.nullable)return e(t);r.if((0,Oe._)`${s} === undefined || ${s} === null`,()=>r.add(Ze.default.json,(0,Oe._)`"null"`),()=>e(t))}function vye(t){let{gen:e,schema:r,data:n}=t;e.add(Ze.default.json,(0,Oe.str)`[`);let s=e.let("first",!0);e.forOf("el",n,i=>{QR(t,s),hd({...t,schema:r.elements,data:i})}),e.add(Ze.default.json,(0,Oe.str)`]`)}function wye(t){let{gen:e,schema:r,data:n}=t;e.add(Ze.default.json,(0,Oe.str)`{`);let s=e.let("first",!0);e.forIn("key",n,i=>K2(t,i,r.values,s)),e.add(Ze.default.json,(0,Oe.str)`}`)}function K2(t,e,r,n){let{gen:s,data:i}=t;QR(t,n),dd({...t,data:e}),s.add(Ze.default.json,(0,Oe.str)`:`);let o=s.const("value",(0,Oe._)`${i}${(0,Oe.getProperty)(e)}`);hd({...t,schema:r,data:o})}function bye(t){let{gen:e,schema:r,data:n}=t,{discriminator:s}=r;e.add(Ze.default.json,(0,Oe.str)`{${JSON.stringify(s)}:`);let i=e.const("tag",(0,Oe._)`${n}${(0,Oe.getProperty)(s)}`);dd({...t,data:i}),e.if(!1);for(let o in r.mapping){e.elseIf((0,Oe._)`${i} === ${o}`);let a=r.mapping[o];J2({...t,schema:a},s)}e.endIf(),e.add(Ze.default.json,(0,Oe.str)`}`)}function H2(t){let{gen:e}=t;e.add(Ze.default.json,(0,Oe.str)`{`),J2(t),e.add(Ze.default.json,(0,Oe.str)`}`)}function J2(t,e){let{gen:r,schema:n,data:s}=t,{properties:i,optionalProperties:o}=n,a=p(i),l=p(o),c=f(a.concat(l)),u=!e,d;for(let g of a)u?u=!1:r.add(Ze.default.json,(0,Oe.str)`,`),m(g,i[g],h(g));u&&(d=r.let("first",!0));for(let g of l){let w=h(g);r.if((0,Oe.and)((0,Oe._)`${w} !== undefined`,(0,hye.isOwnProperty)(r,s,g)),()=>{QR(t,d),m(g,o[g],w)})}n.additionalProperties&&r.forIn("key",s,g=>r.if(y(g,c),()=>K2(t,g,{},d)));function p(g){return g?Object.keys(g):[]}function f(g){if(e&&g.push(e),new Set(g).size!==g.length)throw new Error("JTD: properties/optionalProperties/disciminator overlap");return g}function h(g){return r.const("value",(0,Oe._)`${s}${(0,Oe.getProperty)(g)}`)}function m(g,w,_){r.add(Ze.default.json,(0,Oe.str)`${JSON.stringify(g)}:`),hd({...t,schema:w,data:_})}function y(g,w){return w.length?(0,Oe.and)(...w.map(_=>(0,Oe._)`${g} !== ${_}`)):!0}}function Eye(t){let{gen:e,schema:r,data:n}=t;switch(r.type){case"boolean":e.add(Ze.default.json,(0,Oe._)`${n} ? "true" : "false"`);break;case"string":dd(t);break;case"timestamp":e.if((0,Oe._)`${n} instanceof Date`,()=>e.add(Ze.default.json,(0,Oe._)`'"' + ${n}.toISOString() + '"'`),()=>dd(t));break;default:Sye(t)}}function dd({gen:t,data:e}){t.add(Ze.default.json,(0,Oe._)`${(0,mye.useFunc)(t,gye.default)}(${e})`)}function Sye({gen:t,data:e}){t.add(Ze.default.json,(0,Oe._)`"" + ${e}`)}function Tye(t){let{gen:e,self:r,data:n,definitions:s,schema:i,schemaEnv:o}=t,{ref:a}=i,l=s[a];if(!l)throw new dye.default(r.opts.uriResolver,"",a,`No definition ${a}`);if(!(0,pye.hasRef)(l))return hd({...t,schema:l});let{root:c}=o,u=W2.call(r,new G2.SchemaEnv({schema:l,root:c}),s);e.add(Ze.default.json,(0,Oe._)`${Rye(e,u)}(${n})`)}function Rye(t,e){return e.serialize?t.scopeValue("serialize",{ref:e.serialize}):(0,Oe._)`${t.scopeValue("wrapper",{ref:e})}.serialize`}function $ye({gen:t,data:e}){t.add(Ze.default.json,(0,Oe._)`JSON.stringify(${e})`)}function QR({gen:t},e){e?t.if(e,()=>t.assign(e,!1),()=>t.add(Ze.default.json,(0,Oe.str)`,`)):t.add(Ze.default.json,(0,Oe.str)`,`)}});var Q2=E(lo=>{"use strict";Object.defineProperty(lo,"__esModule",{value:!0});lo.parseJsonString=lo.parseJsonNumber=lo.parseJson=void 0;var Oye=/position\s(\d+)(?: \(line \d+ column \d+\))?$/;function hi(t,e){let r;hi.message=void 0;let n;e&&(t=t.slice(e));try{return hi.position=e+t.length,JSON.parse(t)}catch(s){if(n=Oye.exec(s.message),!n){hi.message="unexpected end";return}r=+n[1];let i=t[r];t=t.slice(0,r),hi.position=e+r;try{return JSON.parse(t)}catch{hi.message=`unexpected token ${i}`;return}}}lo.parseJson=hi;hi.message=void 0;hi.position=0;hi.code='require("ajv/dist/runtime/parseJson").parseJson';function pi(t,e,r){let n="",s;if(pi.message=void 0,t[e]==="-"&&(n+="-",e++),t[e]==="0")n+="0",e++;else if(!i(r)){o();return}if(r)return pi.position=e,+n;if(t[e]==="."&&(n+=".",e++,!i())){o();return}if(s=t[e],(s==="e"||s==="E")&&(n+="e",e++,s=t[e],(s==="+"||s==="-")&&(n+=s,e++),!i())){o();return}return pi.position=e,+n;function i(a){let l=!1;for(;s=t[e],s>="0"&&s<="9"&&(a===void 0||a-- >0);)l=!0,n+=s,e++;return l}function o(){pi.position=e,pi.message=e<t.length?`unexpected token ${t[e]}`:"unexpected end"}}lo.parseJsonNumber=pi;pi.message=void 0;pi.position=0;pi.code='require("ajv/dist/runtime/parseJson").parseJsonNumber';var X2={b:"\b",f:"\f",n:`
`,r:"\r",t:"	",'"':'"',"/":"/","\\":"\\"},Pye="a".charCodeAt(0),xye="0".charCodeAt(0);function ao(t,e){let r="",n;for(ao.message=void 0;n=t[e++],n!=='"';)if(n==="\\")if(n=t[e],n in X2)r+=X2[n],e++;else if(n==="u"){e++;let i=4,o=0;for(;i--;){if(o<<=4,n=t[e],n===void 0){s("unexpected end");return}if(n=n.toLowerCase(),n>="a"&&n<="f")o+=n.charCodeAt(0)-Pye+10;else if(n>="0"&&n<="9")o+=n.charCodeAt(0)-xye;else{s(`unexpected token ${n}`);return}e++}r+=String.fromCharCode(o)}else{s(`unexpected token ${n}`);return}else if(n===void 0){s("unexpected end");return}else if(n.charCodeAt(0)>=32)r+=n;else{s(`unexpected token ${n}`);return}return ao.position=e,r;function s(i){ao.position=e,ao.message=i}}lo.parseJsonString=ao;ao.message=void 0;ao.position=0;ao.code='require("ajv/dist/runtime/parseJson").parseJsonString'});var cU=E(a$=>{"use strict";Object.defineProperty(a$,"__esModule",{value:!0});var Nye=JR(),rU=ha(),ee=ne(),Cye=ci(),$e=bn(),Iye=Jt(),Aye=qg(),kye=qR(),r$=Q2(),nU=me(),Dye=jR(),Mye={elements:Fye,values:Uye,discriminator:zye,properties:Z2,optionalProperties:Z2,enum:Hye,type:Vye,ref:Gye};function sU(t,e){let r=rU.getCompilingSchema.call(this,t);if(r)return r;let{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new ee.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i}),a=o.scopeName("parse"),l={self:this,gen:o,schema:t.schema,schemaEnv:t,definitions:e,data:$e.default.data,parseName:a,char:o.name("c")},c;try{this._compilations.add(t),t.parseName=a,jye(l),o.optimize(this.opts.code.optimize);let u=o.toString();c=`${o.scopeRefs($e.default.scope)}return ${u}`;let p=new Function(`${$e.default.scope}`,c)(this.scope.get());this.scope.value(a,{ref:p}),t.parse=p}catch(u){throw c&&this.logger.error("Error compiling parser, function code:",c),delete t.parse,delete t.parseName,u}finally{this._compilations.delete(t)}return t}a$.default=sU;var t$=(0,ee._)`undefined`;function jye(t){let{gen:e,parseName:r,char:n}=t;e.func(r,(0,ee._)`${$e.default.json}, ${$e.default.jsonPos}, ${$e.default.jsonPart}`,!1,()=>{e.let($e.default.data),e.let(n),e.assign((0,ee._)`${r}.message`,t$),e.assign((0,ee._)`${r}.position`,t$),e.assign($e.default.jsonPos,(0,ee._)`${$e.default.jsonPos} || 0`),e.const($e.default.jsonLen,(0,ee._)`${$e.default.json}.length`),zg(t),o$(t),e.if($e.default.jsonPart,()=>{e.assign((0,ee._)`${r}.position`,$e.default.jsonPos),e.return($e.default.data)}),e.if((0,ee._)`${$e.default.jsonPos} === ${$e.default.jsonLen}`,()=>e.return($e.default.data)),pc(t)})}function zg(t){let e;for(let r of Nye.jtdForms)if(r in t.schema){e=r;break}e?Lye(t,Mye[e]):s$(t)}var qye=tU(!0,tU(!1,pc));function Lye(t,e){let{gen:r,schema:n,data:s}=t;if(!n.nullable)return e(t);pd(t,"null",e,()=>r.assign(s,null))}function Fye(t){let{gen:e,schema:r,data:n}=t;Ns(t,"[");let s=e.let("i",0);e.assign(n,(0,ee._)`[]`),n$(t,"]",()=>{let i=e.let("el");zg({...t,schema:r.elements,data:i}),e.assign((0,ee._)`${n}[${s}++]`,i)})}function Uye(t){let{gen:e,schema:r,data:n}=t;Ns(t,"{"),e.assign(n,(0,ee._)`{}`),n$(t,"}",()=>Bye(t,r.values))}function n$(t,e,r){iU(t,e,r),Ns(t,e)}function iU(t,e,r){let{gen:n}=t;n.for((0,ee._)`;${$e.default.jsonPos}<${$e.default.jsonLen} && ${Vg(1)}!==${e};`,()=>{r(),pd(t,",",()=>n.break(),s)});function s(){pd(t,e,()=>{},pc)}}function Bye(t,e){let{gen:r}=t,n=r.let("key");_a({...t,data:n}),Ns(t,":"),aU(t,n,e)}function zye(t){let{gen:e,data:r,schema:n}=t,{discriminator:s,mapping:i}=n;Ns(t,"{"),e.assign(r,(0,ee._)`{}`);let o=e.const("pos",$e.default.jsonPos),a=e.let("value"),l=e.let("tag");iU(t,"}",()=>{let c=e.let("key");_a({...t,data:c}),Ns(t,":"),e.if((0,ee._)`${c} === ${s}`,()=>{_a({...t,data:l}),e.assign((0,ee._)`${r}[${c}]`,l),e.break()},()=>s$({...t,data:a}))}),e.assign($e.default.jsonPos,o),e.if((0,ee._)`${l} === undefined`),mi(t,(0,ee.str)`discriminator tag not found`);for(let c in i)e.elseIf((0,ee._)`${l} === ${c}`),oU({...t,schema:i[c]},s);e.else(),mi(t,(0,ee.str)`discriminator value not in schema`),e.endIf()}function Z2(t){let{gen:e,data:r}=t;Ns(t,"{"),e.assign(r,(0,ee._)`{}`),oU(t)}function oU(t,e){let{gen:r,schema:n,data:s}=t,{properties:i,optionalProperties:o,additionalProperties:a}=n;if(n$(t,"}",()=>{let l=r.let("key");if(_a({...t,data:l}),Ns(t,":"),r.if(!1),eU(t,l,i),eU(t,l,o),e){r.elseIf((0,ee._)`${l} === ${e}`);let c=r.let("tag");_a({...t,data:c})}r.else(),a?s$({...t,data:(0,ee._)`${s}[${l}]`}):mi(t,(0,ee.str)`property ${l} not allowed`),r.endIf()}),i){let l=(0,Iye.hasPropFunc)(r),c=(0,ee.and)(...Object.keys(i).map(u=>(0,ee._)`${l}.call(${s}, ${u})`));r.if((0,ee.not)(c),()=>mi(t,(0,ee.str)`missing required properties`))}}function eU(t,e,r={}){let{gen:n}=t;for(let s in r)n.elseIf((0,ee._)`${e} === ${s}`),aU(t,e,r[s])}function aU(t,e,r){zg({...t,schema:r,data:(0,ee._)`${t.data}[${e}]`})}function Vye(t){let{gen:e,schema:r,data:n,self:s}=t;switch(r.type){case"boolean":qye(t);break;case"string":_a(t);break;case"timestamp":{_a(t);let i=(0,nU.useFunc)(e,Dye.default),{allowDate:o,parseDate:a}=s.opts,l=o?(0,ee._)`!${i}(${n}, true)`:(0,ee._)`!${i}(${n})`,c=a?(0,ee.or)(l,(0,ee._)`(${n} = new Date(${n}), false)`,(0,ee._)`isNaN(${n}.valueOf())`):l;e.if(c,()=>mi(t,(0,ee.str)`invalid timestamp`));break}case"float32":case"float64":e$(t);break;default:{let i=r.type;if(!s.opts.int32range&&(i==="int32"||i==="uint32"))e$(t,16),i==="uint32"&&e.if((0,ee._)`${n} < 0`,()=>mi(t,(0,ee.str)`integer out of range`));else{let[o,a,l]=kye.intRange[i];e$(t,l),e.if((0,ee._)`${n} < ${o} || ${n} > ${a}`,()=>mi(t,(0,ee.str)`integer out of range`))}}}}function _a(t){Ns(t,'"'),i$(t,r$.parseJsonString)}function Hye(t){let{gen:e,data:r,schema:n}=t,s=n.enum;Ns(t,'"'),e.if(!1);for(let i of s){let o=JSON.stringify(i).slice(1);e.elseIf((0,ee._)`${Vg(o.length)} === ${o}`),e.assign(r,(0,ee.str)`${i}`),e.add($e.default.jsonPos,o.length)}e.else(),pc(t),e.endIf()}function e$(t,e){let{gen:r}=t;o$(t),r.if((0,ee._)`"-0123456789".indexOf(${Vg(1)}) < 0`,()=>pc(t),()=>i$(t,r$.parseJsonNumber,e))}function tU(t,e){return r=>{let{gen:n,data:s}=r;pd(r,`${t}`,()=>e(r),()=>n.assign(s,t))}}function Gye(t){let{gen:e,self:r,definitions:n,schema:s,schemaEnv:i}=t,{ref:o}=s,a=n[o];if(!a)throw new Cye.default(r.opts.uriResolver,"",o,`No definition ${o}`);if(!(0,Aye.hasRef)(a))return zg({...t,schema:a});let{root:l}=i,c=sU.call(r,new rU.SchemaEnv({schema:a,root:l}),n);lU(t,Wye(e,c),!0)}function Wye(t,e){return e.parse?t.scopeValue("parse",{ref:e.parse}):(0,ee._)`${t.scopeValue("wrapper",{ref:e})}.parse`}function s$(t){i$(t,r$.parseJson)}function i$(t,e,r){lU(t,(0,nU.useFunc)(t.gen,e),r)}function lU(t,e,r){let{gen:n,data:s}=t;n.assign(s,(0,ee._)`${e}(${$e.default.json}, ${$e.default.jsonPos}${r?(0,ee._)`, ${r}`:ee.nil})`),n.assign($e.default.jsonPos,(0,ee._)`${e}.position`),n.if((0,ee._)`${s} === undefined`,()=>mi(t,(0,ee._)`${e}.message`))}function Ns(t,e){pd(t,e,pc)}function pd(t,e,r,n){let{gen:s}=t,i=e.length;o$(t),s.if((0,ee._)`${Vg(i)} === ${e}`,()=>{s.add($e.default.jsonPos,i),n?.(t)},()=>r(t))}function o$({gen:t,char:e}){t.code((0,ee._)`while((${e}=${$e.default.json}[${$e.default.jsonPos}],${e}===" "||${e}==="\\n"||${e}==="\\r"||${e}==="\\t"))${$e.default.jsonPos}++;`)}function Vg(t){return t===1?(0,ee._)`${$e.default.json}[${$e.default.jsonPos}]`:(0,ee._)`${$e.default.json}.slice(${$e.default.jsonPos}, ${$e.default.jsonPos}+${t})`}function pc(t){mi(t,(0,ee._)`"unexpected token " + ${$e.default.json}[${$e.default.jsonPos}]`)}function mi({gen:t,parseName:e},r){t.assign((0,ee._)`${e}.message`,r),t.assign((0,ee._)`${e}.position`,$e.default.jsonPos),t.return(t$)}});var u$=E((ot,c$)=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});ot.MissingRefError=ot.ValidationError=ot.CodeGen=ot.Name=ot.nil=ot.stringify=ot.str=ot._=ot.KeywordCxt=ot.Ajv=void 0;var Kye=zT(),Jye=q2(),Yye=B2(),Xye=Y2(),Qye=cU(),l$="JTD-meta-schema",mc=class extends Kye.default{constructor(e={}){super({...e,jtd:!0})}_addVocabularies(){super._addVocabularies(),this.addVocabulary(Jye.default)}_addDefaultMetaSchema(){super._addDefaultMetaSchema(),this.opts.meta&&this.addMetaSchema(Yye.default,l$,!1)}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(l$)?l$:void 0)}compileSerializer(e){let r=this._addSchema(e);return r.serialize||this._compileSerializer(r)}compileParser(e){let r=this._addSchema(e);return r.parse||this._compileParser(r)}_compileSerializer(e){if(Xye.default.call(this,e,e.schema.definitions||{}),!e.serialize)throw new Error("ajv implementation error");return e.serialize}_compileParser(e){if(Qye.default.call(this,e,e.schema.definitions||{}),!e.parse)throw new Error("ajv implementation error");return e.parse}};ot.Ajv=mc;c$.exports=ot=mc;c$.exports.Ajv=mc;Object.defineProperty(ot,"__esModule",{value:!0});ot.default=mc;var Zye=tc();Object.defineProperty(ot,"KeywordCxt",{enumerable:!0,get:function(){return Zye.KeywordCxt}});var gc=ne();Object.defineProperty(ot,"_",{enumerable:!0,get:function(){return gc._}});Object.defineProperty(ot,"str",{enumerable:!0,get:function(){return gc.str}});Object.defineProperty(ot,"stringify",{enumerable:!0,get:function(){return gc.stringify}});Object.defineProperty(ot,"nil",{enumerable:!0,get:function(){return gc.nil}});Object.defineProperty(ot,"Name",{enumerable:!0,get:function(){return gc.Name}});Object.defineProperty(ot,"CodeGen",{enumerable:!0,get:function(){return gc.CodeGen}});var e0e=Yf();Object.defineProperty(ot,"ValidationError",{enumerable:!0,get:function(){return e0e.default}});var t0e=ci();Object.defineProperty(ot,"MissingRefError",{enumerable:!0,get:function(){return t0e.default}})});var f$=E((EDe,uU)=>{"use strict";var r0e=Sl();uU.exports=Object.freeze({coerceTypes:"array",useDefaults:!0,removeAdditional:!0,uriResolver:r0e,addUsedSchema:!1,allErrors:!1})});var hU=E((SDe,dU)=>{"use strict";var n0e=p2().default,s0e=u$(),fU=f$(),d$=class{constructor(e,r){r.mode==="JTD"?this.ajv=new s0e(Object.assign({},fU,r.customOptions)):this.ajv=new n0e(Object.assign({},fU,r.customOptions));let n=!0;if(r.plugins&&r.plugins.length>0)for(let i of r.plugins)Array.isArray(i)?(n=n&&i[0].name!=="formatsPlugin",i[0](this.ajv,i[1])):(n=n&&i.name!=="formatsPlugin",i(this.ajv));n&&BS()(this.ajv),r.onCreate?.(this.ajv);let s=Object.values(e);for(let i of s)this.ajv.addSchema(i)}buildValidatorFunction({schema:e}){if(e.$id){let r=this.ajv.getSchema(e.$id);if(r)return r}return this.ajv.compile(e)}};dU.exports=d$});var mU=E((TDe,pU)=>{"use strict";var i0e=u$(),o0e=f$(),h$=class{constructor(e,r){this.ajv=new i0e(Object.assign({},o0e,r))}buildSerializerFunction({schema:e}){return this.ajv.compileSerializer(e)}};pU.exports=h$});var _U=E((gd,yU)=>{"use strict";Object.defineProperty(gd,"__esModule",{value:!0});var md=fg(),ss=Wl();function gU(t,e){if(!t.opts.code.source)throw new Error("moduleCode: ajv instance must have code.source option");let{_n:r}=t.scope.opts;return typeof e=="function"?s(e.source):e!==void 0?i(e,n):i(t.schemas,a=>a.meta?void 0:t.compile(a.schema));function n(a){let l=t.getSchema(a);if(!l)throw new Error(`moduleCode: no schema with id ${a}`);return l}function s(a){let l={},c=a?.validateName,u=o(l,a);return t.opts.code.esm?`"use strict";${r}export const validate = ${c};${r}export default ${c};${r}${u}`:`"use strict";${r}module.exports = ${c};${r}module.exports.default = ${c};${r}${u}`}function i(a,l){var c;let u={},d=(0,ss._)`"use strict";`;for(let p in a){let f=l(a[p]);if(f){let h=o(u,f.source),m=t.opts.code.esm?(0,ss._)`export const ${(0,ss.getEsmExportName)(p)}`:(0,ss._)`exports${(0,ss.getProperty)(p)}`;d=(0,ss._)`${d}${r}${m} = ${(c=f.source)===null||c===void 0?void 0:c.validateName};${r}${h}`}}return`${d}`}function o(a,l){if(!l)throw new Error('moduleCode: function does not have "source" property');if(p(l.validateName)===md.UsedValueState.Completed)return ss.nil;f(l.validateName,md.UsedValueState.Started);let c=t.scope.scopeCode(l.scopeValues,a,d),u=new ss._Code(`${c}${r}${l.validateCode}`);return l.evaluated?(0,ss._)`${u}${l.validateName}.evaluated = ${l.evaluated};${r}`:u;function d(h){var m;let y=(m=h.value)===null||m===void 0?void 0:m.ref;if(h.prefix==="validate"&&typeof y=="function")return o(a,y.source);if((h.prefix==="root"||h.prefix==="wrapper")&&typeof y=="object"){let{validate:g,validateName:w}=y;if(!w)throw new Error("ajv internal error");let _=t.opts.code.es5?md.varKinds.var:md.varKinds.const,v=(0,ss._)`${_} ${h} = {validate: ${w}};`;if(p(w)===md.UsedValueState.Started)return v;let S=o(a,g?.source);return(0,ss._)`${v}${r}${S}`}}function p(h){var m;return(m=a[h.prefix])===null||m===void 0?void 0:m.get(h)}function f(h,m){let{prefix:y}=h;(a[y]=a[y]||new Map).set(h,m)}}}yU.exports=gd=gU;Object.defineProperty(gd,"__esModule",{value:!0});gd.default=gU});var bU=E((RDe,wU)=>{"use strict";var vU=p$(),a0e=_U().default;function l0e(t={readMode:!0}){if(t.readMode===!0&&!t.restoreFunction)throw new Error("You must provide a restoreFunction options when readMode ON");if(t.readMode!==!0&&!t.storeFunction)throw new Error("You must provide a storeFunction options when readMode OFF");if(t.readMode===!0)return function(){return function(n){return t.restoreFunction(n)}};let e=vU();return function(n,s={}){(!s.customOptions||!s.customOptions.code)&&(s.customOptions=Object.assign({},s.customOptions,{code:{source:!0}}));let i=e(n,s);return function(o){let a=i(o),l=a0e(i[vU.AjvReference].ajv,a);return t.storeFunction(o,l),a}}}wU.exports=l0e});var p$=E(($De,yc)=>{"use strict";var SU=Symbol.for("fastify.ajv-compiler.reference"),c0e=hU(),u0e=mU();function m$(t){let e=new Map,r=new Map;return t&&t.jtdSerializer===!0?function(s,i){let o=EU({},i);if(r.has(o))return r.get(o);let a=new u0e(s,i),l=a.buildSerializerFunction.bind(a);return r.set(o,l),l}:function(s,i){let o=EU(s,i.customOptions);if(e.has(o))return e.get(o);let a=new c0e(s,i),l=a.buildValidatorFunction.bind(a);return e.set(o,l),i.customOptions.code!==void 0&&(l[SU]=a),l}}function EU(t,e){let r=JSON.stringify(t),n=JSON.stringify(e);return`${r}${n}`}yc.exports=m$;yc.exports.default=m$;yc.exports.AjvCompiler=m$;yc.exports.AjvReference=SU;yc.exports.StandaloneValidator=bU()});var g$=E((ODe,TU)=>{"use strict";var{buildSchemas:f0e}=_u(),d0e=nL(),h0e=p$();function p0e(t,e){if(t)return new _c(t,e);let r=Object.assign({buildValidator:null,buildSerializer:null},e?.compilersFactory);r.buildValidator||(r.buildValidator=h0e()),r.buildSerializer||(r.buildSerializer=d0e());let n={bucket:e&&e.bucket||f0e,compilersFactory:r,isCustomValidatorCompiler:typeof e?.compilersFactory?.buildValidator=="function",isCustomSerializerCompiler:typeof e?.compilersFactory?.buildValidator=="function"};return new _c(void 0,n)}var _c=class{constructor(e,r){this.opts=r||e?.opts,this.addedSchemas=!1,this.compilersFactory=this.opts.compilersFactory,e?(this.schemaBucket=this.opts.bucket(e.getSchemas()),this.validatorCompiler=e.getValidatorCompiler(),this.serializerCompiler=e.getSerializerCompiler(),this.isCustomValidatorCompiler=e.isCustomValidatorCompiler,this.isCustomSerializerCompiler=e.isCustomSerializerCompiler,this.parent=e):(this.schemaBucket=this.opts.bucket(),this.isCustomValidatorCompiler=this.opts.isCustomValidatorCompiler||!1,this.isCustomSerializerCompiler=this.opts.isCustomSerializerCompiler||!1)}add(e){return this.addedSchemas=!0,this.schemaBucket.add(e)}getSchema(e){return this.schemaBucket.getSchema(e)}getSchemas(){return this.schemaBucket.getSchemas()}setValidatorCompiler(e){this.compilersFactory=Object.assign({},this.compilersFactory,{buildValidator:()=>e}),this.validatorCompiler=e,this.isCustomValidatorCompiler=!0}setSerializerCompiler(e){this.compilersFactory=Object.assign({},this.compilersFactory,{buildSerializer:()=>e}),this.serializerCompiler=e,this.isCustomSerializerCompiler=!0}getValidatorCompiler(){return this.validatorCompiler||this.parent&&this.parent.getValidatorCompiler()}getSerializerCompiler(){return this.serializerCompiler||this.parent&&this.parent.getSerializerCompiler()}getSerializerBuilder(){return this.compilersFactory.buildSerializer||this.parent&&this.parent.getSerializerBuilder()}getValidatorBuilder(){return this.compilersFactory.buildValidator||this.parent&&this.parent.getValidatorBuilder()}setupValidator(e){this.validatorCompiler!==void 0&&!this.addedSchemas||(this.validatorCompiler=this.getValidatorBuilder()(this.schemaBucket.getSchemas(),e.ajv))}setupSerializer(e){this.serializerCompiler!==void 0&&!this.addedSchemas||(this.serializerCompiler=this.getSerializerBuilder()(this.schemaBucket.getSchemas(),e.serializerOpts))}};_c.buildSchemaController=p0e;TU.exports=_c});var yd=E((PDe,RU)=>{"use strict";var m0e="2.0.0",g0e=Number.MAX_SAFE_INTEGER||9007199254740991,y0e=16,_0e=256-6,v0e=["major","premajor","minor","preminor","patch","prepatch","prerelease"];RU.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:y0e,MAX_SAFE_BUILD_LENGTH:_0e,MAX_SAFE_INTEGER:g0e,RELEASE_TYPES:v0e,SEMVER_SPEC_VERSION:m0e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var _d=E((xDe,$U)=>{"use strict";var w0e=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};$U.exports=w0e});var vc=E((Cs,OU)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:y$,MAX_SAFE_BUILD_LENGTH:b0e,MAX_LENGTH:E0e}=yd(),S0e=_d();Cs=OU.exports={};var T0e=Cs.re=[],R0e=Cs.safeRe=[],G=Cs.src=[],$0e=Cs.safeSrc=[],W=Cs.t={},O0e=0,_$="[a-zA-Z0-9-]",P0e=[["\\s",1],["\\d",E0e],[_$,b0e]],x0e=t=>{for(let[e,r]of P0e)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},ue=(t,e,r)=>{let n=x0e(e),s=O0e++;S0e(t,s,e),W[t]=s,G[s]=e,$0e[s]=n,T0e[s]=new RegExp(e,r?"g":void 0),R0e[s]=new RegExp(n,r?"g":void 0)};ue("NUMERICIDENTIFIER","0|[1-9]\\d*");ue("NUMERICIDENTIFIERLOOSE","\\d+");ue("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${_$}*`);ue("MAINVERSION",`(${G[W.NUMERICIDENTIFIER]})\\.(${G[W.NUMERICIDENTIFIER]})\\.(${G[W.NUMERICIDENTIFIER]})`);ue("MAINVERSIONLOOSE",`(${G[W.NUMERICIDENTIFIERLOOSE]})\\.(${G[W.NUMERICIDENTIFIERLOOSE]})\\.(${G[W.NUMERICIDENTIFIERLOOSE]})`);ue("PRERELEASEIDENTIFIER",`(?:${G[W.NONNUMERICIDENTIFIER]}|${G[W.NUMERICIDENTIFIER]})`);ue("PRERELEASEIDENTIFIERLOOSE",`(?:${G[W.NONNUMERICIDENTIFIER]}|${G[W.NUMERICIDENTIFIERLOOSE]})`);ue("PRERELEASE",`(?:-(${G[W.PRERELEASEIDENTIFIER]}(?:\\.${G[W.PRERELEASEIDENTIFIER]})*))`);ue("PRERELEASELOOSE",`(?:-?(${G[W.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${G[W.PRERELEASEIDENTIFIERLOOSE]})*))`);ue("BUILDIDENTIFIER",`${_$}+`);ue("BUILD",`(?:\\+(${G[W.BUILDIDENTIFIER]}(?:\\.${G[W.BUILDIDENTIFIER]})*))`);ue("FULLPLAIN",`v?${G[W.MAINVERSION]}${G[W.PRERELEASE]}?${G[W.BUILD]}?`);ue("FULL",`^${G[W.FULLPLAIN]}$`);ue("LOOSEPLAIN",`[v=\\s]*${G[W.MAINVERSIONLOOSE]}${G[W.PRERELEASELOOSE]}?${G[W.BUILD]}?`);ue("LOOSE",`^${G[W.LOOSEPLAIN]}$`);ue("GTLT","((?:<|>)?=?)");ue("XRANGEIDENTIFIERLOOSE",`${G[W.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);ue("XRANGEIDENTIFIER",`${G[W.NUMERICIDENTIFIER]}|x|X|\\*`);ue("XRANGEPLAIN",`[v=\\s]*(${G[W.XRANGEIDENTIFIER]})(?:\\.(${G[W.XRANGEIDENTIFIER]})(?:\\.(${G[W.XRANGEIDENTIFIER]})(?:${G[W.PRERELEASE]})?${G[W.BUILD]}?)?)?`);ue("XRANGEPLAINLOOSE",`[v=\\s]*(${G[W.XRANGEIDENTIFIERLOOSE]})(?:\\.(${G[W.XRANGEIDENTIFIERLOOSE]})(?:\\.(${G[W.XRANGEIDENTIFIERLOOSE]})(?:${G[W.PRERELEASELOOSE]})?${G[W.BUILD]}?)?)?`);ue("XRANGE",`^${G[W.GTLT]}\\s*${G[W.XRANGEPLAIN]}$`);ue("XRANGELOOSE",`^${G[W.GTLT]}\\s*${G[W.XRANGEPLAINLOOSE]}$`);ue("COERCEPLAIN",`(^|[^\\d])(\\d{1,${y$}})(?:\\.(\\d{1,${y$}}))?(?:\\.(\\d{1,${y$}}))?`);ue("COERCE",`${G[W.COERCEPLAIN]}(?:$|[^\\d])`);ue("COERCEFULL",G[W.COERCEPLAIN]+`(?:${G[W.PRERELEASE]})?(?:${G[W.BUILD]})?(?:$|[^\\d])`);ue("COERCERTL",G[W.COERCE],!0);ue("COERCERTLFULL",G[W.COERCEFULL],!0);ue("LONETILDE","(?:~>?)");ue("TILDETRIM",`(\\s*)${G[W.LONETILDE]}\\s+`,!0);Cs.tildeTrimReplace="$1~";ue("TILDE",`^${G[W.LONETILDE]}${G[W.XRANGEPLAIN]}$`);ue("TILDELOOSE",`^${G[W.LONETILDE]}${G[W.XRANGEPLAINLOOSE]}$`);ue("LONECARET","(?:\\^)");ue("CARETTRIM",`(\\s*)${G[W.LONECARET]}\\s+`,!0);Cs.caretTrimReplace="$1^";ue("CARET",`^${G[W.LONECARET]}${G[W.XRANGEPLAIN]}$`);ue("CARETLOOSE",`^${G[W.LONECARET]}${G[W.XRANGEPLAINLOOSE]}$`);ue("COMPARATORLOOSE",`^${G[W.GTLT]}\\s*(${G[W.LOOSEPLAIN]})$|^$`);ue("COMPARATOR",`^${G[W.GTLT]}\\s*(${G[W.FULLPLAIN]})$|^$`);ue("COMPARATORTRIM",`(\\s*)${G[W.GTLT]}\\s*(${G[W.LOOSEPLAIN]}|${G[W.XRANGEPLAIN]})`,!0);Cs.comparatorTrimReplace="$1$2$3";ue("HYPHENRANGE",`^\\s*(${G[W.XRANGEPLAIN]})\\s+-\\s+(${G[W.XRANGEPLAIN]})\\s*$`);ue("HYPHENRANGELOOSE",`^\\s*(${G[W.XRANGEPLAINLOOSE]})\\s+-\\s+(${G[W.XRANGEPLAINLOOSE]})\\s*$`);ue("STAR","(<|>)?=?\\s*\\*");ue("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");ue("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var Hg=E((NDe,PU)=>{"use strict";var N0e=Object.freeze({loose:!0}),C0e=Object.freeze({}),I0e=t=>t?typeof t!="object"?N0e:t:C0e;PU.exports=I0e});var v$=E((CDe,CU)=>{"use strict";var xU=/^[0-9]+$/,NU=(t,e)=>{let r=xU.test(t),n=xU.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},A0e=(t,e)=>NU(e,t);CU.exports={compareIdentifiers:NU,rcompareIdentifiers:A0e}});var fr=E((IDe,AU)=>{"use strict";var Gg=_d(),{MAX_LENGTH:IU,MAX_SAFE_INTEGER:Wg}=yd(),{safeRe:Kg,t:Jg}=vc(),k0e=Hg(),{compareIdentifiers:wc}=v$(),rn=class{constructor(e,r){if(r=k0e(r),e instanceof rn){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>IU)throw new TypeError(`version is longer than ${IU} characters`);Gg("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?Kg[Jg.LOOSE]:Kg[Jg.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Wg||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Wg||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Wg||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){let i=+s;if(i>=0&&i<Wg)return i}return s}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Gg("SemVer.compare",this.version,this.options,e),!(e instanceof rn)){if(typeof e=="string"&&e===this.version)return 0;e=new rn(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof rn||(e=new rn(e,this.options)),wc(this.major,e.major)||wc(this.minor,e.minor)||wc(this.patch,e.patch)}comparePre(e){if(e instanceof rn||(e=new rn(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],s=e.prerelease[r];if(Gg("prerelease compare",r,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return wc(n,s)}while(++r)}compareBuild(e){e instanceof rn||(e=new rn(e,this.options));let r=0;do{let n=this.build[r],s=e.build[r];if(Gg("build compare",r,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return wc(n,s)}while(++r)}inc(e,r,n){if(e.startsWith("pre")){if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(r){let s=`-${r}`.match(this.options.loose?Kg[Jg.PRERELEASELOOSE]:Kg[Jg.PRERELEASE]);if(!s||s[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let s=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[s];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(s)}}if(r){let i=[r,s];n===!1&&(i=[r]),wc(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};AU.exports=rn});var va=E((ADe,DU)=>{"use strict";var kU=fr(),D0e=(t,e,r=!1)=>{if(t instanceof kU)return t;try{return new kU(t,e)}catch(n){if(!r)return null;throw n}};DU.exports=D0e});var jU=E((kDe,MU)=>{"use strict";var M0e=va(),j0e=(t,e)=>{let r=M0e(t,e);return r?r.version:null};MU.exports=j0e});var LU=E((DDe,qU)=>{"use strict";var q0e=va(),L0e=(t,e)=>{let r=q0e(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};qU.exports=L0e});var BU=E((MDe,UU)=>{"use strict";var FU=fr(),F0e=(t,e,r,n,s)=>{typeof r=="string"&&(s=n,n=r,r=void 0);try{return new FU(t instanceof FU?t.version:t,r).inc(e,n,s).version}catch{return null}};UU.exports=F0e});var HU=E((jDe,VU)=>{"use strict";var zU=va(),U0e=(t,e)=>{let r=zU(t,null,!0),n=zU(e,null,!0),s=r.compare(n);if(s===0)return null;let i=s>0,o=i?r:n,a=i?n:r,l=!!o.prerelease.length;if(!!a.prerelease.length&&!l){if(!a.patch&&!a.minor)return"major";if(a.compareMain(o)===0)return a.minor&&!a.patch?"minor":"patch"}let u=l?"pre":"";return r.major!==n.major?u+"major":r.minor!==n.minor?u+"minor":r.patch!==n.patch?u+"patch":"prerelease"};VU.exports=U0e});var WU=E((qDe,GU)=>{"use strict";var B0e=fr(),z0e=(t,e)=>new B0e(t,e).major;GU.exports=z0e});var JU=E((LDe,KU)=>{"use strict";var V0e=fr(),H0e=(t,e)=>new V0e(t,e).minor;KU.exports=H0e});var XU=E((FDe,YU)=>{"use strict";var G0e=fr(),W0e=(t,e)=>new G0e(t,e).patch;YU.exports=W0e});var ZU=E((UDe,QU)=>{"use strict";var K0e=va(),J0e=(t,e)=>{let r=K0e(t,e);return r&&r.prerelease.length?r.prerelease:null};QU.exports=J0e});var Tn=E((BDe,tB)=>{"use strict";var eB=fr(),Y0e=(t,e,r)=>new eB(t,r).compare(new eB(e,r));tB.exports=Y0e});var nB=E((zDe,rB)=>{"use strict";var X0e=Tn(),Q0e=(t,e,r)=>X0e(e,t,r);rB.exports=Q0e});var iB=E((VDe,sB)=>{"use strict";var Z0e=Tn(),e_e=(t,e)=>Z0e(t,e,!0);sB.exports=e_e});var Yg=E((HDe,aB)=>{"use strict";var oB=fr(),t_e=(t,e,r)=>{let n=new oB(t,r),s=new oB(e,r);return n.compare(s)||n.compareBuild(s)};aB.exports=t_e});var cB=E((GDe,lB)=>{"use strict";var r_e=Yg(),n_e=(t,e)=>t.sort((r,n)=>r_e(r,n,e));lB.exports=n_e});var fB=E((WDe,uB)=>{"use strict";var s_e=Yg(),i_e=(t,e)=>t.sort((r,n)=>s_e(n,r,e));uB.exports=i_e});var vd=E((KDe,dB)=>{"use strict";var o_e=Tn(),a_e=(t,e,r)=>o_e(t,e,r)>0;dB.exports=a_e});var Xg=E((JDe,hB)=>{"use strict";var l_e=Tn(),c_e=(t,e,r)=>l_e(t,e,r)<0;hB.exports=c_e});var w$=E((YDe,pB)=>{"use strict";var u_e=Tn(),f_e=(t,e,r)=>u_e(t,e,r)===0;pB.exports=f_e});var b$=E((XDe,mB)=>{"use strict";var d_e=Tn(),h_e=(t,e,r)=>d_e(t,e,r)!==0;mB.exports=h_e});var Qg=E((QDe,gB)=>{"use strict";var p_e=Tn(),m_e=(t,e,r)=>p_e(t,e,r)>=0;gB.exports=m_e});var Zg=E((ZDe,yB)=>{"use strict";var g_e=Tn(),y_e=(t,e,r)=>g_e(t,e,r)<=0;yB.exports=y_e});var E$=E((eMe,_B)=>{"use strict";var __e=w$(),v_e=b$(),w_e=vd(),b_e=Qg(),E_e=Xg(),S_e=Zg(),T_e=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return __e(t,r,n);case"!=":return v_e(t,r,n);case">":return w_e(t,r,n);case">=":return b_e(t,r,n);case"<":return E_e(t,r,n);case"<=":return S_e(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};_B.exports=T_e});var wB=E((tMe,vB)=>{"use strict";var R_e=fr(),$_e=va(),{safeRe:ey,t:ty}=vc(),O_e=(t,e)=>{if(t instanceof R_e)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(e.includePrerelease?ey[ty.COERCEFULL]:ey[ty.COERCE]);else{let l=e.includePrerelease?ey[ty.COERCERTLFULL]:ey[ty.COERCERTL],c;for(;(c=l.exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||c.index+c[0].length!==r.index+r[0].length)&&(r=c),l.lastIndex=c.index+c[1].length+c[2].length;l.lastIndex=-1}if(r===null)return null;let n=r[2],s=r[3]||"0",i=r[4]||"0",o=e.includePrerelease&&r[5]?`-${r[5]}`:"",a=e.includePrerelease&&r[6]?`+${r[6]}`:"";return $_e(`${n}.${s}.${i}${o}${a}`,e)};vB.exports=O_e});var EB=E((rMe,bB)=>{"use strict";var S$=class{constructor(){this.max=1e3,this.map=new Map}get(e){let r=this.map.get(e);if(r!==void 0)return this.map.delete(e),this.map.set(e,r),r}delete(e){return this.map.delete(e)}set(e,r){if(!this.delete(e)&&r!==void 0){if(this.map.size>=this.max){let s=this.map.keys().next().value;this.delete(s)}this.map.set(e,r)}return this}};bB.exports=S$});var Rn=E((nMe,$B)=>{"use strict";var P_e=/\s+/g,wa=class{constructor(e,r){if(r=N_e(r),e instanceof wa)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new wa(e.raw,r);if(e instanceof T$)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().replace(P_e," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(s=>!TB(s[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let s of this.set)if(s.length===1&&j_e(s[0])){this.set=[s];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let r=this.set[e];for(let n=0;n<r.length;n++)n>0&&(this.formatted+=" "),this.formatted+=r[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&D_e)|(this.options.loose&&M_e))+":"+e,s=SB.get(n);if(s)return s;let i=this.options.loose,o=i?Jr[Pr.HYPHENRANGELOOSE]:Jr[Pr.HYPHENRANGE];e=e.replace(o,W_e(this.options.includePrerelease)),at("hyphen replace",e),e=e.replace(Jr[Pr.COMPARATORTRIM],I_e),at("comparator trim",e),e=e.replace(Jr[Pr.TILDETRIM],A_e),at("tilde trim",e),e=e.replace(Jr[Pr.CARETTRIM],k_e),at("caret trim",e);let a=e.split(" ").map(d=>q_e(d,this.options)).join(" ").split(/\s+/).map(d=>G_e(d,this.options));i&&(a=a.filter(d=>(at("loose invalid filter",d,this.options),!!d.match(Jr[Pr.COMPARATORLOOSE])))),at("range list",a);let l=new Map,c=a.map(d=>new T$(d,this.options));for(let d of c){if(TB(d))return[d];l.set(d.value,d)}l.size>1&&l.has("")&&l.delete("");let u=[...l.values()];return SB.set(n,u),u}intersects(e,r){if(!(e instanceof wa))throw new TypeError("a Range is required");return this.set.some(n=>RB(n,r)&&e.set.some(s=>RB(s,r)&&n.every(i=>s.every(o=>i.intersects(o,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new C_e(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(K_e(this.set[r],e,this.options))return!0;return!1}};$B.exports=wa;var x_e=EB(),SB=new x_e,N_e=Hg(),T$=wd(),at=_d(),C_e=fr(),{safeRe:Jr,t:Pr,comparatorTrimReplace:I_e,tildeTrimReplace:A_e,caretTrimReplace:k_e}=vc(),{FLAG_INCLUDE_PRERELEASE:D_e,FLAG_LOOSE:M_e}=yd(),TB=t=>t.value==="<0.0.0-0",j_e=t=>t.value==="",RB=(t,e)=>{let r=!0,n=t.slice(),s=n.pop();for(;r&&n.length;)r=n.every(i=>s.intersects(i,e)),s=n.pop();return r},q_e=(t,e)=>(at("comp",t,e),t=U_e(t,e),at("caret",t),t=L_e(t,e),at("tildes",t),t=z_e(t,e),at("xrange",t),t=H_e(t,e),at("stars",t),t),xr=t=>!t||t.toLowerCase()==="x"||t==="*",L_e=(t,e)=>t.trim().split(/\s+/).map(r=>F_e(r,e)).join(" "),F_e=(t,e)=>{let r=e.loose?Jr[Pr.TILDELOOSE]:Jr[Pr.TILDE];return t.replace(r,(n,s,i,o,a)=>{at("tilde",t,n,s,i,o,a);let l;return xr(s)?l="":xr(i)?l=`>=${s}.0.0 <${+s+1}.0.0-0`:xr(o)?l=`>=${s}.${i}.0 <${s}.${+i+1}.0-0`:a?(at("replaceTilde pr",a),l=`>=${s}.${i}.${o}-${a} <${s}.${+i+1}.0-0`):l=`>=${s}.${i}.${o} <${s}.${+i+1}.0-0`,at("tilde return",l),l})},U_e=(t,e)=>t.trim().split(/\s+/).map(r=>B_e(r,e)).join(" "),B_e=(t,e)=>{at("caret",t,e);let r=e.loose?Jr[Pr.CARETLOOSE]:Jr[Pr.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(s,i,o,a,l)=>{at("caret",t,s,i,o,a,l);let c;return xr(i)?c="":xr(o)?c=`>=${i}.0.0${n} <${+i+1}.0.0-0`:xr(a)?i==="0"?c=`>=${i}.${o}.0${n} <${i}.${+o+1}.0-0`:c=`>=${i}.${o}.0${n} <${+i+1}.0.0-0`:l?(at("replaceCaret pr",l),i==="0"?o==="0"?c=`>=${i}.${o}.${a}-${l} <${i}.${o}.${+a+1}-0`:c=`>=${i}.${o}.${a}-${l} <${i}.${+o+1}.0-0`:c=`>=${i}.${o}.${a}-${l} <${+i+1}.0.0-0`):(at("no pr"),i==="0"?o==="0"?c=`>=${i}.${o}.${a}${n} <${i}.${o}.${+a+1}-0`:c=`>=${i}.${o}.${a}${n} <${i}.${+o+1}.0-0`:c=`>=${i}.${o}.${a} <${+i+1}.0.0-0`),at("caret return",c),c})},z_e=(t,e)=>(at("replaceXRanges",t,e),t.split(/\s+/).map(r=>V_e(r,e)).join(" ")),V_e=(t,e)=>{t=t.trim();let r=e.loose?Jr[Pr.XRANGELOOSE]:Jr[Pr.XRANGE];return t.replace(r,(n,s,i,o,a,l)=>{at("xRange",t,n,s,i,o,a,l);let c=xr(i),u=c||xr(o),d=u||xr(a),p=d;return s==="="&&p&&(s=""),l=e.includePrerelease?"-0":"",c?s===">"||s==="<"?n="<0.0.0-0":n="*":s&&p?(u&&(o=0),a=0,s===">"?(s=">=",u?(i=+i+1,o=0,a=0):(o=+o+1,a=0)):s==="<="&&(s="<",u?i=+i+1:o=+o+1),s==="<"&&(l="-0"),n=`${s+i}.${o}.${a}${l}`):u?n=`>=${i}.0.0${l} <${+i+1}.0.0-0`:d&&(n=`>=${i}.${o}.0${l} <${i}.${+o+1}.0-0`),at("xRange return",n),n})},H_e=(t,e)=>(at("replaceStars",t,e),t.trim().replace(Jr[Pr.STAR],"")),G_e=(t,e)=>(at("replaceGTE0",t,e),t.trim().replace(Jr[e.includePrerelease?Pr.GTE0PRE:Pr.GTE0],"")),W_e=t=>(e,r,n,s,i,o,a,l,c,u,d,p)=>(xr(n)?r="":xr(s)?r=`>=${n}.0.0${t?"-0":""}`:xr(i)?r=`>=${n}.${s}.0${t?"-0":""}`:o?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,xr(c)?l="":xr(u)?l=`<${+c+1}.0.0-0`:xr(d)?l=`<${c}.${+u+1}.0-0`:p?l=`<=${c}.${u}.${d}-${p}`:t?l=`<${c}.${u}.${+d+1}-0`:l=`<=${l}`,`${r} ${l}`.trim()),K_e=(t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(at(t[n].semver),t[n].semver!==T$.ANY&&t[n].semver.prerelease.length>0){let s=t[n].semver;if(s.major===e.major&&s.minor===e.minor&&s.patch===e.patch)return!0}return!1}return!0}});var wd=E((sMe,IB)=>{"use strict";var bd=Symbol("SemVer ANY"),bc=class{static get ANY(){return bd}constructor(e,r){if(r=OB(r),e instanceof bc){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),$$("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===bd?this.value="":this.value=this.operator+this.semver.version,$$("comp",this)}parse(e){let r=this.options.loose?PB[xB.COMPARATORLOOSE]:PB[xB.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new NB(n[2],this.options.loose):this.semver=bd}toString(){return this.value}test(e){if($$("Comparator.test",e,this.options.loose),this.semver===bd||e===bd)return!0;if(typeof e=="string")try{e=new NB(e,this.options)}catch{return!1}return R$(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof bc))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new CB(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new CB(this.value,r).test(e.semver):(r=OB(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||R$(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||R$(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};IB.exports=bc;var OB=Hg(),{safeRe:PB,t:xB}=vc(),R$=E$(),$$=_d(),NB=fr(),CB=Rn()});var Ed=E((iMe,AB)=>{"use strict";var J_e=Rn(),Y_e=(t,e,r)=>{try{e=new J_e(e,r)}catch{return!1}return e.test(t)};AB.exports=Y_e});var DB=E((oMe,kB)=>{"use strict";var X_e=Rn(),Q_e=(t,e)=>new X_e(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));kB.exports=Q_e});var jB=E((aMe,MB)=>{"use strict";var Z_e=fr(),eve=Rn(),tve=(t,e,r)=>{let n=null,s=null,i=null;try{i=new eve(e,r)}catch{return null}return t.forEach(o=>{i.test(o)&&(!n||s.compare(o)===-1)&&(n=o,s=new Z_e(n,r))}),n};MB.exports=tve});var LB=E((lMe,qB)=>{"use strict";var rve=fr(),nve=Rn(),sve=(t,e,r)=>{let n=null,s=null,i=null;try{i=new nve(e,r)}catch{return null}return t.forEach(o=>{i.test(o)&&(!n||s.compare(o)===1)&&(n=o,s=new rve(n,r))}),n};qB.exports=sve});var BB=E((cMe,UB)=>{"use strict";var O$=fr(),ive=Rn(),FB=vd(),ove=(t,e)=>{t=new ive(t,e);let r=new O$("0.0.0");if(t.test(r)||(r=new O$("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let s=t.set[n],i=null;s.forEach(o=>{let a=new O$(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!i||FB(a,i))&&(i=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),i&&(!r||FB(r,i))&&(r=i)}return r&&t.test(r)?r:null};UB.exports=ove});var VB=E((uMe,zB)=>{"use strict";var ave=Rn(),lve=(t,e)=>{try{return new ave(t,e).range||"*"}catch{return null}};zB.exports=lve});var ry=E((fMe,KB)=>{"use strict";var cve=fr(),WB=wd(),{ANY:uve}=WB,fve=Rn(),dve=Ed(),HB=vd(),GB=Xg(),hve=Zg(),pve=Qg(),mve=(t,e,r,n)=>{t=new cve(t,n),e=new fve(e,n);let s,i,o,a,l;switch(r){case">":s=HB,i=hve,o=GB,a=">",l=">=";break;case"<":s=GB,i=pve,o=HB,a="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(dve(t,e,n))return!1;for(let c=0;c<e.set.length;++c){let u=e.set[c],d=null,p=null;if(u.forEach(f=>{f.semver===uve&&(f=new WB(">=0.0.0")),d=d||f,p=p||f,s(f.semver,d.semver,n)?d=f:o(f.semver,p.semver,n)&&(p=f)}),d.operator===a||d.operator===l||(!p.operator||p.operator===a)&&i(t,p.semver))return!1;if(p.operator===l&&o(t,p.semver))return!1}return!0};KB.exports=mve});var YB=E((dMe,JB)=>{"use strict";var gve=ry(),yve=(t,e,r)=>gve(t,e,">",r);JB.exports=yve});var QB=E((hMe,XB)=>{"use strict";var _ve=ry(),vve=(t,e,r)=>_ve(t,e,"<",r);XB.exports=vve});var tz=E((pMe,ez)=>{"use strict";var ZB=Rn(),wve=(t,e,r)=>(t=new ZB(t,r),e=new ZB(e,r),t.intersects(e,r));ez.exports=wve});var nz=E((mMe,rz)=>{"use strict";var bve=Ed(),Eve=Tn();rz.exports=(t,e,r)=>{let n=[],s=null,i=null,o=t.sort((u,d)=>Eve(u,d,r));for(let u of o)bve(u,e,r)?(i=u,s||(s=u)):(i&&n.push([s,i]),i=null,s=null);s&&n.push([s,null]);let a=[];for(let[u,d]of n)u===d?a.push(u):!d&&u===o[0]?a.push("*"):d?u===o[0]?a.push(`<=${d}`):a.push(`${u} - ${d}`):a.push(`>=${u}`);let l=a.join(" || "),c=typeof e.raw=="string"?e.raw:String(e);return l.length<c.length?l:e}});var cz=E((gMe,lz)=>{"use strict";var sz=Rn(),x$=wd(),{ANY:P$}=x$,Sd=Ed(),N$=Tn(),Sve=(t,e,r={})=>{if(t===e)return!0;t=new sz(t,r),e=new sz(e,r);let n=!1;e:for(let s of t.set){for(let i of e.set){let o=Rve(s,i,r);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},Tve=[new x$(">=0.0.0-0")],iz=[new x$(">=0.0.0")],Rve=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===P$){if(e.length===1&&e[0].semver===P$)return!0;r.includePrerelease?t=Tve:t=iz}if(e.length===1&&e[0].semver===P$){if(r.includePrerelease)return!0;e=iz}let n=new Set,s,i;for(let f of t)f.operator===">"||f.operator===">="?s=oz(s,f,r):f.operator==="<"||f.operator==="<="?i=az(i,f,r):n.add(f.semver);if(n.size>1)return null;let o;if(s&&i){if(o=N$(s.semver,i.semver,r),o>0)return null;if(o===0&&(s.operator!==">="||i.operator!=="<="))return null}for(let f of n){if(s&&!Sd(f,String(s),r)||i&&!Sd(f,String(i),r))return null;for(let h of e)if(!Sd(f,String(h),r))return!1;return!0}let a,l,c,u,d=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1,p=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1;d&&d.prerelease.length===1&&i.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(let f of e){if(u=u||f.operator===">"||f.operator===">=",c=c||f.operator==="<"||f.operator==="<=",s){if(p&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===p.major&&f.semver.minor===p.minor&&f.semver.patch===p.patch&&(p=!1),f.operator===">"||f.operator===">="){if(a=oz(s,f,r),a===f&&a!==s)return!1}else if(s.operator===">="&&!Sd(s.semver,String(f),r))return!1}if(i){if(d&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===d.major&&f.semver.minor===d.minor&&f.semver.patch===d.patch&&(d=!1),f.operator==="<"||f.operator==="<="){if(l=az(i,f,r),l===f&&l!==i)return!1}else if(i.operator==="<="&&!Sd(i.semver,String(f),r))return!1}if(!f.operator&&(i||s)&&o!==0)return!1}return!(s&&c&&!i&&o!==0||i&&u&&!s&&o!==0||p||d)},oz=(t,e,r)=>{if(!t)return e;let n=N$(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},az=(t,e,r)=>{if(!t)return e;let n=N$(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};lz.exports=Sve});var hz=E((yMe,dz)=>{"use strict";var C$=vc(),uz=yd(),$ve=fr(),fz=v$(),Ove=va(),Pve=jU(),xve=LU(),Nve=BU(),Cve=HU(),Ive=WU(),Ave=JU(),kve=XU(),Dve=ZU(),Mve=Tn(),jve=nB(),qve=iB(),Lve=Yg(),Fve=cB(),Uve=fB(),Bve=vd(),zve=Xg(),Vve=w$(),Hve=b$(),Gve=Qg(),Wve=Zg(),Kve=E$(),Jve=wB(),Yve=wd(),Xve=Rn(),Qve=Ed(),Zve=DB(),ewe=jB(),twe=LB(),rwe=BB(),nwe=VB(),swe=ry(),iwe=YB(),owe=QB(),awe=tz(),lwe=nz(),cwe=cz();dz.exports={parse:Ove,valid:Pve,clean:xve,inc:Nve,diff:Cve,major:Ive,minor:Ave,patch:kve,prerelease:Dve,compare:Mve,rcompare:jve,compareLoose:qve,compareBuild:Lve,sort:Fve,rsort:Uve,gt:Bve,lt:zve,eq:Vve,neq:Hve,gte:Gve,lte:Wve,cmp:Kve,coerce:Jve,Comparator:Yve,Range:Xve,satisfies:Qve,toComparators:Zve,maxSatisfying:ewe,minSatisfying:twe,minVersion:rwe,validRange:nwe,outside:swe,gtr:iwe,ltr:owe,intersects:awe,simplifyRange:lwe,subset:cwe,SemVer:$ve,re:C$.re,src:C$.src,tokens:C$.t,SEMVER_SPEC_VERSION:uz.SEMVER_SPEC_VERSION,RELEASE_TYPES:uz.RELEASE_TYPES,compareIdentifiers:fz.compareIdentifiers,rcompareIdentifiers:fz.rcompareIdentifiers}});var j$=E((_Me,M$)=>{"use strict";var I$=hz(),k$=require("assert"),D$=Symbol.for("registered-plugin"),{kTestInternals:uwe}=Nt(),{exist:fwe,existReply:dwe,existRequest:hwe}=Eu(),{FST_ERR_PLUGIN_VERSION_MISMATCH:pwe,FST_ERR_PLUGIN_NOT_PRESENT_IN_INSTANCE:mwe,FST_ERR_PLUGIN_INVALID_ASYNC_HANDLER:gwe}=Vt(),ywe=/-(?:rc|pre|alpha).+$/u;function Td(t){return t[Symbol.for("plugin-meta")]}function pz(t){let e=mz(t);if(e)return e;let r=require.cache;if(r){let n=Object.keys(r);for(let s=0;s<n.length;s++){let i=n[s];if(r[i].exports===t)return i}}return t.name?t.name:null}function _we(t){return t.toString().split(`
`,2).map(e=>e.trim()).join(" -- ")}function mz(t){return t[Symbol.for("fastify.display-name")]}function gz(t){return!!t[Symbol.for("skip-override")]}function yz(t){let e=Td(t);if(!e)return;let r=e.dependencies;r&&(k$(Array.isArray(r),"The dependencies should be an array of strings"),r.forEach(n=>{k$(this[D$].indexOf(n)>-1,`The dependency '${n}' of plugin '${e.name}' is not registered`)}))}function _z(t){let e=Td(t);if(!e)return;let{decorators:r,name:n}=e;r&&(r.fastify&&A$(this,"Fastify",r.fastify,n),r.reply&&A$(this,"Reply",r.reply,n),r.request&&A$(this,"Request",r.request,n))}var vwe={Fastify:fwe,Request:hwe,Reply:dwe};function A$(t,e,r,n){k$(Array.isArray(r),"The decorators should be an array of strings"),r.forEach(s=>{let i=typeof n=="string"?` required by '${n}'`:"";if(!vwe[e].call(t,s))throw new mwe(s,i,e)})}function wwe(t){let e=Td(t);if(e?.fastify==null)return;let r=e.fastify,n=ywe.test(this.version);if(!(n===!0&&I$.gt(this.version,I$.coerce(r))===!0)&&r&&I$.satisfies(this.version,r,{includePrerelease:n})===!1)throw new pwe(e.name,r,this.version)}function bwe(t){let e=Td(t);if(!e)return;let r=e.name;if(r)return this[D$].push(r),r}function Ewe(t,e){if(t.constructor.name==="AsyncFunction"&&t.length===3)throw new gwe(e)}function Swe(t){let e=bwe.call(this,t)||pz(t);return Ewe.call(this,t,e),wwe.call(this,t),_z.call(this,t),yz.call(this,t),gz(t)}M$.exports={getPluginName:pz,getFuncPreview:_we,kRegisteredPlugins:D$,getDisplayName:mz,registerPlugin:Swe};M$.exports[uwe]={shouldSkipOverride:gz,getMeta:Td,checkDecorators:_z,checkDependencies:yz}});var ny=E((vMe,vz)=>{"use strict";function Twe(t,e){let r=e||$we();return t?Owe(t,r):r}function Rwe(t,e){return t.genReqId(e)}function $we(){let e=0;return function(){return e=e+1&2147483647,`req-${e.toString(36)}`}}function Owe(t,e){return function(r){return r.headers[t]||e(r)}}vz.exports={getGenReqId:Rwe,reqIdGenFactory:Twe}});var L$=E((wMe,Ez)=>{"use strict";var wz=12,Pwe=0,q$=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,7,7,7,7,7,7,7,7,7,7,7,7,8,7,7,10,9,9,9,11,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,24,36,48,60,72,84,96,0,12,12,12,0,0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,0,0,0,0,0,24,24,24,0,0,0,0,0,0,0,0,0,24,24,0,0,0,0,0,0,0,0,0,0,48,48,48,0,0,0,0,0,0,0,0,0,0,48,48,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,0,0,0,127,63,63,63,0,31,15,15,15,7,7,7];function xwe(t){var e=t.indexOf("%");if(e===-1)return t;for(var r=t.length,n="",s=0,i=0,o=e,a=wz;e>-1&&e<r;){var l=bz(t[e+1],4),c=bz(t[e+2],0),u=l|c,d=q$[u];if(a=q$[256+a+d],i=i<<6|u&q$[364+d],a===wz)n+=t.slice(s,o),n+=i<=65535?String.fromCharCode(i):String.fromCharCode(55232+(i>>10),56320+(i&1023)),i=0,s=e+3,e=o=t.indexOf("%",s);else{if(a===Pwe)return null;if(e+=3,e<r&&t.charCodeAt(e)===37)continue;return null}}return n+t.slice(s)}var Nwe={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};function bz(t,e){var r=Nwe[t];return r===void 0?255:r<<e}Ez.exports=xwe});var Oz=E((bMe,$z)=>{"use strict";var Sz=L$(),Tz=/\+/g,Rz=function(){};Rz.prototype=Object.create(null);function Cwe(t){let e=new Rz;if(typeof t!="string")return e;let r=t.length,n="",s="",i=-1,o=-1,a=!1,l=!1,c=!1,u=!1,d=!1,p=0;for(let f=0;f<r+1;f++)if(p=f!==r?t.charCodeAt(f):38,p===38){if(d=o>i,d||(o=f),n=t.slice(i+1,o),d||n.length>0){c&&(n=n.replace(Tz," ")),a&&(n=Sz(n)||n),d&&(s=t.slice(o+1,f),u&&(s=s.replace(Tz," ")),l&&(s=Sz(s)||s));let h=e[n];h===void 0?e[n]=s:h.pop?h.push(s):e[n]=[h,s]}s="",i=f,o=f,a=!1,l=!1,c=!1,u=!1}else p===61?o<=i?o=f:l=!0:p===43?o>i?u=!0:c=!0:p===37&&(o>i?l=!0:a=!0);return e}$z.exports=Cwe});var xz=E((EMe,Pz)=>{var Is=Array.from({length:256},(t,e)=>"%"+((e<16?"0":"")+e.toString(16)).toUpperCase()),Iwe=new Int8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,1,1,0,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,0]);function Awe(t){let e=t.length;if(e===0)return"";let r="",n=0,s=0;e:for(;s<e;s++){let i=t.charCodeAt(s);for(;i<128;){if(Iwe[i]!==1&&(n<s&&(r+=t.slice(n,s)),n=s+1,r+=Is[i]),++s===e)break e;i=t.charCodeAt(s)}if(n<s&&(r+=t.slice(n,s)),i<2048){n=s+1,r+=Is[192|i>>6]+Is[128|i&63];continue}if(i<55296||i>=57344){n=s+1,r+=Is[224|i>>12]+Is[128|i>>6&63]+Is[128|i&63];continue}if(++s,s>=e)throw new Error("URI malformed");let o=t.charCodeAt(s)&1023;n=s+1,i=65536+((i&1023)<<10|o),r+=Is[240|i>>18]+Is[128|i>>12&63]+Is[128|i>>6&63]+Is[128|i&63]}return n===0?t:n<e?r+t.slice(n):r}Pz.exports={encodeString:Awe}});var Iz=E((SMe,Cz)=>{"use strict";var{encodeString:F$}=xz();function Nz(t){let e=typeof t;return e==="string"?F$(t):e==="bigint"?t.toString():e==="boolean"?t?"true":"false":e==="number"&&Number.isFinite(t)?t<1e21?""+t:F$(""+t):""}function kwe(t){let e="";if(t===null||typeof t!="object")return e;let r="&",n=Object.keys(t),s=n.length,i=0;for(let o=0;o<s;o++){let a=n[o],l=t[a],c=F$(a)+"=";if(o&&(e+=r),Array.isArray(l)){i=l.length;for(let u=0;u<i;u++)u&&(e+=r),e+=c,e+=Nz(l[u])}else e+=c,e+=Nz(l)}return e}Cz.exports=kwe});var Mz=E((TMe,Rd)=>{"use strict";var Az=Oz(),kz=Iz(),Dz={parse:Az,stringify:kz};Rd.exports=Dz;Rd.exports.default=Dz;Rd.exports.parse=Az;Rd.exports.stringify=kz});var qz=E(jz=>{"use strict";Object.defineProperty(jz,"__esModule",{value:!0})});var Lz=E($d=>{"use strict";Object.defineProperty($d,"__esModule",{value:!0});$d.types=void 0;var Dwe;(function(t){t[t.ROOT=0]="ROOT",t[t.GROUP=1]="GROUP",t[t.POSITION=2]="POSITION",t[t.SET=3]="SET",t[t.RANGE=4]="RANGE",t[t.REPETITION=5]="REPETITION",t[t.REFERENCE=6]="REFERENCE",t[t.CHAR=7]="CHAR"})(Dwe=$d.types||($d.types={}))});var Uz=E(Fz=>{"use strict";Object.defineProperty(Fz,"__esModule",{value:!0})});var yi=E(gi=>{"use strict";var Mwe=gi&&gi.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),U$=gi&&gi.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Mwe(e,t,r)};Object.defineProperty(gi,"__esModule",{value:!0});U$(qz(),gi);U$(Lz(),gi);U$(Uz(),gi)});var sy=E(dr=>{"use strict";Object.defineProperty(dr,"__esModule",{value:!0});dr.anyChar=dr.notWhitespace=dr.whitespace=dr.notInts=dr.ints=dr.notWords=dr.words=void 0;var Ue=yi(),Bz=()=>[{type:Ue.types.RANGE,from:48,to:57}],zz=()=>[{type:Ue.types.CHAR,value:95},{type:Ue.types.RANGE,from:97,to:122},{type:Ue.types.RANGE,from:65,to:90},{type:Ue.types.RANGE,from:48,to:57}],Vz=()=>[{type:Ue.types.CHAR,value:9},{type:Ue.types.CHAR,value:10},{type:Ue.types.CHAR,value:11},{type:Ue.types.CHAR,value:12},{type:Ue.types.CHAR,value:13},{type:Ue.types.CHAR,value:32},{type:Ue.types.CHAR,value:160},{type:Ue.types.CHAR,value:5760},{type:Ue.types.RANGE,from:8192,to:8202},{type:Ue.types.CHAR,value:8232},{type:Ue.types.CHAR,value:8233},{type:Ue.types.CHAR,value:8239},{type:Ue.types.CHAR,value:8287},{type:Ue.types.CHAR,value:12288},{type:Ue.types.CHAR,value:65279}],jwe=()=>[{type:Ue.types.CHAR,value:10},{type:Ue.types.CHAR,value:13},{type:Ue.types.CHAR,value:8232},{type:Ue.types.CHAR,value:8233}];dr.words=()=>({type:Ue.types.SET,set:zz(),not:!1});dr.notWords=()=>({type:Ue.types.SET,set:zz(),not:!0});dr.ints=()=>({type:Ue.types.SET,set:Bz(),not:!1});dr.notInts=()=>({type:Ue.types.SET,set:Bz(),not:!0});dr.whitespace=()=>({type:Ue.types.SET,set:Vz(),not:!1});dr.notWhitespace=()=>({type:Ue.types.SET,set:Vz(),not:!0});dr.anyChar=()=>({type:Ue.types.SET,set:jwe(),not:!0})});var Gz=E($n=>{"use strict";var qwe=$n&&$n.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Lwe=$n&&$n.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Fwe=$n&&$n.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&qwe(e,t,r);return Lwe(e,t),e};Object.defineProperty($n,"__esModule",{value:!0});$n.tokenizeClass=$n.strToChars=void 0;var Hz=yi(),Ec=Fwe(sy()),Uwe="@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^ ?";$n.strToChars=t=>{let e=/(\[\\b\])|(\\)?\\(?:u([A-F0-9]{4})|x([A-F0-9]{2})|c([@A-Z[\\\]^?])|([0tnvfr]))/g;return t.replace(e,(r,n,s,i,o,a,l)=>{if(s)return r;let c=n?8:i?parseInt(i,16):o?parseInt(o,16):a?Uwe.indexOf(a):{0:0,t:9,n:10,v:11,f:12,r:13}[l],u=String.fromCharCode(c);return/[[\]{}^$.|?*+()]/.test(u)?`\\${u}`:u})};$n.tokenizeClass=(t,e)=>{var r,n,s,i,o,a,l;let c=[],u,d,p=/\\(?:(w)|(d)|(s)|(W)|(D)|(S))|((?:(?:\\)(.)|([^\]\\]))-(((?:\\)])|(((?:\\)?([^\]])))))|(\])|(?:\\)?([^])/g;for(;(u=p.exec(t))!==null;){let f=(l=(a=(o=(i=(s=(n=(r=u[1]&&Ec.words())!==null&&r!==void 0?r:u[2]&&Ec.ints())!==null&&n!==void 0?n:u[3]&&Ec.whitespace())!==null&&s!==void 0?s:u[4]&&Ec.notWords())!==null&&i!==void 0?i:u[5]&&Ec.notInts())!==null&&o!==void 0?o:u[6]&&Ec.notWhitespace())!==null&&a!==void 0?a:u[7]&&{type:Hz.types.RANGE,from:(u[8]||u[9]).charCodeAt(0),to:(d=u[10]).charCodeAt(d.length-1)})!==null&&l!==void 0?l:(d=u[16])&&{type:Hz.types.CHAR,value:d.charCodeAt(0)};if(f)c.push(f);else return[c,p.lastIndex]}throw new SyntaxError(`Invalid regular expression: /${e}/: Unterminated character class`)}});var B$=E(As=>{"use strict";var Bwe=As&&As.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),zwe=As&&As.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Jz=As&&As.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Bwe(e,t,r);return zwe(e,t),e};Object.defineProperty(As,"__esModule",{value:!0});As.tokenizer=void 0;var Wz=Jz(Gz()),Qt=yi(),ba=Jz(sy()),Vwe=/^[a-zA-Z_$]$/i,Hwe=/^[a-zA-Z0-9_$]$/i,Kz=/\d/;As.tokenizer=t=>{let e=0,r,n={type:Qt.types.ROOT,stack:[]},s=n,i=n.stack,o=[],a=[],l=0,c=d=>{throw new SyntaxError(`Invalid regular expression: /${t}/: Nothing to repeat at column ${d-1}`)},u=Wz.strToChars(t);for(;e<u.length;)switch(r=u[e++]){case"\\":if(e===u.length)throw new SyntaxError(`Invalid regular expression: /${t}/: \\ at end of pattern`);switch(r=u[e++]){case"b":i.push({type:Qt.types.POSITION,value:"b"});break;case"B":i.push({type:Qt.types.POSITION,value:"B"});break;case"w":i.push(ba.words());break;case"W":i.push(ba.notWords());break;case"d":i.push(ba.ints());break;case"D":i.push(ba.notInts());break;case"s":i.push(ba.whitespace());break;case"S":i.push(ba.notWhitespace());break;default:if(Kz.test(r)){let d=r;for(;e<u.length&&Kz.test(u[e]);)d+=u[e++];let p=parseInt(d,10),f={type:Qt.types.REFERENCE,value:p};i.push(f),a.push({reference:f,stack:i,index:i.length-1})}else i.push({type:Qt.types.CHAR,value:r.charCodeAt(0)})}break;case"^":i.push({type:Qt.types.POSITION,value:"^"});break;case"$":i.push({type:Qt.types.POSITION,value:"$"});break;case"[":{let d;u[e]==="^"?(d=!0,e++):d=!1;let p=Wz.tokenizeClass(u.slice(e),t);e+=p[1],i.push({type:Qt.types.SET,set:p[0],not:d});break}case".":i.push(ba.anyChar());break;case"(":{let d={type:Qt.types.GROUP,stack:[],remember:!0};if(u[e]==="?")if(r=u[e+1],e+=2,r==="=")d.followedBy=!0,d.remember=!1;else if(r==="!")d.notFollowedBy=!0,d.remember=!1;else if(r==="<"){let p="";if(Vwe.test(u[e]))p+=u[e],e++;else throw new SyntaxError(`Invalid regular expression: /${t}/: Invalid capture group name, character '${u[e]}' after '<' at column ${e+1}`);for(;e<u.length&&Hwe.test(u[e]);)p+=u[e],e++;if(!p)throw new SyntaxError(`Invalid regular expression: /${t}/: Invalid capture group name, character '${u[e]}' after '<' at column ${e+1}`);if(u[e]!==">")throw new SyntaxError(`Invalid regular expression: /${t}/: Unclosed capture group name, expected '>', found '${u[e]}' at column ${e+1}`);d.name=p,e++}else if(r===":")d.remember=!1;else throw new SyntaxError(`Invalid regular expression: /${t}/: Invalid group, character '${r}' after '?' at column ${e-1}`);else l+=1;i.push(d),o.push(s),s=d,i=d.stack;break}case")":if(o.length===0)throw new SyntaxError(`Invalid regular expression: /${t}/: Unmatched ) at column ${e-1}`);s=o.pop(),i=s.options?s.options[s.options.length-1]:s.stack;break;case"|":{s.options||(s.options=[s.stack],delete s.stack);let d=[];s.options.push(d),i=d;break}case"{":{let d=/^(\d+)(,(\d+)?)?\}/.exec(u.slice(e)),p,f;d!==null?(i.length===0&&c(e),p=parseInt(d[1],10),f=d[2]?d[3]?parseInt(d[3],10):1/0:p,e+=d[0].length,i.push({type:Qt.types.REPETITION,min:p,max:f,value:i.pop()})):i.push({type:Qt.types.CHAR,value:123});break}case"?":i.length===0&&c(e),i.push({type:Qt.types.REPETITION,min:0,max:1,value:i.pop()});break;case"+":i.length===0&&c(e),i.push({type:Qt.types.REPETITION,min:1,max:1/0,value:i.pop()});break;case"*":i.length===0&&c(e),i.push({type:Qt.types.REPETITION,min:0,max:1/0,value:i.pop()});break;default:i.push({type:Qt.types.CHAR,value:r.charCodeAt(0)})}if(o.length!==0)throw new SyntaxError(`Invalid regular expression: /${t}/: Unterminated group`);return Gwe(a,l),n};function Gwe(t,e){for(let r of t.reverse())if(e<r.reference.value){r.reference.type=Qt.types.CHAR;let n=r.reference.value.toString();if(r.reference.value=parseInt(n,8),!/^[0-7]+$/.test(n)){let s=0;for(;n[s]!=="8"&&n[s]!=="9";)s+=1;if(s===0?(r.reference.value=n.charCodeAt(0),s+=1):r.reference.value=parseInt(n.slice(0,s),8),n.length>s){let i=r.stack.splice(r.index+1);for(let o of n.slice(s))r.stack.push({type:Qt.types.CHAR,value:o.charCodeAt(0)});r.stack.push(...i)}}}}});var Xz=E(hr=>{"use strict";var Wwe=hr&&hr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Kwe=hr&&hr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Jwe=hr&&hr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Wwe(e,t,r);return Kwe(e,t),e};Object.defineProperty(hr,"__esModule",{value:!0});hr.NOTANYCHAR=hr.WHITESPACE=hr.WORDS=hr.INTS=void 0;var iy=Jwe(sy()),Yz=yi();function oy(t){let e={},r=0;for(let n of t)n.type===Yz.types.CHAR&&(e[n.value]=!0),n.type===Yz.types.RANGE&&(e[`${n.from}-${n.to}`]=!0),r+=1;return{lookup:()=>Object.assign({},e),len:r}}hr.INTS=oy(iy.ints().set);hr.WORDS=oy(iy.words().set);hr.WHITESPACE=oy(iy.whitespace().set);hr.NOTANYCHAR=oy(iy.anyChar().set)});var Zz=E(On=>{"use strict";var Ywe=On&&On.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Xwe=On&&On.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Qwe=On&&On.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Ywe(e,t,r);return Xwe(e,t),e};Object.defineProperty(On,"__esModule",{value:!0});On.writeSetTokens=On.setChar=void 0;var uy=yi(),ay=Qwe(Xz());function cy(t){return t===94?"\\^":t===92?"\\\\":t===93?"\\]":t===45?"\\-":String.fromCharCode(t)}On.setChar=cy;function ly(t,{lookup:e,len:r}){if(r!==t.length)return!1;let n=e();for(let s of t){if(s.type===uy.types.SET)return!1;let i=s.type===uy.types.CHAR?s.value:`${s.from}-${s.to}`;if(n[i])n[i]=!1;else return!1}return!0}function Qz(t,e=!1){if(ly(t.set,ay.INTS))return t.not?"\\D":"\\d";if(ly(t.set,ay.WORDS))return t.not?"\\W":"\\w";if(t.not&&ly(t.set,ay.NOTANYCHAR))return".";if(ly(t.set,ay.WHITESPACE))return t.not?"\\S":"\\s";let r="";for(let s=0;s<t.set.length;s++){let i=t.set[s];r+=Zwe(i)}let n=`${t.not?"^":""}${r}`;return e?n:`[${n}]`}On.writeSetTokens=Qz;function Zwe(t){return t.type===uy.types.CHAR?cy(t.value):t.type===uy.types.RANGE?`${cy(t.from)}-${cy(t.to)}`:Qz(t,!0)}});var V$=E(Sc=>{"use strict";Object.defineProperty(Sc,"__esModule",{value:!0});Sc.reconstruct=void 0;var co=yi(),z$=Zz(),eV=t=>t.map(Sc.reconstruct).join(""),tV=t=>{if("options"in t)return t.options.map(eV).join("|");if("stack"in t)return eV(t.stack);throw new Error("options or stack must be Root or Group token")};Sc.reconstruct=t=>{switch(t.type){case co.types.ROOT:return tV(t);case co.types.CHAR:{let e=String.fromCharCode(t.value);return(/[[\\{}$^.|?*+()]/.test(e)?"\\":"")+e}case co.types.POSITION:return t.value==="^"||t.value==="$"?t.value:`\\${t.value}`;case co.types.REFERENCE:return`\\${t.value}`;case co.types.SET:return z$.writeSetTokens(t);case co.types.GROUP:return`(${t.name?`?<${t.name}>`:t.remember?"":t.followedBy?"?=":t.notFollowedBy?"?!":"?:"}${tV(t)})`;case co.types.REPETITION:{let{min:e,max:r}=t,n;return e===0&&r===1?n="?":e===1&&r===1/0?n="+":e===0&&r===1/0?n="*":r===1/0?n=`{${e},}`:e===r?n=`{${e}}`:n=`{${e},${r}}`,`${Sc.reconstruct(t.value)}${n}`}case co.types.RANGE:return`${z$.setChar(t.from)}-${z$.setChar(t.to)}`;default:throw new Error(`Invalid token type ${t}`)}}});var sV=E((Pn,fy)=>{"use strict";var ebe=Pn&&Pn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),H$=Pn&&Pn.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&ebe(e,t,r)};Object.defineProperty(Pn,"__esModule",{value:!0});Pn.types=void 0;var rV=yi();Object.defineProperty(Pn,"types",{enumerable:!0,get:function(){return rV.types}});H$(B$(),Pn);H$(V$(),Pn);var nV=B$(),tbe=V$();H$(yi(),Pn);Pn.default=nV.tokenizer;fy.exports=nV.tokenizer;fy.exports.types=rV.types;fy.exports.reconstruct=tbe.reconstruct});var oV=E((DMe,dy)=>{"use strict";var iV=sV(),rbe=iV.types;function G$(t,e){e||(e={});let r=e.limit===void 0?25:e.limit;nbe(t)?t=t.source:typeof t!="string"&&(t=String(t));try{t=iV(t)}catch{return!1}let n=0;return function s(i,o){let a,l,c;if(i.type===rbe.REPETITION&&(o++,n++,o>1||n>r))return!1;if(i.options){for(a=0,c=i.options.length;a<c;a++)if(l=s({stack:i.options[a]},o),!l)return!1}let u=i.stack||i.value?.stack;if(!u)return!0;for(a=0;a<u.length;a++)if(l=s(u[a],o),!l)return!1;return!0}(t,0)}function nbe(t){return{}.toString.call(t)==="[object RegExp]"}dy.exports=G$;dy.exports.default=G$;dy.exports.safeRegex=G$});var hy=E((MMe,aV)=>{"use strict";aV.exports={name:"__fmw_internal_strategy_merged_tree_http_method__",storage:function(){let t=new Map;return{get:e=>t.get(e)||null,set:(e,r)=>{t.set(e,r)}}},deriveConstraint:t=>t.method,mustMatchWhenDerived:!0}});var pV=E((jMe,hV)=>{"use strict";var lV=Zs(),cV=hy(),uV=Symbol("treeData");function fV(t,e=""){let r="",n=Object.keys(t);for(let s=0;s<n.length;s++){let i=n[s],o=t[i],a=s===n.length-1,l=a?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ",c=a?"    ":"\u2502   ",d=(o[uV]||"").replaceAll(`
`,`
`+e+c);r+=e+l+i+d+`
`,r+=fV(o,e+c)}return r}function sbe(t){let e=t.name||"";return e=e.replace("bound","").trim(),e=(e||"anonymous")+"()",e}function dV(t){return Array.isArray(t)?t.map(e=>dV(e)):typeof t=="symbol"?t.toString():typeof t=="function"?sbe(t):t}function ibe(t,e){if(!e.includeMeta)return{};let r=e.buildPrettyMeta(t),n={},s=e.includeMeta;Array.isArray(s)||(s=Reflect.ownKeys(r));for(let i of s){if(!Object.prototype.hasOwnProperty.call(r,i))continue;let o=i.toString(),a=r[i];if(a!=null){let l=JSON.stringify(dV(a));n[o]=l}}return n}function obe(t){let e="";for(let[r,n]of Object.entries(t))e+=`
\u2022 (${r}) ${n}`;return e}function abe(t){let e={...t.opts.constraints},r=e[cV.name];return delete e[cV.name],{...t,method:r,opts:{constraints:e}}}function lbe(t){let e=` (${t.method})`,r=t.opts.constraints||{};return Object.keys(r).length!==0&&(e+=" "+JSON.stringify(r)),e+=obe(t.metaData),e}function cbe(t){return t.reduce((e,r)=>{for(let n of e)if(lV(r.opts.constraints,n.opts.constraints)&&lV(r.metaData,n.metaData))return n.method+=", "+r.method,e;return e.push(r),e},[])}function ube(t,e,r){let n=t.routes;return r.method===void 0&&(n=n.map(abe)),n=n.map(s=>(s.metaData=ibe(s,r),s)),r.method===void 0&&(n=cbe(n)),n.map(lbe).join(`
${e}`)}function py(t,e,r,n){if((t.isLeafNode||n.commonPrefix!==!1)&&(r=r||"(empty root node)",e=e[r]={},t.isLeafNode&&(e[uV]=ube(t,r,n)),r=""),t.staticChildren)for(let s of Object.values(t.staticChildren))py(s,e,r+s.prefix,n);if(t.parametricChildren)for(let s of Object.values(t.parametricChildren)){let i=Array.from(s.nodePaths).join("|");py(s,e,r+i,n)}t.wildcardChild&&py(t.wildcardChild,e,"*",n)}function fbe(t,e){let r={};return py(t,r,t.prefix,e),fV(r)}hV.exports={prettyPrintTree:fbe}});var yV=E((qMe,gV)=>{"use strict";var mV=function(){};mV.prototype=Object.create(null);gV.exports={NullObject:mV}});var vV=E((LMe,_V)=>{"use strict";var{NullObject:dbe}=yV(),hbe=hy(),W$=class{constructor(){this.unconstrainedHandler=null,this.constraints=[],this.handlers=[],this.constrainedHandlerStores=null}getMatchingHandler(e){return e===void 0?this.unconstrainedHandler:this._getHandlerMatchingConstraints(e)}addHandler(e,r){let n=r.params,s=r.opts.constraints||{},i={params:n,constraints:s,handler:r.handler,store:r.store||null,_createParamsObject:this._compileCreateParamsObject(n)},o=Object.keys(s);o.length===0&&(this.unconstrainedHandler=i);for(let l of o)this.constraints.includes(l)||(l==="version"?this.constraints.unshift(l):this.constraints.push(l));let a=o.includes(hbe.name);if(!a&&this.handlers.length>=31)throw new Error("find-my-way supports a maximum of 31 route handlers per node when there are constraints, limit reached");this.handlers.push(i),this.handlers.sort((l,c)=>Object.keys(l.constraints).length-Object.keys(c.constraints).length),a||this._compileGetHandlerMatchingConstraints(e,s)}_compileCreateParamsObject(e){let r=[];r.push("const fn = function _createParamsObject (paramsArray) {"),r.push("const params = new NullObject()");for(let n=0;n<e.length;n++)r.push(`params['${e[n]}'] = paramsArray[${n}]`);return r.push("return params"),r.push("}"),r.push("return fn"),new Function("NullObject",r.join(`
`))(dbe)}_getHandlerMatchingConstraints(){return null}_buildConstraintStore(e,r){for(let n=0;n<this.handlers.length;n++){let i=this.handlers[n].constraints[r];if(i!==void 0){let o=e.get(i)||0;o|=1<<n,e.set(i,o)}}}_constrainedIndexBitmask(e){let r=0;for(let n=0;n<this.handlers.length;n++)this.handlers[n].constraints[e]!==void 0&&(r|=1<<n);return~r}_compileGetHandlerMatchingConstraints(e){this.constrainedHandlerStores={};for(let n of this.constraints){let s=e.newStoreForConstraint(n);this.constrainedHandlerStores[n]=s,this._buildConstraintStore(s,n)}let r=[];r.push(`
    let candidates = ${(1<<this.handlers.length)-1}
    let mask, matches
    `);for(let n of this.constraints){r.push(`
      mask = ${this._constrainedIndexBitmask(n)}
      value = derivedConstraints.${n}
      `);let i=e.strategies[n].mustMatchWhenDerived?"matches":"(matches | mask)";r.push(`
      if (value === undefined) {
        candidates &= mask
      } else {
        matches = this.constrainedHandlerStores.${n}.get(value) || 0
        candidates &= ${i}
      }
      if (candidates === 0) return null;
      `)}for(let n in e.strategies)e.strategies[n].mustMatchWhenDerived&&!this.constraints.includes(n)&&r.push(`if (derivedConstraints.${n} !== undefined) return null`);r.push("return this.handlers[Math.floor(Math.log2(candidates))]"),this._getHandlerMatchingConstraints=new Function("derivedConstraints",r.join(`
`))}};_V.exports=W$});var bV=E((FMe,wV)=>{"use strict";var pbe=vV(),vy={STATIC:0,PARAMETRIC:1,WILDCARD:2},my=class{constructor(){this.isLeafNode=!1,this.routes=null,this.handlerStorage=null}addRoute(e,r){this.routes===null&&(this.routes=[]),this.handlerStorage===null&&(this.handlerStorage=new pbe),this.isLeafNode=!0,this.routes.push(e),this.handlerStorage.addHandler(r,e)}},gy=class extends my{constructor(){super(),this.staticChildren={}}findStaticMatchingChild(e,r){let n=this.staticChildren[e.charAt(r)];return n===void 0||!n.matchPrefix(e,r)?null:n}getStaticChild(e,r=0){if(e.length===r)return this;let n=this.findStaticMatchingChild(e,r);return n?n.getStaticChild(e,r+n.prefix.length):null}createStaticChild(e){if(e.length===0)return this;let r=this.staticChildren[e.charAt(0)];if(r){let s=1;for(;s<r.prefix.length;s++)if(e.charCodeAt(s)!==r.prefix.charCodeAt(s)){r=r.split(this,s);break}return r.createStaticChild(e.slice(s))}let n=e.charAt(0);return this.staticChildren[n]=new Tc(e),this.staticChildren[n]}},Tc=class extends gy{constructor(e){super(),this.prefix=e,this.wildcardChild=null,this.parametricChildren=[],this.kind=vy.STATIC,this._compilePrefixMatch()}getParametricChild(e){let r=e&&e.source,n=this.parametricChildren.find(s=>(s.regex&&s.regex.source)===r);return n||null}createParametricChild(e,r,n){let s=this.getParametricChild(e);return s?(s.nodePaths.add(n),s):(s=new yy(e,r,n),this.parametricChildren.push(s),this.parametricChildren.sort((i,o)=>i.isRegex?o.isRegex?i.staticSuffix===null?1:o.staticSuffix===null?-1:o.staticSuffix.endsWith(i.staticSuffix)?1:i.staticSuffix.endsWith(o.staticSuffix)?-1:0:-1:1),s)}getWildcardChild(){return this.wildcardChild}createWildcardChild(){return this.wildcardChild=this.getWildcardChild()||new _y,this.wildcardChild}split(e,r){let n=this.prefix.slice(0,r),s=this.prefix.slice(r);this.prefix=s,this._compilePrefixMatch();let i=new Tc(n);return i.staticChildren[s.charAt(0)]=this,e.staticChildren[n.charAt(0)]=i,i}getNextNode(e,r,n,s){let i=this.findStaticMatchingChild(e,r),o=0;if(i===null){if(this.parametricChildren.length===0)return this.wildcardChild;i=this.parametricChildren[0],o=1}this.wildcardChild!==null&&n.push({paramsCount:s,brotherPathIndex:r,brotherNode:this.wildcardChild});for(let a=this.parametricChildren.length-1;a>=o;a--)n.push({paramsCount:s,brotherPathIndex:r,brotherNode:this.parametricChildren[a]});return i}_compilePrefixMatch(){if(this.prefix.length===1){this.matchPrefix=()=>!0;return}let e=[];for(let r=1;r<this.prefix.length;r++){let n=this.prefix.charCodeAt(r);e.push(`path.charCodeAt(i + ${r}) === ${n}`)}this.matchPrefix=new Function("path","i",`return ${e.join(" && ")}`)}},yy=class extends gy{constructor(e,r,n){super(),this.isRegex=!!e,this.regex=e||null,this.staticSuffix=r||null,this.kind=vy.PARAMETRIC,this.nodePaths=new Set([n])}getNextNode(e,r){return this.findStaticMatchingChild(e,r)}},_y=class extends my{constructor(){super(),this.kind=vy.WILDCARD}getNextNode(){return null}};wV.exports={StaticNode:Tc,ParametricNode:yy,WildcardNode:_y,NODE_TYPES:vy}});var SV=E((UMe,EV)=>{"use strict";var mbe=require("assert");function Od(){if(!(this instanceof Od))return new Od;this.store=new Map,this.maxMajor=0,this.maxMinors={},this.maxPatches={}}Od.prototype.set=function(t,e){if(typeof t!="string")throw new TypeError("Version should be a string");let[r,n,s]=t.split(".",3);if(isNaN(r))throw new TypeError("Major version must be a numeric value");return r=Number(r),n=Number(n)||0,s=Number(s)||0,r>=this.maxMajor&&(this.maxMajor=r,this.store.set("x",e),this.store.set("*",e),this.store.set("x.x",e),this.store.set("x.x.x",e)),n>=(this.maxMinors[r]||0)&&(this.maxMinors[r]=n,this.store.set(`${r}.x`,e),this.store.set(`${r}.x.x`,e)),s>=(this.maxPatches[`${r}.${n}`]||0)&&(this.maxPatches[`${r}.${n}`]=s,this.store.set(`${r}.${n}.x`,e)),this.store.set(`${r}.${n}.${s}`,e),this};Od.prototype.get=function(t){return this.store.get(t)};EV.exports={name:"version",mustMatchWhenDerived:!0,storage:Od,validate(t){mbe(typeof t=="string","Version should be a string")}}});var RV=E((BMe,TV)=>{"use strict";var gbe=require("assert");function ybe(){let t=new Map,e=[];return{get:r=>{let n=t.get(r);if(n)return n;for(let s of e)if(s.host.test(r))return s.value},set:(r,n)=>{r instanceof RegExp?e.push({host:r,value:n}):t.set(r,n)}}}TV.exports={name:"host",mustMatchWhenDerived:!1,storage:ybe,validate(t){gbe(typeof t=="string"||Object.prototype.toString.call(t)==="[object RegExp]","Host should be a string or a RegExp")}}});var OV=E((zMe,$V)=>{"use strict";var _be=SV(),vbe=RV(),K$=require("assert"),J$=class{constructor(e){if(this.strategies={version:_be,host:vbe},this.strategiesInUse=new Set,this.asyncStrategiesInUse=new Set,e)for(let r of Object.values(e))this.addConstraintStrategy(r)}isStrategyUsed(e){return this.strategiesInUse.has(e)||this.asyncStrategiesInUse.has(e)}hasConstraintStrategy(e){let r=this.strategies[e];return r!==void 0?r.isCustom||this.isStrategyUsed(e):!1}addConstraintStrategy(e){if(K$(typeof e.name=="string"&&e.name!=="","strategy.name is required."),K$(e.storage&&typeof e.storage=="function","strategy.storage function is required."),K$(e.deriveConstraint&&typeof e.deriveConstraint=="function","strategy.deriveConstraint function is required."),this.strategies[e.name]&&this.strategies[e.name].isCustom)throw new Error(`There already exists a custom constraint with the name ${e.name}.`);if(this.isStrategyUsed(e.name))throw new Error(`There already exists a route with ${e.name} constraint.`);e.isCustom=!0,e.isAsync=e.deriveConstraint.length===3,this.strategies[e.name]=e,e.mustMatchWhenDerived&&this.noteUsage({[e.name]:e})}deriveConstraints(e,r,n){let s=this.deriveSyncConstraints(e,r);if(n===void 0)return s;this.deriveAsyncConstraints(s,e,r,n)}deriveSyncConstraints(e,r){}noteUsage(e){if(e){let r=this.strategiesInUse.size;for(let n in e)this.strategies[n].isAsync?this.asyncStrategiesInUse.add(n):this.strategiesInUse.add(n);r!==this.strategiesInUse.size&&this._buildDeriveConstraints()}}newStoreForConstraint(e){if(!this.strategies[e])throw new Error(`No strategy registered for constraint key ${e}`);return this.strategies[e].storage()}validateConstraints(e){for(let r in e){let n=e[r];if(typeof n>"u")throw new Error("Can't pass an undefined constraint value, must pass null or no key at all");let s=this.strategies[r];if(!s)throw new Error(`No strategy registered for constraint key ${r}`);s.validate&&s.validate(n)}}deriveAsyncConstraints(e,r,n,s){let i=this.asyncStrategiesInUse.size;if(i===0){s(null,e);return}e=e||{};for(let o of this.asyncStrategiesInUse)this.strategies[o].deriveConstraint(r,n,(l,c)=>{if(l!==null){s(l);return}e[o]=c,--i===0&&s(null,e)})}_buildDeriveConstraints(){if(this.strategiesInUse.size===0)return;let e=["return {"];for(let r of this.strategiesInUse){let n=this.strategies[r];n.isCustom?e.push(`  ${n.name}: this.strategies.${r}.deriveConstraint(req, ctx),`):r==="version"?e.push("   version: req.headers['accept-version'],"):e.push("   host: req.headers.host || req.headers[':authority'],")}e.push("}"),this.deriveSyncConstraints=new Function("req","ctx",e.join(`
`)).bind(this)}};$V.exports=J$});var xV=E((VMe,PV)=>{"use strict";var wbe=["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","QUERY","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE"];PV.exports=wbe});var IV=E((HMe,CV)=>{"use strict";function NV(t,e){return t===50?e===53?"%":e===51?"#":e===52?"$":e===54?"&":e===66||e===98?"+":e===67||e===99?",":e===70||e===102?"/":null:t===51?e===65||e===97?":":e===66||e===98?";":e===68||e===100?"=":e===70||e===102?"?":null:t===52&&e===48?"@":null}function bbe(t,e){let r=!1,n=!1,s="";for(let o=1;o<t.length;o++){let a=t.charCodeAt(o);if(a===37){let l=t.charCodeAt(o+1),c=t.charCodeAt(o+2);NV(l,c)===null?r=!0:(n=!0,l===50&&c===53&&(r=!0,t=t.slice(0,o+1)+"25"+t.slice(o+1),o+=2),o+=2)}else if(a===63||a===35||a===59&&e){s=t.slice(o+1),t=t.slice(0,o);break}}return{path:r?decodeURI(t):t,querystring:s,shouldDecodeParam:n}}function Ebe(t){let e=t.indexOf("%");if(e===-1)return t;let r="",n=e;for(let s=e;s<t.length;s++)if(t.charCodeAt(s)===37){let i=t.charCodeAt(s+1),o=t.charCodeAt(s+2),a=NV(i,o);r+=t.slice(n,s)+a,n=s+3}return t.slice(0,e)+r+t.slice(n)}CV.exports={safeDecodeURI:bbe,safeDecodeURIComponent:Ebe}});var e1=E((GMe,BV)=>{"use strict";var St=require("assert"),Sbe=Mz(),$c=oV(),X$=Zs(),{prettyPrintTree:Tbe}=pV(),{StaticNode:AV,NODE_TYPES:kV}=bV(),Rbe=OV(),Rc=xV(),Y$=hy(),{safeDecodeURI:$be,safeDecodeURIComponent:DV}=IV(),MV=/^https?:\/\/.*?\//,Ea=/(\/:[^/()]*?)\?(\/?)/,jV=/[.*+?^${}()|[\]\\]/g,qV=/\/\/+/g;if(!$c(MV))throw new Error("the FULL_PATH_REGEXP is not safe, update this module");if(!$c(Ea))throw new Error("the OPTIONAL_PARAM_REGEXP is not safe, update this module");if(!$c(jV))throw new Error("the ESCAPE_REGEXP is not safe, update this module");if(!$c(qV))throw new Error("the REMOVE_DUPLICATE_SLASHES_REGEXP is not safe, update this module");function gt(t){if(!(this instanceof gt))return new gt(t);t=t||{},this._opts=t,t.defaultRoute?(St(typeof t.defaultRoute=="function","The default route must be a function"),this.defaultRoute=t.defaultRoute):this.defaultRoute=null,t.onBadUrl?(St(typeof t.onBadUrl=="function","The bad url handler must be a function"),this.onBadUrl=t.onBadUrl):this.onBadUrl=null,t.buildPrettyMeta?(St(typeof t.buildPrettyMeta=="function","buildPrettyMeta must be a function"),this.buildPrettyMeta=t.buildPrettyMeta):this.buildPrettyMeta=Obe,t.querystringParser?(St(typeof t.querystringParser=="function","querystringParser must be a function"),this.querystringParser=t.querystringParser):this.querystringParser=e=>e.length===0?{}:Sbe.parse(e),this.caseSensitive=t.caseSensitive===void 0?!0:t.caseSensitive,this.ignoreTrailingSlash=t.ignoreTrailingSlash||!1,this.ignoreDuplicateSlashes=t.ignoreDuplicateSlashes||!1,this.maxParamLength=t.maxParamLength||100,this.allowUnsafeRegex=t.allowUnsafeRegex||!1,this.constrainer=new Rbe(t.constraints),this.useSemicolonDelimiter=t.useSemicolonDelimiter||!1,this.routes=[],this.trees={}}gt.prototype.on=function(e,r,n,s,i){typeof n=="function"&&(s!==void 0&&(i=s),s=n,n={}),St(typeof r=="string","Path should be a string"),St(r.length>0,"The path could not be empty"),St(r[0]==="/"||r[0]==="*","The first character of a path should be `/` or `*`"),St(typeof s=="function","Handler should be a function");let o=r.match(Ea);if(o){St(r.length===o.index+o[0].length,"Optional Parameter needs to be the last parameter of the path");let c=r.replace(Ea,"$1$2"),u=r.replace(Ea,"$2")||"/";this.on(e,c,n,s,i),this.on(e,u,n,s,i);return}let a=r;this.ignoreDuplicateSlashes&&(r=Q$(r)),this.ignoreTrailingSlash&&(r=Z$(r));let l=Array.isArray(e)?e:[e];for(let c of l)St(typeof c=="string","Method should be a string"),St(Rc.includes(c),`Method '${c}' is not an http method.`),this._on(c,r,n,s,i,a)};gt.prototype._on=function(e,r,n,s,i){let o={};n.constraints!==void 0&&(St(typeof n.constraints=="object"&&n.constraints!==null,"Constraints should be an object"),Object.keys(n.constraints).length!==0&&(o=n.constraints)),this.constrainer.validateConstraints(o),this.constrainer.noteUsage(o),this.trees[e]===void 0&&(this.trees[e]=new AV("/"));let a=r;if(a==="*"&&this.trees[e].prefix.length!==0){let p=this.trees[e];this.trees[e]=new AV(""),this.trees[e].staticChildren["/"]=p}let l=this.trees[e],c=l.prefix.length,u=[];for(let p=0;p<=a.length;p++){if(a.charCodeAt(p)===58&&a.charCodeAt(p+1)===58){p++;continue}let f=a.charCodeAt(p)===58&&a.charCodeAt(p+1)!==58,h=a.charCodeAt(p)===42;if(f||h||p===a.length&&p!==c){let m=a.slice(c,p);this.caseSensitive||(m=m.toLowerCase()),m=m.replaceAll("::",":"),m=m.replaceAll("%","%25"),l=l.createStaticChild(m)}if(f){let m=!1,y=!0,g="",w=[],_=p+1;for(let v=_;;v++){let S=a.charCodeAt(v),$=S===40,T=S===45||S===46,O=S===47||v===a.length;if($||T||O){let R=a.slice(_,v);if(u.push(R),m=m||$||T,$){let N=UV(a,v),C=a.slice(v,N+1);this.allowUnsafeRegex||St($c(new RegExp(C)),`The regex '${C}' is not safe!`),w.push(FV(C)),v=N+1,y=!0}else w.push(y?"(.*?)":`(${g}|(?:(?!${g}).)*)`),y=!1;let P=v;for(;v<a.length;v++){let N=a.charCodeAt(v);if(N===47)break;if(N===58)if(a.charCodeAt(v+1)===58)v++;else break}let A=a.slice(P,v);if(A&&(A=A.replaceAll("::",":"),A=A.replaceAll("%","%25"),w.push(g=LV(A))),_=v+1,O||a.charCodeAt(v)===47||v===a.length){let N=m?"()"+A:A,C=a.slice(p,v);a=a.slice(0,p+1)+N+a.slice(v),p+=N.length;let z=m?new RegExp("^"+w.join("")+"$"):null;l=l.createParametricChild(z,A||null,C),c=p+1;break}}}}else if(h&&(u.push("*"),l=l.createWildcardChild(),c=p+1,p!==a.length-1))throw new Error("Wildcard must be the last character in the route")}this.caseSensitive||(a=a.toLowerCase()),a==="*"&&(a="/*");for(let p of this.routes){let f=p.opts.constraints||{};if(p.method===e&&p.pattern===a&&X$(f,o))throw new Error(`Method '${e}' already declared for route '${a}' with constraints '${JSON.stringify(o)}'`)}let d={method:e,path:r,pattern:a,params:u,opts:n,handler:s,store:i};this.routes.push(d),l.addRoute(d,this.constrainer)};gt.prototype.hasRoute=function(e,r,n){return this.findRoute(e,r,n)!==null};gt.prototype.findRoute=function(e,r,n={}){if(this.trees[e]===void 0)return null;let s=r,i=this.trees[e],o=i.prefix.length,a=[];for(let l=0;l<=s.length;l++){if(s.charCodeAt(l)===58&&s.charCodeAt(l+1)===58){l++;continue}let c=s.charCodeAt(l)===58&&s.charCodeAt(l+1)!==58,u=s.charCodeAt(l)===42;if(c||u||l===s.length&&l!==o){let d=s.slice(o,l);if(this.caseSensitive||(d=d.toLowerCase()),d=d.replaceAll("::",":"),d=d.replaceAll("%","%25"),i=i.getStaticChild(d),i===null)return null}if(c){let d=!1,p=!0,f="",h=[],m=l+1;for(let y=m;;y++){let g=s.charCodeAt(y),w=g===40,_=g===45||g===46,v=g===47||y===s.length;if(w||_||v){let S=s.slice(m,y);if(a.push(S),d=d||w||_,w){let O=UV(s,y),R=s.slice(y,O+1);this.allowUnsafeRegex||St($c(new RegExp(R)),`The regex '${R}' is not safe!`),h.push(FV(R)),y=O+1,p=!1}else h.push(p?"(.*?)":`(${f}|(?:(?!${f}).)*)`),p=!1;let $=y;for(;y<s.length;y++){let O=s.charCodeAt(y);if(O===47)break;if(O===58)if(s.charCodeAt(y+1)===58)y++;else break}let T=s.slice($,y);if(T&&(T=T.replaceAll("::",":"),T=T.replaceAll("%","%25"),h.push(f=LV(T))),m=y+1,v||s.charCodeAt(y)===47||y===s.length){let O=d?"()"+T:T,R=s.slice(l,y);s=s.slice(0,l+1)+O+s.slice(y),l+=O.length;let P=d?new RegExp("^"+h.join("")+"$"):null;if(i=i.getParametricChild(P,T||null,R),i===null)return null;o=l+1;break}}}}else if(u&&(a.push("*"),i=i.getWildcardChild(),o=l+1,l!==s.length-1))throw new Error("Wildcard must be the last character in the route")}this.caseSensitive||(s=s.toLowerCase());for(let l of this.routes){let c=l.opts.constraints||{};if(l.method===e&&l.pattern===s&&X$(c,n))return{handler:l.handler,store:l.store,params:l.params}}return null};gt.prototype.hasConstraintStrategy=function(t){return this.constrainer.hasConstraintStrategy(t)};gt.prototype.addConstraintStrategy=function(t){this.constrainer.addConstraintStrategy(t),this._rebuild(this.routes)};gt.prototype.reset=function(){this.trees={},this.routes=[]};gt.prototype.off=function(e,r,n){St(typeof r=="string","Path should be a string"),St(r.length>0,"The path could not be empty"),St(r[0]==="/"||r[0]==="*","The first character of a path should be `/` or `*`"),St(typeof n>"u"||typeof n=="object"&&!Array.isArray(n)&&n!==null,"Constraints should be an object or undefined.");let s=r.match(Ea);if(s){St(r.length===s.index+s[0].length,"Optional Parameter needs to be the last parameter of the path");let o=r.replace(Ea,"$1$2"),a=r.replace(Ea,"$2");this.off(e,o,n),this.off(e,a,n);return}this.ignoreDuplicateSlashes&&(r=Q$(r)),this.ignoreTrailingSlash&&(r=Z$(r));let i=Array.isArray(e)?e:[e];for(let o of i)this._off(o,r,n)};gt.prototype._off=function(e,r,n){St(typeof e=="string","Method should be a string"),St(Rc.includes(e),`Method '${e}' is not an http method.`);function s(l){return e!==l.method||r!==l.path}function i(l){return s(l)||!X$(n,l.opts.constraints||{})}let o=n?i:s,a=this.routes.filter(o);this._rebuild(a)};gt.prototype.lookup=function(e,r,n,s){if(typeof n=="function"&&(s=n,n=void 0),s===void 0){let i=this.constrainer.deriveConstraints(e,n),o=this.find(e.method,e.url,i);return this.callHandler(o,e,r,n)}this.constrainer.deriveConstraints(e,n,(i,o)=>{if(i!==null){s(i);return}try{let a=this.find(e.method,e.url,o),l=this.callHandler(a,e,r,n);s(null,l)}catch(a){s(a)}})};gt.prototype.callHandler=function(e,r,n,s){return e===null?this._defaultRoute(r,n,s):s===void 0?e.handler(r,n,e.params,e.store,e.searchParams):e.handler.call(s,r,n,e.params,e.store,e.searchParams)};gt.prototype.find=function(e,r,n){let s=this.trees[e];if(s===void 0)return null;r.charCodeAt(0)!==47&&(r=r.replace(MV,"/")),this.ignoreDuplicateSlashes&&(r=Q$(r));let i,o,a;try{i=$be(r,this.useSemicolonDelimiter),r=i.path,o=i.querystring,a=i.shouldDecodeParam}catch{return this._onBadUrl(r)}this.ignoreTrailingSlash&&(r=Z$(r));let l=r;this.caseSensitive===!1&&(r=r.toLowerCase());let c=this.maxParamLength,u=s.prefix.length,d=[],p=r.length,f=[];for(;;){if(u===p&&s.isLeafNode){let g=s.handlerStorage.getMatchingHandler(n);if(g!==null)return{handler:g.handler,store:g.store,params:g._createParamsObject(d),searchParams:this.querystringParser(o)}}let h=s.getNextNode(r,u,f,d.length);if(h===null){if(f.length===0)return null;let g=f.pop();u=g.brotherPathIndex,d.splice(g.paramsCount),h=g.brotherNode}if(s=h,s.kind===kV.STATIC){u+=s.prefix.length;continue}if(s.kind===kV.WILDCARD){let g=l.slice(u);a&&(g=DV(g)),d.push(g),u=p;continue}let m=l.indexOf("/",u);m===-1&&(m=p);let y=l.slice(u,m);if(a&&(y=DV(y)),s.isRegex){let g=s.regex.exec(y);if(g===null)continue;for(let w=1;w<g.length;w++){let _=g[w];if(_.length>c)return null;d.push(_)}}else{if(y.length>c)return null;d.push(y)}u=m}};gt.prototype._rebuild=function(t){this.reset();for(let e of t){let{method:r,path:n,opts:s,handler:i,store:o}=e;this._on(r,n,s,i,o)}};gt.prototype._defaultRoute=function(t,e,r){if(this.defaultRoute!==null)return r===void 0?this.defaultRoute(t,e):this.defaultRoute.call(r,t,e);e.statusCode=404,e.end()};gt.prototype._onBadUrl=function(t){if(this.onBadUrl===null)return null;let e=this.onBadUrl;return{handler:(r,n,s)=>e(t,r,n),params:{},store:null}};gt.prototype.prettyPrint=function(t={}){let e=t.method;t.buildPrettyMeta=this.buildPrettyMeta.bind(this);let r=null;if(e===void 0){let{version:n,host:s,...i}=this.constrainer.strategies;i[Y$.name]=Y$;let o=new gt({...this._opts,constraints:i}),a=this.routes.map(l=>{let c={...l.opts.constraints,[Y$.name]:l.method};return{...l,method:"MERGED",opts:{constraints:c}}});o._rebuild(a),r=o.trees.MERGED}else r=this.trees[e];return r==null?"(empty tree)":Tbe(r,t)};for(let t in Rc){if(!Rc.hasOwnProperty(t))continue;let e=Rc[t],r=e.toLowerCase();gt.prototype[r]=function(n,s,i){return this.on(e,n,s,i)}}gt.prototype.all=function(t,e,r){this.on(Rc,t,e,r)};BV.exports=gt;function LV(t){return t.replace(jV,"\\$&")}function Q$(t){return t.indexOf("//")!==-1?t.replace(qV,"/"):t}function Z$(t){return t.length>1&&t.charCodeAt(t.length-1)===47?t.slice(0,-1):t}function FV(t){return t.charCodeAt(1)===94&&(t=t.slice(0,1)+t.slice(2)),t.charCodeAt(t.length-2)===36&&(t=t.slice(0,t.length-2)+t.slice(t.length-1)),t}function UV(t,e){let r=1;for(;e<t.length;){if(e++,t.charCodeAt(e)===92){e++;continue}if(t.charCodeAt(e)===41?r--:t.charCodeAt(e)===40&&r++,!r)return e}throw new TypeError('Invalid regexp expression in "'+t+'"')}function Obe(t){return t?t.store?Object.assign({},t.store):{}:{}}});var VV=E((WMe,zV)=>{"use strict";function t1(t,e,r,n){if(r===void 0){e.header("content-length","0"),n(null,null);return}if(typeof r.resume=="function"){r.on("error",i=>{e.log.error({err:i},"Error on Stream found for HEAD route")}),r.resume(),n(null,null);return}if(typeof r.getReader=="function"){r.cancel("Stream cancelled by HEAD route").catch(i=>{e.log.error({err:i},"Error on Stream found for HEAD route")}),n(null,null);return}let s=""+Buffer.byteLength(r);e.header("content-length",s),n(null,null)}function Pbe(t){return t==null?t1:Array.isArray(t)?[...t,t1]:[t,t1]}zV.exports={parseHeadOnSendHandlers:Pbe}});var a4=E((KMe,o4)=>{"use strict";var xbe=e1(),Nbe=jp(),HV=J_(),{onRequestAbortHookRunner:Cbe,lifecycleHooks:GV,preParsingHookRunner:Ibe,onTimeoutHookRunner:Abe,onRequestHookRunner:kbe}=Ci(),{normalizeSchema:Dbe}=_u(),{parseHeadOnSendHandlers:Mbe}=VV(),{compileSchemasForValidation:jbe,compileSchemasForSerialization:qbe}=V_(),{FST_ERR_SCH_VALIDATION_BUILD:Lbe,FST_ERR_SCH_SERIALIZATION_BUILD:Fbe,FST_ERR_DUPLICATED_ROUTE:Ube,FST_ERR_INVALID_URL:Bbe,FST_ERR_HOOK_INVALID_HANDLER:WV,FST_ERR_ROUTE_OPTIONS_NOT_OBJ:zbe,FST_ERR_ROUTE_DUPLICATED_HANDLER:Vbe,FST_ERR_ROUTE_HANDLER_NOT_FN:KV,FST_ERR_ROUTE_MISSING_HANDLER:Hbe,FST_ERR_ROUTE_METHOD_NOT_SUPPORTED:Gbe,FST_ERR_ROUTE_METHOD_INVALID:Wbe,FST_ERR_ROUTE_BODY_VALIDATION_SCHEMA_NOT_SUPPORTED:Kbe,FST_ERR_ROUTE_BODY_LIMIT_OPTION_NOT_INT:Jbe,FST_ERR_HOOK_INVALID_ASYNC_HANDLER:r1}=Vt(),{FSTDEP022:Ybe}=sl(),{kRoutePrefix:Xbe,kSupportedHTTPMethods:i1,kLogLevel:Qbe,kLogSerializers:JV,kHooks:YV,kSchemaController:Zbe,kOptions:XV,kReplySerializerDefault:n1,kReplyIsError:eEe,kRequestPayloadStream:tEe,kDisableRequestLogging:rEe,kSchemaErrorFormatter:nEe,kErrorHandler:QV,kHasBeenDecorated:ZV,kRequestAcceptVersion:s1,kRouteByFastify:sEe,kRouteContext:e4}=Nt(),{buildErrorHandler:iEe}=vu(),{createChildLogger:oEe}=yu(),{getGenReqId:aEe}=ny(),t4=["allowUnsafeRegex","buildPrettyMeta","caseSensitive","constraints","defaultRoute","ignoreDuplicateSlashes","ignoreTrailingSlash","maxParamLength","onBadUrl","querystringParser","useSemicolonDelimiter"];function lEe(t){let e=xbe(t.config),r,n,s,i,o,a,l,c,u,d,p,f,h=!1;return{setup(T,O){r=O.avvio,n=O.fourOhFour,i=O.hasLogger,o=O.setupResponseListeners,a=O.throwIfAlreadyStarted,s=T.logger,p=T.exposeHeadRoutes,l=T.disableRequestLogging,c=T.routerOptions.ignoreTrailingSlash,u=T.routerOptions.ignoreDuplicateSlashes,d=Object.hasOwn(T,"return503OnClosing")?T.return503OnClosing:!0,f=O.keepAliveConnections},routing:e.lookup.bind(e),route:S,hasRoute:_,prepareRoute:w,routeHandler:$,closeRoutes:()=>{h=!0},printRoutes:e.prettyPrint.bind(e),addConstraintStrategy:m,hasConstraintStrategy:y,isAsyncConstraint:g,findRoute:v};function m(T){return a("Cannot add constraint strategy!"),e.addConstraintStrategy(T)}function y(T){return e.hasConstraintStrategy(T)}function g(){return e.constrainer.asyncStrategiesInUse.size>0}function w({method:T,url:O,options:R,handler:P,isFastify:A}){if(typeof O!="string")throw new Bbe(typeof O);if(!P&&typeof R=="function")P=R,R={};else if(P&&typeof P=="function"){if(Object.prototype.toString.call(R)!=="[object Object]")throw new zbe(T,O);if(R.handler)throw typeof R.handler=="function"?new Vbe(T,O):new KV(T,O)}return R=Object.assign({},R,{method:T,url:O,path:O,handler:P||R&&R.handler}),S.call(this,{options:R,isFastify:A})}function _({options:T}){let O=T.method?.toUpperCase()??"";return e.hasRoute(O,T.url||"",T.constraints)}function v(T){let O=e.find(T.method,T.url||"",T.constraints);return O?{handler:O.handler,params:O.params,searchParams:O.searchParams}:null}function S({options:T,isFastify:O}){a("Cannot add route!");let R={...T},P=R.url||R.path||"";if(!R.handler)throw new Hbe(R.method,P);if(R.errorHandler!==void 0&&typeof R.errorHandler!="function")throw new KV(R.method,P);i4(R.bodyLimit);let A=R.exposeHeadRoute??p,N=!1,C=!1;if(Array.isArray(R.method))for(let K=0;K<R.method.length;++K)R.method[K]=r4.call(this,R.method[K]),n4.call(this,R.method[K],P,R.schema),N=R.method.includes("GET"),C=R.method.includes("HEAD");else R.method=r4.call(this,R.method),n4.call(this,R.method,P,R.schema),N=R.method==="GET",C=R.method==="HEAD";let z=A&&N?{...T}:null,te=this[Xbe];if(P==="/"&&te.length>0&&R.method!=="HEAD")switch(R.prefixTrailingSlash){case"slash":H.call(this,{path:P,isFastify:O});break;case"no-slash":H.call(this,{path:"",isFastify:O});break;case"both":default:H.call(this,{path:"",isFastify:O}),c!==!0&&(u!==!0||!te.endsWith("/"))&&H.call(this,{path:P,prefixing:!0,isFastify:O})}else P[0]==="/"&&te.endsWith("/")?H.call(this,{path:P.slice(1),isFastify:O}):H.call(this,{path:P,isFastify:O});return this;function H({path:K,prefixing:xt=!1,isFastify:Ar=!1}){let Y=te+K;if(R.url=Y,R.path=Y,R.routePath=K,R.prefix=te,R.logLevel=R.logLevel||this[Qbe],(this[JV]||R.logSerializers)&&(R.logSerializers=Object.assign(Object.create(this[JV]),R.logSerializers)),R.attachValidation==null&&(R.attachValidation=!1),xt===!1)for(let x of this[YV].onRoute)x.call(this,R);for(let x of GV)if(R&&x in R){if(Array.isArray(R[x]))for(let D of R[x]){if(typeof D!="function")throw new WV(x,Object.prototype.toString.call(D));if(x==="onSend"||x==="preSerialization"||x==="onError"||x==="preParsing"){if(D.constructor.name==="AsyncFunction"&&D.length===4)throw new r1}else if(x==="onRequestAbort"){if(D.constructor.name==="AsyncFunction"&&D.length!==1)throw new r1}else if(D.constructor.name==="AsyncFunction"&&D.length===3)throw new r1}else if(R[x]!==void 0&&typeof R[x]!="function")throw new WV(x,Object.prototype.toString.call(R[x]))}let cs=R.constraints||{},Oo={...R.config,url:Y,method:R.method},re=new Nbe({schema:R.schema,handler:R.handler.bind(this),config:Oo,errorHandler:R.errorHandler,childLoggerFactory:R.childLoggerFactory,bodyLimit:R.bodyLimit,logLevel:R.logLevel,logSerializers:R.logSerializers,attachValidation:R.attachValidation,schemaErrorFormatter:R.schemaErrorFormatter,replySerializer:this[n1],validatorCompiler:R.validatorCompiler,serializerCompiler:R.serializerCompiler,exposeHeadRoute:A,prefixTrailingSlash:R.prefixTrailingSlash||"both",server:this,isFastify:Ar}),Po=e.findRoute("HEAD",R.url,cs)!==null;try{e.on(R.method,R.url,{constraints:cs},$,re)}catch(x){if(!re[sEe])throw x.message.includes(`Method '${R.method}' already declared for route`)?new Ube(R.method,R.url):x}if(this.after((x,D)=>{re.errorHandler=R.errorHandler?iEe(this[QV],R.errorHandler):this[QV],re._parserOptions.limit=R.bodyLimit||null,re.logLevel=R.logLevel,re.logSerializers=R.logSerializers,re.attachValidation=R.attachValidation,re[n1]=this[n1],re.schemaErrorFormatter=R.schemaErrorFormatter||this[nEe]||re.schemaErrorFormatter,r.once("preReady",()=>{for(let V of GV){let B=this[YV][V].concat(R[V]||[]).map(ct=>ct.bind(this));re[V]=B.length?B:null}for(;!re.Request[ZV]&&re.Request.parent;)re.Request=re.Request.parent;for(;!re.Reply[ZV]&&re.Reply.parent;)re.Reply=re.Reply.parent;if(n.setContext(this,re),R.schema){re.schema=Dbe(re.schema,this.initialConfig);let V=this[Zbe];!R.validatorCompiler&&(R.schema.body||R.schema.headers||R.schema.querystring||R.schema.params)&&V.setupValidator(this[XV]);try{let B=typeof R?.validatorCompiler=="function"||V.isCustomValidatorCompiler;jbe(re,R.validatorCompiler||V.validatorCompiler,B)}catch(B){throw new Lbe(R.method,Y,B.message)}R.schema.response&&!R.serializerCompiler&&V.setupSerializer(this[XV]);try{qbe(re,R.serializerCompiler||V.serializerCompiler)}catch(B){throw new Fbe(R.method,Y,B.message)}}}),D(x)}),A&&N&&!C&&!Po){let x=Mbe(z.onSend);w.call(this,{method:"HEAD",url:K,options:{...z,onSend:x},isFastify:!0})}}}function $(T,O,R,P,A){let N=aEe(P.server,T),C={level:P.logLevel};P.logSerializers&&(C.serializers=P.logSerializers);let z=oEe(P,s,T,N,C);if(z[rEe]=l,h===!0&&(T.httpVersionMajor!==2&&O.setHeader("Connection","close"),d)){let xt={"Content-Type":"application/json","Content-Length":"80"};O.writeHead(503,xt),O.end('{"error":"Service Unavailable","message":"Service Unavailable","statusCode":503}'),z.info({res:{statusCode:503}},"request aborted - refusing to accept new requests as server is closing");return}String.prototype.toLowerCase.call(T.headers.connection||"")==="keep-alive"&&f.has(T.socket)===!1&&(f.add(T.socket),T.socket.on("close",dEe.bind({keepAliveConnections:f,socket:T.socket}))),T.headers[s1]!==void 0&&(T.headers["accept-version"]=T.headers[s1],T.headers[s1]=void 0);let H=new P.Request(N,R,T,A,z,P),K=new P.Reply(O,H,z);l===!1&&z.info({req:H},"incoming request"),(i===!0||P.onResponse!==null)&&o(K),P.onRequest!==null?kbe(P.onRequest,H,K,s4):s4(null,H,K),P.onRequestAbort!==null&&T.on("close",()=>{T.aborted&&Cbe(P.onRequestAbort,H,cEe.bind(null,K))}),P.onTimeout!==null&&(H.raw.socket._meta||H.raw.socket.on("timeout",uEe),H.raw.socket._meta={context:P,request:H,reply:K})}}function cEe(t,e){e&&t.log.error({err:e},"onRequestAborted hook failed")}function uEe(){let{context:t,request:e,reply:r}=this._meta;Abe(t.onTimeout,e,r,hEe)}function r4(t){if(typeof t!="string")throw new Wbe;if(t=t.toUpperCase(),!this[i1].bodyless.has(t)&&!this[i1].bodywith.has(t))throw new Gbe(t);return t}function n4(t,e,r){if(this[i1].bodyless.has(t)&&r?.body)throw new Kbe(t,e)}function i4(t){if(t!==void 0&&(!Number.isInteger(t)||t<=0))throw new Jbe(t)}function s4(t,e,r){if(r.sent!==!0){if(t!=null){r[eEe]=!0,r.send(t);return}e[tEe]=e.raw,e[e4].preParsing!==null?Ibe(e[e4].preParsing,e,r,HV.bind(e.server)):HV.call(e.server,null,e,r)}}function fEe(t,e){let r=t.routerOptions||Object.create(null),n=t4.filter(s=>Object.hasOwn(t,s));n.length>0&&Ybe(n.join(", "));for(let s of t4)Object.hasOwn(r,s)||(r[s]=t[s]??e[s]);return r}function dEe(){this.keepAliveConnections.delete(this.socket)}function hEe(){}o4.exports={buildRouting:lEe,validateBodyLimitOption:i4,buildRouterOptions:fEe}});var p4=E((JMe,h4)=>{"use strict";var pEe=e1(),l4=Np(),c4=Mp(),mEe=jp(),{kRoutePrefix:gEe,kCanSetNotFoundHandler:Pd,kFourOhFourLevelInstance:xd,kFourOhFourContext:ks,kHooks:yEe,kErrorHandler:u4}=Nt(),{lifecycleHooks:_Ee}=Ci(),{buildErrorHandler:vEe}=vu(),{FST_ERR_NOT_FOUND:wEe}=Vt(),{createChildLogger:f4}=yu(),{getGenReqId:d4}=ny();function bEe(t){let{logger:e,disableRequestLogging:r}=t,n=pEe({onBadUrl:a(),defaultRoute:d}),s=null;return{router:n,setNotFoundHandler:c,setContext:l,arrange404:i};function i(p){p[xd]=p,p[Pd]=!0,n.onBadUrl=n.onBadUrl.bind(p),n.defaultRoute=n.defaultRoute.bind(p)}function o(p,f){let{url:h,method:m}=p.raw,y=`Route ${m}:${h} not found`;r||p.log.info(y),f.code(404).send({message:y,error:"Not Found",statusCode:404})}function a(){return function(f,h,m){let y=this[xd][ks],g=d4(y.server,h),w=f4(y,e,h,g),_=new c4(g,null,h,null,w,y),v=new l4(m,_,w);s(_,v)}}function l(p,f){let h=Object.assign({},p[ks]);h.onSend=f.onSend,f[ks]=h}function c(p,f,h,m){this[Pd]===void 0&&(this[Pd]=!0),this[ks]===void 0&&(this[ks]=null);let y=this,g=this[gEe]||"/";if(this[Pd]===!1)throw new Error(`Not found handler already set for Fastify instance with prefix: '${g}'`);typeof p=="object"&&(p.preHandler&&(Array.isArray(p.preHandler)?p.preHandler=p.preHandler.map(w=>w.bind(y)):p.preHandler=p.preHandler.bind(y)),p.preValidation&&(Array.isArray(p.preValidation)?p.preValidation=p.preValidation.map(w=>w.bind(y)):p.preValidation=p.preValidation.bind(y))),typeof p=="function"&&(f=p,p=void 0),p=p||{},f?(this[xd][Pd]=!1,f=f.bind(this),s=f):(f=o,s=o),this.after((w,_)=>{u.call(this,g,p,f,h,m),_(w)})}function u(p,f,h,m,y){let g=new mEe({schema:f.schema,handler:h,config:f.config||{},server:this});if(m.once("preReady",()=>{let w=this[ks];for(let _ of _Ee){let v=this[yEe][_].concat(f[_]||[]).map(S=>S.bind(this));w[_]=v.length?v:null}w.errorHandler=f.errorHandler?vEe(this[u4],f.errorHandler):this[u4]}),this[ks]!==null&&p==="/"){Object.assign(this[ks],g);return}this[xd][ks]=g,n.all(p+(p.endsWith("/")?"*":"/*"),y,g),n.all(p,y,g)}function d(p,f){let h=this[xd][ks],m=d4(h.server,p),y=f4(h,e,p,m);y.info({req:p},"incoming request");let g=new c4(m,null,p,null,y,h),w=new l4(f,g,y);g.log.warn("the default handler for 404 did not catch this, this is likely a fastify bug, please report it"),g.log.warn(n.prettyPrint()),w.code(404).send(new wEe)}}h4.exports=bEe});var m4=E((YMe,wy)=>{"use strict";wy.exports=Pe;wy.exports.default=Pe;var EEe={type:"object",additionalProperties:!1,properties:{connectionTimeout:{type:"integer",default:0},keepAliveTimeout:{type:"integer",default:72e3},forceCloseConnections:{oneOf:[{type:"string",pattern:"idle"},{type:"boolean"}]},maxRequestsPerSocket:{type:"integer",default:0,nullable:!0},requestTimeout:{type:"integer",default:0},bodyLimit:{type:"integer",default:1048576},caseSensitive:{type:"boolean",default:!0},allowUnsafeRegex:{type:"boolean",default:!1},http2:{type:"boolean"},https:{if:{not:{oneOf:[{type:"boolean"},{type:"null"},{type:"object",additionalProperties:!1,required:["allowHTTP1"],properties:{allowHTTP1:{type:"boolean"}}}]}},then:{setDefaultValue:!0}},ignoreTrailingSlash:{type:"boolean",default:!1},ignoreDuplicateSlashes:{type:"boolean",default:!1},disableRequestLogging:{type:"boolean",default:!1},maxParamLength:{type:"integer",default:100},onProtoPoisoning:{type:"string",default:"error"},onConstructorPoisoning:{type:"string",default:"error"},pluginTimeout:{type:"integer",default:1e4},requestIdHeader:{anyOf:[{type:"boolean"},{type:"string"}],default:!1},requestIdLogLabel:{type:"string",default:"reqId"},http2SessionTimeout:{type:"integer",default:72e3},exposeHeadRoutes:{type:"boolean",default:!0},useSemicolonDelimiter:{type:"boolean",default:!1},routerOptions:{type:"object",additionalProperties:!1,properties:{ignoreTrailingSlash:{type:"boolean",default:!1},ignoreDuplicateSlashes:{type:"boolean",default:!1},maxParamLength:{type:"integer",default:100},allowUnsafeRegex:{type:"boolean",default:!1},useSemicolonDelimiter:{type:"boolean",default:!1}}},constraints:{type:"object",additionalProperties:{type:"object",required:["name","storage","validate","deriveConstraint"],additionalProperties:!0,properties:{name:{type:"string"},storage:{},validate:{},deriveConstraint:{}}}}}},SEe=Object.prototype.hasOwnProperty,TEe=new RegExp("idle","u");function Pe(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(o===0)if(t&&typeof t=="object"&&!Array.isArray(t)){t.connectionTimeout===void 0&&(t.connectionTimeout=0),t.keepAliveTimeout===void 0&&(t.keepAliveTimeout=72e3),t.maxRequestsPerSocket===void 0&&(t.maxRequestsPerSocket=0),t.requestTimeout===void 0&&(t.requestTimeout=0),t.bodyLimit===void 0&&(t.bodyLimit=1048576),t.caseSensitive===void 0&&(t.caseSensitive=!0),t.allowUnsafeRegex===void 0&&(t.allowUnsafeRegex=!1),t.ignoreTrailingSlash===void 0&&(t.ignoreTrailingSlash=!1),t.ignoreDuplicateSlashes===void 0&&(t.ignoreDuplicateSlashes=!1),t.disableRequestLogging===void 0&&(t.disableRequestLogging=!1),t.maxParamLength===void 0&&(t.maxParamLength=100),t.onProtoPoisoning===void 0&&(t.onProtoPoisoning="error"),t.onConstructorPoisoning===void 0&&(t.onConstructorPoisoning="error"),t.pluginTimeout===void 0&&(t.pluginTimeout=1e4),t.requestIdHeader===void 0&&(t.requestIdHeader=!1),t.requestIdLogLabel===void 0&&(t.requestIdLogLabel="reqId"),t.http2SessionTimeout===void 0&&(t.http2SessionTimeout=72e3),t.exposeHeadRoutes===void 0&&(t.exposeHeadRoutes=!0),t.useSemicolonDelimiter===void 0&&(t.useSemicolonDelimiter=!1);let m=o;for(let y in t)SEe.call(EEe.properties,y)||delete t[y];if(m===o){let y=t.connectionTimeout,g=o;if(!(typeof y=="number"&&!(y%1)&&!isNaN(y)&&isFinite(y))){let w=typeof y,_;if(_===void 0)if(w==="boolean"||y===null||w==="string"&&y&&y==+y&&!(y%1))_=+y;else return Pe.errors=[{instancePath:e+"/connectionTimeout",schemaPath:"#/properties/connectionTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;_!==void 0&&(y=_,t!==void 0&&(t.connectionTimeout=_))}var a=g===o;if(a){let w=t.keepAliveTimeout,_=o;if(!(typeof w=="number"&&!(w%1)&&!isNaN(w)&&isFinite(w))){let S=typeof w,$;if($===void 0)if(S==="boolean"||w===null||S==="string"&&w&&w==+w&&!(w%1))$=+w;else return Pe.errors=[{instancePath:e+"/keepAliveTimeout",schemaPath:"#/properties/keepAliveTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;$!==void 0&&(w=$,t!==void 0&&(t.keepAliveTimeout=$))}var a=_===o;if(a){if(t.forceCloseConnections!==void 0){let S=t.forceCloseConnections,$=o,T=o,O=!1,R=null,P=o;if(typeof S!="string"){let C=typeof S,z;if(z===void 0)if(C=="number"||C=="boolean")z=""+S;else if(S===null)z="";else{let te={instancePath:e+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[te]:i.push(te),o++}z!==void 0&&(S=z,t!==void 0&&(t.forceCloseConnections=z))}if(o===P&&typeof S=="string"&&!TEe.test(S)){let C={instancePath:e+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf/0/pattern",keyword:"pattern",params:{pattern:"idle"},message:'must match pattern "idle"'};i===null?i=[C]:i.push(C),o++}var l=P===o;l&&(O=!0,R=0);let A=o;if(typeof S!="boolean"){let C;if(C===void 0)if(S==="false"||S===0||S===null)C=!1;else if(S==="true"||S===1)C=!0;else{let z={instancePath:e+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf/1/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};i===null?i=[z]:i.push(z),o++}C!==void 0&&(S=C,t!==void 0&&(t.forceCloseConnections=C))}var l=A===o;if(l&&O?(O=!1,R=[R,1]):l&&(O=!0,R=1),O)o=T,i!==null&&(T?i.length=T:i=null);else{let C={instancePath:e+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf",keyword:"oneOf",params:{passingSchemas:R},message:"must match exactly one schema in oneOf"};return i===null?i=[C]:i.push(C),o++,Pe.errors=i,!1}var a=$===o}else var a=!0;if(a){let S=t.maxRequestsPerSocket,$=o;if(!(typeof S=="number"&&!(S%1)&&!isNaN(S)&&isFinite(S))&&S!==null){let O=typeof S,R;if(R===void 0)if(O==="boolean"||S===null||O==="string"&&S&&S==+S&&!(S%1))R=+S;else if(S===""||S===0||S===!1)R=null;else return Pe.errors=[{instancePath:e+"/maxRequestsPerSocket",schemaPath:"#/properties/maxRequestsPerSocket/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;R!==void 0&&(S=R,t!==void 0&&(t.maxRequestsPerSocket=R))}var a=$===o;if(a){let O=t.requestTimeout,R=o;if(!(typeof O=="number"&&!(O%1)&&!isNaN(O)&&isFinite(O))){let A=typeof O,N;if(N===void 0)if(A==="boolean"||O===null||A==="string"&&O&&O==+O&&!(O%1))N=+O;else return Pe.errors=[{instancePath:e+"/requestTimeout",schemaPath:"#/properties/requestTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;N!==void 0&&(O=N,t!==void 0&&(t.requestTimeout=N))}var a=R===o;if(a){let A=t.bodyLimit,N=o;if(!(typeof A=="number"&&!(A%1)&&!isNaN(A)&&isFinite(A))){let z=typeof A,te;if(te===void 0)if(z==="boolean"||A===null||z==="string"&&A&&A==+A&&!(A%1))te=+A;else return Pe.errors=[{instancePath:e+"/bodyLimit",schemaPath:"#/properties/bodyLimit/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;te!==void 0&&(A=te,t!==void 0&&(t.bodyLimit=te))}var a=N===o;if(a){let z=t.caseSensitive,te=o;if(typeof z!="boolean"){let K;if(K===void 0)if(z==="false"||z===0||z===null)K=!1;else if(z==="true"||z===1)K=!0;else return Pe.errors=[{instancePath:e+"/caseSensitive",schemaPath:"#/properties/caseSensitive/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;K!==void 0&&(z=K,t!==void 0&&(t.caseSensitive=K))}var a=te===o;if(a){let K=t.allowUnsafeRegex,xt=o;if(typeof K!="boolean"){let Y;if(Y===void 0)if(K==="false"||K===0||K===null)Y=!1;else if(K==="true"||K===1)Y=!0;else return Pe.errors=[{instancePath:e+"/allowUnsafeRegex",schemaPath:"#/properties/allowUnsafeRegex/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;Y!==void 0&&(K=Y,t!==void 0&&(t.allowUnsafeRegex=Y))}var a=xt===o;if(a){if(t.http2!==void 0){let Y=t.http2,cs=o;if(typeof Y!="boolean"){let re;if(re===void 0)if(Y==="false"||Y===0||Y===null)re=!1;else if(Y==="true"||Y===1)re=!0;else return Pe.errors=[{instancePath:e+"/http2",schemaPath:"#/properties/http2/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;re!==void 0&&(Y=re,t!==void 0&&(t.http2=re))}var a=cs===o}else var a=!0;if(a){if(t.https!==void 0){let Y=t.https,cs=o,Oo=o,re=!0,Ja=o,Po=o,x=o,D=o,V=!1,B=null,ct=o;if(typeof Y!="boolean"){let le;if(le===void 0)if(Y==="false"||Y===0||Y===null)le=!1;else if(Y==="true"||Y===1)le=!0;else{let Mn={};i===null?i=[Mn]:i.push(Mn),o++}le!==void 0&&(Y=le,t!==void 0&&(t.https=le))}var c=ct===o;c&&(V=!0,B=0);let ft=o;if(Y!==null){let le;if(le===void 0)if(Y===""||Y===0||Y===!1)le=null;else{let Mn={};i===null?i=[Mn]:i.push(Mn),o++}le!==void 0&&(Y=le,t!==void 0&&(t.https=le))}var c=ft===o;if(c&&V)V=!1,B=[B,1];else{c&&(V=!0,B=1);let le=o;if(o===le)if(Y&&typeof Y=="object"&&!Array.isArray(Y)){let vr;if(Y.allowHTTP1===void 0&&(vr="allowHTTP1")){let Zr={};i===null?i=[Zr]:i.push(Zr),o++}else{let Zr=o;for(let us in Y)us!=="allowHTTP1"&&delete Y[us];if(Zr===o&&Y.allowHTTP1!==void 0){let us=Y.allowHTTP1;if(typeof us!="boolean"){let pt;if(pt===void 0)if(us==="false"||us===0||us===null)pt=!1;else if(us==="true"||us===1)pt=!0;else{let jn={};i===null?i=[jn]:i.push(jn),o++}pt!==void 0&&(us=pt,Y!==void 0&&(Y.allowHTTP1=pt))}}}}else{let vr={};i===null?i=[vr]:i.push(vr),o++}var c=le===o;c&&V?(V=!1,B=[B,2]):c&&(V=!0,B=2)}if(V)o=D,i!==null&&(D?i.length=D:i=null);else{let le={};i===null?i=[le]:i.push(le),o++}var u=x===o;if(u){let le={};i===null?i=[le]:i.push(le),o++}else o=Po,i!==null&&(Po?i.length=Po:i=null);var d=Ja===o;if(o=Oo,i!==null&&(Oo?i.length=Oo:i=null),d){let le=o;t.https=!0;var d=le===o;re=d}if(!re){let le={instancePath:e+"/https",schemaPath:"#/properties/https/if",keyword:"if",params:{failingKeyword:"then"},message:'must match "then" schema'};return i===null?i=[le]:i.push(le),o++,Pe.errors=i,!1}var a=cs===o}else var a=!0;if(a){let Y=t.ignoreTrailingSlash,cs=o;if(typeof Y!="boolean"){let re;if(re===void 0)if(Y==="false"||Y===0||Y===null)re=!1;else if(Y==="true"||Y===1)re=!0;else return Pe.errors=[{instancePath:e+"/ignoreTrailingSlash",schemaPath:"#/properties/ignoreTrailingSlash/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;re!==void 0&&(Y=re,t!==void 0&&(t.ignoreTrailingSlash=re))}var a=cs===o;if(a){let re=t.ignoreDuplicateSlashes,Ja=o;if(typeof re!="boolean"){let x;if(x===void 0)if(re==="false"||re===0||re===null)x=!1;else if(re==="true"||re===1)x=!0;else return Pe.errors=[{instancePath:e+"/ignoreDuplicateSlashes",schemaPath:"#/properties/ignoreDuplicateSlashes/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;x!==void 0&&(re=x,t!==void 0&&(t.ignoreDuplicateSlashes=x))}var a=Ja===o;if(a){let x=t.disableRequestLogging,D=o;if(typeof x!="boolean"){let B;if(B===void 0)if(x==="false"||x===0||x===null)B=!1;else if(x==="true"||x===1)B=!0;else return Pe.errors=[{instancePath:e+"/disableRequestLogging",schemaPath:"#/properties/disableRequestLogging/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;B!==void 0&&(x=B,t!==void 0&&(t.disableRequestLogging=B))}var a=D===o;if(a){let B=t.maxParamLength,ct=o;if(!(typeof B=="number"&&!(B%1)&&!isNaN(B)&&isFinite(B))){let It=typeof B,le;if(le===void 0)if(It==="boolean"||B===null||It==="string"&&B&&B==+B&&!(B%1))le=+B;else return Pe.errors=[{instancePath:e+"/maxParamLength",schemaPath:"#/properties/maxParamLength/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;le!==void 0&&(B=le,t!==void 0&&(t.maxParamLength=le))}var a=ct===o;if(a){let It=t.onProtoPoisoning,le=o;if(typeof It!="string"){let vr=typeof It,Zr;if(Zr===void 0)if(vr=="number"||vr=="boolean")Zr=""+It;else if(It===null)Zr="";else return Pe.errors=[{instancePath:e+"/onProtoPoisoning",schemaPath:"#/properties/onProtoPoisoning/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;Zr!==void 0&&(It=Zr,t!==void 0&&(t.onProtoPoisoning=Zr))}var a=le===o;if(a){let vr=t.onConstructorPoisoning,Zr=o;if(typeof vr!="string"){let pt=typeof vr,jn;if(jn===void 0)if(pt=="number"||pt=="boolean")jn=""+vr;else if(vr===null)jn="";else return Pe.errors=[{instancePath:e+"/onConstructorPoisoning",schemaPath:"#/properties/onConstructorPoisoning/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;jn!==void 0&&(vr=jn,t!==void 0&&(t.onConstructorPoisoning=jn))}var a=Zr===o;if(a){let pt=t.pluginTimeout,jn=o;if(!(typeof pt=="number"&&!(pt%1)&&!isNaN(pt)&&isFinite(pt))){let wr=typeof pt,xo;if(xo===void 0)if(wr==="boolean"||pt===null||wr==="string"&&pt&&pt==+pt&&!(pt%1))xo=+pt;else return Pe.errors=[{instancePath:e+"/pluginTimeout",schemaPath:"#/properties/pluginTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;xo!==void 0&&(pt=xo,t!==void 0&&(t.pluginTimeout=xo))}var a=jn===o;if(a){let wr=t.requestIdHeader,xo=o,P_=o,Ya=!1,p8=o;if(typeof wr!="boolean"){let Bt;if(Bt===void 0)if(wr==="false"||wr===0||wr===null)Bt=!1;else if(wr==="true"||wr===1)Bt=!0;else{let Mh={instancePath:e+"/requestIdHeader",schemaPath:"#/properties/requestIdHeader/anyOf/0/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};i===null?i=[Mh]:i.push(Mh),o++}Bt!==void 0&&(wr=Bt,t!==void 0&&(t.requestIdHeader=Bt))}var p=p8===o;if(Ya=Ya||p,!Ya){let Bt=o;if(typeof wr!="string"){let MP=typeof wr,mt;if(mt===void 0)if(MP=="number"||MP=="boolean")mt=""+wr;else if(wr===null)mt="";else{let qn={instancePath:e+"/requestIdHeader",schemaPath:"#/properties/requestIdHeader/anyOf/1/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[qn]:i.push(qn),o++}mt!==void 0&&(wr=mt,t!==void 0&&(t.requestIdHeader=mt))}var p=Bt===o;Ya=Ya||p}if(Ya)o=P_,i!==null&&(P_?i.length=P_:i=null);else{let Bt={instancePath:e+"/requestIdHeader",schemaPath:"#/properties/requestIdHeader/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[Bt]:i.push(Bt),o++,Pe.errors=i,!1}var a=xo===o;if(a){let Bt=t.requestIdLogLabel,Mh=o;if(typeof Bt!="string"){let mt=typeof Bt,qn;if(qn===void 0)if(mt=="number"||mt=="boolean")qn=""+Bt;else if(Bt===null)qn="";else return Pe.errors=[{instancePath:e+"/requestIdLogLabel",schemaPath:"#/properties/requestIdLogLabel/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;qn!==void 0&&(Bt=qn,t!==void 0&&(t.requestIdLogLabel=qn))}var a=Mh===o;if(a){let mt=t.http2SessionTimeout,qn=o;if(!(typeof mt=="number"&&!(mt%1)&&!isNaN(mt)&&isFinite(mt))){let fs=typeof mt,No;if(No===void 0)if(fs==="boolean"||mt===null||fs==="string"&&mt&&mt==+mt&&!(mt%1))No=+mt;else return Pe.errors=[{instancePath:e+"/http2SessionTimeout",schemaPath:"#/properties/http2SessionTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;No!==void 0&&(mt=No,t!==void 0&&(t.http2SessionTimeout=No))}var a=qn===o;if(a){let fs=t.exposeHeadRoutes,No=o;if(typeof fs!="boolean"){let kr;if(kr===void 0)if(fs==="false"||fs===0||fs===null)kr=!1;else if(fs==="true"||fs===1)kr=!0;else return Pe.errors=[{instancePath:e+"/exposeHeadRoutes",schemaPath:"#/properties/exposeHeadRoutes/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;kr!==void 0&&(fs=kr,t!==void 0&&(t.exposeHeadRoutes=kr))}var a=No===o;if(a){let kr=t.useSemicolonDelimiter,m8=o;if(typeof kr!="boolean"){let ce;if(ce===void 0)if(kr==="false"||kr===0||kr===null)ce=!1;else if(kr==="true"||kr===1)ce=!0;else return Pe.errors=[{instancePath:e+"/useSemicolonDelimiter",schemaPath:"#/properties/useSemicolonDelimiter/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;ce!==void 0&&(kr=ce,t!==void 0&&(t.useSemicolonDelimiter=ce))}var a=m8===o;if(a){if(t.routerOptions!==void 0){let ce=t.routerOptions,nu=o;if(o===nu)if(ce&&typeof ce=="object"&&!Array.isArray(ce)){ce.ignoreTrailingSlash===void 0&&(ce.ignoreTrailingSlash=!1),ce.ignoreDuplicateSlashes===void 0&&(ce.ignoreDuplicateSlashes=!1),ce.maxParamLength===void 0&&(ce.maxParamLength=100),ce.allowUnsafeRegex===void 0&&(ce.allowUnsafeRegex=!1),ce.useSemicolonDelimiter===void 0&&(ce.useSemicolonDelimiter=!1);let Xa=o;for(let Ye in ce)Ye==="ignoreTrailingSlash"||Ye==="ignoreDuplicateSlashes"||Ye==="maxParamLength"||Ye==="allowUnsafeRegex"||Ye==="useSemicolonDelimiter"||delete ce[Ye];if(Xa===o){let Ye=ce.ignoreTrailingSlash,jh=o;if(typeof Ye!="boolean"){let yt;if(yt===void 0)if(Ye==="false"||Ye===0||Ye===null)yt=!1;else if(Ye==="true"||Ye===1)yt=!0;else return Pe.errors=[{instancePath:e+"/routerOptions/ignoreTrailingSlash",schemaPath:"#/properties/routerOptions/properties/ignoreTrailingSlash/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;yt!==void 0&&(Ye=yt,ce!==void 0&&(ce.ignoreTrailingSlash=yt))}var f=jh===o;if(f){let yt=ce.ignoreDuplicateSlashes,Co=o;if(typeof yt!="boolean"){let Xe;if(Xe===void 0)if(yt==="false"||yt===0||yt===null)Xe=!1;else if(yt==="true"||yt===1)Xe=!0;else return Pe.errors=[{instancePath:e+"/routerOptions/ignoreDuplicateSlashes",schemaPath:"#/properties/routerOptions/properties/ignoreDuplicateSlashes/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;Xe!==void 0&&(yt=Xe,ce!==void 0&&(ce.ignoreDuplicateSlashes=Xe))}var f=Co===o;if(f){let Xe=ce.maxParamLength,g8=o;if(!(typeof Xe=="number"&&!(Xe%1)&&!isNaN(Xe)&&isFinite(Xe))){let ds=typeof Xe,Io;if(Io===void 0)if(ds==="boolean"||Xe===null||ds==="string"&&Xe&&Xe==+Xe&&!(Xe%1))Io=+Xe;else return Pe.errors=[{instancePath:e+"/routerOptions/maxParamLength",schemaPath:"#/properties/routerOptions/properties/maxParamLength/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;Io!==void 0&&(Xe=Io,ce!==void 0&&(ce.maxParamLength=Io))}var f=g8===o;if(f){let ds=ce.allowUnsafeRegex,Io=o;if(typeof ds!="boolean"){let Dr;if(Dr===void 0)if(ds==="false"||ds===0||ds===null)Dr=!1;else if(ds==="true"||ds===1)Dr=!0;else return Pe.errors=[{instancePath:e+"/routerOptions/allowUnsafeRegex",schemaPath:"#/properties/routerOptions/properties/allowUnsafeRegex/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;Dr!==void 0&&(ds=Dr,ce!==void 0&&(ce.allowUnsafeRegex=Dr))}var f=Io===o;if(f){let Dr=ce.useSemicolonDelimiter,y8=o;if(typeof Dr!="boolean"){let Qa;if(Qa===void 0)if(Dr==="false"||Dr===0||Dr===null)Qa=!1;else if(Dr==="true"||Dr===1)Qa=!0;else return Pe.errors=[{instancePath:e+"/routerOptions/useSemicolonDelimiter",schemaPath:"#/properties/routerOptions/properties/useSemicolonDelimiter/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;Qa!==void 0&&(Dr=Qa,ce!==void 0&&(ce.useSemicolonDelimiter=Qa))}var f=y8===o}}}}}}else return Pe.errors=[{instancePath:e+"/routerOptions",schemaPath:"#/properties/routerOptions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=nu===o}else var a=!0;if(a)if(t.constraints!==void 0){let ce=t.constraints,nu=o;if(o===nu)if(ce&&typeof ce=="object"&&!Array.isArray(ce))for(let Xa in ce){let Ye=ce[Xa],jh=o;if(o===jh)if(Ye&&typeof Ye=="object"&&!Array.isArray(Ye)){let yt;if(Ye.name===void 0&&(yt="name")||Ye.storage===void 0&&(yt="storage")||Ye.validate===void 0&&(yt="validate")||Ye.deriveConstraint===void 0&&(yt="deriveConstraint"))return Pe.errors=[{instancePath:e+"/constraints/"+Xa.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/constraints/additionalProperties/required",keyword:"required",params:{missingProperty:yt},message:"must have required property '"+yt+"'"}],!1;if(Ye.name!==void 0){let Co=Ye.name;if(typeof Co!="string"){let jP=typeof Co,Xe;if(Xe===void 0)if(jP=="number"||jP=="boolean")Xe=""+Co;else if(Co===null)Xe="";else return Pe.errors=[{instancePath:e+"/constraints/"+Xa.replace(/~/g,"~0").replace(/\//g,"~1")+"/name",schemaPath:"#/properties/constraints/additionalProperties/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;Xe!==void 0&&(Co=Xe,Ye!==void 0&&(Ye.name=Xe))}}}else return Pe.errors=[{instancePath:e+"/constraints/"+Xa.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/constraints/additionalProperties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var h=jh===o;if(!h)break}else return Pe.errors=[{instancePath:e+"/constraints",schemaPath:"#/properties/constraints/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=nu===o}else var a=!0}}}}}}}}}}}}}}}}}}}}}}}}else return Pe.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Pe.errors=i,o===0}wy.exports.defaultInitOptions={connectionTimeout:0,keepAliveTimeout:72e3,maxRequestsPerSocket:0,requestTimeout:0,bodyLimit:1048576,caseSensitive:!0,allowUnsafeRegex:!1,disableRequestLogging:!1,ignoreTrailingSlash:!1,ignoreDuplicateSlashes:!1,maxParamLength:100,onProtoPoisoning:"error",onConstructorPoisoning:"error",pluginTimeout:1e4,requestIdHeader:!1,requestIdLogLabel:"reqId",http2SessionTimeout:72e3,exposeHeadRoutes:!0,useSemicolonDelimiter:!1,allowErrorHandlerOverride:!0,routerOptions:{ignoreTrailingSlash:!1,ignoreDuplicateSlashes:!1,maxParamLength:100,allowUnsafeRegex:!1,useSemicolonDelimiter:!1}}});var g4=E((XMe,Ey)=>{"use strict";var by=m4(),REe=wp()({circles:!0,proto:!1}),{FST_ERR_INIT_OPTS_INVALID:$Ee}=Vt();function OEe(t){let e=REe(t);if(!by(e)){let r=new $Ee(JSON.stringify(by.errors.map(n=>n.message)));throw r.errors=by.errors,r}return o1(e)}function o1(t){let e=Object.getOwnPropertyNames(t);for(let r of e){let n=t[r];ArrayBuffer.isView(n)&&!(n instanceof DataView)||(t[r]=n&&typeof n=="object"?o1(n):n)}return Object.freeze(t)}Ey.exports=OEe;Ey.exports.defaultInitOptions=by.defaultInitOptions;Ey.exports.utils={deepFreezeObject:o1}});var R4=E((QMe,T4)=>{"use strict";var{kAvvioBoot:PEe,kChildren:y4,kRoutePrefix:_4,kLogLevel:v4,kLogSerializers:a1,kHooks:l1,kSchemaController:Oc,kContentTypeParser:w4,kReply:b4,kRequest:E4,kFourOhFour:xEe,kPluginNameChain:S4,kErrorHandlerAlreadySet:NEe}=Nt(),CEe=Np(),IEe=Mp(),AEe=g$(),kEe=_w(),{buildHooks:DEe}=Ci(),Nd=j$();T4.exports=function(e,r,n){let s=Nd.registerPlugin.call(e,r),i=Nd.getPluginName(r)||Nd.getFuncPreview(r);if(s)return e[S4].push(i),e;let o=Object.create(e);e[y4].push(o),o.ready=e[PEe].bind(o),o[y4]=[],o[b4]=CEe.buildReply(o[b4]),o[E4]=IEe.buildRequest(o[E4]),o[w4]=kEe.helpers.buildContentTypeParser(o[w4]),o[l1]=DEe(o[l1]),o[_4]=MEe(o[_4],n.prefix),o[v4]=n.logLevel||o[v4],o[Oc]=AEe.buildSchemaController(e[Oc]),o.getSchema=o[Oc].getSchema.bind(o[Oc]),o.getSchemas=o[Oc].getSchemas.bind(o[Oc]),o[Nd.kRegisteredPlugins]=Object.create(o[Nd.kRegisteredPlugins]),o[S4]=[i],o[NEe]=!1,(o[a1]||n.logSerializers)&&(o[a1]=Object.assign(Object.create(o[a1]),n.logSerializers)),n.prefix&&o[xEe].arrange404(o);for(let a of o[l1].onRegister)a.call(e,o,n);return o};function MEe(t,e){return e?(t.endsWith("/")&&e[0]==="/"?e=e.slice(1):e[0]!=="/"&&(e="/"+e),t+e):t}});var N4=E(Ds=>{"use strict";Object.defineProperty(Ds,"__esModule",{value:!0});Ds.parseCookie=P4;Ds.parse=P4;Ds.stringifyCookie=BEe;Ds.stringifySetCookie=Sy;Ds.serialize=Sy;Ds.parseSetCookie=zEe;Ds.stringifySetCookie=Sy;Ds.serialize=Sy;var $4=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,O4=/^[\u0021-\u003A\u003C-\u007E]*$/,jEe=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,qEe=/^[\u0020-\u003A\u003D-\u007E]*$/,LEe=/^-?\d+$/,FEe=Object.prototype.toString,UEe=(()=>{let t=function(){};return t.prototype=Object.create(null),t})();function P4(t,e){let r=new UEe,n=t.length;if(n<2)return r;let s=e?.decode||x4,i=0;do{let o=u1(t,i,n);if(o===-1)break;let a=c1(t,i,n);if(o>a){i=t.lastIndexOf(";",o-1)+1;continue}let l=uo(t,i,o);r[l]===void 0&&(r[l]=s(uo(t,o+1,a))),i=a+1}while(i<n);return r}function BEe(t,e){let r=e?.encode||encodeURIComponent,n=[];for(let s of Object.keys(t)){let i=t[s];if(i===void 0)continue;if(!$4.test(s))throw new TypeError(`cookie name is invalid: ${s}`);let o=r(i);if(!O4.test(o))throw new TypeError(`cookie val is invalid: ${i}`);n.push(`${s}=${o}`)}return n.join("; ")}function Sy(t,e,r){let n=typeof t=="object"?t:{...r,name:t,value:String(e)},i=(typeof e=="object"?e:r)?.encode||encodeURIComponent;if(!$4.test(n.name))throw new TypeError(`argument name is invalid: ${n.name}`);let o=n.value?i(n.value):"";if(!O4.test(o))throw new TypeError(`argument val is invalid: ${n.value}`);let a=n.name+"="+o;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError(`option maxAge is invalid: ${n.maxAge}`);a+="; Max-Age="+n.maxAge}if(n.domain){if(!jEe.test(n.domain))throw new TypeError(`option domain is invalid: ${n.domain}`);a+="; Domain="+n.domain}if(n.path){if(!qEe.test(n.path))throw new TypeError(`option path is invalid: ${n.path}`);a+="; Path="+n.path}if(n.expires){if(!VEe(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError(`option expires is invalid: ${n.expires}`);a+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(a+="; HttpOnly"),n.secure&&(a+="; Secure"),n.partitioned&&(a+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":a+="; Priority=Low";break;case"medium":a+="; Priority=Medium";break;case"high":a+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${n.priority}`)}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"none":a+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${n.sameSite}`)}return a}function zEe(t,e){let r=e?.decode||x4,n=t.length,s=c1(t,0,n),i=u1(t,0,s),o=i===-1?{name:"",value:r(uo(t,0,s))}:{name:uo(t,0,i),value:r(uo(t,i+1,s))},a=s+1;for(;a<n;){let l=c1(t,a,n),c=u1(t,a,l),u=c===-1?uo(t,a,l):uo(t,a,c),d=c===-1?void 0:uo(t,c+1,l);switch(u.toLowerCase()){case"httponly":o.httpOnly=!0;break;case"secure":o.secure=!0;break;case"partitioned":o.partitioned=!0;break;case"domain":o.domain=d;break;case"path":o.path=d;break;case"max-age":d&&LEe.test(d)&&(o.maxAge=Number(d));break;case"expires":if(!d)break;let p=new Date(d);Number.isFinite(p.valueOf())&&(o.expires=p);break;case"priority":if(!d)break;let f=d.toLowerCase();(f==="low"||f==="medium"||f==="high")&&(o.priority=f);break;case"samesite":if(!d)break;let h=d.toLowerCase();(h==="lax"||h==="strict"||h==="none")&&(o.sameSite=h);break}a=l+1}return o}function c1(t,e,r){let n=t.indexOf(";",e);return n===-1?r:n}function u1(t,e,r){let n=t.indexOf("=",e);return n<r?n:-1}function uo(t,e,r){let n=e,s=r;do{let i=t.charCodeAt(n);if(i!==32&&i!==9)break}while(++n<s);for(;s>n;){let i=t.charCodeAt(s-1);if(i!==32&&i!==9)break;s--}return t.slice(n,s)}function x4(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}function VEe(t){return FEe.call(t)==="[object Date]"}});var I4=E((eje,Ty)=>{"use strict";var{format:f1}=require("util");function HEe(t){return C4({...t,name:"DeprecationWarning"})}function C4({name:t,code:e,message:r,unlimited:n=!1}={}){if(!t)throw new Error("Warning name must not be empty");if(!e)throw new Error("Warning code must not be empty");if(!r)throw new Error("Warning message must not be empty");if(typeof n!="boolean")throw new Error("Warning opts.unlimited must be a boolean");e=e.toUpperCase();let s={[t]:function(o,a,l){i.emitted===!0&&i.unlimited!==!0||(i.emitted=!0,process.emitWarning(i.format(o,a,l),i.name,i.code))}};n&&(s={[t]:function(o,a,l){i.emitted=!0,process.emitWarning(i.format(o,a,l),i.name,i.code)}});let i=s[t];return i.emitted=!1,i.message=r,i.unlimited=n,i.code=e,i.format=function(o,a,l){let c;return o&&a&&l?c=f1(r,o,a,l):o&&a?c=f1(r,o,a):o?c=f1(r,o):c=r,c},i}var d1={createWarning:C4,createDeprecation:HEe};Ty.exports=d1;Ty.exports.default=d1;Ty.exports.processWarning=d1});var D4=E((tje,k4)=>{"use strict";var{URL:A4}=require("url"),h1="http://localhost";k4.exports=function(e,r){(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]")&&e.startsWith("//")&&(e=h1+e);let n=typeof e=="object"?Object.assign(new A4(h1),e):new A4(e,h1);if(typeof r=="string"){r=new URLSearchParams(r);for(let s of r.keys()){n.searchParams.delete(s);for(let i of r.getAll(s))n.searchParams.append(s,i)}}else{let s=Object.assign({},e.query,r);for(let i in s){let o=s[i];if(Array.isArray(o)){n.searchParams.delete(i);for(let a of o)n.searchParams.append(i,a)}else n.searchParams.set(i,o)}}return n}});var M4=E((rje,p1)=>{"use strict";var{randomUUID:GEe}=require("crypto"),{Readable:WEe}=require("stream"),Pc;function KEe(t){return t&&typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&t[Symbol.toStringTag]==="FormData"}function JEe(t){Pc=Pc??new TextEncoder;let e=`----formdata-${GEe()}`,r=`--${e}\r
Content-Disposition: form-data`;let n=l=>l.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),s=l=>l.replace(/\r?\n|\r/g,`\r
`),i=new Uint8Array([13,10]);async function*o(){for(let[l,c]of t)if(typeof c=="string")yield Pc.encode(`${r}; name="${n(s(l))}"\r
\r
`),yield Pc.encode(`${s(c)}\r
`);else{let u=`${r}; name="${n(s(l))}"`;c.name&&(u+=`; filename="${n(c.name)}"`),u+=`\r
Content-Type: ${c.type||"application/octet-stream"}\r
\r
`,yield Pc.encode(u),c.stream?yield*c.stream():yield c,yield i}yield Pc.encode(`--${e}--`)}return{stream:WEe.from(o()),contentType:`multipart/form-data; boundary=${e}`}}p1.exports.isFormDataLike=KEe;p1.exports.formDataToStream=JEe});var L4=E((nje,Ry)=>{"use strict";var{Readable:j4,addAbortSignal:YEe}=require("stream"),g1=require("util"),XEe=N4(),QEe=require("assert"),{createDeprecation:ZEe}=I4(),eSe=D4(),{isFormDataLike:tSe,formDataToStream:rSe}=M4(),{EventEmitter:nSe}=require("events"),sSe=ZEe({name:"FastifyDeprecationLightMyRequest",code:"FST_LIGHTMYREQUEST_DEP01",message:'You are accessing "request.connection", use "request.socket" instead.'});function iSe(t){return t.port?t.host:t.hostname+(t.protocol==="https:"?":443":":80")}var m1=class extends nSe{constructor(e){super(),this.remoteAddress=e}};function q4(t){return new e(this);function e(r){fo.call(r,{...t,Request:void 0}),Object.assign(this,r);for(let n of Object.keys(fo.prototype))this.constructor.prototype[n]=fo.prototype[n];return g1.inherits(this.constructor,t.Request),this}}function fo(t){j4.call(this,{autoDestroy:!1});let e=eSe(t.url||t.path,t.query);this.url=e.pathname+e.search,this.aborted=!1,this.httpVersionMajor=1,this.httpVersionMinor=1,this.httpVersion="1.1",this.method=t.method?t.method.toUpperCase():"GET",this.headers={},this.rawHeaders=[];let r=t.headers||{};for(let o in r){let a=o.toLowerCase();if((a==="user-agent"||a==="content-type")&&r[o]===void 0){this.headers[a]=void 0;continue}let l=r[o];QEe(l!==void 0,'invalid value "undefined" for header '+o),this.headers[a]=""+l}if("user-agent"in this.headers||(this.headers["user-agent"]="lightMyRequest"),this.headers.host=this.headers.host||t.authority||iSe(e),t.cookies){let{cookies:o}=t,a=Object.keys(o).map(l=>XEe.serialize(l,o[l]));this.headers.cookie&&a.unshift(this.headers.cookie),this.headers.cookie=a.join("; ")}this.socket=new m1(t.remoteAddress||"127.0.0.1"),Object.defineProperty(this,"connection",{get(){return sSe(),this.socket},configurable:!0});let n=t.payload||t.body||null,s=n&&typeof n.resume=="function";if(tSe(n)){let o=rSe(n);n=o.stream,s=!0,this.headers["content-type"]=o.contentType,this.headers["transfer-encoding"]="chunked"}n&&typeof n!="string"&&!s&&!Buffer.isBuffer(n)&&(n=JSON.stringify(n),"content-type"in this.headers||(this.headers["content-type"]="application/json")),n&&!s&&!Object.hasOwn(this.headers,"content-length")&&(this.headers["content-length"]=(Buffer.isBuffer(n)?n.length:Buffer.byteLength(n)).toString());for(let o of Object.keys(this.headers))this.rawHeaders.push(o,this.headers[o]);this._lightMyRequest={payload:n,isDone:!1,simulate:t.simulate||{},payloadAsStream:t.payloadAsStream,signal:t.signal};let i=t.signal;i&&YEe(i,this);{let o=this._lightMyRequest.payload;o?._readableState?(this._read=oSe,o.on("error",a=>{this.destroy(a)}),o.on("end",()=>{this.push(null)})):this._read=aSe}return this}function oSe(){let t=this._lightMyRequest.payload,e=!0,r=!1,n;for(;e&&(n=t.read());)r=!0,e=this.push(n);e&&!r&&this._lightMyRequest.payload.once("readable",this._read.bind(this))}function aSe(){setImmediate(()=>{if(this._lightMyRequest.isDone){this._lightMyRequest.simulate.end!==!1&&this.push(null);return}this._lightMyRequest.isDone=!0,this._lightMyRequest.payload&&(this._lightMyRequest.simulate.split?(this.push(this._lightMyRequest.payload.slice(0,1)),this.push(this._lightMyRequest.payload.slice(1))):this.push(this._lightMyRequest.payload)),this._lightMyRequest.simulate.error&&this.emit("error",new Error("Simulated")),this._lightMyRequest.simulate.close&&this.emit("close"),this._lightMyRequest.simulate.end!==!1&&this.push(null)})}g1.inherits(fo,j4);g1.inherits(q4,fo);fo.prototype.destroy=function(t){this.destroyed||this._lightMyRequest.isDone||(this.destroyed=!0,t&&(this._error=!0,process.nextTick(()=>this.emit("error",t))),process.nextTick(()=>this.emit("close")))};Ry.exports=fo;Ry.exports.Request=fo;Ry.exports.CustomRequest=q4});var U4=E((sje,Cd)=>{"use strict";var $y={decodeValues:!0,map:!1,silent:!1};function y1(t){return typeof t!="string"||t in{}}function _1(){return Object.create(null)}function v1(t){return typeof t=="string"&&!!t.trim()}function w1(t,e){var r=t.split(";").filter(v1),n=r.shift(),s=lSe(n),i=s.name,o=s.value;if(e=e?Object.assign({},$y,e):$y,y1(i))return null;try{o=e.decodeValues?decodeURIComponent(o):o}catch(l){console.error("set-cookie-parser: failed to decode cookie value. Set options.decodeValues=false to disable decoding.",l)}var a=_1();return a.name=i,a.value=o,r.forEach(function(l){var c=l.split("="),u=c.shift().trimLeft().toLowerCase();if(!y1(u)){var d=c.join("=");if(u==="expires")a.expires=new Date(d);else if(u==="max-age"){var p=parseInt(d,10);Number.isNaN(p)||(a.maxAge=p)}else u==="secure"?a.secure=!0:u==="httponly"?a.httpOnly=!0:u==="samesite"?a.sameSite=d:u==="partitioned"?a.partitioned=!0:u&&(a[u]=d)}}),a}function lSe(t){var e="",r="",n=t.split("=");return n.length>1?(e=n.shift(),r=n.join("=")):r=t,{name:e,value:r}}function F4(t,e){if(e=e?Object.assign({},$y,e):$y,!t)return e.map?_1():[];if(t.headers)if(typeof t.headers.getSetCookie=="function")t=t.headers.getSetCookie();else if(t.headers["set-cookie"])t=t.headers["set-cookie"];else{var r=t.headers[Object.keys(t.headers).find(function(s){return s.toLowerCase()==="set-cookie"})];!r&&t.headers.cookie&&!e.silent&&console.warn("Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning."),t=r}if(Array.isArray(t)||(t=[t]),e.map){var n=_1();return t.filter(v1).reduce(function(s,i){var o=w1(i,e);return o&&!y1(o.name)&&(s[o.name]=o),s},n)}else return t.filter(v1).map(function(s){return w1(s,e)}).filter(Boolean)}function cSe(t){if(Array.isArray(t))return t;if(typeof t!="string")return[];var e=[],r=0,n,s,i,o,a;function l(){for(;r<t.length&&/\s/.test(t.charAt(r));)r+=1;return r<t.length}function c(){return s=t.charAt(r),s!=="="&&s!==";"&&s!==","}for(;r<t.length;){for(n=r,a=!1;l();)if(s=t.charAt(r),s===","){for(i=r,r+=1,l(),o=r;r<t.length&&c();)r+=1;r<t.length&&t.charAt(r)==="="?(a=!0,r=o,e.push(t.substring(n,i)),n=r):r=i+1}else r+=1;(!a||r>=t.length)&&e.push(t.substring(n,t.length))}return e}Cd.exports=F4;Cd.exports.parse=F4;Cd.exports.parseString=w1;Cd.exports.splitCookiesString=cSe});var G4=E((ije,H4)=>{"use strict";var Id=require("http"),{Writable:uSe,Readable:B4,addAbortSignal:fSe}=require("stream"),dSe=require("util"),hSe=U4();function ho(t,e,r){if(Id.ServerResponse.call(this,t),t._lightMyRequest?.payloadAsStream){let a=this.emit.bind(this,"drain");this._lightMyRequest={headers:null,trailers:{},stream:new B4({read:a})};let l=t._lightMyRequest.signal;l&&fSe(l,this._lightMyRequest.stream)}else this._lightMyRequest={headers:null,trailers:{},payloadChunks:[]};this.setHeader("foo","bar"),this.removeHeader("foo"),this.assignSocket(pSe()),this._promiseCallback=typeof r=="function";let n=!1,s=a=>{if(!n){if(n=!0,this._promiseCallback)return process.nextTick(()=>e(a));process.nextTick(()=>e(null,a))}};this._lightMyRequest.onEndSuccess=s;let i=!1,o=a=>{if(n){this._lightMyRequest.stream&&!i&&(a||(a=new Error("response destroyed before completion"),a.code="LIGHT_ECONNRESET"),this._lightMyRequest.stream.destroy(a),this._lightMyRequest.stream.on("error",()=>{}));return}if(n=!0,a||(a=new Error("response destroyed before completion"),a.code="LIGHT_ECONNRESET"),this._promiseCallback)return process.nextTick(()=>r(a));process.nextTick(()=>e(a,null))};this._lightMyRequest.stream?this.once("finish",()=>{i=!0,this._lightMyRequest.stream.push(null)}):this.once("finish",()=>{let a=z4(this);a.raw.req=t,s(a)}),this.connection.once("error",o),this.once("error",o),this.once("close",o)}dSe.inherits(ho,Id.ServerResponse);ho.prototype.setTimeout=function(t,e){return this.timeoutHandle=setTimeout(()=>{this.emit("timeout")},t),this.on("timeout",e),this};ho.prototype.writeHead=function(){let t=Id.ServerResponse.prototype.writeHead.apply(this,arguments);return V4(this),this._lightMyRequest.stream&&this._lightMyRequest.onEndSuccess(z4(this)),t};ho.prototype.write=function(t,e,r){return this.timeoutHandle&&clearTimeout(this.timeoutHandle),Id.ServerResponse.prototype.write.call(this,t,e,r),this._lightMyRequest.stream?this._lightMyRequest.stream.push(Buffer.from(t,e)):(this._lightMyRequest.payloadChunks.push(Buffer.from(t,e)),!0)};ho.prototype.end=function(t,e,r){t&&this.write(t,e),Id.ServerResponse.prototype.end.call(this,r),this.emit("finish"),this.destroy()};ho.prototype.destroy=function(t){this.destroyed||(this.destroyed=!0,t&&process.nextTick(()=>this.emit("error",t)),process.nextTick(()=>this.emit("close")))};ho.prototype.addTrailers=function(t){for(let e in t)this._lightMyRequest.trailers[e.toLowerCase().trim()]=t[e].toString().trim()};function z4(t){t._lightMyRequest.headers===null&&V4(t),mSe(t);let e={raw:{res:t},headers:t._lightMyRequest.headers,statusCode:t.statusCode,statusMessage:t.statusMessage,trailers:{},get cookies(){return hSe.parse(this)}};if(e.trailers=t._lightMyRequest.trailers,t._lightMyRequest.payloadChunks){let r=Buffer.concat(t._lightMyRequest.payloadChunks);e.rawPayload=r,e.payload=r.toString(),e.body=e.payload,e.json=function(){return JSON.parse(e.payload)}}else e.json=function(){throw new Error("Response payload is not available with payloadAsStream: true")};return e.stream=function(){return t._lightMyRequest.stream?t._lightMyRequest.stream:B4.from(t._lightMyRequest.payloadChunks)},e}function pSe(){return new uSe({write(t,e,r){setImmediate(r)}})}function mSe(t){let e=t._lightMyRequest.headers;for(let r of Object.keys(e)){let n=e[r];Array.isArray(n)?e[r]=n.map(s=>""+s):e[r]=""+n}}function V4(t){t._lightMyRequest.headers=Object.assign({},t.getHeaders()),["Date","Connection","Transfer-Encoding"].forEach(e=>{let r=new RegExp("\\r\\n"+e+": ([^\\r]*)\\r\\n"),n=t._header?.match(r);n&&(t._lightMyRequest.headers[e.toLowerCase()]=n[1])})}H4.exports=ho});var W4=E((oje,b1)=>{"use strict";b1.exports=$t;b1.exports.default=$t;var gSe={type:"object",properties:{url:{oneOf:[{type:"string"},{type:"object",properties:{protocol:{type:"string"},hostname:{type:"string"},pathname:{type:"string"}},additionalProperties:!0,required:["pathname"]}]},path:{oneOf:[{type:"string"},{type:"object",properties:{protocol:{type:"string"},hostname:{type:"string"},pathname:{type:"string"}},additionalProperties:!0,required:["pathname"]}]},cookies:{type:"object",additionalProperties:!0},headers:{type:"object",additionalProperties:!0},query:{anyOf:[{type:"object",additionalProperties:!0},{type:"string"}]},simulate:{type:"object",properties:{end:{type:"boolean"},split:{type:"boolean"},error:{type:"boolean"},close:{type:"boolean"}}},authority:{type:"string"},remoteAddress:{type:"string"},method:{type:"string",enum:["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","QUERY","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE","acl","bind","checkout","connect","copy","delete","get","head","link","lock","m-search","merge","mkactivity","mkcalendar","mkcol","move","notify","options","patch","post","propfind","proppatch","purge","put","query","rebind","report","search","source","subscribe","trace","unbind","unlink","unlock","unsubscribe"]},validate:{type:"boolean"}},additionalProperties:!0,oneOf:[{required:["url"]},{required:["path"]}]};function $t(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0,a=o,l=!1,c=null,u=o;if(t&&typeof t=="object"&&!Array.isArray(t)){let v;if(t.url===void 0&&(v="url")){let S={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:v},message:"must have required property '"+v+"'"};i===null?i=[S]:i.push(S),o++}}var p=u===o;p&&(l=!0,c=0);let d=o;if(t&&typeof t=="object"&&!Array.isArray(t)){let v;if(t.path===void 0&&(v="path")){let S={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:v},message:"must have required property '"+v+"'"};i===null?i=[S]:i.push(S),o++}}var p=d===o;if(p&&l?(l=!1,c=[c,1]):p&&(l=!0,c=1),l)o=a,i!==null&&(a?i.length=a:i=null);else{let v={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:c},message:"must match exactly one schema in oneOf"};return i===null?i=[v]:i.push(v),o++,$t.errors=i,!1}if(o===0)if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.url!==void 0){let v=t.url,S=o,$=o,T=!1,O=null,R=o;if(typeof v!="string"){let A=typeof v,N;if(N===void 0)if(A=="number"||A=="boolean")N=""+v;else if(v===null)N="";else{let C={instancePath:e+"/url",schemaPath:"#/properties/url/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[C]:i.push(C),o++}N!==void 0&&(v=N,t!==void 0&&(t.url=N))}var h=R===o;h&&(T=!0,O=0);let P=o;if(o===P)if(v&&typeof v=="object"&&!Array.isArray(v)){let A;if(v.pathname===void 0&&(A="pathname")){let N={instancePath:e+"/url",schemaPath:"#/properties/url/oneOf/1/required",keyword:"required",params:{missingProperty:A},message:"must have required property '"+A+"'"};i===null?i=[N]:i.push(N),o++}else{if(v.protocol!==void 0){let N=v.protocol,C=o;if(typeof N!="string"){let z=typeof N,te;if(te===void 0)if(z=="number"||z=="boolean")te=""+N;else if(N===null)te="";else{let H={instancePath:e+"/url/protocol",schemaPath:"#/properties/url/oneOf/1/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[H]:i.push(H),o++}te!==void 0&&(N=te,v!==void 0&&(v.protocol=te))}var f=C===o}else var f=!0;if(f){if(v.hostname!==void 0){let N=v.hostname,C=o;if(typeof N!="string"){let te=typeof N,H;if(H===void 0)if(te=="number"||te=="boolean")H=""+N;else if(N===null)H="";else{let K={instancePath:e+"/url/hostname",schemaPath:"#/properties/url/oneOf/1/properties/hostname/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[K]:i.push(K),o++}H!==void 0&&(N=H,v!==void 0&&(v.hostname=H))}var f=C===o}else var f=!0;if(f)if(v.pathname!==void 0){let N=v.pathname,C=o;if(typeof N!="string"){let te=typeof N,H;if(H===void 0)if(te=="number"||te=="boolean")H=""+N;else if(N===null)H="";else{let K={instancePath:e+"/url/pathname",schemaPath:"#/properties/url/oneOf/1/properties/pathname/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[K]:i.push(K),o++}H!==void 0&&(N=H,v!==void 0&&(v.pathname=H))}var f=C===o}else var f=!0}}}else{let A={instancePath:e+"/url",schemaPath:"#/properties/url/oneOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[A]:i.push(A),o++}var h=P===o;if(h&&T?(T=!1,O=[O,1]):h&&(T=!0,O=1),T)o=$,i!==null&&($?i.length=$:i=null);else{let A={instancePath:e+"/url",schemaPath:"#/properties/url/oneOf",keyword:"oneOf",params:{passingSchemas:O},message:"must match exactly one schema in oneOf"};return i===null?i=[A]:i.push(A),o++,$t.errors=i,!1}var m=S===o}else var m=!0;if(m){if(t.path!==void 0){let v=t.path,S=o,$=o,T=!1,O=null,R=o;if(typeof v!="string"){let N=typeof v,C;if(C===void 0)if(N=="number"||N=="boolean")C=""+v;else if(v===null)C="";else{let z={instancePath:e+"/path",schemaPath:"#/properties/path/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[z]:i.push(z),o++}C!==void 0&&(v=C,t!==void 0&&(t.path=C))}var g=R===o;g&&(T=!0,O=0);let P=o;if(o===P)if(v&&typeof v=="object"&&!Array.isArray(v)){let N;if(v.pathname===void 0&&(N="pathname")){let C={instancePath:e+"/path",schemaPath:"#/properties/path/oneOf/1/required",keyword:"required",params:{missingProperty:N},message:"must have required property '"+N+"'"};i===null?i=[C]:i.push(C),o++}else{if(v.protocol!==void 0){let C=v.protocol,z=o;if(typeof C!="string"){let te=typeof C,H;if(H===void 0)if(te=="number"||te=="boolean")H=""+C;else if(C===null)H="";else{let K={instancePath:e+"/path/protocol",schemaPath:"#/properties/path/oneOf/1/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[K]:i.push(K),o++}H!==void 0&&(C=H,v!==void 0&&(v.protocol=H))}var y=z===o}else var y=!0;if(y){if(v.hostname!==void 0){let C=v.hostname,z=o;if(typeof C!="string"){let H=typeof C,K;if(K===void 0)if(H=="number"||H=="boolean")K=""+C;else if(C===null)K="";else{let xt={instancePath:e+"/path/hostname",schemaPath:"#/properties/path/oneOf/1/properties/hostname/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[xt]:i.push(xt),o++}K!==void 0&&(C=K,v!==void 0&&(v.hostname=K))}var y=z===o}else var y=!0;if(y)if(v.pathname!==void 0){let C=v.pathname,z=o;if(typeof C!="string"){let H=typeof C,K;if(K===void 0)if(H=="number"||H=="boolean")K=""+C;else if(C===null)K="";else{let xt={instancePath:e+"/path/pathname",schemaPath:"#/properties/path/oneOf/1/properties/pathname/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[xt]:i.push(xt),o++}K!==void 0&&(C=K,v!==void 0&&(v.pathname=K))}var y=z===o}else var y=!0}}}else{let N={instancePath:e+"/path",schemaPath:"#/properties/path/oneOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[N]:i.push(N),o++}var g=P===o;if(g&&T?(T=!1,O=[O,1]):g&&(T=!0,O=1),T)o=$,i!==null&&($?i.length=$:i=null);else{let N={instancePath:e+"/path",schemaPath:"#/properties/path/oneOf",keyword:"oneOf",params:{passingSchemas:O},message:"must match exactly one schema in oneOf"};return i===null?i=[N]:i.push(N),o++,$t.errors=i,!1}var m=S===o}else var m=!0;if(m){if(t.cookies!==void 0){let v=t.cookies,S=o;if(o===S&&!(v&&typeof v=="object"&&!Array.isArray(v)))return $t.errors=[{instancePath:e+"/cookies",schemaPath:"#/properties/cookies/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var m=S===o}else var m=!0;if(m){if(t.headers!==void 0){let v=t.headers,S=o;if(o===S&&!(v&&typeof v=="object"&&!Array.isArray(v)))return $t.errors=[{instancePath:e+"/headers",schemaPath:"#/properties/headers/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var m=S===o}else var m=!0;if(m){if(t.query!==void 0){let v=t.query,S=o,$=o,T=!1,O=o;if(o===O&&!(v&&typeof v=="object"&&!Array.isArray(v))){let P={instancePath:e+"/query",schemaPath:"#/properties/query/anyOf/0/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[P]:i.push(P),o++}var w=O===o;if(T=T||w,!T){let P=o;if(typeof v!="string"){let N=typeof v,C;if(C===void 0)if(N=="number"||N=="boolean")C=""+v;else if(v===null)C="";else{let z={instancePath:e+"/query",schemaPath:"#/properties/query/anyOf/1/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[z]:i.push(z),o++}C!==void 0&&(v=C,t!==void 0&&(t.query=C))}var w=P===o;T=T||w}if(T)o=$,i!==null&&($?i.length=$:i=null);else{let P={instancePath:e+"/query",schemaPath:"#/properties/query/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[P]:i.push(P),o++,$t.errors=i,!1}var m=S===o}else var m=!0;if(m){if(t.simulate!==void 0){let v=t.simulate,S=o;if(o===S)if(v&&typeof v=="object"&&!Array.isArray(v)){if(v.end!==void 0){let T=v.end,O=o;if(typeof T!="boolean"){let R;if(R===void 0)if(T==="false"||T===0||T===null)R=!1;else if(T==="true"||T===1)R=!0;else return $t.errors=[{instancePath:e+"/simulate/end",schemaPath:"#/properties/simulate/properties/end/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;R!==void 0&&(T=R,v!==void 0&&(v.end=R))}var _=O===o}else var _=!0;if(_){if(v.split!==void 0){let T=v.split,O=o;if(typeof T!="boolean"){let P;if(P===void 0)if(T==="false"||T===0||T===null)P=!1;else if(T==="true"||T===1)P=!0;else return $t.errors=[{instancePath:e+"/simulate/split",schemaPath:"#/properties/simulate/properties/split/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;P!==void 0&&(T=P,v!==void 0&&(v.split=P))}var _=O===o}else var _=!0;if(_){if(v.error!==void 0){let T=v.error,O=o;if(typeof T!="boolean"){let P;if(P===void 0)if(T==="false"||T===0||T===null)P=!1;else if(T==="true"||T===1)P=!0;else return $t.errors=[{instancePath:e+"/simulate/error",schemaPath:"#/properties/simulate/properties/error/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;P!==void 0&&(T=P,v!==void 0&&(v.error=P))}var _=O===o}else var _=!0;if(_)if(v.close!==void 0){let T=v.close,O=o;if(typeof T!="boolean"){let P;if(P===void 0)if(T==="false"||T===0||T===null)P=!1;else if(T==="true"||T===1)P=!0;else return $t.errors=[{instancePath:e+"/simulate/close",schemaPath:"#/properties/simulate/properties/close/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;P!==void 0&&(T=P,v!==void 0&&(v.close=P))}var _=O===o}else var _=!0}}}else return $t.errors=[{instancePath:e+"/simulate",schemaPath:"#/properties/simulate/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var m=S===o}else var m=!0;if(m){if(t.authority!==void 0){let v=t.authority,S=o;if(typeof v!="string"){let T=typeof v,O;if(O===void 0)if(T=="number"||T=="boolean")O=""+v;else if(v===null)O="";else return $t.errors=[{instancePath:e+"/authority",schemaPath:"#/properties/authority/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;O!==void 0&&(v=O,t!==void 0&&(t.authority=O))}var m=S===o}else var m=!0;if(m){if(t.remoteAddress!==void 0){let v=t.remoteAddress,S=o;if(typeof v!="string"){let T=typeof v,O;if(O===void 0)if(T=="number"||T=="boolean")O=""+v;else if(v===null)O="";else return $t.errors=[{instancePath:e+"/remoteAddress",schemaPath:"#/properties/remoteAddress/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;O!==void 0&&(v=O,t!==void 0&&(t.remoteAddress=O))}var m=S===o}else var m=!0;if(m){if(t.method!==void 0){let v=t.method,S=o;if(typeof v!="string"){let T=typeof v,O;if(O===void 0)if(T=="number"||T=="boolean")O=""+v;else if(v===null)O="";else return $t.errors=[{instancePath:e+"/method",schemaPath:"#/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;O!==void 0&&(v=O,t!==void 0&&(t.method=O))}if(!(v==="ACL"||v==="BIND"||v==="CHECKOUT"||v==="CONNECT"||v==="COPY"||v==="DELETE"||v==="GET"||v==="HEAD"||v==="LINK"||v==="LOCK"||v==="M-SEARCH"||v==="MERGE"||v==="MKACTIVITY"||v==="MKCALENDAR"||v==="MKCOL"||v==="MOVE"||v==="NOTIFY"||v==="OPTIONS"||v==="PATCH"||v==="POST"||v==="PROPFIND"||v==="PROPPATCH"||v==="PURGE"||v==="PUT"||v==="QUERY"||v==="REBIND"||v==="REPORT"||v==="SEARCH"||v==="SOURCE"||v==="SUBSCRIBE"||v==="TRACE"||v==="UNBIND"||v==="UNLINK"||v==="UNLOCK"||v==="UNSUBSCRIBE"||v==="acl"||v==="bind"||v==="checkout"||v==="connect"||v==="copy"||v==="delete"||v==="get"||v==="head"||v==="link"||v==="lock"||v==="m-search"||v==="merge"||v==="mkactivity"||v==="mkcalendar"||v==="mkcol"||v==="move"||v==="notify"||v==="options"||v==="patch"||v==="post"||v==="propfind"||v==="proppatch"||v==="purge"||v==="put"||v==="query"||v==="rebind"||v==="report"||v==="search"||v==="source"||v==="subscribe"||v==="trace"||v==="unbind"||v==="unlink"||v==="unlock"||v==="unsubscribe"))return $t.errors=[{instancePath:e+"/method",schemaPath:"#/properties/method/enum",keyword:"enum",params:{allowedValues:gSe.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var m=S===o}else var m=!0;if(m)if(t.validate!==void 0){let v=t.validate,S=o;if(typeof v!="boolean"){let T;if(T===void 0)if(v==="false"||v===0||v===null)T=!1;else if(v==="true"||v===1)T=!0;else return $t.errors=[{instancePath:e+"/validate",schemaPath:"#/properties/validate/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;T!==void 0&&(v=T,t!==void 0&&(t.validate=T))}var m=S===o}else var m=!0}}}}}}}}}else return $t.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return $t.errors=i,o===0}});var Y4=E((aje,kd)=>{"use strict";var ySe=require("assert"),E1=L4(),Oy=G4(),xy="The dispatch function has already been invoked",K4=W4();function S1(t,e,r){return r===void 0?new Ad(t,e):Py(t,e,r)}function _Se(t,e){let r=t._lightMyRequest.payload;if(!r||r._readableState||typeof r.resume!="function")return e();let n=[];r.on("data",s=>n.push(Buffer.from(s))),r.on("end",()=>{let s=Buffer.concat(n);return t.headers["content-length"]=t.headers["content-length"]||""+s.length,delete t.headers["transfer-encoding"],t._lightMyRequest.payload=s,e()}),r.resume()}function J4(t,e,r,n){return r.once("error",function(s){this.destroyed&&n.destroy(s)}),r.once("close",function(){this.destroyed&&!this._error&&n.destroy()}),_Se(r,()=>t.call(e,r,n))}function Py(t,e,r){if(e=typeof e=="string"?{url:e}:e,e.validate!==!1&&(ySe(typeof t=="function","dispatchFunc should be a function"),!K4(e)))throw new Error(K4.errors.map(o=>o.message));let n=e.server||{},s=e.Request?E1.CustomRequest:E1;if(t.request&&t.request.app===t&&(Object.setPrototypeOf(Object.getPrototypeOf(t.request),s.prototype),Object.setPrototypeOf(Object.getPrototypeOf(t.response),Oy.prototype)),typeof r=="function"){let i=new s(e),o=new Oy(i,r);return J4(t,n,i,o)}else return new Promise((i,o)=>{let a=new s(e),l=new Oy(a,i,o);J4(t,n,a,l)})}function Ad(t,e){typeof e=="string"?this.option={url:e}:this.option=Object.assign({},e),this.dispatch=t,this._hasInvoked=!1,this._promise=null,this.option.autoStart!==!1&&process.nextTick(()=>{this._hasInvoked||this.end()})}var vSe=["delete","get","head","options","patch","post","put","trace"];vSe.forEach(t=>{Ad.prototype[t]=function(e){if(this._hasInvoked===!0||this._promise)throw new Error(xy);return this.option.url=e,this.option.method=t.toUpperCase(),this}});var wSe=["body","cookies","headers","payload","query"];wSe.forEach(t=>{Ad.prototype[t]=function(e){if(this._hasInvoked===!0||this._promise)throw new Error(xy);return this.option[t]=e,this}});Ad.prototype.end=function(t){if(this._hasInvoked===!0||this._promise)throw new Error(xy);if(this._hasInvoked=!0,typeof t=="function")Py(this.dispatch,this.option,t);else return this._promise=Py(this.dispatch,this.option),this._promise};Object.getOwnPropertyNames(Promise.prototype).forEach(t=>{t!=="constructor"&&(Ad.prototype[t]=function(...e){if(!this._promise){if(this._hasInvoked===!0)throw new Error(xy);this._hasInvoked=!0,this._promise=Py(this.dispatch,this.option)}return this._promise[t](...e)})});function bSe(t){return t instanceof E1||t instanceof Oy||t?.constructor?.name==="_CustomLMRRequest"}kd.exports=S1;kd.exports.default=S1;kd.exports.inject=S1;kd.exports.isInjection=bSe});var dH=E((lje,Ld)=>{"use strict";var ESe="5.6.2",SSe=Ex(),Ay=require("http"),TSe=require("diagnostics_channel"),Dd,{kAvvioBoot:Md,kChildren:T1,kServerBindings:X4,kBodyLimit:RSe,kSupportedHTTPMethods:Sa,kRoutePrefix:Q4,kLogLevel:$Se,kLogSerializers:OSe,kHooks:R1,kSchemaController:po,kRequestAcceptVersion:PSe,kReplySerializerDefault:Z4,kContentTypeParser:xSe,kReply:NSe,kRequest:CSe,kFourOhFour:ISe,kState:ht,kOptions:$1,kPluginNameChain:jd,kSchemaErrorFormatter:O1,kErrorHandler:Ny,kKeepAliveConnections:P1,kChildLoggerFactory:x1,kGenReqId:N1,kErrorHandlerAlreadySet:Cy}=Nt(),{createServer:ASe}=Yx(),qd=Np(),Iy=Mp(),kSe=jp(),Ta=Eu(),Ra=_w(),eH=g$(),{Hooks:DSe,hookRunnerApplication:tH,supportedHooks:C1}=Ci(),{createChildLogger:rH,defaultChildLoggerFactory:MSe,createLogger:jSe}=yu(),nH=j$(),{getGenReqId:sH,reqIdGenFactory:uH}=ny(),{buildRouting:qSe,validateBodyLimitOption:LSe,buildRouterOptions:FSe}=a4(),USe=p4(),fH=g4(),BSe=R4(),{appendStackTrace:zSe,AVVIO_ERRORS_MAP:iH,...$a}=Vt(),VSe=U_(),{defaultInitOptions:Yr}=fH,{FST_ERR_ASYNC_CONSTRAINT:HSe,FST_ERR_BAD_URL:GSe,FST_ERR_OPTIONS_NOT_OBJ:WSe,FST_ERR_QSP_NOT_FN:KSe,FST_ERR_SCHEMA_CONTROLLER_BUCKET_OPT_NOT_FN:JSe,FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_OBJ:YSe,FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_ARR:XSe,FST_ERR_INSTANCE_ALREADY_LISTENING:QSe,FST_ERR_REOPENED_CLOSE_SERVER:ZSe,FST_ERR_ROUTE_REWRITE_NOT_STR:eTe,FST_ERR_SCHEMA_ERROR_FORMATTER_NOT_FN:oH,FST_ERR_ERROR_HANDLER_NOT_FN:tTe,FST_ERR_ERROR_HANDLER_ALREADY_SET:rTe,FST_ERR_ROUTE_METHOD_INVALID:nTe}=$a,{buildErrorHandler:aH}=vu(),{FSTWRN004:sTe}=sl(),lH=TSe.channel("fastify.initialization");function I1(t){let{options:e,genReqId:r,disableRequestLogging:n,hasLogger:s,initialConfig:i}=iTe(t,A,N),o=qSe({config:e.routerOptions}),a=USe(e),l=re(o,e),{server:c,listen:u,forceCloseConnections:d,serverHasCloseAllConnections:p,serverHasCloseHttp2Sessions:f,keepAliveConnections:h}=ASe(e,l),m=qd.setupResponseListeners,y=eH.buildSchemaController(null,e.schemaController),g={[ht]:{listening:!1,closing:!1,started:!1,ready:!1,booting:!1,aborted:!1,readyResolver:null},[P1]:h,[Sa]:{bodyless:new Set(["GET","HEAD","TRACE"]),bodywith:new Set(["DELETE","OPTIONS","PATCH","PUT","POST"])},[$1]:e,[T1]:[],[X4]:[],[RSe]:e.bodyLimit,[Q4]:"",[$Se]:"",[OSe]:null,[R1]:new DSe,[po]:y,[O1]:null,[Ny]:aH(),[Cy]:!1,[x1]:e.childLoggerFactory||MSe,[Z4]:null,[xSe]:new Ra(e.bodyLimit,e.onProtoPoisoning||Yr.onProtoPoisoning,e.onConstructorPoisoning||Yr.onConstructorPoisoning),[NSe]:qd.buildReply(qd),[CSe]:Iy.buildRequest(Iy,e.trustProxy),[ISe]:a,[nH.kRegisteredPlugins]:[],[jd]:["fastify"],[Md]:null,[N1]:r,routing:l,delete:function(D,V,B){return o.prepareRoute.call(this,{method:"DELETE",url:D,options:V,handler:B})},get:function(D,V,B){return o.prepareRoute.call(this,{method:"GET",url:D,options:V,handler:B})},head:function(D,V,B){return o.prepareRoute.call(this,{method:"HEAD",url:D,options:V,handler:B})},trace:function(D,V,B){return o.prepareRoute.call(this,{method:"TRACE",url:D,options:V,handler:B})},patch:function(D,V,B){return o.prepareRoute.call(this,{method:"PATCH",url:D,options:V,handler:B})},post:function(D,V,B){return o.prepareRoute.call(this,{method:"POST",url:D,options:V,handler:B})},put:function(D,V,B){return o.prepareRoute.call(this,{method:"PUT",url:D,options:V,handler:B})},options:function(D,V,B){return o.prepareRoute.call(this,{method:"OPTIONS",url:D,options:V,handler:B})},all:function(D,V,B){return o.prepareRoute.call(this,{method:this.supportedMethods,url:D,options:V,handler:B})},route:function(D){return o.route.call(this,{options:D})},hasRoute:function(D){return o.hasRoute.call(this,{options:D})},findRoute:function(D){return o.findRoute(D)},log:e.logger,withTypeProvider:O,addHook:R,addSchema:P,getSchema:y.getSchema.bind(y),getSchemas:y.getSchemas.bind(y),setValidatorCompiler:te,setSerializerCompiler:K,setSchemaController:xt,setReplySerializer:Ar,setSchemaErrorFormatter:H,setGenReqId:Ja,addContentTypeParser:Ra.helpers.addContentTypeParser,hasContentTypeParser:Ra.helpers.hasContentTypeParser,getDefaultJsonParser:Ra.defaultParsers.getDefaultJsonParser,defaultTextParser:Ra.defaultParsers.defaultTextParser,removeContentTypeParser:Ra.helpers.removeContentTypeParser,removeAllContentTypeParsers:Ra.helpers.removeAllContentTypeParsers,register:null,after:null,ready:null,onClose:null,close:null,printPlugins:null,hasPlugin:function(x){return this[nH.kRegisteredPlugins].includes(x)||this[jd].includes(x)},listen:u,server:c,addresses:function(){let x=this[X4].map(D=>D.address());return x.push(this.server.address()),x.filter(D=>D)},decorate:Ta.add,hasDecorator:Ta.exist,decorateReply:Ta.decorateReply,decorateRequest:Ta.decorateRequest,hasRequestDecorator:Ta.existRequest,hasReplyDecorator:Ta.existReply,getDecorator:Ta.getInstanceDecorator,addHttpMethod:Po,inject:$,printRoutes:Oo,setNotFoundHandler:z,setErrorHandler:Y,setChildLoggerFactory:cs,initialConfig:i,addConstraintStrategy:o.addConstraintStrategy.bind(o),hasConstraintStrategy:o.hasConstraintStrategy.bind(o)};Object.defineProperties(g,{listeningOrigin:{get(){let x=this.addresses().slice(-1).pop();if(typeof x=="string")return x;let D=x.family==="IPv6"?`[${x.address}]`:x.address;return`${this[$1].https?"https":"http"}://${D}:${x.port}`}},pluginName:{configurable:!0,get(){return this[jd].length>1?this[jd].join(" -> "):this[jd][0]}},prefix:{configurable:!0,get(){return this[Q4]}},validatorCompiler:{configurable:!0,get(){return this[po].getValidatorCompiler()}},serializerCompiler:{configurable:!0,get(){return this[po].getSerializerCompiler()}},childLoggerFactory:{configurable:!0,get(){return this[x1]}},version:{configurable:!0,get(){return ESe}},errorHandler:{configurable:!0,get(){return this[Ny].func}},genReqId:{configurable:!0,get(){return this[N1]}},supportedMethods:{configurable:!1,get(){return[...this[Sa].bodyless,...this[Sa].bodywith]}}}),e.schemaErrorFormatter&&(cH(e.schemaErrorFormatter),g[O1]=e.schemaErrorFormatter.bind(g));let w=Number(e.pluginTimeout),_=SSe(g,{autostart:!1,timeout:isNaN(w)===!1?w:Yr.pluginTimeout,expose:{use:"register"}});_.override=BSe,_.on("start",()=>g[ht].started=!0),g[Md]=g.ready,g.ready=T,g.printPlugins=_.prettyPrint.bind(_),_.once("preReady",()=>{g.onClose((x,D)=>{g[ht].closing=!0,o.closeRoutes(),tH("preClose",g[Md],g,function(){if(g[ht].listening){if(d==="idle")x.server.closeIdleConnections();else if(p&&d)x.server.closeAllConnections();else if(d===!0)for(let V of g[P1])V.destroy(),g[P1].delete(V)}f&&x.server.closeHttp2Sessions(),!e.serverFactory||g[ht].listening?x.server.close(function(V){V&&V.code!=="ERR_SERVER_NOT_RUNNING"?D(null):D()}):process.nextTick(D,null)})})});let v=new kSe({server:g,config:{}});return g.setNotFoundHandler(),a.arrange404(g),o.setup(e,{avvio:_,fourOhFour:a,hasLogger:s,setupResponseListeners:m,throwIfAlreadyStarted:S,keepAliveConnections:h}),c.on("clientError",e.clientErrorHandler.bind(g)),lH.hasSubscribers&&lH.publish({fastify:g}),"asyncDispose"in Symbol&&(g[Symbol.asyncDispose]=function(){return g.close()}),g;function S(x){if(g[ht].started)throw new QSe(x)}function $(x,D){if(Dd===void 0&&(Dd=Y4()),g[ht].started){if(g[ht].closing){let V=new ZSe;if(D){D(V);return}else return Promise.reject(V)}return Dd(l,x,D)}if(D)this.ready(V=>{V?D(V,null):Dd(l,x,D)});else return Dd((V,B)=>{this.ready(function(ct){if(ct){B.emit("error",ct);return}l(V,B)})},x)}function T(x){if(this[ht].readyResolver!==null){if(x!=null){this[ht].readyResolver.promise.then(()=>x(null,g),x);return}return this[ht].readyResolver.promise}if(process.nextTick(D),this[ht].readyResolver=VSe.withResolvers(),x)this[ht].readyResolver.promise.then(()=>x(null,g),x);else return this[ht].readyResolver.promise;function D(){g[Md]((B,ct)=>{B||g[ht].started||g[ht].ready||g[ht].booting?V(B):(g[ht].booting=!0,tH("onReady",g[Md],g,V)),ct()})}function V(B){if(B=B!=null&&iH[B.code]!=null?zSe(B,new iH[B.code](B.message)):B,B)return g[ht].readyResolver.reject(B);g[ht].readyResolver.resolve(g),g[ht].booting=!1,g[ht].ready=!0,g[ht].readyResolver=null}}function O(){return this}function R(x,D){if(S('Cannot call "addHook"!'),D==null)throw new $a.FST_ERR_HOOK_INVALID_HANDLER(x,D);if(x==="onSend"||x==="preSerialization"||x==="onError"||x==="preParsing"){if(D.constructor.name==="AsyncFunction"&&D.length===4)throw new $a.FST_ERR_HOOK_INVALID_ASYNC_HANDLER}else if(x==="onReady"||x==="onListen"){if(D.constructor.name==="AsyncFunction"&&D.length!==0)throw new $a.FST_ERR_HOOK_INVALID_ASYNC_HANDLER}else if(x==="onRequestAbort"){if(D.constructor.name==="AsyncFunction"&&D.length!==1)throw new $a.FST_ERR_HOOK_INVALID_ASYNC_HANDLER}else if(D.constructor.name==="AsyncFunction"&&D.length===3)throw new $a.FST_ERR_HOOK_INVALID_ASYNC_HANDLER;return x==="onClose"?this.onClose(D.bind(this)):x==="onReady"||x==="onListen"||x==="onRoute"?this[R1].add(x,D):this.after((B,ct)=>{try{V.call(this,x,D),ct(B)}catch(ft){ct(ft)}}),this;function V(B,ct){this[R1].add(B,ct),this[T1].forEach(ft=>V.call(ft,B,ct))}}function P(x){return S('Cannot call "addSchema"!'),this[po].add(x),this[T1].forEach(D=>D.addSchema(x)),this}function A(x,D){x.headers["accept-version"]!==void 0&&(x.headers[PSe]=x.headers["accept-version"],x.headers["accept-version"]=void 0),a.router.lookup(x,D)}function N(x,D,V){if(e.frameworkErrors){let ct=sH(v.server,D),ft=rH(v,e.logger,D,ct),It=new Iy(ct,null,D,null,ft,v),le=new qd(V,It,ft);return n===!1&&ft.info({req:It},"incoming request"),e.frameworkErrors(new GSe(x),It,le)}let B=`{"error":"Bad Request","code":"FST_ERR_BAD_URL","message":"'${x}' is not a valid url component","statusCode":400}`;V.writeHead(400,{"Content-Type":"application/json","Content-Length":B.length}),V.end(B)}function C(x,D,V){if(x!==!1)return function(ct){if(ct){if(e.frameworkErrors){let It=sH(v.server,D),le=rH(v,e.logger,D,It),Mn=new Iy(It,null,D,null,le,v),vr=new qd(V,Mn,le);return n===!1&&le.info({req:Mn},"incoming request"),e.frameworkErrors(new HSe,Mn,vr)}let ft='{"error":"Internal Server Error","message":"Unexpected error from async constraint","statusCode":500}';V.writeHead(500,{"Content-Type":"application/json","Content-Length":ft.length}),V.end(ft)}}}function z(x,D){return S('Cannot call "setNotFoundHandler"!'),a.setNotFoundHandler.call(this,x,D,_,o.routeHandler),this}function te(x){return S('Cannot call "setValidatorCompiler"!'),this[po].setValidatorCompiler(x),this}function H(x){return S('Cannot call "setSchemaErrorFormatter"!'),cH(x),this[O1]=x.bind(this),this}function K(x){return S('Cannot call "setSerializerCompiler"!'),this[po].setSerializerCompiler(x),this}function xt(x){S('Cannot call "setSchemaController"!');let D=this[po],V=eH.buildSchemaController(D,Object.assign({},D.opts,x));return this[po]=V,this.getSchema=V.getSchema.bind(V),this.getSchemas=V.getSchemas.bind(V),this}function Ar(x){return S('Cannot call "setReplySerializer"!'),this[Z4]=x,this}function Y(x){if(S('Cannot call "setErrorHandler"!'),typeof x!="function")throw new tTe;if(!e.allowErrorHandlerOverride&&this[Cy])throw new rTe;return this[Cy]&&sTe("To disable this behavior, set 'allowErrorHandlerOverride' to false or ignore this message. For more information, visit: https://fastify.dev/docs/latest/Reference/Server/#allowerrorhandleroverride"),this[Cy]=!0,this[Ny]=aH(this[Ny],x.bind(this)),this}function cs(x){return S('Cannot call "setChildLoggerFactory"!'),this[x1]=x,this}function Oo(x={}){return x.includeMeta=x.includeHooks?x.includeMeta?C1.concat(x.includeMeta):C1:x.includeMeta,o.printRoutes(x)}function re(x,{rewriteUrl:D,logger:V}){let B;return function(ft,It){if(B===void 0&&(B=x.isAsyncConstraint()),D){ft.originalUrl=ft.url;let le=D.call(g,ft);if(typeof le=="string")ft.url=le;else{let Mn=new eTe(ft.url,typeof le);ft.destroy(Mn)}}x.routing(ft,It,C(B,ft,It))}}function Ja(x){return S('Cannot call "setGenReqId"!'),this[N1]=uH(this[$1].requestIdHeader,x),this}function Po(x,{hasBody:D=!1}={}){if(typeof x!="string"||Ay.METHODS.indexOf(x)===-1)throw new nTe;D===!0?(this[Sa].bodywith.add(x),this[Sa].bodyless.delete(x)):(this[Sa].bodywith.delete(x),this[Sa].bodyless.add(x));let V=x.toLowerCase();return this.hasDecorator(V)||this.decorate(V,function(B,ct,ft){return o.prepareRoute.call(this,{method:x,url:B,options:ct,handler:ft})}),this}}function iTe(t,e,r){if(t&&typeof t!="object")throw new WSe;if(t=Object.assign({},t),t.querystringParser&&typeof t.querystringParser!="function"||t.routerOptions?.querystringParser&&typeof t.routerOptions.querystringParser!="function")throw new KSe(typeof(t.querystringParser??t.routerOptions.querystringParser));if(t.schemaController&&t.schemaController.bucket&&typeof t.schemaController.bucket!="function")throw new JSe(typeof t.schemaController.bucket);LSe(t.bodyLimit);let n=typeof t.requestIdHeader=="string"&&t.requestIdHeader.length!==0?t.requestIdHeader.toLowerCase():t.requestIdHeader===!0&&"request-id",s=uH(n,t.genReqId),i=t.requestIdLogLabel||"reqId";t.bodyLimit=t.bodyLimit||Yr.bodyLimit;let o=t.disableRequestLogging||!1,a=Object.assign({customOptions:{},plugins:[]},t.ajv);if(!a.customOptions||Object.prototype.toString.call(a.customOptions)!=="[object Object]")throw new YSe(typeof a.customOptions);if(!a.plugins||!Array.isArray(a.plugins))throw new XSe(typeof a.plugins);let{logger:l,hasLogger:c}=jSe(t);t.connectionTimeout=t.connectionTimeout||Yr.connectionTimeout,t.keepAliveTimeout=t.keepAliveTimeout||Yr.keepAliveTimeout,t.maxRequestsPerSocket=t.maxRequestsPerSocket||Yr.maxRequestsPerSocket,t.requestTimeout=t.requestTimeout||Yr.requestTimeout,t.logger=l,t.requestIdHeader=n,t.requestIdLogLabel=i,t.disableRequestLogging=o,t.ajv=a,t.clientErrorHandler=t.clientErrorHandler||aTe,t.allowErrorHandlerOverride=t.allowErrorHandlerOverride??Yr.allowErrorHandlerOverride;let u=fH(t);return t.exposeHeadRoutes=u.exposeHeadRoutes,t.http2SessionTimeout=u.http2SessionTimeout,t.routerOptions=FSe(t,{defaultRoute:e,onBadUrl:r,ignoreTrailingSlash:Yr.ignoreTrailingSlash,ignoreDuplicateSlashes:Yr.ignoreDuplicateSlashes,maxParamLength:Yr.maxParamLength,allowUnsafeRegex:Yr.allowUnsafeRegex,buildPrettyMeta:oTe,useSemicolonDelimiter:Yr.useSemicolonDelimiter}),{options:t,genReqId:s,disableRequestLogging:o,hasLogger:c,initialConfig:u}}function oTe(t){let e={};return["errorHandler","logLevel","logSerializers"].concat(C1).forEach(n=>{e[n]=t.store[n]}),Object.assign({},e)}function aTe(t,e){if(t.code==="ECONNRESET"||e.destroyed)return;let r,n,s,i;t.code==="ERR_HTTP_REQUEST_TIMEOUT"?(n="408",s=Ay.STATUS_CODES[n],r=`{"error":"${s}","message":"Client Timeout","statusCode":408}`,i="timeout"):t.code==="HPE_HEADER_OVERFLOW"?(n="431",s=Ay.STATUS_CODES[n],r=`{"error":"${s}","message":"Exceeded maximum allowed HTTP header size","statusCode":431}`,i="header_overflow"):(n="400",s=Ay.STATUS_CODES[n],r=`{"error":"${s}","message":"Client Error","statusCode":400}`,i="error"),this.log.trace({err:t},`client ${i}`),e.writable&&e.write(`HTTP/1.1 ${n} ${s}\r
Content-Length: ${r.length}\r
Content-Type: application/json\r
\r
${r}`),e.destroy(t)}function cH(t){if(typeof t!="function")throw new oH(typeof t);if(t.constructor.name==="AsyncFunction")throw new oH("AsyncFunction")}Ld.exports=I1;Ld.exports.errorCodes=$a;Ld.exports.fastify=I1;Ld.exports.default=I1});var pH=E(Oa=>{"use strict";Object.defineProperty(Oa,"__esModule",{value:!0});Oa.range=Oa.balanced=void 0;var lTe=(t,e,r)=>{let n=t instanceof RegExp?hH(t,r):t,s=e instanceof RegExp?hH(e,r):e,i=n!==null&&s!=null&&(0,Oa.range)(n,s,r);return i&&{start:i[0],end:i[1],pre:r.slice(0,i[0]),body:r.slice(i[0]+n.length,i[1]),post:r.slice(i[1]+s.length)}};Oa.balanced=lTe;var hH=(t,e)=>{let r=e.match(t);return r?r[0]:null},cTe=(t,e,r)=>{let n,s,i,o,a,l=r.indexOf(t),c=r.indexOf(e,l+1),u=l;if(l>=0&&c>0){if(t===e)return[l,c];for(n=[],i=r.length;u>=0&&!a;){if(u===l)n.push(u),l=r.indexOf(t,u+1);else if(n.length===1){let d=n.pop();d!==void 0&&(a=[d,c])}else s=n.pop(),s!==void 0&&s<i&&(i=s,o=c),c=r.indexOf(e,u+1);u=l<c&&l>=0?l:c}n.length&&o!==void 0&&(a=[i,o])}return a};Oa.range=cTe});var bH=E(D1=>{"use strict";Object.defineProperty(D1,"__esModule",{value:!0});D1.expand=ETe;var mH=pH(),gH="\0SLASH"+Math.random()+"\0",yH="\0OPEN"+Math.random()+"\0",k1="\0CLOSE"+Math.random()+"\0",_H="\0COMMA"+Math.random()+"\0",vH="\0PERIOD"+Math.random()+"\0",uTe=new RegExp(gH,"g"),fTe=new RegExp(yH,"g"),dTe=new RegExp(k1,"g"),hTe=new RegExp(_H,"g"),pTe=new RegExp(vH,"g"),mTe=/\\\\/g,gTe=/\\{/g,yTe=/\\}/g,_Te=/\\,/g,vTe=/\\./g;function A1(t){return isNaN(t)?t.charCodeAt(0):parseInt(t,10)}function wTe(t){return t.replace(mTe,gH).replace(gTe,yH).replace(yTe,k1).replace(_Te,_H).replace(vTe,vH)}function bTe(t){return t.replace(uTe,"\\").replace(fTe,"{").replace(dTe,"}").replace(hTe,",").replace(pTe,".")}function wH(t){if(!t)return[""];let e=[],r=(0,mH.balanced)("{","}",t);if(!r)return t.split(",");let{pre:n,body:s,post:i}=r,o=n.split(",");o[o.length-1]+="{"+s+"}";let a=wH(i);return i.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),e.push.apply(e,o),e}function ETe(t){return t?(t.slice(0,2)==="{}"&&(t="\\{\\}"+t.slice(2)),Fd(wTe(t),!0).map(bTe)):[]}function STe(t){return"{"+t+"}"}function TTe(t){return/^-?0\d/.test(t)}function RTe(t,e){return t<=e}function $Te(t,e){return t>=e}function Fd(t,e){let r=[],n=(0,mH.balanced)("{","}",t);if(!n)return[t];let s=n.pre,i=n.post.length?Fd(n.post,!1):[""];if(/\$$/.test(n.pre))for(let o=0;o<i.length;o++){let a=s+"{"+n.body+"}"+i[o];r.push(a)}else{let o=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),a=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),l=o||a,c=n.body.indexOf(",")>=0;if(!l&&!c)return n.post.match(/,(?!,).*\}/)?(t=n.pre+"{"+n.body+k1+n.post,Fd(t)):[t];let u;if(l)u=n.body.split(/\.\./);else if(u=wH(n.body),u.length===1&&u[0]!==void 0&&(u=Fd(u[0],!1).map(STe),u.length===1))return i.map(p=>n.pre+u[0]+p);let d;if(l&&u[0]!==void 0&&u[1]!==void 0){let p=A1(u[0]),f=A1(u[1]),h=Math.max(u[0].length,u[1].length),m=u.length===3&&u[2]!==void 0?Math.abs(A1(u[2])):1,y=RTe;f<p&&(m*=-1,y=$Te);let w=u.some(TTe);d=[];for(let _=p;y(_,f);_+=m){let v;if(a)v=String.fromCharCode(_),v==="\\"&&(v="");else if(v=String(_),w){let S=h-v.length;if(S>0){let $=new Array(S+1).join("0");_<0?v="-"+$+v.slice(1):v=$+v}}d.push(v)}}else{d=[];for(let p=0;p<u.length;p++)d.push.apply(d,Fd(u[p],!1))}for(let p=0;p<d.length;p++)for(let f=0;f<i.length;f++){let h=s+d[p]+i[f];(!e||l||h)&&r.push(h)}}return r}});var EH=E(ky=>{"use strict";Object.defineProperty(ky,"__esModule",{value:!0});ky.assertValidPattern=void 0;var OTe=1024*64,PTe=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>OTe)throw new TypeError("pattern is too long")};ky.assertValidPattern=PTe});var TH=E(Dy=>{"use strict";Object.defineProperty(Dy,"__esModule",{value:!0});Dy.parseClass=void 0;var xTe={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},Ud=t=>t.replace(/[[\]\\-]/g,"\\$&"),NTe=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),SH=t=>t.join(""),CTe=(t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],s=[],i=r+1,o=!1,a=!1,l=!1,c=!1,u=r,d="";e:for(;i<t.length;){let m=t.charAt(i);if((m==="!"||m==="^")&&i===r+1){c=!0,i++;continue}if(m==="]"&&o&&!l){u=i+1;break}if(o=!0,m==="\\"&&!l){l=!0,i++;continue}if(m==="["&&!l){for(let[y,[g,w,_]]of Object.entries(xTe))if(t.startsWith(y,i)){if(d)return["$.",!1,t.length-r,!0];i+=y.length,_?s.push(g):n.push(g),a=a||w;continue e}}if(l=!1,d){m>d?n.push(Ud(d)+"-"+Ud(m)):m===d&&n.push(Ud(m)),d="",i++;continue}if(t.startsWith("-]",i+1)){n.push(Ud(m+"-")),i+=2;continue}if(t.startsWith("-",i+1)){d=m,i+=2;continue}n.push(Ud(m)),i++}if(u<i)return["",!1,0,!1];if(!n.length&&!s.length)return["$.",!1,t.length-r,!0];if(s.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!c){let m=n[0].length===2?n[0].slice(-1):n[0];return[NTe(m),!1,u-r,!1]}let p="["+(c?"^":"")+SH(n)+"]",f="["+(c?"":"^")+SH(s)+"]";return[n.length&&s.length?"("+p+"|"+f+")":n.length?p:f,a,u-r,!0]};Dy.parseClass=CTe});var jy=E(My=>{"use strict";Object.defineProperty(My,"__esModule",{value:!0});My.unescape=void 0;var ITe=(t,{windowsPathsNoEscape:e=!1,magicalBraces:r=!0}={})=>r?e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1"):e?t.replace(/\[([^\/\\{}])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\{}])\]/g,"$1$2").replace(/\\([^\/{}])/g,"$1");My.unescape=ITe});var q1=E(zy=>{"use strict";Object.defineProperty(zy,"__esModule",{value:!0});zy.AST=void 0;var ATe=TH(),qy=jy(),kTe=new Set(["!","?","+","*","@"]),RH=t=>kTe.has(t),DTe="(?!(?:^|/)\\.\\.?(?:$|/))",Ly="(?!\\.)",MTe=new Set(["[","."]),jTe=new Set(["..","."]),qTe=new Set("().*{}+?[]^$\\!"),LTe=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),j1="[^/]",$H=j1+"*?",OH=j1+"+?",Ct,Dt,_i,lt,Ot,mo,Pa,go,Ms,xa,zd,Uy,PH,xc,Fy,Vd,M1,By,xH,Xr=class{constructor(e,r,n={}){At(this,Uy);At(this,Vd);qh(this,"type");At(this,Ct,void 0);At(this,Dt,void 0);At(this,_i,!1);At(this,lt,[]);At(this,Ot,void 0);At(this,mo,void 0);At(this,Pa,void 0);At(this,go,!1);At(this,Ms,void 0);At(this,xa,void 0);At(this,zd,!1);this.type=e,e&&ut(this,Dt,!0),ut(this,Ot,r),ut(this,Ct,L(this,Ot)?L(L(this,Ot),Ct):this),ut(this,Ms,L(this,Ct)===this?n:L(L(this,Ct),Ms)),ut(this,Pa,L(this,Ct)===this?[]:L(L(this,Ct),Pa)),e==="!"&&!L(L(this,Ct),go)&&L(this,Pa).push(this),ut(this,mo,L(this,Ot)?L(L(this,Ot),lt).length:0)}get hasMagic(){if(L(this,Dt)!==void 0)return L(this,Dt);for(let e of L(this,lt))if(typeof e!="string"&&(e.type||e.hasMagic))return ut(this,Dt,!0);return L(this,Dt)}toString(){return L(this,xa)!==void 0?L(this,xa):this.type?ut(this,xa,this.type+"("+L(this,lt).map(e=>String(e)).join("|")+")"):ut(this,xa,L(this,lt).map(e=>String(e)).join(""))}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof Xr&&L(r,Ot)===this))throw new Error("invalid part: "+r);L(this,lt).push(r)}}toJSON(){let e=this.type===null?L(this,lt).slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...L(this,lt).map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===L(this,Ct)||L(L(this,Ct),go)&&L(this,Ot)?.type==="!")&&e.push({}),e}isStart(){if(L(this,Ct)===this)return!0;if(!L(this,Ot)?.isStart())return!1;if(L(this,mo)===0)return!0;let e=L(this,Ot);for(let r=0;r<L(this,mo);r++){let n=L(e,lt)[r];if(!(n instanceof Xr&&n.type==="!"))return!1}return!0}isEnd(){if(L(this,Ct)===this||L(this,Ot)?.type==="!")return!0;if(!L(this,Ot)?.isEnd())return!1;if(!this.type)return L(this,Ot)?.isEnd();let e=L(this,Ot)?L(L(this,Ot),lt).length:0;return L(this,mo)===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new Xr(this.type,e);for(let n of L(this,lt))r.copyIn(n);return r}static fromGlob(e,r={}){var s;let n=new Xr(null,void 0,r);return xi(s=Xr,xc,Fy).call(s,e,n,0,r),n}toMMPattern(){if(this!==L(this,Ct))return L(this,Ct).toMMPattern();let e=this.toString(),[r,n,s,i]=this.toRegExpSource();if(!(s||L(this,Dt)||L(this,Ms).nocase&&!L(this,Ms).nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let a=(L(this,Ms).nocase?"i":"")+(i?"u":"");return Object.assign(new RegExp(`^${r}$`,a),{_src:r,_glob:e})}get options(){return L(this,Ms)}toRegExpSource(e){let r=e??!!L(this,Ms).dot;if(L(this,Ct)===this&&xi(this,Uy,PH).call(this),!this.type){let l=this.isStart()&&this.isEnd()&&!L(this,lt).some(f=>typeof f!="string"),c=L(this,lt).map(f=>{var w;let[h,m,y,g]=typeof f=="string"?xi(w=Xr,By,xH).call(w,f,L(this,Dt),l):f.toRegExpSource(e);return ut(this,Dt,L(this,Dt)||y),ut(this,_i,L(this,_i)||g),h}).join(""),u="";if(this.isStart()&&typeof L(this,lt)[0]=="string"&&!(L(this,lt).length===1&&jTe.has(L(this,lt)[0]))){let h=MTe,m=r&&h.has(c.charAt(0))||c.startsWith("\\.")&&h.has(c.charAt(2))||c.startsWith("\\.\\.")&&h.has(c.charAt(4)),y=!r&&!e&&h.has(c.charAt(0));u=m?DTe:y?Ly:""}let d="";return this.isEnd()&&L(L(this,Ct),go)&&L(this,Ot)?.type==="!"&&(d="(?:$|\\/)"),[u+c+d,(0,qy.unescape)(c),ut(this,Dt,!!L(this,Dt)),L(this,_i)]}let n=this.type==="*"||this.type==="+",s=this.type==="!"?"(?:(?!(?:":"(?:",i=xi(this,Vd,M1).call(this,r);if(this.isStart()&&this.isEnd()&&!i&&this.type!=="!"){let l=this.toString();return ut(this,lt,[l]),this.type=null,ut(this,Dt,void 0),[l,(0,qy.unescape)(this.toString()),!1,!1]}let o=!n||e||r||!Ly?"":xi(this,Vd,M1).call(this,!0);o===i&&(o=""),o&&(i=`(?:${i})(?:${o})*?`);let a="";if(this.type==="!"&&L(this,zd))a=(this.isStart()&&!r?Ly:"")+OH;else{let l=this.type==="!"?"))"+(this.isStart()&&!r&&!e?Ly:"")+$H+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&o?")":this.type==="*"&&o?")?":`)${this.type}`;a=s+i+l}return[a,(0,qy.unescape)(i),ut(this,Dt,!!L(this,Dt)),L(this,_i)]}},Bd=Xr;Ct=new WeakMap,Dt=new WeakMap,_i=new WeakMap,lt=new WeakMap,Ot=new WeakMap,mo=new WeakMap,Pa=new WeakMap,go=new WeakMap,Ms=new WeakMap,xa=new WeakMap,zd=new WeakMap,Uy=new WeakSet,PH=function(){if(this!==L(this,Ct))throw new Error("should only call on root");if(L(this,go))return this;this.toString(),ut(this,go,!0);let e;for(;e=L(this,Pa).pop();){if(e.type!=="!")continue;let r=e,n=L(r,Ot);for(;n;){for(let s=L(r,mo)+1;!n.type&&s<L(n,lt).length;s++)for(let i of L(e,lt)){if(typeof i=="string")throw new Error("string part in extglob AST??");i.copyIn(L(n,lt)[s])}r=n,n=L(r,Ot)}}return this},xc=new WeakSet,Fy=function(e,r,n,s){var f,h;let i=!1,o=!1,a=-1,l=!1;if(r.type===null){let m=n,y="";for(;m<e.length;){let g=e.charAt(m++);if(i||g==="\\"){i=!i,y+=g;continue}if(o){m===a+1?(g==="^"||g==="!")&&(l=!0):g==="]"&&!(m===a+2&&l)&&(o=!1),y+=g;continue}else if(g==="["){o=!0,a=m,l=!1,y+=g;continue}if(!s.noext&&RH(g)&&e.charAt(m)==="("){r.push(y),y="";let w=new Xr(g,r);m=xi(f=Xr,xc,Fy).call(f,e,w,m,s),r.push(w);continue}y+=g}return r.push(y),m}let c=n+1,u=new Xr(null,r),d=[],p="";for(;c<e.length;){let m=e.charAt(c++);if(i||m==="\\"){i=!i,p+=m;continue}if(o){c===a+1?(m==="^"||m==="!")&&(l=!0):m==="]"&&!(c===a+2&&l)&&(o=!1),p+=m;continue}else if(m==="["){o=!0,a=c,l=!1,p+=m;continue}if(RH(m)&&e.charAt(c)==="("){u.push(p),p="";let y=new Xr(m,u);u.push(y),c=xi(h=Xr,xc,Fy).call(h,e,y,c,s);continue}if(m==="|"){u.push(p),p="",d.push(u),u=new Xr(null,r);continue}if(m===")")return p===""&&L(r,lt).length===0&&ut(r,zd,!0),u.push(p),p="",r.push(...d,u),c;p+=m}return r.type=null,ut(r,Dt,void 0),ut(r,lt,[e.substring(n-1)]),c},Vd=new WeakSet,M1=function(e){return L(this,lt).map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,s,i,o]=r.toRegExpSource(e);return ut(this,_i,L(this,_i)||o),n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")},By=new WeakSet,xH=function(e,r,n=!1){let s=!1,i="",o=!1;for(let a=0;a<e.length;a++){let l=e.charAt(a);if(s){s=!1,i+=(qTe.has(l)?"\\":"")+l;continue}if(l==="\\"){a===e.length-1?i+="\\\\":s=!0;continue}if(l==="["){let[c,u,d,p]=(0,ATe.parseClass)(e,a);if(d){i+=c,o=o||u,a+=d-1,r=r||p;continue}}if(l==="*"){i+=n&&e==="*"?OH:$H,r=!0;continue}if(l==="?"){i+=j1,r=!0;continue}i+=LTe(l)}return[i,(0,qy.unescape)(e),!!r,o]},At(Bd,xc),At(Bd,By);zy.AST=Bd});var L1=E(Vy=>{"use strict";Object.defineProperty(Vy,"__esModule",{value:!0});Vy.escape=void 0;var FTe=(t,{windowsPathsNoEscape:e=!1,magicalBraces:r=!1}={})=>r?e?t.replace(/[?*()[\]{}]/g,"[$&]"):t.replace(/[?*()[\]\\{}]/g,"\\$&"):e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&");Vy.escape=FTe});var yo=E(J=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});J.unescape=J.escape=J.AST=J.Minimatch=J.match=J.makeRe=J.braceExpand=J.defaults=J.filter=J.GLOBSTAR=J.sep=J.minimatch=void 0;var UTe=bH(),Hy=EH(),IH=q1(),BTe=L1(),zTe=jy(),VTe=(t,e,r={})=>((0,Hy.assertValidPattern)(e),!r.nocomment&&e.charAt(0)==="#"?!1:new Na(e,r).match(t));J.minimatch=VTe;var HTe=/^\*+([^+@!?\*\[\(]*)$/,GTe=t=>e=>!e.startsWith(".")&&e.endsWith(t),WTe=t=>e=>e.endsWith(t),KTe=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),JTe=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),YTe=/^\*+\.\*+$/,XTe=t=>!t.startsWith(".")&&t.includes("."),QTe=t=>t!=="."&&t!==".."&&t.includes("."),ZTe=/^\.\*+$/,eRe=t=>t!=="."&&t!==".."&&t.startsWith("."),tRe=/^\*+$/,rRe=t=>t.length!==0&&!t.startsWith("."),nRe=t=>t.length!==0&&t!=="."&&t!=="..",sRe=/^\?+([^+@!?\*\[\(]*)?$/,iRe=([t,e=""])=>{let r=AH([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},oRe=([t,e=""])=>{let r=kH([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},aRe=([t,e=""])=>{let r=kH([t]);return e?n=>r(n)&&n.endsWith(e):r},lRe=([t,e=""])=>{let r=AH([t]);return e?n=>r(n)&&n.endsWith(e):r},AH=([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},kH=([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},DH=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",NH={win32:{sep:"\\"},posix:{sep:"/"}};J.sep=DH==="win32"?NH.win32.sep:NH.posix.sep;J.minimatch.sep=J.sep;J.GLOBSTAR=Symbol("globstar **");J.minimatch.GLOBSTAR=J.GLOBSTAR;var cRe="[^/]",uRe=cRe+"*?",fRe="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",dRe="(?:(?!(?:\\/|^)\\.).)*?",hRe=(t,e={})=>r=>(0,J.minimatch)(r,t,e);J.filter=hRe;J.minimatch.filter=J.filter;var xn=(t,e={})=>Object.assign({},t,e),pRe=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return J.minimatch;let e=J.minimatch;return Object.assign((n,s,i={})=>e(n,s,xn(t,i)),{Minimatch:class extends e.Minimatch{constructor(s,i={}){super(s,xn(t,i))}static defaults(s){return e.defaults(xn(t,s)).Minimatch}},AST:class extends e.AST{constructor(s,i,o={}){super(s,i,xn(t,o))}static fromGlob(s,i={}){return e.AST.fromGlob(s,xn(t,i))}},unescape:(n,s={})=>e.unescape(n,xn(t,s)),escape:(n,s={})=>e.escape(n,xn(t,s)),filter:(n,s={})=>e.filter(n,xn(t,s)),defaults:n=>e.defaults(xn(t,n)),makeRe:(n,s={})=>e.makeRe(n,xn(t,s)),braceExpand:(n,s={})=>e.braceExpand(n,xn(t,s)),match:(n,s,i={})=>e.match(n,s,xn(t,i)),sep:e.sep,GLOBSTAR:J.GLOBSTAR})};J.defaults=pRe;J.minimatch.defaults=J.defaults;var mRe=(t,e={})=>((0,Hy.assertValidPattern)(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,UTe.expand)(t));J.braceExpand=mRe;J.minimatch.braceExpand=J.braceExpand;var gRe=(t,e={})=>new Na(t,e).makeRe();J.makeRe=gRe;J.minimatch.makeRe=J.makeRe;var yRe=(t,e,r={})=>{let n=new Na(e,r);return t=t.filter(s=>n.match(s)),n.options.nonull&&!t.length&&t.push(e),t};J.match=yRe;J.minimatch.match=J.match;var CH=/[?*]|[+@!]\(.*?\)|\[|\]/,_Re=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Na=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){(0,Hy.assertValidPattern)(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||DH,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...i)=>console.error(...i)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(i=>this.slashSplit(i));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let s=this.globParts.map((i,o,a)=>{if(this.isWindows&&this.windowsNoMagicRoot){let l=i[0]===""&&i[1]===""&&(i[2]==="?"||!CH.test(i[2]))&&!CH.test(i[3]),c=/^[a-z]:/i.test(i[0]);if(l)return[...i.slice(0,4),...i.slice(4).map(u=>this.parse(u))];if(c)return[i[0],...i.slice(1).map(u=>this.parse(u))]}return i.map(l=>this.parse(l))});if(this.debug(this.pattern,s),this.set=s.filter(i=>i.indexOf(!1)===-1),this.isWindows)for(let i=0;i<this.set.length;i++){let o=this.set[i];o[0]===""&&o[1]===""&&this.globParts[i][2]==="?"&&typeof o[3]=="string"&&/^[a-z]:$/i.test(o[3])&&(o[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let s=0;s<e[n].length;s++)e[n][s]==="**"&&(e[n][s]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let s=n;for(;r[s+1]==="**";)s++;s!==n&&r.splice(n,s-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,s)=>{let i=n[n.length-1];return s==="**"&&i==="**"?n:s===".."&&i&&i!==".."&&i!=="."&&i!=="**"?(n.pop(),n):(n.push(s),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let s=1;s<e.length-1;s++){let i=e[s];s===1&&i===""&&e[0]===""||(i==="."||i==="")&&(r=!0,e.splice(s,1),s--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let s=e[n-1];s&&s!=="."&&s!==".."&&s!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let s=-1;for(;(s=n.indexOf("**",s+1))!==-1;){let o=s;for(;n[o+1]==="**";)o++;o>s&&n.splice(s+1,o-s);let a=n[s+1],l=n[s+2],c=n[s+3];if(a!==".."||!l||l==="."||l===".."||!c||c==="."||c==="..")continue;r=!0,n.splice(s,1);let u=n.slice(0);u[s]="**",e.push(u),s--}if(!this.preserveMultipleSlashes){for(let o=1;o<n.length-1;o++){let a=n[o];o===1&&a===""&&n[0]===""||(a==="."||a==="")&&(r=!0,n.splice(o,1),o--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let i=0;for(;(i=n.indexOf("..",i+1))!==-1;){let o=n[i-1];if(o&&o!=="."&&o!==".."&&o!=="**"){r=!0;let l=i===1&&n[i+1]==="**"?["."]:[];n.splice(i-1,2,...l),n.length===0&&n.push(""),i-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let s=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);if(s){e[r]=[],e[n]=s;break}}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let s=0,i=0,o=[],a="";for(;s<e.length&&i<r.length;)if(e[s]===r[i])o.push(a==="b"?r[i]:e[s]),s++,i++;else if(n&&e[s]==="**"&&r[i]===e[s+1])o.push(e[s]),s++;else if(n&&r[i]==="**"&&e[s]===r[i+1])o.push(r[i]),i++;else if(e[s]==="*"&&r[i]&&(this.options.dot||!r[i].startsWith("."))&&r[i]!=="**"){if(a==="b")return!1;a="a",o.push(e[s]),s++,i++}else if(r[i]==="*"&&e[s]&&(this.options.dot||!e[s].startsWith("."))&&e[s]!=="**"){if(a==="a")return!1;a="b",o.push(r[i]),s++,i++}else return!1;return e.length===r.length&&o}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let s=0;s<e.length&&e.charAt(s)==="!";s++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let s=this.options;if(this.isWindows){let m=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),y=!m&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),g=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),w=!g&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),_=y?3:m?0:void 0,v=w?3:g?0:void 0;if(typeof _=="number"&&typeof v=="number"){let[S,$]=[e[_],r[v]];S.toLowerCase()===$.toLowerCase()&&(r[v]=S,v>_?r=r.slice(v):_>v&&(e=e.slice(_)))}}let{optimizationLevel:i=1}=this.options;i>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var o=0,a=0,l=e.length,c=r.length;o<l&&a<c;o++,a++){this.debug("matchOne loop");var u=r[a],d=e[o];if(this.debug(r,u,d),u===!1)return!1;if(u===J.GLOBSTAR){this.debug("GLOBSTAR",[r,u,d]);var p=o,f=a+1;if(f===c){for(this.debug("** at the end");o<l;o++)if(e[o]==="."||e[o]===".."||!s.dot&&e[o].charAt(0)===".")return!1;return!0}for(;p<l;){var h=e[p];if(this.debug(`
globstar while`,e,p,r,f,h),this.matchOne(e.slice(p),r.slice(f),n))return this.debug("globstar found match!",p,l,h),!0;if(h==="."||h===".."||!s.dot&&h.charAt(0)==="."){this.debug("dot detected!",e,p,r,f);break}this.debug("globstar swallow a segment, and continue"),p++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,p,r,f),p===l))}let m;if(typeof u=="string"?(m=d===u,this.debug("string match",u,d,m)):(m=u.test(d),this.debug("pattern match",u,d,m)),!m)return!1}if(o===l&&a===c)return!0;if(o===l)return n;if(a===c)return o===l-1&&e[o]==="";throw new Error("wtf?")}braceExpand(){return(0,J.braceExpand)(this.pattern,this.options)}parse(e){(0,Hy.assertValidPattern)(e);let r=this.options;if(e==="**")return J.GLOBSTAR;if(e==="")return"";let n,s=null;(n=e.match(tRe))?s=r.dot?nRe:rRe:(n=e.match(HTe))?s=(r.nocase?r.dot?JTe:KTe:r.dot?WTe:GTe)(n[1]):(n=e.match(sRe))?s=(r.nocase?r.dot?oRe:iRe:r.dot?aRe:lRe)(n):(n=e.match(YTe))?s=r.dot?QTe:XTe:(n=e.match(ZTe))&&(s=eRe);let i=IH.AST.fromGlob(e,this.options).toMMPattern();return s&&typeof i=="object"&&Reflect.defineProperty(i,"test",{value:s}),i}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?uRe:r.dot?fRe:dRe,s=new Set(r.nocase?["i"]:[]),i=e.map(l=>{let c=l.map(d=>{if(d instanceof RegExp)for(let p of d.flags.split(""))s.add(p);return typeof d=="string"?_Re(d):d===J.GLOBSTAR?J.GLOBSTAR:d._src});c.forEach((d,p)=>{let f=c[p+1],h=c[p-1];d!==J.GLOBSTAR||h===J.GLOBSTAR||(h===void 0?f!==void 0&&f!==J.GLOBSTAR?c[p+1]="(?:\\/|"+n+"\\/)?"+f:c[p]=n:f===void 0?c[p-1]=h+"(?:\\/|\\/"+n+")?":f!==J.GLOBSTAR&&(c[p-1]=h+"(?:\\/|\\/"+n+"\\/)"+f,c[p+1]=J.GLOBSTAR))});let u=c.filter(d=>d!==J.GLOBSTAR);if(this.partial&&u.length>=1){let d=[];for(let p=1;p<=u.length;p++)d.push(u.slice(0,p).join("/"));return"(?:"+d.join("|")+")"}return u.join("/")}).join("|"),[o,a]=e.length>1?["(?:",")"]:["",""];i="^"+o+i+a+"$",this.partial&&(i="^(?:\\/|"+o+i.slice(1,-1)+a+")$"),this.negate&&(i="^(?!"+i+").+$");try{this.regexp=new RegExp(i,[...s].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let s=this.slashSplit(e);this.debug(this.pattern,"split",s);let i=this.set;this.debug(this.pattern,"set",i);let o=s[s.length-1];if(!o)for(let a=s.length-2;!o&&a>=0;a--)o=s[a];for(let a=0;a<i.length;a++){let l=i[a],c=s;if(n.matchBase&&l.length===1&&(c=[o]),this.matchOne(c,l,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return J.minimatch.defaults(e).Minimatch}};J.Minimatch=Na;var vRe=q1();Object.defineProperty(J,"AST",{enumerable:!0,get:function(){return vRe.AST}});var wRe=L1();Object.defineProperty(J,"escape",{enumerable:!0,get:function(){return wRe.escape}});var bRe=jy();Object.defineProperty(J,"unescape",{enumerable:!0,get:function(){return bRe.unescape}});J.minimatch.AST=IH.AST;J.minimatch.Minimatch=Na;J.minimatch.escape=BTe.escape;J.minimatch.unescape=zTe.unescape});var FH=E(Ky=>{"use strict";Object.defineProperty(Ky,"__esModule",{value:!0});Ky.LRUCache=void 0;var ERe=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,jH=new Set,F1=typeof process=="object"&&process?process:{},qH=(t,e,r,n)=>{typeof F1.emitWarning=="function"?F1.emitWarning(t,e,r,n):console.error(`[${r}] ${e}: ${t}`)},Wy=globalThis.AbortController,MH=globalThis.AbortSignal;if(typeof Wy>"u"){MH=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,s){this._onabort.push(s)}},Wy=class{constructor(){e()}signal=new MH;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let s of this.signal._onabort)s(n);this.signal.onabort?.(n)}}};let t=F1.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,qH("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var SRe=t=>!jH.has(t),Eje=Symbol("type"),_o=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),LH=t=>_o(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?Cc:null:null,Cc=class extends Array{constructor(e){super(e),this.fill(0)}},Ic,Nc=class{heap;length;static create(e){let r=LH(e);if(!r)return[];ut(Nc,Ic,!0);let n=new Nc(e,r);return ut(Nc,Ic,!1),n}constructor(e,r){if(!L(Nc,Ic))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},Gy=Nc;Ic=new WeakMap,At(Gy,Ic,!1);var Hd=class{#e;#r;#s;#c;#a;#R;#y;#f;get perf(){return this.#f}ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#i;#m;#u;#o;#n;#v;#S;#_;#d;#P;#h;#E;#T;#p;#g;#w;#$;#t;#k;static unsafeExposeInternals(e){return{starts:e.#T,ttls:e.#p,autopurgeTimers:e.#g,sizes:e.#E,keyMap:e.#u,keyList:e.#o,valList:e.#n,next:e.#v,prev:e.#S,get head(){return e.#_},get tail(){return e.#d},free:e.#P,isBackgroundFetch:r=>e.#l(r),backgroundFetch:(r,n,s,i)=>e.#B(r,n,s,i),moveToTail:r=>e.#M(r),indexes:r=>e.#N(r),rindexes:r=>e.#C(r),isStale:r=>e.#b(r)}}get max(){return this.#e}get maxSize(){return this.#r}get calculatedSize(){return this.#m}get size(){return this.#i}get fetchMethod(){return this.#R}get memoMethod(){return this.#y}get dispose(){return this.#s}get onInsert(){return this.#c}get disposeAfter(){return this.#a}constructor(e){let{max:r=0,ttl:n,ttlResolution:s=1,ttlAutopurge:i,updateAgeOnGet:o,updateAgeOnHas:a,allowStale:l,dispose:c,onInsert:u,disposeAfter:d,noDisposeOnSet:p,noUpdateTTL:f,maxSize:h=0,maxEntrySize:m=0,sizeCalculation:y,fetchMethod:g,memoMethod:w,noDeleteOnFetchRejection:_,noDeleteOnStaleGet:v,allowStaleOnFetchRejection:S,allowStaleOnFetchAbort:$,ignoreFetchAbort:T,perf:O}=e;if(O!==void 0&&typeof O?.now!="function")throw new TypeError("perf option must have a now() method if specified");if(this.#f=O??ERe,r!==0&&!_o(r))throw new TypeError("max option must be a nonnegative integer");let R=r?LH(r):Array;if(!R)throw new Error("invalid max value: "+r);if(this.#e=r,this.#r=h,this.maxEntrySize=m||this.#r,this.sizeCalculation=y,this.sizeCalculation){if(!this.#r&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(w!==void 0&&typeof w!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#y=w,g!==void 0&&typeof g!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#R=g,this.#$=!!g,this.#u=new Map,this.#o=new Array(r).fill(void 0),this.#n=new Array(r).fill(void 0),this.#v=new R(r),this.#S=new R(r),this.#_=0,this.#d=0,this.#P=Gy.create(r),this.#i=0,this.#m=0,typeof c=="function"&&(this.#s=c),typeof u=="function"&&(this.#c=u),typeof d=="function"?(this.#a=d,this.#h=[]):(this.#a=void 0,this.#h=void 0),this.#w=!!this.#s,this.#k=!!this.#c,this.#t=!!this.#a,this.noDisposeOnSet=!!p,this.noUpdateTTL=!!f,this.noDeleteOnFetchRejection=!!_,this.allowStaleOnFetchRejection=!!S,this.allowStaleOnFetchAbort=!!$,this.ignoreFetchAbort=!!T,this.maxEntrySize!==0){if(this.#r!==0&&!_o(this.#r))throw new TypeError("maxSize must be a positive integer if specified");if(!_o(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#V()}if(this.allowStale=!!l,this.noDeleteOnStaleGet=!!v,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!a,this.ttlResolution=_o(s)||s===0?s:1,this.ttlAutopurge=!!i,this.ttl=n||0,this.ttl){if(!_o(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#I()}if(this.#e===0&&this.ttl===0&&this.#r===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#r){let P="LRU_CACHE_UNBOUNDED";SRe(P)&&(jH.add(P),qH("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",P,Hd))}}getRemainingTTL(e){return this.#u.has(e)?1/0:0}#I(){let e=new Cc(this.#e),r=new Cc(this.#e);this.#p=e,this.#T=r;let n=this.ttlAutopurge?new Array(this.#e):void 0;this.#g=n,this.#q=(o,a,l=this.#f.now())=>{if(r[o]=a!==0?l:0,e[o]=a,n?.[o]&&(clearTimeout(n[o]),n[o]=void 0),a!==0&&n){let c=setTimeout(()=>{this.#b(o)&&this.#x(this.#o[o],"expire")},a+1);c.unref&&c.unref(),n[o]=c}},this.#O=o=>{r[o]=e[o]!==0?this.#f.now():0},this.#A=(o,a)=>{if(e[a]){let l=e[a],c=r[a];if(!l||!c)return;o.ttl=l,o.start=c,o.now=s||i();let u=o.now-c;o.remainingTTL=l-u}};let s=0,i=()=>{let o=this.#f.now();if(this.ttlResolution>0){s=o;let a=setTimeout(()=>s=0,this.ttlResolution);a.unref&&a.unref()}return o};this.getRemainingTTL=o=>{let a=this.#u.get(o);if(a===void 0)return 0;let l=e[a],c=r[a];if(!l||!c)return 1/0;let u=(s||i())-c;return l-u},this.#b=o=>{let a=r[o],l=e[o];return!!l&&!!a&&(s||i())-a>l}}#O=()=>{};#A=()=>{};#q=()=>{};#b=()=>!1;#V(){let e=new Cc(this.#e);this.#m=0,this.#E=e,this.#j=r=>{this.#m-=e[r],e[r]=0},this.#L=(r,n,s,i)=>{if(this.#l(n))return 0;if(!_o(s))if(i){if(typeof i!="function")throw new TypeError("sizeCalculation must be a function");if(s=i(n,r),!_o(s))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return s},this.#D=(r,n,s)=>{if(e[r]=n,this.#r){let i=this.#r-e[r];for(;this.#m>i;)this.#U(!0)}this.#m+=e[r],s&&(s.entrySize=n,s.totalCalculatedSize=this.#m)}}#j=e=>{};#D=(e,r,n)=>{};#L=(e,r,n,s)=>{if(n||s)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#N({allowStale:e=this.allowStale}={}){if(this.#i)for(let r=this.#d;!(!this.#F(r)||((e||!this.#b(r))&&(yield r),r===this.#_));)r=this.#S[r]}*#C({allowStale:e=this.allowStale}={}){if(this.#i)for(let r=this.#_;!(!this.#F(r)||((e||!this.#b(r))&&(yield r),r===this.#d));)r=this.#v[r]}#F(e){return e!==void 0&&this.#u.get(this.#o[e])===e}*entries(){for(let e of this.#N())this.#n[e]!==void 0&&this.#o[e]!==void 0&&!this.#l(this.#n[e])&&(yield[this.#o[e],this.#n[e]])}*rentries(){for(let e of this.#C())this.#n[e]!==void 0&&this.#o[e]!==void 0&&!this.#l(this.#n[e])&&(yield[this.#o[e],this.#n[e]])}*keys(){for(let e of this.#N()){let r=this.#o[e];r!==void 0&&!this.#l(this.#n[e])&&(yield r)}}*rkeys(){for(let e of this.#C()){let r=this.#o[e];r!==void 0&&!this.#l(this.#n[e])&&(yield r)}}*values(){for(let e of this.#N())this.#n[e]!==void 0&&!this.#l(this.#n[e])&&(yield this.#n[e])}*rvalues(){for(let e of this.#C())this.#n[e]!==void 0&&!this.#l(this.#n[e])&&(yield this.#n[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,r={}){for(let n of this.#N()){let s=this.#n[n],i=this.#l(s)?s.__staleWhileFetching:s;if(i!==void 0&&e(i,this.#o[n],this))return this.get(this.#o[n],r)}}forEach(e,r=this){for(let n of this.#N()){let s=this.#n[n],i=this.#l(s)?s.__staleWhileFetching:s;i!==void 0&&e.call(r,i,this.#o[n],this)}}rforEach(e,r=this){for(let n of this.#C()){let s=this.#n[n],i=this.#l(s)?s.__staleWhileFetching:s;i!==void 0&&e.call(r,i,this.#o[n],this)}}purgeStale(){let e=!1;for(let r of this.#C({allowStale:!0}))this.#b(r)&&(this.#x(this.#o[r],"expire"),e=!0);return e}info(e){let r=this.#u.get(e);if(r===void 0)return;let n=this.#n[r],s=this.#l(n)?n.__staleWhileFetching:n;if(s===void 0)return;let i={value:s};if(this.#p&&this.#T){let o=this.#p[r],a=this.#T[r];if(o&&a){let l=o-(this.#f.now()-a);i.ttl=l,i.start=Date.now()}}return this.#E&&(i.size=this.#E[r]),i}dump(){let e=[];for(let r of this.#N({allowStale:!0})){let n=this.#o[r],s=this.#n[r],i=this.#l(s)?s.__staleWhileFetching:s;if(i===void 0||n===void 0)continue;let o={value:i};if(this.#p&&this.#T){o.ttl=this.#p[r];let a=this.#f.now()-this.#T[r];o.start=Math.floor(Date.now()-a)}this.#E&&(o.size=this.#E[r]),e.unshift([n,o])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let s=Date.now()-n.start;n.start=this.#f.now()-s}this.set(r,n.value,n)}}set(e,r,n={}){if(r===void 0)return this.delete(e),this;let{ttl:s=this.ttl,start:i,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:l}=n,{noUpdateTTL:c=this.noUpdateTTL}=n,u=this.#L(e,r,n.size||0,a);if(this.maxEntrySize&&u>this.maxEntrySize)return l&&(l.set="miss",l.maxEntrySizeExceeded=!0),this.#x(e,"set"),this;let d=this.#i===0?void 0:this.#u.get(e);if(d===void 0)d=this.#i===0?this.#d:this.#P.length!==0?this.#P.pop():this.#i===this.#e?this.#U(!1):this.#i,this.#o[d]=e,this.#n[d]=r,this.#u.set(e,d),this.#v[this.#d]=d,this.#S[d]=this.#d,this.#d=d,this.#i++,this.#D(d,u,l),l&&(l.set="add"),c=!1,this.#k&&this.#c?.(r,e,"add");else{this.#M(d);let p=this.#n[d];if(r!==p){if(this.#$&&this.#l(p)){p.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:f}=p;f!==void 0&&!o&&(this.#w&&this.#s?.(f,e,"set"),this.#t&&this.#h?.push([f,e,"set"]))}else o||(this.#w&&this.#s?.(p,e,"set"),this.#t&&this.#h?.push([p,e,"set"]));if(this.#j(d),this.#D(d,u,l),this.#n[d]=r,l){l.set="replace";let f=p&&this.#l(p)?p.__staleWhileFetching:p;f!==void 0&&(l.oldValue=f)}}else l&&(l.set="update");this.#k&&this.onInsert?.(r,e,r===p?"update":"replace")}if(s!==0&&!this.#p&&this.#I(),this.#p&&(c||this.#q(d,s,i),l&&this.#A(l,d)),!o&&this.#t&&this.#h){let p=this.#h,f;for(;f=p?.shift();)this.#a?.(...f)}return this}pop(){try{for(;this.#i;){let e=this.#n[this.#_];if(this.#U(!0),this.#l(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#t&&this.#h){let e=this.#h,r;for(;r=e?.shift();)this.#a?.(...r)}}}#U(e){let r=this.#_,n=this.#o[r],s=this.#n[r];return this.#$&&this.#l(s)?s.__abortController.abort(new Error("evicted")):(this.#w||this.#t)&&(this.#w&&this.#s?.(s,n,"evict"),this.#t&&this.#h?.push([s,n,"evict"])),this.#j(r),this.#g?.[r]&&(clearTimeout(this.#g[r]),this.#g[r]=void 0),e&&(this.#o[r]=void 0,this.#n[r]=void 0,this.#P.push(r)),this.#i===1?(this.#_=this.#d=0,this.#P.length=0):this.#_=this.#v[r],this.#u.delete(n),this.#i--,r}has(e,r={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:s}=r,i=this.#u.get(e);if(i!==void 0){let o=this.#n[i];if(this.#l(o)&&o.__staleWhileFetching===void 0)return!1;if(this.#b(i))s&&(s.has="stale",this.#A(s,i));else return n&&this.#O(i),s&&(s.has="hit",this.#A(s,i)),!0}else s&&(s.has="miss");return!1}peek(e,r={}){let{allowStale:n=this.allowStale}=r,s=this.#u.get(e);if(s===void 0||!n&&this.#b(s))return;let i=this.#n[s];return this.#l(i)?i.__staleWhileFetching:i}#B(e,r,n,s){let i=r===void 0?void 0:this.#n[r];if(this.#l(i))return i;let o=new Wy,{signal:a}=n;a?.addEventListener("abort",()=>o.abort(a.reason),{signal:o.signal});let l={signal:o.signal,options:n,context:s},c=(m,y=!1)=>{let{aborted:g}=o.signal,w=n.ignoreFetchAbort&&m!==void 0;if(n.status&&(g&&!y?(n.status.fetchAborted=!0,n.status.fetchError=o.signal.reason,w&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),g&&!w&&!y)return d(o.signal.reason);let _=f,v=this.#n[r];return(v===f||w&&y&&v===void 0)&&(m===void 0?_.__staleWhileFetching!==void 0?this.#n[r]=_.__staleWhileFetching:this.#x(e,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(e,m,l.options))),m},u=m=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=m),d(m)),d=m=>{let{aborted:y}=o.signal,g=y&&n.allowStaleOnFetchAbort,w=g||n.allowStaleOnFetchRejection,_=w||n.noDeleteOnFetchRejection,v=f;if(this.#n[r]===f&&(!_||v.__staleWhileFetching===void 0?this.#x(e,"fetch"):g||(this.#n[r]=v.__staleWhileFetching)),w)return n.status&&v.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),v.__staleWhileFetching;if(v.__returned===v)throw m},p=(m,y)=>{let g=this.#R?.(e,i,l);g&&g instanceof Promise&&g.then(w=>m(w===void 0?void 0:w),y),o.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(m(void 0),n.allowStaleOnFetchAbort&&(m=w=>c(w,!0)))})};n.status&&(n.status.fetchDispatched=!0);let f=new Promise(p).then(c,u),h=Object.assign(f,{__abortController:o,__staleWhileFetching:i,__returned:void 0});return r===void 0?(this.set(e,h,{...l.options,status:void 0}),r=this.#u.get(e)):this.#n[r]=h,h}#l(e){if(!this.#$)return!1;let r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof Wy}async fetch(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:l=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:p=this.allowStaleOnFetchRejection,ignoreFetchAbort:f=this.ignoreFetchAbort,allowStaleOnFetchAbort:h=this.allowStaleOnFetchAbort,context:m,forceRefresh:y=!1,status:g,signal:w}=r;if(!this.#$)return g&&(g.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:s,noDeleteOnStaleGet:i,status:g});let _={allowStale:n,updateAgeOnGet:s,noDeleteOnStaleGet:i,ttl:o,noDisposeOnSet:a,size:l,sizeCalculation:c,noUpdateTTL:u,noDeleteOnFetchRejection:d,allowStaleOnFetchRejection:p,allowStaleOnFetchAbort:h,ignoreFetchAbort:f,status:g,signal:w},v=this.#u.get(e);if(v===void 0){g&&(g.fetch="miss");let S=this.#B(e,v,_,m);return S.__returned=S}else{let S=this.#n[v];if(this.#l(S)){let P=n&&S.__staleWhileFetching!==void 0;return g&&(g.fetch="inflight",P&&(g.returnedStale=!0)),P?S.__staleWhileFetching:S.__returned=S}let $=this.#b(v);if(!y&&!$)return g&&(g.fetch="hit"),this.#M(v),s&&this.#O(v),g&&this.#A(g,v),S;let T=this.#B(e,v,_,m),R=T.__staleWhileFetching!==void 0&&n;return g&&(g.fetch=$?"stale":"refresh",R&&$&&(g.returnedStale=!0)),R?T.__staleWhileFetching:T.__returned=T}}async forceFetch(e,r={}){let n=await this.fetch(e,r);if(n===void 0)throw new Error("fetch() returned undefined");return n}memo(e,r={}){let n=this.#y;if(!n)throw new Error("no memoMethod provided to constructor");let{context:s,forceRefresh:i,...o}=r,a=this.get(e,o);if(!i&&a!==void 0)return a;let l=n(e,a,{options:o,context:s});return this.set(e,l,o),l}get(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,status:o}=r,a=this.#u.get(e);if(a!==void 0){let l=this.#n[a],c=this.#l(l);return o&&this.#A(o,a),this.#b(a)?(o&&(o.get="stale"),c?(o&&n&&l.__staleWhileFetching!==void 0&&(o.returnedStale=!0),n?l.__staleWhileFetching:void 0):(i||this.#x(e,"expire"),o&&n&&(o.returnedStale=!0),n?l:void 0)):(o&&(o.get="hit"),c?l.__staleWhileFetching:(this.#M(a),s&&this.#O(a),l))}else o&&(o.get="miss")}#z(e,r){this.#S[r]=e,this.#v[e]=r}#M(e){e!==this.#d&&(e===this.#_?this.#_=this.#v[e]:this.#z(this.#S[e],this.#v[e]),this.#z(this.#d,e),this.#d=e)}delete(e){return this.#x(e,"delete")}#x(e,r){let n=!1;if(this.#i!==0){let s=this.#u.get(e);if(s!==void 0)if(this.#g?.[s]&&(clearTimeout(this.#g?.[s]),this.#g[s]=void 0),n=!0,this.#i===1)this.#H(r);else{this.#j(s);let i=this.#n[s];if(this.#l(i)?i.__abortController.abort(new Error("deleted")):(this.#w||this.#t)&&(this.#w&&this.#s?.(i,e,r),this.#t&&this.#h?.push([i,e,r])),this.#u.delete(e),this.#o[s]=void 0,this.#n[s]=void 0,s===this.#d)this.#d=this.#S[s];else if(s===this.#_)this.#_=this.#v[s];else{let o=this.#S[s];this.#v[o]=this.#v[s];let a=this.#v[s];this.#S[a]=this.#S[s]}this.#i--,this.#P.push(s)}}if(this.#t&&this.#h?.length){let s=this.#h,i;for(;i=s?.shift();)this.#a?.(...i)}return n}clear(){return this.#H("delete")}#H(e){for(let r of this.#C({allowStale:!0})){let n=this.#n[r];if(this.#l(n))n.__abortController.abort(new Error("deleted"));else{let s=this.#o[r];this.#w&&this.#s?.(n,s,e),this.#t&&this.#h?.push([n,s,e])}}if(this.#u.clear(),this.#n.fill(void 0),this.#o.fill(void 0),this.#p&&this.#T){this.#p.fill(0),this.#T.fill(0);for(let r of this.#g??[])r!==void 0&&clearTimeout(r);this.#g?.fill(void 0)}if(this.#E&&this.#E.fill(0),this.#_=0,this.#d=0,this.#P.length=0,this.#m=0,this.#i=0,this.#t&&this.#h){let r=this.#h,n;for(;n=r?.shift();)this.#a?.(...n)}}};Ky.LRUCache=Hd});var K1=E(Cr=>{"use strict";var TRe=Cr&&Cr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Cr,"__esModule",{value:!0});Cr.Minipass=Cr.isWritable=Cr.isReadable=Cr.isStream=void 0;var UH=typeof process=="object"&&process?process:{stdout:null,stderr:null},W1=require("events"),HH=TRe(require("stream")),RRe=require("string_decoder"),$Re=t=>!!t&&typeof t=="object"&&(t instanceof t0||t instanceof HH.default||(0,Cr.isReadable)(t)||(0,Cr.isWritable)(t));Cr.isStream=$Re;var ORe=t=>!!t&&typeof t=="object"&&t instanceof W1.EventEmitter&&typeof t.pipe=="function"&&t.pipe!==HH.default.Writable.prototype.pipe;Cr.isReadable=ORe;var PRe=t=>!!t&&typeof t=="object"&&t instanceof W1.EventEmitter&&typeof t.write=="function"&&typeof t.end=="function";Cr.isWritable=PRe;var vi=Symbol("EOF"),wi=Symbol("maybeEmitEnd"),vo=Symbol("emittedEnd"),Jy=Symbol("emittingEnd"),Gd=Symbol("emittedError"),Yy=Symbol("closed"),BH=Symbol("read"),Xy=Symbol("flush"),zH=Symbol("flushChunk"),is=Symbol("encoding"),Ac=Symbol("decoder"),Mt=Symbol("flowing"),Wd=Symbol("paused"),kc=Symbol("resume"),jt=Symbol("buffer"),Nr=Symbol("pipes"),qt=Symbol("bufferLength"),U1=Symbol("bufferPush"),Qy=Symbol("bufferShift"),pr=Symbol("objectMode"),Tt=Symbol("destroyed"),B1=Symbol("error"),z1=Symbol("emitData"),VH=Symbol("emitEnd"),V1=Symbol("emitEnd2"),js=Symbol("async"),H1=Symbol("abort"),Zy=Symbol("aborted"),Kd=Symbol("signal"),Ca=Symbol("dataListeners"),nn=Symbol("discarded"),Jd=t=>Promise.resolve().then(t),xRe=t=>t(),NRe=t=>t==="end"||t==="finish"||t==="prefinish",CRe=t=>t instanceof ArrayBuffer||!!t&&typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,IRe=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),e0=class{src;dest;opts;ondrain;constructor(e,r,n){this.src=e,this.dest=r,this.opts=n,this.ondrain=()=>e[kc](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},G1=class extends e0{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,n){super(e,r,n),this.proxyErrors=s=>r.emit("error",s),e.on("error",this.proxyErrors)}},ARe=t=>!!t.objectMode,kRe=t=>!t.objectMode&&!!t.encoding&&t.encoding!=="buffer",t0=class extends W1.EventEmitter{[Mt]=!1;[Wd]=!1;[Nr]=[];[jt]=[];[pr];[is];[js];[Ac];[vi]=!1;[vo]=!1;[Jy]=!1;[Yy]=!1;[Gd]=null;[qt]=0;[Tt]=!1;[Kd];[Zy]=!1;[Ca]=0;[nn]=!1;writable=!0;readable=!0;constructor(...e){let r=e[0]||{};if(super(),r.objectMode&&typeof r.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");ARe(r)?(this[pr]=!0,this[is]=null):kRe(r)?(this[is]=r.encoding,this[pr]=!1):(this[pr]=!1,this[is]=null),this[js]=!!r.async,this[Ac]=this[is]?new RRe.StringDecoder(this[is]):null,r&&r.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[jt]}),r&&r.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[Nr]});let{signal:n}=r;n&&(this[Kd]=n,n.aborted?this[H1]():n.addEventListener("abort",()=>this[H1]()))}get bufferLength(){return this[qt]}get encoding(){return this[is]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[pr]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[js]}set async(e){this[js]=this[js]||!!e}[H1](){this[Zy]=!0,this.emit("abort",this[Kd]?.reason),this.destroy(this[Kd]?.reason)}get aborted(){return this[Zy]}set aborted(e){}write(e,r,n){if(this[Zy])return!1;if(this[vi])throw new Error("write after end");if(this[Tt])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8");let s=this[js]?Jd:xRe;if(!this[pr]&&!Buffer.isBuffer(e)){if(IRe(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(CRe(e))e=Buffer.from(e);else if(typeof e!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[pr]?(this[Mt]&&this[qt]!==0&&this[Xy](!0),this[Mt]?this.emit("data",e):this[U1](e),this[qt]!==0&&this.emit("readable"),n&&s(n),this[Mt]):e.length?(typeof e=="string"&&!(r===this[is]&&!this[Ac]?.lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[is]&&(e=this[Ac].write(e)),this[Mt]&&this[qt]!==0&&this[Xy](!0),this[Mt]?this.emit("data",e):this[U1](e),this[qt]!==0&&this.emit("readable"),n&&s(n),this[Mt]):(this[qt]!==0&&this.emit("readable"),n&&s(n),this[Mt])}read(e){if(this[Tt])return null;if(this[nn]=!1,this[qt]===0||e===0||e&&e>this[qt])return this[wi](),null;this[pr]&&(e=null),this[jt].length>1&&!this[pr]&&(this[jt]=[this[is]?this[jt].join(""):Buffer.concat(this[jt],this[qt])]);let r=this[BH](e||null,this[jt][0]);return this[wi](),r}[BH](e,r){if(this[pr])this[Qy]();else{let n=r;e===n.length||e===null?this[Qy]():typeof n=="string"?(this[jt][0]=n.slice(e),r=n.slice(0,e),this[qt]-=e):(this[jt][0]=n.subarray(e),r=n.subarray(0,e),this[qt]-=e)}return this.emit("data",r),!this[jt].length&&!this[vi]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=void 0),typeof r=="function"&&(n=r,r="utf8"),e!==void 0&&this.write(e,r),n&&this.once("end",n),this[vi]=!0,this.writable=!1,(this[Mt]||!this[Wd])&&this[wi](),this}[kc](){this[Tt]||(!this[Ca]&&!this[Nr].length&&(this[nn]=!0),this[Wd]=!1,this[Mt]=!0,this.emit("resume"),this[jt].length?this[Xy]():this[vi]?this[wi]():this.emit("drain"))}resume(){return this[kc]()}pause(){this[Mt]=!1,this[Wd]=!0,this[nn]=!1}get destroyed(){return this[Tt]}get flowing(){return this[Mt]}get paused(){return this[Wd]}[U1](e){this[pr]?this[qt]+=1:this[qt]+=e.length,this[jt].push(e)}[Qy](){return this[pr]?this[qt]-=1:this[qt]-=this[jt][0].length,this[jt].shift()}[Xy](e=!1){do;while(this[zH](this[Qy]())&&this[jt].length);!e&&!this[jt].length&&!this[vi]&&this.emit("drain")}[zH](e){return this.emit("data",e),this[Mt]}pipe(e,r){if(this[Tt])return e;this[nn]=!1;let n=this[vo];return r=r||{},e===UH.stdout||e===UH.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,n?r.end&&e.end():(this[Nr].push(r.proxyErrors?new G1(this,e,r):new e0(this,e,r)),this[js]?Jd(()=>this[kc]()):this[kc]()),e}unpipe(e){let r=this[Nr].find(n=>n.dest===e);r&&(this[Nr].length===1?(this[Mt]&&this[Ca]===0&&(this[Mt]=!1),this[Nr]=[]):this[Nr].splice(this[Nr].indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let n=super.on(e,r);if(e==="data")this[nn]=!1,this[Ca]++,!this[Nr].length&&!this[Mt]&&this[kc]();else if(e==="readable"&&this[qt]!==0)super.emit("readable");else if(NRe(e)&&this[vo])super.emit(e),this.removeAllListeners(e);else if(e==="error"&&this[Gd]){let s=r;this[js]?Jd(()=>s.call(this,this[Gd])):s.call(this,this[Gd])}return n}removeListener(e,r){return this.off(e,r)}off(e,r){let n=super.off(e,r);return e==="data"&&(this[Ca]=this.listeners("data").length,this[Ca]===0&&!this[nn]&&!this[Nr].length&&(this[Mt]=!1)),n}removeAllListeners(e){let r=super.removeAllListeners(e);return(e==="data"||e===void 0)&&(this[Ca]=0,!this[nn]&&!this[Nr].length&&(this[Mt]=!1)),r}get emittedEnd(){return this[vo]}[wi](){!this[Jy]&&!this[vo]&&!this[Tt]&&this[jt].length===0&&this[vi]&&(this[Jy]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[Yy]&&this.emit("close"),this[Jy]=!1)}emit(e,...r){let n=r[0];if(e!=="error"&&e!=="close"&&e!==Tt&&this[Tt])return!1;if(e==="data")return!this[pr]&&!n?!1:this[js]?(Jd(()=>this[z1](n)),!0):this[z1](n);if(e==="end")return this[VH]();if(e==="close"){if(this[Yy]=!0,!this[vo]&&!this[Tt])return!1;let i=super.emit("close");return this.removeAllListeners("close"),i}else if(e==="error"){this[Gd]=n,super.emit(B1,n);let i=!this[Kd]||this.listeners("error").length?super.emit("error",n):!1;return this[wi](),i}else if(e==="resume"){let i=super.emit("resume");return this[wi](),i}else if(e==="finish"||e==="prefinish"){let i=super.emit(e);return this.removeAllListeners(e),i}let s=super.emit(e,...r);return this[wi](),s}[z1](e){for(let n of this[Nr])n.dest.write(e)===!1&&this.pause();let r=this[nn]?!1:super.emit("data",e);return this[wi](),r}[VH](){return this[vo]?!1:(this[vo]=!0,this.readable=!1,this[js]?(Jd(()=>this[V1]()),!0):this[V1]())}[V1](){if(this[Ac]){let r=this[Ac].end();if(r){for(let n of this[Nr])n.dest.write(r);this[nn]||super.emit("data",r)}}for(let r of this[Nr])r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){let e=Object.assign([],{dataLength:0});this[pr]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[pr]||(e.dataLength+=n.length)}),await r,e}async concat(){if(this[pr])throw new Error("cannot concat in objectMode");let e=await this.collect();return this[is]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise((e,r)=>{this.on(Tt,()=>r(new Error("stream destroyed"))),this.on("error",n=>r(n)),this.on("end",()=>e())})}[Symbol.asyncIterator](){this[nn]=!1;let e=!1,r=async()=>(this.pause(),e=!0,{value:void 0,done:!0});return{next:()=>{if(e)return r();let s=this.read();if(s!==null)return Promise.resolve({done:!1,value:s});if(this[vi])return r();let i,o,a=d=>{this.off("data",l),this.off("end",c),this.off(Tt,u),r(),o(d)},l=d=>{this.off("error",a),this.off("end",c),this.off(Tt,u),this.pause(),i({value:d,done:!!this[vi]})},c=()=>{this.off("error",a),this.off("data",l),this.off(Tt,u),r(),i({done:!0,value:void 0})},u=()=>a(new Error("stream destroyed"));return new Promise((d,p)=>{o=p,i=d,this.once(Tt,u),this.once("error",a),this.once("end",c),this.once("data",l)})},throw:r,return:r,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[nn]=!1;let e=!1,r=()=>(this.pause(),this.off(B1,r),this.off(Tt,r),this.off("end",r),e=!0,{done:!0,value:void 0}),n=()=>{if(e)return r();let s=this.read();return s===null?r():{done:!1,value:s}};return this.once("end",r),this.once(B1,r),this.once(Tt,r),{next:n,throw:r,return:r,[Symbol.iterator](){return this}}}destroy(e){if(this[Tt])return e?this.emit("error",e):this.emit(Tt),this;this[Tt]=!0,this[nn]=!0,this[jt].length=0,this[qt]=0;let r=this;return typeof r.close=="function"&&!this[Yy]&&r.close(),e?this.emit("error",e):this.emit(Tt),this}static get isStream(){return Cr.isStream}};Cr.Minipass=t0});var i3=E(Be=>{"use strict";var DRe=Be&&Be.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),MRe=Be&&Be.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),jRe=Be&&Be.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&DRe(e,t,r);return MRe(e,t),e};Object.defineProperty(Be,"__esModule",{value:!0});Be.PathScurry=Be.Path=Be.PathScurryDarwin=Be.PathScurryPosix=Be.PathScurryWin32=Be.PathScurryBase=Be.PathPosix=Be.PathWin32=Be.PathBase=Be.ChildrenCache=Be.ResolveCache=void 0;var c0=FH(),o0=require("path"),qRe=require("url"),Xd=require("fs"),LRe=jRe(require("fs")),FRe=Xd.realpathSync.native,r0=require("fs/promises"),GH=K1(),Qd={lstatSync:Xd.lstatSync,readdir:Xd.readdir,readdirSync:Xd.readdirSync,readlinkSync:Xd.readlinkSync,realpathSync:FRe,promises:{lstat:r0.lstat,readdir:r0.readdir,readlink:r0.readlink,realpath:r0.realpath}},XH=t=>!t||t===Qd||t===LRe?Qd:{...Qd,...t,promises:{...Qd.promises,...t.promises||{}}},QH=/^\\\\\?\\([a-z]:)\\?$/i,URe=t=>t.replace(/\//g,"\\").replace(QH,"$1\\"),BRe=/[\\\/]/,Cn=0,ZH=1,e3=2,qs=4,t3=6,r3=8,Ia=10,n3=12,Nn=15,Yd=~Nn,J1=16,WH=32,Zd=64,os=128,n0=256,i0=512,KH=Zd|os|i0,zRe=1023,Y1=t=>t.isFile()?r3:t.isDirectory()?qs:t.isSymbolicLink()?Ia:t.isCharacterDevice()?e3:t.isBlockDevice()?t3:t.isSocket()?n3:t.isFIFO()?ZH:Cn,JH=new c0.LRUCache({max:2**12}),eh=t=>{let e=JH.get(t);if(e)return e;let r=t.normalize("NFKD");return JH.set(t,r),r},YH=new c0.LRUCache({max:2**12}),s0=t=>{let e=YH.get(t);if(e)return e;let r=eh(t.toLowerCase());return YH.set(t,r),r},th=class extends c0.LRUCache{constructor(){super({max:256})}};Be.ResolveCache=th;var a0=class extends c0.LRUCache{constructor(e=16*1024){super({maxSize:e,sizeCalculation:r=>r.length+1})}};Be.ChildrenCache=a0;var s3=Symbol("PathScurry setAsCwd"),Zt=class{name;root;roots;parent;nocase;isCWD=!1;#e;#r;get dev(){return this.#r}#s;get mode(){return this.#s}#c;get nlink(){return this.#c}#a;get uid(){return this.#a}#R;get gid(){return this.#R}#y;get rdev(){return this.#y}#f;get blksize(){return this.#f}#i;get ino(){return this.#i}#m;get size(){return this.#m}#u;get blocks(){return this.#u}#o;get atimeMs(){return this.#o}#n;get mtimeMs(){return this.#n}#v;get ctimeMs(){return this.#v}#S;get birthtimeMs(){return this.#S}#_;get atime(){return this.#_}#d;get mtime(){return this.#d}#P;get ctime(){return this.#P}#h;get birthtime(){return this.#h}#E;#T;#p;#g;#w;#$;#t;#k;#I;#O;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(e,r=Cn,n,s,i,o,a){this.name=e,this.#E=i?s0(e):eh(e),this.#t=r&zRe,this.nocase=i,this.roots=s,this.root=n||this,this.#k=o,this.#p=a.fullpath,this.#w=a.relative,this.#$=a.relativePosix,this.parent=a.parent,this.parent?this.#e=this.parent.#e:this.#e=XH(a.fs)}depth(){return this.#T!==void 0?this.#T:this.parent?this.#T=this.parent.depth()+1:this.#T=0}childrenCache(){return this.#k}resolve(e){if(!e)return this;let r=this.getRootString(e),s=e.substring(r.length).split(this.splitSep);return r?this.getRoot(r).#A(s):this.#A(s)}#A(e){let r=this;for(let n of e)r=r.child(n);return r}children(){let e=this.#k.get(this);if(e)return e;let r=Object.assign([],{provisional:0});return this.#k.set(this,r),this.#t&=~J1,r}child(e,r){if(e===""||e===".")return this;if(e==="..")return this.parent||this;let n=this.children(),s=this.nocase?s0(e):eh(e);for(let l of n)if(l.#E===s)return l;let i=this.parent?this.sep:"",o=this.#p?this.#p+i+e:void 0,a=this.newChild(e,Cn,{...r,parent:this,fullpath:o});return this.canReaddir()||(a.#t|=os),n.push(a),a}relative(){if(this.isCWD)return"";if(this.#w!==void 0)return this.#w;let e=this.name,r=this.parent;if(!r)return this.#w=this.name;let n=r.relative();return n+(!n||!r.parent?"":this.sep)+e}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(this.#$!==void 0)return this.#$;let e=this.name,r=this.parent;if(!r)return this.#$=this.fullpathPosix();let n=r.relativePosix();return n+(!n||!r.parent?"":"/")+e}fullpath(){if(this.#p!==void 0)return this.#p;let e=this.name,r=this.parent;if(!r)return this.#p=this.name;let s=r.fullpath()+(r.parent?this.sep:"")+e;return this.#p=s}fullpathPosix(){if(this.#g!==void 0)return this.#g;if(this.sep==="/")return this.#g=this.fullpath();if(!this.parent){let s=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(s)?this.#g=`//?/${s}`:this.#g=s}let e=this.parent,r=e.fullpathPosix(),n=r+(!r||!e.parent?"":"/")+this.name;return this.#g=n}isUnknown(){return(this.#t&Nn)===Cn}isType(e){return this[`is${e}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#t&Nn)===r3}isDirectory(){return(this.#t&Nn)===qs}isCharacterDevice(){return(this.#t&Nn)===e3}isBlockDevice(){return(this.#t&Nn)===t3}isFIFO(){return(this.#t&Nn)===ZH}isSocket(){return(this.#t&Nn)===n3}isSymbolicLink(){return(this.#t&Ia)===Ia}lstatCached(){return this.#t&WH?this:void 0}readlinkCached(){return this.#I}realpathCached(){return this.#O}readdirCached(){let e=this.children();return e.slice(0,e.provisional)}canReadlink(){if(this.#I)return!0;if(!this.parent)return!1;let e=this.#t&Nn;return!(e!==Cn&&e!==Ia||this.#t&n0||this.#t&os)}calledReaddir(){return!!(this.#t&J1)}isENOENT(){return!!(this.#t&os)}isNamed(e){return this.nocase?this.#E===s0(e):this.#E===eh(e)}async readlink(){let e=this.#I;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=await this.#e.promises.readlink(this.fullpath()),n=(await this.parent.realpath())?.resolve(r);if(n)return this.#I=n}catch(r){this.#C(r.code);return}}readlinkSync(){let e=this.#I;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=this.#e.readlinkSync(this.fullpath()),n=this.parent.realpathSync()?.resolve(r);if(n)return this.#I=n}catch(r){this.#C(r.code);return}}#q(e){this.#t|=J1;for(let r=e.provisional;r<e.length;r++){let n=e[r];n&&n.#b()}}#b(){this.#t&os||(this.#t=(this.#t|os)&Yd,this.#V())}#V(){let e=this.children();e.provisional=0;for(let r of e)r.#b()}#j(){this.#t|=i0,this.#D()}#D(){if(this.#t&Zd)return;let e=this.#t;(e&Nn)===qs&&(e&=Yd),this.#t=e|Zd,this.#V()}#L(e=""){e==="ENOTDIR"||e==="EPERM"?this.#D():e==="ENOENT"?this.#b():this.children().provisional=0}#N(e=""){e==="ENOTDIR"?this.parent.#D():e==="ENOENT"&&this.#b()}#C(e=""){let r=this.#t;r|=n0,e==="ENOENT"&&(r|=os),(e==="EINVAL"||e==="UNKNOWN")&&(r&=Yd),this.#t=r,e==="ENOTDIR"&&this.parent&&this.parent.#D()}#F(e,r){return this.#B(e,r)||this.#U(e,r)}#U(e,r){let n=Y1(e),s=this.newChild(e.name,n,{parent:this}),i=s.#t&Nn;return i!==qs&&i!==Ia&&i!==Cn&&(s.#t|=Zd),r.unshift(s),r.provisional++,s}#B(e,r){for(let n=r.provisional;n<r.length;n++){let s=r[n];if((this.nocase?s0(e.name):eh(e.name))===s.#E)return this.#l(e,s,n,r)}}#l(e,r,n,s){let i=r.name;return r.#t=r.#t&Yd|Y1(e),i!==e.name&&(r.name=e.name),n!==s.provisional&&(n===s.length-1?s.pop():s.splice(n,1),s.unshift(r)),s.provisional++,r}async lstat(){if(!(this.#t&os))try{return this.#z(await this.#e.promises.lstat(this.fullpath())),this}catch(e){this.#N(e.code)}}lstatSync(){if(!(this.#t&os))try{return this.#z(this.#e.lstatSync(this.fullpath())),this}catch(e){this.#N(e.code)}}#z(e){let{atime:r,atimeMs:n,birthtime:s,birthtimeMs:i,blksize:o,blocks:a,ctime:l,ctimeMs:c,dev:u,gid:d,ino:p,mode:f,mtime:h,mtimeMs:m,nlink:y,rdev:g,size:w,uid:_}=e;this.#_=r,this.#o=n,this.#h=s,this.#S=i,this.#f=o,this.#u=a,this.#P=l,this.#v=c,this.#r=u,this.#R=d,this.#i=p,this.#s=f,this.#d=h,this.#n=m,this.#c=y,this.#y=g,this.#m=w,this.#a=_;let v=Y1(e);this.#t=this.#t&Yd|v|WH,v!==Cn&&v!==qs&&v!==Ia&&(this.#t|=Zd)}#M=[];#x=!1;#H(e){this.#x=!1;let r=this.#M.slice();this.#M.length=0,r.forEach(n=>n(null,e))}readdirCB(e,r=!1){if(!this.canReaddir()){r?e(null,[]):queueMicrotask(()=>e(null,[]));return}let n=this.children();if(this.calledReaddir()){let i=n.slice(0,n.provisional);r?e(null,i):queueMicrotask(()=>e(null,i));return}if(this.#M.push(e),this.#x)return;this.#x=!0;let s=this.fullpath();this.#e.readdir(s,{withFileTypes:!0},(i,o)=>{if(i)this.#L(i.code),n.provisional=0;else{for(let a of o)this.#F(a,n);this.#q(n)}this.#H(n.slice(0,n.provisional))})}#G;async readdir(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();if(this.#G)await this.#G;else{let n=()=>{};this.#G=new Promise(s=>n=s);try{for(let s of await this.#e.promises.readdir(r,{withFileTypes:!0}))this.#F(s,e);this.#q(e)}catch(s){this.#L(s.code),e.provisional=0}this.#G=void 0,n()}return e.slice(0,e.provisional)}readdirSync(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();try{for(let n of this.#e.readdirSync(r,{withFileTypes:!0}))this.#F(n,e);this.#q(e)}catch(n){this.#L(n.code),e.provisional=0}return e.slice(0,e.provisional)}canReaddir(){if(this.#t&KH)return!1;let e=Nn&this.#t;return e===Cn||e===qs||e===Ia}shouldWalk(e,r){return(this.#t&qs)===qs&&!(this.#t&KH)&&!e.has(this)&&(!r||r(this))}async realpath(){if(this.#O)return this.#O;if(!((i0|n0|os)&this.#t))try{let e=await this.#e.promises.realpath(this.fullpath());return this.#O=this.resolve(e)}catch{this.#j()}}realpathSync(){if(this.#O)return this.#O;if(!((i0|n0|os)&this.#t))try{let e=this.#e.realpathSync(this.fullpath());return this.#O=this.resolve(e)}catch{this.#j()}}[s3](e){if(e===this)return;e.isCWD=!1,this.isCWD=!0;let r=new Set([]),n=[],s=this;for(;s&&s.parent;)r.add(s),s.#w=n.join(this.sep),s.#$=n.join("/"),s=s.parent,n.push("..");for(s=e;s&&s.parent&&!r.has(s);)s.#w=void 0,s.#$=void 0,s=s.parent}};Be.PathBase=Zt;var Aa=class extends Zt{sep="\\";splitSep=BRe;constructor(e,r=Cn,n,s,i,o,a){super(e,r,n,s,i,o,a)}newChild(e,r=Cn,n={}){return new Aa(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}getRootString(e){return o0.win32.parse(e).root}getRoot(e){if(e=URe(e.toUpperCase()),e===this.root.name)return this.root;for(let[r,n]of Object.entries(this.roots))if(this.sameRoot(e,r))return this.roots[e]=n;return this.roots[e]=new nh(e,this).root}sameRoot(e,r=this.root.name){return e=e.toUpperCase().replace(/\//g,"\\").replace(QH,"$1\\"),e===r}};Be.PathWin32=Aa;var ka=class extends Zt{splitSep="/";sep="/";constructor(e,r=Cn,n,s,i,o,a){super(e,r,n,s,i,o,a)}getRootString(e){return e.startsWith("/")?"/":""}getRoot(e){return this.root}newChild(e,r=Cn,n={}){return new ka(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}};Be.PathPosix=ka;var rh=class{root;rootPath;roots;cwd;#e;#r;#s;nocase;#c;constructor(e=process.cwd(),r,n,{nocase:s,childrenCacheSize:i=16*1024,fs:o=Qd}={}){this.#c=XH(o),(e instanceof URL||e.startsWith("file://"))&&(e=(0,qRe.fileURLToPath)(e));let a=r.resolve(e);this.roots=Object.create(null),this.rootPath=this.parseRootPath(a),this.#e=new th,this.#r=new th,this.#s=new a0(i);let l=a.substring(this.rootPath.length).split(n);if(l.length===1&&!l[0]&&l.pop(),s===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=s,this.root=this.newRoot(this.#c),this.roots[this.rootPath]=this.root;let c=this.root,u=l.length-1,d=r.sep,p=this.rootPath,f=!1;for(let h of l){let m=u--;c=c.child(h,{relative:new Array(m).fill("..").join(d),relativePosix:new Array(m).fill("..").join("/"),fullpath:p+=(f?"":d)+h}),f=!0}this.cwd=c}depth(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.depth()}childrenCache(){return this.#s}resolve(...e){let r="";for(let i=e.length-1;i>=0;i--){let o=e[i];if(!(!o||o===".")&&(r=r?`${o}/${r}`:o,this.isAbsolute(o)))break}let n=this.#e.get(r);if(n!==void 0)return n;let s=this.cwd.resolve(r).fullpath();return this.#e.set(r,s),s}resolvePosix(...e){let r="";for(let i=e.length-1;i>=0;i--){let o=e[i];if(!(!o||o===".")&&(r=r?`${o}/${r}`:o,this.isAbsolute(o)))break}let n=this.#r.get(r);if(n!==void 0)return n;let s=this.cwd.resolve(r).fullpathPosix();return this.#r.set(r,s),s}relative(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relative()}relativePosix(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relativePosix()}basename(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.name}dirname(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),(e.parent||e).fullpath()}async readdir(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Zt||(r=e,e=this.cwd);let{withFileTypes:n}=r;if(e.canReaddir()){let s=await e.readdir();return n?s:s.map(i=>i.name)}else return[]}readdirSync(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Zt||(r=e,e=this.cwd);let{withFileTypes:n=!0}=r;return e.canReaddir()?n?e.readdirSync():e.readdirSync().map(s=>s.name):[]}async lstat(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstat()}lstatSync(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstatSync()}async readlink(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Zt||(r=e.withFileTypes,e=this.cwd);let n=await e.readlink();return r?n:n?.fullpath()}readlinkSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Zt||(r=e.withFileTypes,e=this.cwd);let n=e.readlinkSync();return r?n:n?.fullpath()}async realpath(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Zt||(r=e.withFileTypes,e=this.cwd);let n=await e.realpath();return r?n:n?.fullpath()}realpathSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Zt||(r=e.withFileTypes,e=this.cwd);let n=e.realpathSync();return r?n:n?.fullpath()}async walk(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Zt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:s=!1,filter:i,walkFilter:o}=r,a=[];(!i||i(e))&&a.push(n?e:e.fullpath());let l=new Set,c=(d,p)=>{l.add(d),d.readdirCB((f,h)=>{if(f)return p(f);let m=h.length;if(!m)return p();let y=()=>{--m===0&&p()};for(let g of h)(!i||i(g))&&a.push(n?g:g.fullpath()),s&&g.isSymbolicLink()?g.realpath().then(w=>w?.isUnknown()?w.lstat():w).then(w=>w?.shouldWalk(l,o)?c(w,y):y()):g.shouldWalk(l,o)?c(g,y):y()},!0)},u=e;return new Promise((d,p)=>{c(u,f=>{if(f)return p(f);d(a)})})}walkSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Zt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:s=!1,filter:i,walkFilter:o}=r,a=[];(!i||i(e))&&a.push(n?e:e.fullpath());let l=new Set([e]);for(let c of l){let u=c.readdirSync();for(let d of u){(!i||i(d))&&a.push(n?d:d.fullpath());let p=d;if(d.isSymbolicLink()){if(!(s&&(p=d.realpathSync())))continue;p.isUnknown()&&p.lstatSync()}p.shouldWalk(l,o)&&l.add(p)}}return a}[Symbol.asyncIterator](){return this.iterate()}iterate(e=this.cwd,r={}){return typeof e=="string"?e=this.cwd.resolve(e):e instanceof Zt||(r=e,e=this.cwd),this.stream(e,r)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Zt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:s=!1,filter:i,walkFilter:o}=r;(!i||i(e))&&(yield n?e:e.fullpath());let a=new Set([e]);for(let l of a){let c=l.readdirSync();for(let u of c){(!i||i(u))&&(yield n?u:u.fullpath());let d=u;if(u.isSymbolicLink()){if(!(s&&(d=u.realpathSync())))continue;d.isUnknown()&&d.lstatSync()}d.shouldWalk(a,o)&&a.add(d)}}}stream(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Zt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:s=!1,filter:i,walkFilter:o}=r,a=new GH.Minipass({objectMode:!0});(!i||i(e))&&a.write(n?e:e.fullpath());let l=new Set,c=[e],u=0,d=()=>{let p=!1;for(;!p;){let f=c.shift();if(!f){u===0&&a.end();return}u++,l.add(f);let h=(y,g,w=!1)=>{if(y)return a.emit("error",y);if(s&&!w){let _=[];for(let v of g)v.isSymbolicLink()&&_.push(v.realpath().then(S=>S?.isUnknown()?S.lstat():S));if(_.length){Promise.all(_).then(()=>h(null,g,!0));return}}for(let _ of g)_&&(!i||i(_))&&(a.write(n?_:_.fullpath())||(p=!0));u--;for(let _ of g){let v=_.realpathCached()||_;v.shouldWalk(l,o)&&c.push(v)}p&&!a.flowing?a.once("drain",d):m||d()},m=!0;f.readdirCB(h,!0),m=!1}};return d(),a}streamSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Zt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:s=!1,filter:i,walkFilter:o}=r,a=new GH.Minipass({objectMode:!0}),l=new Set;(!i||i(e))&&a.write(n?e:e.fullpath());let c=[e],u=0,d=()=>{let p=!1;for(;!p;){let f=c.shift();if(!f){u===0&&a.end();return}u++,l.add(f);let h=f.readdirSync();for(let m of h)(!i||i(m))&&(a.write(n?m:m.fullpath())||(p=!0));u--;for(let m of h){let y=m;if(m.isSymbolicLink()){if(!(s&&(y=m.realpathSync())))continue;y.isUnknown()&&y.lstatSync()}y.shouldWalk(l,o)&&c.push(y)}}p&&!a.flowing&&a.once("drain",d)};return d(),a}chdir(e=this.cwd){let r=this.cwd;this.cwd=typeof e=="string"?this.cwd.resolve(e):e,this.cwd[s3](r)}};Be.PathScurryBase=rh;var nh=class extends rh{sep="\\";constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,o0.win32,"\\",{...r,nocase:n}),this.nocase=n;for(let s=this.cwd;s;s=s.parent)s.nocase=this.nocase}parseRootPath(e){return o0.win32.parse(e).root.toUpperCase()}newRoot(e){return new Aa(this.rootPath,qs,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")||e.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(e)}};Be.PathScurryWin32=nh;var sh=class extends rh{sep="/";constructor(e=process.cwd(),r={}){let{nocase:n=!1}=r;super(e,o0.posix,"/",{...r,nocase:n}),this.nocase=n}parseRootPath(e){return"/"}newRoot(e){return new ka(this.rootPath,qs,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")}};Be.PathScurryPosix=sh;var l0=class extends sh{constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,{...r,nocase:n})}};Be.PathScurryDarwin=l0;Be.Path=process.platform==="win32"?Aa:ka;Be.PathScurry=process.platform==="win32"?nh:process.platform==="darwin"?l0:sh});var X1=E(u0=>{"use strict";Object.defineProperty(u0,"__esModule",{value:!0});u0.Pattern=void 0;var VRe=yo(),HRe=t=>t.length>=1,GRe=t=>t.length>=1,ih=class{#e;#r;#s;length;#c;#a;#R;#y;#f;#i;#m=!0;constructor(e,r,n,s){if(!HRe(e))throw new TypeError("empty pattern list");if(!GRe(r))throw new TypeError("empty glob list");if(r.length!==e.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=e.length,n<0||n>=this.length)throw new TypeError("index out of range");if(this.#e=e,this.#r=r,this.#s=n,this.#c=s,this.#s===0){if(this.isUNC()){let[i,o,a,l,...c]=this.#e,[u,d,p,f,...h]=this.#r;c[0]===""&&(c.shift(),h.shift());let m=[i,o,a,l,""].join("/"),y=[u,d,p,f,""].join("/");this.#e=[m,...c],this.#r=[y,...h],this.length=this.#e.length}else if(this.isDrive()||this.isAbsolute()){let[i,...o]=this.#e,[a,...l]=this.#r;o[0]===""&&(o.shift(),l.shift());let c=i+"/",u=a+"/";this.#e=[c,...o],this.#r=[u,...l],this.length=this.#e.length}}}pattern(){return this.#e[this.#s]}isString(){return typeof this.#e[this.#s]=="string"}isGlobstar(){return this.#e[this.#s]===VRe.GLOBSTAR}isRegExp(){return this.#e[this.#s]instanceof RegExp}globString(){return this.#R=this.#R||(this.#s===0?this.isAbsolute()?this.#r[0]+this.#r.slice(1).join("/"):this.#r.join("/"):this.#r.slice(this.#s).join("/"))}hasMore(){return this.length>this.#s+1}rest(){return this.#a!==void 0?this.#a:this.hasMore()?(this.#a=new ih(this.#e,this.#r,this.#s+1,this.#c),this.#a.#i=this.#i,this.#a.#f=this.#f,this.#a.#y=this.#y,this.#a):this.#a=null}isUNC(){let e=this.#e;return this.#f!==void 0?this.#f:this.#f=this.#c==="win32"&&this.#s===0&&e[0]===""&&e[1]===""&&typeof e[2]=="string"&&!!e[2]&&typeof e[3]=="string"&&!!e[3]}isDrive(){let e=this.#e;return this.#y!==void 0?this.#y:this.#y=this.#c==="win32"&&this.#s===0&&this.length>1&&typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0])}isAbsolute(){let e=this.#e;return this.#i!==void 0?this.#i:this.#i=e[0]===""&&e.length>1||this.isDrive()||this.isUNC()}root(){let e=this.#e[0];return typeof e=="string"&&this.isAbsolute()&&this.#s===0?e:""}checkFollowGlobstar(){return!(this.#s===0||!this.isGlobstar()||!this.#m)}markFollowGlobstar(){return this.#s===0||!this.isGlobstar()||!this.#m?!1:(this.#m=!1,!0)}};u0.Pattern=ih});var Z1=E(f0=>{"use strict";Object.defineProperty(f0,"__esModule",{value:!0});f0.Ignore=void 0;var o3=yo(),WRe=X1(),KRe=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",Q1=class{relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(e,{nobrace:r,nocase:n,noext:s,noglobstar:i,platform:o=KRe}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=o,this.mmopts={dot:!0,nobrace:r,nocase:n,noext:s,noglobstar:i,optimizationLevel:2,platform:o,nocomment:!0,nonegate:!0};for(let a of e)this.add(a)}add(e){let r=new o3.Minimatch(e,this.mmopts);for(let n=0;n<r.set.length;n++){let s=r.set[n],i=r.globParts[n];if(!s||!i)throw new Error("invalid pattern object");for(;s[0]==="."&&i[0]===".";)s.shift(),i.shift();let o=new WRe.Pattern(s,i,0,this.platform),a=new o3.Minimatch(o.globString(),this.mmopts),l=i[i.length-1]==="**",c=o.isAbsolute();c?this.absolute.push(a):this.relative.push(a),l&&(c?this.absoluteChildren.push(a):this.relativeChildren.push(a))}}ignored(e){let r=e.fullpath(),n=`${r}/`,s=e.relative()||".",i=`${s}/`;for(let o of this.relative)if(o.match(s)||o.match(i))return!0;for(let o of this.absolute)if(o.match(r)||o.match(n))return!0;return!1}childrenIgnored(e){let r=e.fullpath()+"/",n=(e.relative()||".")+"/";for(let s of this.relativeChildren)if(s.match(n))return!0;for(let s of this.absoluteChildren)if(s.match(r))return!0;return!1}};f0.Ignore=Q1});var l3=E(Ls=>{"use strict";Object.defineProperty(Ls,"__esModule",{value:!0});Ls.Processor=Ls.SubWalks=Ls.MatchRecord=Ls.HasWalkedCache=void 0;var a3=yo(),Dc=class{store;constructor(e=new Map){this.store=e}copy(){return new Dc(new Map(this.store))}hasWalked(e,r){return this.store.get(e.fullpath())?.has(r.globString())}storeWalked(e,r){let n=e.fullpath(),s=this.store.get(n);s?s.add(r.globString()):this.store.set(n,new Set([r.globString()]))}};Ls.HasWalkedCache=Dc;var d0=class{store=new Map;add(e,r,n){let s=(r?2:0)|(n?1:0),i=this.store.get(e);this.store.set(e,i===void 0?s:s&i)}entries(){return[...this.store.entries()].map(([e,r])=>[e,!!(r&2),!!(r&1)])}};Ls.MatchRecord=d0;var h0=class{store=new Map;add(e,r){if(!e.canReaddir())return;let n=this.store.get(e);n?n.find(s=>s.globString()===r.globString())||n.push(r):this.store.set(e,[r])}get(e){let r=this.store.get(e);if(!r)throw new Error("attempting to walk unknown path");return r}entries(){return this.keys().map(e=>[e,this.store.get(e)])}keys(){return[...this.store.keys()].filter(e=>e.canReaddir())}};Ls.SubWalks=h0;var oh=class{hasWalkedCache;matches=new d0;subwalks=new h0;patterns;follow;dot;opts;constructor(e,r){this.opts=e,this.follow=!!e.follow,this.dot=!!e.dot,this.hasWalkedCache=r?r.copy():new Dc}processPatterns(e,r){this.patterns=r;let n=r.map(s=>[e,s]);for(let[s,i]of n){this.hasWalkedCache.storeWalked(s,i);let o=i.root(),a=i.isAbsolute()&&this.opts.absolute!==!1;if(o){s=s.resolve(o==="/"&&this.opts.root!==void 0?this.opts.root:o);let d=i.rest();if(d)i=d;else{this.matches.add(s,!0,!1);continue}}if(s.isENOENT())continue;let l,c,u=!1;for(;typeof(l=i.pattern())=="string"&&(c=i.rest());)s=s.resolve(l),i=c,u=!0;if(l=i.pattern(),c=i.rest(),u){if(this.hasWalkedCache.hasWalked(s,i))continue;this.hasWalkedCache.storeWalked(s,i)}if(typeof l=="string"){let d=l===".."||l===""||l===".";this.matches.add(s.resolve(l),a,d);continue}else if(l===a3.GLOBSTAR){(!s.isSymbolicLink()||this.follow||i.checkFollowGlobstar())&&this.subwalks.add(s,i);let d=c?.pattern(),p=c?.rest();if(!c||(d===""||d===".")&&!p)this.matches.add(s,a,d===""||d===".");else if(d===".."){let f=s.parent||s;p?this.hasWalkedCache.hasWalked(f,p)||this.subwalks.add(f,p):this.matches.add(f,a,!0)}}else l instanceof RegExp&&this.subwalks.add(s,i)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new oh(this.opts,this.hasWalkedCache)}filterEntries(e,r){let n=this.subwalks.get(e),s=this.child();for(let i of r)for(let o of n){let a=o.isAbsolute(),l=o.pattern(),c=o.rest();l===a3.GLOBSTAR?s.testGlobstar(i,o,c,a):l instanceof RegExp?s.testRegExp(i,l,c,a):s.testString(i,l,c,a)}return s}testGlobstar(e,r,n,s){if((this.dot||!e.name.startsWith("."))&&(r.hasMore()||this.matches.add(e,s,!1),e.canReaddir()&&(this.follow||!e.isSymbolicLink()?this.subwalks.add(e,r):e.isSymbolicLink()&&(n&&r.checkFollowGlobstar()?this.subwalks.add(e,n):r.markFollowGlobstar()&&this.subwalks.add(e,r)))),n){let i=n.pattern();if(typeof i=="string"&&i!==".."&&i!==""&&i!==".")this.testString(e,i,n.rest(),s);else if(i===".."){let o=e.parent||e;this.subwalks.add(o,n)}else i instanceof RegExp&&this.testRegExp(e,i,n.rest(),s)}}testRegExp(e,r,n,s){r.test(e.name)&&(n?this.subwalks.add(e,n):this.matches.add(e,s,!1))}testString(e,r,n,s){e.isNamed(r)&&(n?this.subwalks.add(e,n):this.matches.add(e,s,!1))}};Ls.Processor=oh});var f3=E(wo=>{"use strict";Object.defineProperty(wo,"__esModule",{value:!0});wo.GlobStream=wo.GlobWalker=wo.GlobUtil=void 0;var JRe=K1(),c3=Z1(),u3=l3(),YRe=(t,e)=>typeof t=="string"?new c3.Ignore([t],e):Array.isArray(t)?new c3.Ignore(t,e):t,ah=class{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#e=[];#r;#s;signal;maxDepth;includeChildMatches;constructor(e,r,n){if(this.patterns=e,this.path=r,this.opts=n,this.#s=!n.posix&&n.platform==="win32"?"\\":"/",this.includeChildMatches=n.includeChildMatches!==!1,(n.ignore||!this.includeChildMatches)&&(this.#r=YRe(n.ignore??[],n),!this.includeChildMatches&&typeof this.#r.add!="function")){let s="cannot ignore child matches, ignore lacks add() method.";throw new Error(s)}this.maxDepth=n.maxDepth||1/0,n.signal&&(this.signal=n.signal,this.signal.addEventListener("abort",()=>{this.#e.length=0}))}#c(e){return this.seen.has(e)||!!this.#r?.ignored?.(e)}#a(e){return!!this.#r?.childrenIgnored?.(e)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let e;for(;!this.paused&&(e=this.#e.shift());)e()}onResume(e){this.signal?.aborted||(this.paused?this.#e.push(e):e())}async matchCheck(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||await e.realpath(),!n)return;e=n}let i=e.isUnknown()||this.opts.stat?await e.lstat():e;if(this.opts.follow&&this.opts.nodir&&i?.isSymbolicLink()){let o=await i.realpath();o&&(o.isUnknown()||this.opts.stat)&&await o.lstat()}return this.matchCheckTest(i,r)}matchCheckTest(e,r){return e&&(this.maxDepth===1/0||e.depth()<=this.maxDepth)&&(!r||e.canReaddir())&&(!this.opts.nodir||!e.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!e.isSymbolicLink()||!e.realpathCached()?.isDirectory())&&!this.#c(e)?e:void 0}matchCheckSync(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||e.realpathSync(),!n)return;e=n}let i=e.isUnknown()||this.opts.stat?e.lstatSync():e;if(this.opts.follow&&this.opts.nodir&&i?.isSymbolicLink()){let o=i.realpathSync();o&&(o?.isUnknown()||this.opts.stat)&&o.lstatSync()}return this.matchCheckTest(i,r)}matchFinish(e,r){if(this.#c(e))return;if(!this.includeChildMatches&&this.#r?.add){let i=`${e.relativePosix()}/**`;this.#r.add(i)}let n=this.opts.absolute===void 0?r:this.opts.absolute;this.seen.add(e);let s=this.opts.mark&&e.isDirectory()?this.#s:"";if(this.opts.withFileTypes)this.matchEmit(e);else if(n){let i=this.opts.posix?e.fullpathPosix():e.fullpath();this.matchEmit(i+s)}else{let i=this.opts.posix?e.relativePosix():e.relative(),o=this.opts.dotRelative&&!i.startsWith(".."+this.#s)?"."+this.#s:"";this.matchEmit(i?o+i+s:"."+s)}}async match(e,r,n){let s=await this.matchCheck(e,n);s&&this.matchFinish(s,r)}matchSync(e,r,n){let s=this.matchCheckSync(e,n);s&&this.matchFinish(s,r)}walkCB(e,r,n){this.signal?.aborted&&n(),this.walkCB2(e,r,new u3.Processor(this.opts),n)}walkCB2(e,r,n,s){if(this.#a(e))return s();if(this.signal?.aborted&&s(),this.paused){this.onResume(()=>this.walkCB2(e,r,n,s));return}n.processPatterns(e,r);let i=1,o=()=>{--i===0&&s()};for(let[a,l,c]of n.matches.entries())this.#c(a)||(i++,this.match(a,l,c).then(()=>o()));for(let a of n.subwalkTargets()){if(this.maxDepth!==1/0&&a.depth()>=this.maxDepth)continue;i++;let l=a.readdirCached();a.calledReaddir()?this.walkCB3(a,l,n,o):a.readdirCB((c,u)=>this.walkCB3(a,u,n,o),!0)}o()}walkCB3(e,r,n,s){n=n.filterEntries(e,r);let i=1,o=()=>{--i===0&&s()};for(let[a,l,c]of n.matches.entries())this.#c(a)||(i++,this.match(a,l,c).then(()=>o()));for(let[a,l]of n.subwalks.entries())i++,this.walkCB2(a,l,n.child(),o);o()}walkCBSync(e,r,n){this.signal?.aborted&&n(),this.walkCB2Sync(e,r,new u3.Processor(this.opts),n)}walkCB2Sync(e,r,n,s){if(this.#a(e))return s();if(this.signal?.aborted&&s(),this.paused){this.onResume(()=>this.walkCB2Sync(e,r,n,s));return}n.processPatterns(e,r);let i=1,o=()=>{--i===0&&s()};for(let[a,l,c]of n.matches.entries())this.#c(a)||this.matchSync(a,l,c);for(let a of n.subwalkTargets()){if(this.maxDepth!==1/0&&a.depth()>=this.maxDepth)continue;i++;let l=a.readdirSync();this.walkCB3Sync(a,l,n,o)}o()}walkCB3Sync(e,r,n,s){n=n.filterEntries(e,r);let i=1,o=()=>{--i===0&&s()};for(let[a,l,c]of n.matches.entries())this.#c(a)||this.matchSync(a,l,c);for(let[a,l]of n.subwalks.entries())i++,this.walkCB2Sync(a,l,n.child(),o);o()}};wo.GlobUtil=ah;var eO=class extends ah{matches=new Set;constructor(e,r,n){super(e,r,n)}matchEmit(e){this.matches.add(e)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((e,r)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?r(this.signal.reason):e(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}};wo.GlobWalker=eO;var tO=class extends ah{results;constructor(e,r,n){super(e,r,n),this.results=new JRe.Minipass({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(e){this.results.write(e),this.results.flowing||this.pause()}stream(){let e=this.path;return e.isUnknown()?e.lstat().then(()=>{this.walkCB(e,this.patterns,()=>this.results.end())}):this.walkCB(e,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};wo.GlobStream=tO});var nO=E(g0=>{"use strict";Object.defineProperty(g0,"__esModule",{value:!0});g0.Glob=void 0;var XRe=yo(),QRe=require("url"),p0=i3(),ZRe=X1(),m0=f3(),e$e=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",rO=class{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(e,r){if(!r)throw new TypeError("glob options required");if(this.withFileTypes=!!r.withFileTypes,this.signal=r.signal,this.follow=!!r.follow,this.dot=!!r.dot,this.dotRelative=!!r.dotRelative,this.nodir=!!r.nodir,this.mark=!!r.mark,r.cwd?(r.cwd instanceof URL||r.cwd.startsWith("file://"))&&(r.cwd=(0,QRe.fileURLToPath)(r.cwd)):this.cwd="",this.cwd=r.cwd||"",this.root=r.root,this.magicalBraces=!!r.magicalBraces,this.nobrace=!!r.nobrace,this.noext=!!r.noext,this.realpath=!!r.realpath,this.absolute=r.absolute,this.includeChildMatches=r.includeChildMatches!==!1,this.noglobstar=!!r.noglobstar,this.matchBase=!!r.matchBase,this.maxDepth=typeof r.maxDepth=="number"?r.maxDepth:1/0,this.stat=!!r.stat,this.ignore=r.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof e=="string"&&(e=[e]),this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(e=e.map(l=>l.replace(/\\/g,"/"))),this.matchBase){if(r.noglobstar)throw new TypeError("base matching requires globstar");e=e.map(l=>l.includes("/")?l:`./**/${l}`)}if(this.pattern=e,this.platform=r.platform||e$e,this.opts={...r,platform:this.platform},r.scurry){if(this.scurry=r.scurry,r.nocase!==void 0&&r.nocase!==r.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let l=r.platform==="win32"?p0.PathScurryWin32:r.platform==="darwin"?p0.PathScurryDarwin:r.platform?p0.PathScurryPosix:p0.PathScurry;this.scurry=new l(this.cwd,{nocase:r.nocase,fs:r.fs})}this.nocase=this.scurry.nocase;let n=this.platform==="darwin"||this.platform==="win32",s={...r,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:n,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},i=this.pattern.map(l=>new XRe.Minimatch(l,s)),[o,a]=i.reduce((l,c)=>(l[0].push(...c.set),l[1].push(...c.globParts),l),[[],[]]);this.patterns=o.map((l,c)=>{let u=a[c];if(!u)throw new Error("invalid pattern object");return new ZRe.Pattern(l,u,0,this.platform)})}async walk(){return[...await new m0.GlobWalker(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new m0.GlobWalker(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new m0.GlobStream(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new m0.GlobStream(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};g0.Glob=rO});var sO=E(y0=>{"use strict";Object.defineProperty(y0,"__esModule",{value:!0});y0.hasMagic=void 0;var t$e=yo(),r$e=(t,e={})=>{Array.isArray(t)||(t=[t]);for(let r of t)if(new t$e.Minimatch(r,e).hasMagic())return!0;return!1};y0.hasMagic=r$e});var m3=E(xe=>{"use strict";Object.defineProperty(xe,"__esModule",{value:!0});xe.glob=xe.sync=xe.iterate=xe.iterateSync=xe.stream=xe.streamSync=xe.Ignore=xe.hasMagic=xe.Glob=xe.unescape=xe.escape=void 0;xe.globStreamSync=lh;xe.globStream=iO;xe.globSync=oO;xe.globIterateSync=ch;xe.globIterate=aO;var d3=yo(),Da=nO(),n$e=sO(),p3=yo();Object.defineProperty(xe,"escape",{enumerable:!0,get:function(){return p3.escape}});Object.defineProperty(xe,"unescape",{enumerable:!0,get:function(){return p3.unescape}});var s$e=nO();Object.defineProperty(xe,"Glob",{enumerable:!0,get:function(){return s$e.Glob}});var i$e=sO();Object.defineProperty(xe,"hasMagic",{enumerable:!0,get:function(){return i$e.hasMagic}});var o$e=Z1();Object.defineProperty(xe,"Ignore",{enumerable:!0,get:function(){return o$e.Ignore}});function lh(t,e={}){return new Da.Glob(t,e).streamSync()}function iO(t,e={}){return new Da.Glob(t,e).stream()}function oO(t,e={}){return new Da.Glob(t,e).walkSync()}async function h3(t,e={}){return new Da.Glob(t,e).walk()}function ch(t,e={}){return new Da.Glob(t,e).iterateSync()}function aO(t,e={}){return new Da.Glob(t,e).iterate()}xe.streamSync=lh;xe.stream=Object.assign(iO,{sync:lh});xe.iterateSync=ch;xe.iterate=Object.assign(aO,{sync:ch});xe.sync=Object.assign(oO,{stream:lh,iterate:ch});xe.glob=Object.assign(h3,{glob:h3,globSync:oO,sync:xe.sync,globStream:iO,stream:xe.stream,globStreamSync:lh,streamSync:xe.streamSync,globIterate:aO,iterate:xe.iterate,globIterateSync:ch,iterateSync:xe.iterateSync,Glob:Da.Glob,hasMagic:n$e.hasMagic,escape:d3.escape,unescape:d3.unescape});xe.glob.glob=xe.glob});var y3=E((kje,lO)=>{"use strict";var a$e=/at\s(?:.*\.)?plugin\s.*\n\s*(.*)/,l$e=/(\w*(\.\w*)*)\..*/;lO.exports=function(e){if(e.name.length>0)return e.name;let r=Error.stackTraceLimit;Error.stackTraceLimit=10;try{throw new Error("anonymous function")}catch(n){return Error.stackTraceLimit=r,g3(n.stack)}};function g3(t){let e=t.match(a$e);return e?e[1].split(/[/\\]/).slice(-1)[0].match(l$e)[1]:"anonymous"}lO.exports.extractPluginName=g3});var v3=E((Dje,_3)=>{"use strict";_3.exports=function(e){return e[0]==="@"&&(e=e.slice(1).replace("/","-")),e.replace(/-(.)/g,function(r,n){return n.toUpperCase()})}});var w3=E((Mje,_0)=>{"use strict";var c$e=y3(),u$e=v3(),f$e=0;function cO(t,e={}){let r=!1;if(t.default!==void 0&&(t=t.default),typeof t!="function")throw new TypeError(`fastify-plugin expects a function, instead got a '${typeof t}'`);if(typeof e=="string"&&(e={fastify:e}),typeof e!="object"||Array.isArray(e)||e===null)throw new TypeError("The options object should be an object");if(e.fastify!==void 0&&typeof e.fastify!="string")throw new TypeError(`fastify-plugin expects a version string, instead got '${typeof e.fastify}'`);e.name||(r=!0,e.name=c$e(t)+"-auto-"+f$e++),t[Symbol.for("skip-override")]=e.encapsulate!==!0,t[Symbol.for("fastify.display-name")]=e.name,t[Symbol.for("plugin-meta")]=e,t.default||(t.default=t);let n=u$e(e.name);return!r&&!t[n]&&(t[n]=t),t}_0.exports=cO;_0.exports.default=cO;_0.exports.fastifyPlugin=cO});var uO=E((jje,b3)=>{"use strict";function d$e(t){let e=t.length;return e>21&&t.indexOf("application/javascript")===0||e>14&&t.indexOf("application/json")===0||e>5&&t.indexOf("text/")===0}b3.exports.isUtf8MimeType=d$e});var S3=E((qje,E3)=>{"use strict";function v0(){this._types=Object.create(null),this._extensions=Object.create(null);for(let t=0;t<arguments.length;t++)this.define(arguments[t]);this.define=this.define.bind(this),this.getType=this.getType.bind(this),this.getExtension=this.getExtension.bind(this)}v0.prototype.define=function(t,e){for(let r in t){let n=t[r].map(function(s){return s.toLowerCase()});r=r.toLowerCase();for(let s=0;s<n.length;s++){let i=n[s];if(i[0]!=="*"){if(!e&&i in this._types)throw new Error('Attempt to change mapping for "'+i+'" extension from "'+this._types[i]+'" to "'+r+'". Pass `force=true` to allow this, otherwise remove "'+i+'" from the list of extensions for "'+r+'".');this._types[i]=r}}if(e||!this._extensions[r]){let s=n[0];this._extensions[r]=s[0]!=="*"?s:s.substr(1)}}};v0.prototype.getType=function(t){t=String(t);let e=t.replace(/^.*[/\\]/,"").toLowerCase(),r=e.replace(/^.*\./,"").toLowerCase(),n=e.length<t.length;return(r.length<e.length-1||!n)&&this._types[r]||null};v0.prototype.getExtension=function(t){return t=/^\s*([^;\s]*)/.test(t)&&RegExp.$1,t&&this._extensions[t.toLowerCase()]||null};E3.exports=v0});var R3=E((Lje,T3)=>{T3.exports={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["es","ecma"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/express":["exp"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/trig":["trig"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avif":["avif"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/step+xml":["stpx"],"model/step+zip":["stpz"],"model/step-xml+zip":["stpxz"],"model/stl":["stl"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]}});var O3=E((Fje,$3)=>{$3.exports={"application/prs.cww":["cww"],"application/vnd.1000minds.decision-model+xml":["1km"],"application/vnd.3gpp.pic-bw-large":["plb"],"application/vnd.3gpp.pic-bw-small":["psb"],"application/vnd.3gpp.pic-bw-var":["pvb"],"application/vnd.3gpp2.tcap":["tcap"],"application/vnd.3m.post-it-notes":["pwn"],"application/vnd.accpac.simply.aso":["aso"],"application/vnd.accpac.simply.imp":["imp"],"application/vnd.acucobol":["acu"],"application/vnd.acucorp":["atc","acutc"],"application/vnd.adobe.air-application-installer-package+zip":["air"],"application/vnd.adobe.formscentral.fcdt":["fcdt"],"application/vnd.adobe.fxp":["fxp","fxpl"],"application/vnd.adobe.xdp+xml":["xdp"],"application/vnd.adobe.xfdf":["xfdf"],"application/vnd.ahead.space":["ahead"],"application/vnd.airzip.filesecure.azf":["azf"],"application/vnd.airzip.filesecure.azs":["azs"],"application/vnd.amazon.ebook":["azw"],"application/vnd.americandynamics.acc":["acc"],"application/vnd.amiga.ami":["ami"],"application/vnd.android.package-archive":["apk"],"application/vnd.anser-web-certificate-issue-initiation":["cii"],"application/vnd.anser-web-funds-transfer-initiation":["fti"],"application/vnd.antix.game-component":["atx"],"application/vnd.apple.installer+xml":["mpkg"],"application/vnd.apple.keynote":["key"],"application/vnd.apple.mpegurl":["m3u8"],"application/vnd.apple.numbers":["numbers"],"application/vnd.apple.pages":["pages"],"application/vnd.apple.pkpass":["pkpass"],"application/vnd.aristanetworks.swi":["swi"],"application/vnd.astraea-software.iota":["iota"],"application/vnd.audiograph":["aep"],"application/vnd.balsamiq.bmml+xml":["bmml"],"application/vnd.blueice.multipass":["mpm"],"application/vnd.bmi":["bmi"],"application/vnd.businessobjects":["rep"],"application/vnd.chemdraw+xml":["cdxml"],"application/vnd.chipnuts.karaoke-mmd":["mmd"],"application/vnd.cinderella":["cdy"],"application/vnd.citationstyles.style+xml":["csl"],"application/vnd.claymore":["cla"],"application/vnd.cloanto.rp9":["rp9"],"application/vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"application/vnd.cluetrust.cartomobile-config":["c11amc"],"application/vnd.cluetrust.cartomobile-config-pkg":["c11amz"],"application/vnd.commonspace":["csp"],"application/vnd.contact.cmsg":["cdbcmsg"],"application/vnd.cosmocaller":["cmc"],"application/vnd.crick.clicker":["clkx"],"application/vnd.crick.clicker.keyboard":["clkk"],"application/vnd.crick.clicker.palette":["clkp"],"application/vnd.crick.clicker.template":["clkt"],"application/vnd.crick.clicker.wordbank":["clkw"],"application/vnd.criticaltools.wbs+xml":["wbs"],"application/vnd.ctc-posml":["pml"],"application/vnd.cups-ppd":["ppd"],"application/vnd.curl.car":["car"],"application/vnd.curl.pcurl":["pcurl"],"application/vnd.dart":["dart"],"application/vnd.data-vision.rdz":["rdz"],"application/vnd.dbf":["dbf"],"application/vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"application/vnd.dece.ttml+xml":["uvt","uvvt"],"application/vnd.dece.unspecified":["uvx","uvvx"],"application/vnd.dece.zip":["uvz","uvvz"],"application/vnd.denovo.fcselayout-link":["fe_launch"],"application/vnd.dna":["dna"],"application/vnd.dolby.mlp":["mlp"],"application/vnd.dpgraph":["dpg"],"application/vnd.dreamfactory":["dfac"],"application/vnd.ds-keypoint":["kpxx"],"application/vnd.dvb.ait":["ait"],"application/vnd.dvb.service":["svc"],"application/vnd.dynageo":["geo"],"application/vnd.ecowin.chart":["mag"],"application/vnd.enliven":["nml"],"application/vnd.epson.esf":["esf"],"application/vnd.epson.msf":["msf"],"application/vnd.epson.quickanime":["qam"],"application/vnd.epson.salt":["slt"],"application/vnd.epson.ssf":["ssf"],"application/vnd.eszigno3+xml":["es3","et3"],"application/vnd.ezpix-album":["ez2"],"application/vnd.ezpix-package":["ez3"],"application/vnd.fdf":["fdf"],"application/vnd.fdsn.mseed":["mseed"],"application/vnd.fdsn.seed":["seed","dataless"],"application/vnd.flographit":["gph"],"application/vnd.fluxtime.clip":["ftc"],"application/vnd.framemaker":["fm","frame","maker","book"],"application/vnd.frogans.fnc":["fnc"],"application/vnd.frogans.ltf":["ltf"],"application/vnd.fsc.weblaunch":["fsc"],"application/vnd.fujitsu.oasys":["oas"],"application/vnd.fujitsu.oasys2":["oa2"],"application/vnd.fujitsu.oasys3":["oa3"],"application/vnd.fujitsu.oasysgp":["fg5"],"application/vnd.fujitsu.oasysprs":["bh2"],"application/vnd.fujixerox.ddd":["ddd"],"application/vnd.fujixerox.docuworks":["xdw"],"application/vnd.fujixerox.docuworks.binder":["xbd"],"application/vnd.fuzzysheet":["fzs"],"application/vnd.genomatix.tuxedo":["txd"],"application/vnd.geogebra.file":["ggb"],"application/vnd.geogebra.tool":["ggt"],"application/vnd.geometry-explorer":["gex","gre"],"application/vnd.geonext":["gxt"],"application/vnd.geoplan":["g2w"],"application/vnd.geospace":["g3w"],"application/vnd.gmx":["gmx"],"application/vnd.google-apps.document":["gdoc"],"application/vnd.google-apps.presentation":["gslides"],"application/vnd.google-apps.spreadsheet":["gsheet"],"application/vnd.google-earth.kml+xml":["kml"],"application/vnd.google-earth.kmz":["kmz"],"application/vnd.grafeq":["gqf","gqs"],"application/vnd.groove-account":["gac"],"application/vnd.groove-help":["ghf"],"application/vnd.groove-identity-message":["gim"],"application/vnd.groove-injector":["grv"],"application/vnd.groove-tool-message":["gtm"],"application/vnd.groove-tool-template":["tpl"],"application/vnd.groove-vcard":["vcg"],"application/vnd.hal+xml":["hal"],"application/vnd.handheld-entertainment+xml":["zmm"],"application/vnd.hbci":["hbci"],"application/vnd.hhe.lesson-player":["les"],"application/vnd.hp-hpgl":["hpgl"],"application/vnd.hp-hpid":["hpid"],"application/vnd.hp-hps":["hps"],"application/vnd.hp-jlyt":["jlt"],"application/vnd.hp-pcl":["pcl"],"application/vnd.hp-pclxl":["pclxl"],"application/vnd.hydrostatix.sof-data":["sfd-hdstx"],"application/vnd.ibm.minipay":["mpy"],"application/vnd.ibm.modcap":["afp","listafp","list3820"],"application/vnd.ibm.rights-management":["irm"],"application/vnd.ibm.secure-container":["sc"],"application/vnd.iccprofile":["icc","icm"],"application/vnd.igloader":["igl"],"application/vnd.immervision-ivp":["ivp"],"application/vnd.immervision-ivu":["ivu"],"application/vnd.insors.igm":["igm"],"application/vnd.intercon.formnet":["xpw","xpx"],"application/vnd.intergeo":["i2g"],"application/vnd.intu.qbo":["qbo"],"application/vnd.intu.qfx":["qfx"],"application/vnd.ipunplugged.rcprofile":["rcprofile"],"application/vnd.irepository.package+xml":["irp"],"application/vnd.is-xpr":["xpr"],"application/vnd.isac.fcs":["fcs"],"application/vnd.jam":["jam"],"application/vnd.jcp.javame.midlet-rms":["rms"],"application/vnd.jisp":["jisp"],"application/vnd.joost.joda-archive":["joda"],"application/vnd.kahootz":["ktz","ktr"],"application/vnd.kde.karbon":["karbon"],"application/vnd.kde.kchart":["chrt"],"application/vnd.kde.kformula":["kfo"],"application/vnd.kde.kivio":["flw"],"application/vnd.kde.kontour":["kon"],"application/vnd.kde.kpresenter":["kpr","kpt"],"application/vnd.kde.kspread":["ksp"],"application/vnd.kde.kword":["kwd","kwt"],"application/vnd.kenameaapp":["htke"],"application/vnd.kidspiration":["kia"],"application/vnd.kinar":["kne","knp"],"application/vnd.koan":["skp","skd","skt","skm"],"application/vnd.kodak-descriptor":["sse"],"application/vnd.las.las+xml":["lasxml"],"application/vnd.llamagraphics.life-balance.desktop":["lbd"],"application/vnd.llamagraphics.life-balance.exchange+xml":["lbe"],"application/vnd.lotus-1-2-3":["123"],"application/vnd.lotus-approach":["apr"],"application/vnd.lotus-freelance":["pre"],"application/vnd.lotus-notes":["nsf"],"application/vnd.lotus-organizer":["org"],"application/vnd.lotus-screencam":["scm"],"application/vnd.lotus-wordpro":["lwp"],"application/vnd.macports.portpkg":["portpkg"],"application/vnd.mapbox-vector-tile":["mvt"],"application/vnd.mcd":["mcd"],"application/vnd.medcalcdata":["mc1"],"application/vnd.mediastation.cdkey":["cdkey"],"application/vnd.mfer":["mwf"],"application/vnd.mfmp":["mfm"],"application/vnd.micrografx.flo":["flo"],"application/vnd.micrografx.igx":["igx"],"application/vnd.mif":["mif"],"application/vnd.mobius.daf":["daf"],"application/vnd.mobius.dis":["dis"],"application/vnd.mobius.mbk":["mbk"],"application/vnd.mobius.mqy":["mqy"],"application/vnd.mobius.msl":["msl"],"application/vnd.mobius.plc":["plc"],"application/vnd.mobius.txf":["txf"],"application/vnd.mophun.application":["mpn"],"application/vnd.mophun.certificate":["mpc"],"application/vnd.mozilla.xul+xml":["xul"],"application/vnd.ms-artgalry":["cil"],"application/vnd.ms-cab-compressed":["cab"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.addin.macroenabled.12":["xlam"],"application/vnd.ms-excel.sheet.binary.macroenabled.12":["xlsb"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.ms-excel.template.macroenabled.12":["xltm"],"application/vnd.ms-fontobject":["eot"],"application/vnd.ms-htmlhelp":["chm"],"application/vnd.ms-ims":["ims"],"application/vnd.ms-lrm":["lrm"],"application/vnd.ms-officetheme":["thmx"],"application/vnd.ms-outlook":["msg"],"application/vnd.ms-pki.seccat":["cat"],"application/vnd.ms-pki.stl":["*stl"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.ms-powerpoint.addin.macroenabled.12":["ppam"],"application/vnd.ms-powerpoint.presentation.macroenabled.12":["pptm"],"application/vnd.ms-powerpoint.slide.macroenabled.12":["sldm"],"application/vnd.ms-powerpoint.slideshow.macroenabled.12":["ppsm"],"application/vnd.ms-powerpoint.template.macroenabled.12":["potm"],"application/vnd.ms-project":["mpp","mpt"],"application/vnd.ms-word.document.macroenabled.12":["docm"],"application/vnd.ms-word.template.macroenabled.12":["dotm"],"application/vnd.ms-works":["wps","wks","wcm","wdb"],"application/vnd.ms-wpl":["wpl"],"application/vnd.ms-xpsdocument":["xps"],"application/vnd.mseq":["mseq"],"application/vnd.musician":["mus"],"application/vnd.muvee.style":["msty"],"application/vnd.mynfc":["taglet"],"application/vnd.neurolanguage.nlu":["nlu"],"application/vnd.nitf":["ntf","nitf"],"application/vnd.noblenet-directory":["nnd"],"application/vnd.noblenet-sealer":["nns"],"application/vnd.noblenet-web":["nnw"],"application/vnd.nokia.n-gage.ac+xml":["*ac"],"application/vnd.nokia.n-gage.data":["ngdat"],"application/vnd.nokia.n-gage.symbian.install":["n-gage"],"application/vnd.nokia.radio-preset":["rpst"],"application/vnd.nokia.radio-presets":["rpss"],"application/vnd.novadigm.edm":["edm"],"application/vnd.novadigm.edx":["edx"],"application/vnd.novadigm.ext":["ext"],"application/vnd.oasis.opendocument.chart":["odc"],"application/vnd.oasis.opendocument.chart-template":["otc"],"application/vnd.oasis.opendocument.database":["odb"],"application/vnd.oasis.opendocument.formula":["odf"],"application/vnd.oasis.opendocument.formula-template":["odft"],"application/vnd.oasis.opendocument.graphics":["odg"],"application/vnd.oasis.opendocument.graphics-template":["otg"],"application/vnd.oasis.opendocument.image":["odi"],"application/vnd.oasis.opendocument.image-template":["oti"],"application/vnd.oasis.opendocument.presentation":["odp"],"application/vnd.oasis.opendocument.presentation-template":["otp"],"application/vnd.oasis.opendocument.spreadsheet":["ods"],"application/vnd.oasis.opendocument.spreadsheet-template":["ots"],"application/vnd.oasis.opendocument.text":["odt"],"application/vnd.oasis.opendocument.text-master":["odm"],"application/vnd.oasis.opendocument.text-template":["ott"],"application/vnd.oasis.opendocument.text-web":["oth"],"application/vnd.olpc-sugar":["xo"],"application/vnd.oma.dd2+xml":["dd2"],"application/vnd.openblox.game+xml":["obgx"],"application/vnd.openofficeorg.extension":["oxt"],"application/vnd.openstreetmap.data+xml":["osm"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.osgeo.mapguide.package":["mgp"],"application/vnd.osgi.dp":["dp"],"application/vnd.osgi.subsystem":["esa"],"application/vnd.palm":["pdb","pqa","oprc"],"application/vnd.pawaafile":["paw"],"application/vnd.pg.format":["str"],"application/vnd.pg.osasli":["ei6"],"application/vnd.picsel":["efif"],"application/vnd.pmi.widget":["wg"],"application/vnd.pocketlearn":["plf"],"application/vnd.powerbuilder6":["pbd"],"application/vnd.previewsystems.box":["box"],"application/vnd.proteus.magazine":["mgz"],"application/vnd.publishare-delta-tree":["qps"],"application/vnd.pvi.ptid1":["ptid"],"application/vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"application/vnd.rar":["rar"],"application/vnd.realvnc.bed":["bed"],"application/vnd.recordare.musicxml":["mxl"],"application/vnd.recordare.musicxml+xml":["musicxml"],"application/vnd.rig.cryptonote":["cryptonote"],"application/vnd.rim.cod":["cod"],"application/vnd.rn-realmedia":["rm"],"application/vnd.rn-realmedia-vbr":["rmvb"],"application/vnd.route66.link66+xml":["link66"],"application/vnd.sailingtracker.track":["st"],"application/vnd.seemail":["see"],"application/vnd.sema":["sema"],"application/vnd.semd":["semd"],"application/vnd.semf":["semf"],"application/vnd.shana.informed.formdata":["ifm"],"application/vnd.shana.informed.formtemplate":["itp"],"application/vnd.shana.informed.interchange":["iif"],"application/vnd.shana.informed.package":["ipk"],"application/vnd.simtech-mindmapper":["twd","twds"],"application/vnd.smaf":["mmf"],"application/vnd.smart.teacher":["teacher"],"application/vnd.software602.filler.form+xml":["fo"],"application/vnd.solent.sdkm+xml":["sdkm","sdkd"],"application/vnd.spotfire.dxp":["dxp"],"application/vnd.spotfire.sfs":["sfs"],"application/vnd.stardivision.calc":["sdc"],"application/vnd.stardivision.draw":["sda"],"application/vnd.stardivision.impress":["sdd"],"application/vnd.stardivision.math":["smf"],"application/vnd.stardivision.writer":["sdw","vor"],"application/vnd.stardivision.writer-global":["sgl"],"application/vnd.stepmania.package":["smzip"],"application/vnd.stepmania.stepchart":["sm"],"application/vnd.sun.wadl+xml":["wadl"],"application/vnd.sun.xml.calc":["sxc"],"application/vnd.sun.xml.calc.template":["stc"],"application/vnd.sun.xml.draw":["sxd"],"application/vnd.sun.xml.draw.template":["std"],"application/vnd.sun.xml.impress":["sxi"],"application/vnd.sun.xml.impress.template":["sti"],"application/vnd.sun.xml.math":["sxm"],"application/vnd.sun.xml.writer":["sxw"],"application/vnd.sun.xml.writer.global":["sxg"],"application/vnd.sun.xml.writer.template":["stw"],"application/vnd.sus-calendar":["sus","susp"],"application/vnd.svd":["svd"],"application/vnd.symbian.install":["sis","sisx"],"application/vnd.syncml+xml":["xsm"],"application/vnd.syncml.dm+wbxml":["bdm"],"application/vnd.syncml.dm+xml":["xdm"],"application/vnd.syncml.dmddf+xml":["ddf"],"application/vnd.tao.intent-module-archive":["tao"],"application/vnd.tcpdump.pcap":["pcap","cap","dmp"],"application/vnd.tmobile-livetv":["tmo"],"application/vnd.trid.tpt":["tpt"],"application/vnd.triscape.mxs":["mxs"],"application/vnd.trueapp":["tra"],"application/vnd.ufdl":["ufd","ufdl"],"application/vnd.uiq.theme":["utz"],"application/vnd.umajin":["umj"],"application/vnd.unity":["unityweb"],"application/vnd.uoml+xml":["uoml"],"application/vnd.vcx":["vcx"],"application/vnd.visio":["vsd","vst","vss","vsw"],"application/vnd.visionary":["vis"],"application/vnd.vsf":["vsf"],"application/vnd.wap.wbxml":["wbxml"],"application/vnd.wap.wmlc":["wmlc"],"application/vnd.wap.wmlscriptc":["wmlsc"],"application/vnd.webturbo":["wtb"],"application/vnd.wolfram.player":["nbp"],"application/vnd.wordperfect":["wpd"],"application/vnd.wqd":["wqd"],"application/vnd.wt.stf":["stf"],"application/vnd.xara":["xar"],"application/vnd.xfdl":["xfdl"],"application/vnd.yamaha.hv-dic":["hvd"],"application/vnd.yamaha.hv-script":["hvs"],"application/vnd.yamaha.hv-voice":["hvp"],"application/vnd.yamaha.openscoreformat":["osf"],"application/vnd.yamaha.openscoreformat.osfpvg+xml":["osfpvg"],"application/vnd.yamaha.smaf-audio":["saf"],"application/vnd.yamaha.smaf-phrase":["spf"],"application/vnd.yellowriver-custom-menu":["cmp"],"application/vnd.zul":["zir","zirz"],"application/vnd.zzazz.deck+xml":["zaz"],"application/x-7z-compressed":["7z"],"application/x-abiword":["abw"],"application/x-ace-compressed":["ace"],"application/x-apple-diskimage":["*dmg"],"application/x-arj":["arj"],"application/x-authorware-bin":["aab","x32","u32","vox"],"application/x-authorware-map":["aam"],"application/x-authorware-seg":["aas"],"application/x-bcpio":["bcpio"],"application/x-bdoc":["*bdoc"],"application/x-bittorrent":["torrent"],"application/x-blorb":["blb","blorb"],"application/x-bzip":["bz"],"application/x-bzip2":["bz2","boz"],"application/x-cbr":["cbr","cba","cbt","cbz","cb7"],"application/x-cdlink":["vcd"],"application/x-cfs-compressed":["cfs"],"application/x-chat":["chat"],"application/x-chess-pgn":["pgn"],"application/x-chrome-extension":["crx"],"application/x-cocoa":["cco"],"application/x-conference":["nsc"],"application/x-cpio":["cpio"],"application/x-csh":["csh"],"application/x-debian-package":["*deb","udeb"],"application/x-dgc-compressed":["dgc"],"application/x-director":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],"application/x-doom":["wad"],"application/x-dtbncx+xml":["ncx"],"application/x-dtbook+xml":["dtb"],"application/x-dtbresource+xml":["res"],"application/x-dvi":["dvi"],"application/x-envoy":["evy"],"application/x-eva":["eva"],"application/x-font-bdf":["bdf"],"application/x-font-ghostscript":["gsf"],"application/x-font-linux-psf":["psf"],"application/x-font-pcf":["pcf"],"application/x-font-snf":["snf"],"application/x-font-type1":["pfa","pfb","pfm","afm"],"application/x-freearc":["arc"],"application/x-futuresplash":["spl"],"application/x-gca-compressed":["gca"],"application/x-glulx":["ulx"],"application/x-gnumeric":["gnumeric"],"application/x-gramps-xml":["gramps"],"application/x-gtar":["gtar"],"application/x-hdf":["hdf"],"application/x-httpd-php":["php"],"application/x-install-instructions":["install"],"application/x-iso9660-image":["*iso"],"application/x-iwork-keynote-sffkey":["*key"],"application/x-iwork-numbers-sffnumbers":["*numbers"],"application/x-iwork-pages-sffpages":["*pages"],"application/x-java-archive-diff":["jardiff"],"application/x-java-jnlp-file":["jnlp"],"application/x-keepass2":["kdbx"],"application/x-latex":["latex"],"application/x-lua-bytecode":["luac"],"application/x-lzh-compressed":["lzh","lha"],"application/x-makeself":["run"],"application/x-mie":["mie"],"application/x-mobipocket-ebook":["prc","mobi"],"application/x-ms-application":["application"],"application/x-ms-shortcut":["lnk"],"application/x-ms-wmd":["wmd"],"application/x-ms-wmz":["wmz"],"application/x-ms-xbap":["xbap"],"application/x-msaccess":["mdb"],"application/x-msbinder":["obd"],"application/x-mscardfile":["crd"],"application/x-msclip":["clp"],"application/x-msdos-program":["*exe"],"application/x-msdownload":["*exe","*dll","com","bat","*msi"],"application/x-msmediaview":["mvb","m13","m14"],"application/x-msmetafile":["*wmf","*wmz","*emf","emz"],"application/x-msmoney":["mny"],"application/x-mspublisher":["pub"],"application/x-msschedule":["scd"],"application/x-msterminal":["trm"],"application/x-mswrite":["wri"],"application/x-netcdf":["nc","cdf"],"application/x-ns-proxy-autoconfig":["pac"],"application/x-nzb":["nzb"],"application/x-perl":["pl","pm"],"application/x-pilot":["*prc","*pdb"],"application/x-pkcs12":["p12","pfx"],"application/x-pkcs7-certificates":["p7b","spc"],"application/x-pkcs7-certreqresp":["p7r"],"application/x-rar-compressed":["*rar"],"application/x-redhat-package-manager":["rpm"],"application/x-research-info-systems":["ris"],"application/x-sea":["sea"],"application/x-sh":["sh"],"application/x-shar":["shar"],"application/x-shockwave-flash":["swf"],"application/x-silverlight-app":["xap"],"application/x-sql":["sql"],"application/x-stuffit":["sit"],"application/x-stuffitx":["sitx"],"application/x-subrip":["srt"],"application/x-sv4cpio":["sv4cpio"],"application/x-sv4crc":["sv4crc"],"application/x-t3vm-image":["t3"],"application/x-tads":["gam"],"application/x-tar":["tar"],"application/x-tcl":["tcl","tk"],"application/x-tex":["tex"],"application/x-tex-tfm":["tfm"],"application/x-texinfo":["texinfo","texi"],"application/x-tgif":["*obj"],"application/x-ustar":["ustar"],"application/x-virtualbox-hdd":["hdd"],"application/x-virtualbox-ova":["ova"],"application/x-virtualbox-ovf":["ovf"],"application/x-virtualbox-vbox":["vbox"],"application/x-virtualbox-vbox-extpack":["vbox-extpack"],"application/x-virtualbox-vdi":["vdi"],"application/x-virtualbox-vhd":["vhd"],"application/x-virtualbox-vmdk":["vmdk"],"application/x-wais-source":["src"],"application/x-web-app-manifest+json":["webapp"],"application/x-x509-ca-cert":["der","crt","pem"],"application/x-xfig":["fig"],"application/x-xliff+xml":["*xlf"],"application/x-xpinstall":["xpi"],"application/x-xz":["xz"],"application/x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"audio/vnd.dece.audio":["uva","uvva"],"audio/vnd.digital-winds":["eol"],"audio/vnd.dra":["dra"],"audio/vnd.dts":["dts"],"audio/vnd.dts.hd":["dtshd"],"audio/vnd.lucent.voice":["lvp"],"audio/vnd.ms-playready.media.pya":["pya"],"audio/vnd.nuera.ecelp4800":["ecelp4800"],"audio/vnd.nuera.ecelp7470":["ecelp7470"],"audio/vnd.nuera.ecelp9600":["ecelp9600"],"audio/vnd.rip":["rip"],"audio/x-aac":["aac"],"audio/x-aiff":["aif","aiff","aifc"],"audio/x-caf":["caf"],"audio/x-flac":["flac"],"audio/x-m4a":["*m4a"],"audio/x-matroska":["mka"],"audio/x-mpegurl":["m3u"],"audio/x-ms-wax":["wax"],"audio/x-ms-wma":["wma"],"audio/x-pn-realaudio":["ram","ra"],"audio/x-pn-realaudio-plugin":["rmp"],"audio/x-realaudio":["*ra"],"audio/x-wav":["*wav"],"chemical/x-cdx":["cdx"],"chemical/x-cif":["cif"],"chemical/x-cmdf":["cmdf"],"chemical/x-cml":["cml"],"chemical/x-csml":["csml"],"chemical/x-xyz":["xyz"],"image/prs.btif":["btif"],"image/prs.pti":["pti"],"image/vnd.adobe.photoshop":["psd"],"image/vnd.airzip.accelerator.azv":["azv"],"image/vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"image/vnd.djvu":["djvu","djv"],"image/vnd.dvb.subtitle":["*sub"],"image/vnd.dwg":["dwg"],"image/vnd.dxf":["dxf"],"image/vnd.fastbidsheet":["fbs"],"image/vnd.fpx":["fpx"],"image/vnd.fst":["fst"],"image/vnd.fujixerox.edmics-mmr":["mmr"],"image/vnd.fujixerox.edmics-rlc":["rlc"],"image/vnd.microsoft.icon":["ico"],"image/vnd.ms-dds":["dds"],"image/vnd.ms-modi":["mdi"],"image/vnd.ms-photo":["wdp"],"image/vnd.net-fpx":["npx"],"image/vnd.pco.b16":["b16"],"image/vnd.tencent.tap":["tap"],"image/vnd.valve.source.texture":["vtf"],"image/vnd.wap.wbmp":["wbmp"],"image/vnd.xiff":["xif"],"image/vnd.zbrush.pcx":["pcx"],"image/x-3ds":["3ds"],"image/x-cmu-raster":["ras"],"image/x-cmx":["cmx"],"image/x-freehand":["fh","fhc","fh4","fh5","fh7"],"image/x-icon":["*ico"],"image/x-jng":["jng"],"image/x-mrsid-image":["sid"],"image/x-ms-bmp":["*bmp"],"image/x-pcx":["*pcx"],"image/x-pict":["pic","pct"],"image/x-portable-anymap":["pnm"],"image/x-portable-bitmap":["pbm"],"image/x-portable-graymap":["pgm"],"image/x-portable-pixmap":["ppm"],"image/x-rgb":["rgb"],"image/x-tga":["tga"],"image/x-xbitmap":["xbm"],"image/x-xpixmap":["xpm"],"image/x-xwindowdump":["xwd"],"message/vnd.wfa.wsc":["wsc"],"model/vnd.collada+xml":["dae"],"model/vnd.dwf":["dwf"],"model/vnd.gdl":["gdl"],"model/vnd.gtw":["gtw"],"model/vnd.mts":["mts"],"model/vnd.opengex":["ogex"],"model/vnd.parasolid.transmit.binary":["x_b"],"model/vnd.parasolid.transmit.text":["x_t"],"model/vnd.sap.vds":["vds"],"model/vnd.usdz+zip":["usdz"],"model/vnd.valve.source.compiled-map":["bsp"],"model/vnd.vtu":["vtu"],"text/prs.lines.tag":["dsc"],"text/vnd.curl":["curl"],"text/vnd.curl.dcurl":["dcurl"],"text/vnd.curl.mcurl":["mcurl"],"text/vnd.curl.scurl":["scurl"],"text/vnd.dvb.subtitle":["sub"],"text/vnd.fly":["fly"],"text/vnd.fmi.flexstor":["flx"],"text/vnd.graphviz":["gv"],"text/vnd.in3d.3dml":["3dml"],"text/vnd.in3d.spot":["spot"],"text/vnd.sun.j2me.app-descriptor":["jad"],"text/vnd.wap.wml":["wml"],"text/vnd.wap.wmlscript":["wmls"],"text/x-asm":["s","asm"],"text/x-c":["c","cc","cxx","cpp","h","hh","dic"],"text/x-component":["htc"],"text/x-fortran":["f","for","f77","f90"],"text/x-handlebars-template":["hbs"],"text/x-java-source":["java"],"text/x-lua":["lua"],"text/x-markdown":["mkd"],"text/x-nfo":["nfo"],"text/x-opml":["opml"],"text/x-org":["*org"],"text/x-pascal":["p","pas"],"text/x-processing":["pde"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/x-setext":["etx"],"text/x-sfv":["sfv"],"text/x-suse-ymp":["ymp"],"text/x-uuencode":["uu"],"text/x-vcalendar":["vcs"],"text/x-vcard":["vcf"],"video/vnd.dece.hd":["uvh","uvvh"],"video/vnd.dece.mobile":["uvm","uvvm"],"video/vnd.dece.pd":["uvp","uvvp"],"video/vnd.dece.sd":["uvs","uvvs"],"video/vnd.dece.video":["uvv","uvvv"],"video/vnd.dvb.file":["dvb"],"video/vnd.fvt":["fvt"],"video/vnd.mpegurl":["mxu","m4u"],"video/vnd.ms-playready.media.pyv":["pyv"],"video/vnd.uvvu.mp4":["uvu","uvvu"],"video/vnd.vivo":["viv"],"video/x-f4v":["f4v"],"video/x-fli":["fli"],"video/x-flv":["flv"],"video/x-m4v":["m4v"],"video/x-matroska":["mkv","mk3d","mks"],"video/x-mng":["mng"],"video/x-ms-asf":["asf","asx"],"video/x-ms-vob":["vob"],"video/x-ms-wm":["wm"],"video/x-ms-wmv":["wmv"],"video/x-ms-wmx":["wmx"],"video/x-ms-wvx":["wvx"],"video/x-msvideo":["avi"],"video/x-sgi-movie":["movie"],"video/x-smv":["smv"],"x-conference/x-cooltalk":["ice"]}});var fO=E((Uje,P3)=>{"use strict";var h$e=S3();P3.exports=new h$e(R3(),O3())});var N3=E((Bje,x3)=>{"use strict";var p$e=/["'&<>]/;x3.exports=m$e;function m$e(t){var e=""+t,r=p$e.exec(e);if(!r)return e;var n,s="",i=0,o=0;for(i=r.index;i<e.length;i++){switch(e.charCodeAt(i)){case 34:n="&quot;";break;case 38:n="&amp;";break;case 39:n="&#39;";break;case 60:n="&lt;";break;case 62:n="&gt;";break;default:continue}o!==i&&(s+=e.substring(o,i)),o=i+1,s+=n}return o!==i?s+e.substring(o,i):s}});var C3=E(hO=>{var g$e=/^(-?(?:\d+)?\.?\d+) *(m(?:illiseconds?|s(?:ecs?)?))?(s(?:ec(?:onds?|s)?)?)?(m(?:in(?:utes?|s)?)?)?(h(?:ours?|rs?)?)?(d(?:ays?)?)?(w(?:eeks?|ks?)?)?(y(?:ears?|rs?)?)?$/,w0=1e3,b0=w0*60,E0=b0*60,fh=E0*24,dO=fh*365.25;function y$e(t){var e,r=t.toLowerCase().match(g$e);if(r!=null&&(e=parseFloat(r[1])))return r[3]!=null?e*w0:r[4]!=null?e*b0:r[5]!=null?e*E0:r[6]!=null?e*fh:r[7]!=null?e*fh*7:r[8]!=null?e*dO:e}function uh(t,e,r,n){var s=(t|0)===t?t:~~(t+.5);return e+s+(n?" "+r+(s!=1?"s":""):r[0])}function _$e(t,e){var r=t<0?"-":"",n=t<0?-t:t;return n<w0?t+(e?" ms":"ms"):n<b0?uh(n/w0,r,"second",e):n<E0?uh(n/b0,r,"minute",e):n<fh?uh(n/E0,r,"hour",e):n<dO?uh(n/fh,r,"day",e):uh(n/dO,r,"year",e)}hO.format=_$e;hO.parse=y$e});var A3=E((Vje,I3)=>{"use strict";function v$e(t){if(t[0]!=="/"||t[1]!=="/")return t;for(let e=2,r=t.length;e<r;++e)if(t[e]!=="/")return t.slice(e-1)}I3.exports.collapseLeadingSlashes=v$e});var D3=E((Hje,k3)=>{"use strict";function w$e(t){for(let e=0,r=t.length;e<r;++e)if(t[e].length!==1&&t[e][0]===".")return!0;return!1}k3.exports.containsDotFile=w$e});var j3=E(M3=>{"use strict";function b$e(t,e,r){return t+" "+(r?r.start+"-"+r.end:"*")+"/"+e}M3.contentRange=b$e});var L3=E(q3=>{"use strict";function E$e(t,e){let r=`<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>`+t+`</title>
</head>
<body>
<pre>`+e+`</pre>
</body>
</html>
`;return[r,Buffer.byteLength(r)]}q3.createHtmlDocument=E$e});var U3=E((Kje,F3)=>{"use strict";function S$e(t,e){if(typeof t=="string")return[t];if(t===!1)return[];if(Array.isArray(t)){for(let r=0,n=t.length;r<n;++r)if(typeof t[r]!="string")throw new TypeError(e+" must be array of strings or false");return t}else throw new TypeError(e+" must be array of strings or false")}F3.exports.normalizeList=S$e});var z3=E((Jje,B3)=>{"use strict";function T$e(t,e){let r=e.slice(e.indexOf("=")+1),n=[],s=r.length,i=0,o=0,a=0,l,c,u=r.indexOf(","),d=r.indexOf("-"),p=-1;for(;u===-1&&(u=s),l=parseInt(r.slice(p+1,d),10),c=parseInt(r.slice(d+1,u),10),l!==l?(l=t-c,c=t-1):(c!==c||c>t-1)&&(c=t-1),l===l&&c===c&&l>-1&&l<=c&&n.push({start:l,end:c,index:a++}),u!==s;)p=u++,d=r.indexOf("-",u),u=r.indexOf(",",u);if(a<2)return n;for(n.sort($$e),o=a,a=0,i=1;i<o;){let f=n[i++],h=n[a];f.start>h.end+1?n[++a]=f:f.end>h.end&&(h.end=f.end,h.index>f.index&&(h.index=f.index))}return n.length=a+1,n.sort(R$e),n}function R$e(t,e){return t.index-e.index}function $$e(t,e){return t.start-e.start}B3.exports.parseBytesRange=T$e});var G3=E((Yje,H3)=>{"use strict";var V3=String.prototype.slice;function O$e(t,e){let r=0,n=0,s;for(let i=0,o=t.length;i<o;i++)switch(t.charCodeAt(i)){case 32:n===r&&(n=r=i+1);break;case 44:if(n!==r&&(s=e(V3.call(t,n,r)),s!==void 0))return s;n=r=i+1;break;default:r=i+1;break}if(n!==r)return e(V3.call(t,n,r))}H3.exports.parseTokenList=O$e});var X3=E((Xje,Y3)=>{var P$e=require("path").relative;Y3.exports=A$e;var x$e=process.cwd();function K3(t,e){for(var r=t.split(/[ ,]+/),n=String(e).toLowerCase(),s=0;s<r.length;s++){var i=r[s];if(i&&(i==="*"||i.toLowerCase()===n))return!0}return!1}function N$e(t,e,r){var n=Object.getOwnPropertyDescriptor(t,e),s=n.value;return n.get=function(){return s},n.writable&&(n.set=function(o){return s=o}),delete n.value,delete n.writable,Object.defineProperty(t,e,n),n}function C$e(t){for(var e="",r=0;r<t;r++)e+=", arg"+r;return e.substr(2)}function I$e(t){var e=this.name+": "+this.namespace;this.message&&(e+=" deprecated "+this.message);for(var r=0;r<t.length;r++)e+=`
    at `+t[r].toString();return e}function A$e(t){if(!t)throw new TypeError("argument namespace is required");var e=T0(),r=Mc(e[1]),n=r[0];function s(i){S0.call(s,i)}return s._file=n,s._ignored=D$e(t),s._namespace=t,s._traced=M$e(t),s._warned=Object.create(null),s.function=F$e,s.property=U$e,s}function k$e(t,e){var r=typeof t.listenerCount!="function"?t.listeners(e).length:t.listenerCount(e);return r>0}function D$e(t){if(process.noDeprecation)return!0;var e=process.env.NO_DEPRECATION||"";return K3(e,t)}function M$e(t){if(process.traceDeprecation)return!0;var e=process.env.TRACE_DEPRECATION||"";return K3(e,t)}function S0(t,e){var r=k$e(process,"deprecation");if(!(!r&&this._ignored)){var n,s,i,o,a=0,l=!1,c=T0(),u=this._file;for(e?(o=e,i=Mc(c[1]),i.name=o.name,u=i[0]):(a=2,o=Mc(c[a]),i=o);a<c.length;a++)if(n=Mc(c[a]),s=n[0],s===u)l=!0;else if(s===this._file)u=this._file;else if(l)break;var d=n?o.join(":")+"__"+n.join(":"):void 0;if(!(d!==void 0&&d in this._warned)){this._warned[d]=!0;var p=t;if(p||(p=i===o||!i.name?W3(o):W3(i)),r){var f=J3(this._namespace,p,c.slice(a));process.emit("deprecation",f);return}var h=process.stderr.isTTY?q$e:j$e,m=h.call(this,p,n,c.slice(a));process.stderr.write(m+`
`,"utf8")}}}function Mc(t){var e=t.getFileName()||"<anonymous>",r=t.getLineNumber(),n=t.getColumnNumber();t.isEval()&&(e=t.getEvalOrigin()+", "+e);var s=[e,r,n];return s.callSite=t,s.name=t.getFunctionName(),s}function W3(t){var e=t.callSite,r=t.name;r||(r="<anonymous@"+pO(t)+">");var n=e.getThis(),s=n&&e.getTypeName();return s==="Object"&&(s=void 0),s==="Function"&&(s=n.name||s),s&&e.getMethodName()?s+"."+r:r}function j$e(t,e,r){var n=new Date().toUTCString(),s=n+" "+this._namespace+" deprecated "+t;if(this._traced){for(var i=0;i<r.length;i++)s+=`
    at `+r[i].toString();return s}return e&&(s+=" at "+pO(e)),s}function q$e(t,e,r){var n="\x1B[36;1m"+this._namespace+"\x1B[22;39m \x1B[33;1mdeprecated\x1B[22;39m \x1B[0m"+t+"\x1B[39m";if(this._traced){for(var s=0;s<r.length;s++)n+=`
    \x1B[36mat `+r[s].toString()+"\x1B[39m";return n}return e&&(n+=" \x1B[36m"+pO(e)+"\x1B[39m"),n}function pO(t){return P$e(x$e,t[0])+":"+t[1]+":"+t[2]}function T0(){var t=Error.stackTraceLimit,e={},r=Error.prepareStackTrace;Error.prepareStackTrace=L$e,Error.stackTraceLimit=Math.max(10,t),Error.captureStackTrace(e);var n=e.stack.slice(1);return Error.prepareStackTrace=r,Error.stackTraceLimit=t,n}function L$e(t,e){return e}function F$e(t,e){if(typeof t!="function")throw new TypeError("argument fn must be a function");var r=C$e(t.length),n=T0(),s=Mc(n[1]);s.name=t.name;var i=new Function("fn","log","deprecate","message","site",`"use strict"
return function (`+r+`) {log.call(deprecate, message, site)
return fn.apply(this, arguments)
}`)(t,S0,this,e,s);return i}function U$e(t,e,r){if(!t||typeof t!="object"&&typeof t!="function")throw new TypeError("argument obj must be object");var n=Object.getOwnPropertyDescriptor(t,e);if(!n)throw new TypeError("must call property on owner object");if(!n.configurable)throw new TypeError("property must be configurable");var s=this,i=T0(),o=Mc(i[1]);o.name=e,"value"in n&&(n=N$e(t,e,r));var a=n.get,l=n.set;typeof a=="function"&&(n.get=function(){return S0.call(s,r,o),a.apply(this,arguments)}),typeof l=="function"&&(n.set=function(){return S0.call(s,r,o),l.apply(this,arguments)}),Object.defineProperty(t,e,n)}function J3(t,e,r){var n=new Error,s;return Object.defineProperty(n,"constructor",{value:J3}),Object.defineProperty(n,"message",{configurable:!0,enumerable:!1,value:e,writable:!0}),Object.defineProperty(n,"name",{enumerable:!1,configurable:!0,value:"DeprecationError",writable:!0}),Object.defineProperty(n,"namespace",{configurable:!0,enumerable:!1,value:t,writable:!0}),Object.defineProperty(n,"stack",{configurable:!0,enumerable:!1,get:function(){return s!==void 0?s:s=I$e.call(this,r)},set:function(o){s=o}}),n}});var Z3=E((Qje,Q3)=>{"use strict";Q3.exports=Object.setPrototypeOf||({__proto__:[]}instanceof Array?B$e:z$e);function B$e(t,e){return t.__proto__=e,t}function z$e(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(t,r)||(t[r]=e[r]);return t}});var eG=E((Zje,V$e)=>{V$e.exports={"100":"Continue","101":"Switching Protocols","102":"Processing","103":"Early Hints","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I'm a Teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Too Early","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required"}});var nG=E((eqe,rG)=>{"use strict";var mO=eG();rG.exports=as;as.message=mO;as.code=H$e(mO);as.codes=G$e(mO);as.redirect={300:!0,301:!0,302:!0,303:!0,305:!0,307:!0,308:!0};as.empty={204:!0,205:!0,304:!0};as.retry={502:!0,503:!0,504:!0};function H$e(t){var e={};return Object.keys(t).forEach(function(n){var s=t[n],i=Number(n);e[s.toLowerCase()]=i}),e}function G$e(t){return Object.keys(t).map(function(r){return Number(r)})}function W$e(t){var e=t.toLowerCase();if(!Object.prototype.hasOwnProperty.call(as.code,e))throw new Error('invalid status message: "'+t+'"');return as.code[e]}function tG(t){if(!Object.prototype.hasOwnProperty.call(as.message,t))throw new Error("invalid status code: "+t);return as.message[t]}function as(t){if(typeof t=="number")return tG(t);if(typeof t!="string")throw new TypeError("code must be a number or string");var e=parseInt(t,10);return isNaN(e)?W$e(t):tG(e)}});var sG=E((tqe,gO)=>{typeof Object.create=="function"?gO.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:gO.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}});var iG=E((rqe,_O)=>{try{if(yO=require("util"),typeof yO.inherits!="function")throw"";_O.exports=yO.inherits}catch{_O.exports=sG()}var yO});var aG=E((nqe,oG)=>{"use strict";oG.exports=K$e;function K$e(t){return t.split(" ").map(function(e){return e.slice(0,1).toUpperCase()+e.slice(1)}).join("").replace(/[^ _0-9a-z]/gi,"")}});var dG=E((sqe,Ma)=>{"use strict";var J$e=X3()("http-errors"),lG=Z3(),jc=nG(),vO=iG(),Y$e=aG();Ma.exports=R0;Ma.exports.HttpError=X$e();Ma.exports.isHttpError=Z$e(Ma.exports.HttpError);t1e(Ma.exports,jc.codes,Ma.exports.HttpError);function cG(t){return Number(String(t).charAt(0)+"00")}function R0(){for(var t,e,r=500,n={},s=0;s<arguments.length;s++){var i=arguments[s],o=typeof i;if(o==="object"&&i instanceof Error)t=i,r=t.status||t.statusCode||r;else if(o==="number"&&s===0)r=i;else if(o==="string")e=i;else if(o==="object")n=i;else throw new TypeError("argument #"+(s+1)+" unsupported type "+o)}typeof r=="number"&&(r<400||r>=600)&&J$e("non-error status code; use only 4xx or 5xx status codes"),(typeof r!="number"||!jc.message[r]&&(r<400||r>=600))&&(r=500);var a=R0[r]||R0[cG(r)];t||(t=a?new a(e):new Error(e||jc.message[r]),Error.captureStackTrace(t,R0)),(!a||!(t instanceof a)||t.status!==r)&&(t.expose=r<500,t.status=t.statusCode=r);for(var l in n)l!=="status"&&l!=="statusCode"&&(t[l]=n[l]);return t}function X$e(){function t(){throw new TypeError("cannot construct abstract class")}return vO(t,Error),t}function Q$e(t,e,r){var n=fG(e);function s(i){var o=i??jc.message[r],a=new Error(o);return Error.captureStackTrace(a,s),lG(a,s.prototype),Object.defineProperty(a,"message",{enumerable:!0,configurable:!0,value:o,writable:!0}),Object.defineProperty(a,"name",{enumerable:!1,configurable:!0,value:n,writable:!0}),a}return vO(s,t),uG(s,n),s.prototype.status=r,s.prototype.statusCode=r,s.prototype.expose=!0,s}function Z$e(t){return function(r){return!r||typeof r!="object"?!1:r instanceof t?!0:r instanceof Error&&typeof r.expose=="boolean"&&typeof r.statusCode=="number"&&r.status===r.statusCode}}function e1e(t,e,r){var n=fG(e);function s(i){var o=i??jc.message[r],a=new Error(o);return Error.captureStackTrace(a,s),lG(a,s.prototype),Object.defineProperty(a,"message",{enumerable:!0,configurable:!0,value:o,writable:!0}),Object.defineProperty(a,"name",{enumerable:!1,configurable:!0,value:n,writable:!0}),a}return vO(s,t),uG(s,n),s.prototype.status=r,s.prototype.statusCode=r,s.prototype.expose=!1,s}function uG(t,e){var r=Object.getOwnPropertyDescriptor(t,"name");r&&r.configurable&&(r.value=e,Object.defineProperty(t,"name",r))}function t1e(t,e,r){e.forEach(function(s){var i,o=Y$e(jc.message[s]);switch(cG(s)){case 400:i=Q$e(r,o,s);break;case 500:i=e1e(r,o,s);break}i&&(t[s]=i,t[o]=i)})}function fG(t){return t.slice(-5)==="Error"?t:t+"Error"}});var pG=E((iqe,hG)=>{"use strict";var wO=dG();function r1e(t,e){return e?e instanceof Error?wO(t,e,{expose:!1}):wO(t,e):wO(t)}hG.exports.createHttpError=r1e});var RG=E((oqe,TG)=>{"use strict";var vG=require("fs"),dh=require("path"),n1e=require("stream"),mr=require("util").debuglog("send"),s1e=L$(),i1e=N3(),mG=fO(),o1e=C3(),{collapseLeadingSlashes:a1e}=A3(),{containsDotFile:l1e}=D3(),{contentRange:gG}=j3(),{createHtmlDocument:ja}=L3(),{isUtf8MimeType:c1e}=uO(),{normalizeList:yG}=U3(),{parseBytesRange:u1e}=z3(),{parseTokenList:wG}=G3(),{createHttpError:f1e}=pG(),d1e=dh.extname,bG=dh.join,bO=dh.normalize,EG=dh.resolve,$0=dh.sep,O0=n1e.Readable,h1e=/^ *bytes=/,p1e=60*60*24*365*1e3,_G=/(?:^|[\\/])\.\.(?:[\\/]|$)/,m1e={400:ja("Error","Bad Request"),403:ja("Error","Forbidden"),404:ja("Error","Not Found"),412:ja("Error","Precondition Failed"),416:ja("Error","Range Not Satisfiable"),500:ja("Error","Internal Server Error")},g1e=["allow","ignore","deny"];function y1e(t){let e;return typeof t=="string"?e=o1e.parse(t):e=Number(t),e!==e?0:Math.min(Math.max(0,e),p1e)}function _1e(t){t=t??{};let e=t.acceptRanges!==void 0?Boolean(t.acceptRanges):!0,r=t.cacheControl!==void 0?Boolean(t.cacheControl):!0,n=t.contentType!==void 0?Boolean(t.contentType):!0,s=t.etag!==void 0?Boolean(t.etag):!0,i=t.dotfiles!==void 0?g1e.indexOf(t.dotfiles):1;if(i===-1)throw new TypeError('dotfiles option must be "allow", "deny", or "ignore"');let o=t.extensions!==void 0?yG(t.extensions,"extensions option"):[],a=t.immutable!==void 0?Boolean(t.immutable):!1,l=t.index!==void 0?yG(t.index,"index option"):["index.html"],c=t.lastModified!==void 0?Boolean(t.lastModified):!0,u=y1e(t.maxAge??t.maxage),d=t.maxContentRangeChunkSize!==void 0?Number(t.maxContentRangeChunkSize):null,p=t.root?EG(t.root):null,f=Number.isSafeInteger(t.highWaterMark)&&t.highWaterMark>0?t.highWaterMark:null;return{acceptRanges:e,cacheControl:r,contentType:n,etag:s,dotfiles:i,extensions:o,immutable:a,index:l,lastModified:c,maxage:u,maxContentRangeChunkSize:d,root:p,highWaterMark:f,start:t.start,end:t.end}}function v1e(t,e){let r=s1e(t);if(r==null)return{statusCode:400};if(~r.indexOf("\0"))return{statusCode:400};let n;if(e!==null){if(r&&(r=bO("."+$0+r)),_G.test(r))return mr('malicious path "%s"',r),{statusCode:403};n=r.split($0),r=bO(bG(e,r))}else{if(_G.test(r))return mr('malicious path "%s"',r),{statusCode:403};n=bO(r).split($0),r=EG(r)}return{path:r,parts:n}}function SG(t){return t[t.length-1]==="/"}function w1e(t){return t.headers["if-match"]||t.headers["if-unmodified-since"]||t.headers["if-none-match"]||t.headers["if-modified-since"]}function b1e(t,e){if("cache-control"in t.headers&&t.headers["cache-control"].indexOf("no-cache")!==-1)return!1;if("if-none-match"in t.headers){let r=t.headers["if-none-match"];if(r==="*")return!0;let n=e.ETag;if(typeof n!="string")return!1;let s=n.length;return!!wG(r,function(o){let a=o.length;if(s===a&&o===n||s>a&&"W/"+o===n)return!0})}if("if-modified-since"in t.headers){let r=t.headers["if-modified-since"],n=e["Last-Modified"];if(!n||Date.parse(n)<=Date.parse(r))return!0}return!1}function E1e(t,e){let r=t.headers["if-match"];if(r){let n=e.ETag;if(r!=="*"&&(wG(r,function(i){if(i===n||"W/"+i===n)return!0})||!1)!==!0)return!0}if("if-unmodified-since"in t.headers){let n=t.headers["if-unmodified-since"],s=Date.parse(n);if(s===s){let i=Date.parse(e["Last-Modified"]);if(i!==i||i>s)return!0}}return!1}function S1e(t,e){if(!("if-range"in t.headers))return!0;let r=t.headers["if-range"];if(r.indexOf('"')!==-1){let i=e.ETag;return i&&r.indexOf(i)!==-1||!1}let n=Date.parse(r);if(n!==n)return!1;let s=Date.parse(e["Last-Modified"]);return s!==s||s<=n}function EO(t){return new Promise(e=>{vG.stat(t,function(n,s){e({error:n,stat:s})})})}function Fs(t,e){let r={};if(e&&e.headers)for(let s in e.headers)r[s]=e.headers[s];let n=m1e[t];return r["Content-Type"]="text/html; charset=utf-8",r["Content-Length"]=n[1],r["Content-Security-Policy"]="default-src 'none'",r["X-Content-Type-Options"]="nosniff",{statusCode:t,headers:r,stream:O0.from(n[0]),type:"error",metadata:{error:f1e(t,e)}}}function SO(t){switch(t.code){case"ENAMETOOLONG":case"ENOTDIR":case"ENOENT":return Fs(404,t);default:return Fs(500,t)}}function T1e(t,e,r){return mr("not modified"),delete t["Content-Encoding"],delete t["Content-Language"],delete t["Content-Length"],delete t["Content-Range"],delete t["Content-Type"],{statusCode:304,headers:t,stream:O0.from(""),type:"file",metadata:{path:e,stat:r}}}function TO(t,e,r,n){let s=r.size,i=n.start??0,o=200,a={};if(mr('send "%s"',e),n.acceptRanges&&(mr("accept ranges"),a["Accept-Ranges"]="bytes"),n.cacheControl){let c="public, max-age="+Math.floor(n.maxage/1e3);n.immutable&&(c+=", immutable"),mr("cache-control %s",c),a["Cache-Control"]=c}if(n.lastModified){let c=r.mtime.toUTCString();mr("modified %s",c),a["Last-Modified"]=c}if(n.etag){let c='W/"'+r.size.toString(16)+"-"+r.mtime.getTime().toString(16)+'"';mr("etag %s",c),a.ETag=c}if(n.contentType){let c=mG.getType(e)||mG.default_type;mr("content-type %s",c),c&&c1e(c)&&(c+="; charset=utf-8"),c&&(a["Content-Type"]=c)}if(w1e(t)){if(E1e(t,a))return Fs(412);if(b1e(t,a))return T1e(a,e,r)}if(s=Math.max(0,s-i),n.end!==void 0){let c=n.end-i+1;s>c&&(s=c)}if(n.acceptRanges){let c=t.headers.range;if(c!==void 0&&h1e.test(c))if(S1e(t,a)){let u=u1e(s,c);if(u.length===0)return mr("range unsatisfiable"),a["Content-Range"]=gG("bytes",s),Fs(416,{headers:{"Content-Range":a["Content-Range"]}});u.length===1&&(mr("range %j",u),o=206,n.maxContentRangeChunkSize&&(u[0].end=Math.min(u[0].end,u[0].start+n.maxContentRangeChunkSize-1)),a["Content-Range"]=gG("bytes",s,u[0]),i+=u[0].start,s=u[0].end-u[0].start+1)}else mr("range stale")}if(a["Content-Length"]=s,t.method==="HEAD")return{statusCode:o,headers:a,stream:O0.from(""),type:"file",metadata:{path:e,stat:r}};let l=vG.createReadStream(e,{highWaterMark:n.highWaterMark,start:i,end:Math.max(i,i+s-1)});return{statusCode:o,headers:a,stream:l,type:"file",metadata:{path:e,stat:r}}}function R1e(t,e){if(SG(e.path))return Fs(403);let r=encodeURI(a1e(e.path+"/")),n=ja("Redirecting","Redirecting to "+i1e(r)),s={};return s["Content-Type"]="text/html; charset=utf-8",s["Content-Length"]=n[1],s["Content-Security-Policy"]="default-src 'none'",s["X-Content-Type-Options"]="nosniff",s.Location=r,{statusCode:301,headers:s,stream:O0.from(n[0]),type:"directory",metadata:{requestPath:e.path,path:t}}}async function $1e(t,e,r){let n;for(let s=0;s<r.index.length;s++){let i=r.index[s],o=bG(e,i),{error:a,stat:l}=await EO(o);if(a){n=a;continue}if(!l.isDirectory())return TO(t,o,l,r)}return n?SO(n):Fs(404)}async function O1e(t,e,r){let{error:n,stat:s}=await EO(e);if(n&&n.code==="ENOENT"&&!d1e(e)&&e[e.length-1]!==$0){let i=n;for(let o=0;o<r.extensions.length;o++){let a=r.extensions[o],l=e+"."+a,{error:c,stat:u}=await EO(l);if(c){i=c;continue}if(u.isDirectory()){i=null;continue}return TO(t,l,u,r)}return i?SO(i):Fs(404)}return n?SO(n):s.isDirectory()?R1e(e,r):TO(t,e,s,r)}async function P1e(t,e,r){let n=_1e(r);n.path=e;let s=v1e(e,n.root),{path:i,parts:o}=s;if(s.statusCode!==void 0)return Fs(s.statusCode);if((mr.enabled||n.dotfiles!==0)&&l1e(o))switch(n.dotfiles){case 0:mr('allow dotfile "%s"',i);break;case 2:return mr('deny dotfile "%s"',i),Fs(403);case 1:default:return mr('ignore dotfile "%s"',i),Fs(404)}return n.index.length&&SG(e)?$1e(t,i,n):O1e(t,i,n)}TG.exports.send=P1e});var $G=E((aqe,qc)=>{"use strict";var x1e=uO().isUtf8MimeType,N1e=fO(),RO=RG().send;qc.exports=RO;qc.exports.default=RO;qc.exports.send=RO;qc.exports.isUtf8MimeType=x1e;qc.exports.mime=N1e});var OG=E((lqe,gh)=>{"use strict";function OO(t){if(!new.target)return new OO(t);let{supportedValues:e=[],cache:r}=t&&typeof t=="object"&&t||{};this.supportedValues=e,this.cache=r}OO.prototype.negotiate=function(t){return typeof t!="string"?null:this.cache?(this.cache.has(t)||this.cache.set(t,mh(t,this.supportedValues)),this.cache.get(t)):mh(t,this.supportedValues)};function mh(t,e){if(!t||!Array.isArray(e)||e.length===0)return null;if(t==="*")return e[0];let r=null,n=1/0,s=0;function i(o,a){if(a===0||s>a)return!1;let l=o==="*"&&e[0]||o,c=e.indexOf(l);return c===-1?!1:c===0&&a===1?(r=l,!0):((s<a||n>c)&&(r=l,n=c,s=a),!1)}return C1e(t,i),r}var hh=0,ph=1,P0=2,$O=3;function C1e(t,e){let r="",n,s=hh;for(let i=0,o=t.length;i<o;++i){let a=t[i];if(!(a===" "||a==="	")){if(a===";"){s===ph&&(s=P0,n="");continue}else if(a===","){if(s===ph){if(e(r,1)){s=$O;break}s=hh,r=""}else if(s===P0){if(e(r,parseFloat(n)||0)){s=$O;break}s=hh,r="",n=""}continue}else if(s===P0){if(a==="q"||a==="=")continue;if(a==="."||a==="1"||a==="0"||a==="2"||a==="3"||a==="4"||a==="5"||a==="6"||a==="7"||a==="8"||a==="9"){n+=a;continue}}else if(s===hh){s=ph,r+=a;continue}if(s===ph){let l=t[i-1];(l===" "||l==="	")&&(r=""),r+=a;continue}if(e(r,parseFloat(n)||0)){s=$O;break}s=hh,r=a,n=""}}s===ph?e(r,1):s===P0&&e(r,parseFloat(n)||0)}gh.exports=mh;gh.exports.default=mh;gh.exports.negotiate=mh;gh.exports.Negotiator=OO});var NG=E((PO,xG)=>{var x0=require("buffer"),Us=x0.Buffer;function PG(t,e){for(var r in t)e[r]=t[r]}Us.from&&Us.alloc&&Us.allocUnsafe&&Us.allocUnsafeSlow?xG.exports=x0:(PG(x0,PO),PO.Buffer=qa);function qa(t,e,r){return Us(t,e,r)}qa.prototype=Object.create(Us.prototype);PG(Us,qa);qa.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Us(t,e,r)};qa.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=Us(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};qa.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Us(t)};qa.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return x0.SlowBuffer(t)}});var MG=E((cqe,xO)=>{"use strict";xO.exports=B1e;xO.exports.parse=G1e;var CG=require("path").basename,I1e=NG().Buffer,A1e=/[\x00-\x20"'()*,/:;<=>?@[\\\]{}\x7f]/g,k1e=/%[0-9A-Fa-f]{2}/,D1e=/%([0-9A-Fa-f]{2})/g,AG=/[^\x20-\x7e\xa0-\xff]/g,M1e=/\\([\u0000-\u007f])/g,j1e=/([\\"])/g,IG=/;[\x09\x20]*([!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*=[\x09\x20]*("(?:[\x20!\x23-\x5b\x5d-\x7e\x80-\xff]|\\[\x20-\x7e])*"|[!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*/g,q1e=/^[\x20-\x7e\x80-\xff]+$/,L1e=/^[!#$%&'*+.0-9A-Z^_`a-z|~-]+$/,F1e=/^([A-Za-z0-9!#$%&+\-^_`{}~]+)'(?:[A-Za-z]{2,3}(?:-[A-Za-z]{3}){0,3}|[A-Za-z]{4,8}|)'((?:%[0-9A-Fa-f]{2}|[A-Za-z0-9!#$&+.^_`|~-])+)$/,U1e=/^([!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*(?:$|;)/;function B1e(t,e){var r=e||{},n=r.type||"attachment",s=z1e(t,r.fallback);return V1e(new DG(n,s))}function z1e(t,e){if(t!==void 0){var r={};if(typeof t!="string")throw new TypeError("filename must be a string");if(e===void 0&&(e=!0),typeof e!="string"&&typeof e!="boolean")throw new TypeError("fallback must be a string or boolean");if(typeof e=="string"&&AG.test(e))throw new TypeError("fallback must be ISO-8859-1 string");var n=CG(t),s=q1e.test(n),i=typeof e!="string"?e&&kG(n):CG(e),o=typeof i=="string"&&i!==n;return(o||!s||k1e.test(n))&&(r["filename*"]=n),(s||o)&&(r.filename=o?i:n),r}}function V1e(t){var e=t.parameters,r=t.type;if(!r||typeof r!="string"||!L1e.test(r))throw new TypeError("invalid type");var n=String(r).toLowerCase();if(e&&typeof e=="object")for(var s,i=Object.keys(e).sort(),o=0;o<i.length;o++){s=i[o];var a=s.substr(-1)==="*"?Y1e(e[s]):J1e(e[s]);n+="; "+s+"="+a}return n}function H1e(t){var e=F1e.exec(t);if(!e)throw new TypeError("invalid extended field value");var r=e[1].toLowerCase(),n=e[2],s,i=n.replace(D1e,W1e);switch(r){case"iso-8859-1":s=kG(i);break;case"utf-8":s=I1e.from(i,"binary").toString("utf8");break;default:throw new TypeError("unsupported charset in extended field")}return s}function kG(t){return String(t).replace(AG,"?")}function G1e(t){if(!t||typeof t!="string")throw new TypeError("argument string is required");var e=U1e.exec(t);if(!e)throw new TypeError("invalid type format");var r=e[0].length,n=e[1].toLowerCase(),s,i=[],o={},a;for(r=IG.lastIndex=e[0].substr(-1)===";"?r-1:r;e=IG.exec(t);){if(e.index!==r)throw new TypeError("invalid parameter format");if(r+=e[0].length,s=e[1].toLowerCase(),a=e[2],i.indexOf(s)!==-1)throw new TypeError("invalid duplicate parameter");if(i.push(s),s.indexOf("*")+1===s.length){s=s.slice(0,-1),a=H1e(a),o[s]=a;continue}typeof o[s]!="string"&&(a[0]==='"'&&(a=a.substr(1,a.length-2).replace(M1e,"$1")),o[s]=a)}if(r!==-1&&r!==t.length)throw new TypeError("invalid parameter format");return new DG(n,o)}function W1e(t,e){return String.fromCharCode(parseInt(e,16))}function K1e(t){return"%"+String(t).charCodeAt(0).toString(16).toUpperCase()}function J1e(t){var e=String(t);return'"'+e.replace(j1e,"\\$1")+'"'}function Y1e(t){var e=String(t),r=encodeURIComponent(e).replace(A1e,K1e);return"UTF-8''"+r}function DG(t,e){this.type=t,this.parameters=e}});var FG=E((uqe,LG)=>{"use strict";var X1e=require("os"),sn=require("path"),N0=require("fs/promises"),jG=C_(),qG=Math.max(1,X1e.cpus().length-1),La={_getExtendedInfo:async function(t,e){let r=t.split(sn.sep).length,n=await N0.readdir(t),s=async o=>{let a=sn.join(t,o),l;try{l=await N0.stat(a)}catch{return}l.isDirectory()?(e.totalFolderCount++,a.split(sn.sep).length===r+1&&e.folderCount++,await La._getExtendedInfo(a,e)):(e.totalSize+=l.size,e.totalFileCount++,a.split(sn.sep).length===r+1&&e.fileCount++,e.lastModified=Math.max(e.lastModified,l.mtimeMs))},i=jG.promise(s,qG);await Promise.all(n.map(o=>i.push(o)))},getExtendedInfo:async function(t){let e={totalSize:0,fileCount:0,totalFileCount:0,folderCount:0,totalFolderCount:0,lastModified:0};return await La._getExtendedInfo(t,e),e},list:async function(t,e,r){let n={dirs:[],files:[]},s=await N0.readdir(t);if((r==="deny"||r==="ignore")&&(s=s.filter(a=>a.charAt(0)!==".")),s.length<1)return n;let i=async a=>{let l;try{l=await N0.stat(sn.join(t,a))}catch{return}let c={name:a,stats:l};l.isDirectory()?(e.extendedFolderInfo&&(c.extendedInfo=await La.getExtendedInfo(sn.join(t,a))),n.dirs.push(c)):n.files.push(c)},o=jG.promise(i,qG);return await Promise.all(s.map(a=>o.push(a))),n.dirs.sort((a,l)=>a.name.localeCompare(l.name)),n.files.sort((a,l)=>a.name.localeCompare(l.name)),n},send:async function({reply:t,dir:e,options:r,route:n,prefix:s,dotfiles:i}){if(t.request.query.format==="html"&&typeof r.render!="function")throw new TypeError("The `list.render` option must be a function and is required with the URL parameter `format=html`");let o;try{o=await La.list(e,r,i)}catch{return t.callNotFound()}if((t.request.query.format||r.format)!=="html"){if(r.jsonFormat!=="extended"){let c={dirs:[],files:[]};o.dirs.forEach(u=>c.dirs.push(u.name)),o.files.forEach(u=>c.files.push(u.name)),await t.send(c)}else await t.send(o);return}let l=r.render(o.dirs.map(c=>La.htmlInfo(c,n,s,r)),o.files.map(c=>La.htmlInfo(c,n,s,r)));await t.type("text/html").send(l)},htmlInfo:function(t,e,r,n){return n.names?.includes(sn.basename(e))&&(e=sn.normalize(sn.join(e,".."))),{href:encodeURI(sn.join(r,e,t.name).replace(/\\/gu,"/")),name:t.name,stats:t.stats,extendedInfo:t.extendedInfo}},handle:function(t,e){return e.names?.includes(sn.basename(t))||((e.names?.includes("/")&&t[t.length-1]==="/")??!1)},path:function(t,e){let r=e[e.length-1]==="/"?e+"none":e;return sn.dirname(sn.join(t,r))},validateOptions:function(t){if(t.list){if(Array.isArray(t.root))return new TypeError("multi-root with list option is not supported");if(t.list.format&&t.list.format!=="json"&&t.list.format!=="html")return new TypeError("The `list.format` option must be json or html");if(t.list.names&&!Array.isArray(t.list.names))return new TypeError("The `list.names` option must be an array");if(t.list.jsonFormat!=null&&t.list.jsonFormat!=="names"&&t.list.jsonFormat!=="extended")return new TypeError("The `list.jsonFormat` option must be name or extended");if(t.list.format==="html"&&typeof t.list.render!="function")return new TypeError("The `list.render` option must be a function and is required with html format")}}};LG.exports=La});var WG=E((fqe,C0)=>{"use strict";var bi=require("path"),{fileURLToPath:UG}=require("url"),{statSync:GG}=require("fs"),{glob:Q1e}=m3(),Z1e=w3(),yh=$G(),eOe=OG(),tOe=MG(),Fa=FG(),BG=/\/$/u,rOe=/\*/gu,nOe=["br","gzip","deflate"];yh.mime.default_type="application/octet-stream";var zG={br:".br",gzip:".gz"};async function CO(t,e){(e.serve!==!1||e.root!==void 0)&&(e.root=sOe(e.root),iOe(t,e.root));let r=e.setHeaders;if(r!==void 0&&typeof r!="function")throw new TypeError("The `setHeaders` option must be a function");let n=Fa.validateOptions(e);if(n)throw n;e.dotfiles??="allow";let s={root:e.root,acceptRanges:e.acceptRanges,contentType:e.contentType,cacheControl:e.cacheControl,dotfiles:e.dotfiles,etag:e.etag,extensions:e.extensions,immutable:e.immutable,index:e.index,lastModified:e.lastModified,maxAge:e.maxAge},i=e.prefix??="/";e.prefixAvoidTrailingSlash||(i=i[i.length-1]==="/"?i:i+"/");let o={constraints:e.constraints,schema:{hide:e.schemaHide??!0},logLevel:e.logLevel,errorHandler(d,p,f){if(d?.code==="ERR_STREAM_PREMATURE_CLOSE"){f.request.raw.destroy();return}t.errorHandler(d,p,f)}};if(e.decorateReply!==!1&&(t.decorateReply("sendFile",function(d,p,f){let h=typeof p=="object"?p:f,m=typeof p=="string"?p:h?.root;return l(this.request,this,d,m||s.root,0,h),this}),t.decorateReply("download",function(d,p,f={}){let{root:h,...m}=typeof p=="object"?p:f;return p=typeof p=="string"?p:d,this.header("content-disposition",tOe(p)),l(this.request,this,d,h,0,m),this})),e.serve!==!1){if(e.wildcard&&typeof e.wildcard!="boolean")throw new TypeError('"wildcard" option must be a boolean');if(e.wildcard===void 0||e.wildcard===!0)t.route({...o,method:["HEAD","GET"],path:i+"*",handler(d,p){l(d,p,"/"+d.params["*"],s.root)}}),e.redirect===!0&&i!==e.prefix&&t.get(e.prefix,o,(d,p)=>{p.redirect(HG(d.raw.url),301)});else{let d=new Set(e.index===void 0?["index.html"]:[].concat(e.index)),p=new Map,f=new Set,h=Array.isArray(s.root)?s.root:[s.root];for(let m of h){m=m.split(bi.win32.sep).join(bi.posix.sep),!m.endsWith("/")&&(m+="/");let y=await Q1e("**/**",{cwd:m,absolute:!1,follow:!0,nodir:!0,dot:e.serveDotFiles,ignore:e.globIgnore});for(let g of y){g=g.split(bi.win32.sep).join(bi.posix.sep);let w=i+g;if(f.has(w))continue;f.add(w),c(o,w,`/${g}`,m);let _=bi.posix.basename(w);d.has(_)&&!p.has(_)&&p.set(bi.posix.dirname(w),m)}}for(let[m,y]of p.entries()){let g=m+(m.endsWith("/")?"":"/"),w="/"+g.replace(i,"");c(o,g,w,y),e.redirect===!0&&c(o,g.replace(BG,""),w.replace(BG,""),y)}}}let a=e.allowedPath;async function l(d,p,f,h,m=0,y,g){let w=f,_=Object.assign({},s,y);if(h)Array.isArray(h)?_.root=h[m]:_.root=h;else if(bi.isAbsolute(f)===!1)return p.callNotFound();if(a&&!a(f,_.root,d))return p.callNotFound();let v,S=f;if(e.preCompressed&&(g??=new Set,v=aOe(d.headers,g),v))if(f.endsWith("/")){if(f=NO(f,_.root,_.index),!f)return p.callNotFound();S=S+f+zG[v]}else S=f+zG[v];let{statusCode:$,headers:T,stream:O,type:R,metadata:P}=await yh(d.raw,encodeURI(S),_);switch(R){case"directory":{let A=P.path;if(e.list&&await Fa.send({reply:p,dir:A,options:e.list,route:f,prefix:i,dotfiles:e.dotfiles}).catch(N=>p.send(N)),e.redirect===!0)try{p.redirect(HG(d.raw.url),301)}catch(N){await p.send(N)}else{if(!f.endsWith("/")&&NO(f,_.root,_.index))return l(d,p,f+"/",h,void 0,void 0,g);p.callNotFound()}break}case"error":{if($===403&&(!_.index||!_.index.length)&&S[S.length-1]==="/"&&e.list){await Fa.send({reply:p,dir:Fa.path(e.root,f),options:e.list,route:f,prefix:i,dotfiles:e.dotfiles}).catch(A=>p.send(A));return}if(P.error.code==="ENOENT"){if(e.preCompressed&&v&&e.redirect!==!0&&NO(f,_.root,_.index))return l(d,p,f+"/",h,void 0,void 0,g);if(e.list&&Fa.handle(f,e.list)){await Fa.send({reply:p,dir:Fa.path(e.root,f),options:e.list,route:f,prefix:i,dotfiles:e.dotfiles}).catch(A=>p.send(A));return}return Array.isArray(h)&&m<h.length-1?l(d,p,f,h,m+1):e.preCompressed&&!g.has(v)?(g.add(v),l(d,p,w,h,m,void 0,g)):p.callNotFound()}if(P.error.status===404)return p.callNotFound();await p.send(P.error);break}case"file":{let A=p.statusCode!==200?p.statusCode:$;p.code(A),r?.(p.raw,P.path,P.stat),p.headers(T),v&&(p.header("content-type",oOe(f)),p.header("content-encoding",v)),await p.send(O);break}}}function c(d,p,f,h){let m=Object.assign({},d,{method:["HEAD","GET"],url:p,handler:u});m.config??={},m.config.file=f,m.config.rootPath=h,t.route(m)}async function u(d,p){let f=d.routeOptions?.config;return l(d,p,f.file,f.rootPath)}}function sOe(t){if(t===void 0)return t;if(t instanceof URL&&t.protocol==="file:")return UG(t);if(Array.isArray(t)){let e=[];for(let r=0,n=t.length;r<n;++r)t[r]instanceof URL&&t[r].protocol==="file:"?e.push(UG(t[r])):e.push(t[r]);return e}return t}function iOe(t,e){if(e===void 0)throw new Error('"root" option is required');if(Array.isArray(e)){if(!e.length)throw new Error('"root" option array requires one or more paths');if(new Set(e).size!==e.length)throw new Error('"root" option array contains one or more duplicate paths');e.map(r=>VG(t,r));return}if(typeof e=="string")return VG(t,e);throw new Error('"root" option must be a string or array of strings')}function VG(t,e){if(typeof e!="string")throw new TypeError('"root" option must be a string');if(bi.isAbsolute(e)===!1)throw new Error('"root" option must be an absolute path');let r;try{r=GG(e)}catch(n){if(n.code==="ENOENT"){t.log.warn(`"root" path "${e}" must exist`);return}throw n}if(r.isDirectory()===!1)throw new Error('"root" option must point to a directory')}function oOe(t){let e=yh.mime.getType(t)||yh.mime.default_type;return yh.isUtf8MimeType(e)?`${e}; charset=utf-8`:e}function NO(t,e,r=["index.html"]){return Array.isArray(r)?r.find(n=>{let s=bi.join(e,t,n);try{return!GG(s).isDirectory()}catch{return!1}}):!1}function aOe(t,e){if(!("accept-encoding"in t))return;let r=t["accept-encoding"].toLowerCase().replace(rOe,"gzip");return eOe.negotiate(r,nOe.filter(n=>!e.has(n)))}function HG(t){let e=0;for(let r=t.length;e<r&&!(t[e]!=="/"&&t[e]!=="\\");++e);t="/"+t.slice(e);try{let r=new URL(t,"http://localhost.com/"),n=r.pathname;return n+(n[n.length-1]!=="/"?"/":"")+(r.search||"")}catch{let r=new Error(`Invalid redirect URL: ${t}`);throw r.statusCode=400,r}}C0.exports=Z1e(CO,{fastify:"5.x",name:"@fastify/static"});C0.exports.default=CO;C0.exports.fastifyStatic=CO});var t6=E((Cqe,Ua)=>{var lOe=function(t){return t[0]==="U"&&(t=t.slice(1)),{Float32:4,Float64:8,Int8:1,Int16:2,Int32:4,Int64:8}[t]},M0=function(t,e){return e[e.length-1]==="8"?"":t==="big"?"BE":"LE"},j0=function(t,e){typeof e<"u"&&e!==null||(e=t),Ua.exports["pack"+t]=function(r,n){return b=new Buffer(lOe(t)),b["write"+e+M0(n,t)](r,0,!0),b},Ua.exports["unpack"+t]=function(r,n){return r["read"+e+M0(n,t)](0)}},AO=function(t){j0("Int"+t),j0("UInt"+t)};AO(8);AO(16);AO(32);twoToThe32=Math.pow(2,32);var ZG=function(t){return function(e,r){var n=M0(r,""),s=t?"U":"",i,o;return n==="LE"?(i=e.readUInt32LE(0),o=e["read"+s+"Int32LE"](4)):(i=e.readUInt32BE(4),o=e["read"+s+"Int32BE"](0)),o*twoToThe32+i}},e6=function(t){return function(e,r){var n=M0(r,""),s=t?"U":"",i=new Buffer(8),o=Math.floor(e/twoToThe32),a=Math.floor(e-o*twoToThe32);return n=="LE"?(i.writeUInt32LE(a,0,!0),i["write"+s+"Int32LE"](o,4,!0)):(i.writeUInt32BE(a,4,!0),i["write"+s+"Int32BE"](o,0,!0)),i}};Ua.exports.unpackInt64=ZG(!1);Ua.exports.unpackUInt64=ZG(!0);Ua.exports.packInt64=e6(!1);Ua.exports.packUInt64=e6(!0);j0("Float32","Float");j0("Float64","Double")});var r6=E(M=>{(function(){var t,e,r,n,s,i,o,a,l,c,u,d,p={}.hasOwnProperty;s=t6(),M.concat=function(f){var h,m,y,g,w,_,v,S,$,T;if(!t(f))throw new Error("concat must take an array of buffers");for(g=0,v=f.length;g<v;g++)if(h=f[g],!Buffer.isBuffer(h))throw new Error("concat must take an array of buffers");for(T=0,w=0,S=f.length;w<S;w++)h=f[w],T+=h.length;for(y=new Buffer(T),m=0,_=0,$=f.length;_<$;_++)h=f[_],h.copy(y,m),m+=h.length;return y},M.toOscString=function(f,h){var m,y,g,w;if(typeof f!="string")throw new Error("can't pack a non-string into an osc-string");if(g=f.indexOf("\0"),g!==-1&&h)throw e("Can't pack an osc-string that contains NULL characters");for(g!==-1&&(f=f.slice(0,g)),m=y=0,w=u(f);0<=w?y<w:y>w;m=0<=w?++y:--y)f+="\0";return new Buffer(f)},M.splitOscString=function(f,h){var m,y,g,w,_,v,S,$,T;if(!Buffer.isBuffer(f))throw e("Can't split something that isn't a buffer");if(w=f.toString("utf8"),g=w.indexOf("\0"),g===-1){if(h)throw new Error("All osc-strings must contain a null character");return{string:w,rest:new Buffer(0)}}if(T=w.slice(0,g),$=Buffer.byteLength(T)+u(T),h&&$>f.length)throw e("Not enough padding for osc-string");if(h){for(m=y=_=Buffer.byteLength(T),v=$;_<=v?y<v:y>v;m=_<=v?++y:--y)if(f[m]!==0)throw e("Not enough or incorrect padding for osc-string")}return S=f.slice($,f.length),{string:T,rest:S}},M.splitInteger=function(f,h){var m,y,g,w;if(h==null&&(h="Int32"),m=s["pack"+h](0).length,f.length<m)throw new Error("buffer is not big enough for integer type");return y=0,w=s["unpack"+h](f.slice(0,m),"big"),g=f.slice(m,f.length),{integer:w,rest:g}},M.splitTimetag=function(f){var h,m,y,g,w,_,v,S,$;if($="UInt32",y=s["pack"+$](0).length,f.length<y*2)throw new Error("buffer is not big enough to contain a timetag");return h=0,m=y,S=s["unpack"+$](f.slice(h,m),"big"),g=y,w=y+y,_=s["unpack"+$](f.slice(g,w),"big"),v=f.slice(w,f.length),{timetag:[S,_],rest:v}},n=2208988800,r=4294967296,M.dateToTimetag=function(f){return M.timestampToTimetag(f.getTime()/1e3)},M.timestampToTimetag=function(f){var h,m;return m=Math.floor(f),h=f-m,a(m,h)},M.timetagToTimestamp=function(f){var h;return h=f[0]+M.ntpToFractionalSeconds(f[1]),h-n},a=function(f,h){var m,y;return y=f+n,m=Math.round(r*h),[y,m]},M.timetagToDate=function(f){var h,m,y,g,w;return w=f[0],g=f[1],w=w-n,y=M.ntpToFractionalSeconds(g),h=new Date,h.setTime(w*1e3+y*1e3),m=new Date,m.setUTCFullYear(h.getUTCFullYear()),m.setUTCMonth(h.getUTCMonth()),m.setUTCDate(h.getUTCDate()),m.setUTCHours(h.getUTCHours()),m.setUTCMinutes(h.getUTCMinutes()),m.setUTCSeconds(h.getUTCSeconds()),m.setUTCMilliseconds(y*1e3),m},M.deltaTimetag=function(f,h){var m;return m=(h??new Date)/1e3,M.timestampToTimetag(m+f)},M.ntpToFractionalSeconds=function(f){return parseFloat(f)/r},M.toTimetagBuffer=function(f){var h,m,y;if(typeof f=="number")f=M.timestampToTimetag(f);else if(typeof f=="object"&&"getTime"in f)f=M.dateToTimetag(f);else if(f.length!==2)throw new Error("Invalid timetag"+f);return y="UInt32",h=s["pack"+y](f[0],"big"),m=s["pack"+y](f[1],"big"),M.concat([h,m])},M.toIntegerBuffer=function(f,h){if(h==null&&(h="Int32"),typeof f!="number")throw new Error("cannot pack a non-number into an integer buffer");return s["pack"+h](f,"big")},c={s:{representation:"string",split:function(f,h){var m;return m=M.splitOscString(f,h),{value:m.string,rest:m.rest}},toArg:function(f,h){if(typeof f!="string")throw new Error("expected string");return M.toOscString(f,h)}},i:{representation:"integer",split:function(f,h){var m;return m=M.splitInteger(f),{value:m.integer,rest:m.rest}},toArg:function(f,h){if(typeof f!="number")throw new Error("expected number");return M.toIntegerBuffer(f)}},t:{representation:"timetag",split:function(f,h){var m;return m=M.splitTimetag(f),{value:m.timetag,rest:m.rest}},toArg:function(f,h){return M.toTimetagBuffer(f)}},f:{representation:"float",split:function(f,h){return{value:s.unpackFloat32(f.slice(0,4),"big"),rest:f.slice(4,f.length)}},toArg:function(f,h){if(typeof f!="number")throw new Error("expected number");return s.packFloat32(f,"big")}},d:{representation:"double",split:function(f,h){return{value:s.unpackFloat64(f.slice(0,8),"big"),rest:f.slice(8,f.length)}},toArg:function(f,h){if(typeof f!="number")throw new Error("expected number");return s.packFloat64(f,"big")}},b:{representation:"blob",split:function(f,h){var m,y;return y=M.splitInteger(f),m=y.integer,f=y.rest,{value:f.slice(0,m),rest:f.slice(m,f.length)}},toArg:function(f,h){var m;if(!Buffer.isBuffer(f))throw new Error("expected node.js Buffer");return m=M.toIntegerBuffer(f.length),M.concat([m,f])}},T:{representation:"true",split:function(f,h){return{rest:f,value:!0}},toArg:function(f,h){if(!f&&h)throw new Error("true must be true");return new Buffer(0)}},F:{representation:"false",split:function(f,h){return{rest:f,value:!1}},toArg:function(f,h){if(f&&h)throw new Error("false must be false");return new Buffer(0)}},N:{representation:"null",split:function(f,h){return{rest:f,value:null}},toArg:function(f,h){if(f&&h)throw new Error("null must be false");return new Buffer(0)}},I:{representation:"bang",split:function(f,h){return{rest:f,value:"bang"}},toArg:function(f,h){return new Buffer(0)}}},M.oscTypeCodeToTypeString=function(f){var h;return(h=c[f])!=null?h.representation:void 0},M.typeStringToOscTypeCode=function(f){var h,m;for(h in c)if(p.call(c,h)&&(m=c[h].representation,m===f))return h;return null},M.argToTypeCode=function(f,h){var m,y;if(f?.type!=null&&typeof f.type=="string"&&(m=M.typeStringToOscTypeCode(f.type))!=null)return m;if(y=f?.value!=null?f.value:f,h&&y==null)throw new Error("Argument has no value");if(typeof y=="string")return"s";if(typeof y=="number")return"f";if(Buffer.isBuffer(y))return"b";if(typeof y=="boolean")return y?"T":"F";if(y===null)return"N";throw new Error("I don't know what type this is supposed to be.")},M.splitOscArgument=function(f,h,m){var y;if(y=M.typeStringToOscTypeCode(h),y!=null)return c[y].split(f,m);throw new Error("I don't understand how I'm supposed to unpack "+h)},M.toOscArgument=function(f,h,m){var y;if(y=M.typeStringToOscTypeCode(h),y!=null)return c[y].toArg(f,m);throw new Error("I don't know how to pack "+h)},M.fromOscMessage=function(f,h){var m,y,g,w,_,v,S,$,T,O,R,P;if($=M.splitOscString(f,h),m=$.string,f=$.rest,h&&m[0]!=="/")throw e("addresses must start with /");if(!f.length)return{address:m,args:[]};if(T=M.splitOscString(f,h),P=T.string,f=T.rest,P[0]!==","){if(h)throw e("Argument lists must begin with ,");return{address:m,args:[]}}for(P=P.slice(1,+P.length+1||9e9),g=[],w=[g],v=0,S=P.length;v<S;v++){if(O=P[v],O==="["){w.push([]);continue}if(O==="]"){if(w.length<=1){if(h)throw new e("Mismatched ']' character.")}else _=w.pop(),w[w.length-1].push({type:"array",value:_});continue}if(R=M.oscTypeCodeToTypeString(O),R==null)throw new Error("I don't understand the argument code "+O);y=M.splitOscArgument(f,R,h),y!=null&&(f=y.rest),w[w.length-1].push({type:R,value:y?.value})}if(w.length!==1&&h)throw new e("Mismatched '[' character");return{address:m,args:g,oscType:"message"}},M.fromOscBundle=function(f,h){var m,y,g,w,_;if(g=M.splitOscString(f,h),m=g.string,f=g.rest,m!=="#bundle")throw new Error("osc-bundles must begin with #bundle");return w=M.splitTimetag(f),_=w.timetag,f=w.rest,y=l(f,function(v){return M.fromOscPacket(v,h)}),{timetag:_,elements:y,oscType:"bundle"}},M.fromOscPacket=function(f,h){return o(f,h)?M.fromOscBundle(f,h):M.fromOscMessage(f,h)},i=function(f){return t(f)?f:f?.type==="array"&&t(f?.value)||f!=null&&f.type==null&&t(f.value)?f.value:null},d=function(f,h){var m,y,g,w,_,v,S,$,T,O,R;for(v="",_=[],g=0,w=f.length;g<w;g++){if(m=f[g],i(m)!=null){S=d(i(m),h),T=S[0],$=S[1],v+="["+T+"]",_=_.concat($);continue}O=M.argToTypeCode(m,h),O!=null&&(R=m?.value,R===void 0&&(R=m),y=M.toOscArgument(R,M.oscTypeCodeToTypeString(O),h),y!=null&&(_.push(y),v+=O))}return[v,_]},M.toOscMessage=function(f,h){var m,y,g,w,_,v,S,$;if(m=f?.address!=null?f.address:f,typeof m!="string")throw new Error("message must contain an address");return g=f?.args,g===void 0&&(g=[]),t(g)||(w=g,g=[],g[0]=w),_=M.toOscString(m,h),$=d(g,h),S=$[0],v=$[1],S=","+S,y=M.concat(v),S=M.toOscString(S),M.concat([_,S,y])},M.toOscBundle=function(f,h){var m,y,g,w,_,v,S,$,T,O,R,P,A,N,C;if(h&&f?.timetag==null)throw e("bundles must have timetags.");for(C=(P=f?.timetag)!=null?P:new Date,_=(A=f?.elements)!=null?A:[],t(_)||(v=_,_=[],_.push(v)),T=M.toOscString("#bundle"),R=M.toTimetagBuffer(C),O=[],S=0,$=_.length;S<$;S++){w=_[S];try{y=M.toOscPacket(w,h),N=M.toIntegerBuffer(y.length),O.push(M.concat([N,y]))}catch(z){g=z}}return m=M.concat(O),M.concat([T,R,m])},M.toOscPacket=function(f,h){return f?.oscType!=null?f.oscType==="bundle"?M.toOscBundle(f,h):M.toOscMessage(f,h):f?.timetag!=null||f?.elements!=null?M.toOscBundle(f,h):M.toOscMessage(f,h)},M.applyMessageTranformerToBundle=function(f){return function(h){var m,y,g,w,_,v,S,$,T,O,R,P,A,N;if(R=M.splitOscString(h),P=R.string,h=R.rest,P!=="#bundle")throw new Error("osc-bundles must begin with #bundle");for(m=M.toOscString(P),A=h.slice(0,8),h=h.slice(8,h.length),w=l(h,function(C){return M.applyTransform(C,f,M.applyMessageTranformerToBundle(f))}),N=m.length+A.length,_=0,S=w.length;_<S;_++)g=w[_],N+=4+g.length;for(O=new Buffer(N),m.copy(O,0),A.copy(O,m.length),y=m.length+A.length,v=0,$=w.length;v<$;v++)g=w[v],T=M.toIntegerBuffer(g.length),T.copy(O,y),y+=4,g.copy(O,y),y+=g.length;return O}},M.applyTransform=function(f,h,m){return m==null&&(m=M.applyMessageTranformerToBundle(h)),o(f)?m(f):h(f)},M.addressTransform=function(f){return function(h){var m,y,g;return m=M.splitOscString(h),g=m.string,y=m.rest,g=f(g),M.concat([M.toOscString(g),y])}},M.messageTransform=function(f){return function(h){var m;return m=M.fromOscMessage(h),M.toOscMessage(f(m))}},t=Array.isArray,e=function(f){return new Error("Strict Error: "+f)},u=function(f){var h;return h=Buffer.byteLength(f),4-h%4},o=function(f,h){var m;return m=M.splitOscString(f,h).string,m==="#bundle"},l=function(f,h){var m,y,g,w,_,v,S,$;for(g=function(){var T,O;for(O=[];f.length;){if(T=M.splitInteger(f),S=T.integer,f=T.rest,S>f.length)throw new Error("Invalid bundle list: size of element is bigger than buffer");$=f.slice(0,S),f=f.slice(S,f.length);try{O.push(h($))}catch(R){m=R,O.push(null)}}return O}(),v=[],w=0,_=g.length;w<_;w++)y=g[w],y!=null&&v.push(y);return v}}).call(M)});var kO=E(Bs=>{(function(){var t,e;t=r6(),Bs.fromBuffer=function(r,n){return r instanceof ArrayBuffer?r=new Buffer(new Uint8Array(r)):r instanceof Uint8Array&&(r=new Buffer(r)),t.fromOscPacket(r,n)},Bs.toBuffer=function(r,n,s){return typeof r=="string"?t.toOscPacket({address:r,args:n},s):t.toOscPacket(r,n)},Bs.applyAddressTransform=function(r,n){return t.applyTransform(r,t.addressTransform(n))},Bs.applyMessageTransform=function(r,n){return t.applyTransform(r,t.messageTransform(n))},Bs.timetagToDate=t.timetagToDate,Bs.dateToTimetag=t.dateToTimetag,Bs.timetagToTimestamp=t.timetagToTimestamp,Bs.timestampToTimetag=t.timestampToTimetag}).call(Bs)});var h6=E((eLe,d6)=>{var zc=1e3,Vc=zc*60,Hc=Vc*60,Ba=Hc*24,uOe=Ba*7,fOe=Ba*365.25;d6.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return dOe(t);if(r==="number"&&isFinite(t))return e.long?pOe(t):hOe(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function dOe(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*fOe;case"weeks":case"week":case"w":return r*uOe;case"days":case"day":case"d":return r*Ba;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Hc;case"minutes":case"minute":case"mins":case"min":case"m":return r*Vc;case"seconds":case"second":case"secs":case"sec":case"s":return r*zc;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function hOe(t){var e=Math.abs(t);return e>=Ba?Math.round(t/Ba)+"d":e>=Hc?Math.round(t/Hc)+"h":e>=Vc?Math.round(t/Vc)+"m":e>=zc?Math.round(t/zc)+"s":t+"ms"}function pOe(t){var e=Math.abs(t);return e>=Ba?V0(t,e,Ba,"day"):e>=Hc?V0(t,e,Hc,"hour"):e>=Vc?V0(t,e,Vc,"minute"):e>=zc?V0(t,e,zc,"second"):t+" ms"}function V0(t,e,r,n){var s=e>=r*1.5;return Math.round(t/r)+" "+n+(s?"s":"")}});var zO=E((tLe,p6)=>{function mOe(t){r.debug=r,r.default=r,r.coerce=l,r.disable=o,r.enable=s,r.enabled=a,r.humanize=h6(),r.destroy=c,Object.keys(t).forEach(u=>{r[u]=t[u]}),r.names=[],r.skips=[],r.formatters={};function e(u){let d=0;for(let p=0;p<u.length;p++)d=(d<<5)-d+u.charCodeAt(p),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=e;function r(u){let d,p=null,f,h;function m(...y){if(!m.enabled)return;let g=m,w=Number(new Date),_=w-(d||w);g.diff=_,g.prev=d,g.curr=w,d=w,y[0]=r.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");let v=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,($,T)=>{if($==="%%")return"%";v++;let O=r.formatters[T];if(typeof O=="function"){let R=y[v];$=O.call(g,R),y.splice(v,1),v--}return $}),r.formatArgs.call(g,y),(g.log||r.log).apply(g,y)}return m.namespace=u,m.useColors=r.useColors(),m.color=r.selectColor(u),m.extend=n,m.destroy=r.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(f!==r.namespaces&&(f=r.namespaces,h=r.enabled(u)),h),set:y=>{p=y}}),typeof r.init=="function"&&r.init(m),m}function n(u,d){let p=r(this.namespace+(typeof d>"u"?":":d)+u);return p.log=this.log,p}function s(u){r.save(u),r.namespaces=u,r.names=[],r.skips=[];let d=(typeof u=="string"?u:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let p of d)p[0]==="-"?r.skips.push(p.slice(1)):r.names.push(p)}function i(u,d){let p=0,f=0,h=-1,m=0;for(;p<u.length;)if(f<d.length&&(d[f]===u[p]||d[f]==="*"))d[f]==="*"?(h=f,m=p,f++):(p++,f++);else if(h!==-1)f=h+1,m++,p=m;else return!1;for(;f<d.length&&d[f]==="*";)f++;return f===d.length}function o(){let u=[...r.names,...r.skips.map(d=>"-"+d)].join(",");return r.enable(""),u}function a(u){for(let d of r.skips)if(i(u,d))return!1;for(let d of r.names)if(i(u,d))return!0;return!1}function l(u){return u instanceof Error?u.stack||u.message:u}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}p6.exports=mOe});var m6=E((Qr,H0)=>{Qr.formatArgs=yOe;Qr.save=_Oe;Qr.load=vOe;Qr.useColors=gOe;Qr.storage=wOe();Qr.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Qr.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function gOe(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function yOe(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+H0.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,s=>{s!=="%%"&&(r++,s==="%c"&&(n=r))}),t.splice(n,0,e)}Qr.log=console.debug||console.log||(()=>{});function _Oe(t){try{t?Qr.storage.setItem("debug",t):Qr.storage.removeItem("debug")}catch{}}function vOe(){let t;try{t=Qr.storage.getItem("debug")||Qr.storage.getItem("DEBUG")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function wOe(){try{return localStorage}catch{}}H0.exports=zO()(Qr);var{formatters:bOe}=H0.exports;bOe.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var y6=E((rLe,g6)=>{"use strict";g6.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),s=e.indexOf("--");return n!==-1&&(s===-1||n<s)}});var w6=E((nLe,v6)=>{"use strict";var EOe=require("os"),_6=require("tty"),In=y6(),{env:Lt}=process,Eo;In("no-color")||In("no-colors")||In("color=false")||In("color=never")?Eo=0:(In("color")||In("colors")||In("color=true")||In("color=always"))&&(Eo=1);"FORCE_COLOR"in Lt&&(Lt.FORCE_COLOR==="true"?Eo=1:Lt.FORCE_COLOR==="false"?Eo=0:Eo=Lt.FORCE_COLOR.length===0?1:Math.min(parseInt(Lt.FORCE_COLOR,10),3));function VO(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function HO(t,e){if(Eo===0)return 0;if(In("color=16m")||In("color=full")||In("color=truecolor"))return 3;if(In("color=256"))return 2;if(t&&!e&&Eo===void 0)return 0;let r=Eo||0;if(Lt.TERM==="dumb")return r;if(process.platform==="win32"){let n=EOe.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in Lt)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in Lt)||Lt.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in Lt)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Lt.TEAMCITY_VERSION)?1:0;if(Lt.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in Lt){let n=parseInt((Lt.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Lt.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Lt.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Lt.TERM)||"COLORTERM"in Lt?1:r}function SOe(t){let e=HO(t,t&&t.isTTY);return VO(e)}v6.exports={supportsColor:SOe,stdout:VO(HO(!0,_6.isatty(1))),stderr:VO(HO(!0,_6.isatty(2)))}});var E6=E((Ft,W0)=>{var TOe=require("tty"),G0=require("util");Ft.init=COe;Ft.log=POe;Ft.formatArgs=$Oe;Ft.save=xOe;Ft.load=NOe;Ft.useColors=ROe;Ft.destroy=G0.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Ft.colors=[6,2,3,4,5,1];try{let t=w6();t&&(t.stderr||t).level>=2&&(Ft.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Ft.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(s,i)=>i.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function ROe(){return"colors"in Ft.inspectOpts?Boolean(Ft.inspectOpts.colors):TOe.isatty(process.stderr.fd)}function $Oe(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,s="\x1B[3"+(n<8?n:"8;5;"+n),i=`  ${s};1m${e} \x1B[0m`;t[0]=i+t[0].split(`
`).join(`
`+i),t.push(s+"m+"+W0.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=OOe()+e+" "+t[0]}function OOe(){return Ft.inspectOpts.hideDate?"":new Date().toISOString()+" "}function POe(...t){return process.stderr.write(G0.formatWithOptions(Ft.inspectOpts,...t)+`
`)}function xOe(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function NOe(){return process.env.DEBUG}function COe(t){t.inspectOpts={};let e=Object.keys(Ft.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=Ft.inspectOpts[e[r]]}W0.exports=zO()(Ft);var{formatters:b6}=W0.exports;b6.o=function(t){return this.inspectOpts.colors=this.useColors,G0.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};b6.O=function(t){return this.inspectOpts.colors=this.useColors,G0.inspect(t,this.inspectOpts)}});var S6=E((sLe,GO)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?GO.exports=m6():GO.exports=E6()});var R6=E((iLe,WO)=>{"use strict";var IOe=Object.prototype.hasOwnProperty,Ir="~";function bh(){}Object.create&&(bh.prototype=Object.create(null),new bh().__proto__||(Ir=!1));function AOe(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function T6(t,e,r,n,s){if(typeof r!="function")throw new TypeError("The listener must be a function");var i=new AOe(r,n||t,s),o=Ir?Ir+e:e;return t._events[o]?t._events[o].fn?t._events[o]=[t._events[o],i]:t._events[o].push(i):(t._events[o]=i,t._eventsCount++),t}function K0(t,e){--t._eventsCount===0?t._events=new bh:delete t._events[e]}function gr(){this._events=new bh,this._eventsCount=0}gr.prototype.eventNames=function(){var e=[],r,n;if(this._eventsCount===0)return e;for(n in r=this._events)IOe.call(r,n)&&e.push(Ir?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(r)):e};gr.prototype.listeners=function(e){var r=Ir?Ir+e:e,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var s=0,i=n.length,o=new Array(i);s<i;s++)o[s]=n[s].fn;return o};gr.prototype.listenerCount=function(e){var r=Ir?Ir+e:e,n=this._events[r];return n?n.fn?1:n.length:0};gr.prototype.emit=function(e,r,n,s,i,o){var a=Ir?Ir+e:e;if(!this._events[a])return!1;var l=this._events[a],c=arguments.length,u,d;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),c){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,r),!0;case 3:return l.fn.call(l.context,r,n),!0;case 4:return l.fn.call(l.context,r,n,s),!0;case 5:return l.fn.call(l.context,r,n,s,i),!0;case 6:return l.fn.call(l.context,r,n,s,i,o),!0}for(d=1,u=new Array(c-1);d<c;d++)u[d-1]=arguments[d];l.fn.apply(l.context,u)}else{var p=l.length,f;for(d=0;d<p;d++)switch(l[d].once&&this.removeListener(e,l[d].fn,void 0,!0),c){case 1:l[d].fn.call(l[d].context);break;case 2:l[d].fn.call(l[d].context,r);break;case 3:l[d].fn.call(l[d].context,r,n);break;case 4:l[d].fn.call(l[d].context,r,n,s);break;default:if(!u)for(f=1,u=new Array(c-1);f<c;f++)u[f-1]=arguments[f];l[d].fn.apply(l[d].context,u)}}return!0};gr.prototype.on=function(e,r,n){return T6(this,e,r,n,!1)};gr.prototype.once=function(e,r,n){return T6(this,e,r,n,!0)};gr.prototype.removeListener=function(e,r,n,s){var i=Ir?Ir+e:e;if(!this._events[i])return this;if(!r)return K0(this,i),this;var o=this._events[i];if(o.fn)o.fn===r&&(!s||o.once)&&(!n||o.context===n)&&K0(this,i);else{for(var a=0,l=[],c=o.length;a<c;a++)(o[a].fn!==r||s&&!o[a].once||n&&o[a].context!==n)&&l.push(o[a]);l.length?this._events[i]=l.length===1?l[0]:l:K0(this,i)}return this};gr.prototype.removeAllListeners=function(e){var r;return e?(r=Ir?Ir+e:e,this._events[r]&&K0(this,r)):(this._events=new bh,this._eventsCount=0),this};gr.prototype.off=gr.prototype.removeListener;gr.prototype.addListener=gr.prototype.on;gr.prefixed=Ir;gr.EventEmitter=gr;typeof WO<"u"&&(WO.exports=gr)});var Ei=E((aLe,P6)=>{"use strict";var $6=["nodebuffer","arraybuffer","fragments"],O6=typeof Blob<"u";O6&&$6.push("blob");P6.exports={BINARY_TYPES:$6,EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",hasBlob:O6,kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}});var Eh=E((lLe,Y0)=>{"use strict";var{EMPTY_BUFFER:kOe}=Ei(),KO=Buffer[Symbol.species];function DOe(t,e){if(t.length===0)return kOe;if(t.length===1)return t[0];let r=Buffer.allocUnsafe(e),n=0;for(let s=0;s<t.length;s++){let i=t[s];r.set(i,n),n+=i.length}return n<e?new KO(r.buffer,r.byteOffset,n):r}function x6(t,e,r,n,s){for(let i=0;i<s;i++)r[n+i]=t[i]^e[i&3]}function N6(t,e){for(let r=0;r<t.length;r++)t[r]^=e[r&3]}function MOe(t){return t.length===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.length)}function JO(t){if(JO.readOnly=!0,Buffer.isBuffer(t))return t;let e;return t instanceof ArrayBuffer?e=new KO(t):ArrayBuffer.isView(t)?e=new KO(t.buffer,t.byteOffset,t.byteLength):(e=Buffer.from(t),JO.readOnly=!1),e}Y0.exports={concat:DOe,mask:x6,toArrayBuffer:MOe,toBuffer:JO,unmask:N6};if(!process.env.WS_NO_BUFFER_UTIL)try{let t=require("bufferutil");Y0.exports.mask=function(e,r,n,s,i){i<48?x6(e,r,n,s,i):t.mask(e,r,n,s,i)},Y0.exports.unmask=function(e,r){e.length<32?N6(e,r):t.unmask(e,r)}}catch{}});var A6=E((cLe,I6)=>{"use strict";var C6=Symbol("kDone"),YO=Symbol("kRun"),XO=class{constructor(e){this[C6]=()=>{this.pending--,this[YO]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[YO]()}[YO](){if(this.pending!==this.concurrency&&this.jobs.length){let e=this.jobs.shift();this.pending++,e(this[C6])}}};I6.exports=XO});var Th=E((uLe,j6)=>{"use strict";var Sh=require("zlib"),k6=Eh(),jOe=A6(),{kStatusCode:D6}=Ei(),qOe=Buffer[Symbol.species],LOe=Buffer.from([0,0,255,255]),Q0=Symbol("permessage-deflate"),Si=Symbol("total-length"),Gc=Symbol("callback"),So=Symbol("buffers"),Wc=Symbol("error"),X0,QO=class{constructor(e,r,n){if(this._maxPayload=n|0,this._options=e||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!r,this._deflate=null,this._inflate=null,this.params=null,!X0){let s=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;X0=new jOe(s)}}static get extensionName(){return"permessage-deflate"}offer(){let e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:this._options.clientMaxWindowBits==null&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let e=this._deflate[Gc];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){let r=this._options,n=e.find(s=>!(r.serverNoContextTakeover===!1&&s.server_no_context_takeover||s.server_max_window_bits&&(r.serverMaxWindowBits===!1||typeof r.serverMaxWindowBits=="number"&&r.serverMaxWindowBits>s.server_max_window_bits)||typeof r.clientMaxWindowBits=="number"&&!s.client_max_window_bits));if(!n)throw new Error("None of the extension offers can be accepted");return r.serverNoContextTakeover&&(n.server_no_context_takeover=!0),r.clientNoContextTakeover&&(n.client_no_context_takeover=!0),typeof r.serverMaxWindowBits=="number"&&(n.server_max_window_bits=r.serverMaxWindowBits),typeof r.clientMaxWindowBits=="number"?n.client_max_window_bits=r.clientMaxWindowBits:(n.client_max_window_bits===!0||r.clientMaxWindowBits===!1)&&delete n.client_max_window_bits,n}acceptAsClient(e){let r=e[0];if(this._options.clientNoContextTakeover===!1&&r.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!r.client_max_window_bits)typeof this._options.clientMaxWindowBits=="number"&&(r.client_max_window_bits=this._options.clientMaxWindowBits);else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits=="number"&&r.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return r}normalizeParams(e){return e.forEach(r=>{Object.keys(r).forEach(n=>{let s=r[n];if(s.length>1)throw new Error(`Parameter "${n}" must have only a single value`);if(s=s[0],n==="client_max_window_bits"){if(s!==!0){let i=+s;if(!Number.isInteger(i)||i<8||i>15)throw new TypeError(`Invalid value for parameter "${n}": ${s}`);s=i}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${n}": ${s}`)}else if(n==="server_max_window_bits"){let i=+s;if(!Number.isInteger(i)||i<8||i>15)throw new TypeError(`Invalid value for parameter "${n}": ${s}`);s=i}else if(n==="client_no_context_takeover"||n==="server_no_context_takeover"){if(s!==!0)throw new TypeError(`Invalid value for parameter "${n}": ${s}`)}else throw new Error(`Unknown parameter "${n}"`);r[n]=s})}),e}decompress(e,r,n){X0.add(s=>{this._decompress(e,r,(i,o)=>{s(),n(i,o)})})}compress(e,r,n){X0.add(s=>{this._compress(e,r,(i,o)=>{s(),n(i,o)})})}_decompress(e,r,n){let s=this._isServer?"client":"server";if(!this._inflate){let i=`${s}_max_window_bits`,o=typeof this.params[i]!="number"?Sh.Z_DEFAULT_WINDOWBITS:this.params[i];this._inflate=Sh.createInflateRaw({...this._options.zlibInflateOptions,windowBits:o}),this._inflate[Q0]=this,this._inflate[Si]=0,this._inflate[So]=[],this._inflate.on("error",UOe),this._inflate.on("data",M6)}this._inflate[Gc]=n,this._inflate.write(e),r&&this._inflate.write(LOe),this._inflate.flush(()=>{let i=this._inflate[Wc];if(i){this._inflate.close(),this._inflate=null,n(i);return}let o=k6.concat(this._inflate[So],this._inflate[Si]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[Si]=0,this._inflate[So]=[],r&&this.params[`${s}_no_context_takeover`]&&this._inflate.reset()),n(null,o)})}_compress(e,r,n){let s=this._isServer?"server":"client";if(!this._deflate){let i=`${s}_max_window_bits`,o=typeof this.params[i]!="number"?Sh.Z_DEFAULT_WINDOWBITS:this.params[i];this._deflate=Sh.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:o}),this._deflate[Si]=0,this._deflate[So]=[],this._deflate.on("data",FOe)}this._deflate[Gc]=n,this._deflate.write(e),this._deflate.flush(Sh.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let i=k6.concat(this._deflate[So],this._deflate[Si]);r&&(i=new qOe(i.buffer,i.byteOffset,i.length-4)),this._deflate[Gc]=null,this._deflate[Si]=0,this._deflate[So]=[],r&&this.params[`${s}_no_context_takeover`]&&this._deflate.reset(),n(null,i)})}};j6.exports=QO;function FOe(t){this[So].push(t),this[Si]+=t.length}function M6(t){if(this[Si]+=t.length,this[Q0]._maxPayload<1||this[Si]<=this[Q0]._maxPayload){this[So].push(t);return}this[Wc]=new RangeError("Max payload size exceeded"),this[Wc].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[Wc][D6]=1009,this.removeListener("data",M6),this.reset()}function UOe(t){if(this[Q0]._inflate=null,this[Wc]){this[Gc](this[Wc]);return}t[D6]=1007,this[Gc](t)}});var Kc=E((fLe,Z0)=>{"use strict";var{isUtf8:q6}=require("buffer"),{hasBlob:BOe}=Ei(),zOe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function VOe(t){return t>=1e3&&t<=1014&&t!==1004&&t!==1005&&t!==1006||t>=3e3&&t<=4999}function ZO(t){let e=t.length,r=0;for(;r<e;)if(!(t[r]&128))r++;else if((t[r]&224)===192){if(r+1===e||(t[r+1]&192)!==128||(t[r]&254)===192)return!1;r+=2}else if((t[r]&240)===224){if(r+2>=e||(t[r+1]&192)!==128||(t[r+2]&192)!==128||t[r]===224&&(t[r+1]&224)===128||t[r]===237&&(t[r+1]&224)===160)return!1;r+=3}else if((t[r]&248)===240){if(r+3>=e||(t[r+1]&192)!==128||(t[r+2]&192)!==128||(t[r+3]&192)!==128||t[r]===240&&(t[r+1]&240)===128||t[r]===244&&t[r+1]>143||t[r]>244)return!1;r+=4}else return!1;return!0}function HOe(t){return BOe&&typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&(t[Symbol.toStringTag]==="Blob"||t[Symbol.toStringTag]==="File")}Z0.exports={isBlob:HOe,isValidStatusCode:VOe,isValidUTF8:ZO,tokenChars:zOe};if(q6)Z0.exports.isValidUTF8=function(t){return t.length<24?ZO(t):q6(t)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let t=require("utf-8-validate");Z0.exports.isValidUTF8=function(e){return e.length<32?ZO(e):t(e)}}catch{}});var sP=E((dLe,H6)=>{"use strict";var{Writable:GOe}=require("stream"),L6=Th(),{BINARY_TYPES:WOe,EMPTY_BUFFER:F6,kStatusCode:KOe,kWebSocket:JOe}=Ei(),{concat:eP,toArrayBuffer:YOe,unmask:XOe}=Eh(),{isValidStatusCode:QOe,isValidUTF8:U6}=Kc(),e_=Buffer[Symbol.species],An=0,B6=1,z6=2,V6=3,tP=4,rP=5,t_=6,nP=class extends GOe{constructor(e={}){super(),this._allowSynchronousEvents=e.allowSynchronousEvents!==void 0?e.allowSynchronousEvents:!0,this._binaryType=e.binaryType||WOe[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=e.maxPayload|0,this._skipUTF8Validation=!!e.skipUTF8Validation,this[JOe]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=An}_write(e,r,n){if(this._opcode===8&&this._state==An)return n();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(n)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){let n=this._buffers[0];return this._buffers[0]=new e_(n.buffer,n.byteOffset+e,n.length-e),new e_(n.buffer,n.byteOffset,e)}let r=Buffer.allocUnsafe(e);do{let n=this._buffers[0],s=r.length-e;e>=n.length?r.set(this._buffers.shift(),s):(r.set(new Uint8Array(n.buffer,n.byteOffset,e),s),this._buffers[0]=new e_(n.buffer,n.byteOffset+e,n.length-e)),e-=n.length}while(e>0);return r}startLoop(e){this._loop=!0;do switch(this._state){case An:this.getInfo(e);break;case B6:this.getPayloadLength16(e);break;case z6:this.getPayloadLength64(e);break;case V6:this.getMask();break;case tP:this.getData(e);break;case rP:case t_:this._loop=!1;return}while(this._loop);this._errored||e()}getInfo(e){if(this._bufferedBytes<2){this._loop=!1;return}let r=this.consume(2);if(r[0]&48){let s=this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");e(s);return}let n=(r[0]&64)===64;if(n&&!this._extensions[L6.extensionName]){let s=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(s);return}if(this._fin=(r[0]&128)===128,this._opcode=r[0]&15,this._payloadLength=r[1]&127,this._opcode===0){if(n){let s=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(s);return}if(!this._fragmented){let s=this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");e(s);return}this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented){let s=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");e(s);return}this._compressed=n}else if(this._opcode>7&&this._opcode<11){if(!this._fin){let s=this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");e(s);return}if(n){let s=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(s);return}if(this._payloadLength>125||this._opcode===8&&this._payloadLength===1){let s=this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");e(s);return}}else{let s=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");e(s);return}if(!this._fin&&!this._fragmented&&(this._fragmented=this._opcode),this._masked=(r[1]&128)===128,this._isServer){if(!this._masked){let s=this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK");e(s);return}}else if(this._masked){let s=this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");e(s);return}this._payloadLength===126?this._state=B6:this._payloadLength===127?this._state=z6:this.haveLength(e)}getPayloadLength16(e){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(e)}getPayloadLength64(e){if(this._bufferedBytes<8){this._loop=!1;return}let r=this.consume(8),n=r.readUInt32BE(0);if(n>Math.pow(2,53-32)-1){let s=this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH");e(s);return}this._payloadLength=n*Math.pow(2,32)+r.readUInt32BE(4),this.haveLength(e)}haveLength(e){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)){let r=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");e(r);return}this._masked?this._state=V6:this._state=tP}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=tP}getData(e){let r=F6;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}r=this.consume(this._payloadLength),this._masked&&this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3]&&XOe(r,this._mask)}if(this._opcode>7){this.controlMessage(r,e);return}if(this._compressed){this._state=rP,this.decompress(r,e);return}r.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(r)),this.dataMessage(e)}decompress(e,r){this._extensions[L6.extensionName].decompress(e,this._fin,(s,i)=>{if(s)return r(s);if(i.length){if(this._messageLength+=i.length,this._messageLength>this._maxPayload&&this._maxPayload>0){let o=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");r(o);return}this._fragments.push(i)}this.dataMessage(r),this._state===An&&this.startLoop(r)})}dataMessage(e){if(!this._fin){this._state=An;return}let r=this._messageLength,n=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let s;this._binaryType==="nodebuffer"?s=eP(n,r):this._binaryType==="arraybuffer"?s=YOe(eP(n,r)):this._binaryType==="blob"?s=new Blob(n):s=n,this._allowSynchronousEvents?(this.emit("message",s,!0),this._state=An):(this._state=t_,setImmediate(()=>{this.emit("message",s,!0),this._state=An,this.startLoop(e)}))}else{let s=eP(n,r);if(!this._skipUTF8Validation&&!U6(s)){let i=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");e(i);return}this._state===rP||this._allowSynchronousEvents?(this.emit("message",s,!1),this._state=An):(this._state=t_,setImmediate(()=>{this.emit("message",s,!1),this._state=An,this.startLoop(e)}))}}controlMessage(e,r){if(this._opcode===8){if(e.length===0)this._loop=!1,this.emit("conclude",1005,F6),this.end();else{let n=e.readUInt16BE(0);if(!QOe(n)){let i=this.createError(RangeError,`invalid status code ${n}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");r(i);return}let s=new e_(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!U6(s)){let i=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");r(i);return}this._loop=!1,this.emit("conclude",n,s),this.end()}this._state=An;return}this._allowSynchronousEvents?(this.emit(this._opcode===9?"ping":"pong",e),this._state=An):(this._state=t_,setImmediate(()=>{this.emit(this._opcode===9?"ping":"pong",e),this._state=An,this.startLoop(r)}))}createError(e,r,n,s,i){this._loop=!1,this._errored=!0;let o=new e(n?`Invalid WebSocket frame: ${r}`:r);return Error.captureStackTrace(o,this.createError),o.code=i,o[KOe]=s,o}};H6.exports=nP});var oP=E((pLe,K6)=>{"use strict";var{Duplex:hLe}=require("stream"),{randomFillSync:ZOe}=require("crypto"),G6=Th(),{EMPTY_BUFFER:ePe,kWebSocket:tPe,NOOP:rPe}=Ei(),{isBlob:Jc,isValidStatusCode:nPe}=Kc(),{mask:W6,toBuffer:za}=Eh(),kn=Symbol("kByteLength"),sPe=Buffer.alloc(4),r_=8*1024,Va,Yc=r_,ls=0,iPe=1,oPe=2,zs=class{constructor(e,r,n){this._extensions=r||{},n&&(this._generateMask=n,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._queue=[],this._state=ls,this.onerror=rPe,this[tPe]=void 0}static frame(e,r){let n,s=!1,i=2,o=!1;r.mask&&(n=r.maskBuffer||sPe,r.generateMask?r.generateMask(n):(Yc===r_&&(Va===void 0&&(Va=Buffer.alloc(r_)),ZOe(Va,0,r_),Yc=0),n[0]=Va[Yc++],n[1]=Va[Yc++],n[2]=Va[Yc++],n[3]=Va[Yc++]),o=(n[0]|n[1]|n[2]|n[3])===0,i=6);let a;typeof e=="string"?(!r.mask||o)&&r[kn]!==void 0?a=r[kn]:(e=Buffer.from(e),a=e.length):(a=e.length,s=r.mask&&r.readOnly&&!o);let l=a;a>=65536?(i+=8,l=127):a>125&&(i+=2,l=126);let c=Buffer.allocUnsafe(s?a+i:i);return c[0]=r.fin?r.opcode|128:r.opcode,r.rsv1&&(c[0]|=64),c[1]=l,l===126?c.writeUInt16BE(a,2):l===127&&(c[2]=c[3]=0,c.writeUIntBE(a,4,6)),r.mask?(c[1]|=128,c[i-4]=n[0],c[i-3]=n[1],c[i-2]=n[2],c[i-1]=n[3],o?[c,e]:s?(W6(e,n,c,i,a),[c]):(W6(e,n,e,0,a),[c,e])):[c,e]}close(e,r,n,s){let i;if(e===void 0)i=ePe;else{if(typeof e!="number"||!nPe(e))throw new TypeError("First argument must be a valid error code number");if(r===void 0||!r.length)i=Buffer.allocUnsafe(2),i.writeUInt16BE(e,0);else{let a=Buffer.byteLength(r);if(a>123)throw new RangeError("The message must not be greater than 123 bytes");i=Buffer.allocUnsafe(2+a),i.writeUInt16BE(e,0),typeof r=="string"?i.write(r,2):i.set(r,2)}}let o={[kn]:i.length,fin:!0,generateMask:this._generateMask,mask:n,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._state!==ls?this.enqueue([this.dispatch,i,!1,o,s]):this.sendFrame(zs.frame(i,o),s)}ping(e,r,n){let s,i;if(typeof e=="string"?(s=Buffer.byteLength(e),i=!1):Jc(e)?(s=e.size,i=!1):(e=za(e),s=e.length,i=za.readOnly),s>125)throw new RangeError("The data size must not be greater than 125 bytes");let o={[kn]:s,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:9,readOnly:i,rsv1:!1};Jc(e)?this._state!==ls?this.enqueue([this.getBlobData,e,!1,o,n]):this.getBlobData(e,!1,o,n):this._state!==ls?this.enqueue([this.dispatch,e,!1,o,n]):this.sendFrame(zs.frame(e,o),n)}pong(e,r,n){let s,i;if(typeof e=="string"?(s=Buffer.byteLength(e),i=!1):Jc(e)?(s=e.size,i=!1):(e=za(e),s=e.length,i=za.readOnly),s>125)throw new RangeError("The data size must not be greater than 125 bytes");let o={[kn]:s,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:10,readOnly:i,rsv1:!1};Jc(e)?this._state!==ls?this.enqueue([this.getBlobData,e,!1,o,n]):this.getBlobData(e,!1,o,n):this._state!==ls?this.enqueue([this.dispatch,e,!1,o,n]):this.sendFrame(zs.frame(e,o),n)}send(e,r,n){let s=this._extensions[G6.extensionName],i=r.binary?2:1,o=r.compress,a,l;typeof e=="string"?(a=Buffer.byteLength(e),l=!1):Jc(e)?(a=e.size,l=!1):(e=za(e),a=e.length,l=za.readOnly),this._firstFragment?(this._firstFragment=!1,o&&s&&s.params[s._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(o=a>=s._threshold),this._compress=o):(o=!1,i=0),r.fin&&(this._firstFragment=!0);let c={[kn]:a,fin:r.fin,generateMask:this._generateMask,mask:r.mask,maskBuffer:this._maskBuffer,opcode:i,readOnly:l,rsv1:o};Jc(e)?this._state!==ls?this.enqueue([this.getBlobData,e,this._compress,c,n]):this.getBlobData(e,this._compress,c,n):this._state!==ls?this.enqueue([this.dispatch,e,this._compress,c,n]):this.dispatch(e,this._compress,c,n)}getBlobData(e,r,n,s){this._bufferedBytes+=n[kn],this._state=oPe,e.arrayBuffer().then(i=>{if(this._socket.destroyed){let a=new Error("The socket was closed while the blob was being read");process.nextTick(iP,this,a,s);return}this._bufferedBytes-=n[kn];let o=za(i);r?this.dispatch(o,r,n,s):(this._state=ls,this.sendFrame(zs.frame(o,n),s),this.dequeue())}).catch(i=>{process.nextTick(aPe,this,i,s)})}dispatch(e,r,n,s){if(!r){this.sendFrame(zs.frame(e,n),s);return}let i=this._extensions[G6.extensionName];this._bufferedBytes+=n[kn],this._state=iPe,i.compress(e,n.fin,(o,a)=>{if(this._socket.destroyed){let l=new Error("The socket was closed while data was being compressed");iP(this,l,s);return}this._bufferedBytes-=n[kn],this._state=ls,n.readOnly=!1,this.sendFrame(zs.frame(a,n),s),this.dequeue()})}dequeue(){for(;this._state===ls&&this._queue.length;){let e=this._queue.shift();this._bufferedBytes-=e[3][kn],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][kn],this._queue.push(e)}sendFrame(e,r){e.length===2?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],r),this._socket.uncork()):this._socket.write(e[0],r)}};K6.exports=zs;function iP(t,e,r){typeof r=="function"&&r(e);for(let n=0;n<t._queue.length;n++){let s=t._queue[n],i=s[s.length-1];typeof i=="function"&&i(e)}}function aPe(t,e,r){iP(t,e,r),t.onerror(e)}});var n5=E((mLe,r5)=>{"use strict";var{kForOnEventAttribute:Rh,kListener:aP}=Ei(),J6=Symbol("kCode"),Y6=Symbol("kData"),X6=Symbol("kError"),Q6=Symbol("kMessage"),Z6=Symbol("kReason"),Xc=Symbol("kTarget"),e5=Symbol("kType"),t5=Symbol("kWasClean"),Ti=class{constructor(e){this[Xc]=null,this[e5]=e}get target(){return this[Xc]}get type(){return this[e5]}};Object.defineProperty(Ti.prototype,"target",{enumerable:!0});Object.defineProperty(Ti.prototype,"type",{enumerable:!0});var Ha=class extends Ti{constructor(e,r={}){super(e),this[J6]=r.code===void 0?0:r.code,this[Z6]=r.reason===void 0?"":r.reason,this[t5]=r.wasClean===void 0?!1:r.wasClean}get code(){return this[J6]}get reason(){return this[Z6]}get wasClean(){return this[t5]}};Object.defineProperty(Ha.prototype,"code",{enumerable:!0});Object.defineProperty(Ha.prototype,"reason",{enumerable:!0});Object.defineProperty(Ha.prototype,"wasClean",{enumerable:!0});var Qc=class extends Ti{constructor(e,r={}){super(e),this[X6]=r.error===void 0?null:r.error,this[Q6]=r.message===void 0?"":r.message}get error(){return this[X6]}get message(){return this[Q6]}};Object.defineProperty(Qc.prototype,"error",{enumerable:!0});Object.defineProperty(Qc.prototype,"message",{enumerable:!0});var $h=class extends Ti{constructor(e,r={}){super(e),this[Y6]=r.data===void 0?null:r.data}get data(){return this[Y6]}};Object.defineProperty($h.prototype,"data",{enumerable:!0});var lPe={addEventListener(t,e,r={}){for(let s of this.listeners(t))if(!r[Rh]&&s[aP]===e&&!s[Rh])return;let n;if(t==="message")n=function(i,o){let a=new $h("message",{data:o?i:i.toString()});a[Xc]=this,n_(e,this,a)};else if(t==="close")n=function(i,o){let a=new Ha("close",{code:i,reason:o.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});a[Xc]=this,n_(e,this,a)};else if(t==="error")n=function(i){let o=new Qc("error",{error:i,message:i.message});o[Xc]=this,n_(e,this,o)};else if(t==="open")n=function(){let i=new Ti("open");i[Xc]=this,n_(e,this,i)};else return;n[Rh]=!!r[Rh],n[aP]=e,r.once?this.once(t,n):this.on(t,n)},removeEventListener(t,e){for(let r of this.listeners(t))if(r[aP]===e&&!r[Rh]){this.removeListener(t,r);break}}};r5.exports={CloseEvent:Ha,ErrorEvent:Qc,Event:Ti,EventTarget:lPe,MessageEvent:$h};function n_(t,e,r){typeof t=="object"&&t.handleEvent?t.handleEvent.call(t,r):t.call(e,r)}});var lP=E((gLe,s5)=>{"use strict";var{tokenChars:Oh}=Kc();function Vs(t,e,r){t[e]===void 0?t[e]=[r]:t[e].push(r)}function cPe(t){let e=Object.create(null),r=Object.create(null),n=!1,s=!1,i=!1,o,a,l=-1,c=-1,u=-1,d=0;for(;d<t.length;d++)if(c=t.charCodeAt(d),o===void 0)if(u===-1&&Oh[c]===1)l===-1&&(l=d);else if(d!==0&&(c===32||c===9))u===-1&&l!==-1&&(u=d);else if(c===59||c===44){if(l===-1)throw new SyntaxError(`Unexpected character at index ${d}`);u===-1&&(u=d);let f=t.slice(l,u);c===44?(Vs(e,f,r),r=Object.create(null)):o=f,l=u=-1}else throw new SyntaxError(`Unexpected character at index ${d}`);else if(a===void 0)if(u===-1&&Oh[c]===1)l===-1&&(l=d);else if(c===32||c===9)u===-1&&l!==-1&&(u=d);else if(c===59||c===44){if(l===-1)throw new SyntaxError(`Unexpected character at index ${d}`);u===-1&&(u=d),Vs(r,t.slice(l,u),!0),c===44&&(Vs(e,o,r),r=Object.create(null),o=void 0),l=u=-1}else if(c===61&&l!==-1&&u===-1)a=t.slice(l,d),l=u=-1;else throw new SyntaxError(`Unexpected character at index ${d}`);else if(s){if(Oh[c]!==1)throw new SyntaxError(`Unexpected character at index ${d}`);l===-1?l=d:n||(n=!0),s=!1}else if(i)if(Oh[c]===1)l===-1&&(l=d);else if(c===34&&l!==-1)i=!1,u=d;else if(c===92)s=!0;else throw new SyntaxError(`Unexpected character at index ${d}`);else if(c===34&&t.charCodeAt(d-1)===61)i=!0;else if(u===-1&&Oh[c]===1)l===-1&&(l=d);else if(l!==-1&&(c===32||c===9))u===-1&&(u=d);else if(c===59||c===44){if(l===-1)throw new SyntaxError(`Unexpected character at index ${d}`);u===-1&&(u=d);let f=t.slice(l,u);n&&(f=f.replace(/\\/g,""),n=!1),Vs(r,a,f),c===44&&(Vs(e,o,r),r=Object.create(null),o=void 0),a=void 0,l=u=-1}else throw new SyntaxError(`Unexpected character at index ${d}`);if(l===-1||i||c===32||c===9)throw new SyntaxError("Unexpected end of input");u===-1&&(u=d);let p=t.slice(l,u);return o===void 0?Vs(e,p,r):(a===void 0?Vs(r,p,!0):n?Vs(r,a,p.replace(/\\/g,"")):Vs(r,a,p),Vs(e,o,r)),e}function uPe(t){return Object.keys(t).map(e=>{let r=t[e];return Array.isArray(r)||(r=[r]),r.map(n=>[e].concat(Object.keys(n).map(s=>{let i=n[s];return Array.isArray(i)||(i=[i]),i.map(o=>o===!0?s:`${s}=${o}`).join("; ")})).join("; ")).join(", ")}).join(", ")}s5.exports={format:uPe,parse:cPe}});var a_=E((vLe,g5)=>{"use strict";var fPe=require("events"),dPe=require("https"),hPe=require("http"),a5=require("net"),pPe=require("tls"),{randomBytes:mPe,createHash:gPe}=require("crypto"),{Duplex:yLe,Readable:_Le}=require("stream"),{URL:cP}=require("url"),To=Th(),yPe=sP(),_Pe=oP(),{isBlob:vPe}=Kc(),{BINARY_TYPES:i5,EMPTY_BUFFER:s_,GUID:wPe,kForOnEventAttribute:uP,kListener:bPe,kStatusCode:EPe,kWebSocket:Ut,NOOP:l5}=Ei(),{EventTarget:{addEventListener:SPe,removeEventListener:TPe}}=n5(),{format:RPe,parse:$Pe}=lP(),{toBuffer:OPe}=Eh(),PPe=30*1e3,c5=Symbol("kAborted"),fP=[8,13],Ri=["CONNECTING","OPEN","CLOSING","CLOSED"],xPe=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,ae=class extends fPe{constructor(e,r,n){super(),this._binaryType=i5[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=s_,this._closeTimer=null,this._errorEmitted=!1,this._extensions={},this._paused=!1,this._protocol="",this._readyState=ae.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,e!==null?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,r===void 0?r=[]:Array.isArray(r)||(typeof r=="object"&&r!==null?(n=r,r=[]):r=[r]),u5(this,e,r,n)):(this._autoPong=n.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(e){i5.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,r,n){let s=new yPe({allowSynchronousEvents:n.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:n.maxPayload,skipUTF8Validation:n.skipUTF8Validation}),i=new _Pe(e,this._extensions,n.generateMask);this._receiver=s,this._sender=i,this._socket=e,s[Ut]=this,i[Ut]=this,e[Ut]=this,s.on("conclude",IPe),s.on("drain",APe),s.on("error",kPe),s.on("message",DPe),s.on("ping",MPe),s.on("pong",jPe),i.onerror=qPe,e.setTimeout&&e.setTimeout(0),e.setNoDelay&&e.setNoDelay(),r.length>0&&e.unshift(r),e.on("close",h5),e.on("data",o_),e.on("end",p5),e.on("error",m5),this._readyState=ae.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=ae.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[To.extensionName]&&this._extensions[To.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=ae.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,r){if(this.readyState!==ae.CLOSED){if(this.readyState===ae.CONNECTING){let n="WebSocket was closed before the connection was established";an(this,this._req,n);return}if(this.readyState===ae.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=ae.CLOSING,this._sender.close(e,r,!this._isServer,n=>{n||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),d5(this)}}pause(){this.readyState===ae.CONNECTING||this.readyState===ae.CLOSED||(this._paused=!0,this._socket.pause())}ping(e,r,n){if(this.readyState===ae.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(n=e,e=r=void 0):typeof r=="function"&&(n=r,r=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==ae.OPEN){dP(this,e,n);return}r===void 0&&(r=!this._isServer),this._sender.ping(e||s_,r,n)}pong(e,r,n){if(this.readyState===ae.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(n=e,e=r=void 0):typeof r=="function"&&(n=r,r=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==ae.OPEN){dP(this,e,n);return}r===void 0&&(r=!this._isServer),this._sender.pong(e||s_,r,n)}resume(){this.readyState===ae.CONNECTING||this.readyState===ae.CLOSED||(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,r,n){if(this.readyState===ae.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof r=="function"&&(n=r,r={}),typeof e=="number"&&(e=e.toString()),this.readyState!==ae.OPEN){dP(this,e,n);return}let s={binary:typeof e!="string",mask:!this._isServer,compress:!0,fin:!0,...r};this._extensions[To.extensionName]||(s.compress=!1),this._sender.send(e||s_,s,n)}terminate(){if(this.readyState!==ae.CLOSED){if(this.readyState===ae.CONNECTING){let e="WebSocket was closed before the connection was established";an(this,this._req,e);return}this._socket&&(this._readyState=ae.CLOSING,this._socket.destroy())}}};Object.defineProperty(ae,"CONNECTING",{enumerable:!0,value:Ri.indexOf("CONNECTING")});Object.defineProperty(ae.prototype,"CONNECTING",{enumerable:!0,value:Ri.indexOf("CONNECTING")});Object.defineProperty(ae,"OPEN",{enumerable:!0,value:Ri.indexOf("OPEN")});Object.defineProperty(ae.prototype,"OPEN",{enumerable:!0,value:Ri.indexOf("OPEN")});Object.defineProperty(ae,"CLOSING",{enumerable:!0,value:Ri.indexOf("CLOSING")});Object.defineProperty(ae.prototype,"CLOSING",{enumerable:!0,value:Ri.indexOf("CLOSING")});Object.defineProperty(ae,"CLOSED",{enumerable:!0,value:Ri.indexOf("CLOSED")});Object.defineProperty(ae.prototype,"CLOSED",{enumerable:!0,value:Ri.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(t=>{Object.defineProperty(ae.prototype,t,{enumerable:!0})});["open","error","close","message"].forEach(t=>{Object.defineProperty(ae.prototype,`on${t}`,{enumerable:!0,get(){for(let e of this.listeners(t))if(e[uP])return e[bPe];return null},set(e){for(let r of this.listeners(t))if(r[uP]){this.removeListener(t,r);break}typeof e=="function"&&this.addEventListener(t,e,{[uP]:!0})}})});ae.prototype.addEventListener=SPe;ae.prototype.removeEventListener=TPe;g5.exports=ae;function u5(t,e,r,n){let s={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:fP[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...n,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(t._autoPong=s.autoPong,!fP.includes(s.protocolVersion))throw new RangeError(`Unsupported protocol version: ${s.protocolVersion} (supported versions: ${fP.join(", ")})`);let i;if(e instanceof cP)i=e;else try{i=new cP(e)}catch{throw new SyntaxError(`Invalid URL: ${e}`)}i.protocol==="http:"?i.protocol="ws:":i.protocol==="https:"&&(i.protocol="wss:"),t._url=i.href;let o=i.protocol==="wss:",a=i.protocol==="ws+unix:",l;if(i.protocol!=="ws:"&&!o&&!a?l=`The URL's protocol must be one of "ws:", "wss:", "http:", "https:", or "ws+unix:"`:a&&!i.pathname?l="The URL's pathname is empty":i.hash&&(l="The URL contains a fragment identifier"),l){let m=new SyntaxError(l);if(t._redirects===0)throw m;i_(t,m);return}let c=o?443:80,u=mPe(16).toString("base64"),d=o?dPe.request:hPe.request,p=new Set,f;if(s.createConnection=s.createConnection||(o?CPe:NPe),s.defaultPort=s.defaultPort||c,s.port=i.port||c,s.host=i.hostname.startsWith("[")?i.hostname.slice(1,-1):i.hostname,s.headers={...s.headers,"Sec-WebSocket-Version":s.protocolVersion,"Sec-WebSocket-Key":u,Connection:"Upgrade",Upgrade:"websocket"},s.path=i.pathname+i.search,s.timeout=s.handshakeTimeout,s.perMessageDeflate&&(f=new To(s.perMessageDeflate!==!0?s.perMessageDeflate:{},!1,s.maxPayload),s.headers["Sec-WebSocket-Extensions"]=RPe({[To.extensionName]:f.offer()})),r.length){for(let m of r){if(typeof m!="string"||!xPe.test(m)||p.has(m))throw new SyntaxError("An invalid or duplicated subprotocol was specified");p.add(m)}s.headers["Sec-WebSocket-Protocol"]=r.join(",")}if(s.origin&&(s.protocolVersion<13?s.headers["Sec-WebSocket-Origin"]=s.origin:s.headers.Origin=s.origin),(i.username||i.password)&&(s.auth=`${i.username}:${i.password}`),a){let m=s.path.split(":");s.socketPath=m[0],s.path=m[1]}let h;if(s.followRedirects){if(t._redirects===0){t._originalIpc=a,t._originalSecure=o,t._originalHostOrSocketPath=a?s.socketPath:i.host;let m=n&&n.headers;if(n={...n,headers:{}},m)for(let[y,g]of Object.entries(m))n.headers[y.toLowerCase()]=g}else if(t.listenerCount("redirect")===0){let m=a?t._originalIpc?s.socketPath===t._originalHostOrSocketPath:!1:t._originalIpc?!1:i.host===t._originalHostOrSocketPath;(!m||t._originalSecure&&!o)&&(delete s.headers.authorization,delete s.headers.cookie,m||delete s.headers.host,s.auth=void 0)}s.auth&&!n.headers.authorization&&(n.headers.authorization="Basic "+Buffer.from(s.auth).toString("base64")),h=t._req=d(s),t._redirects&&t.emit("redirect",t.url,h)}else h=t._req=d(s);s.timeout&&h.on("timeout",()=>{an(t,h,"Opening handshake has timed out")}),h.on("error",m=>{h===null||h[c5]||(h=t._req=null,i_(t,m))}),h.on("response",m=>{let y=m.headers.location,g=m.statusCode;if(y&&s.followRedirects&&g>=300&&g<400){if(++t._redirects>s.maxRedirects){an(t,h,"Maximum redirects exceeded");return}h.abort();let w;try{w=new cP(y,e)}catch{let v=new SyntaxError(`Invalid URL: ${y}`);i_(t,v);return}u5(t,w,r,n)}else t.emit("unexpected-response",h,m)||an(t,h,`Unexpected server response: ${m.statusCode}`)}),h.on("upgrade",(m,y,g)=>{if(t.emit("upgrade",m),t.readyState!==ae.CONNECTING)return;h=t._req=null;let w=m.headers.upgrade;if(w===void 0||w.toLowerCase()!=="websocket"){an(t,y,"Invalid Upgrade header");return}let _=gPe("sha1").update(u+wPe).digest("base64");if(m.headers["sec-websocket-accept"]!==_){an(t,y,"Invalid Sec-WebSocket-Accept header");return}let v=m.headers["sec-websocket-protocol"],S;if(v!==void 0?p.size?p.has(v)||(S="Server sent an invalid subprotocol"):S="Server sent a subprotocol but none was requested":p.size&&(S="Server sent no subprotocol"),S){an(t,y,S);return}v&&(t._protocol=v);let $=m.headers["sec-websocket-extensions"];if($!==void 0){if(!f){an(t,y,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let T;try{T=$Pe($)}catch{an(t,y,"Invalid Sec-WebSocket-Extensions header");return}let O=Object.keys(T);if(O.length!==1||O[0]!==To.extensionName){an(t,y,"Server indicated an extension that was not requested");return}try{f.accept(T[To.extensionName])}catch{an(t,y,"Invalid Sec-WebSocket-Extensions header");return}t._extensions[To.extensionName]=f}t.setSocket(y,g,{allowSynchronousEvents:s.allowSynchronousEvents,generateMask:s.generateMask,maxPayload:s.maxPayload,skipUTF8Validation:s.skipUTF8Validation})}),s.finishRequest?s.finishRequest(h,t):h.end()}function i_(t,e){t._readyState=ae.CLOSING,t._errorEmitted=!0,t.emit("error",e),t.emitClose()}function NPe(t){return t.path=t.socketPath,a5.connect(t)}function CPe(t){return t.path=void 0,!t.servername&&t.servername!==""&&(t.servername=a5.isIP(t.host)?"":t.host),pPe.connect(t)}function an(t,e,r){t._readyState=ae.CLOSING;let n=new Error(r);Error.captureStackTrace(n,an),e.setHeader?(e[c5]=!0,e.abort(),e.socket&&!e.socket.destroyed&&e.socket.destroy(),process.nextTick(i_,t,n)):(e.destroy(n),e.once("error",t.emit.bind(t,"error")),e.once("close",t.emitClose.bind(t)))}function dP(t,e,r){if(e){let n=vPe(e)?e.size:OPe(e).length;t._socket?t._sender._bufferedBytes+=n:t._bufferedAmount+=n}if(r){let n=new Error(`WebSocket is not open: readyState ${t.readyState} (${Ri[t.readyState]})`);process.nextTick(r,n)}}function IPe(t,e){let r=this[Ut];r._closeFrameReceived=!0,r._closeMessage=e,r._closeCode=t,r._socket[Ut]!==void 0&&(r._socket.removeListener("data",o_),process.nextTick(f5,r._socket),t===1005?r.close():r.close(t,e))}function APe(){let t=this[Ut];t.isPaused||t._socket.resume()}function kPe(t){let e=this[Ut];e._socket[Ut]!==void 0&&(e._socket.removeListener("data",o_),process.nextTick(f5,e._socket),e.close(t[EPe])),e._errorEmitted||(e._errorEmitted=!0,e.emit("error",t))}function o5(){this[Ut].emitClose()}function DPe(t,e){this[Ut].emit("message",t,e)}function MPe(t){let e=this[Ut];e._autoPong&&e.pong(t,!this._isServer,l5),e.emit("ping",t)}function jPe(t){this[Ut].emit("pong",t)}function f5(t){t.resume()}function qPe(t){let e=this[Ut];e.readyState!==ae.CLOSED&&(e.readyState===ae.OPEN&&(e._readyState=ae.CLOSING,d5(e)),this._socket.end(),e._errorEmitted||(e._errorEmitted=!0,e.emit("error",t)))}function d5(t){t._closeTimer=setTimeout(t._socket.destroy.bind(t._socket),PPe)}function h5(){let t=this[Ut];this.removeListener("close",h5),this.removeListener("data",o_),this.removeListener("end",p5),t._readyState=ae.CLOSING;let e;!this._readableState.endEmitted&&!t._closeFrameReceived&&!t._receiver._writableState.errorEmitted&&(e=t._socket.read())!==null&&t._receiver.write(e),t._receiver.end(),this[Ut]=void 0,clearTimeout(t._closeTimer),t._receiver._writableState.finished||t._receiver._writableState.errorEmitted?t.emitClose():(t._receiver.on("error",o5),t._receiver.on("finish",o5))}function o_(t){this[Ut]._receiver.write(t)||this.pause()}function p5(){let t=this[Ut];t._readyState=ae.CLOSING,t._receiver.end(),this.end()}function m5(){let t=this[Ut];this.removeListener("error",m5),this.on("error",l5),t&&(t._readyState=ae.CLOSING,this.destroy())}});var w5=E((bLe,v5)=>{"use strict";var wLe=a_(),{Duplex:LPe}=require("stream");function y5(t){t.emit("close")}function FPe(){!this.destroyed&&this._writableState.finished&&this.destroy()}function _5(t){this.removeListener("error",_5),this.destroy(),this.listenerCount("error")===0&&this.emit("error",t)}function UPe(t,e){let r=!0,n=new LPe({...e,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return t.on("message",function(i,o){let a=!o&&n._readableState.objectMode?i.toString():i;n.push(a)||t.pause()}),t.once("error",function(i){n.destroyed||(r=!1,n.destroy(i))}),t.once("close",function(){n.destroyed||n.push(null)}),n._destroy=function(s,i){if(t.readyState===t.CLOSED){i(s),process.nextTick(y5,n);return}let o=!1;t.once("error",function(l){o=!0,i(l)}),t.once("close",function(){o||i(s),process.nextTick(y5,n)}),r&&t.terminate()},n._final=function(s){if(t.readyState===t.CONNECTING){t.once("open",function(){n._final(s)});return}t._socket!==null&&(t._socket._writableState.finished?(s(),n._readableState.endEmitted&&n.destroy()):(t._socket.once("finish",function(){s()}),t.close()))},n._read=function(){t.isPaused&&t.resume()},n._write=function(s,i,o){if(t.readyState===t.CONNECTING){t.once("open",function(){n._write(s,i,o)});return}t.send(s,o)},n.on("end",FPe),n.on("error",_5),n}v5.exports=UPe});var E5=E((ELe,b5)=>{"use strict";var{tokenChars:BPe}=Kc();function zPe(t){let e=new Set,r=-1,n=-1,s=0;for(s;s<t.length;s++){let o=t.charCodeAt(s);if(n===-1&&BPe[o]===1)r===-1&&(r=s);else if(s!==0&&(o===32||o===9))n===-1&&r!==-1&&(n=s);else if(o===44){if(r===-1)throw new SyntaxError(`Unexpected character at index ${s}`);n===-1&&(n=s);let a=t.slice(r,n);if(e.has(a))throw new SyntaxError(`The "${a}" subprotocol is duplicated`);e.add(a),r=n=-1}else throw new SyntaxError(`Unexpected character at index ${s}`)}if(r===-1||n!==-1)throw new SyntaxError("Unexpected end of input");let i=t.slice(r,s);if(e.has(i))throw new SyntaxError(`The "${i}" subprotocol is duplicated`);return e.add(i),e}b5.exports={parse:zPe}});var x5=E((TLe,P5)=>{"use strict";var VPe=require("events"),l_=require("http"),{Duplex:SLe}=require("stream"),{createHash:HPe}=require("crypto"),S5=lP(),Ga=Th(),GPe=E5(),WPe=a_(),{GUID:KPe,kWebSocket:JPe}=Ei(),YPe=/^[+/0-9A-Za-z]{22}==$/,T5=0,R5=1,O5=2,hP=class extends VPe{constructor(e,r){if(super(),e={allowSynchronousEvents:!0,autoPong:!0,maxPayload:100*1024*1024,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:WPe,...e},e.port==null&&!e.server&&!e.noServer||e.port!=null&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(e.port!=null?(this._server=l_.createServer((n,s)=>{let i=l_.STATUS_CODES[426];s.writeHead(426,{"Content-Length":i.length,"Content-Type":"text/plain"}),s.end(i)}),this._server.listen(e.port,e.host,e.backlog,r)):e.server&&(this._server=e.server),this._server){let n=this.emit.bind(this,"connection");this._removeListeners=XPe(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(s,i,o)=>{this.handleUpgrade(s,i,o,n)}})}e.perMessageDeflate===!0&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=T5}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(this._state===O5){e&&this.once("close",()=>{e(new Error("The server is not running"))}),process.nextTick(Ph,this);return}if(e&&this.once("close",e),this._state!==R5)if(this._state=R5,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients?this.clients.size?this._shouldEmitClose=!0:process.nextTick(Ph,this):process.nextTick(Ph,this);else{let r=this._server;this._removeListeners(),this._removeListeners=this._server=null,r.close(()=>{Ph(this)})}}shouldHandle(e){if(this.options.path){let r=e.url.indexOf("?");if((r!==-1?e.url.slice(0,r):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,r,n,s){r.on("error",$5);let i=e.headers["sec-websocket-key"],o=e.headers.upgrade,a=+e.headers["sec-websocket-version"];if(e.method!=="GET"){Wa(this,e,r,405,"Invalid HTTP method");return}if(o===void 0||o.toLowerCase()!=="websocket"){Wa(this,e,r,400,"Invalid Upgrade header");return}if(i===void 0||!YPe.test(i)){Wa(this,e,r,400,"Missing or invalid Sec-WebSocket-Key header");return}if(a!==8&&a!==13){Wa(this,e,r,400,"Missing or invalid Sec-WebSocket-Version header");return}if(!this.shouldHandle(e)){xh(r,400);return}let l=e.headers["sec-websocket-protocol"],c=new Set;if(l!==void 0)try{c=GPe.parse(l)}catch{Wa(this,e,r,400,"Invalid Sec-WebSocket-Protocol header");return}let u=e.headers["sec-websocket-extensions"],d={};if(this.options.perMessageDeflate&&u!==void 0){let p=new Ga(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let f=S5.parse(u);f[Ga.extensionName]&&(p.accept(f[Ga.extensionName]),d[Ga.extensionName]=p)}catch{Wa(this,e,r,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let p={origin:e.headers[`${a===8?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(this.options.verifyClient.length===2){this.options.verifyClient(p,(f,h,m,y)=>{if(!f)return xh(r,h||401,m,y);this.completeUpgrade(d,i,c,e,r,n,s)});return}if(!this.options.verifyClient(p))return xh(r,401)}this.completeUpgrade(d,i,c,e,r,n,s)}completeUpgrade(e,r,n,s,i,o,a){if(!i.readable||!i.writable)return i.destroy();if(i[JPe])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>T5)return xh(i,503);let c=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${HPe("sha1").update(r+KPe).digest("base64")}`],u=new this.options.WebSocket(null,void 0,this.options);if(n.size){let d=this.options.handleProtocols?this.options.handleProtocols(n,s):n.values().next().value;d&&(c.push(`Sec-WebSocket-Protocol: ${d}`),u._protocol=d)}if(e[Ga.extensionName]){let d=e[Ga.extensionName].params,p=S5.format({[Ga.extensionName]:[d]});c.push(`Sec-WebSocket-Extensions: ${p}`),u._extensions=e}this.emit("headers",c,s),i.write(c.concat(`\r
`).join(`\r
`)),i.removeListener("error",$5),u.setSocket(i,o,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(u),u.on("close",()=>{this.clients.delete(u),this._shouldEmitClose&&!this.clients.size&&process.nextTick(Ph,this)})),a(u,s)}};P5.exports=hP;function XPe(t,e){for(let r of Object.keys(e))t.on(r,e[r]);return function(){for(let n of Object.keys(e))t.removeListener(n,e[n])}}function Ph(t){t._state=O5,t.emit("close")}function $5(){this.destroy()}function xh(t,e,r,n){r=r||l_.STATUS_CODES[e],n={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...n},t.once("finish",t.destroy),t.end(`HTTP/1.1 ${e} ${l_.STATUS_CODES[e]}\r
`+Object.keys(n).map(s=>`${s}: ${n[s]}`).join(`\r
`)+`\r
\r
`+r)}function Wa(t,e,r,n,s){if(t.listenerCount("wsClientError")){let i=new Error(s);Error.captureStackTrace(i,Wa),t.emit("wsClientError",i,r,e)}else xh(r,n,s)}});var C5=E((RLe,N5)=>{"use strict";var $i=a_();$i.createWebSocketStream=w5();$i.Server=x5();$i.Receiver=sP();$i.Sender=oP();$i.WebSocket=$i;$i.WebSocketServer=$i.Server;N5.exports=$i});var A5=E(($Le,I5)=>{"use strict";I5.exports=C5()});var pP=E((c_,k5)=>{(function(t,e){typeof c_=="object"?k5.exports=c_=e():typeof define=="function"&&define.amd?define([],e):t.CryptoJS=e()})(c_,function(){var t=t||function(e,r){var n;if(typeof window<"u"&&window.crypto&&(n=window.crypto),typeof self<"u"&&self.crypto&&(n=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(n=globalThis.crypto),!n&&typeof window<"u"&&window.msCrypto&&(n=window.msCrypto),!n&&typeof global<"u"&&global.crypto&&(n=global.crypto),!n&&typeof require=="function")try{n=require("crypto")}catch{}var s=function(){if(n){if(typeof n.getRandomValues=="function")try{return n.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof n.randomBytes=="function")try{return n.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},i=Object.create||function(){function g(){}return function(w){var _;return g.prototype=w,_=new g,g.prototype=null,_}}(),o={},a=o.lib={},l=a.Base=function(){return{extend:function(g){var w=i(this);return g&&w.mixIn(g),(!w.hasOwnProperty("init")||this.init===w.init)&&(w.init=function(){w.$super.init.apply(this,arguments)}),w.init.prototype=w,w.$super=this,w},create:function(){var g=this.extend();return g.init.apply(g,arguments),g},init:function(){},mixIn:function(g){for(var w in g)g.hasOwnProperty(w)&&(this[w]=g[w]);g.hasOwnProperty("toString")&&(this.toString=g.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),c=a.WordArray=l.extend({init:function(g,w){g=this.words=g||[],w!=r?this.sigBytes=w:this.sigBytes=g.length*4},toString:function(g){return(g||d).stringify(this)},concat:function(g){var w=this.words,_=g.words,v=this.sigBytes,S=g.sigBytes;if(this.clamp(),v%4)for(var $=0;$<S;$++){var T=_[$>>>2]>>>24-$%4*8&255;w[v+$>>>2]|=T<<24-(v+$)%4*8}else for(var O=0;O<S;O+=4)w[v+O>>>2]=_[O>>>2];return this.sigBytes+=S,this},clamp:function(){var g=this.words,w=this.sigBytes;g[w>>>2]&=4294967295<<32-w%4*8,g.length=e.ceil(w/4)},clone:function(){var g=l.clone.call(this);return g.words=this.words.slice(0),g},random:function(g){for(var w=[],_=0;_<g;_+=4)w.push(s());return new c.init(w,g)}}),u=o.enc={},d=u.Hex={stringify:function(g){for(var w=g.words,_=g.sigBytes,v=[],S=0;S<_;S++){var $=w[S>>>2]>>>24-S%4*8&255;v.push(($>>>4).toString(16)),v.push(($&15).toString(16))}return v.join("")},parse:function(g){for(var w=g.length,_=[],v=0;v<w;v+=2)_[v>>>3]|=parseInt(g.substr(v,2),16)<<24-v%8*4;return new c.init(_,w/2)}},p=u.Latin1={stringify:function(g){for(var w=g.words,_=g.sigBytes,v=[],S=0;S<_;S++){var $=w[S>>>2]>>>24-S%4*8&255;v.push(String.fromCharCode($))}return v.join("")},parse:function(g){for(var w=g.length,_=[],v=0;v<w;v++)_[v>>>2]|=(g.charCodeAt(v)&255)<<24-v%4*8;return new c.init(_,w)}},f=u.Utf8={stringify:function(g){try{return decodeURIComponent(escape(p.stringify(g)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(g){return p.parse(unescape(encodeURIComponent(g)))}},h=a.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(g){typeof g=="string"&&(g=f.parse(g)),this._data.concat(g),this._nDataBytes+=g.sigBytes},_process:function(g){var w,_=this._data,v=_.words,S=_.sigBytes,$=this.blockSize,T=$*4,O=S/T;g?O=e.ceil(O):O=e.max((O|0)-this._minBufferSize,0);var R=O*$,P=e.min(R*4,S);if(R){for(var A=0;A<R;A+=$)this._doProcessBlock(v,A);w=v.splice(0,R),_.sigBytes-=P}return new c.init(w,P)},clone:function(){var g=l.clone.call(this);return g._data=this._data.clone(),g},_minBufferSize:0}),m=a.Hasher=h.extend({cfg:l.extend(),init:function(g){this.cfg=this.cfg.extend(g),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(g){return this._append(g),this._process(),this},finalize:function(g){g&&this._append(g);var w=this._doFinalize();return w},blockSize:512/32,_createHelper:function(g){return function(w,_){return new g.init(_).finalize(w)}},_createHmacHelper:function(g){return function(w,_){return new y.HMAC.init(g,_).finalize(w)}}}),y=o.algo={};return o}(Math);return t})});var M5=E((u_,D5)=>{(function(t,e){typeof u_=="object"?D5.exports=u_=e(pP()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(u_,function(t){return function(e){var r=t,n=r.lib,s=n.WordArray,i=n.Hasher,o=r.algo,a=[],l=[];(function(){function d(m){for(var y=e.sqrt(m),g=2;g<=y;g++)if(!(m%g))return!1;return!0}function p(m){return(m-(m|0))*4294967296|0}for(var f=2,h=0;h<64;)d(f)&&(h<8&&(a[h]=p(e.pow(f,1/2))),l[h]=p(e.pow(f,1/3)),h++),f++})();var c=[],u=o.SHA256=i.extend({_doReset:function(){this._hash=new s.init(a.slice(0))},_doProcessBlock:function(d,p){for(var f=this._hash.words,h=f[0],m=f[1],y=f[2],g=f[3],w=f[4],_=f[5],v=f[6],S=f[7],$=0;$<64;$++){if($<16)c[$]=d[p+$]|0;else{var T=c[$-15],O=(T<<25|T>>>7)^(T<<14|T>>>18)^T>>>3,R=c[$-2],P=(R<<15|R>>>17)^(R<<13|R>>>19)^R>>>10;c[$]=O+c[$-7]+P+c[$-16]}var A=w&_^~w&v,N=h&m^h&y^m&y,C=(h<<30|h>>>2)^(h<<19|h>>>13)^(h<<10|h>>>22),z=(w<<26|w>>>6)^(w<<21|w>>>11)^(w<<7|w>>>25),te=S+z+A+l[$]+c[$],H=C+N;S=v,v=_,_=w,w=g+te|0,g=y,y=m,m=h,h=te+H|0}f[0]=f[0]+h|0,f[1]=f[1]+m|0,f[2]=f[2]+y|0,f[3]=f[3]+g|0,f[4]=f[4]+w|0,f[5]=f[5]+_|0,f[6]=f[6]+v|0,f[7]=f[7]+S|0},_doFinalize:function(){var d=this._data,p=d.words,f=this._nDataBytes*8,h=d.sigBytes*8;return p[h>>>5]|=128<<24-h%32,p[(h+64>>>9<<4)+14]=e.floor(f/4294967296),p[(h+64>>>9<<4)+15]=f,d.sigBytes=p.length*4,this._process(),this._hash},clone:function(){var d=i.clone.call(this);return d._hash=this._hash.clone(),d}});r.SHA256=i._createHelper(u),r.HmacSHA256=i._createHmacHelper(u)}(Math),t.SHA256})});var q5=E((f_,j5)=>{(function(t,e){typeof f_=="object"?j5.exports=f_=e(pP()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(f_,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,s=e.enc,i=s.Base64={stringify:function(a){var l=a.words,c=a.sigBytes,u=this._map;a.clamp();for(var d=[],p=0;p<c;p+=3)for(var f=l[p>>>2]>>>24-p%4*8&255,h=l[p+1>>>2]>>>24-(p+1)%4*8&255,m=l[p+2>>>2]>>>24-(p+2)%4*8&255,y=f<<16|h<<8|m,g=0;g<4&&p+g*.75<c;g++)d.push(u.charAt(y>>>6*(3-g)&63));var w=u.charAt(64);if(w)for(;d.length%4;)d.push(w);return d.join("")},parse:function(a){var l=a.length,c=this._map,u=this._reverseMap;if(!u){u=this._reverseMap=[];for(var d=0;d<c.length;d++)u[c.charCodeAt(d)]=d}var p=c.charAt(64);if(p){var f=a.indexOf(p);f!==-1&&(l=f)}return o(a,l,u)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function o(a,l,c){for(var u=[],d=0,p=0;p<l;p++)if(p%4){var f=c[a.charCodeAt(p-1)]<<p%4*2,h=c[a.charCodeAt(p)]>>>6-p%4*2,m=f|h;u[d>>>2]|=m<<24-d%4*8,d++}return n.create(u,d)}}(),t.enc.Base64})});var Ch=E(Dn=>{"use strict";Object.defineProperty(Dn,"__esModule",{value:!0});Dn.getUint64=Dn.getInt64=Dn.setInt64=Dn.setUint64=Dn.UINT32_MAX=void 0;Dn.UINT32_MAX=4294967295;function ZPe(t,e,r){let n=r/4294967296,s=r;t.setUint32(e,n),t.setUint32(e+4,s)}Dn.setUint64=ZPe;function exe(t,e,r){let n=Math.floor(r/4294967296),s=r;t.setUint32(e,n),t.setUint32(e+4,s)}Dn.setInt64=exe;function txe(t,e){let r=t.getInt32(e),n=t.getUint32(e+4);return r*4294967296+n}Dn.getInt64=txe;function rxe(t,e){let r=t.getUint32(e),n=t.getUint32(e+4);return r*4294967296+n}Dn.getUint64=rxe});var h_=E(yr=>{"use strict";var _P,vP,wP;Object.defineProperty(yr,"__esModule",{value:!0});yr.utf8DecodeTD=yr.TEXT_DECODER_THRESHOLD=yr.utf8DecodeJs=yr.utf8EncodeTE=yr.TEXT_ENCODER_THRESHOLD=yr.utf8EncodeJs=yr.utf8Count=void 0;var U5=Ch(),d_=(typeof process>"u"||((_P=process==null?void 0:process.env)===null||_P===void 0?void 0:_P.TEXT_ENCODING)!=="never")&&typeof TextEncoder<"u"&&typeof TextDecoder<"u";function nxe(t){let e=t.length,r=0,n=0;for(;n<e;){let s=t.charCodeAt(n++);if(s&4294967168)if(!(s&4294965248))r+=2;else{if(s>=55296&&s<=56319&&n<e){let i=t.charCodeAt(n);(i&64512)===56320&&(++n,s=((s&1023)<<10)+(i&1023)+65536)}s&4294901760?r+=4:r+=3}else{r++;continue}}return r}yr.utf8Count=nxe;function sxe(t,e,r){let n=t.length,s=r,i=0;for(;i<n;){let o=t.charCodeAt(i++);if(o&4294967168)if(!(o&4294965248))e[s++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&i<n){let a=t.charCodeAt(i);(a&64512)===56320&&(++i,o=((o&1023)<<10)+(a&1023)+65536)}o&4294901760?(e[s++]=o>>18&7|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128):(e[s++]=o>>12&15|224,e[s++]=o>>6&63|128)}else{e[s++]=o;continue}e[s++]=o&63|128}}yr.utf8EncodeJs=sxe;var Ih=d_?new TextEncoder:void 0;yr.TEXT_ENCODER_THRESHOLD=d_?typeof process<"u"&&((vP=process==null?void 0:process.env)===null||vP===void 0?void 0:vP.TEXT_ENCODING)!=="force"?200:0:U5.UINT32_MAX;function ixe(t,e,r){e.set(Ih.encode(t),r)}function oxe(t,e,r){Ih.encodeInto(t,e.subarray(r))}yr.utf8EncodeTE=Ih?.encodeInto?oxe:ixe;var axe=4096;function lxe(t,e,r){let n=e,s=n+r,i=[],o="";for(;n<s;){let a=t[n++];if(!(a&128))i.push(a);else if((a&224)===192){let l=t[n++]&63;i.push((a&31)<<6|l)}else if((a&240)===224){let l=t[n++]&63,c=t[n++]&63;i.push((a&31)<<12|l<<6|c)}else if((a&248)===240){let l=t[n++]&63,c=t[n++]&63,u=t[n++]&63,d=(a&7)<<18|l<<12|c<<6|u;d>65535&&(d-=65536,i.push(d>>>10&1023|55296),d=56320|d&1023),i.push(d)}else i.push(a);i.length>=axe&&(o+=String.fromCharCode(...i),i.length=0)}return i.length>0&&(o+=String.fromCharCode(...i)),o}yr.utf8DecodeJs=lxe;var cxe=d_?new TextDecoder:null;yr.TEXT_DECODER_THRESHOLD=d_?typeof process<"u"&&((wP=process==null?void 0:process.env)===null||wP===void 0?void 0:wP.TEXT_DECODER)!=="force"?200:0:U5.UINT32_MAX;function uxe(t,e,r){let n=t.subarray(e,e+r);return cxe.decode(n)}yr.utf8DecodeTD=uxe});var EP=E(p_=>{"use strict";Object.defineProperty(p_,"__esModule",{value:!0});p_.ExtData=void 0;var bP=class{constructor(e,r){this.type=e,this.data=r}};p_.ExtData=bP});var g_=E(m_=>{"use strict";Object.defineProperty(m_,"__esModule",{value:!0});m_.DecodeError=void 0;var eu=class extends Error{constructor(e){super(e);let r=Object.create(eu.prototype);Object.setPrototypeOf(this,r),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:eu.name})}};m_.DecodeError=eu});var SP=E(er=>{"use strict";Object.defineProperty(er,"__esModule",{value:!0});er.timestampExtension=er.decodeTimestampExtension=er.decodeTimestampToTimeSpec=er.encodeTimestampExtension=er.encodeDateToTimeSpec=er.encodeTimeSpecToTimestamp=er.EXT_TIMESTAMP=void 0;var fxe=g_(),B5=Ch();er.EXT_TIMESTAMP=-1;var dxe=4294967296-1,hxe=17179869184-1;function z5({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=hxe)if(e===0&&t<=dxe){let r=new Uint8Array(4);return new DataView(r.buffer).setUint32(0,t),r}else{let r=t/4294967296,n=t&4294967295,s=new Uint8Array(8),i=new DataView(s.buffer);return i.setUint32(0,e<<2|r&3),i.setUint32(4,n),s}else{let r=new Uint8Array(12),n=new DataView(r.buffer);return n.setUint32(0,e),(0,B5.setInt64)(n,4,t),r}}er.encodeTimeSpecToTimestamp=z5;function V5(t){let e=t.getTime(),r=Math.floor(e/1e3),n=(e-r*1e3)*1e6,s=Math.floor(n/1e9);return{sec:r+s,nsec:n-s*1e9}}er.encodeDateToTimeSpec=V5;function H5(t){if(t instanceof Date){let e=V5(t);return z5(e)}else return null}er.encodeTimestampExtension=H5;function G5(t){let e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{let r=e.getUint32(0),n=e.getUint32(4),s=(r&3)*4294967296+n,i=r>>>2;return{sec:s,nsec:i}}case 12:{let r=(0,B5.getInt64)(e,4),n=e.getUint32(0);return{sec:r,nsec:n}}default:throw new fxe.DecodeError(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}er.decodeTimestampToTimeSpec=G5;function W5(t){let e=G5(t);return new Date(e.sec*1e3+e.nsec/1e6)}er.decodeTimestampExtension=W5;er.timestampExtension={type:er.EXT_TIMESTAMP,encode:H5,decode:W5}});var v_=E(__=>{"use strict";Object.defineProperty(__,"__esModule",{value:!0});__.ExtensionCodec=void 0;var y_=EP(),pxe=SP(),Ah=class{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(pxe.timestampExtension)}register({type:e,encode:r,decode:n}){if(e>=0)this.encoders[e]=r,this.decoders[e]=n;else{let s=1+e;this.builtInEncoders[s]=r,this.builtInDecoders[s]=n}}tryToEncode(e,r){for(let n=0;n<this.builtInEncoders.length;n++){let s=this.builtInEncoders[n];if(s!=null){let i=s(e,r);if(i!=null){let o=-1-n;return new y_.ExtData(o,i)}}}for(let n=0;n<this.encoders.length;n++){let s=this.encoders[n];if(s!=null){let i=s(e,r);if(i!=null){let o=n;return new y_.ExtData(o,i)}}}return e instanceof y_.ExtData?e:null}decode(e,r,n){let s=r<0?this.builtInDecoders[-1-r]:this.decoders[r];return s?s(e,r,n):new y_.ExtData(r,e)}};__.ExtensionCodec=Ah;Ah.defaultCodec=new Ah});var TP=E(tu=>{"use strict";Object.defineProperty(tu,"__esModule",{value:!0});tu.createDataView=tu.ensureUint8Array=void 0;function K5(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer?new Uint8Array(t):Uint8Array.from(t)}tu.ensureUint8Array=K5;function mxe(t){if(t instanceof ArrayBuffer)return new DataView(t);let e=K5(t);return new DataView(e.buffer,e.byteOffset,e.byteLength)}tu.createDataView=mxe});var $P=E(Hs=>{"use strict";Object.defineProperty(Hs,"__esModule",{value:!0});Hs.Encoder=Hs.DEFAULT_INITIAL_BUFFER_SIZE=Hs.DEFAULT_MAX_DEPTH=void 0;var kh=h_(),gxe=v_(),J5=Ch(),yxe=TP();Hs.DEFAULT_MAX_DEPTH=100;Hs.DEFAULT_INITIAL_BUFFER_SIZE=2048;var RP=class{constructor(e=gxe.ExtensionCodec.defaultCodec,r=void 0,n=Hs.DEFAULT_MAX_DEPTH,s=Hs.DEFAULT_INITIAL_BUFFER_SIZE,i=!1,o=!1,a=!1,l=!1){this.extensionCodec=e,this.context=r,this.maxDepth=n,this.initialBufferSize=s,this.sortKeys=i,this.forceFloat32=o,this.ignoreUndefined=a,this.forceIntegerToFloat=l,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}reinitializeState(){this.pos=0}encodeSharedRef(e){return this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}encode(e){return this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}doEncode(e,r){if(r>this.maxDepth)throw new Error(`Too deep objects in depth ${r}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.encodeObject(e,r)}ensureBufferSizeToWrite(e){let r=this.pos+e;this.view.byteLength<r&&this.resizeBuffer(r*2)}resizeBuffer(e){let r=new ArrayBuffer(e),n=new Uint8Array(r),s=new DataView(r);n.set(this.bytes),this.view=s,this.bytes=n}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){Number.isSafeInteger(e)&&!this.forceIntegerToFloat?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):(this.writeU8(211),this.writeI64(e)):this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){if(e.length>kh.TEXT_ENCODER_THRESHOLD){let s=(0,kh.utf8Count)(e);this.ensureBufferSizeToWrite(5+s),this.writeStringHeader(s),(0,kh.utf8EncodeTE)(e,this.bytes,this.pos),this.pos+=s}else{let s=(0,kh.utf8Count)(e);this.ensureBufferSizeToWrite(5+s),this.writeStringHeader(s),(0,kh.utf8EncodeJs)(e,this.bytes,this.pos),this.pos+=s}}encodeObject(e,r){let n=this.extensionCodec.tryToEncode(e,this.context);if(n!=null)this.encodeExtension(n);else if(Array.isArray(e))this.encodeArray(e,r);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,r);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){let r=e.byteLength;if(r<256)this.writeU8(196),this.writeU8(r);else if(r<65536)this.writeU8(197),this.writeU16(r);else if(r<4294967296)this.writeU8(198),this.writeU32(r);else throw new Error(`Too large binary: ${r}`);let n=(0,yxe.ensureUint8Array)(e);this.writeU8a(n)}encodeArray(e,r){let n=e.length;if(n<16)this.writeU8(144+n);else if(n<65536)this.writeU8(220),this.writeU16(n);else if(n<4294967296)this.writeU8(221),this.writeU32(n);else throw new Error(`Too large array: ${n}`);for(let s of e)this.doEncode(s,r+1)}countWithoutUndefined(e,r){let n=0;for(let s of r)e[s]!==void 0&&n++;return n}encodeMap(e,r){let n=Object.keys(e);this.sortKeys&&n.sort();let s=this.ignoreUndefined?this.countWithoutUndefined(e,n):n.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else if(s<4294967296)this.writeU8(223),this.writeU32(s);else throw new Error(`Too large map object: ${s}`);for(let i of n){let o=e[i];this.ignoreUndefined&&o===void 0||(this.encodeString(i),this.doEncode(o,r+1))}}encodeExtension(e){let r=e.data.length;if(r===1)this.writeU8(212);else if(r===2)this.writeU8(213);else if(r===4)this.writeU8(214);else if(r===8)this.writeU8(215);else if(r===16)this.writeU8(216);else if(r<256)this.writeU8(199),this.writeU8(r);else if(r<65536)this.writeU8(200),this.writeU16(r);else if(r<4294967296)this.writeU8(201),this.writeU32(r);else throw new Error(`Too large extension object: ${r}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){let r=e.length;this.ensureBufferSizeToWrite(r),this.bytes.set(e,this.pos),this.pos+=r}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),(0,J5.setUint64)(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),(0,J5.setInt64)(this.view,this.pos,e),this.pos+=8}};Hs.Encoder=RP});var Y5=E(w_=>{"use strict";Object.defineProperty(w_,"__esModule",{value:!0});w_.encode=void 0;var _xe=$P(),vxe={};function wxe(t,e=vxe){return new _xe.Encoder(e.extensionCodec,e.context,e.maxDepth,e.initialBufferSize,e.sortKeys,e.forceFloat32,e.ignoreUndefined,e.forceIntegerToFloat).encodeSharedRef(t)}w_.encode=wxe});var X5=E(b_=>{"use strict";Object.defineProperty(b_,"__esModule",{value:!0});b_.prettyByte=void 0;function bxe(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}b_.prettyByte=bxe});var Q5=E(E_=>{"use strict";Object.defineProperty(E_,"__esModule",{value:!0});E_.CachedKeyDecoder=void 0;var Exe=h_(),Sxe=16,Txe=16,OP=class{constructor(e=Sxe,r=Txe){this.maxKeyLength=e,this.maxLengthPerKey=r,this.hit=0,this.miss=0,this.caches=[];for(let n=0;n<this.maxKeyLength;n++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,r,n){let s=this.caches[n-1];e:for(let i of s){let o=i.bytes;for(let a=0;a<n;a++)if(o[a]!==e[r+a])continue e;return i.str}return null}store(e,r){let n=this.caches[e.length-1],s={bytes:e,str:r};n.length>=this.maxLengthPerKey?n[Math.random()*n.length|0]=s:n.push(s)}decode(e,r,n){let s=this.find(e,r,n);if(s!=null)return this.hit++,s;this.miss++;let i=(0,Exe.utf8DecodeJs)(e,r,n),o=Uint8Array.prototype.slice.call(e,r,r+n);return this.store(o,i),i}};E_.CachedKeyDecoder=OP});var S_=E(Pi=>{"use strict";Object.defineProperty(Pi,"__esModule",{value:!0});Pi.Decoder=Pi.DataViewIndexOutOfBoundsError=void 0;var PP=X5(),Rxe=v_(),Ka=Ch(),xP=h_(),NP=TP(),$xe=Q5(),Oi=g_(),Oxe=t=>{let e=typeof t;return e==="string"||e==="number"},Dh=-1,IP=new DataView(new ArrayBuffer(0)),Pxe=new Uint8Array(IP.buffer);Pi.DataViewIndexOutOfBoundsError=(()=>{try{IP.getInt8(0)}catch(t){return t.constructor}throw new Error("never reached")})();var Z5=new Pi.DataViewIndexOutOfBoundsError("Insufficient data"),xxe=new $xe.CachedKeyDecoder,CP=class{constructor(e=Rxe.ExtensionCodec.defaultCodec,r=void 0,n=Ka.UINT32_MAX,s=Ka.UINT32_MAX,i=Ka.UINT32_MAX,o=Ka.UINT32_MAX,a=Ka.UINT32_MAX,l=xxe){this.extensionCodec=e,this.context=r,this.maxStrLength=n,this.maxBinLength=s,this.maxArrayLength=i,this.maxMapLength=o,this.maxExtLength=a,this.keyDecoder=l,this.totalPos=0,this.pos=0,this.view=IP,this.bytes=Pxe,this.headByte=Dh,this.stack=[]}reinitializeState(){this.totalPos=0,this.headByte=Dh,this.stack.length=0}setBuffer(e){this.bytes=(0,NP.ensureUint8Array)(e),this.view=(0,NP.createDataView)(this.bytes),this.pos=0}appendBuffer(e){if(this.headByte===Dh&&!this.hasRemaining(1))this.setBuffer(e);else{let r=this.bytes.subarray(this.pos),n=(0,NP.ensureUint8Array)(e),s=new Uint8Array(r.length+n.length);s.set(r),s.set(n,r.length),this.setBuffer(s)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){let{view:r,pos:n}=this;return new RangeError(`Extra ${r.byteLength-n} of ${r.byteLength} byte(s) found at buffer[${e}]`)}decode(e){this.reinitializeState(),this.setBuffer(e);let r=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return r}*decodeMulti(e){for(this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}async decodeAsync(e){let r=!1,n;for await(let a of e){if(r)throw this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{n=this.doDecodeSync(),r=!0}catch(l){if(!(l instanceof Pi.DataViewIndexOutOfBoundsError))throw l}this.totalPos+=this.pos}if(r){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return n}let{headByte:s,pos:i,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${(0,PP.prettyByte)(s)} at ${o} (${i} in the current buffer)`)}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,r){let n=r,s=-1;for await(let i of e){if(r&&s===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(i),n&&(s=this.readArraySize(),n=!1,this.complete());try{for(;yield this.doDecodeSync(),--s!==0;);}catch(o){if(!(o instanceof Pi.DataViewIndexOutOfBoundsError))throw o}this.totalPos+=this.pos}}doDecodeSync(){e:for(;;){let e=this.readHeadByte(),r;if(e>=224)r=e-256;else if(e<192)if(e<128)r=e;else if(e<144){let s=e-128;if(s!==0){this.pushMapState(s),this.complete();continue e}else r={}}else if(e<160){let s=e-144;if(s!==0){this.pushArrayState(s),this.complete();continue e}else r=[]}else{let s=e-160;r=this.decodeUtf8String(s,0)}else if(e===192)r=null;else if(e===194)r=!1;else if(e===195)r=!0;else if(e===202)r=this.readF32();else if(e===203)r=this.readF64();else if(e===204)r=this.readU8();else if(e===205)r=this.readU16();else if(e===206)r=this.readU32();else if(e===207)r=this.readU64();else if(e===208)r=this.readI8();else if(e===209)r=this.readI16();else if(e===210)r=this.readI32();else if(e===211)r=this.readI64();else if(e===217){let s=this.lookU8();r=this.decodeUtf8String(s,1)}else if(e===218){let s=this.lookU16();r=this.decodeUtf8String(s,2)}else if(e===219){let s=this.lookU32();r=this.decodeUtf8String(s,4)}else if(e===220){let s=this.readU16();if(s!==0){this.pushArrayState(s),this.complete();continue e}else r=[]}else if(e===221){let s=this.readU32();if(s!==0){this.pushArrayState(s),this.complete();continue e}else r=[]}else if(e===222){let s=this.readU16();if(s!==0){this.pushMapState(s),this.complete();continue e}else r={}}else if(e===223){let s=this.readU32();if(s!==0){this.pushMapState(s),this.complete();continue e}else r={}}else if(e===196){let s=this.lookU8();r=this.decodeBinary(s,1)}else if(e===197){let s=this.lookU16();r=this.decodeBinary(s,2)}else if(e===198){let s=this.lookU32();r=this.decodeBinary(s,4)}else if(e===212)r=this.decodeExtension(1,0);else if(e===213)r=this.decodeExtension(2,0);else if(e===214)r=this.decodeExtension(4,0);else if(e===215)r=this.decodeExtension(8,0);else if(e===216)r=this.decodeExtension(16,0);else if(e===199){let s=this.lookU8();r=this.decodeExtension(s,1)}else if(e===200){let s=this.lookU16();r=this.decodeExtension(s,2)}else if(e===201){let s=this.lookU32();r=this.decodeExtension(s,4)}else throw new Oi.DecodeError(`Unrecognized type byte: ${(0,PP.prettyByte)(e)}`);this.complete();let n=this.stack;for(;n.length>0;){let s=n[n.length-1];if(s.type===0)if(s.array[s.position]=r,s.position++,s.position===s.size)n.pop(),r=s.array;else continue e;else if(s.type===1){if(!Oxe(r))throw new Oi.DecodeError("The type of key must be string or number but "+typeof r);if(r==="__proto__")throw new Oi.DecodeError("The key __proto__ is not allowed");s.key=r,s.type=2;continue e}else if(s.map[s.key]=r,s.readCount++,s.readCount===s.size)n.pop(),r=s.map;else{s.key=null,s.type=1;continue e}}return r}}readHeadByte(){return this.headByte===Dh&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=Dh}readArraySize(){let e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new Oi.DecodeError(`Unrecognized array type byte: ${(0,PP.prettyByte)(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new Oi.DecodeError(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.push({type:1,size:e,key:null,readCount:0,map:{}})}pushArrayState(e){if(e>this.maxArrayLength)throw new Oi.DecodeError(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.push({type:0,size:e,array:new Array(e),position:0})}decodeUtf8String(e,r){var n;if(e>this.maxStrLength)throw new Oi.DecodeError(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+r+e)throw Z5;let s=this.pos+r,i;return this.stateIsMapKey()&&(!((n=this.keyDecoder)===null||n===void 0)&&n.canBeCached(e))?i=this.keyDecoder.decode(this.bytes,s,e):e>xP.TEXT_DECODER_THRESHOLD?i=(0,xP.utf8DecodeTD)(this.bytes,s,e):i=(0,xP.utf8DecodeJs)(this.bytes,s,e),this.pos+=r+e,i}stateIsMapKey(){return this.stack.length>0?this.stack[this.stack.length-1].type===1:!1}decodeBinary(e,r){if(e>this.maxBinLength)throw new Oi.DecodeError(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+r))throw Z5;let n=this.pos+r,s=this.bytes.subarray(n,n+e);return this.pos+=r+e,s}decodeExtension(e,r){if(e>this.maxExtLength)throw new Oi.DecodeError(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);let n=this.view.getInt8(this.pos+r),s=this.decodeBinary(e,r+1);return this.extensionCodec.decode(s,n,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){let e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){let e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){let e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){let e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){let e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){let e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){let e=(0,Ka.getUint64)(this.view,this.pos);return this.pos+=8,e}readI64(){let e=(0,Ka.getInt64)(this.view,this.pos);return this.pos+=8,e}readF32(){let e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){let e=this.view.getFloat64(this.pos);return this.pos+=8,e}};Pi.Decoder=CP});var AP=E(Gs=>{"use strict";Object.defineProperty(Gs,"__esModule",{value:!0});Gs.decodeMulti=Gs.decode=Gs.defaultDecodeOptions=void 0;var e8=S_();Gs.defaultDecodeOptions={};function Nxe(t,e=Gs.defaultDecodeOptions){return new e8.Decoder(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength).decode(t)}Gs.decode=Nxe;function Cxe(t,e=Gs.defaultDecodeOptions){return new e8.Decoder(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength).decodeMulti(t)}Gs.decodeMulti=Cxe});var n8=E($o=>{"use strict";Object.defineProperty($o,"__esModule",{value:!0});$o.ensureAsyncIterable=$o.asyncIterableFromStream=$o.isAsyncIterable=void 0;function t8(t){return t[Symbol.asyncIterator]!=null}$o.isAsyncIterable=t8;function Ixe(t){if(t==null)throw new Error("Assertion Failure: value must not be null nor undefined")}async function*r8(t){let e=t.getReader();try{for(;;){let{done:r,value:n}=await e.read();if(r)return;Ixe(n),yield n}}finally{e.releaseLock()}}$o.asyncIterableFromStream=r8;function Axe(t){return t8(t)?t:r8(t)}$o.ensureAsyncIterable=Axe});var i8=E(Ws=>{"use strict";Object.defineProperty(Ws,"__esModule",{value:!0});Ws.decodeStream=Ws.decodeMultiStream=Ws.decodeArrayStream=Ws.decodeAsync=void 0;var kP=S_(),DP=n8(),T_=AP();async function kxe(t,e=T_.defaultDecodeOptions){let r=(0,DP.ensureAsyncIterable)(t);return new kP.Decoder(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength).decodeAsync(r)}Ws.decodeAsync=kxe;function Dxe(t,e=T_.defaultDecodeOptions){let r=(0,DP.ensureAsyncIterable)(t);return new kP.Decoder(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength).decodeArrayStream(r)}Ws.decodeArrayStream=Dxe;function s8(t,e=T_.defaultDecodeOptions){let r=(0,DP.ensureAsyncIterable)(t);return new kP.Decoder(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength).decodeStream(r)}Ws.decodeMultiStream=s8;function Mxe(t,e=T_.defaultDecodeOptions){return s8(t,e)}Ws.decodeStream=Mxe});var l8=E(ge=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0});ge.decodeTimestampExtension=ge.encodeTimestampExtension=ge.decodeTimestampToTimeSpec=ge.encodeTimeSpecToTimestamp=ge.encodeDateToTimeSpec=ge.EXT_TIMESTAMP=ge.ExtData=ge.ExtensionCodec=ge.Encoder=ge.DataViewIndexOutOfBoundsError=ge.DecodeError=ge.Decoder=ge.decodeStream=ge.decodeMultiStream=ge.decodeArrayStream=ge.decodeAsync=ge.decodeMulti=ge.decode=ge.encode=void 0;var jxe=Y5();Object.defineProperty(ge,"encode",{enumerable:!0,get:function(){return jxe.encode}});var o8=AP();Object.defineProperty(ge,"decode",{enumerable:!0,get:function(){return o8.decode}});Object.defineProperty(ge,"decodeMulti",{enumerable:!0,get:function(){return o8.decodeMulti}});var R_=i8();Object.defineProperty(ge,"decodeAsync",{enumerable:!0,get:function(){return R_.decodeAsync}});Object.defineProperty(ge,"decodeArrayStream",{enumerable:!0,get:function(){return R_.decodeArrayStream}});Object.defineProperty(ge,"decodeMultiStream",{enumerable:!0,get:function(){return R_.decodeMultiStream}});Object.defineProperty(ge,"decodeStream",{enumerable:!0,get:function(){return R_.decodeStream}});var a8=S_();Object.defineProperty(ge,"Decoder",{enumerable:!0,get:function(){return a8.Decoder}});Object.defineProperty(ge,"DataViewIndexOutOfBoundsError",{enumerable:!0,get:function(){return a8.DataViewIndexOutOfBoundsError}});var qxe=g_();Object.defineProperty(ge,"DecodeError",{enumerable:!0,get:function(){return qxe.DecodeError}});var Lxe=$P();Object.defineProperty(ge,"Encoder",{enumerable:!0,get:function(){return Lxe.Encoder}});var Fxe=v_();Object.defineProperty(ge,"ExtensionCodec",{enumerable:!0,get:function(){return Fxe.ExtensionCodec}});var Uxe=EP();Object.defineProperty(ge,"ExtData",{enumerable:!0,get:function(){return Uxe.ExtData}});var ru=SP();Object.defineProperty(ge,"EXT_TIMESTAMP",{enumerable:!0,get:function(){return ru.EXT_TIMESTAMP}});Object.defineProperty(ge,"encodeDateToTimeSpec",{enumerable:!0,get:function(){return ru.encodeDateToTimeSpec}});Object.defineProperty(ge,"encodeTimeSpecToTimestamp",{enumerable:!0,get:function(){return ru.encodeTimeSpecToTimestamp}});Object.defineProperty(ge,"decodeTimestampToTimeSpec",{enumerable:!0,get:function(){return ru.decodeTimestampToTimeSpec}});Object.defineProperty(ge,"encodeTimestampExtension",{enumerable:!0,get:function(){return ru.encodeTimestampExtension}});Object.defineProperty(ge,"decodeTimestampExtension",{enumerable:!0,get:function(){return ru.decodeTimestampExtension}})});var zxe={};T8(zxe,{default:()=>O_});module.exports=R8(zxe);var _r=require("obsidian");var Te=require("obsidian");var Lc=require("obsidian"),KG=ln(dH()),JG=ln(WG()),YG=ln(require("path")),Fc=class{app;server=null;port;isRunning=!1;constructor(e,r){this.app=e,this.port=r}async start(){if(this.isRunning)return;let e;if(this.app.vault.adapter instanceof Lc.FileSystemAdapter)e=this.app.vault.adapter.getBasePath();else{new Lc.Notice("Fastify Server: Cannot determine file system path.");return}let r=YG.default.join(e,".obsidian/plugins/slides-studio/slides_studio");this.server=(0,KG.default)(),this.server.register(JG.default,{root:[r,e],prefix:"/"}),this.server.get("/",async(n,s)=>s.sendFile("index.html"));try{await this.server.listen({port:this.port,host:"127.0.0.1"}),this.isRunning=!0,console.log(`Slides Studio Server running at http://127.0.0.1:${this.port}`),new Lc.Notice(`Slides Studio Server started on port ${this.port}`)}catch(n){this.server.log.error(n),console.error("Failed to start Fastify server",n),new Lc.Notice(`Failed to start Server on port ${this.port}. Check console.`),this.isRunning=!1}}async stop(){this.server&&(await this.server.close(),this.server=null,this.isRunning=!1,console.log("Slides Studio Server stopped"))}async restart(e){await this.stop(),this.port=e,await this.start()}getUrl(){return`http://127.0.0.1:${this.port}`}};var I0=class extends Te.PluginSettingTab{plugin;constructor(e,r){super(e,r),this.plugin=r}display(){let{containerEl:e}=this;e.empty(),new Te.Setting(e).setName("Slides Studio Server").setHeading(),new Te.Setting(e).setName("Enable Internal Server").setDesc("Start a local Fastify server to host the studio view.").addToggle(n=>n.setValue(this.plugin.settings.serverEnabled).onChange(async s=>{if(this.plugin.settings.serverEnabled=s,await this.plugin.saveSettings(),s){let i=parseInt(this.plugin.settings.serverPort)||7e3;this.plugin.serverManager||(this.plugin.serverManager=new Fc(this.plugin.app,i)),this.plugin.serverManager.start()}else this.plugin.serverManager&&(this.plugin.serverManager.stop(),this.plugin.serverManager=null);this.display()})),this.plugin.settings.serverEnabled&&new Te.Setting(e).setName("Server Port").setDesc("Port for the local Fastify server serving 'slideStudioView.html'").addText(n=>{n.setValue(this.plugin.settings.serverPort).onChange(async s=>{this.plugin.settings.serverPort=s,await this.plugin.saveSettings()})}).addButton(n=>n.setButtonText("Restart Server").onClick(()=>{let s=parseInt(this.plugin.settings.serverPort);this.plugin.serverManager&&this.plugin.serverManager.restart(s)})),new Te.Setting(e).setName("OBS WebSocket Server").setHeading(),new Te.Setting(e).setName("OBS WebSocket Server IP").setDesc("Enter the IP address or 'localhost'").addText(n=>{n.setValue(this.plugin.settings.websocketIP_Text).onChange(s=>{this.plugin.settings.websocketIP_Text=s,this.plugin.saveSettings()})}),new Te.Setting(e).setName("OBS WebSocket Server Port").addText(n=>{n.setValue(this.plugin.settings.websocketPort_Text).onChange(s=>{this.plugin.settings.websocketPort_Text=s,this.plugin.saveSettings()})}),new Te.Setting(e).setName("OBS WebSocket Server Password").addText(n=>{n.inputEl.type="password",n.setValue(this.plugin.settings.websocketPW_Text).onChange(s=>{this.plugin.settings.websocketPW_Text=s,this.plugin.saveSettings()})}),new Te.Setting(e).setName("OBS Launch Parameters").setHeading().setDesc("Open OBS with these options."),Te.Platform.isMacOS&&new Te.Setting(e).setName("Name").setDesc("Enter 'OBS' or a custom name").addText(n=>{n.setValue(this.plugin.settings.obsAppName_Text).onChange(s=>{this.plugin.settings.obsAppName_Text=s,this.plugin.saveSettings()})}),Te.Platform.isWin&&(new Te.Setting(e).setName("Name").setDesc("Enter 'obs64.exe' or a custom name").addText(n=>{n.setValue(this.plugin.settings.obsAppName_Text).onChange(s=>{this.plugin.settings.obsAppName_Text=s,this.plugin.saveSettings()})}),new Te.Setting(e).setName("Path to OBS app").addText(n=>{n.setValue(this.plugin.settings.obsAppPath_Text).onChange(s=>{this.plugin.settings.obsAppPath_Text=s,this.plugin.saveSettings()})})),new Te.Setting(e).setName("Collection").addText(n=>{n.setValue(this.plugin.settings.obsCollection_Text).onChange(s=>{this.plugin.settings.obsCollection_Text=s,this.plugin.saveSettings()})});let r=this.app.vault.adapter.basePath;if(r+="/.obsidian/plugins/slides-studio/obs_collections/SlidesStudio.json",r=Te.Platform.isWin?r.replace(/\//g,"\\"):r,new Te.Setting(e).setName("Slide Studio Collection").setDesc("Copy the path to the Slide Studio Collection, and Import the collection in OBS").addText(n=>{n.setValue(r).setDisabled(!0)}),new Te.Setting(e).setName("OBS Browser Source Debug Port").setDesc("Enter a Port for the Remote Debugger, or leave blank to skip this option").addText(n=>{n.setValue(this.plugin.settings.obsDebugPort_Text).onChange(s=>{this.plugin.settings.obsDebugPort_Text=s,this.plugin.saveSettings()})}),new Te.Setting(e).setName("Open OBS").addButton(n=>{n.setButtonText("Launch").onClick(()=>{this.app.commands.executeCommandById("slides-studio:open-obs")})}),new Te.Setting(e).setName("Connect to OBS WebSocket Server").addButton(n=>{let s=this.plugin.isObsConnected;n.setButtonText(s?"Connected":"Connect").onClick(()=>{this.app.commands.executeCommandById("slides-studio:connect-to-obs-websocket"),setTimeout(()=>this.display(),1e3)}),s&&(n.setCta(),n.buttonEl.style.backgroundColor="green",n.buttonEl.style.borderColor="green",n.buttonEl.style.color="white")}),this.plugin.isObsConnected)e.createEl("h2",{text:"OSC Devices"}),e.createEl("p",{text:"Add as many OSC devices as needed."}),this.plugin.settings.oscDevices.forEach((n,s)=>{let i=e.createDiv();i.style.border="1px solid var(--background-modifier-border)",i.style.padding="10px",i.style.marginBottom="10px",i.style.borderRadius="5px",new Te.Setting(i).setName(`Device ${s+1}`).setHeading(),new Te.Setting(i).setName("OSC Device Name").setDesc("Unique device name (used in OBS tags)").addText(o=>o.setValue(n.name).onChange(async a=>{this.plugin.settings.oscDevices[s].name=a,await this.plugin.saveSettings()})).addButton(o=>o.setButtonText("Connect This Device").onClick(()=>{this.plugin.oscManager?this.plugin.oscManager.connectDevice(this.plugin.settings.oscDevices[s]):new Te.Notice("Plugin not fully loaded")})),new Te.Setting(i).setName("OSC IP address").setDesc("Enter the IP address or 'localhost'").addText(o=>o.setValue(n.ip).onChange(async a=>{this.plugin.settings.oscDevices[s].ip=a,await this.plugin.saveSettings()})),new Te.Setting(i).setName("OSC Incoming Message Port").addText(o=>o.setValue(n.inPort).onChange(async a=>{this.plugin.settings.oscDevices[s].inPort=a,await this.plugin.saveSettings()})),new Te.Setting(i).setName("OSC Outgoing Message Port").addText(o=>o.setValue(n.outPort).onChange(async a=>{this.plugin.settings.oscDevices[s].outPort=a,await this.plugin.saveSettings()})),new Te.Setting(i).addButton(o=>o.setButtonText("Remove Device").setWarning().onClick(async()=>{this.plugin.oscManager&&this.plugin.oscManager.disconnectDevice(n.name),this.plugin.settings.oscDevices.splice(s,1),await this.plugin.saveSettings(),this.display()}))}),new Te.Setting(e).setName("Add New OSC Device").addButton(n=>n.setButtonText("Add Device").setCta().onClick(async()=>{this.plugin.settings.oscDevices.push({name:"NewDevice",ip:"127.0.0.1",inPort:"8000",outPort:"9000"}),await this.plugin.saveSettings(),this.display()}));else{let n=e.createDiv();n.style.padding="20px",n.style.border="1px dashed var(--text-muted)",n.style.textAlign="center",n.style.color="var(--text-muted)",n.createSpan({text:"Please connect to the OBS WebSocket Server (above) to configure OSC/MIDI devices."})}if(this.plugin.isObsConnected&&(e.createEl("h2",{text:"MIDI Devices"}),e.createEl("p",{text:"Add MIDI inputs and outputs."}),this.plugin.midiManager)){let n=this.plugin.midiManager.getInputs(),s=this.plugin.midiManager.getOutputs();this.plugin.settings.midiDevices.forEach((i,o)=>{let a=e.createDiv();a.style.border="1px solid var(--background-modifier-border)",a.style.padding="10px",a.style.marginBottom="10px",a.style.borderRadius="5px",new Te.Setting(a).setName(`MIDI Device ${o+1}`).setHeading(),new Te.Setting(a).setName("Virtual Name").setDesc("Alias used for OBS tags").addText(l=>l.setValue(i.name).onChange(async c=>{this.plugin.settings.midiDevices[o].name=c,await this.plugin.saveSettings()})).addButton(l=>l.setButtonText("Connect").onClick(()=>{this.plugin.midiManager.connectDevice(this.plugin.settings.midiDevices[o])})),new Te.Setting(a).setName("Input Device").setDesc("Select the hardware source").addDropdown(l=>{l.addOption("","Select Input"),n.forEach(c=>l.addOption(c,c)),l.setValue(i.inputName),l.onChange(async c=>{this.plugin.settings.midiDevices[o].inputName=c,await this.plugin.saveSettings()})}),new Te.Setting(a).setName("Output Device").setDesc("Select the hardware destination (for sending from OBS)").addDropdown(l=>{l.addOption("","Select Output"),s.forEach(c=>l.addOption(c,c)),l.setValue(i.outputName),l.onChange(async c=>{this.plugin.settings.midiDevices[o].outputName=c,await this.plugin.saveSettings()})}),new Te.Setting(a).addButton(l=>l.setButtonText("Remove MIDI Device").setWarning().onClick(async()=>{this.plugin.midiManager&&this.plugin.midiManager.disconnectDevice(i),this.plugin.settings.midiDevices.splice(o,1),await this.plugin.saveSettings(),this.display()}))}),new Te.Setting(e).setName("Add New MIDI Device").addButton(i=>i.setButtonText("Add Device").setCta().onClick(async()=>{this.plugin.settings.midiDevices.push({name:"MyMidiDevice",inputName:"",outputName:""}),await this.plugin.saveSettings(),this.display()}))}}};var Pt=require("obsidian"),_h="slides-tag-view",A0=class extends Pt.ItemView{constructor(e){super(e)}getViewType(){return _h}getDisplayText(){return"Slide tags"}getIcon(){return"aperture"}insertTag(e){let r=this.app.workspace.getMostRecentLeaf(),n=this.app.workspace.getLeafById(r?.id);n?(this.app.workspace.setActiveLeaf(n,!0,!0),r?.setEphemeralState(r?.getEphemeralState()),this.app.workspace.activeEditor?.editor?.replaceSelection(`<!-- slide ${e} -->
`)):new Pt.Notice("No active markdown editor found.")}async onOpen(){let e=this.contentEl;e.style.overflowY="auto",e.style.height="100%",e.empty(),e.createDiv("Header"),new Pt.Setting(e).setName("Open Slides Studio").setHeading().setDesc("Open the Slides Studio Page in a new view").addButton(n=>{n.setButtonText("Open").onClick(()=>{this.app.commands.executeCommandById("slides-studio:open-slide-studio-webview")}).setCta()}),new Pt.Setting(e).setName("Add Tags").setHeading().setDesc("Use the buttons below to insert tags into notes.  Tags will be inserted at the current cursor position").addButton(n=>{n.setButtonText("refresh view").onClick(async()=>{await this.addTagButtons(r)})});let r=e.createDiv("tags");this.addTagButtons(r),new Pt.Setting(e).setName("Slide Id").setHeading().setDesc("Add an Id tag").addButton(n=>{n.setButtonText("Add").onClick(()=>{let s=this.app.workspace.getMostRecentLeaf(),i=this.app.workspace.getLeafById(s?.id);this.app.workspace.setActiveLeaf(i,!0,!0),s?.setEphemeralState(s?.getEphemeralState()),this.app.workspace.activeEditor?.editor?.replaceSelection(`<!-- slide data-id="${Date.now()}" -->
`),this.app.commands.executeCommandById("slides-studio:add-slide-id")}).setCta()})}async addTagButtons(e){e.empty(),e.createEl("div",{text:"Fetching OBS Data...",attr:{style:"padding: 10px; color: var(--text-muted); text-align: center;"}});let r=this.app.plugins.plugins["slides-studio"];r&&typeof r.getObsTags=="function"?await r.getObsTags():console.warn("Slides Studio: getObsTags method not found on plugin instance."),e.empty();let n=Array.from(new Set(this.app.plugins.plugins["slides-studio"].settings.scene_tags));new Pt.Setting(e).setName("Scenes").setHeading(),n.forEach(c=>{new Pt.Setting(e).setName(c).addButton(u=>{u.setButtonText("Add").setCta().onClick(()=>{this.insertTag(`data-scene="${c}"`)})})});let s=Array.from(new Set(this.app.plugins.plugins["slides-studio"].settings.slide_tags));new Pt.Setting(e).setName("Slides Position").setHeading(),s.forEach(c=>{new Pt.Setting(e).setName(c).addButton(u=>{u.setButtonText("Add").setCta().onClick(()=>{this.insertTag(`data-slide-position="${c}"`)})})});let i=Array.from(new Set(this.app.plugins.plugins["slides-studio"].settings.camera_tags));new Pt.Setting(e).setName("Camera Position").setHeading(),i.forEach(c=>{new Pt.Setting(e).setName(c).addButton(u=>{u.setButtonText("Add").setCta().onClick(()=>{this.insertTag(`data-camera-position="${c}"`)})})});let o=Array.from(new Set(this.app.plugins.plugins["slides-studio"].settings.camera_shape_tags));new Pt.Setting(e).setName("Camera Shapes").setHeading(),o.forEach(c=>{new Pt.Setting(e).setName(c).addButton(u=>{u.setButtonText("Add").setCta().onClick(()=>{this.insertTag(`data-camera-shape="${c}"`)})})});let a=this.app.plugins.plugins["slides-studio"].settings.user_tags,l=new Set(a);new Pt.Setting(e).setName("User Tags").setHeading().setClass("slide-studio-new-user-tag").setDesc("data-user-tag={tag value}"),new Pt.Setting(e).setName("Create a new tag").addText(c=>{c.setPlaceholder("key"),c.onChange(u=>{this.app.plugins.plugins["slides-studio"].settings.newTagKey=u;let d=document.querySelector(".slide-studio-new-user-tag"),p=this.app.plugins.plugins["slides-studio"].settings.newTagValue;console.log(p),d&&(d.querySelector(".setting-item-description").innerHTML=`data-${u.replace(" ","-")} : ${p.replace(" ","-")}`)})}).addText(c=>{c.setPlaceholder("value"),c.onChange(u=>{this.app.plugins.plugins["slides-studio"].settings.newTagValue=u;let d=document.querySelector(".slide-studio-new-user-tag"),p=this.app.plugins.plugins["slides-studio"].settings.newTagKey;console.log(p),d&&(d.querySelector(".setting-item-description").innerHTML=`data-${p.replace(" ","-")} : ${u}`)})}).addButton(c=>{c.setButtonText("Create Tag").onClick(()=>{let u=`${this.app.plugins.plugins["slides-studio"].settings.newTagKey.replace(" ","-")}:${this.app.plugins.plugins["slides-studio"].settings.newTagValue}`;l.add(u),this.app.plugins.plugins["slides-studio"].settings.user_tags=Array.from(l),this.app.plugins.plugins["slides-studio"].saveSettings(),this.onOpen()})}),a.forEach(c=>{new Pt.Setting(e).setName(c).addButton(u=>{u.setButtonText("Add").setCta().onClick(()=>{let d=c.split(":");this.insertTag(`data-${d[0]}="${d[1]}"`)})}).addButton(u=>{u.setButtonText("\u{1F6AB}").onClick(()=>{l.delete(c),this.app.plugins.plugins["slides-studio"].settings.user_tags=Array.from(l),this.app.plugins.plugins["slides-studio"].saveSettings(),new Pt.Notice(`deleted user tag ${c}`),this.onOpen()})})})}async onClose(){}};var XG=require("obsidian"),D0="slides-studio-webview",k0=class extends XG.ItemView{plugin;constructor(e,r){super(e),this.plugin=r}getViewType(){return D0}getDisplayText(){return"Slides Studio Live"}getIcon(){return"presentation"}async onOpen(){let e=this.containerEl.children[1];e.empty(),e.addClass("slides-studio-webview-container");let r=e.createEl("iframe");r.setAttribute("allow","autoplay"),r.style.width="100%",r.style.height="100%",r.style.border="none";let n=this.plugin.getServerUrl();n?r.src=n:(r.src="about:blank",e.createEl("h3",{text:"Server not running. Enable it in settings."}))}async onClose(){}};var QG={s:"string",f:"float",i:"integer",b:"blob"},Uc=class{constructor(e,r){this.type=e,this.value=r}},IO=class{constructor(e,...r){this.oscType="message",this.address=e,this.args=r}append(e){let r;switch(typeof e){case"object":if(e instanceof Array)e.forEach(n=>this.append(n));else if(e.type)QG[e.type]&&(e.type=QG[e.type]),this.args.push(e);else throw new Error(`don't know how to encode object ${e}`);break;case"number":Math.floor(e)===e?r=new Uc("integer",e):r=new Uc("float",e);break;case"string":r=new Uc("string",e);break;case"boolean":r=new Uc("boolean",e);break;default:throw new Error(`don't know how to encode ${e}`)}r&&this.args.push(r)}},Bc=IO;var a6=require("dgram"),l6=require("events");var n6=ln(kO(),1);function s6(t){let e=[];return e.push(t.address),t.args.forEach(r=>{e.push(r.value)}),e}function i6(t){return t.elements=t.elements.map(e=>{if(e.oscType==="bundle")return i6(e);if(e.oscType==="message")return s6(e)}),t}function cOe(t){let e=(0,n6.fromBuffer)(t);if(e.oscType==="bundle")return i6(e);if(e.oscType==="message")return s6(e);throw new Error("Malformed Packet")}var o6=cOe;var DO=class extends l6.EventEmitter{constructor(e,r="127.0.0.1",n){super(),typeof r=="function"&&(n=r,r="127.0.0.1"),n||(n=()=>{});let s;this.port=e,this.host=r,this._sock=(0,a6.createSocket)({type:"udp4",reuseAddr:!0}),this._sock.bind(e,r),this._sock.on("listening",()=>{this.emit("listening"),n()}),this._sock.on("message",(i,o)=>{try{s=o6(i)}catch(a){let l=new Error(`can't decode incoming message: ${a.message}`);this.emit("error",l,o);return}s.elements?this.emit("bundle",s,o):s&&(this.emit("message",s,o),this.emit(s[0],s,o))})}close(e){this._sock.close(e)}},MO=DO;var u6=require("dgram"),f6=ln(kO(),1);var{toBuffer:c6}=f6.default,jO=class{constructor(e,r){this.host=e,this.port=r,this._sock=(0,u6.createSocket)({type:"udp4",reuseAddr:!0})}close(e){this._sock.close(e)}send(...e){let r=e[0],n;typeof e[e.length-1]=="function"?n=e.pop():n=()=>{},r instanceof Array&&(r={address:r[0],args:r.splice(1)});let s,i;try{switch(typeof r){case"object":i=c6(r),this._sock.send(i,0,i.length,this.port,this.host,n);break;case"string":s=new Bc(e[0]);for(let o=1;o<e.length;o++)s.append(e[o]);i=c6(s),this._sock.send(i,0,i.length,this.port,this.host,n);break;default:throw new TypeError("That Message Just Doesn't Seem Right")}}catch(o){if(o.code!=="ERR_SOCKET_DGRAM_NOT_RUNNING")throw o;let a=new ReferenceError("Cannot send message on closed socket.");a.code=o.code,n(a)}}},qO=jO;var q0=require("obsidian"),L0=class{activeOscDevices=new Map;onOscMessageReceived;constructor(e){this.onOscMessageReceived=e}connectDevice(e){this.disconnectDevice(e.name),new q0.Notice(`Starting OSC: ${e.name}`);try{let r=new qO(e.ip,parseInt(e.outPort)),n=new MO(parseInt(e.inPort),"0.0.0.0");n.on("listening",()=>{new q0.Notice(`OSC Server ${e.name} is listening on ${e.inPort}.`)}),n.on("message",s=>{console.log(`Message from ${e.name}: ${s}`),this.onOscMessageReceived&&this.onOscMessageReceived(e.name,s)}),this.activeOscDevices.set(e.name,{client:r,server:n})}catch(r){console.error(`Failed to start OSC device ${e.name}`,r),new q0.Notice(`Failed to start OSC: ${e.name}`)}}disconnectDevice(e){if(this.activeOscDevices.has(e)){let r=this.activeOscDevices.get(e);try{r.client.close()}catch{}try{r.server.close()}catch{}this.activeOscDevices.delete(e)}}disconnectAll(){this.activeOscDevices.forEach((e,r)=>{try{e.client.close()}catch{}try{e.server.close()}catch{}}),this.activeOscDevices.clear()}sendMessage(e,r){let n=this.activeOscDevices.get(e);n?(console.log(`Sending to ${e}`),n.client.send(r,s=>{s&&console.error(`Error sending to ${e}:`,s)})):console.warn(`OSC Device '${e}' not connected or found.`)}};var on=class{constructor(e=!1){this.eventMap={},this.eventsSuspended=e==!0}addListener(e,r,n={}){if(typeof e=="string"&&e.length<1||e instanceof String&&e.length<1||typeof e!="string"&&!(e instanceof String)&&e!==on.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(typeof r!="function")throw new TypeError("The callback must be a function.");let s=new F0(e,this,r,n);return this.eventMap[e]||(this.eventMap[e]=[]),n.prepend?this.eventMap[e].unshift(s):this.eventMap[e].push(s),s}addOneTimeListener(e,r,n={}){n.remaining=1,this.addListener(e,r,n)}static get ANY_EVENT(){return Symbol.for("Any event")}hasListener(e,r){return e===void 0?this.eventMap[on.ANY_EVENT]&&this.eventMap[on.ANY_EVENT].length>0?!0:Object.entries(this.eventMap).some(([,n])=>n.length>0):this.eventMap[e]&&this.eventMap[e].length>0?r instanceof F0?this.eventMap[e].filter(s=>s===r).length>0:typeof r=="function"?this.eventMap[e].filter(s=>s.callback===r).length>0:r==null:!1}get eventNames(){return Object.keys(this.eventMap)}getListeners(e){return this.eventMap[e]||[]}suspendEvent(e){this.getListeners(e).forEach(r=>{r.suspended=!0})}unsuspendEvent(e){this.getListeners(e).forEach(r=>{r.suspended=!1})}getListenerCount(e){return this.getListeners(e).length}emit(e,...r){if(typeof e!="string"&&!(e instanceof String))throw new TypeError("The 'event' parameter must be a string.");if(this.eventsSuspended)return;let n=[],s=this.eventMap[on.ANY_EVENT]||[];return this.eventMap[e]&&(s=s.concat(this.eventMap[e])),s.forEach(i=>{if(i.suspended)return;let o=[...r];Array.isArray(i.arguments)&&(o=o.concat(i.arguments)),i.remaining>0&&(n.push(i.callback.apply(i.context,o)),i.count++),--i.remaining<1&&i.remove()}),n}removeListener(e,r,n={}){if(e===void 0){this.eventMap={};return}else if(!this.eventMap[e])return;let s=this.eventMap[e].filter(i=>r&&i.callback!==r||n.remaining&&n.remaining!==i.remaining||n.context&&n.context!==i.context);s.length?this.eventMap[e]=s:delete this.eventMap[e]}async waitFor(e,r={}){return r.duration=parseInt(r.duration),(isNaN(r.duration)||r.duration<=0)&&(r.duration=1/0),new Promise((n,s)=>{let i,o=this.addListener(e,()=>{clearTimeout(i),n()},{remaining:1});r.duration!==1/0&&(i=setTimeout(()=>{o.remove(),s("The duration expired before the event was emitted.")},r.duration))})}get eventCount(){return Object.keys(this.eventMap).length}},F0=class{constructor(e,r,n,s={}){if(typeof e!="string"&&!(e instanceof String)&&e!==on.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(!r)throw new ReferenceError("The 'target' parameter is mandatory.");if(typeof n!="function")throw new TypeError("The 'callback' must be a function.");s.arguments!==void 0&&!Array.isArray(s.arguments)&&(s.arguments=[s.arguments]),s=Object.assign({context:r,remaining:1/0,arguments:void 0,duration:1/0},s),s.duration!==1/0&&setTimeout(()=>this.remove(),s.duration),this.arguments=s.arguments,this.callback=n,this.context=s.context,this.count=0,this.event=e,this.remaining=parseInt(s.remaining)>=1?parseInt(s.remaining):1/0,this.suspended=!1,this.target=r}remove(){this.target.removeListener(this.event,this.callback,{context:this.context,remaining:this.remaining})}};var I=class{static get MIDI_CHANNEL_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MESSAGES enum instead."),I.CHANNEL_MESSAGES}static get CHANNEL_MESSAGES(){return{noteoff:8,noteon:9,keyaftertouch:10,controlchange:11,programchange:12,channelaftertouch:13,pitchbend:14}}static get CHANNEL_NUMBERS(){return[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get MIDI_CHANNEL_NUMBERS(){return this.validation&&console.warn("The MIDI_CHANNEL_NUMBERS array has been deprecated. Use the Enumerations.CHANNEL_NUMBERS array instead."),[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get CHANNEL_MODE_MESSAGES(){return{allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MODE_MESSAGES enum instead."),I.CHANNEL_MODE_MESSAGES}static get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been deprecated. Use the Enumerations.CONTROL_CHANGE_MESSAGES array instead."),{bankselectcoarse:0,modulationwheelcoarse:1,breathcontrollercoarse:2,controller3:3,footcontrollercoarse:4,portamentotimecoarse:5,dataentrycoarse:6,volumecoarse:7,balancecoarse:8,controller9:9,pancoarse:10,expressioncoarse:11,effectcontrol1coarse:12,effectcontrol2coarse:13,controller14:14,controller15:15,generalpurposeslider1:16,generalpurposeslider2:17,generalpurposeslider3:18,generalpurposeslider4:19,controller20:20,controller21:21,controller22:22,controller23:23,controller24:24,controller25:25,controller26:26,controller27:27,controller28:28,controller29:29,controller30:30,controller31:31,bankselectfine:32,modulationwheelfine:33,breathcontrollerfine:34,controller35:35,footcontrollerfine:36,portamentotimefine:37,dataentryfine:38,volumefine:39,balancefine:40,controller41:41,panfine:42,expressionfine:43,effectcontrol1fine:44,effectcontrol2fine:45,controller46:46,controller47:47,controller48:48,controller49:49,controller50:50,controller51:51,controller52:52,controller53:53,controller54:54,controller55:55,controller56:56,controller57:57,controller58:58,controller59:59,controller60:60,controller61:61,controller62:62,controller63:63,holdpedal:64,portamento:65,sustenutopedal:66,softpedal:67,legatopedal:68,hold2pedal:69,soundvariation:70,resonance:71,soundreleasetime:72,soundattacktime:73,brightness:74,soundcontrol6:75,soundcontrol7:76,soundcontrol8:77,soundcontrol9:78,soundcontrol10:79,generalpurposebutton1:80,generalpurposebutton2:81,generalpurposebutton3:82,generalpurposebutton4:83,controller84:84,controller85:85,controller86:86,controller87:87,controller88:88,controller89:89,controller90:90,reverblevel:91,tremololevel:92,choruslevel:93,celestelevel:94,phaserlevel:95,databuttonincrement:96,databuttondecrement:97,nonregisteredparametercoarse:98,nonregisteredparameterfine:99,registeredparametercoarse:100,registeredparameterfine:101,controller102:102,controller103:103,controller104:104,controller105:105,controller106:106,controller107:107,controller108:108,controller109:109,controller110:110,controller111:111,controller112:112,controller113:113,controller114:114,controller115:115,controller116:116,controller117:117,controller118:118,controller119:119,allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get CONTROL_CHANGE_MESSAGES(){return[{number:0,name:"bankselectcoarse",description:"Bank Select (Coarse)",position:"msb"},{number:1,name:"modulationwheelcoarse",description:"Modulation Wheel (Coarse)",position:"msb"},{number:2,name:"breathcontrollercoarse",description:"Breath Controller (Coarse)",position:"msb"},{number:3,name:"controller3",description:"Undefined",position:"msb"},{number:4,name:"footcontrollercoarse",description:"Foot Controller (Coarse)",position:"msb"},{number:5,name:"portamentotimecoarse",description:"Portamento Time (Coarse)",position:"msb"},{number:6,name:"dataentrycoarse",description:"Data Entry (Coarse)",position:"msb"},{number:7,name:"volumecoarse",description:"Channel Volume (Coarse)",position:"msb"},{number:8,name:"balancecoarse",description:"Balance (Coarse)",position:"msb"},{number:9,name:"controller9",description:"Controller 9 (Coarse)",position:"msb"},{number:10,name:"pancoarse",description:"Pan (Coarse)",position:"msb"},{number:11,name:"expressioncoarse",description:"Expression Controller (Coarse)",position:"msb"},{number:12,name:"effectcontrol1coarse",description:"Effect Control 1 (Coarse)",position:"msb"},{number:13,name:"effectcontrol2coarse",description:"Effect Control 2 (Coarse)",position:"msb"},{number:14,name:"controller14",description:"Undefined",position:"msb"},{number:15,name:"controller15",description:"Undefined",position:"msb"},{number:16,name:"generalpurposecontroller1",description:"General Purpose Controller 1 (Coarse)",position:"msb"},{number:17,name:"generalpurposecontroller2",description:"General Purpose Controller 2 (Coarse)",position:"msb"},{number:18,name:"generalpurposecontroller3",description:"General Purpose Controller 3 (Coarse)",position:"msb"},{number:19,name:"generalpurposecontroller4",description:"General Purpose Controller 4 (Coarse)",position:"msb"},{number:20,name:"controller20",description:"Undefined",position:"msb"},{number:21,name:"controller21",description:"Undefined",position:"msb"},{number:22,name:"controller22",description:"Undefined",position:"msb"},{number:23,name:"controller23",description:"Undefined",position:"msb"},{number:24,name:"controller24",description:"Undefined",position:"msb"},{number:25,name:"controller25",description:"Undefined",position:"msb"},{number:26,name:"controller26",description:"Undefined",position:"msb"},{number:27,name:"controller27",description:"Undefined",position:"msb"},{number:28,name:"controller28",description:"Undefined",position:"msb"},{number:29,name:"controller29",description:"Undefined",position:"msb"},{number:30,name:"controller30",description:"Undefined",position:"msb"},{number:31,name:"controller31",description:"Undefined",position:"msb"},{number:32,name:"bankselectfine",description:"Bank Select (Fine)",position:"lsb"},{number:33,name:"modulationwheelfine",description:"Modulation Wheel (Fine)",position:"lsb"},{number:34,name:"breathcontrollerfine",description:"Breath Controller (Fine)",position:"lsb"},{number:35,name:"controller35",description:"Undefined",position:"lsb"},{number:36,name:"footcontrollerfine",description:"Foot Controller (Fine)",position:"lsb"},{number:37,name:"portamentotimefine",description:"Portamento Time (Fine)",position:"lsb"},{number:38,name:"dataentryfine",description:"Data Entry (Fine)",position:"lsb"},{number:39,name:"channelvolumefine",description:"Channel Volume (Fine)",position:"lsb"},{number:40,name:"balancefine",description:"Balance (Fine)",position:"lsb"},{number:41,name:"controller41",description:"Undefined",position:"lsb"},{number:42,name:"panfine",description:"Pan (Fine)",position:"lsb"},{number:43,name:"expressionfine",description:"Expression Controller (Fine)",position:"lsb"},{number:44,name:"effectcontrol1fine",description:"Effect control 1 (Fine)",position:"lsb"},{number:45,name:"effectcontrol2fine",description:"Effect control 2 (Fine)",position:"lsb"},{number:46,name:"controller46",description:"Undefined",position:"lsb"},{number:47,name:"controller47",description:"Undefined",position:"lsb"},{number:48,name:"controller48",description:"General Purpose Controller 1 (Fine)",position:"lsb"},{number:49,name:"controller49",description:"General Purpose Controller 2 (Fine)",position:"lsb"},{number:50,name:"controller50",description:"General Purpose Controller 3 (Fine)",position:"lsb"},{number:51,name:"controller51",description:"General Purpose Controller 4 (Fine)",position:"lsb"},{number:52,name:"controller52",description:"Undefined",position:"lsb"},{number:53,name:"controller53",description:"Undefined",position:"lsb"},{number:54,name:"controller54",description:"Undefined",position:"lsb"},{number:55,name:"controller55",description:"Undefined",position:"lsb"},{number:56,name:"controller56",description:"Undefined",position:"lsb"},{number:57,name:"controller57",description:"Undefined",position:"lsb"},{number:58,name:"controller58",description:"Undefined",position:"lsb"},{number:59,name:"controller59",description:"Undefined",position:"lsb"},{number:60,name:"controller60",description:"Undefined",position:"lsb"},{number:61,name:"controller61",description:"Undefined",position:"lsb"},{number:62,name:"controller62",description:"Undefined",position:"lsb"},{number:63,name:"controller63",description:"Undefined",position:"lsb"},{number:64,name:"damperpedal",description:"Damper Pedal On/Off"},{number:65,name:"portamento",description:"Portamento On/Off"},{number:66,name:"sostenuto",description:"Sostenuto On/Off"},{number:67,name:"softpedal",description:"Soft Pedal On/Off"},{number:68,name:"legatopedal",description:"Legato Pedal On/Off"},{number:69,name:"hold2",description:"Hold 2 On/Off"},{number:70,name:"soundvariation",description:"Sound Variation",position:"lsb"},{number:71,name:"resonance",description:"Resonance",position:"lsb"},{number:72,name:"releasetime",description:"Release Time",position:"lsb"},{number:73,name:"attacktime",description:"Attack Time",position:"lsb"},{number:74,name:"brightness",description:"Brightness",position:"lsb"},{number:75,name:"decaytime",description:"Decay Time",position:"lsb"},{number:76,name:"vibratorate",description:"Vibrato Rate",position:"lsb"},{number:77,name:"vibratodepth",description:"Vibrato Depth",position:"lsb"},{number:78,name:"vibratodelay",description:"Vibrato Delay",position:"lsb"},{number:79,name:"controller79",description:"Undefined",position:"lsb"},{number:80,name:"generalpurposecontroller5",description:"General Purpose Controller 5",position:"lsb"},{number:81,name:"generalpurposecontroller6",description:"General Purpose Controller 6",position:"lsb"},{number:82,name:"generalpurposecontroller7",description:"General Purpose Controller 7",position:"lsb"},{number:83,name:"generalpurposecontroller8",description:"General Purpose Controller 8",position:"lsb"},{number:84,name:"portamentocontrol",description:"Portamento Control",position:"lsb"},{number:85,name:"controller85",description:"Undefined"},{number:86,name:"controller86",description:"Undefined"},{number:87,name:"controller87",description:"Undefined"},{number:88,name:"highresolutionvelocityprefix",description:"High Resolution Velocity Prefix",position:"lsb"},{number:89,name:"controller89",description:"Undefined"},{number:90,name:"controller90",description:"Undefined"},{number:91,name:"effect1depth",description:"Effects 1 Depth (Reverb Send Level)"},{number:92,name:"effect2depth",description:"Effects 2 Depth"},{number:93,name:"effect3depth",description:"Effects 3 Depth (Chorus Send Level)"},{number:94,name:"effect4depth",description:"Effects 4 Depth"},{number:95,name:"effect5depth",description:"Effects 5 Depth"},{number:96,name:"dataincrement",description:"Data Increment"},{number:97,name:"datadecrement",description:"Data Decrement"},{number:98,name:"nonregisteredparameterfine",description:"Non-Registered Parameter Number (Fine)",position:"lsb"},{number:99,name:"nonregisteredparametercoarse",description:"Non-Registered Parameter Number (Coarse)",position:"msb"},{number:100,name:"registeredparameterfine",description:"Registered Parameter Number (Fine)",position:"lsb"},{number:101,name:"registeredparametercoarse",description:"Registered Parameter Number (Coarse)",position:"msb"},{number:102,name:"controller102",description:"Undefined"},{number:103,name:"controller103",description:"Undefined"},{number:104,name:"controller104",description:"Undefined"},{number:105,name:"controller105",description:"Undefined"},{number:106,name:"controller106",description:"Undefined"},{number:107,name:"controller107",description:"Undefined"},{number:108,name:"controller108",description:"Undefined"},{number:109,name:"controller109",description:"Undefined"},{number:110,name:"controller110",description:"Undefined"},{number:111,name:"controller111",description:"Undefined"},{number:112,name:"controller112",description:"Undefined"},{number:113,name:"controller113",description:"Undefined"},{number:114,name:"controller114",description:"Undefined"},{number:115,name:"controller115",description:"Undefined"},{number:116,name:"controller116",description:"Undefined"},{number:117,name:"controller117",description:"Undefined"},{number:118,name:"controller118",description:"Undefined"},{number:119,name:"controller119",description:"Undefined"},{number:120,name:"allsoundoff",description:"All Sound Off"},{number:121,name:"resetallcontrollers",description:"Reset All Controllers"},{number:122,name:"localcontrol",description:"Local Control On/Off"},{number:123,name:"allnotesoff",description:"All Notes Off"},{number:124,name:"omnimodeoff",description:"Omni Mode Off"},{number:125,name:"omnimodeon",description:"Omni Mode On"},{number:126,name:"monomodeon",description:"Mono Mode On"},{number:127,name:"polymodeon",description:"Poly Mode On"}]}static get REGISTERED_PARAMETERS(){return{pitchbendrange:[0,0],channelfinetuning:[0,1],channelcoarsetuning:[0,2],tuningprogram:[0,3],tuningbank:[0,4],modulationrange:[0,5],azimuthangle:[61,0],elevationangle:[61,1],gain:[61,2],distanceratio:[61,3],maximumdistance:[61,4],maximumdistancegain:[61,5],referencedistanceratio:[61,6],panspreadangle:[61,7],rollangle:[61,8]}}static get MIDI_REGISTERED_PARAMETERS(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETERS enum has been deprecated. Use the Enumerations.REGISTERED_PARAMETERS enum instead."),I.MIDI_REGISTERED_PARAMETERS}static get SYSTEM_MESSAGES(){return{sysex:240,timecode:241,songposition:242,songselect:243,tunerequest:246,tuningrequest:246,sysexend:247,clock:248,start:250,continue:251,stop:252,activesensing:254,reset:255,midimessage:0,unknownsystemmessage:-1}}static get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been deprecated. Use the Enumerations.SYSTEM_MESSAGES enum instead."),I.SYSTEM_MESSAGES}static get CHANNEL_EVENTS(){return["noteoff","controlchange","noteon","keyaftertouch","programchange","channelaftertouch","pitchbend","allnotesoff","allsoundoff","localcontrol","monomode","omnimode","resetallcontrollers","nrpn","nrpn-dataentrycoarse","nrpn-dataentryfine","nrpn-dataincrement","nrpn-datadecrement","rpn","rpn-dataentrycoarse","rpn-dataentryfine","rpn-dataincrement","rpn-datadecrement","nrpn-databuttonincrement","nrpn-databuttondecrement","rpn-databuttonincrement","rpn-databuttondecrement"]}};var bo=class{constructor(e,r={}){this.duration=j.defaults.note.duration,this.attack=j.defaults.note.attack,this.release=j.defaults.note.release,r.duration!=null&&(this.duration=r.duration),r.attack!=null&&(this.attack=r.attack),r.rawAttack!=null&&(this.attack=U.from7bitToFloat(r.rawAttack)),r.release!=null&&(this.release=r.release),r.rawRelease!=null&&(this.release=U.from7bitToFloat(r.rawRelease)),Number.isInteger(e)?this.identifier=U.toNoteIdentifier(e):this.identifier=e}get identifier(){return this._name+(this._accidental||"")+this._octave}set identifier(e){let r=U.getNoteDetails(e);if(j.validation&&!e)throw new Error("Invalid note identifier");this._name=r.name,this._accidental=r.accidental,this._octave=r.octave}get name(){return this._name}set name(e){if(j.validation&&(e=e.toUpperCase(),!["C","D","E","F","G","A","B"].includes(e)))throw new Error("Invalid name value");this._name=e}get accidental(){return this._accidental}set accidental(e){if(j.validation&&(e=e.toLowerCase(),!["#","##","b","bb"].includes(e)))throw new Error("Invalid accidental value");this._accidental=e}get octave(){return this._octave}set octave(e){if(j.validation&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid octave value");this._octave=e}get duration(){return this._duration}set duration(e){if(j.validation&&(e=parseFloat(e),isNaN(e)||e===null||e<0))throw new RangeError("Invalid duration value.");this._duration=e}get attack(){return this._attack}set attack(e){if(j.validation&&(e=parseFloat(e),isNaN(e)||!(e>=0&&e<=1)))throw new RangeError("Invalid attack value.");this._attack=e}get release(){return this._release}set release(e){if(j.validation&&(e=parseFloat(e),isNaN(e)||!(e>=0&&e<=1)))throw new RangeError("Invalid release value.");this._release=e}get rawAttack(){return U.fromFloatTo7Bit(this._attack)}set rawAttack(e){this._attack=U.from7bitToFloat(e)}get rawRelease(){return U.fromFloatTo7Bit(this._release)}set rawRelease(e){this._release=U.from7bitToFloat(e)}get number(){return U.toNoteNumber(this.identifier)}getOffsetNumber(e=0,r=0){return j.validation&&(e=parseInt(e)||0,r=parseInt(r)||0),Math.min(Math.max(this.number+e*12+r,0),127)}};var U=class{static toNoteNumber(e,r=0){if(r=r==null?0:parseInt(r),isNaN(r))throw new RangeError("Invalid 'octaveOffset' value");typeof e!="string"&&(e="");let n=this.getNoteDetails(e);if(!n)throw new TypeError("Invalid note identifier");let s={C:0,D:2,E:4,F:5,G:7,A:9,B:11},i=(n.octave+1+r)*12;if(i+=s[n.name],n.accidental&&(n.accidental.startsWith("b")?i-=n.accidental.length:i+=n.accidental.length),i<0||i>127)throw new RangeError("Invalid octaveOffset value");return i}static getNoteDetails(e){Number.isInteger(e)&&(e=this.toNoteIdentifier(e));let r=e.match(/^([CDEFGAB])(#{0,2}|b{0,2})(-?\d+)$/i);if(!r)throw new TypeError("Invalid note identifier");let n=r[1].toUpperCase(),s=parseInt(r[3]),i=r[2].toLowerCase();return i=i===""?void 0:i,{accidental:i,identifier:n+(i||"")+s,name:n,octave:s}}static sanitizeChannels(e){let r;if(j.validation){if(e==="all")r=["all"];else if(e==="none")return[]}return Array.isArray(e)?r=e:r=[e],r.indexOf("all")>-1&&(r=I.MIDI_CHANNEL_NUMBERS),r.map(function(n){return parseInt(n)}).filter(function(n){return n>=1&&n<=16})}static toTimestamp(e){let r=!1,n=parseFloat(e);return isNaN(n)?!1:(typeof e=="string"&&e.substring(0,1)==="+"?n>=0&&(r=j.time+n):n>=0&&(r=n),r)}static guessNoteNumber(e,r){r=parseInt(r)||0;let n=!1;if(Number.isInteger(e)&&e>=0&&e<=127)n=parseInt(e);else if(parseInt(e)>=0&&parseInt(e)<=127)n=parseInt(e);else if(typeof e=="string"||e instanceof String)try{n=this.toNoteNumber(e.trim(),r)}catch{return!1}return n}static toNoteIdentifier(e,r){if(e=parseInt(e),isNaN(e)||e<0||e>127)throw new RangeError("Invalid note number");if(r=r==null?0:parseInt(r),isNaN(r))throw new RangeError("Invalid octaveOffset value");let n=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],s=Math.floor(e/12-1)+r;return n[e%12]+s.toString()}static buildNote(e,r={}){if(r.octaveOffset=parseInt(r.octaveOffset)||0,e instanceof bo)return e;let n=this.guessNoteNumber(e,r.octaveOffset);if(n===!1)throw new TypeError(`The input could not be parsed as a note (${e})`);return r.octaveOffset=void 0,new bo(n,r)}static buildNoteArray(e,r={}){let n=[];return Array.isArray(e)||(e=[e]),e.forEach(s=>{n.push(this.buildNote(s,r))}),n}static from7bitToFloat(e){return e===1/0&&(e=127),e=parseInt(e)||0,Math.min(Math.max(e/127,0),1)}static fromFloatTo7Bit(e){return e===1/0&&(e=1),e=parseFloat(e)||0,Math.min(Math.max(Math.round(e*127),0),127)}static fromMsbLsbToFloat(e,r=0){j.validation&&(e=Math.min(Math.max(parseInt(e)||0,0),127),r=Math.min(Math.max(parseInt(r)||0,0),127));let n=((e<<7)+r)/16383;return Math.min(Math.max(n,0),1)}static fromFloatToMsbLsb(e){j.validation&&(e=Math.min(Math.max(parseFloat(e)||0,0),1));let r=Math.round(e*16383);return{msb:r>>7,lsb:r&127}}static offsetNumber(e,r=0,n=0){if(j.validation){if(e=parseInt(e),isNaN(e))throw new Error("Invalid note number");r=parseInt(r)||0,n=parseInt(n)||0}return Math.min(Math.max(e+r*12+n,0),127)}static getPropertyByValue(e,r){return Object.keys(e).find(n=>e[n]===r)}static getCcNameByNumber(e){if(!(j.validation&&(e=parseInt(e),!(e>=0&&e<=127))))return I.CONTROL_CHANGE_MESSAGES[e].name}static getCcNumberByName(e){let r=I.CONTROL_CHANGE_MESSAGES.find(n=>n.name===e);return r?r.number:I.MIDI_CONTROL_CHANGE_MESSAGES[e]}static getChannelModeByNumber(e){if(!(e>=120&&e<=127))return!1;for(let r in I.CHANNEL_MODE_MESSAGES)if(I.CHANNEL_MODE_MESSAGES.hasOwnProperty(r)&&e===I.CHANNEL_MODE_MESSAGES[r])return r;return!1}static get isNode(){return typeof process<"u"&&process.versions!=null&&process.versions.node!=null}static get isBrowser(){return typeof window<"u"&&typeof window.document<"u"}};var LO=class extends on{constructor(e,r){super(),this._output=e,this._number=r,this._octaveOffset=0}destroy(){this._output=null,this._number=null,this._octaveOffset=0,this.removeListener()}send(e,r={time:0}){return this.output.send(e,r),this}sendKeyAftertouch(e,r,n={}){if(j.validation){if(n.useRawValue&&(n.rawValue=n.useRawValue),isNaN(parseFloat(r)))throw new RangeError("Invalid key aftertouch value.");if(n.rawValue){if(!(r>=0&&r<=127&&Number.isInteger(r)))throw new RangeError("Key aftertouch raw value must be an integer between 0 and 127.")}else if(!(r>=0&&r<=1))throw new RangeError("Key aftertouch value must be a float between 0 and 1.")}n.rawValue||(r=U.fromFloatTo7Bit(r));let s=j.octaveOffset+this.output.octaveOffset+this.octaveOffset;return Array.isArray(e)||(e=[e]),U.buildNoteArray(e).forEach(i=>{this.send([(I.CHANNEL_MESSAGES.keyaftertouch<<4)+(this.number-1),i.getOffsetNumber(s),r],{time:U.toTimestamp(n.time)})}),this}sendControlChange(e,r,n={}){if(typeof e=="string"&&(e=U.getCcNumberByName(e)),Array.isArray(r)||(r=[r]),j.validation){if(e===void 0)throw new TypeError("Control change must be identified with a valid name or an integer between 0 and 127.");if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new TypeError("Control change number must be an integer between 0 and 127.");if(r=r.map(s=>{let i=Math.min(Math.max(parseInt(s),0),127);if(isNaN(i))throw new TypeError("Values must be integers between 0 and 127");return i}),r.length===2&&e>=32)throw new TypeError("To use a value array, the controller must be between 0 and 31")}return r.forEach((s,i)=>{this.send([(I.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),e+i*32,r[i]],{time:U.toTimestamp(n.time)})}),this}_selectNonRegisteredParameter(e,r={}){return this.sendControlChange(99,e[0],r),this.sendControlChange(98,e[1],r),this}_deselectRegisteredParameter(e={}){return this.sendControlChange(101,127,e),this.sendControlChange(100,127,e),this}_deselectNonRegisteredParameter(e={}){return this.sendControlChange(101,127,e),this.sendControlChange(100,127,e),this}_selectRegisteredParameter(e,r={}){return this.sendControlChange(101,e[0],r),this.sendControlChange(100,e[1],r),this}_setCurrentParameter(e,r={}){return e=[].concat(e),this.sendControlChange(6,e[0],r),e.length<2?this:(this.sendControlChange(38,e[1],r),this)}sendRpnDecrement(e,r={}){if(Array.isArray(e)||(e=I.REGISTERED_PARAMETERS[e]),j.validation){if(e===void 0)throw new TypeError("The specified registered parameter is invalid.");let n=!1;if(Object.getOwnPropertyNames(I.REGISTERED_PARAMETERS).forEach(s=>{I.REGISTERED_PARAMETERS[s][0]===e[0]&&I.REGISTERED_PARAMETERS[s][1]===e[1]&&(n=!0)}),!n)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(e,r),this.sendControlChange(97,0,r),this._deselectRegisteredParameter(r),this}sendRpnIncrement(e,r={}){if(Array.isArray(e)||(e=I.REGISTERED_PARAMETERS[e]),j.validation){if(e===void 0)throw new TypeError("The specified registered parameter is invalid.");let n=!1;if(Object.getOwnPropertyNames(I.REGISTERED_PARAMETERS).forEach(s=>{I.REGISTERED_PARAMETERS[s][0]===e[0]&&I.REGISTERED_PARAMETERS[s][1]===e[1]&&(n=!0)}),!n)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(e,r),this.sendControlChange(96,0,r),this._deselectRegisteredParameter(r),this}playNote(e,r={}){this.sendNoteOn(e,r);let n=Array.isArray(e)?e:[e];for(let s of n)if(parseInt(s.duration)>0){let i={time:(U.toTimestamp(r.time)||j.time)+parseInt(s.duration),release:s.release,rawRelease:s.rawRelease};this.sendNoteOff(s,i)}else if(parseInt(r.duration)>0){let i={time:(U.toTimestamp(r.time)||j.time)+parseInt(r.duration),release:r.release,rawRelease:r.rawRelease};this.sendNoteOff(s,i)}return this}sendNoteOff(e,r={}){if(j.validation){if(r.rawRelease!=null&&!(r.rawRelease>=0&&r.rawRelease<=127))throw new RangeError("The 'rawRelease' option must be an integer between 0 and 127");if(r.release!=null&&!(r.release>=0&&r.release<=1))throw new RangeError("The 'release' option must be an number between 0 and 1");r.rawVelocity&&(r.rawRelease=r.velocity,console.warn("The 'rawVelocity' option is deprecated. Use 'rawRelease' instead.")),r.velocity&&(r.release=r.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let n=64;r.rawRelease!=null?n=r.rawRelease:isNaN(r.release)||(n=Math.round(r.release*127));let s=j.octaveOffset+this.output.octaveOffset+this.octaveOffset;return U.buildNoteArray(e,{rawRelease:parseInt(n)}).forEach(i=>{this.send([(I.CHANNEL_MESSAGES.noteoff<<4)+(this.number-1),i.getOffsetNumber(s),i.rawRelease],{time:U.toTimestamp(r.time)})}),this}stopNote(e,r={}){return this.sendNoteOff(e,r)}sendNoteOn(e,r={}){if(j.validation){if(r.rawAttack!=null&&!(r.rawAttack>=0&&r.rawAttack<=127))throw new RangeError("The 'rawAttack' option must be an integer between 0 and 127");if(r.attack!=null&&!(r.attack>=0&&r.attack<=1))throw new RangeError("The 'attack' option must be an number between 0 and 1");r.rawVelocity&&(r.rawAttack=r.velocity,r.rawRelease=r.release,console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' or 'rawRelease'.")),r.velocity&&(r.attack=r.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let n=64;r.rawAttack!=null?n=r.rawAttack:isNaN(r.attack)||(n=Math.round(r.attack*127));let s=j.octaveOffset+this.output.octaveOffset+this.octaveOffset;return U.buildNoteArray(e,{rawAttack:n}).forEach(i=>{this.send([(I.CHANNEL_MESSAGES.noteon<<4)+(this.number-1),i.getOffsetNumber(s),i.rawAttack],{time:U.toTimestamp(r.time)})}),this}sendChannelMode(e,r=0,n={}){if(typeof e=="string"&&(e=I.CHANNEL_MODE_MESSAGES[e]),j.validation){if(e===void 0)throw new TypeError("Invalid channel mode message name or number.");if(isNaN(e)||!(e>=120&&e<=127))throw new TypeError("Invalid channel mode message number.");if(isNaN(parseInt(r))||r<0||r>127)throw new RangeError("Value must be an integer between 0 and 127.")}return this.send([(I.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),e,r],{time:U.toTimestamp(n.time)}),this}sendOmniMode(e,r={}){return e===void 0||e?this.sendChannelMode("omnimodeon",0,r):this.sendChannelMode("omnimodeoff",0,r),this}sendChannelAftertouch(e,r={}){if(j.validation){if(isNaN(parseFloat(e)))throw new RangeError("Invalid channel aftertouch value.");if(r.rawValue){if(!(e>=0&&e<=127&&Number.isInteger(e)))throw new RangeError("Channel aftertouch raw value must be an integer between 0 and 127.")}else if(!(e>=0&&e<=1))throw new RangeError("Channel aftertouch value must be a float between 0 and 1.")}return r.rawValue||(e=U.fromFloatTo7Bit(e)),this.send([(I.CHANNEL_MESSAGES.channelaftertouch<<4)+(this.number-1),Math.round(e)],{time:U.toTimestamp(r.time)}),this}sendMasterTuning(e,r={}){if(e=parseFloat(e)||0,j.validation&&!(e>-65&&e<64))throw new RangeError("The value must be a decimal number larger than -65 and smaller than 64.");let n=Math.floor(e)+64,s=e-Math.floor(e);s=Math.round((s+1)/2*16383);let i=s>>7&127,o=s&127;return this.sendRpnValue("channelcoarsetuning",n,r),this.sendRpnValue("channelfinetuning",[i,o],r),this}sendModulationRange(e,r,n={}){if(j.validation){if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(r!=null&&(!Number.isInteger(r)||!(r>=0&&r<=127)))throw new RangeError("If specified, the cents value must be an integer between 0 and 127.")}return r>=0&&r<=127||(r=0),this.sendRpnValue("modulationrange",[e,r],n),this}sendNrpnValue(e,r,n={}){if(r=[].concat(r),j.validation){if(!Array.isArray(e)||!Number.isInteger(e[0])||!Number.isInteger(e[1]))throw new TypeError("The specified NRPN is invalid.");if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The first byte of the NRPN must be between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The second byte of the NRPN must be between 0 and 127.");r.forEach(s=>{if(!(s>=0&&s<=127))throw new RangeError("The data bytes of the NRPN must be between 0 and 127.")})}return this._selectNonRegisteredParameter(e,n),this._setCurrentParameter(r,n),this._deselectNonRegisteredParameter(n),this}sendPitchBend(e,r={}){if(j.validation)if(r.rawValue&&Array.isArray(e)){if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The pitch bend LSB must be an integer between 0 and 127.")}else if(r.rawValue&&!Array.isArray(e)){if(!(e>=0&&e<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.")}else{if(isNaN(e)||e===null)throw new RangeError("Invalid pitch bend value.");if(!(e>=-1&&e<=1))throw new RangeError("The pitch bend value must be a float between -1 and 1.")}let n=0,s=0;if(r.rawValue&&Array.isArray(e))n=e[0],s=e[1];else if(r.rawValue&&!Array.isArray(e))n=e;else{let i=U.fromFloatToMsbLsb((e+1)/2);n=i.msb,s=i.lsb}return this.send([(I.CHANNEL_MESSAGES.pitchbend<<4)+(this.number-1),s,n],{time:U.toTimestamp(r.time)}),this}sendPitchBendRange(e,r,n={}){if(j.validation){if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(!Number.isInteger(r)||!(r>=0&&r<=127))throw new RangeError("The cents value must be an integer between 0 and 127.")}return this.sendRpnValue("pitchbendrange",[e,r],n),this}sendProgramChange(e,r={}){if(e=parseInt(e)||0,j.validation&&!(e>=0&&e<=127))throw new RangeError("The program number must be between 0 and 127.");return this.send([(I.CHANNEL_MESSAGES.programchange<<4)+(this.number-1),e],{time:U.toTimestamp(r.time)}),this}sendRpnValue(e,r,n={}){if(Array.isArray(e)||(e=I.REGISTERED_PARAMETERS[e]),j.validation){if(!Number.isInteger(e[0])||!Number.isInteger(e[1]))throw new TypeError("The specified NRPN is invalid.");if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The first byte of the RPN must be between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The second byte of the RPN must be between 0 and 127.");[].concat(r).forEach(s=>{if(!(s>=0&&s<=127))throw new RangeError("The data bytes of the RPN must be between 0 and 127.")})}return this._selectRegisteredParameter(e,n),this._setCurrentParameter(r,n),this._deselectRegisteredParameter(n),this}sendTuningBank(e,r={}){if(j.validation&&(!Number.isInteger(e)||!(e>=0&&e<=127)))throw new RangeError("The tuning bank number must be between 0 and 127.");return this.sendRpnValue("tuningbank",e,r),this}sendTuningProgram(e,r={}){if(j.validation&&(!Number.isInteger(e)||!(e>=0&&e<=127)))throw new RangeError("The tuning program number must be between 0 and 127.");return this.sendRpnValue("tuningprogram",e,r),this}sendLocalControl(e,r={}){return e?this.sendChannelMode("localcontrol",127,r):this.sendChannelMode("localcontrol",0,r)}sendAllNotesOff(e={}){return this.sendChannelMode("allnotesoff",0,e)}sendAllSoundOff(e={}){return this.sendChannelMode("allsoundoff",0,e)}sendResetAllControllers(e={}){return this.sendChannelMode("resetallcontrollers",0,e)}sendPolyphonicMode(e,r={}){return e==="mono"?this.sendChannelMode("monomodeon",0,r):this.sendChannelMode("polymodeon",0,r)}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get output(){return this._output}get number(){return this._number}};var vh=class extends on{constructor(e){super(),this._midiOutput=e,this._octaveOffset=0,this.channels=[];for(let r=1;r<=16;r++)this.channels[r]=new LO(this,r);this._midiOutput.onstatechange=this._onStateChange.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(e=>e.destroy()),this.channels=[],this._midiOutput&&(this._midiOutput.onstatechange=null),await this.close(),this._midiOutput=null}_onStateChange(e){let r={timestamp:j.time};e.port.connection==="open"?(r.type="opened",r.target=this,r.port=r.target,this.emit("opened",r)):e.port.connection==="closed"&&e.port.state==="connected"?(r.type="closed",r.target=this,r.port=r.target,this.emit("closed",r)):e.port.connection==="closed"&&e.port.state==="disconnected"?(r.type="disconnected",r.port={connection:e.port.connection,id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this.emit("disconnected",r)):e.port.connection==="pending"&&e.port.state==="disconnected"||console.warn("This statechange event was not caught:",e.port.connection,e.port.state)}async open(){try{return await this._midiOutput.open(),Promise.resolve(this)}catch(e){return Promise.reject(e)}}async close(){this._midiOutput?await this._midiOutput.close():await Promise.resolve()}send(e,r={time:0},n=0){if(e instanceof B0&&(e=U.isNode?e.data:e.rawData),e instanceof Uint8Array&&U.isNode&&(e=Array.from(e)),j.validation){if(!Array.isArray(e)&&!(e instanceof Uint8Array)&&(e=[e],Array.isArray(r)&&(e=e.concat(r)),r=isNaN(n)?{time:0}:{time:n}),!(parseInt(e[0])>=128&&parseInt(e[0])<=255))throw new RangeError("The first byte (status) must be an integer between 128 and 255.");e.slice(1).forEach(s=>{if(s=parseInt(s),!(s>=0&&s<=255))throw new RangeError("Data bytes must be integers between 0 and 255.")}),r||(r={time:0})}return this._midiOutput.send(e,U.toTimestamp(r.time)),this}sendSysex(e,r=[],n={}){if(e=[].concat(e),r instanceof Uint8Array){let s=new Uint8Array(1+e.length+r.length+1);s[0]=I.SYSTEM_MESSAGES.sysex,s.set(Uint8Array.from(e),1),s.set(r,1+e.length),s[s.length-1]=I.SYSTEM_MESSAGES.sysexend,this.send(s,{time:n.time})}else{let s=e.concat(r,I.SYSTEM_MESSAGES.sysexend);this.send([I.SYSTEM_MESSAGES.sysex].concat(s),{time:n.time})}return this}clear(){return this._midiOutput.clear?this._midiOutput.clear():j.validation&&console.warn("The 'clear()' method has not yet been implemented in your environment."),this}sendTimecodeQuarterFrame(e,r={}){if(j.validation&&(e=parseInt(e),isNaN(e)||!(e>=0&&e<=127)))throw new RangeError("The value must be an integer between 0 and 127.");return this.send([I.SYSTEM_MESSAGES.timecode,e],{time:r.time}),this}sendSongPosition(e=0,r={}){e=Math.floor(e)||0;var n=e>>7&127,s=e&127;return this.send([I.SYSTEM_MESSAGES.songposition,n,s],{time:r.time}),this}sendSongSelect(e=0,r={}){if(j.validation&&(e=parseInt(e),isNaN(e)||!(e>=0&&e<=127)))throw new RangeError("The program value must be between 0 and 127");return this.send([I.SYSTEM_MESSAGES.songselect,e],{time:r.time}),this}sendTuneRequest(e={}){return this.send([I.SYSTEM_MESSAGES.tunerequest],{time:e.time}),this}sendClock(e={}){return this.send([I.SYSTEM_MESSAGES.clock],{time:e.time}),this}sendStart(e={}){return this.send([I.SYSTEM_MESSAGES.start],{time:e.time}),this}sendContinue(e={}){return this.send([I.SYSTEM_MESSAGES.continue],{time:e.time}),this}sendStop(e={}){return this.send([I.SYSTEM_MESSAGES.stop],{time:e.time}),this}sendActiveSensing(e={}){return this.send([I.SYSTEM_MESSAGES.activesensing],{time:e.time}),this}sendReset(e={}){return this.send([I.SYSTEM_MESSAGES.reset],{time:e.time}),this}sendTuningRequest(e={}){return j.validation&&console.warn("The sendTuningRequest() method has been deprecated. Use sendTuningRequest() instead."),this.sendTuneRequest(e)}sendKeyAftertouch(e,r,n={}){return n.channels==null&&(n.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendKeyAftertouch(e,r,n)}),this}sendControlChange(e,r,n={},s={}){if(j.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){let i=n;n=s,n.channels=i,n.channels==="all"&&(n.channels=I.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendControlChange(e,r,n)}),this}sendPitchBendRange(e=0,r=0,n={}){return n.channels==null&&(n.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendPitchBendRange(e,r,n)}),this}setPitchBendRange(e=0,r=0,n="all",s={}){return j.validation&&(console.warn("The setPitchBendRange() method is deprecated. Use sendPitchBendRange() instead."),s.channels=n,s.channels==="all"&&(s.channels=I.MIDI_CHANNEL_NUMBERS)),this.sendPitchBendRange(e,r,s)}sendRpnValue(e,r,n={}){return n.channels==null&&(n.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendRpnValue(e,r,n)}),this}setRegisteredParameter(e,r=[],n="all",s={}){return j.validation&&(console.warn("The setRegisteredParameter() method is deprecated. Use sendRpnValue() instead."),s.channels=n,s.channels==="all"&&(s.channels=I.MIDI_CHANNEL_NUMBERS)),this.sendRpnValue(e,r,s)}sendChannelAftertouch(e,r={},n={}){if(j.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){let s=r;r=n,r.channels=s,r.channels==="all"&&(r.channels=I.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendChannelAftertouch(e,r)}),this}sendPitchBend(e,r={},n={}){if(j.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){let s=r;r=n,r.channels=s,r.channels==="all"&&(r.channels=I.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendPitchBend(e,r)}),this}sendProgramChange(e=0,r={},n={}){if(j.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){let s=r;r=n,r.channels=s,r.channels==="all"&&(r.channels=I.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendProgramChange(e,r)}),this}sendModulationRange(e,r,n={}){return n.channels==null&&(n.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendModulationRange(e,r,n)}),this}setModulationRange(e=0,r=0,n="all",s={}){return j.validation&&(console.warn("The setModulationRange() method is deprecated. Use sendModulationRange() instead."),s.channels=n,s.channels==="all"&&(s.channels=I.MIDI_CHANNEL_NUMBERS)),this.sendModulationRange(e,r,s)}sendMasterTuning(e,r={}){return r.channels==null&&(r.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(r.channels).forEach(n=>{this.channels[n].sendMasterTuning(e,r)}),this}setMasterTuning(e,r={},n={}){return j.validation&&(console.warn("The setMasterTuning() method is deprecated. Use sendMasterTuning() instead."),n.channels=r,n.channels==="all"&&(n.channels=I.MIDI_CHANNEL_NUMBERS)),this.sendMasterTuning(e,n)}sendTuningProgram(e,r={}){return r.channels==null&&(r.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(r.channels).forEach(n=>{this.channels[n].sendTuningProgram(e,r)}),this}setTuningProgram(e,r="all",n={}){return j.validation&&(console.warn("The setTuningProgram() method is deprecated. Use sendTuningProgram() instead."),n.channels=r,n.channels==="all"&&(n.channels=I.MIDI_CHANNEL_NUMBERS)),this.sendTuningProgram(e,n)}sendTuningBank(e=0,r={}){return r.channels==null&&(r.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(r.channels).forEach(n=>{this.channels[n].sendTuningBank(e,r)}),this}setTuningBank(e,r="all",n={}){return j.validation&&(console.warn("The setTuningBank() method is deprecated. Use sendTuningBank() instead."),n.channels=r,n.channels==="all"&&(n.channels=I.MIDI_CHANNEL_NUMBERS)),this.sendTuningBank(e,n)}sendChannelMode(e,r=0,n={},s={}){if(j.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){let i=n;n=s,n.channels=i,n.channels==="all"&&(n.channels=I.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendChannelMode(e,r,n)}),this}sendAllSoundOff(e={}){return e.channels==null&&(e.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(e.channels).forEach(r=>{this.channels[r].sendAllSoundOff(e)}),this}sendAllNotesOff(e={}){return e.channels==null&&(e.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(e.channels).forEach(r=>{this.channels[r].sendAllNotesOff(e)}),this}sendResetAllControllers(e={},r={}){if(j.validation&&(Array.isArray(e)||Number.isInteger(e)||e==="all")){let n=e;e=r,e.channels=n,e.channels==="all"&&(e.channels=I.MIDI_CHANNEL_NUMBERS)}return e.channels==null&&(e.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(e.channels).forEach(n=>{this.channels[n].sendResetAllControllers(e)}),this}sendPolyphonicMode(e,r={},n={}){if(j.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){let s=r;r=n,r.channels=s,r.channels==="all"&&(r.channels=I.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendPolyphonicMode(e,r)}),this}sendLocalControl(e,r={},n={}){if(j.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){let s=r;r=n,r.channels=s,r.channels==="all"&&(r.channels=I.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendLocalControl(e,r)}),this}sendOmniMode(e,r={},n={}){if(j.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){let s=r;r=n,r.channels=s,r.channels==="all"&&(r.channels=I.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendOmniMode(e,r)}),this}sendNrpnValue(e,r,n={}){return n.channels==null&&(n.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendNrpnValue(e,r,n)}),this}setNonRegisteredParameter(e,r=[],n="all",s={}){return j.validation&&(console.warn("The setNonRegisteredParameter() method is deprecated. Use sendNrpnValue() instead."),s.channels=n,s.channels==="all"&&(s.channels=I.MIDI_CHANNEL_NUMBERS)),this.sendNrpnValue(e,r,s)}sendRpnIncrement(e,r={}){return r.channels==null&&(r.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(r.channels).forEach(n=>{this.channels[n].sendRpnIncrement(e,r)}),this}incrementRegisteredParameter(e,r="all",n={}){return j.validation&&(console.warn("The incrementRegisteredParameter() method is deprecated. Use sendRpnIncrement() instead."),n.channels=r,n.channels==="all"&&(n.channels=I.MIDI_CHANNEL_NUMBERS)),this.sendRpnIncrement(e,n)}sendRpnDecrement(e,r={}){return r.channels==null&&(r.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(r.channels).forEach(n=>{this.channels[n].sendRpnDecrement(e,r)}),this}decrementRegisteredParameter(e,r="all",n={}){return j.validation&&(console.warn("The decrementRegisteredParameter() method is deprecated. Use sendRpnDecrement() instead."),n.channels=r,n.channels==="all"&&(n.channels=I.MIDI_CHANNEL_NUMBERS)),this.sendRpnDecrement(e,n)}sendNoteOff(e,r={},n={}){if(j.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){let s=r;r=n,r.channels=s,r.channels==="all"&&(r.channels=I.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendNoteOff(e,r)}),this}stopNote(e,r){return this.sendNoteOff(e,r)}playNote(e,r={},n={}){if(j.validation&&(r.rawVelocity&&console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' instead."),r.velocity&&console.warn("The 'velocity' option is deprecated. Use 'velocity' instead."),Array.isArray(r)||Number.isInteger(r)||r==="all")){let s=r;r=n,r.channels=s,r.channels==="all"&&(r.channels=I.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].playNote(e,r)}),this}sendNoteOn(e,r={},n={}){if(j.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){let s=r;r=n,r.channels=s,r.channels==="all"&&(r.channels=I.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendNoteOn(e,r)}),this}get name(){return this._midiOutput.name}get id(){return this._midiOutput.id}get connection(){return this._midiOutput.connection}get manufacturer(){return this._midiOutput.manufacturer}get state(){return this._midiOutput.state}get type(){return this._midiOutput.type}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}};var U0=class{constructor(e=[],r={}){this.destinations=[],this.types=[...Object.keys(I.SYSTEM_MESSAGES),...Object.keys(I.CHANNEL_MESSAGES)],this.channels=I.MIDI_CHANNEL_NUMBERS,this.suspended=!1,Array.isArray(e)||(e=[e]),r.types&&!Array.isArray(r.types)&&(r.types=[r.types]),r.channels&&!Array.isArray(r.channels)&&(r.channels=[r.channels]),j.validation&&(e.forEach(n=>{if(!(n instanceof vh))throw new TypeError("Destinations must be of type 'Output'.")}),r.types!==void 0&&r.types.forEach(n=>{if(!I.SYSTEM_MESSAGES.hasOwnProperty(n)&&!I.CHANNEL_MESSAGES.hasOwnProperty(n))throw new TypeError("Type must be a valid message type.")}),r.channels!==void 0&&r.channels.forEach(n=>{if(!I.MIDI_CHANNEL_NUMBERS.includes(n))throw new TypeError("MIDI channel must be between 1 and 16.")})),this.destinations=e,r.types&&(this.types=r.types),r.channels&&(this.channels=r.channels)}forward(e){this.suspended||this.types.includes(e.type)&&(e.channel&&!this.channels.includes(e.channel)||this.destinations.forEach(r=>{j.validation&&!(r instanceof vh)||r.send(e)}))}};var FO=class extends on{constructor(e,r){super(),this._input=e,this._number=r,this._octaveOffset=0,this._nrpnBuffer=[],this._rpnBuffer=[],this.parameterNumberEventsEnabled=!0,this.notesState=new Array(128).fill(!1)}destroy(){this._input=null,this._number=null,this._octaveOffset=0,this._nrpnBuffer=[],this.notesState=new Array(128).fill(!1),this.parameterNumberEventsEnabled=!1,this.removeListener()}_processMidiMessageEvent(e){let r=Object.assign({},e);r.port=this.input,r.target=this,r.type="midimessage",this.emit(r.type,r),this._parseEventForStandardMessages(r)}_parseEventForStandardMessages(e){let r=Object.assign({},e);r.type=r.message.type||"unknownmessage";let n=e.message.dataBytes[0],s=e.message.dataBytes[1];if(r.type==="noteoff"||r.type==="noteon"&&s===0)this.notesState[n]=!1,r.type="noteoff",r.note=new bo(U.offsetNumber(n,this.octaveOffset+this.input.octaveOffset+j.octaveOffset),{rawAttack:0,rawRelease:s}),r.value=U.from7bitToFloat(s),r.rawValue=s,r.velocity=r.note.release,r.rawVelocity=r.note.rawRelease;else if(r.type==="noteon")this.notesState[n]=!0,r.note=new bo(U.offsetNumber(n,this.octaveOffset+this.input.octaveOffset+j.octaveOffset),{rawAttack:s}),r.value=U.from7bitToFloat(s),r.rawValue=s,r.velocity=r.note.attack,r.rawVelocity=r.note.rawAttack;else if(r.type==="keyaftertouch")r.note=new bo(U.offsetNumber(n,this.octaveOffset+this.input.octaveOffset+j.octaveOffset)),r.value=U.from7bitToFloat(s),r.rawValue=s,r.identifier=r.note.identifier,r.key=r.note.number,r.rawKey=n;else if(r.type==="controlchange"){r.controller={number:n,name:I.CONTROL_CHANGE_MESSAGES[n].name,description:I.CONTROL_CHANGE_MESSAGES[n].description,position:I.CONTROL_CHANGE_MESSAGES[n].position},r.subtype=r.controller.name||"controller"+n,r.value=U.from7bitToFloat(s),r.rawValue=s;let i=Object.assign({},r);i.type=`${r.type}-controller${n}`,delete i.subtype,this.emit(i.type,i);let o=Object.assign({},r);o.type=`${r.type}-`+I.CONTROL_CHANGE_MESSAGES[n].name,delete o.subtype,o.type.indexOf("controller")!==0&&this.emit(o.type,o),r.message.dataBytes[0]>=120&&this._parseChannelModeMessage(r),this.parameterNumberEventsEnabled&&this._isRpnOrNrpnController(r.message.dataBytes[0])&&this._parseEventForParameterNumber(r)}else r.type==="programchange"?(r.value=n,r.rawValue=r.value):r.type==="channelaftertouch"?(r.value=U.from7bitToFloat(n),r.rawValue=n):r.type==="pitchbend"?(r.value=((s<<7)+n-8192)/8192,r.rawValue=(s<<7)+n):r.type="unknownmessage";this.emit(r.type,r)}_parseChannelModeMessage(e){let r=Object.assign({},e);r.type=r.controller.name,r.type==="localcontrol"&&(r.value=r.message.data[2]===127,r.rawValue=r.message.data[2]),r.type==="omnimodeon"?(r.type="omnimode",r.value=!0,r.rawValue=r.message.data[2]):r.type==="omnimodeoff"&&(r.type="omnimode",r.value=!1,r.rawValue=r.message.data[2]),r.type==="monomodeon"?(r.type="monomode",r.value=!0,r.rawValue=r.message.data[2]):r.type==="polymodeon"&&(r.type="monomode",r.value=!1,r.rawValue=r.message.data[2]),this.emit(r.type,r)}_parseEventForParameterNumber(e){let r=e.message.dataBytes[0],n=e.message.dataBytes[1];r===99||r===101?(this._nrpnBuffer=[],this._rpnBuffer=[],r===99?this._nrpnBuffer=[e.message]:n!==127&&(this._rpnBuffer=[e.message])):r===98||r===100?r===98?(this._rpnBuffer=[],this._nrpnBuffer.length===1?this._nrpnBuffer.push(e.message):this._nrpnBuffer=[]):(this._nrpnBuffer=[],this._rpnBuffer.length===1&&n!==127?this._rpnBuffer.push(e.message):this._rpnBuffer=[]):(r===6||r===38||r===96||r===97)&&(this._rpnBuffer.length===2?this._dispatchParameterNumberEvent("rpn",this._rpnBuffer[0].dataBytes[1],this._rpnBuffer[1].dataBytes[1],e):this._nrpnBuffer.length===2?this._dispatchParameterNumberEvent("nrpn",this._nrpnBuffer[0].dataBytes[1],this._nrpnBuffer[1].dataBytes[1],e):(this._nrpnBuffer=[],this._rpnBuffer=[]))}_isRpnOrNrpnController(e){return e===6||e===38||e===96||e===97||e===98||e===99||e===100||e===101}_dispatchParameterNumberEvent(e,r,n,s){e=e==="nrpn"?"nrpn":"rpn";let i={target:s.target,timestamp:s.timestamp,message:s.message,parameterMsb:r,parameterLsb:n,value:U.from7bitToFloat(s.message.dataBytes[1]),rawValue:s.message.dataBytes[1]};e==="rpn"?i.parameter=Object.keys(I.REGISTERED_PARAMETERS).find(l=>I.REGISTERED_PARAMETERS[l][0]===r&&I.REGISTERED_PARAMETERS[l][1]===n):i.parameter=(r<<7)+n;let o=I.CONTROL_CHANGE_MESSAGES[s.message.dataBytes[0]].name;i.type=`${e}-${o}`,this.emit(i.type,i);let a=Object.assign({},i);a.type==="nrpn-dataincrement"?a.type="nrpn-databuttonincrement":a.type==="nrpn-datadecrement"?a.type="nrpn-databuttondecrement":a.type==="rpn-dataincrement"?a.type="rpn-databuttonincrement":a.type==="rpn-datadecrement"&&(a.type="rpn-databuttondecrement"),this.emit(a.type,a),i.type=e,i.subtype=o,this.emit(i.type,i)}getChannelModeByNumber(e){return j.validation&&(console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class."),e=Math.floor(e)),U.getChannelModeByNumber(e)}getCcNameByNumber(e){if(j.validation&&(console.warn("The 'getCcNameByNumber()' method has been moved to the 'Utilities' class."),e=parseInt(e),!(e>=0&&e<=127)))throw new RangeError("Invalid control change number.");return U.getCcNameByNumber(e)}getNoteState(e){e instanceof bo&&(e=e.identifier);let r=U.guessNoteNumber(e,j.octaveOffset+this.input.octaveOffset+this.octaveOffset);return this.notesState[r]}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get input(){return this._input}get number(){return this._number}get nrpnEventsEnabled(){return this.parameterNumberEventsEnabled}set nrpnEventsEnabled(e){this.validation&&(e=!!e),this.parameterNumberEventsEnabled=e}};var B0=class{constructor(e){this.rawData=e,this.data=Array.from(this.rawData),this.statusByte=this.rawData[0],this.rawDataBytes=this.rawData.slice(1),this.dataBytes=this.data.slice(1),this.isChannelMessage=!1,this.isSystemMessage=!1,this.command=void 0,this.channel=void 0,this.manufacturerId=void 0,this.type=void 0,this.statusByte<240?(this.isChannelMessage=!0,this.command=this.statusByte>>4,this.channel=(this.statusByte&15)+1):(this.isSystemMessage=!0,this.command=this.statusByte),this.isChannelMessage?this.type=U.getPropertyByValue(I.CHANNEL_MESSAGES,this.command):this.isSystemMessage&&(this.type=U.getPropertyByValue(I.SYSTEM_MESSAGES,this.command)),this.statusByte===I.SYSTEM_MESSAGES.sysex&&(this.dataBytes[0]===0?(this.manufacturerId=this.dataBytes.slice(0,3),this.dataBytes=this.dataBytes.slice(3,this.rawDataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(3,this.rawDataBytes.length-1)):(this.manufacturerId=[this.dataBytes[0]],this.dataBytes=this.dataBytes.slice(1,this.dataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(1,this.rawDataBytes.length-1)))}};var UO=class extends on{constructor(e){super(),this._midiInput=e,this._octaveOffset=0,this.channels=[];for(let r=1;r<=16;r++)this.channels[r]=new FO(this,r);this._forwarders=[],this._midiInput.onstatechange=this._onStateChange.bind(this),this._midiInput.onmidimessage=this._onMidiMessage.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(e=>e.destroy()),this.channels=[],this._forwarders=[],this._midiInput&&(this._midiInput.onstatechange=null,this._midiInput.onmidimessage=null),await this.close(),this._midiInput=null}_onStateChange(e){let r={timestamp:j.time,target:this,port:this};e.port.connection==="open"?(r.type="opened",this.emit("opened",r)):e.port.connection==="closed"&&e.port.state==="connected"?(r.type="closed",this.emit("closed",r)):e.port.connection==="closed"&&e.port.state==="disconnected"?(r.type="disconnected",r.port={connection:e.port.connection,id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this.emit("disconnected",r)):e.port.connection==="pending"&&e.port.state==="disconnected"||console.warn("This statechange event was not caught: ",e.port.connection,e.port.state)}_onMidiMessage(e){let r=new B0(e.data),n={port:this,target:this,message:r,timestamp:e.timeStamp,type:"midimessage",data:r.data,rawData:r.data,statusByte:r.data[0],dataBytes:r.dataBytes};this.emit("midimessage",n),r.isSystemMessage?this._parseEvent(n):r.isChannelMessage&&this.channels[r.channel]._processMidiMessageEvent(n),this._forwarders.forEach(s=>s.forward(r))}_parseEvent(e){let r=Object.assign({},e);r.type=r.message.type||"unknownmidimessage",r.type==="songselect"&&(r.song=e.data[1]+1,r.value=e.data[1],r.rawValue=r.value),this.emit(r.type,r)}async open(){try{await this._midiInput.open()}catch(e){return Promise.reject(e)}return Promise.resolve(this)}async close(){if(!this._midiInput)return Promise.resolve(this);try{await this._midiInput.close()}catch(e){return Promise.reject(e)}return Promise.resolve(this)}getChannelModeByNumber(){j.validation&&console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class.")}addListener(e,r,n={}){if(j.validation&&typeof n=="function"){let s=r!=null?[].concat(r):void 0;r=n,n={channels:s}}if(I.CHANNEL_EVENTS.includes(e)){n.channels===void 0&&(n.channels=I.MIDI_CHANNEL_NUMBERS);let s=[];return U.sanitizeChannels(n.channels).forEach(i=>{s.push(this.channels[i].addListener(e,r,n))}),s}else return super.addListener(e,r,n)}addOneTimeListener(e,r,n={}){return n.remaining=1,this.addListener(e,r,n)}on(e,r,n,s){return this.addListener(e,r,n,s)}hasListener(e,r,n={}){if(j.validation&&typeof n=="function"){let s=[].concat(r);r=n,n={channels:s}}return I.CHANNEL_EVENTS.includes(e)?(n.channels===void 0&&(n.channels=I.MIDI_CHANNEL_NUMBERS),U.sanitizeChannels(n.channels).every(s=>this.channels[s].hasListener(e,r))):super.hasListener(e,r)}removeListener(e,r,n={}){if(j.validation&&typeof n=="function"){let s=[].concat(r);r=n,n={channels:s}}if(n.channels===void 0&&(n.channels=I.MIDI_CHANNEL_NUMBERS),e==null)return U.sanitizeChannels(n.channels).forEach(s=>{this.channels[s]&&this.channels[s].removeListener()}),super.removeListener();I.CHANNEL_EVENTS.includes(e)?U.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].removeListener(e,r,n)}):super.removeListener(e,r,n)}addForwarder(e,r={}){let n;return e instanceof U0?n=e:n=new U0(e,r),this._forwarders.push(n),n}removeForwarder(e){this._forwarders=this._forwarders.filter(r=>r!==e)}hasForwarder(e){return this._forwarders.includes(e)}get name(){return this._midiInput.name}get id(){return this._midiInput.id}get connection(){return this._midiInput.connection}get manufacturer(){return this._midiInput.manufacturer}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get state(){return this._midiInput.state}get type(){return this._midiInput.type}get nrpnEventsEnabled(){return j.validation&&console.warn("The 'nrpnEventsEnabled' property has been moved to the 'InputChannel' class."),!1}};var BO=class extends on{constructor(){super(),this.defaults={note:{attack:U.from7bitToFloat(64),release:U.from7bitToFloat(64),duration:1/0}},this.interface=null,this.validation=!0,this._inputs=[],this._disconnectedInputs=[],this._outputs=[],this._disconnectedOutputs=[],this._stateChangeQueue=[],this._octaveOffset=0}async enable(e={},r=!1){if(U.isNode){try{window.navigator}catch{let a=await Object.getPrototypeOf(async function(){}).constructor(`
        let jzz = await import("jzz");
        return jzz.default;
        `)();global.navigator||(global.navigator={}),Object.assign(global.navigator,a)}try{}catch{global.performance=await Object.getPrototypeOf(async function(){}).constructor(`
        let perf_hooks = await import("perf_hooks");
        return perf_hooks.performance;
        `)()}}if(this.validation=e.validation!==!1,this.validation&&(typeof e=="function"&&(e={callback:e,sysex:r}),r&&(e.sysex=!0)),this.enabled)return typeof e.callback=="function"&&e.callback(),Promise.resolve();let n={timestamp:this.time,target:this,type:"error",error:void 0},s={timestamp:this.time,target:this,type:"midiaccessgranted"},i={timestamp:this.time,target:this,type:"enabled"};try{typeof e.requestMIDIAccessFunction=="function"?this.interface=await e.requestMIDIAccessFunction({sysex:e.sysex,software:e.software}):this.interface=await navigator.requestMIDIAccess({sysex:e.sysex,software:e.software})}catch(o){return n.error=o,this.emit("error",n),typeof e.callback=="function"&&e.callback(o),Promise.reject(o)}this.emit("midiaccessgranted",s),this.interface.onstatechange=this._onInterfaceStateChange.bind(this);try{await this._updateInputsAndOutputs()}catch(o){return n.error=o,this.emit("error",n),typeof e.callback=="function"&&e.callback(o),Promise.reject(o)}return this.emit("enabled",i),typeof e.callback=="function"&&e.callback(),Promise.resolve(this)}async disable(){return this.interface&&(this.interface.onstatechange=void 0),this._destroyInputsAndOutputs().then(()=>{navigator&&typeof navigator.close=="function"&&navigator.close(),this.interface=null;let e={timestamp:this.time,target:this,type:"disabled"};this.emit("disabled",e),this.removeListener()})}getInputById(e,r={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return}if(r.disconnected){for(let n=0;n<this._disconnectedInputs.length;n++)if(this._disconnectedInputs[n]._midiInput&&this._disconnectedInputs[n].id===e.toString())return this._disconnectedInputs[n]}else for(let n=0;n<this.inputs.length;n++)if(this.inputs[n]._midiInput&&this.inputs[n].id===e.toString())return this.inputs[n]}getInputByName(e,r={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return;e=e.toString()}if(r.disconnected){for(let n=0;n<this._disconnectedInputs.length;n++)if(~this._disconnectedInputs[n].name.indexOf(e))return this._disconnectedInputs[n]}else for(let n=0;n<this.inputs.length;n++)if(~this.inputs[n].name.indexOf(e))return this.inputs[n]}getOutputByName(e,r={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return;e=e.toString()}if(r.disconnected){for(let n=0;n<this._disconnectedOutputs.length;n++)if(~this._disconnectedOutputs[n].name.indexOf(e))return this._disconnectedOutputs[n]}else for(let n=0;n<this.outputs.length;n++)if(~this.outputs[n].name.indexOf(e))return this.outputs[n]}getOutputById(e,r={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return}if(r.disconnected){for(let n=0;n<this._disconnectedOutputs.length;n++)if(this._disconnectedOutputs[n]._midiOutput&&this._disconnectedOutputs[n].id===e.toString())return this._disconnectedOutputs[n]}else for(let n=0;n<this.outputs.length;n++)if(this.outputs[n]._midiOutput&&this.outputs[n].id===e.toString())return this.outputs[n]}noteNameToNumber(e){return this.validation&&console.warn("The noteNameToNumber() method is deprecated. Use Utilities.toNoteNumber() instead."),U.toNoteNumber(e,this.octaveOffset)}getOctave(e){return this.validation&&(console.warn("The getOctave()is deprecated. Use Utilities.getNoteDetails() instead"),e=parseInt(e)),!isNaN(e)&&e>=0&&e<=127?U.getNoteDetails(U.offsetNumber(e,this.octaveOffset)).octave:!1}sanitizeChannels(e){return this.validation&&console.warn("The sanitizeChannels() method has been moved to the utilities class."),U.sanitizeChannels(e)}toMIDIChannels(e){return this.validation&&console.warn("The toMIDIChannels() method has been deprecated. Use Utilities.sanitizeChannels() instead."),U.sanitizeChannels(e)}guessNoteNumber(e){return this.validation&&console.warn("The guessNoteNumber() method has been deprecated. Use Utilities.guessNoteNumber() instead."),U.guessNoteNumber(e,this.octaveOffset)}getValidNoteArray(e,r={}){return this.validation&&console.warn("The getValidNoteArray() method has been moved to the Utilities.buildNoteArray()"),U.buildNoteArray(e,r)}convertToTimestamp(e){return this.validation&&console.warn("The convertToTimestamp() method has been moved to Utilities.toTimestamp()."),U.toTimestamp(e)}async _destroyInputsAndOutputs(){let e=[];return this.inputs.forEach(r=>e.push(r.destroy())),this.outputs.forEach(r=>e.push(r.destroy())),Promise.all(e).then(()=>{this._inputs=[],this._outputs=[]})}_onInterfaceStateChange(e){this._updateInputsAndOutputs();let r={timestamp:e.timeStamp,type:e.port.state,target:this};if(e.port.state==="connected"&&e.port.connection==="open"){e.port.type==="output"?r.port=this.getOutputById(e.port.id):e.port.type==="input"&&(r.port=this.getInputById(e.port.id)),this.emit(e.port.state,r);let n=Object.assign({},r);n.type="portschanged",this.emit(n.type,n)}else if(e.port.state==="disconnected"&&e.port.connection==="pending"){e.port.type==="input"?r.port=this.getInputById(e.port.id,{disconnected:!0}):e.port.type==="output"&&(r.port=this.getOutputById(e.port.id,{disconnected:!0})),this.emit(e.port.state,r);let n=Object.assign({},r);n.type="portschanged",this.emit(n.type,n)}}async _updateInputsAndOutputs(){return Promise.all([this._updateInputs(),this._updateOutputs()])}async _updateInputs(){if(!this.interface)return;for(let r=this._inputs.length-1;r>=0;r--){let n=this._inputs[r];Array.from(this.interface.inputs.values()).find(i=>i===n._midiInput)||(this._disconnectedInputs.push(n),this._inputs.splice(r,1))}let e=[];return this.interface.inputs.forEach(r=>{if(!this._inputs.find(n=>n._midiInput===r)){let n=this._disconnectedInputs.find(s=>s._midiInput===r);n||(n=new UO(r)),this._inputs.push(n),e.push(n.open())}}),Promise.all(e)}async _updateOutputs(){if(!this.interface)return;for(let r=this._outputs.length-1;r>=0;r--){let n=this._outputs[r];Array.from(this.interface.outputs.values()).find(i=>i===n._midiOutput)||(this._disconnectedOutputs.push(n),this._outputs.splice(r,1))}let e=[];return this.interface.outputs.forEach(r=>{if(!this._outputs.find(n=>n._midiOutput===r)){let n=this._disconnectedOutputs.find(s=>s._midiOutput===r);n||(n=new vh(r)),this._outputs.push(n),e.push(n.open())}}),Promise.all(e)}get enabled(){return this.interface!==null}get inputs(){return this._inputs}get isNode(){return this.validation&&console.warn("WebMidi.isNode has been deprecated. Use Utilities.isNode instead."),U.isNode}get isBrowser(){return this.validation&&console.warn("WebMidi.isBrowser has been deprecated. Use Utilities.isBrowser instead."),U.isBrowser}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get outputs(){return this._outputs}get supported(){return typeof navigator<"u"&&!!navigator.requestMIDIAccess}get sysexEnabled(){return!!(this.interface&&this.interface.sysexEnabled)}get time(){return performance.now()}get version(){return"3.1.14"}get flavour(){return"esm"}get CHANNEL_EVENTS(){return this.validation&&console.warn("The CHANNEL_EVENTS enum has been moved to Enumerations.CHANNEL_EVENTS."),I.CHANNEL_EVENTS}get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been moved to Enumerations.SYSTEM_MESSAGES."),I.SYSTEM_MESSAGES}get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been moved to Enumerations.CHANNEL_MODE_MESSAGES."),I.CHANNEL_MODE_MESSAGES}get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been replaced by the Enumerations.CONTROL_CHANGE_MESSAGES array."),I.MIDI_CONTROL_CHANGE_MESSAGES}get MIDI_REGISTERED_PARAMETER(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETER enum has been moved to Enumerations.REGISTERED_PARAMETERS."),I.REGISTERED_PARAMETERS}get NOTES(){return this.validation&&console.warn("The NOTES enum has been deprecated."),["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"]}},j=new BO;j.constructor=null;var wh=require("obsidian"),z0=class{isEnabled=!1;onMidiMessageReceived;constructor(e){this.onMidiMessageReceived=e}async enable(){if(!this.isEnabled)try{await j.enable(),this.isEnabled=!0,console.log("WebMidi enabled!"),new wh.Notice("MIDI System Enabled")}catch(e){console.error("WebMidi could not be enabled",e),new wh.Notice("Failed to enable MIDI system")}}getInputs(){return this.isEnabled?j.inputs.map(e=>e.name):[]}getOutputs(){return this.isEnabled?j.outputs.map(e=>e.name):[]}connectDevice(e){if(!this.isEnabled){new wh.Notice("MIDI not enabled. Cannot connect.");return}let r=j.getInputByName(e.inputName);r?(r.removeListener("midimessage"),console.log(`Connected to MIDI Input: ${e.inputName}`),new wh.Notice(`Listening to MIDI: ${e.name}`),r.addListener("midimessage",n=>{let s={type:n.message.type,data:n.message.dataBytes,channel:n.message.channel,command:n.message.command,note:n.message.note?n.message.note.number:null,velocity:n.message.velocity,value:n.message.value,controller:n.message.controller?n.message.controller.number:null};this.onMidiMessageReceived&&this.onMidiMessageReceived(e.name,s)})):console.warn(`MIDI Input '${e.inputName}' not found.`)}disconnectDevice(e){if(!this.isEnabled)return;let r=j.getInputByName(e.inputName);r&&(r.removeListener("midimessage"),console.log(`Disconnected MIDI Input: ${e.inputName}`))}disconnectAll(e){e.forEach(r=>this.disconnectDevice(r))}sendMidiMessage(e,r,n){if(!this.isEnabled)return;let s=r.find(l=>l.name===e);if(!s){console.warn(`MIDI Device alias '${e}' not found in settings.`);return}let i=j.getOutputByName(s.outputName);if(!i){console.warn(`MIDI Output '${s.outputName}' not found.`);return}let o=n.type||"noteon",a=n.channel||1;try{switch(o.toLowerCase()){case"noteon":i.playNote(n.note,{channels:a,attack:n.velocity||.75});break;case"noteoff":i.stopNote(n.note,{channels:a});break;case"controlchange":case"cc":i.sendControlChange(n.controller,n.value,{channels:a});break;default:console.warn("Unknown MIDI message type requested:",o)}}catch(l){console.error("Error sending MIDI message",l)}}};var f8=ln(require("path")),d8=require("child_process"),h8=require("util");var L5=ln(S6(),1);var J0=ln(R6(),1);var mP=ln(A5(),1),gP=ln(M5(),1),yP=ln(q5(),1);function QPe(t,e,r){let n=yP.default.stringify((0,gP.default)(r+t));return yP.default.stringify((0,gP.default)(n+e))}var Nh=(0,L5.default)("obs-websocket-js"),Zc=class extends Error{constructor(t,e){super(e),this.code=t}},Ro,F5=(Ro=class extends J0.default{static generateMessageId(){return String(Ro.requestCounter++)}_identified=!1;internalListeners=new J0.default;socket;get identified(){return this._identified}async connect(e="ws://127.0.0.1:4455",r,n={}){this.socket&&await this.disconnect();try{let s=this.internalEventPromise("ConnectionClosed"),i=this.internalEventPromise("ConnectionError");return await Promise.race([(async()=>{let o=await this.createConnection(e);return this.emit("Hello",o),this.identify(o,r,n)})(),new Promise((o,a)=>{i.then(l=>{l.message&&a(l)}),s.then(l=>{a(l)})})])}catch(s){throw await this.disconnect(),s}}async disconnect(){if(!this.socket||this.socket.readyState===mP.default.CLOSED)return;let e=this.internalEventPromise("ConnectionClosed");this.socket.close(),await e}async reidentify(e){let r=this.internalEventPromise(`op:${2}`);return await this.message(3,e),r}async call(e,r){let n=Ro.generateMessageId(),s=this.internalEventPromise(`res:${n}`);await this.message(6,{requestId:n,requestType:e,requestData:r});let{requestStatus:i,responseData:o}=await s;if(!i.result)throw new Zc(i.code,i.comment);return o}async callBatch(e,r={}){let n=Ro.generateMessageId(),s=this.internalEventPromise(`res:${n}`);await this.message(8,{requestId:n,requests:e,...r});let{results:i}=await s;return i}cleanup(){this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,this.socket=void 0,this._identified=!1,this.internalListeners.removeAllListeners())}async createConnection(e){var r;let n=this.internalEventPromise("ConnectionOpened"),s=this.internalEventPromise(`op:${0}`);this.socket=new mP.default(e,this.protocol),this.socket.onopen=this.onOpen.bind(this),this.socket.onmessage=this.onMessage.bind(this),this.socket.onerror=this.onError.bind(this),this.socket.onclose=this.onClose.bind(this),await n;let i=(r=this.socket)==null?void 0:r.protocol;if(!i)throw new Zc(-1,"Server sent no subprotocol");if(i!==this.protocol)throw new Zc(-1,"Server sent an invalid subprotocol");return s}async identify({authentication:e,rpcVersion:r,...n},s,i={}){let o={rpcVersion:r,...i};e&&s&&(o.authentication=QPe(e.salt,e.challenge,s));let a=this.internalEventPromise(`op:${2}`);await this.message(1,o);let l=await a;return this._identified=!0,this.emit("Identified",l),{rpcVersion:r,...n,...l}}async message(e,r){if(!this.socket)throw new Error("Not connected");if(!this.identified&&e!==1)throw new Error("Socket not identified");let n=await this.encodeMessage({op:e,d:r});this.socket.send(n)}async internalEventPromise(e){return new Promise(r=>{this.internalListeners.once(e,r)})}onOpen(e){Nh("socket.open"),this.emit("ConnectionOpened"),this.internalListeners.emit("ConnectionOpened",e)}async onMessage(e){try{let{op:r,d:n}=await this.decodeMessage(e.data);if(Nh("socket.message: %d %j",r,n),r===void 0||n===void 0)return;switch(r){case 5:{let{eventType:s,eventData:i}=n;this.emit(s,i);return}case 7:case 9:{let{requestId:s}=n;this.internalListeners.emit(`res:${s}`,n);return}default:this.internalListeners.emit(`op:${r}`,n)}}catch(r){Nh("error handling message: %o",r)}}onError(e){Nh("socket.error: %o",e);let r=new Zc(-1,e.message);this.emit("ConnectionError",r),this.internalListeners.emit("ConnectionError",r)}onClose(e){Nh("socket.close: %s (%d)",e.reason,e.code);let r=new Zc(e.code,e.reason);this.emit("ConnectionClosed",r),this.internalListeners.emit("ConnectionClosed",r),this.cleanup()}},qh(Ro,"requestCounter",1),Ro);typeof exports<"u"&&Object.defineProperty(exports,"__esModule",{value:!0});var $_=ln(l8(),1),c8=class extends F5{protocol="obswebsocket.msgpack";async encodeMessage(t){return(0,$_.encode)(t)}async decodeMessage(t){return typeof Blob<"u"&&t instanceof Blob&&(t=await t.arrayBuffer()),(0,$_.decode)(t)}};var u8=(0,h8.promisify)(d8.exec),Bxe={websocketIP_Text:"localhost",websocketPort_Text:"4455",websocketPW_Text:"password",slidesPort_Text:"5000",slide_tags:[],scene_tags:[],camera_tags:[],camera_shape_tags:[],user_tags:[],newTag:"",obsAppName_Text:"OBS",obsCollection_Text:"Untitled",obsDebugPort_Text:"9222",obsAppPath_Text:"",serverPort:"7000",serverEnabled:!1,oscDevices:[],midiDevices:[]},O_=class extends _r.Plugin{settings;oscManager;midiManager;serverManager=null;obs;isObsConnected=!1;async loadSettings(){this.settings=Object.assign({},Bxe,await this.loadData())}async saveSettings(){await this.saveData(this.settings),await this.saveWebsocketDetailsToFile()}async saveWebsocketDetailsToFile(){let e=this.manifest.dir;console.log(e);let r="obs_webSocket_details",n="websocketDetails.js",s=`${e}/${r}`,i=`${s}/${n}`;i=_r.Platform.isWin?i.replace(/\//g,"\\"):i;try{let o=this.app.vault.adapter;await o.exists(s)||await this.app.vault.createFolder(s);let a=parseInt(this.settings.websocketPort_Text)||4455,l=`let websocketDetails = {"IP": "${this.settings.websocketIP_Text}", "PW": "${this.settings.websocketPW_Text}", "PORT": ${a}}`;await o.write(i,l)}catch(o){console.error("Error writing websocket details file:",o)}}async onload(){if(await this.loadSettings(),this.obs=new c8,this.app.plugins.plugins["slides-studio"]&&(this.app.plugins.plugins["slides-studio"].settings.scenes=[],this.app.plugins.plugins["slides-studio"].settings.cameras=[]),this.registerView(_h,e=>new A0(e)),this.registerView(D0,e=>new k0(e,this)),this.addRibbonIcon("aperture","open slides studio view",()=>{this.openView()}),this.addSettingTab(new I0(this.app,this)),new _r.Notice("Enabled slides studio plugin"),this.settings.serverEnabled){let e=parseInt(this.settings.serverPort)||7e3;this.serverManager=new Fc(this.app,e),this.app.workspace.onLayoutReady(()=>{this.serverManager?.start()})}this.oscManager=new L0((e,r)=>{let n={deviceName:e,message:r};this.sendToOBS(n,"osc-message")}),this.midiManager=new z0((e,r)=>{let n={deviceName:e,message:r};this.sendToOBS(n,"midi-message")}),await this.midiManager.enable(),this.addCommand({id:"connect-to-obs-websocket",name:"Connect to OBS Websocket connection",callback:()=>{new _r.Notice("Starting OBS Web Socket Server Connection");let e={IP:this.settings.websocketIP_Text,PORT:this.settings.websocketPort_Text,PW:this.settings.websocketPW_Text};this.obsWSSconnect(e)}}),this.obs.on("ConnectionOpened",()=>{console.log("Connection to OBS WebSocket successfully opened")}),this.obs.on("ConnectionClosed",()=>{console.log("Connection to OBS WebSocket closed"),this.isObsConnected=!1}),this.obs.on("ConnectionError",e=>{console.error("Connection to OBS WebSocket failed",e),this.isObsConnected=!1}),this.obs.on("Identified",async e=>{this.isObsConnected=!0,console.log("OBS WebSocket successfully identified",e);let r={IP:this.settings.websocketIP_Text,PORT:this.settings.websocketPort_Text,PW:this.settings.websocketPW_Text};await this.obs.call("CallVendorRequest",{vendorName:"obs-browser",requestType:"emit_event",requestData:{event_name:"ws-details",event_data:{wssDetails:r}}}),this.app.commands.executeCommandById("slides-studio:get-obs-scene-tags"),this.app.commands.executeCommandById("slides-studio:update-browsers-url"),this.app.commands.executeCommandById("slides-studio:set-slides-studio-obs-receiver")}),this.obs.on("ConnectionError",e=>{console.error("Socket error:",e)}),this.obs.on("CustomEvent",e=>{if(console.log("Message from OBS",e),e.event_name==="OSC-out"){let r=new Bc(e.address);Object.hasOwn(e,"arg1")&&r.append(e.arg1),Object.hasOwn(e,"arg2")&&r.append(e.arg2),Object.hasOwn(e,"arg3")&&r.append(e.arg3),Object.hasOwn(e,"arg4")&&r.append(e.arg4),Object.hasOwn(e,"arg5")&&r.append(e.arg5),Object.hasOwn(e,"arg6")&&r.append(e.arg6),Object.hasOwn(e,"arg7")&&r.append(e.arg7),console.log(`message to OSC device - ${e.osc_name}`,r),this.oscManager.sendMessage(e.osc_name,r)}if(e.event_name==="MIDI-out"){let r={type:e.arg1,channel:e.arg2,note:e.arg3,velocity:e.arg4,value:e.arg4,controller:e.arg3};console.log(`message to MIDI device - ${e.midi_name}`,r),this.midiManager.sendMidiMessage(e.midi_name,this.settings.midiDevices,r)}}),this.addCommand({id:"open-obs",name:"Open OBS",callback:async()=>{new _r.Notice("Trying to launch OBS");let e="hello";if(_r.Platform.isMacOS&&(e=`open -n -a "${this.settings.obsAppName_Text}"`,e+=` --args --collection "${this.settings.obsCollection_Text}"`,e+=` --remote-debugging-port=${this.settings.obsDebugPort_Text}`,e+=` --remote-allow-origins=http://localhost:${this.settings.obsDebugPort_Text}`,e+=` --websocket_port "${this.settings.websocketPort_Text}"`,e+=` --websocket_password "${this.settings.websocketPW_Text}"`,e+=" --multi",u8(e)),_r.Platform.isWin){let r=`${this.settings.obsAppPath_Text}${this.settings.obsAppName_Text}`,n=f8.default.dirname(r);process.chdir(n),e=`${this.settings.obsAppName_Text}`,e+=` --args --collection "${this.settings.obsCollection_Text}"`,e+=` --remote-debugging-port=${this.settings.obsDebugPort_Text}`,e+=` --remote-allow-origins=http://localhost:${this.settings.obsDebugPort_Text}`,e+=` --websocket_port "${this.settings.websocketPort_Text}"`,e+=` --websocket_password "${this.settings.websocketPW_Text}"`,e+=" --multi",u8(e)}}}),this.addCommand({id:"get-obs-scene-tags",name:"Get OBS tags",callback:async()=>{await this.getObsTags()}}),this.addCommand({id:"open-slide-studio-webview",name:"Open Slides Studio Webview",callback:async()=>{await this.openWebView()}}),this.addCommand({id:"copy-obs-browser-source-link",name:"Copy the Slides Url for OBS to the clipboard ",callback:async()=>{let r=`http://localhost:${this.settings.serverPort}/.obsidian/plugins/slides-studio/slides_studio/slides_studio_OBS_browser_source.html`;try{await navigator.clipboard.writeText(r),new _r.Notice("URL copied to clipboard successfully!")}catch(n){console.error("Failed to copy: ",n)}}}),this.addCommand({id:"set-slides-studio-obs-receiver",name:"Set the Url for Slides Studio Receiver OBS Browser Sourceto the clipboard ",callback:async()=>{let r=`http://localhost:${this.settings.serverPort}/.obsidian/plugins/slides-studio/slides_studio/slides_studio_OBS_browser_source.html`;try{this.obs.call("SetInputSettings",{inputName:"slides",inputSettings:{url:r}})}catch(n){console.error("Failed set slides studio receiver: ",n)}}}),this.addCommand({id:"update-browsers-url",name:"Update Slides Studio OBS browsers URL",callback:async()=>{let e=this.settings.serverPort,r=await this.obs.call("GetInputList",{inputKind:"browser_source"});for(let n=0;n<r.inputs.length;n++){let s=await this.obs.call("GetInputSettings",{inputUuid:r.inputs[n].inputUuid});console.log("settings",s);try{if(s.inputSettings.css.contains("--slides-studio-refresh")){let i=new URL(s.inputSettings.url),o=`http://localhost:${e}${i.pathname}`;this.obs.call("SetInputSettings",{inputUuid:r.inputs[n].inputUuid,inputSettings:{url:o}})}}catch(i){console.log(i)}}}}),this.addCommand({id:"refresh-obs-browsers",name:"Refresh ALL OBS browser sources",callback:async()=>{(await this.obs.call("GetInputList",{inputKind:"browser_source"})).forEach(async r=>{await this.obs.call("PressInputPropertiesButton",{inputUuid:r.inputUuid,propertyName:"refreshnocache"})})}}),this.addCommand({id:"connect-all-osc-devices",name:"Connect to ALL OSC devices",callback:async()=>{this.settings.oscDevices.forEach(e=>{e.name&&e.ip&&e.inPort&&e.outPort&&this.oscManager.connectDevice(e)})}}),this.addCommand({id:"connect-all-midi-devices",name:"Connect to ALL MIDI devices",callback:async()=>{this.settings.midiDevices.forEach(e=>{this.midiManager.connectDevice(e)})}})}async getObsTags(){new _r.Notice("Getting OBS Tags"),this.settings.scene_tags=[],this.settings.camera_tags=[],this.settings.camera_shape_tags=[],this.settings.slide_tags=[],await this.saveData(this.settings);try{let e=await this.obs.call("GetSceneList");e.scenes.forEach(r=>{if(r.sceneName.startsWith("Scene")){let n=r.sceneName;this.settings.scene_tags.includes(n)||this.settings.scene_tags.push(n)}}),await this.saveData(this.settings),e.scenes.find(r=>r.sceneName==="Camera Position")&&(await this.obs.call("GetSceneItemList",{sceneName:"Camera Position"})).sceneItems.forEach(n=>{this.settings.camera_tags.includes(n.sourceName)||this.settings.camera_tags.push(n.sourceName)}),e.scenes.find(r=>r.sceneName==="Slide Position")&&(await this.obs.call("GetSceneItemList",{sceneName:"Slide Position"})).sceneItems.forEach(n=>{this.settings.slide_tags.includes(n.sourceName)||this.settings.slide_tags.push(n.sourceName)}),e.scenes.find(r=>r.sceneName==="Camera Shape")&&(await this.obs.call("GetSceneItemList",{sceneName:"Camera Shape"})).sceneItems.forEach(n=>{this.settings.camera_shape_tags.includes(n.sourceName)||this.settings.camera_shape_tags.push(n.sourceName)}),await this.saveData(this.settings)}catch(e){console.error("Error fetching OBS tags",e),new _r.Notice("Failed to fetch OBS Tags. Is OBS connected?")}}async obsWSSconnect(e){try{await this.disconnect();let{obsWebSocketVersion:r,negotiatedRpcVersion:n}=await this.obs.connect(`ws://${e.IP}:${e.PORT}`,e.PW,{rpcVersion:1});console.log(`Connected to server ${r} (using RPC ${n})`),new _r.Notice("Connected to OBS WebSocket Server")}catch(r){new _r.Notice("Failed to connect to OBS WebSocket Server"),console.error("Failed to connect",r.code,r.message)}}async disconnect(){try{await this.obs.disconnect(),this.isObsConnected=!1,console.log("disconnected")}catch(e){console.error("disconnect catch",e)}}sendToOBS(e,r){let n=JSON.stringify(e.message);console.log("sending to OBS",e),this.obs.call("CallVendorRequest",{vendorName:"obs-browser",requestType:"emit_event",requestData:{event_name:r,event_data:{deviceName:e.deviceName,webSocketMessage:n}}})}async openView(){let{workspace:e}=this.app,r=null,n=e.getLeavesOfType(_h);n.length>0?r=n[0]:(r=e.getRightLeaf(!1),await r.setViewState({type:_h,active:!0})),e.revealLeaf(r)}async openWebView(){let{workspace:e}=this.app,r=null,n=e.getLeavesOfType(D0);if(n.length>0)r=n[0];else{r=e.getLeaf("tab");let s=this.settings.serverPort;console.log(s);let i=`http://localhost:${s}/.obsidian/plugins/slides-studio/slides_studio/`;console.log(i),await r.setViewState({type:"webviewer",state:{url:i,navigate:!0},active:!0})}e.revealLeaf(r)}getServerUrl(){return this.serverManager?this.serverManager.getUrl():null}onunload(){new _r.Notice("Disabled slides studio plugin"),this.serverManager&&this.serverManager.stop(),this.oscManager&&this.oscManager.disconnectAll(),this.midiManager&&this.midiManager.disconnectAll(this.settings.midiDevices),this.obs&&this.obs.disconnect()}};0&&(module.exports={});
/*! Bundled license information:

@fastify/proxy-addr/index.js:
  (*!
   * proxy-addr
   * Copyright(c) 2021 Fastify collaborators
   * Copyright(c) 2014-2016 Douglas Christopher Wilson
   * MIT Licensed
   *)

toad-cache/dist/toad-cache.cjs:
  (**
   * toad-cache
   *
   * @copyright 2024 Igor Savin <kibertoad@gmail.com>
   * @license MIT
   * @version 3.7.0
   *)

light-my-request/lib/form-data.js:
  (*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

escape-html/index.js:
  (*!
   * escape-html
   * Copyright(c) 2012-2013 TJ Holowaychuk
   * Copyright(c) 2015 Andreas Lubbe
   * Copyright(c) 2015 Tiancheng "Timothy" Gu
   * MIT Licensed
   *)

@fastify/send/lib/containsDotFile.js:
  (*!
   * send
   * Copyright(c) 2012 TJ Holowaychuk
   * Copyright(c) 2014-2022 Douglas Christopher Wilson
   * MIT Licensed
   *)

@fastify/send/lib/contentRange.js:
  (*!
   * send
   * Copyright(c) 2012 TJ Holowaychuk
   * Copyright(c) 2014-2022 Douglas Christopher Wilson
   * MIT Licensed
   *)

@fastify/send/lib/createHtmlDocument.js:
  (*!
   * send
   * Copyright(c) 2012 TJ Holowaychuk
   * Copyright(c) 2014-2022 Douglas Christopher Wilson
   * MIT Licensed
   *)

@fastify/send/lib/parseBytesRange.js:
  (*!
   * Based on range-parser
   *
   * Copyright(c) 2012-2014 TJ Holowaychuk
   * Copyright(c) 2015-2016 Douglas Christopher Wilson
   * MIT Licensed
   *)

depd/index.js:
  (*!
   * depd
   * Copyright(c) 2014-2018 Douglas Christopher Wilson
   * MIT Licensed
   *)

statuses/index.js:
  (*!
   * statuses
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2016 Douglas Christopher Wilson
   * MIT Licensed
   *)

toidentifier/index.js:
  (*!
   * toidentifier
   * Copyright(c) 2016 Douglas Christopher Wilson
   * MIT Licensed
   *)

http-errors/index.js:
  (*!
   * http-errors
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2016 Douglas Christopher Wilson
   * MIT Licensed
   *)

@fastify/send/index.js:
  (*!
   * send
   * Copyright(c) 2012 TJ Holowaychuk
   * Copyright(c) 2014-2022 Douglas Christopher Wilson
   * MIT Licensed
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

content-disposition/index.js:
  (*!
   * content-disposition
   * Copyright(c) 2014-2017 Douglas Christopher Wilson
   * MIT Licensed
   *)

webmidi/dist/esm/webmidi.esm.js:
  (**
   * The `Enumerations` class contains enumerations and arrays of elements used throughout the
   * library. All its properties are static and should be referenced using the class name. For
   * example: `Enumerations.CHANNEL_MESSAGES`.
   *
   * @license Apache-2.0
   * @since 3.0.0
   *)
  (**
   * The `Note` class represents a single musical note such as `"D3"`, `"G#4"`, `"F-1"`, `"Gb7"`, etc.
   *
   * `Note` objects can be played back on a single channel by calling
   * [`OutputChannel.playNote()`]{@link OutputChannel#playNote} or, on multiple channels of the same
   * output, by calling [`Output.playNote()`]{@link Output#playNote}.
   *
   * The note has [`attack`](#attack) and [`release`](#release) velocities set at `0.5` by default.
   * These can be changed by passing in the appropriate option. It is also possible to set a
   * system-wide default for attack and release velocities by using the
   * [`WebMidi.defaults`](WebMidi#defaults) property.
   *
   * If you prefer to work with raw MIDI values (`0` to `127`), you can use [`rawAttack`](#rawAttack) and
   * [`rawRelease`](#rawRelease) to both get and set the values.
   *
   * The note may have a [`duration`](#duration). If it does, playback will be automatically stopped
   * when the duration has elapsed by sending a `"noteoff"` event. By default, the duration is set to
   * `Infinity`. In this case, it will never stop playing unless explicitly stopped by calling a
   * method such as [`OutputChannel.stopNote()`]{@link OutputChannel#stopNote},
   * [`Output.stopNote()`]{@link Output#stopNote} or similar.
   *
   * @license Apache-2.0
   * @since 3.0.0
   *)
  (**
   * The `Utilities` class contains general-purpose utility methods. All methods are static and
   * should be called using the class name. For example: `Utilities.getNoteDetails("C4")`.
   *
   * @license Apache-2.0
   * @since 3.0.0
   *)
  (**
   * The `OutputChannel` class represents a single output MIDI channel. `OutputChannel` objects are
   * provided by an [`Output`](Output) port which, itself, is made available by a device. The
   * `OutputChannel` object is derived from the host's MIDI subsystem and should not be instantiated
   * directly.
   *
   * All 16 `OutputChannel` objects can be found inside the parent output's
   * [`channels`]{@link Output#channels} property.
   *
   * @param {Output} output The [`Output`](Output) this channel belongs to.
   * @param {number} number The MIDI channel number (`1` - `16`).
   *
   * @extends EventEmitter
   * @license Apache-2.0
   * @since 3.0.0
   *)
  (**
   * The `Output` class represents a single MIDI output port (not to be confused with a MIDI channel).
   * A port is made available by a MIDI device. A MIDI device can advertise several input and output
   * ports. Each port has 16 MIDI channels which can be accessed via the [`channels`](#channels)
   * property.
   *
   * The `Output` object is automatically instantiated by the library according to the host's MIDI
   * subsystem and should not be directly instantiated.
   *
   * You can access all available `Output` objects by referring to the
   * [`WebMidi.outputs`](WebMidi#outputs) array or by using methods such as
   * [`WebMidi.getOutputByName()`](WebMidi#getOutputByName) or
   * [`WebMidi.getOutputById()`](WebMidi#getOutputById).
   *
   * @fires Output#opened
   * @fires Output#disconnected
   * @fires Output#closed
   *
   * @extends EventEmitter
   * @license Apache-2.0
   *)
  (**
   * The `Forwarder` class allows the forwarding of MIDI messages to predetermined outputs. When you
   * call its [`forward()`](#forward) method, it will send the specified [`Message`](Message) object
   * to all the outputs listed in its [`destinations`](#destinations) property.
   *
   * If specific channels or message types have been defined in the [`channels`](#channels) or
   * [`types`](#types) properties, only messages matching the channels/types will be forwarded.
   *
   * While it can be manually instantiated, you are more likely to come across a `Forwarder` object as
   * the return value of the [`Input.addForwarder()`](Input#addForwarder) method.
   *
   * @license Apache-2.0
   * @since 3.0.0
   *)
  (**
   * The `InputChannel` class represents a single MIDI input channel (1-16) from a single input
   * device. This object is derived from the host's MIDI subsystem and should not be instantiated
   * directly.
   *
   * All 16 `InputChannel` objects can be found inside the input's [`channels`](Input#channels)
   * property.
   *
   * @fires InputChannel#midimessage
   * @fires InputChannel#unknownmessage
   *
   * @fires InputChannel#noteoff
   * @fires InputChannel#noteon
   * @fires InputChannel#keyaftertouch
   * @fires InputChannel#programchange
   * @fires InputChannel#channelaftertouch
   * @fires InputChannel#pitchbend
   *
   * @fires InputChannel#allnotesoff
   * @fires InputChannel#allsoundoff
   * @fires InputChannel#localcontrol
   * @fires InputChannel#monomode
   * @fires InputChannel#omnimode
   * @fires InputChannel#resetallcontrollers
   *
   * @fires InputChannel#event:nrpn
   * @fires InputChannel#event:nrpn-dataentrycoarse
   * @fires InputChannel#event:nrpn-dataentryfine
   * @fires InputChannel#event:nrpn-dataincrement
   * @fires InputChannel#event:nrpn-datadecrement
   * @fires InputChannel#event:rpn
   * @fires InputChannel#event:rpn-dataentrycoarse
   * @fires InputChannel#event:rpn-dataentryfine
   * @fires InputChannel#event:rpn-dataincrement
   * @fires InputChannel#event:rpn-datadecrement
   *
   * @fires InputChannel#controlchange
   * @fires InputChannel#event:controlchange-controllerxxx
   * @fires InputChannel#event:controlchange-bankselectcoarse
   * @fires InputChannel#event:controlchange-modulationwheelcoarse
   * @fires InputChannel#event:controlchange-breathcontrollercoarse
   * @fires InputChannel#event:controlchange-footcontrollercoarse
   * @fires InputChannel#event:controlchange-portamentotimecoarse
   * @fires InputChannel#event:controlchange-dataentrycoarse
   * @fires InputChannel#event:controlchange-volumecoarse
   * @fires InputChannel#event:controlchange-balancecoarse
   * @fires InputChannel#event:controlchange-pancoarse
   * @fires InputChannel#event:controlchange-expressioncoarse
   * @fires InputChannel#event:controlchange-effectcontrol1coarse
   * @fires InputChannel#event:controlchange-effectcontrol2coarse
   * @fires InputChannel#event:controlchange-generalpurposecontroller1
   * @fires InputChannel#event:controlchange-generalpurposecontroller2
   * @fires InputChannel#event:controlchange-generalpurposecontroller3
   * @fires InputChannel#event:controlchange-generalpurposecontroller4
   * @fires InputChannel#event:controlchange-bankselectfine
   * @fires InputChannel#event:controlchange-modulationwheelfine
   * @fires InputChannel#event:controlchange-breathcontrollerfine
   * @fires InputChannel#event:controlchange-footcontrollerfine
   * @fires InputChannel#event:controlchange-portamentotimefine
   * @fires InputChannel#event:controlchange-dataentryfine
   * @fires InputChannel#event:controlchange-channelvolumefine
   * @fires InputChannel#event:controlchange-balancefine
   * @fires InputChannel#event:controlchange-panfine
   * @fires InputChannel#event:controlchange-expressionfine
   * @fires InputChannel#event:controlchange-effectcontrol1fine
   * @fires InputChannel#event:controlchange-effectcontrol2fine
   * @fires InputChannel#event:controlchange-damperpedal
   * @fires InputChannel#event:controlchange-portamento
   * @fires InputChannel#event:controlchange-sostenuto
   * @fires InputChannel#event:controlchange-softpedal
   * @fires InputChannel#event:controlchange-legatopedal
   * @fires InputChannel#event:controlchange-hold2
   * @fires InputChannel#event:controlchange-soundvariation
   * @fires InputChannel#event:controlchange-resonance
   * @fires InputChannel#event:controlchange-releasetime
   * @fires InputChannel#event:controlchange-attacktime
   * @fires InputChannel#event:controlchange-brightness
   * @fires InputChannel#event:controlchange-decaytime
   * @fires InputChannel#event:controlchange-vibratorate
   * @fires InputChannel#event:controlchange-vibratodepth
   * @fires InputChannel#event:controlchange-vibratodelay
   * @fires InputChannel#event:controlchange-generalpurposecontroller5
   * @fires InputChannel#event:controlchange-generalpurposecontroller6
   * @fires InputChannel#event:controlchange-generalpurposecontroller7
   * @fires InputChannel#event:controlchange-generalpurposecontroller8
   * @fires InputChannel#event:controlchange-portamentocontrol
   * @fires InputChannel#event:controlchange-highresolutionvelocityprefix
   * @fires InputChannel#event:controlchange-effect1depth
   * @fires InputChannel#event:controlchange-effect2depth
   * @fires InputChannel#event:controlchange-effect3depth
   * @fires InputChannel#event:controlchange-effect4depth
   * @fires InputChannel#event:controlchange-effect5depth
   * @fires InputChannel#event:controlchange-dataincrement
   * @fires InputChannel#event:controlchange-datadecrement
   * @fires InputChannel#event:controlchange-nonregisteredparameterfine
   * @fires InputChannel#event:controlchange-nonregisteredparametercoarse
   * @fires InputChannel#event:controlchange-registeredparameterfine
   * @fires InputChannel#event:controlchange-registeredparametercoarse
   * @fires InputChannel#event:controlchange-allsoundoff
   * @fires InputChannel#event:controlchange-resetallcontrollers
   * @fires InputChannel#event:controlchange-localcontrol
   * @fires InputChannel#event:controlchange-allnotesoff
   * @fires InputChannel#event:controlchange-omnimodeoff
   * @fires InputChannel#event:controlchange-omnimodeon
   * @fires InputChannel#event:controlchange-monomodeon
   * @fires InputChannel#event:controlchange-polymodeon
   * @fires InputChannel#event:
   *
   * @extends EventEmitter
   * @license Apache-2.0
   * @since 3.0.0
   *)
  (**
   * The `Message` class represents a single MIDI message. It has several properties that make it
   * easy to make sense of the binary data it contains.
   *
   * @license Apache-2.0
   * @since 3.0.0
   *)
  (**
   * The `Input` class represents a single MIDI input port. This object is automatically instantiated
   * by the library according to the host's MIDI subsystem and does not need to be directly
   * instantiated. Instead, you can access all `Input` objects by referring to the
   * [`WebMidi.inputs`](WebMidi#inputs) array. You can also retrieve inputs by using methods such as
   * [`WebMidi.getInputByName()`](WebMidi#getInputByName) and
   * [`WebMidi.getInputById()`](WebMidi#getInputById).
   *
   * Note that a single MIDI device may expose several inputs and/or outputs.
   *
   * **Important**: the `Input` class does not directly fire channel-specific MIDI messages
   * (such as [`noteon`](InputChannel#event:noteon) or
   * [`controlchange`](InputChannel#event:controlchange), etc.). The [`InputChannel`](InputChannel)
   * object does that. However, you can still use the
   * [`Input.addListener()`](#addListener) method to listen to channel-specific events on multiple
   * [`InputChannel`](InputChannel) objects at once.
   *
   * @fires Input#opened
   * @fires Input#disconnected
   * @fires Input#closed
   * @fires Input#midimessage
   *
   * @fires Input#sysex
   * @fires Input#timecode
   * @fires Input#songposition
   * @fires Input#songselect
   * @fires Input#tunerequest
   * @fires Input#clock
   * @fires Input#start
   * @fires Input#continue
   * @fires Input#stop
   * @fires Input#activesensing
   * @fires Input#reset
   *
   * @fires Input#unknownmidimessage
   *
   * @extends EventEmitter
   * @license Apache-2.0
   *)
  (**
   * The `WebMidi` object makes it easier to work with the low-level Web MIDI API. Basically, it
   * simplifies sending outgoing MIDI messages and reacting to incoming MIDI messages.
   *
   * When using the WebMidi.js library, you should know that the `WebMidi` class has already been
   * instantiated. You cannot instantiate it yourself. If you use the **IIFE** version, you should
   * simply use the global object called `WebMidi`. If you use the **CJS** (CommonJS) or **ESM** (ES6
   * module) version, you get an already-instantiated object when you import the module.
   *
   * @fires WebMidi#connected
   * @fires WebMidi#disabled
   * @fires WebMidi#disconnected
   * @fires WebMidi#enabled
   * @fires WebMidi#error
   * @fires WebMidi#midiaccessgranted
   * @fires WebMidi#portschanged
   *
   * @extends EventEmitter
   * @license Apache-2.0
   *)
*/
